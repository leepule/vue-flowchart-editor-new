(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["vue-flowchart-editor"] = factory();
	else
		root["vue-flowchart-editor"] = factory();
})((typeof self !== 'undefined' ? self : this), function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "2b1f");
/******/ })
/************************************************************************/
/******/ ({

/***/ "0034":
/***/ (function(module, exports, __webpack_require__) {

var baseIsNative = __webpack_require__("6136"),
    getValue = __webpack_require__("0102");

/**
 * Gets the native function at `key` of `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the method to get.
 * @returns {*} Returns the function if it's native, else `undefined`.
 */
function getNative(object, key) {
  var value = getValue(object, key);
  return baseIsNative(value) ? value : undefined;
}

module.exports = getNative;


/***/ }),

/***/ "00d2":
/***/ (function(module, exports) {

/**
 * This function is like
 * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)
 * except that it includes inherited enumerable properties.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function nativeKeysIn(object) {
  var result = [];
  if (object != null) {
    for (var key in Object(object)) {
      result.push(key);
    }
  }
  return result;
}

module.exports = nativeKeysIn;


/***/ }),

/***/ "0102":
/***/ (function(module, exports) {

/**
 * Gets the value at `key` of `object`.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */
function getValue(object, key) {
  return object == null ? undefined : object[key];
}

module.exports = getValue;


/***/ }),

/***/ "0190":
/***/ (function(module, exports, __webpack_require__) {

var baseTimes = __webpack_require__("0a96"),
    isArguments = __webpack_require__("54bf"),
    isArray = __webpack_require__("f868"),
    isBuffer = __webpack_require__("943c"),
    isIndex = __webpack_require__("4de3"),
    isTypedArray = __webpack_require__("94ea");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Creates an array of the enumerable property names of the array-like `value`.
 *
 * @private
 * @param {*} value The value to query.
 * @param {boolean} inherited Specify returning inherited property names.
 * @returns {Array} Returns the array of property names.
 */
function arrayLikeKeys(value, inherited) {
  var isArr = isArray(value),
      isArg = !isArr && isArguments(value),
      isBuff = !isArr && !isArg && isBuffer(value),
      isType = !isArr && !isArg && !isBuff && isTypedArray(value),
      skipIndexes = isArr || isArg || isBuff || isType,
      result = skipIndexes ? baseTimes(value.length, String) : [],
      length = result.length;

  for (var key in value) {
    if ((inherited || hasOwnProperty.call(value, key)) &&
        !(skipIndexes && (
           // Safari 9 has enumerable `arguments.length` in strict mode.
           key == 'length' ||
           // Node.js 0.10 has enumerable non-index properties on buffers.
           (isBuff && (key == 'offset' || key == 'parent')) ||
           // PhantomJS 2 has enumerable non-index properties on typed arrays.
           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||
           // Skip index properties.
           isIndex(key, length)
        ))) {
      result.push(key);
    }
  }
  return result;
}

module.exports = arrayLikeKeys;


/***/ }),

/***/ "01900":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var fails = __webpack_require__("e835");
var toIndexedObject = __webpack_require__("a330");
var nativeGetOwnPropertyDescriptor = __webpack_require__("1c2b").f;
var DESCRIPTORS = __webpack_require__("98c8");

var FORCED = !DESCRIPTORS || fails(function () { nativeGetOwnPropertyDescriptor(1); });

// `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor
$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {
  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {
    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);
  }
});


/***/ }),

/***/ "01a3":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_SYMBOL = __webpack_require__("1942");

/* eslint-disable es/no-symbol -- safe */
module.exports = NATIVE_SYMBOL && !!Symbol['for'] && !!Symbol.keyFor;


/***/ }),

/***/ "026b":
/***/ (function(module, exports) {

/** Used to compose unicode character classes. */
var rsAstralRange = '\\ud800-\\udfff',
    rsComboMarksRange = '\\u0300-\\u036f',
    reComboHalfMarksRange = '\\ufe20-\\ufe2f',
    rsComboSymbolsRange = '\\u20d0-\\u20ff',
    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,
    rsVarRange = '\\ufe0e\\ufe0f';

/** Used to compose unicode capture groups. */
var rsZWJ = '\\u200d';

/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */
var reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');

/**
 * Checks if `string` contains Unicode symbols.
 *
 * @private
 * @param {string} string The string to inspect.
 * @returns {boolean} Returns `true` if a symbol is found, else `false`.
 */
function hasUnicode(string) {
  return reHasUnicode.test(string);
}

module.exports = hasUnicode;


/***/ }),

/***/ "02a9":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
/**
 * @fileoverview 线
 * @author dxq613@gmail.com
 */
var g_math_1 = __webpack_require__("4502");
var base_1 = __webpack_require__("98ae");
var line_1 = __webpack_require__("5ad5");
var ArrowUtil = __webpack_require__("a5a4");
var Line = /** @class */ (function (_super) {
    tslib_1.__extends(Line, _super);
    function Line() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Line.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: false, endArrow: false });
    };
    Line.prototype.initAttrs = function (attrs) {
        this.setArrow();
    };
    // 更新属性时，检测是否更改了箭头
    Line.prototype.onAttrChange = function (name, value, originValue) {
        _super.prototype.onAttrChange.call(this, name, value, originValue);
        // 由于箭头的绘制依赖于 line 的诸多 attrs，因此这里不再对每个 attr 进行判断，attr 每次变化都会影响箭头的更新
        this.setArrow();
    };
    Line.prototype.setArrow = function () {
        var attrs = this.attr();
        var x1 = attrs.x1, y1 = attrs.y1, x2 = attrs.x2, y2 = attrs.y2, startArrow = attrs.startArrow, endArrow = attrs.endArrow;
        if (startArrow) {
            ArrowUtil.addStartArrow(this, attrs, x2, y2, x1, y1);
        }
        if (endArrow) {
            ArrowUtil.addEndArrow(this, attrs, x1, y1, x2, y2);
        }
    };
    Line.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {
        if (!isStroke || !lineWidth) {
            return false;
        }
        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;
        return line_1.default(x1, y1, x2, y2, lineWidth, x, y);
    };
    Line.prototype.createPath = function (context) {
        var attrs = this.attr();
        var x1 = attrs.x1, y1 = attrs.y1, x2 = attrs.x2, y2 = attrs.y2, startArrow = attrs.startArrow, endArrow = attrs.endArrow;
        var startArrowDistance = {
            dx: 0,
            dy: 0,
        };
        var endArrowDistance = {
            dx: 0,
            dy: 0,
        };
        if (startArrow && startArrow.d) {
            startArrowDistance = ArrowUtil.getShortenOffset(x1, y1, x2, y2, attrs.startArrow.d);
        }
        if (endArrow && endArrow.d) {
            endArrowDistance = ArrowUtil.getShortenOffset(x1, y1, x2, y2, attrs.endArrow.d);
        }
        context.beginPath();
        // 如果自定义箭头，线条相应缩进
        context.moveTo(x1 + startArrowDistance.dx, y1 + startArrowDistance.dy);
        context.lineTo(x2 - endArrowDistance.dx, y2 - endArrowDistance.dy);
    };
    Line.prototype.afterDrawPath = function (context) {
        var startArrowShape = this.get('startArrowShape');
        var endArrowShape = this.get('endArrowShape');
        if (startArrowShape) {
            startArrowShape.draw(context);
        }
        if (endArrowShape) {
            endArrowShape.draw(context);
        }
    };
    /**
     * Get length of line
     * @return {number} length
     */
    Line.prototype.getTotalLength = function () {
        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;
        return g_math_1.Line.length(x1, y1, x2, y2);
    };
    /**
     * Get point according to ratio
     * @param {number} ratio
     * @return {Point} point
     */
    Line.prototype.getPoint = function (ratio) {
        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;
        return g_math_1.Line.pointAt(x1, y1, x2, y2, ratio);
    };
    return Line;
}(base_1.default));
exports.default = Line;
//# sourceMappingURL=line.js.map

/***/ }),

/***/ "0509":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var exec = __webpack_require__("0a01");

// `RegExp.prototype.exec` method
// https://tc39.es/ecma262/#sec-regexp.prototype.exec
$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {
  exec: exec
});


/***/ }),

/***/ "0515":
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf = __webpack_require__("1a8d");

/**
 * Checks if a list cache value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf ListCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function listCacheHas(key) {
  return assocIndexOf(this.__data__, key) > -1;
}

module.exports = listCacheHas;


/***/ }),

/***/ "05ca":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $propertyIsEnumerable = {}.propertyIsEnumerable;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Nashorn ~ JDK8 bug
var NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);

// `Object.prototype.propertyIsEnumerable` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable
exports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {
  var descriptor = getOwnPropertyDescriptor(this, V);
  return !!descriptor && descriptor.enumerable;
} : $propertyIsEnumerable;


/***/ }),

/***/ "071d":
/***/ (function(module, exports) {

/** Used for built-in method references. */
var funcProto = Function.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/**
 * Converts `func` to its source code.
 *
 * @private
 * @param {Function} func The function to convert.
 * @returns {string} Returns the source code.
 */
function toSource(func) {
  if (func != null) {
    try {
      return funcToString.call(func);
    } catch (e) {}
    try {
      return (func + '');
    } catch (e) {}
  }
  return '';
}

module.exports = toSource;


/***/ }),

/***/ "07e7":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var getBuiltIn = __webpack_require__("4fed");
var apply = __webpack_require__("b376");
var call = __webpack_require__("ded0");
var uncurryThis = __webpack_require__("1043");
var fails = __webpack_require__("e835");
var isCallable = __webpack_require__("fe72");
var isSymbol = __webpack_require__("ef41");
var arraySlice = __webpack_require__("f600");
var getReplacerFunction = __webpack_require__("ae06");
var NATIVE_SYMBOL = __webpack_require__("1942");

var $String = String;
var $stringify = getBuiltIn('JSON', 'stringify');
var exec = uncurryThis(/./.exec);
var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var replace = uncurryThis(''.replace);
var numberToString = uncurryThis(1.0.toString);

var tester = /[\uD800-\uDFFF]/g;
var low = /^[\uD800-\uDBFF]$/;
var hi = /^[\uDC00-\uDFFF]$/;

var WRONG_SYMBOLS_CONVERSION = !NATIVE_SYMBOL || fails(function () {
  var symbol = getBuiltIn('Symbol')('stringify detection');
  // MS Edge converts symbol values to JSON as {}
  return $stringify([symbol]) !== '[null]'
    // WebKit converts symbol values to JSON as null
    || $stringify({ a: symbol }) !== '{}'
    // V8 throws on boxed symbols
    || $stringify(Object(symbol)) !== '{}';
});

// https://github.com/tc39/proposal-well-formed-stringify
var ILL_FORMED_UNICODE = fails(function () {
  return $stringify('\uDF06\uD834') !== '"\\udf06\\ud834"'
    || $stringify('\uDEAD') !== '"\\udead"';
});

var stringifyWithSymbolsFix = function (it, replacer) {
  var args = arraySlice(arguments);
  var $replacer = getReplacerFunction(replacer);
  if (!isCallable($replacer) && (it === undefined || isSymbol(it))) return; // IE8 returns string on undefined
  args[1] = function (key, value) {
    // some old implementations (like WebKit) could pass numbers as keys
    if (isCallable($replacer)) value = call($replacer, this, $String(key), value);
    if (!isSymbol(value)) return value;
  };
  return apply($stringify, null, args);
};

var fixIllFormed = function (match, offset, string) {
  var prev = charAt(string, offset - 1);
  var next = charAt(string, offset + 1);
  if ((exec(low, match) && !exec(hi, next)) || (exec(hi, match) && !exec(low, prev))) {
    return '\\u' + numberToString(charCodeAt(match, 0), 16);
  } return match;
};

if ($stringify) {
  // `JSON.stringify` method
  // https://tc39.es/ecma262/#sec-json.stringify
  $({ target: 'JSON', stat: true, arity: 3, forced: WRONG_SYMBOLS_CONVERSION || ILL_FORMED_UNICODE }, {
    // eslint-disable-next-line no-unused-vars -- required for `.length`
    stringify: function stringify(it, replacer, space) {
      var args = arraySlice(arguments);
      var result = apply(WRONG_SYMBOLS_CONVERSION ? stringifyWithSymbolsFix : $stringify, null, args);
      return ILL_FORMED_UNICODE && typeof result == 'string' ? replace(result, tester, fixIllFormed) : result;
    }
  });
}


/***/ }),

/***/ "0869":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var line_1 = __webpack_require__("5ad5");
function inPolyline(points, lineWidth, x, y, isClose) {
    var count = points.length;
    if (count < 2) {
        return false;
    }
    for (var i = 0; i < count - 1; i++) {
        var x1 = points[i][0];
        var y1 = points[i][1];
        var x2 = points[i + 1][0];
        var y2 = points[i + 1][1];
        if (line_1.default(x1, y1, x2, y2, lineWidth, x, y)) {
            return true;
        }
    }
    // 如果封闭，则计算起始点和结束点的边
    if (isClose) {
        var first = points[0];
        var last = points[count - 1];
        if (line_1.default(first[0], first[1], last[0], last[1], lineWidth, x, y)) {
            return true;
        }
    }
    return false;
}
exports.default = inPolyline;
//# sourceMappingURL=polyline.js.map

/***/ }),

/***/ "08f1":
/***/ (function(module, exports, __webpack_require__) {

var castPath = __webpack_require__("6a1d"),
    isArguments = __webpack_require__("54bf"),
    isArray = __webpack_require__("f868"),
    isIndex = __webpack_require__("4de3"),
    isLength = __webpack_require__("9a38"),
    toKey = __webpack_require__("d202");

/**
 * Checks if `path` exists on `object`.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array|string} path The path to check.
 * @param {Function} hasFunc The function to check properties.
 * @returns {boolean} Returns `true` if `path` exists, else `false`.
 */
function hasPath(object, path, hasFunc) {
  path = castPath(path, object);

  var index = -1,
      length = path.length,
      result = false;

  while (++index < length) {
    var key = toKey(path[index]);
    if (!(result = object != null && hasFunc(object, key))) {
      break;
    }
    object = object[key];
  }
  if (result || ++index != length) {
    return result;
  }
  length = object == null ? 0 : object.length;
  return !!length && isLength(length) && isIndex(key, length) &&
    (isArray(object) || isArguments(object));
}

module.exports = hasPath;


/***/ }),

/***/ "0a01":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable regexp/no-empty-capturing-group, regexp/no-empty-group, regexp/no-lazy-ends -- testing */
/* eslint-disable regexp/no-useless-quantifier -- testing */
var call = __webpack_require__("ded0");
var uncurryThis = __webpack_require__("1043");
var toString = __webpack_require__("502b");
var regexpFlags = __webpack_require__("2bc1");
var stickyHelpers = __webpack_require__("c111");
var shared = __webpack_require__("f823");
var create = __webpack_require__("6943");
var getInternalState = __webpack_require__("d987").get;
var UNSUPPORTED_DOT_ALL = __webpack_require__("2f37");
var UNSUPPORTED_NCG = __webpack_require__("c7fc");

var nativeReplace = shared('native-string-replace', String.prototype.replace);
var nativeExec = RegExp.prototype.exec;
var patchedExec = nativeExec;
var charAt = uncurryThis(''.charAt);
var indexOf = uncurryThis(''.indexOf);
var replace = uncurryThis(''.replace);
var stringSlice = uncurryThis(''.slice);

var UPDATES_LAST_INDEX_WRONG = (function () {
  var re1 = /a/;
  var re2 = /b*/g;
  call(nativeExec, re1, 'a');
  call(nativeExec, re2, 'a');
  return re1.lastIndex !== 0 || re2.lastIndex !== 0;
})();

var UNSUPPORTED_Y = stickyHelpers.BROKEN_CARET;

// nonparticipating capturing group, copied from es5-shim's String#split patch.
var NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;

var PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y || UNSUPPORTED_DOT_ALL || UNSUPPORTED_NCG;

if (PATCH) {
  patchedExec = function exec(string) {
    var re = this;
    var state = getInternalState(re);
    var str = toString(string);
    var raw = state.raw;
    var result, reCopy, lastIndex, match, i, object, group;

    if (raw) {
      raw.lastIndex = re.lastIndex;
      result = call(patchedExec, raw, str);
      re.lastIndex = raw.lastIndex;
      return result;
    }

    var groups = state.groups;
    var sticky = UNSUPPORTED_Y && re.sticky;
    var flags = call(regexpFlags, re);
    var source = re.source;
    var charsAdded = 0;
    var strCopy = str;

    if (sticky) {
      flags = replace(flags, 'y', '');
      if (indexOf(flags, 'g') === -1) {
        flags += 'g';
      }

      strCopy = stringSlice(str, re.lastIndex);
      // Support anchored sticky behavior.
      if (re.lastIndex > 0 && (!re.multiline || re.multiline && charAt(str, re.lastIndex - 1) !== '\n')) {
        source = '(?: ' + source + ')';
        strCopy = ' ' + strCopy;
        charsAdded++;
      }
      // ^(? + rx + ) is needed, in combination with some str slicing, to
      // simulate the 'y' flag.
      reCopy = new RegExp('^(?:' + source + ')', flags);
    }

    if (NPCG_INCLUDED) {
      reCopy = new RegExp('^' + source + '$(?!\\s)', flags);
    }
    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;

    match = call(nativeExec, sticky ? reCopy : re, strCopy);

    if (sticky) {
      if (match) {
        match.input = stringSlice(match.input, charsAdded);
        match[0] = stringSlice(match[0], charsAdded);
        match.index = re.lastIndex;
        re.lastIndex += match[0].length;
      } else re.lastIndex = 0;
    } else if (UPDATES_LAST_INDEX_WRONG && match) {
      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;
    }
    if (NPCG_INCLUDED && match && match.length > 1) {
      // Fix browsers whose `exec` methods don't consistently return `undefined`
      // for NPCG, like IE8. NOTE: This doesn't work for /(.?)?/
      call(nativeReplace, match[0], reCopy, function () {
        for (i = 1; i < arguments.length - 2; i++) {
          if (arguments[i] === undefined) match[i] = undefined;
        }
      });
    }

    if (match && groups) {
      match.groups = object = create(null);
      for (i = 0; i < groups.length; i++) {
        group = groups[i];
        object[group[0]] = match[group[1]];
      }
    }

    return match;
  };
}

module.exports = patchedExec;


/***/ }),

/***/ "0a94":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// `CreateIterResultObject` abstract operation
// https://tc39.es/ecma262/#sec-createiterresultobject
module.exports = function (value, done) {
  return { value: value, done: done };
};


/***/ }),

/***/ "0a96":
/***/ (function(module, exports) {

/**
 * The base implementation of `_.times` without support for iteratee shorthands
 * or max array length checks.
 *
 * @private
 * @param {number} n The number of times to invoke `iteratee`.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the array of results.
 */
function baseTimes(n, iteratee) {
  var index = -1,
      result = Array(n);

  while (++index < n) {
    result[index] = iteratee(index);
  }
  return result;
}

module.exports = baseTimes;


/***/ }),

/***/ "0c58":
/***/ (function(module, exports, __webpack_require__) {

var ListCache = __webpack_require__("4127"),
    Map = __webpack_require__("7614"),
    MapCache = __webpack_require__("f6cb");

/** Used as the size to enable large array optimizations. */
var LARGE_ARRAY_SIZE = 200;

/**
 * Sets the stack `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Stack
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the stack cache instance.
 */
function stackSet(key, value) {
  var data = this.__data__;
  if (data instanceof ListCache) {
    var pairs = data.__data__;
    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {
      pairs.push([key, value]);
      this.size = ++data.size;
      return this;
    }
    data = this.__data__ = new MapCache(pairs);
  }
  data.set(key, value);
  this.size = data.size;
  return this;
}

module.exports = stackSet;


/***/ }),

/***/ "0e36":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove from `core-js@4` since it's moved to entry points
__webpack_require__("0509");
var $ = __webpack_require__("a884");
var call = __webpack_require__("ded0");
var isCallable = __webpack_require__("fe72");
var anObject = __webpack_require__("9774");
var toString = __webpack_require__("502b");

var DELEGATES_TO_EXEC = function () {
  var execCalled = false;
  var re = /[ac]/;
  re.exec = function () {
    execCalled = true;
    return /./.exec.apply(this, arguments);
  };
  return re.test('abc') === true && execCalled;
}();

var nativeTest = /./.test;

// `RegExp.prototype.test` method
// https://tc39.es/ecma262/#sec-regexp.prototype.test
$({ target: 'RegExp', proto: true, forced: !DELEGATES_TO_EXEC }, {
  test: function (S) {
    var R = anObject(this);
    var string = toString(S);
    var exec = R.exec;
    if (!isCallable(exec)) return call(nativeTest, R, string);
    var result = call(exec, R, string);
    if (result === null) return false;
    anObject(result);
    return true;
  }
});


/***/ }),

/***/ "0ebc":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var TO_STRING_TAG_SUPPORT = __webpack_require__("51cb");
var classof = __webpack_require__("e013");

// `Object.prototype.toString` method implementation
// https://tc39.es/ecma262/#sec-object.prototype.tostring
module.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {
  return '[object ' + classof(this) + ']';
};


/***/ }),

/***/ "1043":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_BIND = __webpack_require__("48d3");

var FunctionPrototype = Function.prototype;
var call = FunctionPrototype.call;
var uncurryThisWithBind = NATIVE_BIND && FunctionPrototype.bind.bind(call, call);

module.exports = NATIVE_BIND ? uncurryThisWithBind : function (fn) {
  return function () {
    return call.apply(fn, arguments);
  };
};


/***/ }),

/***/ "10d0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var aCallable = __webpack_require__("d0d3");

module.exports = function (object, key, method) {
  try {
    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
    return uncurryThis(aCallable(Object.getOwnPropertyDescriptor(object, key)[method]));
  } catch (error) { /* empty */ }
};


/***/ }),

/***/ "1139":
/***/ (function(module, exports, __webpack_require__) {

var createCaseFirst = __webpack_require__("c53c");

/**
 * Converts the first character of `string` to upper case.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category String
 * @param {string} [string=''] The string to convert.
 * @returns {string} Returns the converted string.
 * @example
 *
 * _.upperFirst('fred');
 * // => 'Fred'
 *
 * _.upperFirst('FRED');
 * // => 'FRED'
 */
var upperFirst = createCaseFirst('toUpperCase');

module.exports = upperFirst;


/***/ }),

/***/ "1349":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var fails = __webpack_require__("e835");

// V8 ~ Chrome 36-
// https://bugs.chromium.org/p/v8/issues/detail?id=3334
module.exports = DESCRIPTORS && fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(function () { /* empty */ }, 'prototype', {
    value: 42,
    writable: false
  }).prototype !== 42;
});


/***/ }),

/***/ "139b":
/***/ (function(module, exports) {

/**
 * Checks if `value` is the
 * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)
 * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an object, else `false`.
 * @example
 *
 * _.isObject({});
 * // => true
 *
 * _.isObject([1, 2, 3]);
 * // => true
 *
 * _.isObject(_.noop);
 * // => true
 *
 * _.isObject(null);
 * // => false
 */
function isObject(value) {
  var type = typeof value;
  return value != null && (type == 'object' || type == 'function');
}

module.exports = isObject;


/***/ }),

/***/ "158b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var path = __webpack_require__("f9fa");
var hasOwn = __webpack_require__("85ed");
var wrappedWellKnownSymbolModule = __webpack_require__("b604");
var defineProperty = __webpack_require__("80ea").f;

module.exports = function (NAME) {
  var Symbol = path.Symbol || (path.Symbol = {});
  if (!hasOwn(Symbol, NAME)) defineProperty(Symbol, NAME, {
    value: wrappedWellKnownSymbolModule.f(NAME)
  });
};


/***/ }),

/***/ "1664":
/***/ (function(module, exports, __webpack_require__) {

var getMapData = __webpack_require__("7a83");

/**
 * Sets the map `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf MapCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the map cache instance.
 */
function mapCacheSet(key, value) {
  var data = getMapData(this, key),
      size = data.size;

  data.set(key, value);
  this.size += data.size == size ? 0 : 1;
  return this;
}

module.exports = mapCacheSet;


/***/ }),

/***/ "171f":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview dom
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var util_1 = __webpack_require__("6d77");
var constant_1 = __webpack_require__("7a93");
var base_1 = __webpack_require__("6cb2");
var Dom = /** @class */ (function (_super) {
    tslib_1.__extends(Dom, _super);
    function Dom() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'dom';
        _this.canFill = false;
        _this.canStroke = false;
        return _this;
    }
    Dom.prototype.createPath = function (context, targetAttrs) {
        var attrs = this.attr();
        var el = this.get('el');
        util_1.each(targetAttrs || attrs, function (value, attr) {
            if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
        if (typeof attrs['html'] === 'function') {
            var element = attrs['html'].call(this, attrs);
            if (element instanceof Element || element instanceof HTMLDocument) {
                var children = el.childNodes;
                for (var i = children.length - 1; i >= 0; i--) {
                    el.removeChild(children[i]);
                }
                el.appendChild(element); // append to el if it's an element
            }
            else {
                el.innerHTML = element; // set innerHTML
            }
        }
        else {
            el.innerHTML = attrs['html']; // set innerHTML
        }
    };
    return Dom;
}(base_1.default));
exports.default = Dom;
//# sourceMappingURL=dom.js.map

/***/ }),

/***/ "17da":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var hasOwn = __webpack_require__("85ed");
var toIndexedObject = __webpack_require__("a330");
var indexOf = __webpack_require__("5cd5").indexOf;
var hiddenKeys = __webpack_require__("b920");

var push = uncurryThis([].push);

module.exports = function (object, names) {
  var O = toIndexedObject(object);
  var i = 0;
  var result = [];
  var key;
  for (key in O) !hasOwn(hiddenKeys, key) && hasOwn(O, key) && push(result, key);
  // Don't enum bug & hidden keys
  while (names.length > i) if (hasOwn(O, key = names[i++])) {
    ~indexOf(result, key) || push(result, key);
  }
  return result;
};


/***/ }),

/***/ "1942":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable es/no-symbol -- required for testing */
var V8_VERSION = __webpack_require__("8423");
var fails = __webpack_require__("e835");
var globalThis = __webpack_require__("92e2");

var $String = globalThis.String;

// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing
module.exports = !!Object.getOwnPropertySymbols && !fails(function () {
  var symbol = Symbol('symbol detection');
  // Chrome 38 Symbol has incorrect toString conversion
  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances
  // nb: Do not call `String` directly to avoid this being optimized out to `symbol+''` which will,
  // of course, fail.
  return !$String(symbol) || !(Object(symbol) instanceof Symbol) ||
    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances
    !Symbol.sham && V8_VERSION && V8_VERSION < 41;
});


/***/ }),

/***/ "1a8d":
/***/ (function(module, exports, __webpack_require__) {

var eq = __webpack_require__("4e90");

/**
 * Gets the index at which the `key` is found in `array` of key-value pairs.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {*} key The key to search for.
 * @returns {number} Returns the index of the matched value, else `-1`.
 */
function assocIndexOf(array, key) {
  var length = array.length;
  while (length--) {
    if (eq(array[length][0], key)) {
      return length;
    }
  }
  return -1;
}

module.exports = assocIndexOf;


/***/ }),

/***/ "1bde":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview Marker
 * @author dxq613@gmail.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var util_1 = __webpack_require__("6d77");
var path_util_1 = __webpack_require__("fd5d");
var base_1 = __webpack_require__("98ae");
var util_2 = __webpack_require__("1e49");
var draw_1 = __webpack_require__("a394");
var Symbols = {
    // 圆
    circle: function (x, y, r) {
        return [
            ['M', x - r, y],
            ['A', r, r, 0, 1, 0, x + r, y],
            ['A', r, r, 0, 1, 0, x - r, y],
        ];
    },
    // 正方形
    square: function (x, y, r) {
        return [['M', x - r, y - r], ['L', x + r, y - r], ['L', x + r, y + r], ['L', x - r, y + r], ['Z']];
    },
    // 菱形
    diamond: function (x, y, r) {
        return [['M', x - r, y], ['L', x, y - r], ['L', x + r, y], ['L', x, y + r], ['Z']];
    },
    // 三角形
    triangle: function (x, y, r) {
        var diffY = r * Math.sin((1 / 3) * Math.PI);
        return [['M', x - r, y + diffY], ['L', x, y - diffY], ['L', x + r, y + diffY], ['Z']];
    },
    // 倒三角形
    'triangle-down': function (x, y, r) {
        var diffY = r * Math.sin((1 / 3) * Math.PI);
        return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x, y + diffY], ['Z']];
    },
};
var Marker = /** @class */ (function (_super) {
    tslib_1.__extends(Marker, _super);
    function Marker() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Marker.prototype.initAttrs = function (attrs) {
        this._resetParamsCache();
    };
    // 重置绘制 path 存储的缓存
    Marker.prototype._resetParamsCache = function () {
        // 为了加速 path 的绘制、拾取和计算，这个地方可以缓存很多东西
        // 这些缓存都是第一次需要时计算和存储，虽然增加了复杂度，但是频繁调用的方法，性能有很大提升
        this.set('paramsCache', {}); // 清理缓存
    };
    // 更新属性时，检测是否更改了 path
    Marker.prototype.onAttrChange = function (name, value, originValue) {
        _super.prototype.onAttrChange.call(this, name, value, originValue);
        if (['symbol', 'x', 'y', 'r', 'radius'].indexOf(name) !== -1) {
            // path 相关属性更改时，清理缓存
            this._resetParamsCache();
        }
    };
    // 仅仅使用包围盒检测来进行拾取
    // 所以不需要复写 isInStrokeOrPath 的方法
    Marker.prototype.isOnlyHitBox = function () {
        return true;
    };
    Marker.prototype._getR = function (attrs) {
        // 兼容 r 和 radius 两种写法，推荐使用 r
        return util_1.isNil(attrs.r) ? attrs.radius : attrs.r;
    };
    Marker.prototype._getPath = function () {
        var attrs = this.attr();
        var x = attrs.x, y = attrs.y;
        var symbol = attrs.symbol || 'circle';
        var r = this._getR(attrs);
        var method;
        var path;
        if (util_2.isFunction(symbol)) {
            method = symbol;
            path = method(x, y, r);
            // 将 path 转成绝对路径
            path = path_util_1.path2Absolute(path);
        }
        else {
            // 内置 symbol 的 path 都是绝对路径，直接绘制即可，不需要对 path 进行特殊处理
            method = Marker.Symbols[symbol];
            if (!method) {
                console.warn(symbol + " marker is not supported.");
                return null;
            }
            path = method(x, y, r);
        }
        return path;
    };
    Marker.prototype.createPath = function (context) {
        var path = this._getPath();
        var paramsCache = this.get('paramsCache');
        draw_1.drawPath(this, context, { path: path }, paramsCache);
    };
    Marker.Symbols = Symbols;
    return Marker;
}(base_1.default));
exports.default = Marker;
//# sourceMappingURL=marker.js.map

/***/ }),

/***/ "1c2b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var call = __webpack_require__("ded0");
var propertyIsEnumerableModule = __webpack_require__("05ca");
var createPropertyDescriptor = __webpack_require__("6638");
var toIndexedObject = __webpack_require__("a330");
var toPropertyKey = __webpack_require__("bc9d");
var hasOwn = __webpack_require__("85ed");
var IE8_DOM_DEFINE = __webpack_require__("6621");

// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// `Object.getOwnPropertyDescriptor` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor
exports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {
  O = toIndexedObject(O);
  P = toPropertyKey(P);
  if (IE8_DOM_DEFINE) try {
    return $getOwnPropertyDescriptor(O, P);
  } catch (error) { /* empty */ }
  if (hasOwn(O, P)) return createPropertyDescriptor(!call(propertyIsEnumerableModule.f, O, P), O[P]);
};


/***/ }),

/***/ "1c3b":
/***/ (function(module, exports, __webpack_require__) {

var baseHasIn = __webpack_require__("87b6"),
    hasPath = __webpack_require__("08f1");

/**
 * Checks if `path` is a direct or inherited property of `object`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Object
 * @param {Object} object The object to query.
 * @param {Array|string} path The path to check.
 * @returns {boolean} Returns `true` if `path` exists, else `false`.
 * @example
 *
 * var object = _.create({ 'a': _.create({ 'b': 2 }) });
 *
 * _.hasIn(object, 'a');
 * // => true
 *
 * _.hasIn(object, 'a.b');
 * // => true
 *
 * _.hasIn(object, ['a', 'b']);
 * // => true
 *
 * _.hasIn(object, 'b');
 * // => false
 */
function hasIn(object, path) {
  return object != null && hasPath(object, path, baseHasIn);
}

module.exports = hasIn;


/***/ }),

/***/ "1cba":
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {/** Detect free variable `global` from Node.js. */
var freeGlobal = typeof global == 'object' && global && global.Object === Object && global;

module.exports = freeGlobal;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("f20b")))

/***/ }),

/***/ "1cfa":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var aCallable = __webpack_require__("d0d3");
var isObject = __webpack_require__("d2cb");
var hasOwn = __webpack_require__("85ed");
var arraySlice = __webpack_require__("f600");
var NATIVE_BIND = __webpack_require__("48d3");

var $Function = Function;
var concat = uncurryThis([].concat);
var join = uncurryThis([].join);
var factories = {};

var construct = function (C, argsLength, args) {
  if (!hasOwn(factories, argsLength)) {
    var list = [];
    var i = 0;
    for (; i < argsLength; i++) list[i] = 'a[' + i + ']';
    factories[argsLength] = $Function('C,a', 'return new C(' + join(list, ',') + ')');
  } return factories[argsLength](C, args);
};

// `Function.prototype.bind` method implementation
// https://tc39.es/ecma262/#sec-function.prototype.bind
// eslint-disable-next-line es/no-function-prototype-bind -- detection
module.exports = NATIVE_BIND ? $Function.bind : function bind(that /* , ...args */) {
  var F = aCallable(this);
  var Prototype = F.prototype;
  var partArgs = arraySlice(arguments, 1);
  var boundFunction = function bound(/* args... */) {
    var args = concat(partArgs, arraySlice(arguments));
    return this instanceof boundFunction ? construct(F, args.length, args) : F.apply(that, args);
  };
  if (isObject(Prototype)) boundFunction.prototype = Prototype;
  return boundFunction;
};


/***/ }),

/***/ "1e05":
/***/ (function(module, exports, __webpack_require__) {

var nativeCreate = __webpack_require__("cce9");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Checks if a hash value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Hash
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function hashHas(key) {
  var data = this.__data__;
  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);
}

module.exports = hashHas;


/***/ }),

/***/ "1e49":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.isSamePoint = exports.mergeRegion = exports.intersectRect = exports.inBox = exports.distance = exports.getPixelRatio = void 0;
function getPixelRatio() {
    return window ? window.devicePixelRatio : 1;
}
exports.getPixelRatio = getPixelRatio;
/**
 * 两点之间的距离
 * @param {number} x1 起始点 x
 * @param {number} y1 起始点 y
 * @param {number} x2 结束点 x
 * @param {number} y2 结束点 y
 */
function distance(x1, y1, x2, y2) {
    var dx = x1 - x2;
    var dy = y1 - y2;
    return Math.sqrt(dx * dx + dy * dy);
}
exports.distance = distance;
/**
 * 是否在包围盒内
 * @param {number} minX   包围盒开始的点 x
 * @param {number} minY   包围盒开始的点 y
 * @param {number} width  宽度
 * @param {number} height 高度
 * @param {[type]} x      检测点的 x
 * @param {[type]} y      监测点的 y
 */
function inBox(minX, minY, width, height, x, y) {
    return x >= minX && x <= minX + width && y >= minY && y <= minY + height;
}
exports.inBox = inBox;
function intersectRect(box1, box2) {
    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);
}
exports.intersectRect = intersectRect;
// 合并两个区域
function mergeRegion(region1, region2) {
    if (!region1 || !region2) {
        return region1 || region2;
    }
    return {
        minX: Math.min(region1.minX, region2.minX),
        minY: Math.min(region1.minY, region2.minY),
        maxX: Math.max(region1.maxX, region2.maxX),
        maxY: Math.max(region1.maxY, region2.maxY),
    };
}
exports.mergeRegion = mergeRegion;
/**
 * 判断两个点是否重合，点坐标的格式为 [x, y]
 * @param {Array} point1 第一个点
 * @param {Array} point2 第二个点
 */
function isSamePoint(point1, point2) {
    return point1[0] === point2[0] && point1[1] === point2[1];
}
exports.isSamePoint = isSamePoint;
var util_1 = __webpack_require__("6d77");
Object.defineProperty(exports, "isNil", { enumerable: true, get: function () { return util_1.isNil; } });
Object.defineProperty(exports, "isString", { enumerable: true, get: function () { return util_1.isString; } });
Object.defineProperty(exports, "isFunction", { enumerable: true, get: function () { return util_1.isFunction; } });
Object.defineProperty(exports, "isArray", { enumerable: true, get: function () { return util_1.isArray; } });
Object.defineProperty(exports, "each", { enumerable: true, get: function () { return util_1.each; } });
Object.defineProperty(exports, "toRadian", { enumerable: true, get: function () { return util_1.toRadian; } });
Object.defineProperty(exports, "mod", { enumerable: true, get: function () { return util_1.mod; } });
Object.defineProperty(exports, "isNumberEqual", { enumerable: true, get: function () { return util_1.isNumberEqual; } });
Object.defineProperty(exports, "requestAnimationFrame", { enumerable: true, get: function () { return util_1.requestAnimationFrame; } });
Object.defineProperty(exports, "clearAnimationFrame", { enumerable: true, get: function () { return util_1.clearAnimationFrame; } });
//# sourceMappingURL=util.js.map

/***/ }),

/***/ "1f6e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 封装事件，便于使用上下文this,和便于解除事件时使用
 * @protected
 * @param  {Object} obj   对象
 * @param  {String} action 事件名称
 * @return {Function}        返回事件处理函数
 */
function wrapBehavior(obj, action) {
    if (obj['_wrap_' + action]) {
        return obj['_wrap_' + action];
    }
    var method = function (e) {
        obj[action](e);
    };
    obj['_wrap_' + action] = method;
    return method;
}
exports.default = wrapBehavior;
//# sourceMappingURL=wrap-behavior.js.map

/***/ }),

/***/ "1f95":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var getBuiltIn = __webpack_require__("4fed");
var apply = __webpack_require__("b376");
var bind = __webpack_require__("1cfa");
var aConstructor = __webpack_require__("802c");
var anObject = __webpack_require__("9774");
var isObject = __webpack_require__("d2cb");
var create = __webpack_require__("6943");
var fails = __webpack_require__("e835");

var nativeConstruct = getBuiltIn('Reflect', 'construct');
var ObjectPrototype = Object.prototype;
var push = [].push;

// `Reflect.construct` method
// https://tc39.es/ecma262/#sec-reflect.construct
// MS Edge supports only 2 arguments and argumentsList argument is optional
// FF Nightly sets third argument as `new.target`, but does not create `this` from it
var NEW_TARGET_BUG = fails(function () {
  function F() { /* empty */ }
  return !(nativeConstruct(function () { /* empty */ }, [], F) instanceof F);
});

var ARGS_BUG = !fails(function () {
  nativeConstruct(function () { /* empty */ });
});

var FORCED = NEW_TARGET_BUG || ARGS_BUG;

$({ target: 'Reflect', stat: true, forced: FORCED, sham: FORCED }, {
  construct: function construct(Target, args /* , newTarget */) {
    aConstructor(Target);
    anObject(args);
    var newTarget = arguments.length < 3 ? Target : aConstructor(arguments[2]);
    if (ARGS_BUG && !NEW_TARGET_BUG) return nativeConstruct(Target, args, newTarget);
    if (Target === newTarget) {
      // w/o altered newTarget, optimization for 0-4 arguments
      switch (args.length) {
        case 0: return new Target();
        case 1: return new Target(args[0]);
        case 2: return new Target(args[0], args[1]);
        case 3: return new Target(args[0], args[1], args[2]);
        case 4: return new Target(args[0], args[1], args[2], args[3]);
      }
      // w/o altered newTarget, lot of arguments case
      var $args = [null];
      apply(push, $args, args);
      return new (apply(bind, Target, $args))();
    }
    // with altered newTarget, not support built-in constructors
    var proto = newTarget.prototype;
    var instance = create(isObject(proto) ? proto : ObjectPrototype);
    var result = apply(Target, instance, args);
    return isObject(result) ? result : instance;
  }
});


/***/ }),

/***/ "1fba":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var trunc = __webpack_require__("32a8");

// `ToIntegerOrInfinity` abstract operation
// https://tc39.es/ecma262/#sec-tointegerorinfinity
module.exports = function (argument) {
  var number = +argument;
  // eslint-disable-next-line no-self-compare -- NaN check
  return number !== number || number === 0 ? 0 : trunc(number);
};


/***/ }),

/***/ "1fe4":
/***/ (function(module, exports, __webpack_require__) {

var basePick = __webpack_require__("2561"),
    flatRest = __webpack_require__("d865");

/**
 * Creates an object composed of the picked `object` properties.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Object
 * @param {Object} object The source object.
 * @param {...(string|string[])} [paths] The property paths to pick.
 * @returns {Object} Returns the new object.
 * @example
 *
 * var object = { 'a': 1, 'b': '2', 'c': 3 };
 *
 * _.pick(object, ['a', 'c']);
 * // => { 'a': 1, 'c': 3 }
 */
var pick = flatRest(function(object, paths) {
  return object == null ? {} : basePick(object, paths);
});

module.exports = pick;


/***/ }),

/***/ "20d3":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.sub = exports.mul = undefined;
exports.create = create;
exports.fromMat4 = fromMat4;
exports.clone = clone;
exports.copy = copy;
exports.fromValues = fromValues;
exports.set = set;
exports.identity = identity;
exports.transpose = transpose;
exports.invert = invert;
exports.adjoint = adjoint;
exports.determinant = determinant;
exports.multiply = multiply;
exports.translate = translate;
exports.rotate = rotate;
exports.scale = scale;
exports.fromTranslation = fromTranslation;
exports.fromRotation = fromRotation;
exports.fromScaling = fromScaling;
exports.fromMat2d = fromMat2d;
exports.fromQuat = fromQuat;
exports.normalFromMat4 = normalFromMat4;
exports.projection = projection;
exports.str = str;
exports.frob = frob;
exports.add = add;
exports.subtract = subtract;
exports.multiplyScalar = multiplyScalar;
exports.multiplyScalarAndAdd = multiplyScalarAndAdd;
exports.exactEquals = exactEquals;
exports.equals = equals;

var _common = __webpack_require__("e713");

var glMatrix = _interopRequireWildcard(_common);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/**
 * 3x3 Matrix
 * @module mat3
 */

/**
 * Creates a new identity mat3
 *
 * @returns {mat3} a new 3x3 matrix
 */
function create() {
  var out = new glMatrix.ARRAY_TYPE(9);
  if (glMatrix.ARRAY_TYPE != Float32Array) {
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
  }
  out[0] = 1;
  out[4] = 1;
  out[8] = 1;
  return out;
}

/**
 * Copies the upper-left 3x3 values into the given mat3.
 *
 * @param {mat3} out the receiving 3x3 matrix
 * @param {mat4} a   the source 4x4 matrix
 * @returns {mat3} out
 */
function fromMat4(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[4];
  out[4] = a[5];
  out[5] = a[6];
  out[6] = a[8];
  out[7] = a[9];
  out[8] = a[10];
  return out;
}

/**
 * Creates a new mat3 initialized with values from an existing matrix
 *
 * @param {mat3} a matrix to clone
 * @returns {mat3} a new 3x3 matrix
 */
function clone(a) {
  var out = new glMatrix.ARRAY_TYPE(9);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  out[4] = a[4];
  out[5] = a[5];
  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  return out;
}

/**
 * Copy the values from one mat3 to another
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the source matrix
 * @returns {mat3} out
 */
function copy(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  out[4] = a[4];
  out[5] = a[5];
  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  return out;
}

/**
 * Create a new mat3 with the given values
 *
 * @param {Number} m00 Component in column 0, row 0 position (index 0)
 * @param {Number} m01 Component in column 0, row 1 position (index 1)
 * @param {Number} m02 Component in column 0, row 2 position (index 2)
 * @param {Number} m10 Component in column 1, row 0 position (index 3)
 * @param {Number} m11 Component in column 1, row 1 position (index 4)
 * @param {Number} m12 Component in column 1, row 2 position (index 5)
 * @param {Number} m20 Component in column 2, row 0 position (index 6)
 * @param {Number} m21 Component in column 2, row 1 position (index 7)
 * @param {Number} m22 Component in column 2, row 2 position (index 8)
 * @returns {mat3} A new mat3
 */
function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {
  var out = new glMatrix.ARRAY_TYPE(9);
  out[0] = m00;
  out[1] = m01;
  out[2] = m02;
  out[3] = m10;
  out[4] = m11;
  out[5] = m12;
  out[6] = m20;
  out[7] = m21;
  out[8] = m22;
  return out;
}

/**
 * Set the components of a mat3 to the given values
 *
 * @param {mat3} out the receiving matrix
 * @param {Number} m00 Component in column 0, row 0 position (index 0)
 * @param {Number} m01 Component in column 0, row 1 position (index 1)
 * @param {Number} m02 Component in column 0, row 2 position (index 2)
 * @param {Number} m10 Component in column 1, row 0 position (index 3)
 * @param {Number} m11 Component in column 1, row 1 position (index 4)
 * @param {Number} m12 Component in column 1, row 2 position (index 5)
 * @param {Number} m20 Component in column 2, row 0 position (index 6)
 * @param {Number} m21 Component in column 2, row 1 position (index 7)
 * @param {Number} m22 Component in column 2, row 2 position (index 8)
 * @returns {mat3} out
 */
function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {
  out[0] = m00;
  out[1] = m01;
  out[2] = m02;
  out[3] = m10;
  out[4] = m11;
  out[5] = m12;
  out[6] = m20;
  out[7] = m21;
  out[8] = m22;
  return out;
}

/**
 * Set a mat3 to the identity matrix
 *
 * @param {mat3} out the receiving matrix
 * @returns {mat3} out
 */
function identity(out) {
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 1;
  out[5] = 0;
  out[6] = 0;
  out[7] = 0;
  out[8] = 1;
  return out;
}

/**
 * Transpose the values of a mat3
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the source matrix
 * @returns {mat3} out
 */
function transpose(out, a) {
  // If we are transposing ourselves we can skip a few steps but have to cache some values
  if (out === a) {
    var a01 = a[1],
        a02 = a[2],
        a12 = a[5];
    out[1] = a[3];
    out[2] = a[6];
    out[3] = a01;
    out[5] = a[7];
    out[6] = a02;
    out[7] = a12;
  } else {
    out[0] = a[0];
    out[1] = a[3];
    out[2] = a[6];
    out[3] = a[1];
    out[4] = a[4];
    out[5] = a[7];
    out[6] = a[2];
    out[7] = a[5];
    out[8] = a[8];
  }

  return out;
}

/**
 * Inverts a mat3
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the source matrix
 * @returns {mat3} out
 */
function invert(out, a) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2];
  var a10 = a[3],
      a11 = a[4],
      a12 = a[5];
  var a20 = a[6],
      a21 = a[7],
      a22 = a[8];

  var b01 = a22 * a11 - a12 * a21;
  var b11 = -a22 * a10 + a12 * a20;
  var b21 = a21 * a10 - a11 * a20;

  // Calculate the determinant
  var det = a00 * b01 + a01 * b11 + a02 * b21;

  if (!det) {
    return null;
  }
  det = 1.0 / det;

  out[0] = b01 * det;
  out[1] = (-a22 * a01 + a02 * a21) * det;
  out[2] = (a12 * a01 - a02 * a11) * det;
  out[3] = b11 * det;
  out[4] = (a22 * a00 - a02 * a20) * det;
  out[5] = (-a12 * a00 + a02 * a10) * det;
  out[6] = b21 * det;
  out[7] = (-a21 * a00 + a01 * a20) * det;
  out[8] = (a11 * a00 - a01 * a10) * det;
  return out;
}

/**
 * Calculates the adjugate of a mat3
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the source matrix
 * @returns {mat3} out
 */
function adjoint(out, a) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2];
  var a10 = a[3],
      a11 = a[4],
      a12 = a[5];
  var a20 = a[6],
      a21 = a[7],
      a22 = a[8];

  out[0] = a11 * a22 - a12 * a21;
  out[1] = a02 * a21 - a01 * a22;
  out[2] = a01 * a12 - a02 * a11;
  out[3] = a12 * a20 - a10 * a22;
  out[4] = a00 * a22 - a02 * a20;
  out[5] = a02 * a10 - a00 * a12;
  out[6] = a10 * a21 - a11 * a20;
  out[7] = a01 * a20 - a00 * a21;
  out[8] = a00 * a11 - a01 * a10;
  return out;
}

/**
 * Calculates the determinant of a mat3
 *
 * @param {mat3} a the source matrix
 * @returns {Number} determinant of a
 */
function determinant(a) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2];
  var a10 = a[3],
      a11 = a[4],
      a12 = a[5];
  var a20 = a[6],
      a21 = a[7],
      a22 = a[8];

  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);
}

/**
 * Multiplies two mat3's
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the first operand
 * @param {mat3} b the second operand
 * @returns {mat3} out
 */
function multiply(out, a, b) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2];
  var a10 = a[3],
      a11 = a[4],
      a12 = a[5];
  var a20 = a[6],
      a21 = a[7],
      a22 = a[8];

  var b00 = b[0],
      b01 = b[1],
      b02 = b[2];
  var b10 = b[3],
      b11 = b[4],
      b12 = b[5];
  var b20 = b[6],
      b21 = b[7],
      b22 = b[8];

  out[0] = b00 * a00 + b01 * a10 + b02 * a20;
  out[1] = b00 * a01 + b01 * a11 + b02 * a21;
  out[2] = b00 * a02 + b01 * a12 + b02 * a22;

  out[3] = b10 * a00 + b11 * a10 + b12 * a20;
  out[4] = b10 * a01 + b11 * a11 + b12 * a21;
  out[5] = b10 * a02 + b11 * a12 + b12 * a22;

  out[6] = b20 * a00 + b21 * a10 + b22 * a20;
  out[7] = b20 * a01 + b21 * a11 + b22 * a21;
  out[8] = b20 * a02 + b21 * a12 + b22 * a22;
  return out;
}

/**
 * Translate a mat3 by the given vector
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the matrix to translate
 * @param {vec2} v vector to translate by
 * @returns {mat3} out
 */
function translate(out, a, v) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2],
      a10 = a[3],
      a11 = a[4],
      a12 = a[5],
      a20 = a[6],
      a21 = a[7],
      a22 = a[8],
      x = v[0],
      y = v[1];

  out[0] = a00;
  out[1] = a01;
  out[2] = a02;

  out[3] = a10;
  out[4] = a11;
  out[5] = a12;

  out[6] = x * a00 + y * a10 + a20;
  out[7] = x * a01 + y * a11 + a21;
  out[8] = x * a02 + y * a12 + a22;
  return out;
}

/**
 * Rotates a mat3 by the given angle
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the matrix to rotate
 * @param {Number} rad the angle to rotate the matrix by
 * @returns {mat3} out
 */
function rotate(out, a, rad) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2],
      a10 = a[3],
      a11 = a[4],
      a12 = a[5],
      a20 = a[6],
      a21 = a[7],
      a22 = a[8],
      s = Math.sin(rad),
      c = Math.cos(rad);

  out[0] = c * a00 + s * a10;
  out[1] = c * a01 + s * a11;
  out[2] = c * a02 + s * a12;

  out[3] = c * a10 - s * a00;
  out[4] = c * a11 - s * a01;
  out[5] = c * a12 - s * a02;

  out[6] = a20;
  out[7] = a21;
  out[8] = a22;
  return out;
};

/**
 * Scales the mat3 by the dimensions in the given vec2
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the matrix to rotate
 * @param {vec2} v the vec2 to scale the matrix by
 * @returns {mat3} out
 **/
function scale(out, a, v) {
  var x = v[0],
      y = v[1];

  out[0] = x * a[0];
  out[1] = x * a[1];
  out[2] = x * a[2];

  out[3] = y * a[3];
  out[4] = y * a[4];
  out[5] = y * a[5];

  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  return out;
}

/**
 * Creates a matrix from a vector translation
 * This is equivalent to (but much faster than):
 *
 *     mat3.identity(dest);
 *     mat3.translate(dest, dest, vec);
 *
 * @param {mat3} out mat3 receiving operation result
 * @param {vec2} v Translation vector
 * @returns {mat3} out
 */
function fromTranslation(out, v) {
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 1;
  out[5] = 0;
  out[6] = v[0];
  out[7] = v[1];
  out[8] = 1;
  return out;
}

/**
 * Creates a matrix from a given angle
 * This is equivalent to (but much faster than):
 *
 *     mat3.identity(dest);
 *     mat3.rotate(dest, dest, rad);
 *
 * @param {mat3} out mat3 receiving operation result
 * @param {Number} rad the angle to rotate the matrix by
 * @returns {mat3} out
 */
function fromRotation(out, rad) {
  var s = Math.sin(rad),
      c = Math.cos(rad);

  out[0] = c;
  out[1] = s;
  out[2] = 0;

  out[3] = -s;
  out[4] = c;
  out[5] = 0;

  out[6] = 0;
  out[7] = 0;
  out[8] = 1;
  return out;
}

/**
 * Creates a matrix from a vector scaling
 * This is equivalent to (but much faster than):
 *
 *     mat3.identity(dest);
 *     mat3.scale(dest, dest, vec);
 *
 * @param {mat3} out mat3 receiving operation result
 * @param {vec2} v Scaling vector
 * @returns {mat3} out
 */
function fromScaling(out, v) {
  out[0] = v[0];
  out[1] = 0;
  out[2] = 0;

  out[3] = 0;
  out[4] = v[1];
  out[5] = 0;

  out[6] = 0;
  out[7] = 0;
  out[8] = 1;
  return out;
}

/**
 * Copies the values from a mat2d into a mat3
 *
 * @param {mat3} out the receiving matrix
 * @param {mat2d} a the matrix to copy
 * @returns {mat3} out
 **/
function fromMat2d(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = 0;

  out[3] = a[2];
  out[4] = a[3];
  out[5] = 0;

  out[6] = a[4];
  out[7] = a[5];
  out[8] = 1;
  return out;
}

/**
* Calculates a 3x3 matrix from the given quaternion
*
* @param {mat3} out mat3 receiving operation result
* @param {quat} q Quaternion to create matrix from
*
* @returns {mat3} out
*/
function fromQuat(out, q) {
  var x = q[0],
      y = q[1],
      z = q[2],
      w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;

  var xx = x * x2;
  var yx = y * x2;
  var yy = y * y2;
  var zx = z * x2;
  var zy = z * y2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;

  out[0] = 1 - yy - zz;
  out[3] = yx - wz;
  out[6] = zx + wy;

  out[1] = yx + wz;
  out[4] = 1 - xx - zz;
  out[7] = zy - wx;

  out[2] = zx - wy;
  out[5] = zy + wx;
  out[8] = 1 - xx - yy;

  return out;
}

/**
* Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix
*
* @param {mat3} out mat3 receiving operation result
* @param {mat4} a Mat4 to derive the normal matrix from
*
* @returns {mat3} out
*/
function normalFromMat4(out, a) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2],
      a03 = a[3];
  var a10 = a[4],
      a11 = a[5],
      a12 = a[6],
      a13 = a[7];
  var a20 = a[8],
      a21 = a[9],
      a22 = a[10],
      a23 = a[11];
  var a30 = a[12],
      a31 = a[13],
      a32 = a[14],
      a33 = a[15];

  var b00 = a00 * a11 - a01 * a10;
  var b01 = a00 * a12 - a02 * a10;
  var b02 = a00 * a13 - a03 * a10;
  var b03 = a01 * a12 - a02 * a11;
  var b04 = a01 * a13 - a03 * a11;
  var b05 = a02 * a13 - a03 * a12;
  var b06 = a20 * a31 - a21 * a30;
  var b07 = a20 * a32 - a22 * a30;
  var b08 = a20 * a33 - a23 * a30;
  var b09 = a21 * a32 - a22 * a31;
  var b10 = a21 * a33 - a23 * a31;
  var b11 = a22 * a33 - a23 * a32;

  // Calculate the determinant
  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;

  if (!det) {
    return null;
  }
  det = 1.0 / det;

  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;

  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;

  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;

  return out;
}

/**
 * Generates a 2D projection matrix with the given bounds
 *
 * @param {mat3} out mat3 frustum matrix will be written into
 * @param {number} width Width of your gl context
 * @param {number} height Height of gl context
 * @returns {mat3} out
 */
function projection(out, width, height) {
  out[0] = 2 / width;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = -2 / height;
  out[5] = 0;
  out[6] = -1;
  out[7] = 1;
  out[8] = 1;
  return out;
}

/**
 * Returns a string representation of a mat3
 *
 * @param {mat3} a matrix to represent as a string
 * @returns {String} string representation of the matrix
 */
function str(a) {
  return 'mat3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ', ' + a[3] + ', ' + a[4] + ', ' + a[5] + ', ' + a[6] + ', ' + a[7] + ', ' + a[8] + ')';
}

/**
 * Returns Frobenius norm of a mat3
 *
 * @param {mat3} a the matrix to calculate Frobenius norm of
 * @returns {Number} Frobenius norm
 */
function frob(a) {
  return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2) + Math.pow(a[2], 2) + Math.pow(a[3], 2) + Math.pow(a[4], 2) + Math.pow(a[5], 2) + Math.pow(a[6], 2) + Math.pow(a[7], 2) + Math.pow(a[8], 2));
}

/**
 * Adds two mat3's
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the first operand
 * @param {mat3} b the second operand
 * @returns {mat3} out
 */
function add(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  out[3] = a[3] + b[3];
  out[4] = a[4] + b[4];
  out[5] = a[5] + b[5];
  out[6] = a[6] + b[6];
  out[7] = a[7] + b[7];
  out[8] = a[8] + b[8];
  return out;
}

/**
 * Subtracts matrix b from matrix a
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the first operand
 * @param {mat3} b the second operand
 * @returns {mat3} out
 */
function subtract(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  out[3] = a[3] - b[3];
  out[4] = a[4] - b[4];
  out[5] = a[5] - b[5];
  out[6] = a[6] - b[6];
  out[7] = a[7] - b[7];
  out[8] = a[8] - b[8];
  return out;
}

/**
 * Multiply each element of the matrix by a scalar.
 *
 * @param {mat3} out the receiving matrix
 * @param {mat3} a the matrix to scale
 * @param {Number} b amount to scale the matrix's elements by
 * @returns {mat3} out
 */
function multiplyScalar(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  out[3] = a[3] * b;
  out[4] = a[4] * b;
  out[5] = a[5] * b;
  out[6] = a[6] * b;
  out[7] = a[7] * b;
  out[8] = a[8] * b;
  return out;
}

/**
 * Adds two mat3's after multiplying each element of the second operand by a scalar value.
 *
 * @param {mat3} out the receiving vector
 * @param {mat3} a the first operand
 * @param {mat3} b the second operand
 * @param {Number} scale the amount to scale b's elements by before adding
 * @returns {mat3} out
 */
function multiplyScalarAndAdd(out, a, b, scale) {
  out[0] = a[0] + b[0] * scale;
  out[1] = a[1] + b[1] * scale;
  out[2] = a[2] + b[2] * scale;
  out[3] = a[3] + b[3] * scale;
  out[4] = a[4] + b[4] * scale;
  out[5] = a[5] + b[5] * scale;
  out[6] = a[6] + b[6] * scale;
  out[7] = a[7] + b[7] * scale;
  out[8] = a[8] + b[8] * scale;
  return out;
}

/**
 * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)
 *
 * @param {mat3} a The first matrix.
 * @param {mat3} b The second matrix.
 * @returns {Boolean} True if the matrices are equal, false otherwise.
 */
function exactEquals(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];
}

/**
 * Returns whether or not the matrices have approximately the same elements in the same position.
 *
 * @param {mat3} a The first matrix.
 * @param {mat3} b The second matrix.
 * @returns {Boolean} True if the matrices are equal, false otherwise.
 */
function equals(a, b) {
  var a0 = a[0],
      a1 = a[1],
      a2 = a[2],
      a3 = a[3],
      a4 = a[4],
      a5 = a[5],
      a6 = a[6],
      a7 = a[7],
      a8 = a[8];
  var b0 = b[0],
      b1 = b[1],
      b2 = b[2],
      b3 = b[3],
      b4 = b[4],
      b5 = b[5],
      b6 = b[6],
      b7 = b[7],
      b8 = b[8];
  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));
}

/**
 * Alias for {@link mat3.multiply}
 * @function
 */
var mul = exports.mul = multiply;

/**
 * Alias for {@link mat3.subtract}
 * @function
 */
var sub = exports.sub = subtract;

/***/ }),

/***/ "219e":
/***/ (function(module, exports, __webpack_require__) {

var constant = __webpack_require__("bea5"),
    defineProperty = __webpack_require__("b48b"),
    identity = __webpack_require__("59e3");

/**
 * The base implementation of `setToString` without support for hot loop shorting.
 *
 * @private
 * @param {Function} func The function to modify.
 * @param {Function} string The `toString` result.
 * @returns {Function} Returns `func`.
 */
var baseSetToString = !defineProperty ? identity : function(func, string) {
  return defineProperty(func, 'toString', {
    'configurable': true,
    'enumerable': false,
    'value': constant(string),
    'writable': true
  });
};

module.exports = baseSetToString;


/***/ }),

/***/ "22e5":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var g_math_1 = __webpack_require__("4502");
var g_math_2 = __webpack_require__("4502");
var util_1 = __webpack_require__("6d77");
var constant_1 = __webpack_require__("7a93");
var base_1 = __webpack_require__("6cb2");
var Polyline = /** @class */ (function (_super) {
    tslib_1.__extends(Polyline, _super);
    function Polyline() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'polyline';
        _this.canFill = true;
        _this.canStroke = true;
        return _this;
    }
    Polyline.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { startArrow: false, endArrow: false });
    };
    // 更新属性时，检测是否更改了 points
    Polyline.prototype.onAttrChange = function (name, value, originValue) {
        _super.prototype.onAttrChange.call(this, name, value, originValue);
        if (['points'].indexOf(name) !== -1) {
            this._resetCache();
        }
    };
    Polyline.prototype._resetCache = function () {
        this.set('totalLength', null);
        this.set('tCache', null);
    };
    Polyline.prototype.createPath = function (context, targetAttrs) {
        var attrs = this.attr();
        var el = this.get('el');
        util_1.each(targetAttrs || attrs, function (value, attr) {
            if (attr === 'points' && util_1.isArray(value) && value.length >= 2) {
                el.setAttribute('points', value.map(function (point) { return point[0] + "," + point[1]; }).join(' '));
            }
            else if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
    };
    /**
     * Get length of polyline
     * @return {number} length
     */
    Polyline.prototype.getTotalLength = function () {
        var points = this.attr().points;
        // get totalLength from cache
        var totalLength = this.get('totalLength');
        if (!util_1.isNil(totalLength)) {
            return totalLength;
        }
        this.set('totalLength', g_math_1.Polyline.length(points));
        return this.get('totalLength');
    };
    /**
     * Get point according to ratio
     * @param {number} ratio
     * @return {Point} point
     */
    Polyline.prototype.getPoint = function (ratio) {
        var points = this.attr().points;
        // get tCache from cache
        var tCache = this.get('tCache');
        if (!tCache) {
            this._setTcache();
            tCache = this.get('tCache');
        }
        var subt;
        var index;
        util_1.each(tCache, function (v, i) {
            if (ratio >= v[0] && ratio <= v[1]) {
                subt = (ratio - v[0]) / (v[1] - v[0]);
                index = i;
            }
        });
        return g_math_2.Line.pointAt(points[index][0], points[index][1], points[index + 1][0], points[index + 1][1], subt);
    };
    Polyline.prototype._setTcache = function () {
        var points = this.attr().points;
        if (!points || points.length === 0) {
            return;
        }
        var totalLength = this.getTotalLength();
        if (totalLength <= 0) {
            return;
        }
        var tempLength = 0;
        var tCache = [];
        var segmentT;
        var segmentL;
        util_1.each(points, function (p, i) {
            if (points[i + 1]) {
                segmentT = [];
                segmentT[0] = tempLength / totalLength;
                segmentL = g_math_2.Line.length(p[0], p[1], points[i + 1][0], points[i + 1][1]);
                tempLength += segmentL;
                segmentT[1] = tempLength / totalLength;
                tCache.push(segmentT);
            }
        });
        this.set('tCache', tCache);
    };
    /**
     * Get start tangent vector
     * @return {Array}
     */
    Polyline.prototype.getStartTangent = function () {
        var points = this.attr().points;
        var result = [];
        result.push([points[1][0], points[1][1]]);
        result.push([points[0][0], points[0][1]]);
        return result;
    };
    /**
     * Get end tangent vector
     * @return {Array}
     */
    Polyline.prototype.getEndTangent = function () {
        var points = this.attr().points;
        var l = points.length - 1;
        var result = [];
        result.push([points[l - 1][0], points[l - 1][1]]);
        result.push([points[l][0], points[l][1]]);
        return result;
    };
    return Polyline;
}(base_1.default));
exports.default = Polyline;
//# sourceMappingURL=polyline.js.map

/***/ }),

/***/ "2317":
/***/ (function(module, exports, __webpack_require__) {

var baseMerge = __webpack_require__("7d02"),
    createAssigner = __webpack_require__("fc3c");

/**
 * This method is like `_.assign` except that it recursively merges own and
 * inherited enumerable string keyed properties of source objects into the
 * destination object. Source properties that resolve to `undefined` are
 * skipped if a destination value exists. Array and plain object properties
 * are merged recursively. Other objects and value types are overridden by
 * assignment. Source objects are applied from left to right. Subsequent
 * sources overwrite property assignments of previous sources.
 *
 * **Note:** This method mutates `object`.
 *
 * @static
 * @memberOf _
 * @since 0.5.0
 * @category Object
 * @param {Object} object The destination object.
 * @param {...Object} [sources] The source objects.
 * @returns {Object} Returns `object`.
 * @example
 *
 * var object = {
 *   'a': [{ 'b': 2 }, { 'd': 4 }]
 * };
 *
 * var other = {
 *   'a': [{ 'c': 3 }, { 'e': 5 }]
 * };
 *
 * _.merge(object, other);
 * // => { 'a': [{ 'b': 2, 'c': 3 }, { 'd': 4, 'e': 5 }] }
 */
var merge = createAssigner(function(object, source, srcIndex) {
  baseMerge(object, source, srcIndex);
});

module.exports = merge;


/***/ }),

/***/ "2325":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var $filter = __webpack_require__("308c").filter;
var arrayMethodHasSpeciesSupport = __webpack_require__("4086");

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');

// `Array.prototype.filter` method
// https://tc39.es/ecma262/#sec-array.prototype.filter
// with adding support of @@species
$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {
  filter: function filter(callbackfn /* , thisArg */) {
    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "23f7":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIndexedObject = __webpack_require__("a330");
var addToUnscopables = __webpack_require__("b6ee");
var Iterators = __webpack_require__("b462");
var InternalStateModule = __webpack_require__("d987");
var defineProperty = __webpack_require__("80ea").f;
var defineIterator = __webpack_require__("42b8");
var createIterResultObject = __webpack_require__("0a94");
var IS_PURE = __webpack_require__("6e09");
var DESCRIPTORS = __webpack_require__("98c8");

var ARRAY_ITERATOR = 'Array Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);

// `Array.prototype.entries` method
// https://tc39.es/ecma262/#sec-array.prototype.entries
// `Array.prototype.keys` method
// https://tc39.es/ecma262/#sec-array.prototype.keys
// `Array.prototype.values` method
// https://tc39.es/ecma262/#sec-array.prototype.values
// `Array.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-array.prototype-@@iterator
// `CreateArrayIterator` internal method
// https://tc39.es/ecma262/#sec-createarrayiterator
module.exports = defineIterator(Array, 'Array', function (iterated, kind) {
  setInternalState(this, {
    type: ARRAY_ITERATOR,
    target: toIndexedObject(iterated), // target
    index: 0,                          // next index
    kind: kind                         // kind
  });
// `%ArrayIteratorPrototype%.next` method
// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next
}, function () {
  var state = getInternalState(this);
  var target = state.target;
  var index = state.index++;
  if (!target || index >= target.length) {
    state.target = undefined;
    return createIterResultObject(undefined, true);
  }
  switch (state.kind) {
    case 'keys': return createIterResultObject(index, false);
    case 'values': return createIterResultObject(target[index], false);
  } return createIterResultObject([index, target[index]], false);
}, 'values');

// argumentsList[@@iterator] is %ArrayProto_values%
// https://tc39.es/ecma262/#sec-createunmappedargumentsobject
// https://tc39.es/ecma262/#sec-createmappedargumentsobject
var values = Iterators.Arguments = Iterators.Array;

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('keys');
addToUnscopables('values');
addToUnscopables('entries');

// V8 ~ Chrome 45- bug
if (!IS_PURE && DESCRIPTORS && values.name !== 'values') try {
  defineProperty(values, 'name', { value: 'values' });
} catch (error) { /* empty */ }


/***/ }),

/***/ "2561":
/***/ (function(module, exports, __webpack_require__) {

var basePickBy = __webpack_require__("4e13"),
    hasIn = __webpack_require__("1c3b");

/**
 * The base implementation of `_.pick` without support for individual
 * property identifiers.
 *
 * @private
 * @param {Object} object The source object.
 * @param {string[]} paths The property paths to pick.
 * @returns {Object} Returns the new object.
 */
function basePick(object, paths) {
  return basePickBy(object, paths, function(value, path) {
    return hasIn(object, path);
  });
}

module.exports = basePick;


/***/ }),

/***/ "26c5":
/***/ (function(module, exports, __webpack_require__) {

var ListCache = __webpack_require__("4127");

/**
 * Removes all key-value entries from the stack.
 *
 * @private
 * @name clear
 * @memberOf Stack
 */
function stackClear() {
  this.__data__ = new ListCache;
  this.size = 0;
}

module.exports = stackClear;


/***/ }),

/***/ "2721":
/***/ (function(module, exports) {

/**
 * Creates a unary function that invokes `func` with its argument transformed.
 *
 * @private
 * @param {Function} func The function to wrap.
 * @param {Function} transform The argument transform.
 * @returns {Function} Returns the new function.
 */
function overArg(func, transform) {
  return function(arg) {
    return func(transform(arg));
  };
}

module.exports = overArg;


/***/ }),

/***/ "2810":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable es/no-symbol -- required for testing */
var NATIVE_SYMBOL = __webpack_require__("1942");

module.exports = NATIVE_SYMBOL
  && !Symbol.sham
  && typeof Symbol.iterator == 'symbol';


/***/ }),

/***/ "291a":
/***/ (function(module, exports) {

/**
 * The base implementation of `_.slice` without an iteratee call guard.
 *
 * @private
 * @param {Array} array The array to slice.
 * @param {number} [start=0] The start position.
 * @param {number} [end=array.length] The end position.
 * @returns {Array} Returns the slice of `array`.
 */
function baseSlice(array, start, end) {
  var index = -1,
      length = array.length;

  if (start < 0) {
    start = -start > length ? 0 : (length + start);
  }
  end = end > length ? length : end;
  if (end < 0) {
    end += length;
  }
  length = start > end ? 0 : ((end - start) >>> 0);
  start >>>= 0;

  var result = Array(length);
  while (++index < length) {
    result[index] = array[index + start];
  }
  return result;
}

module.exports = baseSlice;


/***/ }),

/***/ "29ba":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var safeGetBuiltIn = __webpack_require__("b578");
var bind = __webpack_require__("59a3");
var macrotask = __webpack_require__("d152").set;
var Queue = __webpack_require__("8d55");
var IS_IOS = __webpack_require__("add1");
var IS_IOS_PEBBLE = __webpack_require__("89e7");
var IS_WEBOS_WEBKIT = __webpack_require__("d091");
var IS_NODE = __webpack_require__("d27e");

var MutationObserver = globalThis.MutationObserver || globalThis.WebKitMutationObserver;
var document = globalThis.document;
var process = globalThis.process;
var Promise = globalThis.Promise;
var microtask = safeGetBuiltIn('queueMicrotask');
var notify, toggle, node, promise, then;

// modern engines have queueMicrotask method
if (!microtask) {
  var queue = new Queue();

  var flush = function () {
    var parent, fn;
    if (IS_NODE && (parent = process.domain)) parent.exit();
    while (fn = queue.get()) try {
      fn();
    } catch (error) {
      if (queue.head) notify();
      throw error;
    }
    if (parent) parent.enter();
  };

  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339
  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898
  if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {
    toggle = true;
    node = document.createTextNode('');
    new MutationObserver(flush).observe(node, { characterData: true });
    notify = function () {
      node.data = toggle = !toggle;
    };
  // environments with maybe non-completely correct, but existent Promise
  } else if (!IS_IOS_PEBBLE && Promise && Promise.resolve) {
    // Promise.resolve without an argument throws an error in LG WebOS 2
    promise = Promise.resolve(undefined);
    // workaround of WebKit ~ iOS Safari 10.1 bug
    promise.constructor = Promise;
    then = bind(promise.then, promise);
    notify = function () {
      then(flush);
    };
  // Node.js without promises
  } else if (IS_NODE) {
    notify = function () {
      process.nextTick(flush);
    };
  // for other environments - macrotask based on:
  // - setImmediate
  // - MessageChannel
  // - window.postMessage
  // - onreadystatechange
  // - setTimeout
  } else {
    // `webpack` dev server bug on IE global methods - use bind(fn, global)
    macrotask = bind(macrotask, globalThis);
    notify = function () {
      macrotask(flush);
    };
  }

  microtask = function (fn) {
    if (!queue.head) notify();
    queue.add(fn);
  };
}

module.exports = microtask;


/***/ }),

/***/ "2b1f":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, "Flow", function() { return /* reexport */ Flow; });
__webpack_require__.d(__webpack_exports__, "Mind", function() { return /* reexport */ Mind; });
__webpack_require__.d(__webpack_exports__, "Koni", function() { return /* reexport */ Koni; });
__webpack_require__.d(__webpack_exports__, "RegisterNode", function() { return /* reexport */ RegisterNode; });
__webpack_require__.d(__webpack_exports__, "RegisterEdge", function() { return /* reexport */ RegisterEdge; });
__webpack_require__.d(__webpack_exports__, "RegisterGroup", function() { return /* reexport */ RegisterGroup; });
__webpack_require__.d(__webpack_exports__, "RegisterGuide", function() { return /* reexport */ RegisterGuide; });
__webpack_require__.d(__webpack_exports__, "RegisterCommand", function() { return /* reexport */ RegisterCommand; });
__webpack_require__.d(__webpack_exports__, "RegisterBehaviour", function() { return /* reexport */ RegisterBehaviour; });
__webpack_require__.d(__webpack_exports__, "Command", function() { return /* reexport */ Command; });
__webpack_require__.d(__webpack_exports__, "Minimap", function() { return /* reexport */ Minimap; });
__webpack_require__.d(__webpack_exports__, "NodeMenu", function() { return /* reexport */ NodeMenu; });
__webpack_require__.d(__webpack_exports__, "EdgeMenu", function() { return /* reexport */ EdgeMenu; });
__webpack_require__.d(__webpack_exports__, "GroupMenu", function() { return /* reexport */ GroupMenu; });
__webpack_require__.d(__webpack_exports__, "MultiMenu", function() { return /* reexport */ MultiMenu; });
__webpack_require__.d(__webpack_exports__, "CanvasMenu", function() { return /* reexport */ CanvasMenu; });
__webpack_require__.d(__webpack_exports__, "ContextMenu", function() { return /* reexport */ ContextMenu; });
__webpack_require__.d(__webpack_exports__, "Toolbar", function() { return /* reexport */ Toolbar; });
__webpack_require__.d(__webpack_exports__, "Item", function() { return /* reexport */ Item; });
__webpack_require__.d(__webpack_exports__, "ItemPanel", function() { return /* reexport */ ItemPanel; });
__webpack_require__.d(__webpack_exports__, "NodePanel", function() { return /* reexport */ NodePanel; });
__webpack_require__.d(__webpack_exports__, "EdgePanel", function() { return /* reexport */ EdgePanel; });
__webpack_require__.d(__webpack_exports__, "GroupPanel", function() { return /* reexport */ GroupPanel; });
__webpack_require__.d(__webpack_exports__, "MultiPanel", function() { return /* reexport */ MultiPanel; });
__webpack_require__.d(__webpack_exports__, "CanvasPanel", function() { return /* reexport */ CanvasPanel; });
__webpack_require__.d(__webpack_exports__, "DetailPanel", function() { return /* reexport */ DetailPanel; });

// CONCATENATED MODULE: ./node_modules/_@vue_cli-service@4.5.19@@vue/cli-service/lib/commands/build/setPublicPath.js
// This file is imported into lib/wc client bundles.

if (typeof window !== 'undefined') {
  var currentScript = window.document.currentScript
  if (true) {
    var getCurrentScript = __webpack_require__("79e4")
    currentScript = getCurrentScript()

    // for backward compatibility, because previously we directly included the polyfill
    if (!('currentScript' in document)) {
      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })
    }
  }

  var src = currentScript && currentScript.src.match(/(.+\/)[^/]+\.js(\?.*)?$/)
  if (src) {
    __webpack_require__.p = src[1] // eslint-disable-line
  }
}

// Indicate to webpack that this file can be concatenated
/* harmony default export */ var setPublicPath = (null);

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/arrayLikeToArray.js
function _arrayLikeToArray(r, a) {
  (null == a || a > r.length) && (a = r.length);
  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];
  return n;
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/arrayWithoutHoles.js

function _arrayWithoutHoles(r) {
  if (Array.isArray(r)) return _arrayLikeToArray(r);
}

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.symbol.js
var es_symbol = __webpack_require__("9755");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.symbol.description.js
var es_symbol_description = __webpack_require__("9d87");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.symbol.iterator.js
var es_symbol_iterator = __webpack_require__("a6f6");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.array.from.js
var es_array_from = __webpack_require__("4303");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.array.iterator.js
var es_array_iterator = __webpack_require__("23f7");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.object.to-string.js
var es_object_to_string = __webpack_require__("a724");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.string.iterator.js
var es_string_iterator = __webpack_require__("e17b");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/web.dom-collections.iterator.js
var web_dom_collections_iterator = __webpack_require__("7202");

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/iterableToArray.js








function _iterableToArray(r) {
  if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r);
}

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.array.slice.js
var es_array_slice = __webpack_require__("630e");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.function.name.js
var es_function_name = __webpack_require__("740f");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.regexp.exec.js
var es_regexp_exec = __webpack_require__("0509");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.regexp.test.js
var es_regexp_test = __webpack_require__("0e36");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.regexp.to-string.js
var es_regexp_to_string = __webpack_require__("e3d4");

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/unsupportedIterableToArray.js









function _unsupportedIterableToArray(r, a) {
  if (r) {
    if ("string" == typeof r) return _arrayLikeToArray(r, a);
    var t = {}.toString.call(r).slice(8, -1);
    return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;
  }
}

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.error.cause.js
var es_error_cause = __webpack_require__("e03d");

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/nonIterableSpread.js

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/toConsumableArray.js




function _toConsumableArray(r) {
  return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();
}

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.array.map.js
var es_array_map = __webpack_require__("6adc");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/web.dom-collections.for-each.js
var web_dom_collections_for_each = __webpack_require__("32c7");

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/typeof.js







function _typeof(o) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, _typeof(o);
}

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.symbol.to-primitive.js
var es_symbol_to_primitive = __webpack_require__("e5d6");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.date.to-primitive.js
var es_date_to_primitive = __webpack_require__("970e");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.number.constructor.js
var es_number_constructor = __webpack_require__("3e27");

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/toPrimitive.js





function toPrimitive(t, r) {
  if ("object" != _typeof(t) || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r || "default");
    if ("object" != _typeof(i)) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r ? String : Number)(t);
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/toPropertyKey.js


function toPropertyKey(t) {
  var i = toPrimitive(t, "string");
  return "symbol" == _typeof(i) ? i : i + "";
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/createClass.js

function _defineProperties(e, r) {
  for (var t = 0; t < r.length; t++) {
    var o = r[t];
    o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);
  }
}
function _createClass(e, r, t) {
  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", {
    writable: !1
  }), e;
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/classCallCheck.js

function _classCallCheck(a, n) {
  if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function");
}

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.reflect.construct.js
var es_reflect_construct = __webpack_require__("1f95");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.object.get-prototype-of.js
var es_object_get_prototype_of = __webpack_require__("f32d");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.object.proto.js
var es_object_proto = __webpack_require__("7e1e");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.object.set-prototype-of.js
var es_object_set_prototype_of = __webpack_require__("a244");

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/getPrototypeOf.js



function _getPrototypeOf(t) {
  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {
    return t.__proto__ || Object.getPrototypeOf(t);
  }, _getPrototypeOf(t);
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/isNativeReflectConstruct.js

function _isNativeReflectConstruct() {
  try {
    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
  } catch (t) {}
  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {
    return !!t;
  })();
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/assertThisInitialized.js

function _assertThisInitialized(e) {
  if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
  return e;
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/possibleConstructorReturn.js



function _possibleConstructorReturn(t, e) {
  if (e && ("object" == _typeof(e) || "function" == typeof e)) return e;
  if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
  return _assertThisInitialized(t);
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/callSuper.js




function _callSuper(t, o, e) {
  return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e));
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/setPrototypeOf.js


function _setPrototypeOf(t, e) {
  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {
    return t.__proto__ = e, t;
  }, _setPrototypeOf(t, e);
}

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/inherits.js


function _inherits(t, e) {
  if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
  t.prototype = Object.create(e && e.prototype, {
    constructor: {
      value: t,
      writable: !0,
      configurable: !0
    }
  }), Object.defineProperty(t, "prototype", {
    writable: !1
  }), e && _setPrototypeOf(t, e);
}

// EXTERNAL MODULE: ./node_modules/_gg-editor-core@1.3.4@gg-editor-core/dist/bundle.js
var bundle = __webpack_require__("69e6");
var bundle_default = /*#__PURE__*/__webpack_require__.n(bundle);

// EXTERNAL MODULE: ./node_modules/_lodash@4.17.21@lodash/merge.js
var merge = __webpack_require__("2317");
var merge_default = /*#__PURE__*/__webpack_require__.n(merge);

// EXTERNAL MODULE: ./node_modules/_lodash@4.17.21@lodash/pick.js
var pick = __webpack_require__("1fe4");

// EXTERNAL MODULE: ./node_modules/_lodash@4.17.21@lodash/uniqueId.js
var uniqueId = __webpack_require__("6b1d");
var uniqueId_default = /*#__PURE__*/__webpack_require__.n(uniqueId);

// EXTERNAL MODULE: ./node_modules/_lodash@4.17.21@lodash/upperFirst.js
var upperFirst = __webpack_require__("1139");
var upperFirst_default = /*#__PURE__*/__webpack_require__.n(upperFirst);

// CONCATENATED MODULE: ./src/utils/index.js





// CONCATENATED MODULE: ./src/components/Base/Editor.js




 // do not open source, waiting for 3.x

var Editor_Editor = /*#__PURE__*/function (_GGEditorCore) {
  function Editor(options) {
    var _this;
    _classCallCheck(this, Editor);
    _this = _callSuper(this, Editor, [options]);
    _this.id = uniqueId_default()();
    return _this;
  }
  _inherits(Editor, _GGEditorCore);
  return _createClass(Editor);
}(bundle_default.a);

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.object.keys.js
var es_object_keys = __webpack_require__("c3a6");

// CONCATENATED MODULE: ./src/common/constants.js

var FLOW_CONTAINER = 'J_FlowContainer';
var MIND_CONTAINER = 'J_MindContainer';
var KONI_CONTAINER = 'J_KoniContainer';
var TOOLBAR_CONTAINER = 'J_ToolbarContainer';
var MINIMAP_CONTAINER = 'J_MinimapContainer';
var CONTEXT_MENU_CONTAINER = 'J_ContextMenuContainer';
var FLOW_CLASS_NAME = 'Flow';
var MIND_CLASS_NAME = 'Mind';
var KONI_CLASS_NAME = 'Koni';
var EVENT_BEFORE_ADD_PAGE = 'beforeAddPage';
var EVENT_AFTER_ADD_PAGE = 'afterAddPage';
var STATUS_CANVAS_SELECTED = 'canvas-selected';
var STATUS_NODE_SELECTED = 'node-selected';
var STATUS_EDGE_SELECTED = 'edge-selected';
var STATUS_GROUP_SELECTED = 'group-selected';
var STATUS_MULTI_SELECTED = 'multi-selected';
var GRAPH_MOUSE_REACT_EVENTS = {
  click: 'Click',
  contextmenu: 'ContextMenu',
  dblclick: 'DoubleClick',
  drag: 'Drag',
  dragend: 'DragEnd',
  dragenter: 'DragEnter',
  dragleave: 'DragLeave',
  dragstart: 'DragStart',
  drop: 'Drop',
  mousedown: 'MouseDown',
  mouseenter: 'MouseEnter',
  mouseleave: 'MouseLeave',
  mousemove: 'MouseMove',
  mouseup: 'MouseUp'
};
var GRAPH_OTHER_REACT_EVENTS = {
  afterchange: 'onAfterChange',
  afterchangesize: 'onAfterChangeSize',
  afterviewportchange: 'onAfterViewportChange',
  beforechange: 'onBeforeChange',
  beforechangesize: 'onBeforeChangeSize',
  beforeviewportchange: 'onBeforeViewportChange',
  keydown: 'onKeyDown',
  keyup: 'onKeyUp',
  mousewheel: 'onMouseWheel'
};
var PAGE_REACT_EVENTS = {
  afteritemactived: 'onAfterItemActived',
  afteriteminactivated: 'onAfterItemInactivated',
  afteritemselected: 'onAfterItemSelected',
  afteritemunactived: 'onAfterItemInactivated',
  afteritemunselected: 'onAfterItemUnselected',
  beforeitemactived: 'onBeforeItemActived',
  beforeiteminactivated: 'onBeforeItemInactivated',
  beforeitemselected: 'onBeforeItemSelected',
  beforeitemunactived: 'onBeforeItemInactivated',
  beforeitemunselected: 'onBeforeItemUnselected',
  keyUpEditLabel: 'onKeyUpEditLabel'
};
var EDITOR_REACT_EVENTS = {
  aftercommandexecute: 'onAfterCommandExecute',
  beforecommandexecute: 'onBeforeCommandExecute'
};
var GRAPH_MOUSE_EVENTS = Object.keys(GRAPH_MOUSE_REACT_EVENTS);
var GRAPH_OTHER_EVENTS = Object.keys(GRAPH_OTHER_REACT_EVENTS);
var PAGE_EVENTS = Object.keys(PAGE_REACT_EVENTS);
var EDITOR_EVENTS = Object.keys(EDITOR_REACT_EVENTS);
// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/defineProperty.js

function _defineProperty(e, r, t) {
  return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {
    value: t,
    enumerable: !0,
    configurable: !0,
    writable: !0
  }) : e[r] = t, e;
}

// CONCATENATED MODULE: ./src/common/context/PropsAPIContext/PropsAPI.js




var PropsAPI_PropsAPI = /*#__PURE__*/function () {
  function PropsAPI(editor) {
    var _this = this;
    _classCallCheck(this, PropsAPI);
    _defineProperty(this, "editor", null);
    this.editor = editor;
    ['executeCommand'].forEach(function (key) {
      _this[key] = function () {
        var _this$editor;
        return (_this$editor = _this.editor)[key].apply(_this$editor, arguments);
      };
    });
    ['read', 'save', 'add', 'find', 'update', 'remove', 'getSelected'].forEach(function (key) {
      _this[key] = function () {
        var _this$currentPage;
        return (_this$currentPage = _this.currentPage)[key].apply(_this$currentPage, arguments);
      };
    });
  }
  return _createClass(PropsAPI, [{
    key: "currentPage",
    get: function get() {
      return this.editor.getCurrentPage();
    }
  }]);
}();
/* harmony default export */ var PropsAPIContext_PropsAPI = (PropsAPI_PropsAPI);
// CONCATENATED MODULE: ./src/components/Editor/index.js







/* harmony default export */ var components_Editor = ({
  name: 'VueFlowchartEditor',
  props: _toConsumableArray(EDITOR_EVENTS.map(function (event) {
    return EDITOR_REACT_EVENTS[event];
  })),
  data: function data() {
    return {
      editor: null,
      propsAPI: null
    };
  },
  provide: function provide() {
    return {
      root: this
    };
  },
  created: function created() {
    this.init();
    this.bindEvent();
  },
  beforeDestroy: function beforeDestroy() {
    this.editor && this.editor.destroy();
    this.propsAPI = null;
  },
  methods: {
    addListener: function addListener(target, eventName, handler) {
      if (typeof handler === 'function') target.on(eventName, handler);
    },
    handleBeforeAddPage: function handleBeforeAddPage(func) {
      this.editor.on(EVENT_BEFORE_ADD_PAGE, func);
    },
    handleAfterAddPage: function handleAfterAddPage(func) {
      var page = this.editor.getCurrentPage();
      if (page) {
        func({
          page: page
        });
        return;
      }
      this.editor.on(EVENT_AFTER_ADD_PAGE, func);
    },
    init: function init() {
      this.editor = new Editor_Editor();
      this.propsAPI = new PropsAPIContext_PropsAPI(this.editor);
    },
    bindEvent: function bindEvent() {
      var _this = this;
      EDITOR_EVENTS.forEach(function (event) {
        _this.addListener(_this.editor, [event], _this[EDITOR_REACT_EVENTS[event]]);
      });
    }
  },
  render: function render() {
    var h = arguments[0];
    return h("div", [this.$scopedSlots.default ? this.$scopedSlots.default() : this.$slots.default]);
  }
});
// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.array.concat.js
var es_array_concat = __webpack_require__("d41d");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.array.flat.js
var es_array_flat = __webpack_require__("7ca1");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.array.unscopables.flat.js
var es_array_unscopables_flat = __webpack_require__("469b");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.promise.js
var es_promise = __webpack_require__("6fb0");

// CONCATENATED MODULE: ./src/components/Page/index.js










/* harmony default export */ var Page = ({
  inject: ['root'],
  props: [].concat(_toConsumableArray(GRAPH_MOUSE_EVENTS.map(function (event) {
    var evN = GRAPH_MOUSE_REACT_EVENTS[event];
    return ["on".concat(evN), "onNode".concat(evN), "onEdge".concat(evN), "onGroup".concat(evN), "onGuide".concat(evN), "onAnchor".concat(evN)];
  }).flat()), _toConsumableArray(GRAPH_OTHER_EVENTS.map(function (event) {
    return GRAPH_OTHER_REACT_EVENTS[event];
  })), _toConsumableArray(PAGE_EVENTS.map(function (event) {
    return PAGE_REACT_EVENTS[event];
  }))),
  data: function data() {
    return {
      config: {},
      page: null,
      pageId: ''
    };
  },
  mounted: function mounted() {
    this.init().then(this.bindEvent);
  },
  methods: {
    getPageId: function getPageId() {
      // should be extend
      return '';
    },
    initPage: function initPage() {
      // should be extend
    },
    readData: function readData() {
      if (this.data) {
        this.page.read(this.data);
      }
    },
    addListener: function addListener(target, eventName, handler) {
      if (typeof handler === 'function') target.on(eventName, handler);
    },
    init: function init() {
      var _this = this;
      return new Promise(function (resolve) {
        _this.pageId = _this.getPageId();
        merge_default()(_this.config, _this.$props, {
          graph: {
            container: _this.pageId
          }
        });
        _this.$nextTick(function () {
          _this.initPage();
          _this.readData();
          resolve();
        });
      });
    },
    bindEvent: function bindEvent() {
      var _this2 = this;
      var addListener = this.addListener;
      var graph = this.getGraph();
      GRAPH_MOUSE_EVENTS.forEach(function (event) {
        var eventName = GRAPH_MOUSE_REACT_EVENTS[event];
        addListener(graph, "".concat(event), _this2["on".concat(eventName)]);
        addListener(graph, "node:".concat(event), _this2["onNode".concat(eventName)]);
        addListener(graph, "edge:".concat(event), _this2["onEdge".concat(eventName)]);
        addListener(graph, "group:".concat(event), _this2["onGroup".concat(eventName)]);
        addListener(graph, "guide:".concat(event), _this2["onGuide".concat(eventName)]);
        addListener(graph, "anchor:".concat(event), _this2["onAnchor".concat(eventName)]);
      });
      GRAPH_OTHER_EVENTS.forEach(function (event) {
        addListener(graph, [event], _this2[GRAPH_OTHER_REACT_EVENTS[event]]);
      });
      PAGE_EVENTS.forEach(function (event) {
        addListener(_this2.page, [event], _this2[PAGE_REACT_EVENTS[event]]);
      });
    },
    getGraph: function getGraph() {
      return this.page.getGraph();
    }
  },
  render: function render() {
    var h = arguments[0];
    var page = this.page,
      pageId = this.pageId;
    return h("div", {
      "attrs": {
        "id": pageId
      },
      "style": {
        height: '100%'
      }
    }, [page ? this.$scopedSlots.default ? this.$scopedSlots.default() : this.$slots.default : null]);
  }
});
// CONCATENATED MODULE: ./src/components/Flow/index.js




/* harmony default export */ var Flow = ({
  mixins: [Page],
  name: 'Flow',
  props: {
    data: {
      default: function _default() {
        return {
          nodes: [],
          edges: []
        };
      }
    },
    graph: Object,
    align: Object,
    grid: Object,
    shortcut: Object,
    noEndEdge: {
      default: true,
      type: Boolean
    }
  },
  methods: {
    getPageId: function getPageId() {
      return "".concat(FLOW_CONTAINER, "_").concat(this.root.editor.id);
    },
    initPage: function initPage() {
      var editor = this.root.editor;
      editor.emit(EVENT_BEFORE_ADD_PAGE, {
        className: FLOW_CLASS_NAME
      });
      this.page = new Editor_Editor.Flow(this.config);
      editor.add(this.page);
      editor.emit(EVENT_AFTER_ADD_PAGE, {
        page: this.page
      });
    }
  }
});
// CONCATENATED MODULE: ./src/components/Koni/index.js




/* harmony default export */ var Koni = ({
  mixins: [Page],
  name: 'Koni',
  props: {
    data: {
      default: function _default() {
        return {
          nodes: [],
          edges: []
        };
      }
    },
    graph: Object,
    align: Object,
    grid: Object,
    shortcut: Object,
    noEndEdge: {
      default: true,
      type: Boolean
    }
  },
  methods: {
    getPageId: function getPageId() {
      return "".concat(KONI_CONTAINER, "_").concat(this.root.editor.id);
    },
    initPage: function initPage() {
      var editor = this.root.editor;
      editor.emit(EVENT_BEFORE_ADD_PAGE, {
        className: KONI_CLASS_NAME
      });
      this.page = new Editor_Editor.Koni(this.config);
      editor.add(this.page);
      editor.emit(EVENT_AFTER_ADD_PAGE, {
        page: this.page
      });
    }
  }
});
// CONCATENATED MODULE: ./src/components/Mind/index.js




/* harmony default export */ var Mind = ({
  mixins: [Page],
  name: 'Mind',
  props: {
    data: {
      default: function _default() {
        return {
          roots: []
        };
      }
    },
    graph: Object,
    shortcut: Object
  },
  methods: {
    bindEvent: function bindEvent() {
      Page.methods.bindEvent.call(this);
      this.bindKeyUpEditLabel();
    },
    bindKeyUpEditLabel: function bindKeyUpEditLabel() {
      var _this = this;
      var editLabel = this.page.get('labelTextArea');
      editLabel.on('keyup', function (e) {
        e.stopPropagation();
        var item = editLabel.focusItem;
        var text = editLabel.textContent;
        _this.page.emit('keyUpEditLabel', {
          item: item,
          text: text
        });
      });
    },
    getPageId: function getPageId() {
      return "".concat(MIND_CONTAINER, "_").concat(this.root.editor.id);
    },
    initPage: function initPage() {
      var editor = this.root.editor;
      editor.emit(EVENT_BEFORE_ADD_PAGE, {
        className: MIND_CLASS_NAME
      });
      this.page = new Editor_Editor.Mind(this.config);
      editor.add(this.page);
      editor.emit(EVENT_AFTER_ADD_PAGE, {
        page: this.page
      });
    }
  }
});
// CONCATENATED MODULE: ./src/components/Register/Register.js




/* harmony default export */ var Register = (function (type) {
  return {
    name: "Register".concat(type),
    inject: ['root'],
    props: {
      name: String,
      config: Object,
      extend: String,
      behaviour: Function,
      dependences: Array
    },
    data: function data() {
      return {
        type: type.toLowerCase()
      };
    },
    created: function created() {
      this.bindEvent();
    },
    methods: {
      bindEvent: function bindEvent() {
        var _this = this;
        var type = this.type;
        var handleBeforeAddPage = this.root.handleBeforeAddPage;
        handleBeforeAddPage(function (_ref) {
          var _host;
          var className = _ref.className;
          var host = Editor_Editor[className];
          var keys = ['name', 'config', 'extend'];
          if (type === 'command') {
            host = Editor_Editor;
          }
          if (type === 'behaviour') {
            keys = ['name', 'behaviour', 'dependences'];
          }
          var args = keys.map(function (key) {
            return _this[key];
          });
          (_host = host)["register".concat(upperFirst_default()(type))].apply(_host, _toConsumableArray(args));
        });
      }
    },
    render: function render() {
      return null;
    }
  };
});
// CONCATENATED MODULE: ./src/components/Register/index.js

var RegisterNode = Register('Node');
var RegisterEdge = Register('Edge');
var RegisterGroup = Register('Group');
var RegisterGuide = Register('Guide');
var RegisterCommand = Register('Command');
var RegisterBehaviour = Register('Behaviour');
// CONCATENATED MODULE: ./src/components/Command/index.js

/* harmony default export */ var Command = ({
  name: 'Command',
  props: {
    name: String,
    required: true
  },
  render: function render() {
    var h = arguments[0];
    var name = this.name;

    // https://github.com/vuejs/vue/issues/9458#issuecomment-461845497

    return h("div", {
      "attrs": {
        "data-command": name
      },
      "class": "command"
    }, [this.$scopedSlots.default ? this.$scopedSlots.default() : this.$slots.default]);
  }
});
// EXTERNAL MODULE: ./node_modules/_@antv_g6@3.8.5@@antv/g6/dist/g6.min.js
var g6_min = __webpack_require__("31da");
var g6_min_default = /*#__PURE__*/__webpack_require__.n(g6_min);

// CONCATENATED MODULE: ./src/components/Minimap/index.js






__webpack_require__("73d0");
/* harmony default export */ var Minimap = ({
  name: 'Minimap',
  inject: ['root'],
  props: {
    container: String,
    width: Number,
    height: Number,
    viewportWindowStyle: Object,
    viewportBackStyle: Object
  },
  data: function data() {
    return {
      containerId: '',
      minimap: null
    };
  },
  created: function created() {
    this.bindEvent();
  },
  mounted: function mounted() {
    this.init().then(this.bindPage);
  },
  beforeDestroy: function beforeDestroy() {
    this.minimap && this.minimap.destroy();
  },
  methods: {
    bindEvent: function bindEvent() {
      this.root.handleAfterAddPage(this.bindPage);
    },
    init: function init() {
      var _this = this;
      return new Promise(function (resolve) {
        _this.containerId = "".concat(MINIMAP_CONTAINER, "_").concat(_this.root.editor.id);
        var container = _this.container || _this.containerId;
        var width = _this.width,
          height = _this.height,
          viewportWindowStyle = _this.viewportWindowStyle,
          viewportBackStyle = _this.viewportBackStyle;
        _this.$nextTick(function () {
          var _document$getElementB = document.getElementById(container),
            clientWidth = _document$getElementB.clientWidth,
            clientHeight = _document$getElementB.clientHeight;
          _this.minimap = new g6_min_default.a.Components.Minimap({
            container: container,
            width: width || clientWidth,
            height: height || clientHeight,
            viewportWindowStyle: viewportWindowStyle,
            viewportBackStyle: viewportBackStyle
          });
          var currentPage = _this.getCurrentPage();
          _this.minimap.getGraph = function () {
            return currentPage.getGraph();
          };
          resolve();
        });
      });
    },
    bindPage: function bindPage() {
      var currentPage = this.getCurrentPage();
      if (!this.minimap || !currentPage) {
        return;
      }
      var graph = currentPage.getGraph();
      this.minimap.bindGraph(graph);
      this.minimap.debounceRender();
    },
    getCurrentPage: function getCurrentPage() {
      var currentPage = this.root.editor.getCurrentPage();
      return currentPage;
    }
  },
  render: function render() {
    var h = arguments[0];
    return h("div", {
      "attrs": {
        "id": this.containerId
      }
    });
  }
});
// CONCATENATED MODULE: ./src/components/ContextMenu/Menu.js
/* harmony default export */ var Menu = (function (type) {
  return {
    name: "".concat(type, "Menu"),
    data: function data() {
      return {
        type: type.toLowerCase()
      };
    },
    render: function render() {
      var h = arguments[0];
      var type = this.type;
      return h("div", {
        "class": "menu",
        "attrs": {
          "data-status": "".concat(type, "-selected")
        }
      }, [this.$scopedSlots.default ? this.$scopedSlots.default() : this.$slots.default]);
    }
  };
});
// CONCATENATED MODULE: ./src/components/ContextMenu/index.js




var NodeMenu = Menu('Node');
var EdgeMenu = Menu('Edge');
var GroupMenu = Menu('Group');
var MultiMenu = Menu('Multi');
var CanvasMenu = Menu('Canvas');
/* harmony default export */ var ContextMenu = ({
  name: 'ContextMenu',
  inject: ['root'],
  // provide by Editor
  data: function data() {
    return {
      contextMenu: null,
      containerId: ''
    };
  },
  mounted: function mounted() {
    var _this = this;
    var editor = this.root.editor;
    this.getContainerId();
    this.$nextTick(function () {
      _this.contextMenu = new Editor_Editor.Contextmenu({
        container: _this.containerId
      });
      editor.add(_this.contextMenu);
    });
  },
  beforeDestroy: function beforeDestroy() {
    this.contextMenu && this.contextMenu.destroy();
    this.contextMenu = null;
  },
  methods: {
    getContainerId: function getContainerId() {
      var editor = this.root.editor;
      this.containerId = "".concat(CONTEXT_MENU_CONTAINER, "_").concat(editor.id);
    }
  },
  render: function render() {
    var h = arguments[0];
    return h("div", {
      "attrs": {
        "id": this.containerId
      }
    }, [this.$scopedSlots.default ? this.$scopedSlots.default() : this.$slots.default]);
  }
});
// CONCATENATED MODULE: ./src/components/Toolbar/index.js



/* harmony default export */ var Toolbar = ({
  name: 'Toolbar',
  inject: ['root'],
  data: function data() {
    return {
      containerId: '',
      toolbar: null
    };
  },
  created: function created() {
    this.getContainerId();
  },
  mounted: function mounted() {
    var _this = this;
    var _this$root = this.root,
      editor = _this$root.editor,
      handleAfterAddPage = _this$root.handleAfterAddPage;
    handleAfterAddPage(function () {
      _this.toolbar = new Editor_Editor.Toolbar({
        container: _this.containerId
      });
      editor.add(_this.toolbar);
    });
  },
  beforeDestroy: function beforeDestroy() {
    this.toolbar && this.toolbar.destroy();
    this.toolbar = null;
  },
  methods: {
    getContainerId: function getContainerId() {
      var editor = this.root.editor;
      this.containerId = "".concat(TOOLBAR_CONTAINER, "_").concat(editor.id);
    }
  },
  render: function render() {
    var h = arguments[0];
    var containerId = this.containerId;
    return h("div", {
      "attrs": {
        "id": containerId
      }
    }, [this.$scopedSlots.default ? this.$scopedSlots.default() : this.$slots.default]);
  }
});
// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.array.filter.js
var es_array_filter = __webpack_require__("2325");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.array.push.js
var es_array_push = __webpack_require__("9842");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.object.get-own-property-descriptor.js
var es_object_get_own_property_descriptor = __webpack_require__("01900");

// EXTERNAL MODULE: ./node_modules/_core-js@3.38.0@core-js/modules/es.object.get-own-property-descriptors.js
var es_object_get_own_property_descriptors = __webpack_require__("7393");

// CONCATENATED MODULE: ./node_modules/_@babel_runtime@7.25.0@@babel/runtime/helpers/esm/objectSpread2.js









function ownKeys(e, r) {
  var t = Object.keys(e);
  if (Object.getOwnPropertySymbols) {
    var o = Object.getOwnPropertySymbols(e);
    r && (o = o.filter(function (r) {
      return Object.getOwnPropertyDescriptor(e, r).enumerable;
    })), t.push.apply(t, o);
  }
  return t;
}
function _objectSpread2(e) {
  for (var r = 1; r < arguments.length; r++) {
    var t = null != arguments[r] ? arguments[r] : {};
    r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
      _defineProperty(e, r, t[r]);
    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
      Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
    });
  }
  return e;
}

// CONCATENATED MODULE: ./src/components/ItemPanel/Item.js

/* harmony default export */ var Item = ({
  name: 'Item',
  inject: ['root'],
  props: {
    type: {
      type: String,
      default: 'node'
    },
    size: String,
    shape: String,
    src: String,
    model: {
      type: Object,
      default: function _default() {
        return {};
      }
    }
  },
  data: function data() {
    return {
      page: null
    };
  },
  created: function created() {
    this.bindEvent();
  },
  methods: {
    bindEvent: function bindEvent() {
      var _this = this;
      this.root.handleAfterAddPage(function (_ref) {
        var page = _ref.page;
        _this.page = page;
      });
    },
    handleMouseDown: function handleMouseDown() {
      var type = this.type,
        size = this.size,
        shape = this.shape,
        model = this.model;
      if (this.page) {
        this.page.beginAdd(type, _objectSpread2({
          type: type,
          size: size,
          shape: shape
        }, model));
      }
    }
  },
  render: function render() {
    var h = arguments[0];
    var src = this.src,
      shape = this.shape;
    return h("div", {
      "style": {
        cursor: 'pointer'
      },
      "on": {
        "mousedown": this.handleMouseDown
      }
    }, [src ? h("img", {
      "attrs": {
        "src": src,
        "alt": shape,
        "draggable": false
      }
    }) : this.$scopedSlots.default ? this.$scopedSlots.default() : this.$slots.default]);
  }
});
// CONCATENATED MODULE: ./src/components/ItemPanel/index.js


/* harmony default export */ var ItemPanel = ({
  name: 'ItemPanel',
  created: function created() {
    this.bindEvent();
  },
  beforeDestroy: function beforeDestroy() {
    document.removeEventListener('mouseup', this.handleMouseUp);
  },
  methods: {
    bindEvent: function bindEvent() {
      var _this = this;
      this.root.handleAfterAddPage(function (_ref) {
        var page = _ref.page;
        _this.page = page;
        document.addEventListener('mouseup', _this.handleMouseUp);
      });
    },
    handleMouseUp: function handleMouseUp() {
      this.page.cancelAdd();
    }
  },
  inject: ['root'],
  render: function render() {
    var h = arguments[0];
    return h("div", [this.$scopedSlots.default ? this.$scopedSlots.default() : this.$slots.default]);
  }
});
// CONCATENATED MODULE: ./src/components/DetailPanel/Panel.js
/* harmony default export */ var Panel = (function (type) {
  return {
    name: "".concat(type, "Panel"),
    props: ['status'],
    data: function data() {
      return {
        type: type.toLowerCase()
      };
    },
    render: function render() {
      var h = arguments[0];
      var type = this.type,
        status = this.status;
      if ("".concat(type, "-selected") !== status) {
        return null;
      }
      return h("div", [this.$scopedSlots.default ? this.$scopedSlots.default() : this.$slots.default]);
    }
  };
});
// CONCATENATED MODULE: ./src/components/DetailPanel/index.js



var NodePanel = Panel('Node');
var EdgePanel = Panel('Edge');
var GroupPanel = Panel('Group');
var MultiPanel = Panel('Multi');
var CanvasPanel = Panel('Canvas');
/* harmony default export */ var DetailPanel = ({
  name: 'DetailPanel',
  inject: ['root'],
  data: function data() {
    return {
      status: '',
      uniqueId: ''
    };
  },
  created: function created() {
    this.bindEvent();
  },
  methods: {
    bindEvent: function bindEvent() {
      var _this = this;
      this.root.handleAfterAddPage(function (_ref) {
        var page = _ref.page;
        _this.status = STATUS_CANVAS_SELECTED;
        page.on('statuschange', function (_ref2) {
          var status = _ref2.status;
          _this.status = status;
          _this.uniqueId = uniqueId_default()();
        });
      });
    }
  },
  render: function render() {
    var h = arguments[0];
    var status = this.status,
      uniqueId = this.uniqueId;
    if (!status) {
      return null;
    }
    return h("div", {
      "key": uniqueId
    }, [this.$scopedSlots.default({
      status: status,
      uniqueId: uniqueId
    })]);
  }
});
// CONCATENATED MODULE: ./src/index.js












/* harmony default export */ var src_0 = (components_Editor);
// CONCATENATED MODULE: ./node_modules/_@vue_cli-service@4.5.19@@vue/cli-service/lib/commands/build/entry-lib.js


/* harmony default export */ var entry_lib = __webpack_exports__["default"] = (src_0);



/***/ }),

/***/ "2bc1":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__("9774");

// `RegExp.prototype.flags` getter implementation
// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags
module.exports = function () {
  var that = anObject(this);
  var result = '';
  if (that.hasIndices) result += 'd';
  if (that.global) result += 'g';
  if (that.ignoreCase) result += 'i';
  if (that.multiline) result += 'm';
  if (that.dotAll) result += 's';
  if (that.unicode) result += 'u';
  if (that.unicodeSets) result += 'v';
  if (that.sticky) result += 'y';
  return result;
};


/***/ }),

/***/ "2c5a":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var classofRaw = __webpack_require__("51d7");
var uncurryThis = __webpack_require__("1043");

module.exports = function (fn) {
  // Nashorn bug:
  //   https://github.com/zloirock/core-js/issues/1128
  //   https://github.com/zloirock/core-js/issues/1130
  if (classofRaw(fn) === 'Function') return uncurryThis(fn);
};


/***/ }),

/***/ "2e64":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// we can't use just `it == null` since of `document.all` special case
// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot-aec
module.exports = function (it) {
  return it === null || it === undefined;
};


/***/ }),

/***/ "2ec4":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var getBuiltIn = __webpack_require__("4fed");
var IS_PURE = __webpack_require__("6e09");
var NativePromiseConstructor = __webpack_require__("b885");
var FORCED_PROMISE_CONSTRUCTOR = __webpack_require__("7cb3").CONSTRUCTOR;
var promiseResolve = __webpack_require__("dd26");

var PromiseConstructorWrapper = getBuiltIn('Promise');
var CHECK_WRAPPER = IS_PURE && !FORCED_PROMISE_CONSTRUCTOR;

// `Promise.resolve` method
// https://tc39.es/ecma262/#sec-promise.resolve
$({ target: 'Promise', stat: true, forced: IS_PURE || FORCED_PROMISE_CONSTRUCTOR }, {
  resolve: function resolve(x) {
    return promiseResolve(CHECK_WRAPPER && this === PromiseConstructorWrapper ? NativePromiseConstructor : this, x);
  }
});


/***/ }),

/***/ "2ec7":
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var freeGlobal = __webpack_require__("1cba");

/** Detect free variable `exports`. */
var freeExports =  true && exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Detect free variable `process` from Node.js. */
var freeProcess = moduleExports && freeGlobal.process;

/** Used to access faster Node.js helpers. */
var nodeUtil = (function() {
  try {
    // Use `util.types` for Node.js 10+.
    var types = freeModule && freeModule.require && freeModule.require('util').types;

    if (types) {
      return types;
    }

    // Legacy `process.binding('util')` for Node.js < 10.
    return freeProcess && freeProcess.binding && freeProcess.binding('util');
  } catch (e) {}
}());

module.exports = nodeUtil;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("6765")(module)))

/***/ }),

/***/ "2ed2":
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__("dc9b"),
    getPrototype = __webpack_require__("f227"),
    isObjectLike = __webpack_require__("d92c");

/** `Object#toString` result references. */
var objectTag = '[object Object]';

/** Used for built-in method references. */
var funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to infer the `Object` constructor. */
var objectCtorString = funcToString.call(Object);

/**
 * Checks if `value` is a plain object, that is, an object created by the
 * `Object` constructor or one with a `[[Prototype]]` of `null`.
 *
 * @static
 * @memberOf _
 * @since 0.8.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 * }
 *
 * _.isPlainObject(new Foo);
 * // => false
 *
 * _.isPlainObject([1, 2, 3]);
 * // => false
 *
 * _.isPlainObject({ 'x': 0, 'y': 0 });
 * // => true
 *
 * _.isPlainObject(Object.create(null));
 * // => true
 */
function isPlainObject(value) {
  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {
    return false;
  }
  var proto = getPrototype(value);
  if (proto === null) {
    return true;
  }
  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;
  return typeof Ctor == 'function' && Ctor instanceof Ctor &&
    funcToString.call(Ctor) == objectCtorString;
}

module.exports = isPlainObject;


/***/ }),

/***/ "2f37":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");
var globalThis = __webpack_require__("92e2");

// babel-minify and Closure Compiler transpiles RegExp('.', 's') -> /./s and it causes SyntaxError
var $RegExp = globalThis.RegExp;

module.exports = fails(function () {
  var re = $RegExp('.', 's');
  return !(re.dotAll && re.test('\n') && re.flags === 's');
});


/***/ }),

/***/ "2fe8":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return getTextHeight; });
/* unused harmony export getLineSpaceing */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return getTextWidth; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return assembleFont; });
/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("7533");
/* harmony import */ var _offscreen__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("bf34");


/**
 * 获取文本的高度
 * @param text 文本
 * @param fontSize 字体大小
 * @param lineHeight 行高，可以为空
 */
function getTextHeight(text, fontSize, lineHeight) {
    var lineCount = 1;
    if (Object(_util__WEBPACK_IMPORTED_MODULE_0__[/* isString */ "h"])(text)) {
        lineCount = text.split('\n').length;
    }
    if (lineCount > 1) {
        var spaceingY = getLineSpaceing(fontSize, lineHeight);
        return fontSize * lineCount + spaceingY * (lineCount - 1);
    }
    return fontSize;
}
/**
 * 获取行间距如果文本多行，需要获取文本间距
 * @param fontSize 字体大小
 * @param lineHeight 行高
 */
function getLineSpaceing(fontSize, lineHeight) {
    return lineHeight ? lineHeight - fontSize : fontSize * 0.14;
}
/**
 * 字体宽度
 * @param text 文本
 * @param font 字体
 */
function getTextWidth(text, font) {
    var context = Object(_offscreen__WEBPACK_IMPORTED_MODULE_1__[/* getOffScreenContext */ "a"])(); // 获取离屏的 ctx 进行计算
    var width = 0;
    // null 或者 undefined 时，宽度为 0
    if (Object(_util__WEBPACK_IMPORTED_MODULE_0__[/* isNil */ "e"])(text) || text === '') {
        return width;
    }
    context.save();
    context.font = font;
    if (Object(_util__WEBPACK_IMPORTED_MODULE_0__[/* isString */ "h"])(text) && text.includes('\n')) {
        var textArr = text.split('\n');
        Object(_util__WEBPACK_IMPORTED_MODULE_0__[/* each */ "a"])(textArr, function (subText) {
            var measureWidth = context.measureText(subText).width;
            if (width < measureWidth) {
                width = measureWidth;
            }
        });
    }
    else {
        width = context.measureText(text).width;
    }
    context.restore();
    return width;
}
function assembleFont(attrs) {
    var fontSize = attrs.fontSize, fontFamily = attrs.fontFamily, fontWeight = attrs.fontWeight, fontStyle = attrs.fontStyle, fontVariant = attrs.fontVariant;
    return [fontStyle, fontVariant, fontWeight, fontSize + "px", fontFamily].join(' ').trim();
}
//# sourceMappingURL=text.js.map

/***/ }),

/***/ "308c":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var bind = __webpack_require__("59a3");
var uncurryThis = __webpack_require__("1043");
var IndexedObject = __webpack_require__("5155");
var toObject = __webpack_require__("8ec0");
var lengthOfArrayLike = __webpack_require__("8269");
var arraySpeciesCreate = __webpack_require__("dda1");

var push = uncurryThis([].push);

// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterReject }` methods implementation
var createMethod = function (TYPE) {
  var IS_MAP = TYPE === 1;
  var IS_FILTER = TYPE === 2;
  var IS_SOME = TYPE === 3;
  var IS_EVERY = TYPE === 4;
  var IS_FIND_INDEX = TYPE === 6;
  var IS_FILTER_REJECT = TYPE === 7;
  var NO_HOLES = TYPE === 5 || IS_FIND_INDEX;
  return function ($this, callbackfn, that, specificCreate) {
    var O = toObject($this);
    var self = IndexedObject(O);
    var length = lengthOfArrayLike(self);
    var boundFunction = bind(callbackfn, that);
    var index = 0;
    var create = specificCreate || arraySpeciesCreate;
    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_REJECT ? create($this, 0) : undefined;
    var value, result;
    for (;length > index; index++) if (NO_HOLES || index in self) {
      value = self[index];
      result = boundFunction(value, index, O);
      if (TYPE) {
        if (IS_MAP) target[index] = result; // map
        else if (result) switch (TYPE) {
          case 3: return true;              // some
          case 5: return value;             // find
          case 6: return index;             // findIndex
          case 2: push(target, value);      // filter
        } else switch (TYPE) {
          case 4: return false;             // every
          case 7: push(target, value);      // filterReject
        }
      }
    }
    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;
  };
};

module.exports = {
  // `Array.prototype.forEach` method
  // https://tc39.es/ecma262/#sec-array.prototype.foreach
  forEach: createMethod(0),
  // `Array.prototype.map` method
  // https://tc39.es/ecma262/#sec-array.prototype.map
  map: createMethod(1),
  // `Array.prototype.filter` method
  // https://tc39.es/ecma262/#sec-array.prototype.filter
  filter: createMethod(2),
  // `Array.prototype.some` method
  // https://tc39.es/ecma262/#sec-array.prototype.some
  some: createMethod(3),
  // `Array.prototype.every` method
  // https://tc39.es/ecma262/#sec-array.prototype.every
  every: createMethod(4),
  // `Array.prototype.find` method
  // https://tc39.es/ecma262/#sec-array.prototype.find
  find: createMethod(5),
  // `Array.prototype.findIndex` method
  // https://tc39.es/ecma262/#sec-array.prototype.findIndex
  findIndex: createMethod(6),
  // `Array.prototype.filterReject` method
  // https://github.com/tc39/proposal-array-filtering
  filterReject: createMethod(7)
};


/***/ }),

/***/ "30b5":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");

// `thisNumberValue` abstract operation
// https://tc39.es/ecma262/#sec-thisnumbervalue
module.exports = uncurryThis(1.0.valueOf);


/***/ }),

/***/ "30b8":
/***/ (function(module, exports, __webpack_require__) {

var hashClear = __webpack_require__("cf38"),
    hashDelete = __webpack_require__("9796"),
    hashGet = __webpack_require__("397c"),
    hashHas = __webpack_require__("1e05"),
    hashSet = __webpack_require__("d1bd");

/**
 * Creates a hash object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Hash(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `Hash`.
Hash.prototype.clear = hashClear;
Hash.prototype['delete'] = hashDelete;
Hash.prototype.get = hashGet;
Hash.prototype.has = hashHas;
Hash.prototype.set = hashSet;

module.exports = Hash;


/***/ }),

/***/ "3110":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $TypeError = TypeError;
var MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF; // 2 ** 53 - 1 == 9007199254740991

module.exports = function (it) {
  if (it > MAX_SAFE_INTEGER) throw $TypeError('Maximum allowed index exceeded');
  return it;
};


/***/ }),

/***/ "31af":
/***/ (function(module, exports) {

/**
 * Creates a base function for methods like `_.forIn` and `_.forOwn`.
 *
 * @private
 * @param {boolean} [fromRight] Specify iterating from right to left.
 * @returns {Function} Returns the new base function.
 */
function createBaseFor(fromRight) {
  return function(object, iteratee, keysFunc) {
    var index = -1,
        iterable = Object(object),
        props = keysFunc(object),
        length = props.length;

    while (length--) {
      var key = props[fromRight ? length : ++index];
      if (iteratee(iterable[key], key, iterable) === false) {
        break;
      }
    }
    return object;
  };
}

module.exports = createBaseFor;


/***/ }),

/***/ "31b4":
/***/ (function(module, exports, __webpack_require__) {

var apply = __webpack_require__("72f9");

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeMax = Math.max;

/**
 * A specialized version of `baseRest` which transforms the rest array.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @param {Function} transform The rest array transform.
 * @returns {Function} Returns the new function.
 */
function overRest(func, start, transform) {
  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);
  return function() {
    var args = arguments,
        index = -1,
        length = nativeMax(args.length - start, 0),
        array = Array(length);

    while (++index < length) {
      array[index] = args[start + index];
    }
    index = -1;
    var otherArgs = Array(start + 1);
    while (++index < start) {
      otherArgs[index] = args[index];
    }
    otherArgs[start] = transform(array);
    return apply(func, this, otherArgs);
  };
}

module.exports = overRest;


/***/ }),

/***/ "31da":
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?module.exports=e():undefined}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=556)}([function(t,e,r){"use strict";r.r(e),r.d(e,"contains",(function(){return i})),r.d(e,"includes",(function(){return i})),r.d(e,"difference",(function(){return a})),r.d(e,"find",(function(){return x})),r.d(e,"findIndex",(function(){return w})),r.d(e,"firstValue",(function(){return M})),r.d(e,"flatten",(function(){return S})),r.d(e,"flattenDeep",(function(){return _})),r.d(e,"getRange",(function(){return k})),r.d(e,"pull",(function(){return C})),r.d(e,"pullAt",(function(){return P})),r.d(e,"reduce",(function(){return I})),r.d(e,"remove",(function(){return T})),r.d(e,"sortBy",(function(){return D})),r.d(e,"union",(function(){return R})),r.d(e,"uniq",(function(){return B})),r.d(e,"valuesOfKey",(function(){return L})),r.d(e,"head",(function(){return z})),r.d(e,"last",(function(){return F})),r.d(e,"startsWith",(function(){return Y})),r.d(e,"endsWith",(function(){return G})),r.d(e,"filter",(function(){return o})),r.d(e,"every",(function(){return q})),r.d(e,"some",(function(){return X})),r.d(e,"group",(function(){return W})),r.d(e,"groupBy",(function(){return H})),r.d(e,"groupToMap",(function(){return U})),r.d(e,"getWrapBehavior",(function(){return Z})),r.d(e,"wrapBehavior",(function(){return $})),r.d(e,"number2color",(function(){return Q})),r.d(e,"parseRadius",(function(){return J})),r.d(e,"clamp",(function(){return tt})),r.d(e,"fixedBase",(function(){return et})),r.d(e,"isDecimal",(function(){return nt})),r.d(e,"isEven",(function(){return it})),r.d(e,"isInteger",(function(){return ot})),r.d(e,"isNegative",(function(){return at})),r.d(e,"isNumberEqual",(function(){return st})),r.d(e,"isOdd",(function(){return ut})),r.d(e,"isPositive",(function(){return ct})),r.d(e,"maxBy",(function(){return ht})),r.d(e,"minBy",(function(){return ft})),r.d(e,"mod",(function(){return lt})),r.d(e,"toDegree",(function(){return pt})),r.d(e,"toInteger",(function(){return gt})),r.d(e,"toRadian",(function(){return yt})),r.d(e,"forIn",(function(){return mt})),r.d(e,"has",(function(){return bt})),r.d(e,"hasKey",(function(){return xt})),r.d(e,"hasValue",(function(){return Mt})),r.d(e,"keys",(function(){return g})),r.d(e,"isMatch",(function(){return v})),r.d(e,"values",(function(){return wt})),r.d(e,"lowerCase",(function(){return _t})),r.d(e,"lowerFirst",(function(){return kt})),r.d(e,"substitute",(function(){return Ot})),r.d(e,"upperCase",(function(){return Et})),r.d(e,"upperFirst",(function(){return jt})),r.d(e,"getType",(function(){return At})),r.d(e,"isArguments",(function(){return Pt})),r.d(e,"isArray",(function(){return f})),r.d(e,"isArrayLike",(function(){return n})),r.d(e,"isBoolean",(function(){return It})),r.d(e,"isDate",(function(){return Tt})),r.d(e,"isError",(function(){return Nt})),r.d(e,"isFunction",(function(){return c})),r.d(e,"isFinite",(function(){return Dt})),r.d(e,"isNil",(function(){return h})),r.d(e,"isNull",(function(){return Bt})),r.d(e,"isNumber",(function(){return rt})),r.d(e,"isObject",(function(){return d})),r.d(e,"isObjectLike",(function(){return m})),r.d(e,"isPlainObject",(function(){return b})),r.d(e,"isPrototype",(function(){return Lt})),r.d(e,"isRegExp",(function(){return zt})),r.d(e,"isString",(function(){return N})),r.d(e,"isType",(function(){return u})),r.d(e,"isUndefined",(function(){return Ft})),r.d(e,"isElement",(function(){return Yt})),r.d(e,"requestAnimationFrame",(function(){return Gt})),r.d(e,"clearAnimationFrame",(function(){return qt})),r.d(e,"augment",(function(){return Ht})),r.d(e,"clone",(function(){return Wt})),r.d(e,"debounce",(function(){return Zt})),r.d(e,"memoize",(function(){return $t})),r.d(e,"deepMix",(function(){return Qt})),r.d(e,"each",(function(){return p})),r.d(e,"extend",(function(){return Jt})),r.d(e,"indexOf",(function(){return te})),r.d(e,"isEmpty",(function(){return re})),r.d(e,"isEqual",(function(){return ne})),r.d(e,"isEqualWith",(function(){return ie})),r.d(e,"map",(function(){return oe})),r.d(e,"mapValues",(function(){return se})),r.d(e,"mix",(function(){return Vt})),r.d(e,"assign",(function(){return Vt})),r.d(e,"get",(function(){return ue})),r.d(e,"set",(function(){return ce})),r.d(e,"pick",(function(){return fe})),r.d(e,"throttle",(function(){return le})),r.d(e,"toArray",(function(){return de})),r.d(e,"toString",(function(){return St})),r.d(e,"uniqueId",(function(){return ge})),r.d(e,"noop",(function(){return ve})),r.d(e,"identity",(function(){return ye})),r.d(e,"size",(function(){return me})),r.d(e,"Cache",(function(){return be}));var n=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)},i=function(t,e){return!!n(t)&&t.indexOf(e)>-1},o=function(t,e){if(!n(t))return t;for(var r=[],i=0;i<t.length;i++){var o=t[i];e(o,i)&&r.push(o)}return r},a=function(t,e){return void 0===e&&(e=[]),o(t,(function(t){return!i(e,t)}))},s={}.toString,u=function(t,e){return s.call(t)==="[object "+e+"]"},c=function(t){return u(t,"Function")},h=function(t){return null==t},f=function(t){return Array.isArray?Array.isArray(t):u(t,"Array")};function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var d=function(t){var e=l(t);return null!==t&&"object"===e||"function"===e};var p=function(t,e){if(t)if(f(t))for(var r=0,n=t.length;r<n&&!1!==e(t[r],r);r++);else if(d(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break},g=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return p(t,(function(r,n){c(t)&&"prototype"===n||e.push(n)})),e};var v=function(t,e){var r=g(e),n=r.length;if(h(t))return!n;for(var i=0;i<n;i+=1){var o=r[i];if(e[o]!==t[o]||!(o in t))return!1}return!0};function y(t){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var m=function(t){return"object"===y(t)&&null!==t},b=function(t){if(!m(t)||!u(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};var x=function(t,e){if(!f(t))return null;var r;if(c(e)&&(r=e),b(e)&&(r=function(t){return v(t,e)}),r)for(var n=0;n<t.length;n+=1)if(r(t[n]))return t[n];return null};var w=function(t,e,r){void 0===r&&(r=0);for(var n=r;n<t.length;n++)if(e(t[n],n))return n;return-1},M=function(t,e){for(var r=null,n=0;n<t.length;n++){var i=t[n][e];if(!h(i)){r=f(i)?i[0]:i;break}}return r},S=function(t){if(!f(t))return[];for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e},_=function t(e,r){if(void 0===r&&(r=[]),f(e))for(var n=0;n<e.length;n+=1)t(e[n],r);else r.push(e);return r},k=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(f(t[0])){for(var r=[],n=0;n<t.length;n++)r=r.concat(t[n]);e=r}var i=Math.max.apply(null,e);return{min:Math.min.apply(null,e),max:i}},O=Array.prototype,E=O.splice,j=O.indexOf,C=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var i=e[n],o=-1;(o=j.call(t,i))>-1;)E.call(t,o,1);return t},A=Array.prototype.splice,P=function(t,e){if(!n(t))return[];for(var r=t?e.length:0,i=r-1;r--;){var o=void 0,a=e[r];r!==i&&a===o||(o=a,A.call(t,a,1))}return t},I=function(t,e,r){if(!f(t)&&!b(t))return t;var n=r;return p(t,(function(t,r){n=e(n,t,r)})),n},T=function(t,e){var r=[];if(!n(t))return r;for(var i=-1,o=[],a=t.length;++i<a;){var s=t[i];e(s,i,t)&&(r.push(s),o.push(i))}return P(t,o),r},N=function(t){return u(t,"String")};var D=function(t,e){var r;if(c(e))r=function(t,r){return e(t)-e(r)};else{var n=[];N(e)?n.push(e):f(e)&&(n=e),r=function(t,e){for(var r=0;r<n.length;r+=1){var i=n[r];if(t[i]>e[i])return 1;if(t[i]<e[i])return-1}return 0}}return t.sort(r),t},B=function(t){var e=[];return p(t,(function(t){i(e,t)||e.push(t)})),e},R=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return B([].concat.apply([],t))},L=function(t,e){for(var r=[],n={},i=0;i<t.length;i++){var o=t[i][e];if(!h(o)){f(o)||(o=[o]);for(var a=0;a<o.length;a++){var s=o[a];n[s]||(r.push(s),n[s]=!0)}}}return r};function z(t){if(n(t))return t[0]}function F(t){if(n(t)){return t[t.length-1]}}var Y=function(t,e){return!(!f(t)&&!N(t))&&t[0]===e};var G=function(t,e){return!(!f(t)&&!N(t))&&t[t.length-1]===e},q=function(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0},X=function(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r))return!0;return!1},V=Object.prototype.hasOwnProperty;var H=function(t,e){if(!e||!f(t))return{};for(var r,n={},i=c(e)?e:function(t){return t[e]},o=0;o<t.length;o++){var a=t[o];r=i(a),V.call(n,r)?n[r].push(a):n[r]=[a]}return n},U=function(t,e){if(!e)return{0:t};if(!c(e)){var r=f(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",n=0,i=r.length;n<i;n++)e+=t[r[n]]&&t[r[n]].toString();return e}}return H(t,e)},W=function(t,e){if(!e)return[t];var r=U(t,e),n=[];for(var i in r)n.push(r[i]);return n};var Z=function(t,e){return t["_wrap_"+e]};var $=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var r=function(r){t[e](r)};return t["_wrap_"+e]=r,r},K={};var Q=function(t){var e=K[t];if(!e){for(var r=t.toString(16),n=r.length;n<6;n++)r="0"+r;e="#"+r,K[t]=e}return e};var J=function(t){var e=0,r=0,n=0,i=0;return f(t)?1===t.length?e=r=n=i=t[0]:2===t.length?(e=n=t[0],r=i=t[1]):3===t.length?(e=t[0],r=i=t[1],n=t[2]):(e=t[0],r=t[1],n=t[2],i=t[3]):e=r=n=i=t,{r1:e,r2:r,r3:n,r4:i}},tt=function(t,e,r){return t<e?e:t>r?r:t},et=function(t,e){var r=e.toString(),n=r.indexOf(".");if(-1===n)return Math.round(t);var i=r.substr(n+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))},rt=function(t){return u(t,"Number")},nt=function(t){return rt(t)&&t%1!=0},it=function(t){return rt(t)&&t%2==0},ot=Number.isInteger?Number.isInteger:function(t){return rt(t)&&t%1==0},at=function(t){return rt(t)&&t<0};function st(t,e,r){return void 0===r&&(r=1e-5),Math.abs(t-e)<r}var ut=function(t){return rt(t)&&t%2!=0},ct=function(t){return rt(t)&&t>0},ht=function(t,e){if(f(t)){var r,n,i=t[0];return r=c(e)?e(t[0]):t[0][e],p(t,(function(t){(n=c(e)?e(t):t[e])>r&&(i=t,r=n)})),i}},ft=function(t,e){if(f(t)){var r,n,i=t[0];return r=c(e)?e(t[0]):t[0][e],p(t,(function(t){(n=c(e)?e(t):t[e])<r&&(i=t,r=n)})),i}},lt=function(t,e){return(t%e+e)%e},dt=180/Math.PI,pt=function(t){return dt*t},gt=parseInt,vt=Math.PI/180,yt=function(t){return vt*t},mt=p,bt=function(t,e){return t.hasOwnProperty(e)},xt=bt,wt=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return p(t,(function(r,n){c(t)&&"prototype"===n||e.push(r)})),e},Mt=function(t,e){return i(wt(t),e)},St=function(t){return h(t)?"":t.toString()},_t=function(t){return St(t).toLowerCase()},kt=function(t){var e=St(t);return e.charAt(0).toLowerCase()+e.substring(1)};var Ot=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,r){return"\\"===t.charAt(0)?t.slice(1):void 0===e[r]?"":e[r]})):t},Et=function(t){return St(t).toUpperCase()},jt=function(t){var e=St(t);return e.charAt(0).toUpperCase()+e.substring(1)},Ct={}.toString,At=function(t){return Ct.call(t).replace(/^\[object /,"").replace(/]$/,"")},Pt=function(t){return u(t,"Arguments")},It=function(t){return u(t,"Boolean")},Tt=function(t){return u(t,"Date")},Nt=function(t){return u(t,"Error")},Dt=function(t){return rt(t)&&isFinite(t)},Bt=function(t){return null===t},Rt=Object.prototype,Lt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Rt)},zt=function(t){return u(t,"RegExp")},Ft=function(t){return void 0===t},Yt=function(t){return t instanceof Element||t instanceof HTMLDocument};function Gt(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}function qt(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}function Xt(t,e){for(var r in e)e.hasOwnProperty(r)&&"constructor"!==r&&void 0!==e[r]&&(t[r]=e[r])}function Vt(t,e,r,n){return e&&Xt(t,e),r&&Xt(t,r),n&&Xt(t,n),t}var Ht=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t[0],n=1;n<t.length;n++){var i=t[n];c(i)&&(i=i.prototype),Vt(r.prototype,i)}};function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Wt=function t(e){if("object"!==Ut(e)||null===e)return e;var r;if(f(e)){r=[];for(var n=0,i=e.length;n<i;n++)"object"===Ut(e[n])&&null!=e[n]?r[n]=t(e[n]):r[n]=e[n]}else for(var o in r={},e)"object"===Ut(e[o])&&null!=e[o]?r[o]=t(e[o]):r[o]=e[o];return r};var Zt=function(t,e,r){var n;return function(){var i=this,o=arguments,a=function(){n=null,r||t.apply(i,o)},s=r&&!n;clearTimeout(n),n=setTimeout(a,e),s&&t.apply(i,o)}},$t=function(t,e){if(!c(t))throw new TypeError("Expected a function");var r=function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var s=t.apply(this,n);return a.set(o,s),s};return r.cache=new Map,r};function Kt(t,e,r,n){for(var i in r=r||0,n=n||5,e)if(e.hasOwnProperty(i)){var o=e[i];null!==o&&b(o)?(b(t[i])||(t[i]={}),r<n?Kt(t[i],o,r+1,n):t[i]=e[i]):f(o)?(t[i]=[],t[i]=t[i].concat(o)):void 0!==o&&(t[i]=o)}}var Qt=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)Kt(t,e[n]);return t},Jt=function(t,e,r,n){c(e)||(r=e,e=t,t=function(){});var i=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function r(){}r.prototype=t;var n=new r;return n.constructor=e,n},o=i(e.prototype,t);return t.prototype=Vt(o,t.prototype),t.superclass=i(e.prototype,e),Vt(o,r),Vt(t,n),t},te=function(t,e){if(!n(t))return-1;var r=Array.prototype.indexOf;if(r)return r.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i},ee=Object.prototype.hasOwnProperty;var re=function(t){if(h(t))return!0;if(n(t))return!t.length;var e=At(t);if("Map"===e||"Set"===e)return!t.size;if(Lt(t))return!Object.keys(t).length;for(var r in t)if(ee.call(t,r))return!1;return!0},ne=function t(e,r){if(e===r)return!0;if(!e||!r)return!1;if(N(e)||N(r))return!1;if(n(e)||n(r)){if(e.length!==r.length)return!1;for(var i=!0,o=0;o<e.length&&(i=t(e[o],r[o]));o++);return i}if(m(e)||m(r)){var a=Object.keys(e),s=Object.keys(r);if(a.length!==s.length)return!1;for(i=!0,o=0;o<a.length&&(i=t(e[a[o]],r[a[o]]));o++);return i}return!1},ie=function(t,e,r){return c(r)?!!r(t,e):ne(t,e)},oe=function(t,e){if(!n(t))return t;for(var r=[],i=0;i<t.length;i++){var o=t[i];r.push(e(o,i))}return r},ae=function(t){return t},se=function(t,e){void 0===e&&(e=ae);var r={};return d(t)&&!h(t)&&Object.keys(t).forEach((function(n){r[n]=e(t[n],n)})),r},ue=function(t,e,r){for(var n=0,i=N(e)?e.split("."):e;t&&n<i.length;)t=t[i[n++]];return void 0===t||n<i.length?r:t},ce=function(t,e,r){var n=t,i=N(e)?e.split("."):e;return i.forEach((function(t,e){e<i.length-1?(d(n[t])||(n[t]=rt(i[e+1])?[]:{}),n=n[t]):n[t]=r})),t},he=Object.prototype.hasOwnProperty,fe=function(t,e){if(null===t||!b(t))return{};var r={};return p(e,(function(e){he.call(t,e)&&(r[e]=t[e])})),r},le=function(t,e,r){var n,i,o,a,s=0;r||(r={});var u=function(){s=!1===r.leading?0:Date.now(),n=null,a=t.apply(i,o),n||(i=o=null)},c=function(){var c=Date.now();s||!1!==r.leading||(s=c);var h=e-(c-s);return i=this,o=arguments,h<=0||h>e?(n&&(clearTimeout(n),n=null),s=c,a=t.apply(i,o),n||(i=o=null)):n||!1===r.trailing||(n=setTimeout(u,h)),a};return c.cancel=function(){clearTimeout(n),s=0,n=i=o=null},c},de=function(t){return n(t)?Array.prototype.slice.call(t):[]},pe={},ge=function(t){return pe[t=t||"g"]?pe[t]+=1:pe[t]=1,t+pe[t]},ve=function(){},ye=function(t){return t};function me(t){return h(t)?0:n(t)?t.length:Object.keys(t).length}var be=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var r=this.map[t];return void 0===r?e:r},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}()},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */r.r(e),r.d(e,"__extends",(function(){return o})),r.d(e,"__assign",(function(){return a})),r.d(e,"__rest",(function(){return s})),r.d(e,"__decorate",(function(){return u})),r.d(e,"__param",(function(){return c})),r.d(e,"__metadata",(function(){return h})),r.d(e,"__awaiter",(function(){return f})),r.d(e,"__generator",(function(){return l})),r.d(e,"__createBinding",(function(){return d})),r.d(e,"__exportStar",(function(){return p})),r.d(e,"__values",(function(){return g})),r.d(e,"__read",(function(){return v})),r.d(e,"__spread",(function(){return y})),r.d(e,"__spreadArrays",(function(){return m})),r.d(e,"__await",(function(){return b})),r.d(e,"__asyncGenerator",(function(){return x})),r.d(e,"__asyncDelegator",(function(){return w})),r.d(e,"__asyncValues",(function(){return M})),r.d(e,"__makeTemplateObject",(function(){return S})),r.d(e,"__importStar",(function(){return k})),r.d(e,"__importDefault",(function(){return O})),r.d(e,"__classPrivateFieldGet",(function(){return E})),r.d(e,"__classPrivateFieldSet",(function(){return j}));var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function o(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}var a=function(){return(a=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r}function u(t,e,r,i){var o,a=arguments.length,s=a<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,r):i;if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,i);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(s=(a<3?o(s):a>3?o(e,r,s):o(e,r))||s);return a>3&&s&&Object.defineProperty(e,r,s),s}function c(t,e){return function(r,n){e(r,n,t)}}function h(t,e){if("object"===("undefined"==typeof Reflect?"undefined":n(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function f(t,e,r,n){return new(r||(r=Promise))((function(i,o){function a(t){try{u(n.next(t))}catch(t){o(t)}}function s(t){try{u(n.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))}function l(t,e){var r,n,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],n=0}finally{r=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var d=Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]};function p(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||d(e,t,r)}function g(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,i,o=r.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(n=o.next()).done;)a.push(n.value)}catch(t){i={error:t}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(v(arguments[e]));return t}function m(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function x(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,i=r.apply(t,e||[]),o=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){i[t]&&(n[t]=function(e){return new Promise((function(r,n){o.push([t,e,r,n])>1||s(t,e)}))})}function s(t,e){try{(r=i[t](e)).value instanceof b?Promise.resolve(r.value.v).then(u,c):h(o[0][2],r)}catch(t){h(o[0][3],t)}var r}function u(t){s("next",t)}function c(t){s("throw",t)}function h(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function w(t){var e,r;return e={},n("next"),n("throw",(function(t){throw t})),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,i){e[n]=t[n]?function(e){return(r=!r)?{value:b(t[n](e)),done:"return"===n}:i?i(e):e}:i}}function M(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t=g(t),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise((function(n,i){(function(t,e,r,n){Promise.resolve(n).then((function(e){t({value:e,done:r})}),e)})(n,i,(e=t[r](e)).done,e.value)}))}}}function S(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var _=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e};function k(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&d(e,t,r);return _(e,t),e}function O(t){return t&&t.__esModule?t:{default:t}}function E(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function j(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(35);e.default=function(t,e){if(t)if(n.default(t))for(var r=0,o=t.length;r<o&&!1!==e(t[r],r);r++);else if(i.default(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===e(t[a],a))break}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(27);e.default=function(t){return n.default(t,"String")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(27);e.default=function(t){return Array.isArray?Array.isArray(t):n.default(t,"Array")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t)for(var r in e)e.hasOwnProperty(r)&&(t.style[r]=e[r]);return t}},function(t,e,r){"use strict";r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return o}));var n=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,o=Math.random;Math.PI;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(72);e.contains=n.default,e.includes=n.default;var i=r(242);e.difference=i.default;var o=r(243);e.find=o.default;var a=r(244);e.findIndex=a.default;var s=r(245);e.firstValue=s.default;var u=r(246);e.flatten=u.default;var c=r(247);e.flattenDeep=c.default;var h=r(248);e.getRange=h.default;var f=r(249);e.pull=f.default;var l=r(140);e.pullAt=l.default;var d=r(250);e.reduce=d.default;var p=r(251);e.remove=p.default;var g=r(252);e.sortBy=g.default;var v=r(253);e.union=v.default;var y=r(141);e.uniq=y.default;var m=r(254);e.valuesOfKey=m.default;var b=r(255);e.head=b.default;var x=r(256);e.last=x.default;var w=r(257);e.startsWith=w.default;var M=r(258);e.endsWith=M.default;var S=r(137);e.filter=S.default;var _=r(259);e.every=_.default;var k=r(260);e.some=k.default;var O=r(261);e.group=O.default;var E=r(69);e.groupBy=E.default;var j=r(142);e.groupToMap=j.default;var C=r(262);e.getWrapBehavior=C.default;var A=r(50);e.wrapBehavior=A.default;var P=r(263);e.number2color=P.default;var I=r(264);e.parseRadius=I.default;var T=r(265);e.clamp=T.default;var N=r(266);e.fixedBase=N.default;var D=r(267);e.isDecimal=D.default;var B=r(268);e.isEven=B.default;var R=r(269);e.isInteger=R.default;var L=r(270);e.isNegative=L.default;var z=r(103);e.isNumberEqual=z.default;var F=r(271);e.isOdd=F.default;var Y=r(272);e.isPositive=Y.default;var G=r(273);e.maxBy=G.default;var q=r(274);e.minBy=q.default;var X=r(67);e.mod=X.default;var V=r(275);e.toDegree=V.default;var H=r(276);e.toInteger=H.default;var U=r(68);e.toRadian=U.default;var W=r(277);e.forIn=W.default;var Z=r(143);e.has=Z.default;var $=r(278);e.hasKey=$.default;var K=r(279);e.hasValue=K.default;var Q=r(139);e.keys=Q.default;var J=r(138);e.isMatch=J.default;var tt=r(144);e.values=tt.default;var et=r(280);e.lowerCase=et.default;var rt=r(281);e.lowerFirst=rt.default;var nt=r(282);e.substitute=nt.default;var it=r(283);e.upperCase=it.default;var ot=r(49);e.upperFirst=ot.default;var at=r(145);e.getType=at.default;var st=r(284);e.isArguments=st.default;var ut=r(4);e.isArray=ut.default;var ct=r(21);e.isArrayLike=ct.default;var ht=r(285);e.isBoolean=ht.default;var ft=r(286);e.isDate=ft.default;var lt=r(287);e.isError=lt.default;var dt=r(14);e.isFunction=dt.default;var pt=r(288);e.isFinite=pt.default;var gt=r(10);e.isNil=gt.default;var vt=r(289);e.isNull=vt.default;var yt=r(11);e.isNumber=yt.default;var mt=r(35);e.isObject=mt.default;var bt=r(102);e.isObjectLike=bt.default;var xt=r(58);e.isPlainObject=xt.default;var wt=r(146);e.isPrototype=wt.default;var Mt=r(290);e.isRegExp=Mt.default;var St=r(3);e.isString=St.default;var _t=r(27);e.isType=_t.default;var kt=r(291);e.isUndefined=kt.default;var Ot=r(292);e.isElement=Ot.default;var Et=r(147);e.requestAnimationFrame=Et.default;var jt=r(148);e.clearAnimationFrame=jt.default;var Ct=r(293);e.augment=Ct.default;var At=r(98);e.clone=At.default;var Pt=r(294);e.debounce=Pt.default;var It=r(295);e.memoize=It.default;var Tt=r(12);e.deepMix=Tt.default;var Nt=r(2);e.each=Nt.default;var Dt=r(296);e.extend=Dt.default;var Bt=r(297);e.indexOf=Bt.default;var Rt=r(298);e.isEmpty=Rt.default;var Lt=r(95);e.isEqual=Lt.default;var zt=r(299);e.isEqualWith=zt.default;var Ft=r(300);e.map=Ft.default;var Yt=r(301);e.mapValues=Yt.default;var Gt=r(17);e.mix=Gt.default,e.assign=Gt.default;var qt=r(130);e.get=qt.default;var Xt=r(302);e.set=Xt.default;var Vt=r(303);e.pick=Vt.default;var Ht=r(304);e.throttle=Ht.default;var Ut=r(305);e.toArray=Ut.default;var Wt=r(59);e.toString=Wt.default;var Zt=r(306);e.uniqueId=Zt.default;var $t=r(307);e.noop=$t.default;var Kt=r(308);e.identity=Kt.default;var Qt=r(309);e.size=Qt.default;var Jt=r(310);e.Cache=Jt.default},function(t,e,r){"use strict";var n,i,o,a;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){n||(n=document.createElement("table"),i=document.createElement("tr"),o=/^\s*<(\w+|!)[^>]*>/,a={tr:document.createElement("tbody"),tbody:n,thead:n,tfoot:n,td:i,th:i,"*":document.createElement("div")});var e=o.test(t)&&RegExp.$1;e&&e in a||(e="*");var r=a[e];t=t.replace(/(^\s*)|(\s*$)/g,""),r.innerHTML=""+t;var s=r.childNodes[0];return r.removeChild(s),s}},function(t,e,r){"use strict";r.d(e,"j",(function(){return y})),r.d(e,"c",(function(){return m})),r.d(e,"g",(function(){return b})),r.d(e,"b",(function(){return x}));var n=r(10),i=r.n(n);r.d(e,"e",(function(){return i.a}));var o=r(14),a=r.n(o);r.d(e,"d",(function(){return a.a}));var s=r(3),u=r.n(s);r.d(e,"h",(function(){return u.a}));var c=r(35),h=r.n(c);r.d(e,"f",(function(){return h.a}));r(4);var f=r(17),l=r.n(f);r.d(e,"i",(function(){return l.a}));var d=r(2),p=r.n(d);r.d(e,"a",(function(){return p.a}));var g=r(49),v=r.n(g);function y(t,e){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}r.d(e,"k",(function(){return v.a}));var m="undefined"!=typeof window&&void 0!==window.document;function b(t,e){if(t.isCanvas())return!0;for(var r=e.getParent(),n=!1;r;){if(r===t){n=!0;break}r=r.getParent()}return n}function x(t){return t.cfg.visible&&t.cfg.capture}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return null==t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(27);e.default=function(t){return n.default(t,"Number")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(58);function o(t,e,r,a){for(var s in r=r||0,a=a||5,e)if(e.hasOwnProperty(s)){var u=e[s];null!==u&&i.default(u)?(i.default(t[s])||(t[s]={}),r<a?o(t[s],u,r+1,a):t[s]=e[s]):n.default(u)?(t[s]=[],t[s]=t[s].concat(u)):void 0!==u&&(t[s]=u)}}e.default=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n+=1)o(t,e[n]);return t}},function(t,e,r){var n;try{n={cloneDeep:r(486),constant:r(122),defaults:r(487),each:r(191),filter:r(194),find:r(488),flatten:r(221),forEach:r(192),forIn:r(493),has:r(205),isUndefined:r(206),last:r(494),map:r(207),mapValues:r(495),max:r(496),merge:r(498),min:r(504),minBy:r(505),now:r(506),pick:r(507),range:r(512),reduce:r(209),sortBy:r(515),uniqueId:r(520),values:r(214),zipObject:r(521)}}catch(t){}n||(n=window._),t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(27);e.default=function(t){return n.default(t,"Function")}},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new n.ARRAY_TYPE(9);n.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,r,i,o,a,s,u,c){var h=new n.ARRAY_TYPE(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=i,h[4]=o,h[5]=a,h[6]=s,h[7]=u,h[8]=c,h},e.set=function(t,e,r,n,i,o,a,s,u,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=h*a-s*c,l=-h*o+s*u,d=c*o-a*u,p=r*f+n*l+i*d;if(!p)return null;return p=1/p,t[0]=f*p,t[1]=(-h*n+i*c)*p,t[2]=(s*n-i*a)*p,t[3]=l*p,t[4]=(h*r-i*u)*p,t[5]=(-s*r+i*o)*p,t[6]=d*p,t[7]=(-c*r+n*u)*p,t[8]=(a*r-n*o)*p,t},e.adjoint=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8];return t[0]=a*h-s*c,t[1]=i*c-n*h,t[2]=n*s-i*a,t[3]=s*u-o*h,t[4]=r*h-i*u,t[5]=i*o-r*s,t[6]=o*c-a*u,t[7]=n*u-r*c,t[8]=r*a-n*o,t},e.determinant=function(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+r*(-c*i+a*s)+n*(u*i-o*s)},e.multiply=i,e.translate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l*n+d*a+c,t[7]=l*i+d*s+h,t[8]=l*o+d*u+f,t},e.rotate=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=Math.sin(r),d=Math.cos(r);return t[0]=d*n+l*a,t[1]=d*i+l*s,t[2]=d*o+l*u,t[3]=d*a-l*n,t[4]=d*s-l*i,t[5]=d*u-l*o,t[6]=c,t[7]=h,t[8]=f,t},e.scale=function(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,c=r*a,h=n*a,f=n*s,l=i*a,d=i*s,p=i*u,g=o*a,v=o*s,y=o*u;return t[0]=1-f-p,t[3]=h-y,t[6]=l+v,t[1]=h+y,t[4]=1-c-p,t[7]=d-g,t[2]=l-v,t[5]=d+g,t[8]=1-c-f,t},e.normalFromMat4=function(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],d=e[11],p=e[12],g=e[13],v=e[14],y=e[15],m=r*s-n*a,b=r*u-i*a,x=r*c-o*a,w=n*u-i*s,M=n*c-o*s,S=i*c-o*u,_=h*g-f*p,k=h*v-l*p,O=h*y-d*p,E=f*v-l*g,j=f*y-d*g,C=l*y-d*v,A=m*C-b*j+x*E+w*O-M*k+S*_;if(!A)return null;return A=1/A,t[0]=(s*C-u*j+c*E)*A,t[1]=(u*O-a*C-c*k)*A,t[2]=(a*j-s*O+c*_)*A,t[3]=(i*j-n*C-o*E)*A,t[4]=(r*C-i*O+o*k)*A,t[5]=(n*O-r*j-o*_)*A,t[6]=(g*S-v*M+y*w)*A,t[7]=(v*x-p*S-y*b)*A,t[8]=(p*M-g*x+y*m)*A,t},e.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},e.subtract=o,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],h=t[7],f=t[8],l=e[0],d=e[1],p=e[2],g=e[3],v=e[4],y=e[5],m=e[6],b=e[7],x=e[8];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-d)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(o-p)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-g)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-v)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-y)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-m)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(h-b)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(f-x)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(x))};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(104));function i(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=r[0],d=r[1],p=r[2],g=r[3],v=r[4],y=r[5],m=r[6],b=r[7],x=r[8];return t[0]=l*n+d*a+p*c,t[1]=l*i+d*s+p*h,t[2]=l*o+d*u+p*f,t[3]=g*n+v*a+y*c,t[4]=g*i+v*s+y*h,t[5]=g*o+v*u+y*f,t[6]=m*n+b*a+x*c,t[7]=m*i+b*s+x*h,t[8]=m*o+b*u+x*f,t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}e.mul=i,e.sub=o},function(t,e,r){"use strict";function n(t,e){for(var r in e)e.hasOwnProperty(r)&&"constructor"!==r&&void 0!==e[r]&&(t[r]=e[r])}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r,i){return e&&n(t,e),r&&n(t,r),i&&n(t,i),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isSamePoint=e.mergeRegion=e.intersectRect=e.inBox=e.distance=e.getPixelRatio=void 0,e.getPixelRatio=function(){return window?window.devicePixelRatio:1},e.distance=function(t,e,r,n){var i=t-r,o=e-n;return Math.sqrt(i*i+o*o)},e.inBox=function(t,e,r,n,i,o){return i>=t&&i<=t+r&&o>=e&&o<=e+n},e.intersectRect=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},e.mergeRegion=function(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e},e.isSamePoint=function(t,e){return t[0]===e[0]&&t[1]===e[1]};var n=r(10);Object.defineProperty(e,"isNil",{enumerable:!0,get:function(){return n.default}});var i=r(3);Object.defineProperty(e,"isString",{enumerable:!0,get:function(){return i.default}});var o=r(14);Object.defineProperty(e,"isFunction",{enumerable:!0,get:function(){return o.default}});var a=r(4);Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return a.default}});var s=r(2);Object.defineProperty(e,"each",{enumerable:!0,get:function(){return s.default}});var u=r(68);Object.defineProperty(e,"toRadian",{enumerable:!0,get:function(){return u.default}});var c=r(67);Object.defineProperty(e,"mod",{enumerable:!0,get:function(){return c.default}});var h=r(103);Object.defineProperty(e,"isNumberEqual",{enumerable:!0,get:function(){return h.default}});var f=r(147);Object.defineProperty(e,"requestAnimationFrame",{enumerable:!0,get:function(){return f.default}});var l=r(148);Object.defineProperty(e,"clearAnimationFrame",{enumerable:!0,get:function(){return l.default}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.EVENTS=e.SVG_ATTR_MAP=e.SHAPE_TO_TAGS=void 0,e.SHAPE_TO_TAGS={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},e.SVG_ATTR_MAP={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},e.EVENTS=["click","mousedown","mouseup","dblclick","contextmenu","mouseenter","mouseleave","mouseover","mouseout","mousemove","wheel"]},function(t,e,r){"use strict";var n=r(13),i=r(30).Graph;function o(t,e,r,i){var o;do{o=n.uniqueId(i)}while(t.hasNode(o));return r.dummy=e,t.setNode(o,r),o}function a(t){return n.max(n.map(t.nodes(),(function(e){var r=t.node(e).rank;if(!n.isUndefined(r))return r})))}t.exports={addDummyNode:o,simplify:function(t){var e=(new i).setGraph(t.graph());return n.forEach(t.nodes(),(function(r){e.setNode(r,t.node(r))})),n.forEach(t.edges(),(function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},i=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+i.weight,minlen:Math.max(n.minlen,i.minlen)})})),e},asNonCompoundGraph:function(t){var e=new i({multigraph:t.isMultigraph()}).setGraph(t.graph());return n.forEach(t.nodes(),(function(r){t.children(r).length||e.setNode(r,t.node(r))})),n.forEach(t.edges(),(function(r){e.setEdge(r,t.edge(r))})),e},successorWeights:function(t){var e=n.map(t.nodes(),(function(e){var r={};return n.forEach(t.outEdges(e),(function(e){r[e.w]=(r[e.w]||0)+t.edge(e).weight})),r}));return n.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=n.map(t.nodes(),(function(e){var r={};return n.forEach(t.inEdges(e),(function(e){r[e.v]=(r[e.v]||0)+t.edge(e).weight})),r}));return n.zipObject(t.nodes(),e)},intersectRect:function(t,e){var r,n,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=t.width/2,c=t.height/2;if(!a&&!s)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(s)*u>Math.abs(a)*c?(s<0&&(c=-c),r=c*a/s,n=c):(a<0&&(u=-u),r=u,n=u*s/a);return{x:i+r,y:o+n}},buildLayerMatrix:function(t){var e=n.map(n.range(a(t)+1),(function(){return[]}));return n.forEach(t.nodes(),(function(r){var i=t.node(r),o=i.rank;n.isUndefined(o)||(e[o][i.order]=r)})),e},normalizeRanks:function(t){var e=n.min(n.map(t.nodes(),(function(e){return t.node(e).rank})));n.forEach(t.nodes(),(function(r){var i=t.node(r);n.has(i,"rank")&&(i.rank-=e)}))},removeEmptyRanks:function(t){var e=n.min(n.map(t.nodes(),(function(e){return t.node(e).rank}))),r=[];n.forEach(t.nodes(),(function(n){var i=t.node(n).rank-e;r[i]||(r[i]=[]),r[i].push(n)}));var i=0,o=t.graph().nodeRankFactor;n.forEach(r,(function(e,r){n.isUndefined(e)&&r%o!=0?--i:i&&n.forEach(e,(function(e){t.node(e).rank+=i}))}))},addBorderNode:function(t,e,r,n){var i={width:0,height:0};arguments.length>=4&&(i.rank=r,i.order=n);return o(t,"border",i,e)},maxRank:a,partition:function(t,e){var r={lhs:[],rhs:[]};return n.forEach(t,(function(t){e(t)?r.lhs.push(t):r.rhs.push(t)})),r},time:function(t,e){var r=n.now();try{return e()}finally{console.log(t+" time: "+(n.now()-r)+"ms")}},notime:function(t,e){return e()}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(172);e.mat3=n.default;var i=r(368);e.vec2=i.default;var o=r(369);e.vec3=o.default;var a=r(370);e.transform=a.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(43),o=r(61),a=r(29),s=r(109),u=r(19),c=r(110),h=r(171),f=r(157),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="svg",e.canFill=!1,e.canStroke=!1,e}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,e)}},e.prototype.getShapeBase=function(){return c},e.prototype.getGroupBase=function(){return h.default},e.prototype.onCanvasChange=function(t){s.refreshElement(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),e=null;if(t)e=t.getBBox();else{var r=f.getBBoxMethod(this.get("type"));r&&(e=r(this))}if(e){var n=e.x,i=e.y,o=e.width,a=e.height,s=this.getHitLineWidth(),u=s/2,c=n-u,h=i-u;return{x:c,y:h,minX:c,minY:h,maxX:n+o+u,maxY:i+a+u,width:o+s,height:a+s}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),e=t.fill,r=t.fillStyle;return(e||r||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),e=t.stroke,r=t.strokeStyle;return(e||r)&&this.canStroke},e.prototype.draw=function(t,e){var r=this.get("el");this.get("destroyed")?r&&r.parentNode.removeChild(r):(r||a.createDom(this),o.setClip(this,t),this.createPath(t,e),this.shadow(t,e),this.strokeAndFill(t,e),this.transform(e))},e.prototype.createPath=function(t,e){},e.prototype.strokeAndFill=function(t,e){var r=e||this.attr(),n=r.fill,i=r.fillStyle,o=r.stroke,a=r.strokeStyle,s=r.fillOpacity,c=r.strokeOpacity,h=r.lineWidth,f=this.get("el");this.canFill&&(e?"fill"in r?this._setColor(t,"fill",n):"fillStyle"in r&&this._setColor(t,"fill",i):this._setColor(t,"fill",n||i),s&&f.setAttribute(u.SVG_ATTR_MAP.fillOpacity,s)),this.canStroke&&h>0&&(e?"stroke"in r?this._setColor(t,"stroke",o):"strokeStyle"in r&&this._setColor(t,"stroke",a):this._setColor(t,"stroke",o||a),c&&f.setAttribute(u.SVG_ATTR_MAP.strokeOpacity,c),h&&f.setAttribute(u.SVG_ATTR_MAP.lineWidth,h))},e.prototype._setColor=function(t,e,r){var n=this.get("el");if(r)if(r=r.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(r))(i=t.find("gradient",r))||(i=t.addGradient(r)),n.setAttribute(u.SVG_ATTR_MAP[e],"url(#"+i+")");else if(/^[p,P]{1}[\s]*\(/.test(r)){var i;(i=t.find("pattern",r))||(i=t.addPattern(r)),n.setAttribute(u.SVG_ATTR_MAP[e],"url(#"+i+")")}else n.setAttribute(u.SVG_ATTR_MAP[e],r);else n.setAttribute(u.SVG_ATTR_MAP[e],"none")},e.prototype.shadow=function(t,e){var r=this.attr(),n=e||r,i=n.shadowOffsetX,a=n.shadowOffsetY,s=n.shadowBlur,u=n.shadowColor;(i||a||s||u)&&o.setShadow(this,t)},e.prototype.transform=function(t){var e=this.attr();(t||e).matrix&&o.setTransform(this)},e.prototype.isInShape=function(t,e){return this.isPointInPath(t,e)},e.prototype.isPointInPath=function(t,e){var r=this.get("el"),n=this.get("canvas").get("el").getBoundingClientRect(),i=t+n.left,o=e+n.top,a=document.elementFromPoint(i,o);return!(!a||!a.isEqualNode(r))},e.prototype.getHitLineWidth=function(){var t=this.attrs,e=t.lineWidth,r=t.lineAppendWidth;return this.isStroke()?e+r:0},e}(i.AbstractShape);e.default=l},function(t,e,r){var n;try{n={clone:r(373),constant:r(122),each:r(191),filter:r(194),has:r(205),isArray:r(15),isEmpty:r(450),isFunction:r(62),isUndefined:r(206),keys:r(41),map:r(207),reduce:r(209),size:r(453),transform:r(459),union:r(460),values:r(214)}}catch(t){}n||(n=window._),t.exports=n},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=r(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=i,e.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,r){return t[0]=e,t[1]=r,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},e.subtract=o,e.multiply=a,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},e.distance=u,e.squaredDistance=c,e.length=h,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var r=e[0],n=e[1],i=r*r+n*n;i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i);return t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t},e.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},e.transformMat2=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t},e.transformMat2d=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t},e.transformMat3=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t},e.transformMat4=function(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t},e.rotate=function(t,e,r,n){var i=e[0]-r[0],o=e[1]-r[1],a=Math.sin(n),s=Math.cos(n);return t[0]=i*s-o*a+r[0],t[1]=i*a+o*s+r[1],t},e.angle=function(t,e){var r=t[0],n=t[1],i=e[0],o=e[1],a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));var s=i*i+o*o;s>0&&(s=1/Math.sqrt(s));var u=(r*i+n*o)*a*s;return u>1?0:u<-1?Math.PI:Math.acos(u)},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var r=t[0],i=t[1],o=e[0],a=e[1];return Math.abs(r-o)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(a))};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(104));function i(){var t=new n.ARRAY_TYPE(2);return n.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function a(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function s(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function u(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function c(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function h(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function f(t){var e=t[0],r=t[1];return e*e+r*r}var l;e.len=h,e.sub=o,e.mul=a,e.div=s,e.dist=u,e.sqrDist=c,e.sqrLen=f,e.forEach=(l=i(),function(t,e,r,n,i,o){var a=void 0,s=void 0;for(e||(e=2),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,a=r;a<s;a+=e)l[0]=t[a],l[1]=t[a+1],i(l,l,o),t[a]=l[0],t[a+1]=l[1];return t})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={}.toString;e.default=function(t,e){return n.call(t)==="[object "+e+"]"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(43),o=r(18),a=r(60),s=r(157),u=r(73),c=r(164),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return u},e.prototype.getGroupBase=function(){return c.default},e.prototype.onCanvasChange=function(t){a.refreshElement(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),e=this.getHitLineWidth(),r=s.getBBoxMethod(t)(this),n=e/2,i=r.x-n,o=r.y-n,a=r.x+r.width+n,u=r.y+r.height+n;return{x:i,minX:i,y:o,minY:o,width:r.width+e,height:r.height+e,maxX:a,maxY:u}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,e){e&&(t.save(),a.applyAttrsToContext(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.draw=function(t,e){var r=this.cfg.clipShape;if(e){if(!1===this.cfg.refresh)return void this.set("hasChanged",!1);var n=this.getCanvasBBox();if(!o.intersectRect(e,n))return this.set("hasChanged",!1),void(this.cfg.isInView&&this._afterDraw())}t.save(),a.applyAttrsToContext(t,this),this._applyClip(t,r),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var e=this.getCanvasBBox(),r=o.intersectRect(e,t);this.set("isInView",r),r?this.set("cacheCanvasBBox",e):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,n=e.opacity,i=e.strokeOpacity,a=e.fillOpacity;this.isFill()&&(o.isNil(a)||1===a?this.fill(t):(t.globalAlpha=a,this.fill(t),t.globalAlpha=n)),this.isStroke()&&r>0&&(o.isNil(i)||1===i||(t.globalAlpha=i),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,e){var r=this.isStroke(),n=this.isFill(),i=this.getHitLineWidth();return this.isInStrokeOrPath(t,e,r,n,i)},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(i.AbstractShape);e.default=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.moveTo=e.sortDom=e.createDom=e.createSVGElement=void 0;var n=r(0),i=r(19);function o(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}e.createSVGElement=o,e.createDom=function(t){var e=i.SHAPE_TO_TAGS[t.type],r=t.getParent();if(!e)throw new Error("the type "+t.type+" is not supported by svg");var n=o(e);if(t.get("id")&&(n.id=t.get("id")),t.set("el",n),t.set("attrs",{}),r){var a=r.get("el");a||(a=r.createDom(),r.set("el",a)),a.appendChild(n)}return n},e.sortDom=function(t,e){var r=t.get("el"),i=n.toArray(r.children).sort(e),o=document.createDocumentFragment();i.forEach((function(t){o.appendChild(t)})),r.appendChild(o)},e.moveTo=function(t,e){var r=t.parentNode,n=Array.from(r.childNodes).filter((function(t){return 1===t.nodeType&&"defs"!==t.nodeName.toLowerCase()})),i=n[e],o=n.indexOf(t);if(i){if(o>e)r.insertBefore(t,i);else if(o<e){var a=n[e+1];a?r.insertBefore(t,a):r.appendChild(t)}}else r.appendChild(t)}},function(t,e,r){var n;try{n=r(371)}catch(t){}n||(n=window.graphlib),t.exports=n},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(174),o="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,a=i||o||Function("return this")();t.exports=a},function(t,e,r){"use strict";function n(t,e){var r=[],n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],h=t[7],f=t[8],l=e[0],d=e[1],p=e[2],g=e[3],v=e[4],y=e[5],m=e[6],b=e[7],x=e[8];return r[0]=l*n+d*a+p*c,r[1]=l*i+d*s+p*h,r[2]=l*o+d*u+p*f,r[3]=g*n+v*a+y*c,r[4]=g*i+v*s+y*h,r[5]=g*o+v*u+y*f,r[6]=m*n+b*a+x*c,r[7]=m*i+b*s+x*h,r[8]=m*o+b*u+x*f,r}function i(t,e){var r=[],n=e[0],i=e[1];return r[0]=t[0]*n+t[3]*i+t[6],r[1]=t[1]*n+t[4]*i+t[7],r}function o(t){var e=[],r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],f=h*a-s*c,l=-h*o+s*u,d=c*o-a*u,p=r*f+n*l+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-h*n+i*c)*p,e[2]=(s*n-i*a)*p,e[3]=l*p,e[4]=(h*r-i*u)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-c*r+n*u)*p,e[8]=(a*r-n*o)*p,e):null}r.d(e,"b",(function(){return n})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return o}))},function(t,e,r){"use strict";function n(t){return Math.min.apply(null,t)}function i(t){return Math.max.apply(null,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.piMod=e.getBBoxRange=e.getBBoxByArray=e.isNumberEqual=e.distance=void 0,e.distance=function(t,e,r,n){var i=t-r,o=e-n;return Math.sqrt(i*i+o*o)},e.isNumberEqual=function(t,e){return Math.abs(t-e)<.001},e.getBBoxByArray=function(t,e){var r=n(t),o=n(e);return{x:r,y:o,width:i(t)-r,height:i(e)-o}},e.getBBoxRange=function(t,e,r,o){return{minX:n([t,r]),maxX:i([t,r]),minY:n([e,o]),maxY:i([e,o])}},e.piMod=function(t){return(t+2*Math.PI)%(2*Math.PI)}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==r(t)}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=n(t);return null!==t&&"object"===e||"function"===e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(43),o=r(319),a=r(73),s=r(164),u=r(18),c=r(60),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.renderer="canvas",e.autoDraw=!0,e.localRefresh=!0,e.refreshElements=[],e.clipView=!0,e.quickHit=!1,e},e.prototype.onCanvasChange=function(t){"attr"!==t&&"sort"!==t&&"changeSize"!==t||(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return a},e.prototype.getGroupBase=function(){return s.default},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||u.getPixelRatio();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),e=t.getContext("2d");return this.set("context",e),t},e.prototype.setDOMSize=function(e,r){t.prototype.setDOMSize.call(this,e,r);var n=this.get("context"),i=this.get("el"),o=this.getPixelRatio();i.width=o*e,i.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){t.prototype.clear.call(this),this._clearFrame();var e=this.get("context"),r=this.get("el");e.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(e,r){return this.get("quickHit")?o.getShape(this,e,r):t.prototype.getShape.call(this,e,r,null)},e.prototype._getRefreshRegion=function(){var t,e=this.get("refreshElements"),r=this.getViewRange();e.length&&e[0]===this?t=r:(t=c.getMergedRegion(e))&&(t.minX=Math.floor(t.minX),t.minY=Math.floor(t.minY),t.maxX=Math.ceil(t.maxX),t.maxY=Math.ceil(t.maxY),t.maxY+=1,this.get("clipView")&&(t=c.mergeView(t,r)));return t},e.prototype.refreshElement=function(t){this.get("refreshElements").push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&(u.clearAnimationFrame(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),e=this.get("el"),r=this.getChildren();t.clearRect(0,0,e.width,e.height),c.applyAttrsToContext(t,this),c.drawChildren(t,r),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),e=this.get("refreshElements"),r=this.getChildren(),n=this._getRefreshRegion();n?(t.clearRect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),t.save(),t.beginPath(),t.rect(n.minX,n.minY,n.maxX-n.minX,n.maxY-n.minY),t.clip(),c.applyAttrsToContext(t,this),c.checkRefresh(this,r,n),c.drawChildren(t,r,n),t.restore()):e.length&&c.clearChanged(e),u.each(e,(function(t){t.get("hasChanged")&&t.set("hasChanged",!1)})),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,e=this.get("drawFrame");e||(e=u.requestAnimationFrame((function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)})),this.set("drawFrame",e))},e.prototype.skipDraw=function(){},e}(i.AbstractCanvas);e.default=h},function(t,e,r){"use strict";r.r(e),r.d(e,"catmullRomToBezier",(function(){return u})),r.d(e,"fillPath",(function(){return A})),r.d(e,"fillPathByDiff",(function(){return T})),r.d(e,"formatPath",(function(){return B})),r.d(e,"intersection",(function(){return E})),r.d(e,"parsePathArray",(function(){return v})),r.d(e,"parsePathString",(function(){return s})),r.d(e,"pathToAbsolute",(function(){return h})),r.d(e,"pathToCurve",(function(){return p})),r.d(e,"rectPath",(function(){return M}));var n=r(0),i="\t\n\v\f\r   ᠎             　\u2028\u2029",o=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig"),s=function(t){if(!t)return null;if(Object(n.isArray)(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(o,(function(n,i,o){var s=[],u=i.toLowerCase();if(o.replace(a,(function(t,e){e&&s.push(+e)})),"m"===u&&s.length>2&&(r.push([i].concat(s.splice(0,2))),u="l",i="m"===i?"l":"L"),"o"===u&&1===s.length&&r.push([i,s[0]]),"r"===u)r.push([i].concat(s));else for(;s.length>=e[u]&&(r.push([i].concat(s.splice(0,e[u]))),e[u]););return t})),r},u=function(t,e){for(var r=[],n=0,i=t.length;i-2*!e>n;n+=2){var o=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?i-4===n?o[3]={x:+t[0],y:+t[1]}:i-2===n&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===n?o[3]=o[2]:n||(o[0]={x:+t[n],y:+t[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r},c=function(t,e,r,n,i){var o=[];if(null===i&&null===n&&(n=r),t=+t,e=+e,r=+r,n=+n,null!==i){var a=Math.PI/180,s=t+r*Math.cos(-n*a),u=t+r*Math.cos(-i*a);o=[["M",s,e+r*Math.sin(-n*a)],["A",r,r,0,+(i-n>180),0,u,e+r*Math.sin(-i*a)]]}else o=[["M",t,e],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]];return o},h=function(t){if(!(t=s(t))||!t.length)return[["M",0,0]];var e,r,n=[],i=0,o=0,a=0,h=0,f=0;"M"===t[0][0]&&(a=i=+t[0][1],h=o=+t[0][2],f++,n[0]=["M",i,o]);for(var l=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),d=void 0,p=void 0,g=f,v=t.length;g<v;g++){if(n.push(d=[]),(e=(p=t[g])[0])!==e.toUpperCase())switch(d[0]=e.toUpperCase(),d[0]){case"A":d[1]=p[1],d[2]=p[2],d[3]=p[3],d[4]=p[4],d[5]=p[5],d[6]=+p[6]+i,d[7]=+p[7]+o;break;case"V":d[1]=+p[1]+o;break;case"H":d[1]=+p[1]+i;break;case"R":for(var y=2,m=(r=[i,o].concat(p.slice(1))).length;y<m;y++)r[y]=+r[y]+i,r[++y]=+r[y]+o;n.pop(),n=n.concat(u(r,l));break;case"O":n.pop(),(r=c(i,o,p[1],p[2])).push(r[0]),n=n.concat(r);break;case"U":n.pop(),n=n.concat(c(i,o,p[1],p[2],p[3])),d=["U"].concat(n[n.length-1].slice(-2));break;case"M":a=+p[1]+i,h=+p[2]+o;break;default:for(y=1,m=p.length;y<m;y++)d[y]=+p[y]+(y%2?i:o)}else if("R"===e)r=[i,o].concat(p.slice(1)),n.pop(),n=n.concat(u(r,l)),d=["R"].concat(p.slice(-2));else if("O"===e)n.pop(),(r=c(i,o,p[1],p[2])).push(r[0]),n=n.concat(r);else if("U"===e)n.pop(),n=n.concat(c(i,o,p[1],p[2],p[3])),d=["U"].concat(n[n.length-1].slice(-2));else for(var b=0,x=p.length;b<x;b++)d[b]=p[b];if("O"!==(e=e.toUpperCase()))switch(d[0]){case"Z":i=+a,o=+h;break;case"H":i=d[1];break;case"V":o=d[1];break;case"M":a=d[d.length-2],h=d[d.length-1];break;default:i=d[d.length-2],o=d[d.length-1]}}return n},f=function(t,e,r,n){return[t,e,r,n,r,n]},l=function(t,e,r,n,i,o){return[1/3*t+2/3*r,1/3*e+2/3*n,1/3*i+2/3*r,1/3*o+2/3*n,i,o]},d=function t(e,r,n,i,o,a,s,u,c,h){n===i&&(n+=1);var f,l,d,p,g,v=120*Math.PI/180,y=Math.PI/180*(+o||0),m=[],b=function(t,e,r){return{x:t*Math.cos(r)-e*Math.sin(r),y:t*Math.sin(r)+e*Math.cos(r)}};if(h)l=h[0],d=h[1],p=h[2],g=h[3];else{e=(f=b(e,r,-y)).x,r=f.y,u=(f=b(u,c,-y)).x,c=f.y,e===u&&r===c&&(u+=1,c+=1);var x=(e-u)/2,w=(r-c)/2,M=x*x/(n*n)+w*w/(i*i);M>1&&(n*=M=Math.sqrt(M),i*=M);var S=n*n,_=i*i,k=(a===s?-1:1)*Math.sqrt(Math.abs((S*_-S*w*w-_*x*x)/(S*w*w+_*x*x)));p=k*n*w/i+(e+u)/2,g=k*-i*x/n+(r+c)/2,l=Math.asin(((r-g)/i).toFixed(9)),d=Math.asin(((c-g)/i).toFixed(9)),l=e<p?Math.PI-l:l,d=u<p?Math.PI-d:d,l<0&&(l=2*Math.PI+l),d<0&&(d=2*Math.PI+d),s&&l>d&&(l-=2*Math.PI),!s&&d>l&&(d-=2*Math.PI)}var O=d-l;if(Math.abs(O)>v){var E=d,j=u,C=c;d=l+v*(s&&d>l?1:-1),m=t(u=p+n*Math.cos(d),c=g+i*Math.sin(d),n,i,o,0,s,j,C,[d,E,p,g])}O=d-l;var A=Math.cos(l),P=Math.sin(l),I=Math.cos(d),T=Math.sin(d),N=Math.tan(O/4),D=4/3*n*N,B=4/3*i*N,R=[e,r],L=[e+D*P,r-B*A],z=[u+D*T,c-B*I],F=[u,c];if(L[0]=2*R[0]-L[0],L[1]=2*R[1]-L[1],h)return[L,z,F].concat(m);for(var Y=[],G=0,q=(m=[L,z,F].concat(m).join().split(",")).length;G<q;G++)Y[G]=G%2?b(m[G-1],m[G],y).y:b(m[G],m[G+1],y).x;return Y},p=function(t,e){var r,n=h(t),i=e&&h(e),o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],u=[],c="",p="",g=function(t,e,r){var n,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(d.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===r||"S"===r?(n=2*e.x-e.bx,i=2*e.y-e.by):(n=e.x,i=e.y),t=["C",n,i].concat(t.slice(1));break;case"T":"Q"===r||"T"===r?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(l(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(l(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(f(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(f(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(f(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(f(e.x,e.y,e.X,e.Y))}return t},v=function(t,e){if(t[e].length>7){t[e].shift();for(var o=t[e];o.length;)s[e]="A",i&&(u[e]="A"),t.splice(e++,0,["C"].concat(o.splice(0,6)));t.splice(e,1),r=Math.max(n.length,i&&i.length||0)}},y=function(t,e,o,a,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",a.x,a.y]),o.bx=0,o.by=0,o.x=t[s][1],o.y=t[s][2],r=Math.max(n.length,i&&i.length||0))};r=Math.max(n.length,i&&i.length||0);for(var m=0;m<r;m++){n[m]&&(c=n[m][0]),"C"!==c&&(s[m]=c,m&&(p=s[m-1])),n[m]=g(n[m],o,p),"A"!==s[m]&&"C"===c&&(s[m]="C"),v(n,m),i&&(i[m]&&(c=i[m][0]),"C"!==c&&(u[m]=c,m&&(p=u[m-1])),i[m]=g(i[m],a,p),"A"!==u[m]&&"C"===c&&(u[m]="C"),v(i,m)),y(n,i,o,a,m),y(i,n,a,o,m);var b=n[m],x=i&&i[m],w=b.length,M=i&&x.length;o.x=b[w-2],o.y=b[w-1],o.bx=parseFloat(b[w-4])||o.x,o.by=parseFloat(b[w-3])||o.y,a.bx=i&&(parseFloat(x[M-4])||a.x),a.by=i&&(parseFloat(x[M-3])||a.y),a.x=i&&x[M-2],a.y=i&&x[M-1]}return i?[n,i]:n},g=/,?([a-z]),?/gi,v=function(t){return t.join(",").replace(g,"$1")},y=function(t,e,r,n,i){return t*(t*(-3*e+9*r-9*n+3*i)+6*e-12*r+6*n)-3*e+3*r},m=function(t,e,r,n,i,o,a,s,u){null===u&&(u=1);for(var c=(u=u>1?1:u<0?0:u)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],l=0,d=0;d<12;d++){var p=c*h[d]+c,g=y(p,t,r,i,a),v=y(p,e,n,o,s),m=g*g+v*v;l+=f[d]*Math.sqrt(m)}return c*l},b=function(t,e,r,n,i,o,a,s){for(var u,c,h,f,l=[],d=[[],[]],p=0;p<2;++p)if(0===p?(c=6*t-12*r+6*i,u=-3*t+9*r-9*i+3*a,h=3*r-3*t):(c=6*e-12*n+6*o,u=-3*e+9*n-9*o+3*s,h=3*n-3*e),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;(f=-h/c)>0&&f<1&&l.push(f)}else{var g=c*c-4*h*u,v=Math.sqrt(g);if(!(g<0)){var y=(-c+v)/(2*u);y>0&&y<1&&l.push(y);var m=(-c-v)/(2*u);m>0&&m<1&&l.push(m)}}for(var b,x=l.length,w=x;x--;)b=1-(f=l[x]),d[0][x]=b*b*b*t+3*b*b*f*r+3*b*f*f*i+f*f*f*a,d[1][x]=b*b*b*e+3*b*b*f*n+3*b*f*f*o+f*f*f*s;return d[0][w]=t,d[1][w]=e,d[0][w+1]=a,d[1][w+1]=s,d[0].length=d[1].length=w+2,{min:{x:Math.min.apply(0,d[0]),y:Math.min.apply(0,d[1])},max:{x:Math.max.apply(0,d[0]),y:Math.max.apply(0,d[1])}}},x=function(t,e,r,n,i,o,a,s){if(!(Math.max(t,r)<Math.min(i,a)||Math.min(t,r)>Math.max(i,a)||Math.max(e,n)<Math.min(o,s)||Math.min(e,n)>Math.max(o,s))){var u=(t-r)*(o-s)-(e-n)*(i-a);if(u){var c=((t*n-e*r)*(i-a)-(t-r)*(i*s-o*a))/u,h=((t*n-e*r)*(o-s)-(e-n)*(i*s-o*a))/u,f=+c.toFixed(2),l=+h.toFixed(2);if(!(f<+Math.min(t,r).toFixed(2)||f>+Math.max(t,r).toFixed(2)||f<+Math.min(i,a).toFixed(2)||f>+Math.max(i,a).toFixed(2)||l<+Math.min(e,n).toFixed(2)||l>+Math.max(e,n).toFixed(2)||l<+Math.min(o,s).toFixed(2)||l>+Math.max(o,s).toFixed(2)))return{x:c,y:h}}}},w=function(t,e,r){return e>=t.x&&e<=t.x+t.width&&r>=t.y&&r<=t.y+t.height},M=function(t,e,r,n,i){if(i)return[["M",+t+ +i,e],["l",r-2*i,0],["a",i,i,0,0,1,i,i],["l",0,n-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-r,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-n],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",t,e],["l",r,0],["l",0,n],["l",-r,0],["z"]];return o.parsePathArray=v,o},S=function(t,e,r,n){return null===t&&(t=e=r=n=0),null===e&&(e=t.y,r=t.width,n=t.height,t=t.x),{x:t,y:e,width:r,w:r,height:n,h:n,x2:t+r,y2:e+n,cx:t+r/2,cy:e+n/2,r1:Math.min(r,n)/2,r2:Math.max(r,n)/2,r0:Math.sqrt(r*r+n*n)/2,path:M(t,e,r,n),vb:[t,e,r,n].join(" ")}},_=function(t,e,r,i,o,a,s,u){Object(n.isArray)(t)||(t=[t,e,r,i,o,a,s,u]);var c=b.apply(null,t);return S(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)},k=function(t,e,r,n,i,o,a,s,u){var c=1-u,h=Math.pow(c,3),f=Math.pow(c,2),l=u*u,d=l*u,p=t+2*u*(r-t)+l*(i-2*r+t),g=e+2*u*(n-e)+l*(o-2*n+e),v=r+2*u*(i-r)+l*(a-2*i+r),y=n+2*u*(o-n)+l*(s-2*o+n);return{x:h*t+3*f*u*r+3*c*u*u*i+d*a,y:h*e+3*f*u*n+3*c*u*u*o+d*s,m:{x:p,y:g},n:{x:v,y:y},start:{x:c*t+u*r,y:c*e+u*n},end:{x:c*i+u*a,y:c*o+u*s},alpha:90-180*Math.atan2(p-v,g-y)/Math.PI}},O=function(t,e,r){if(!function(t,e){return t=S(t),e=S(e),w(e,t.x,t.y)||w(e,t.x2,t.y)||w(e,t.x,t.y2)||w(e,t.x2,t.y2)||w(t,e.x,e.y)||w(t,e.x2,e.y)||w(t,e.x,e.y2)||w(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(_(t),_(e)))return r?0:[];for(var n=~~(m.apply(0,t)/8),i=~~(m.apply(0,e)/8),o=[],a=[],s={},u=r?0:[],c=0;c<n+1;c++){var h=k.apply(0,t.concat(c/n));o.push({x:h.x,y:h.y,t:c/n})}for(c=0;c<i+1;c++){h=k.apply(0,e.concat(c/i));a.push({x:h.x,y:h.y,t:c/i})}for(c=0;c<n;c++)for(var f=0;f<i;f++){var l=o[c],d=o[c+1],p=a[f],g=a[f+1],v=Math.abs(d.x-l.x)<.001?"y":"x",y=Math.abs(g.x-p.x)<.001?"y":"x",b=x(l.x,l.y,d.x,d.y,p.x,p.y,g.x,g.y);if(b){if(s[b.x.toFixed(4)]===b.y.toFixed(4))continue;s[b.x.toFixed(4)]=b.y.toFixed(4);var M=l.t+Math.abs((b[v]-l[v])/(d[v]-l[v]))*(d.t-l.t),O=p.t+Math.abs((b[y]-p[y])/(g[y]-p[y]))*(g.t-p.t);M>=0&&M<=1&&O>=0&&O<=1&&(r?u+=1:u.push({x:b.x,y:b.y,t1:M,t2:O}))}}return u},E=function(t,e){return function(t,e,r){var n,i,o,a,s,u,c,h,f,l;t=p(t),e=p(e);for(var d=r?0:[],g=0,v=t.length;g<v;g++){var y=t[g];if("M"===y[0])n=s=y[1],i=u=y[2];else{"C"===y[0]?(f=[n,i].concat(y.slice(1)),n=f[6],i=f[7]):(f=[n,i,n,i,s,u,s,u],n=s,i=u);for(var m=0,b=e.length;m<b;m++){var x=e[m];if("M"===x[0])o=c=x[1],a=h=x[2];else{"C"===x[0]?(l=[o,a].concat(x.slice(1)),o=l[6],a=l[7]):(l=[o,a,o,a,c,h,c,h],o=c,a=h);var w=O(f,l,r);if(r)d+=w;else{for(var M=0,S=w.length;M<S;M++)w[M].segment1=g,w[M].segment2=m,w[M].bez1=f,w[M].bez2=l;d=d.concat(w)}}}}}return d}(t,e)};function j(t,e){var r=[],n=[];return t.length&&function t(e,i){if(1===e.length)r.push(e[0]),n.push(e[0]);else{for(var o=[],a=0;a<e.length-1;a++)0===a&&r.push(e[0]),a===e.length-2&&n.push(e[a+1]),o[a]=[(1-i)*e[a][0]+i*e[a+1][0],(1-i)*e[a][1]+i*e[a+1][1]];t(o,i)}}(t,e),{left:r,right:n.reverse()}}var C=function(t,e,r){if(1===r)return[[].concat(t)];var n=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])n=n.concat(function(t,e,r){var n=[[t[1],t[2]]];r=r||2;var i=[];"A"===e[0]?(n.push(e[6]),n.push(e[7])):"C"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]]),n.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(n.push([e[1],e[2]]),n.push([e[3],e[4]])):n.push([e[1],e[2]]);for(var o=n,a=1/r,s=0;s<r-1;s++){var u=j(o,a/(1-a*s));i.push(u.left),o=u.right}return i.push(o),i.map((function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e=e.concat(t[t.length-1])}))}(t,e,r));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var o=0;o<=r-1;o++)n.push(i)}return n},A=function(t,e){if(1===t.length)return t;var r=t.length-1,n=e.length-1,i=r/n,o=[];if(1===t.length&&"M"===t[0][0]){for(var a=0;a<n-r;a++)t.push(t[0]);return t}for(a=0;a<n;a++){var s=Math.floor(i*a);o[s]=(o[s]||0)+1}var u=o.reduce((function(e,n,i){return i===r?e.concat(t[r]):e.concat(C(t[i],t[i+1],n))}),[]);return u.unshift(t[0]),"Z"!==e[n]&&"z"!==e[n]||u.push("Z"),u},P=function(t,e){if(t.length!==e.length)return!1;var r=!0;return Object(n.each)(t,(function(t,n){if(t!==e[n])return r=!1,!1})),r};function I(t,e,r){var n=null,i=r;return e<i&&(i=e,n="add"),t<i&&(i=t,n="del"),{type:n,min:i}}var T=function(t,e){var r=function(t,e){var r,n,i=t.length,o=e.length,a=0;if(0===i||0===o)return null;for(var s=[],u=0;u<=i;u++)s[u]=[],s[u][0]={min:u};for(var c=0;c<=o;c++)s[0][c]={min:c};for(u=1;u<=i;u++){r=t[u-1];for(c=1;c<=o;c++){n=e[c-1],a=P(r,n)?0:1;var h=s[u-1][c].min+1,f=s[u][c-1].min+1,l=s[u-1][c-1].min+a;s[u][c]=I(h,f,l)}}return s}(t,e),n=t.length,i=e.length,o=[],a=1,s=1;if(r[n][i].min!==n){for(var u=1;u<=n;u++){var c=r[u][u].min;s=u;for(var h=a;h<=i;h++)r[u][h].min<c&&(c=r[u][h].min,s=h);a=s,r[u][a].type&&o.push({index:u-1,type:r[u][a].type})}for(u=o.length-1;u>=0;u--)a=o[u].index,"add"===o[u].type?t.splice(a,0,[].concat(t[a])):t.splice(a,1)}var f=i-(n=t.length);if(n<i)for(u=0;u<f;u++)"z"===t[n-1][0]||"Z"===t[n-1][0]?t.splice(n-2,0,t[n-2]):t.push(t[n-1]),n+=1;return t};function N(t,e,r){for(var n,i=[].concat(t),o=1/(r+1),a=D(e)[0],s=1;s<=r;s++)o*=s,0===(n=Math.floor(t.length*o))?i.unshift([a[0]*o+t[n][0]*(1-o),a[1]*o+t[n][1]*(1-o)]):i.splice(n,0,[a[0]*o+t[n][0]*(1-o),a[1]*o+t[n][1]*(1-o)]);return i}function D(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}var B=function(t,e){if(t.length<=1)return t;for(var r,n=0;n<e.length;n++)if(t[n][0]!==e[n][0])switch(r=D(t[n]),e[n][0]){case"M":t[n]=["M"].concat(r[0]);break;case"L":t[n]=["L"].concat(r[0]);break;case"A":t[n]=[].concat(e[n]),t[n][6]=r[0][0],t[n][7]=r[0][1];break;case"Q":if(r.length<2){if(!(n>0)){t[n]=e[n];break}r=N(r,t[n-1],1)}t[n]=["Q"].concat(r.reduce((function(t,e){return t.concat(e)}),[]));break;case"T":t[n]=["T"].concat(r[0]);break;case"C":if(r.length<3){if(!(n>0)){t[n]=e[n];break}r=N(r,t[n-1],2)}t[n]=["C"].concat(r.reduce((function(t,e){return t.concat(e)}),[]));break;case"S":if(r.length<2){if(!(n>0)){t[n]=e[n];break}r=N(r,t[n-1],1)}t[n]=["S"].concat(r.reduce((function(t,e){return t.concat(e)}),[]));break;default:t[n]=e[n]}return t}},function(t,e,r){var n=r(62),i=r(116);t.exports=function(t){return null!=t&&i(t.length)&&!n(t)}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(430),o=r(440),a=r(47),s=r(15),u=r(447);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==n(t)?s(t)?o(t[0],t[1]):i(t):u(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(33),i=r(105);e.default={box:function(t,e,r,i){return n.getBBoxByArray([t,r],[e,i])},length:function(t,e,r,i){return n.distance(t,e,r,i)},pointAt:function(t,e,r,n,i){return{x:(1-i)*t+i*r,y:(1-i)*e+i*n}},pointDistance:function(t,e,r,i,o,a){var s=(r-t)*(o-t)+(i-e)*(a-e);return s<0?n.distance(t,e,o,a):s>(r-t)*(r-t)+(i-e)*(i-e)?n.distance(r,i,o,a):this.pointToLine(t,e,r,i,o,a)},pointToLine:function(t,e,r,n,o,a){var s=[r-t,n-e];if(i.exactEquals(s,[0,0]))return Math.sqrt((o-t)*(o-t)+(a-e)*(a-e));var u=[-s[1],s[0]];i.normalize(u,u);var c=[o-t,a-e];return Math.abs(i.dot(c,u))},tangentAngle:function(t,e,r,n){return Math.atan2(n-e,r-t)}}},function(t,e,r){var n=r(177),i=r(118),o=r(38);t.exports=function(t){return o(t)?n(t):i(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(43),o=r(19),a=r(109),s=r(61),u=r(29),c=r(110),h=r(171),f=r(362),l=function(t){function e(e){return t.call(this,n.__assign(n.__assign({},e),{autoDraw:!0,renderer:"svg"}))||this}return n.__extends(e,t),e.prototype.getShapeBase=function(){return c},e.prototype.getGroupBase=function(){return h.default},e.prototype.getShape=function(t,e,r){var n=r.target||r.srcElement;if(!o.SHAPE_TO_TAGS[n.tagName]){for(var i=n.parentNode;i&&!o.SHAPE_TO_TAGS[i.tagName];)i=i.parentNode;n=i}return this.find((function(t){return t.get("el")===n}))},e.prototype.createDom=function(){var t=u.createSVGElement("svg"),e=new f.default(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",e),t},e.prototype.onCanvasChange=function(t){var e=this.get("context"),r=this.get("el");if("sort"===t){var n=this.get("children");n&&n.length&&u.sortDom(this,(function(t,e){return n.indexOf(t)-n.indexOf(e)?1:0}))}else if("clear"===t){if(r){r.innerHTML="";var i=e.el;i.innerHTML="",r.appendChild(i)}}else"matrix"===t?s.setTransform(this):"clip"===t?s.setClip(this,e):"changeSize"===t&&(r.setAttribute("width",""+this.get("width")),r.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),e=this.getChildren();s.setClip(this,t),e.length&&a.drawChildren(t,e)},e}(i.AbstractCanvas);e.default=l},function(t,e,r){"use strict";r.r(e),r.d(e,"version",(function(){return l}));var n=r(37);r.d(e,"PathUtil",(function(){return n}));var i=r(150);for(var o in i)["default","version","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil"].indexOf(o)<0&&function(t){r.d(e,t,(function(){return i[t]}))}(o);var a=r(151);for(var o in a)["default","version","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil"].indexOf(o)<0&&function(t){r.d(e,t,(function(){return a[t]}))}(o);var s=r(96);r.d(e,"Event",(function(){return s.a}));var u=r(97);r.d(e,"Base",(function(){return u.a}));var c=r(228);r.d(e,"AbstractCanvas",(function(){return c.a}));var h=r(153);r.d(e,"AbstractGroup",(function(){return h.a}));var f=r(154);r.d(e,"AbstractShape",(function(){return f.a}));var l=r(318).version},function(t,e,r){var n=r(384),i=r(390);t.exports=function(t,e){var r=i(t,e);return n(r)?r:void 0}},function(t,e,r){var n=r(52),i=r(386),o=r(387),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},function(t,e,r){var n=r(177),i=r(410),o=r(38);t.exports=function(t){return o(t)?n(t,!0):i(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,r){var n=r(0).mix;t.exports={assign:n}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(59);e.default=function(t){var e=n.default(t);return e.charAt(0).toUpperCase()+e.substring(1)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var r=function(r){t[e](r)};return t["_wrap_"+e]=r,r}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,r){var n=r(31).Symbol;t.exports=n},function(t,e,r){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(31),o=r(406),a="object"==n(e)&&e&&!e.nodeType&&e,s=a&&"object"==n(t)&&t&&!t.nodeType&&t,u=s&&s.exports===a?i.Buffer:void 0,c=(u?u.isBuffer:void 0)||o;t.exports=c}).call(this,r(115)(t))},function(t,e,r){var n=r(415),i=r(112),o=r(416),a=r(186),s=r(417),u=r(45),c=r(175),h=c(n),f=c(i),l=c(o),d=c(a),p=c(s),g=u;(n&&"[object DataView]"!=g(new n(new ArrayBuffer(1)))||i&&"[object Map]"!=g(new i)||o&&"[object Promise]"!=g(o.resolve())||a&&"[object Set]"!=g(new a)||s&&"[object WeakMap]"!=g(new s))&&(g=function(t){var e=u(t),r="[object Object]"==e?t.constructor:void 0,n=r?c(r):"";if(n)switch(n){case h:return"[object DataView]";case f:return"[object Map]";case l:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=g},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(45),o=r(34);t.exports=function(t){return"symbol"==n(t)||o(t)&&"[object Symbol]"==i(t)}},function(t,e){var r=[],n=[];function i(t,e){if(e=e||{},void 0===t)throw new Error("insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).");var i,o=!0===e.prepend?"prepend":"append",a=void 0!==e.container?e.container:document.querySelector("head"),s=r.indexOf(a);return-1===s&&(s=r.push(a)-1,n[s]={}),void 0!==n[s]&&void 0!==n[s][o]?i=n[s][o]:(i=n[s][o]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===o?a.insertBefore(i,a.childNodes[0]):a.appendChild(i)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),i.styleSheet?i.styleSheet.cssText+=t:i.textContent+=t,i}t.exports=i,t.exports.insertCss=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){if(t){if("function"==typeof t.addEventListener)return t.addEventListener(e,r,!1),{remove:function(){t.removeEventListener(e,r,!1)}};if("function"==typeof t.attachEvent)return t.attachEvent("on"+e,r),{remove:function(){t.detachEvent("on"+e,r)}}}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(102),i=r(27);e.default=function(t){if(!n.default(t)||!i.default(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10);e.default=function(t){return n.default(t)?"":t.toString()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeView=e.getMergedRegion=e.getRefreshRegion=e.refreshElement=e.drawPath=e.clearChanged=e.checkChildrenRefresh=e.checkRefresh=e.drawChildren=e.applyAttrsToContext=void 0;var n=r(0),i=r(156),o=r(321),a=r(18),s=r(74),u={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function c(t,e){for(var r=0;r<t.length;r++){var n=t[r];if(n.cfg.visible)if(n.cfg.hasChanged)n.cfg.refresh=!0,n.isGroup()&&h(n.cfg.children,e);else if(n.cfg.refresh)n.isGroup()&&c(n.cfg.children,e);else{var i=f(n,e);n.cfg.refresh=i,i&&n.isGroup()&&c(n.cfg.children,e)}}}function h(t,e){for(var r=0;r<t.length;r++){var n=t[r];n.cfg.refresh=!0,n.isGroup()&&h(n.get("children"),e)}}function f(t,e){var r=t.cfg.cacheCanvasBBox;return t.cfg.isInView&&r&&a.intersectRect(r,e)}function l(t){var e;if(t.destroyed)e=t._cacheCanvasBBox;else{var r=t.get("cacheCanvasBBox"),n=r&&!(!r.width||!r.height),i=t.getCanvasBBox(),o=i&&!(!i.width||!i.height);n&&o?e=a.mergeRegion(r,i):n?e=r:o&&(e=i)}return e}e.applyAttrsToContext=function(t,e){var r=e.attr();for(var o in r){var a=r[o],s=u[o]?u[o]:o;"matrix"===s&&a?t.transform(a[0],a[1],a[3],a[4],a[6],a[7]):"lineDash"===s&&t.setLineDash?n.isArray(a)&&t.setLineDash(a):("strokeStyle"===s||"fillStyle"===s?a=i.parseStyle(t,e,a):"globalAlpha"===s&&(a*=t.globalAlpha),t[s]=a)}},e.drawChildren=function(t,e,r){for(var n=0;n<e.length;n++){var i=e[n];i.cfg.visible?i.draw(t,r):i.skipDraw()}},e.checkRefresh=function(t,e,r){var i=t.get("refreshElements");n.each(i,(function(e){if(e!==t)for(var r=e.cfg.parent;r&&r!==t&&!r.cfg.refresh;)r.cfg.refresh=!0,r=r.cfg.parent})),i[0]===t?h(e,r):c(e,r)},e.checkChildrenRefresh=c,e.clearChanged=function t(e){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.hasChanged=!1,n.isGroup()&&!n.destroyed&&t(n.cfg.children)}},e.drawPath=function(t,e,r,n){var i=r.path,a=r.startArrow,u=r.endArrow,c=[0,0],h=[0,0],f={dx:0,dy:0};e.beginPath();for(var l=0;l<i.length;l++){var d=i[l],p=d[0];if(0===l&&a&&a.d){var g=t.getStartTangent();f=s.getShortenOffset(g[0][0],g[0][1],g[1][0],g[1][1],a.d)}else if(l===i.length-2&&"Z"===i[l+1][0]&&u&&u.d){if("Z"===i[l+1][0]){g=t.getEndTangent();f=s.getShortenOffset(g[0][0],g[0][1],g[1][0],g[1][1],u.d)}}else if(l===i.length-1&&u&&u.d&&"Z"!==i[0]){g=t.getEndTangent();f=s.getShortenOffset(g[0][0],g[0][1],g[1][0],g[1][1],u.d)}var v=f.dx,y=f.dy;switch(p){case"M":e.moveTo(d[1]-v,d[2]-y),h=[d[1],d[2]];break;case"L":e.lineTo(d[1]-v,d[2]-y);break;case"Q":e.quadraticCurveTo(d[1],d[2],d[3]-v,d[4]-y);break;case"C":e.bezierCurveTo(d[1],d[2],d[3],d[4],d[5]-v,d[6]-y);break;case"A":var m=void 0;n?(m=n[l])||(m=o.default(c,d),n[l]=m):m=o.default(c,d);var b=m.cx,x=m.cy,w=m.rx,M=m.ry,S=m.startAngle,_=m.endAngle,k=m.xRotation,O=m.sweepFlag;if(e.ellipse)e.ellipse(b,x,w,M,k,S,_,1-O);else{var E=w>M?w:M,j=w>M?1:w/M,C=w>M?M/w:1;e.translate(b,x),e.rotate(k),e.scale(j,C),e.arc(0,0,E,S,_,1-O),e.scale(1/j,1/C),e.rotate(-k),e.translate(-b,-x)}break;case"Z":e.closePath()}if("Z"===p)c=h;else{var A=d.length;c=[d[A-2],d[A-1]]}}},e.refreshElement=function(t,e){var r=t.get("canvas");r&&("remove"===e&&(t._cacheCanvasBBox=t.get("cacheCanvasBBox")),t.get("hasChanged")||(t.set("hasChanged",!0),t.cfg.parent&&t.cfg.parent.get("hasChanged")||(r.refreshElement(t,e,r),r.get("autoDraw")&&r.draw())))},e.getRefreshRegion=l,e.getMergedRegion=function(t){if(!t.length)return null;var e=[],r=[],i=[],o=[];return n.each(t,(function(t){var n=l(t);n&&(e.push(n.minX),r.push(n.minY),i.push(n.maxX),o.push(n.maxY))})),{minX:Math.min.apply(null,e),minY:Math.min.apply(null,r),maxX:Math.max.apply(null,i),maxY:Math.max.apply(null,o)}},e.mergeView=function(t,e){return t&&e&&a.intersectRect(t,e)?{minX:Math.max(t.minX,e.minX),minY:Math.max(t.minY,e.minY),maxX:Math.min(t.maxX,e.maxX),maxY:Math.min(t.maxY,e.maxY)}:null}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setClip=e.setTransform=e.setShadow=void 0;var n=r(29);e.setShadow=function(t,e){var r=t.cfg.el,n=t.attr(),i={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(i.dx||i.dy||i.blur||i.color){var o=e.find("filter",i);o||(o=e.addShadow(i)),r.setAttribute("filter","url(#"+o+")")}else r.removeAttribute("filter")},e.setTransform=function(t){var e=t.attr().matrix;if(e){for(var r=t.cfg.el,n=[],i=0;i<9;i+=3)n.push(e[i]+","+e[i+1]);-1===(n=n.join(",")).indexOf("NaN")?r.setAttribute("transform","matrix("+n+")"):console.warn("invalid matrix:",e)}},e.setClip=function(t,e){var r=t.getClip(),i=t.get("el");if(r){if(r&&!i.hasAttribute("clip-path")){n.createDom(r),r.createPath(e);var o=e.addClip(r);i.setAttribute("clip-path","url(#"+o+")")}}else i.removeAttribute("clip-path")}},function(t,e,r){var n=r(45),i=r(25);t.exports=function(t){if(!i(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,r){var n=r(81),i=r(82);t.exports=function(t,e,r,o){var a=!r;r||(r={});for(var s=-1,u=e.length;++s<u;){var c=e[s],h=o?o(r[c],t[c],c,r,t):void 0;void 0===h&&(h=t[c]),a?i(r,c,h):n(r,c,h)}return r}},function(t,e,r){var n=r(405),i=r(34),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=n(function(){return arguments}())?n:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},function(t,e,r){var n=r(407),i=r(84),o=r(117),a=o&&o.isTypedArray,s=a?i(a):n;t.exports=s},function(t,e,r){var n=r(55);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){return(t%e+e)%e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Math.PI/180;e.default=function(t){return n*t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(14),o=Object.prototype.hasOwnProperty;e.default=function(t,e){if(!e||!n.default(t))return{};for(var r,a={},s=i.default(e)?e:function(t){return t[e]},u=0;u<t.length;u++){var c=t[u];r=s(c),o.call(a,r)?a[r].push(c):a[r]=[c]}return a}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(311),o=r(315),a=[].slice,s=["keyword","gray","hex"],u={};Object.keys(o).forEach((function(t){u[a.call(o[t].labels).sort().join("")]=t}));var c={};function h(t,e){if(!(this instanceof h))return new h(t,e);if(e&&e in s&&(e=null),e&&!(e in o))throw new Error("Unknown model: "+e);var r,n;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof h)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var f=i.get(t);if(null===f)throw new Error("Unable to parse color from string: "+t);this.model=f.model,n=o[this.model].channels,this.color=f.value.slice(0,n),this.valpha="number"==typeof f.value[n]?f.value[n]:1}else if(t.length){this.model=e||"rgb",n=o[this.model].channels;var l=a.call(t,0,n);this.color=p(l,n),this.valpha="number"==typeof t[n]?t[n]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var d=Object.keys(t);"alpha"in t&&(d.splice(d.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var g=d.sort().join("");if(!(g in u))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=u[g];var v=o[this.model].labels,y=[];for(r=0;r<v.length;r++)y.push(t[v[r]]);this.color=p(y)}if(c[this.model])for(n=o[this.model].channels,r=0;r<n;r++){var m=c[this.model][r];m&&(this.color[r]=m(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function f(t,e,r){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(c[t]||(c[t]=[]))[e]=r})),t=t[0],function(n){var i;return arguments.length?(r&&(n=r(n)),(i=this[t]()).color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function l(t){return function(e){return Math.max(0,Math.min(t,e))}}function d(t){return Array.isArray(t)?t:[t]}function p(t,e){for(var r=0;r<e;r++)"number"!=typeof t[r]&&(t[r]=0);return t}h.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in i.to?this:this.rgb(),r=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return i.to[e.model](r)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),r=1===e.valpha?e.color:e.color.concat(this.valpha);return i.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=o[this.model].channels,r=o[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new h(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new h(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:f("rgb",0,l(255)),green:f("rgb",1,l(255)),blue:f("rgb",2,l(255)),hue:f(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:f("hsl",1,l(100)),lightness:f("hsl",2,l(100)),saturationv:f("hsv",1,l(100)),value:f("hsv",2,l(100)),chroma:f("hcg",1,l(100)),gray:f("hcg",2,l(100)),white:f("hwb",1,l(100)),wblack:f("hwb",2,l(100)),cyan:f("cmyk",0,l(100)),magenta:f("cmyk",1,l(100)),yellow:f("cmyk",2,l(100)),black:f("cmyk",3,l(100)),x:f("xyz",0,l(100)),y:f("xyz",1,l(100)),z:f("xyz",2,l(100)),l:f("lab",0,l(100)),a:f("lab",1),b:f("lab",2),keyword:function(t){return arguments.length?new h(t):o[this.model].keyword(this.color)},hex:function(t){return arguments.length?new h(t):i.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return h.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r=(r+t)%360)<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+n(t));var r=t.rgb(),i=this.rgb(),o=void 0===e?.5:e,a=2*o-1,s=r.alpha()-i.alpha(),u=((a*s==-1?a:(a+s)/(1+a*s))+1)/2,c=1-u;return h.rgb(u*r.red()+c*i.red(),u*r.green()+c*i.green(),u*r.blue()+c*i.blue(),r.alpha()*o+i.alpha()*(1-o))}},Object.keys(o).forEach((function(t){if(-1===s.indexOf(t)){var e=o[t].channels;h.prototype[t]=function(){if(this.model===t)return new h(this);if(arguments.length)return new h(arguments,t);var r="number"==typeof arguments[e]?e:this.valpha;return new h(d(o[this.model][t].raw(this.color)).concat(r),t)},h[t]=function(r){return"number"==typeof r&&(r=p(a.call(arguments),e)),new h(r,t)}}})),t.exports=h},function(t,e,r){var n;function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(o){var a=/^\s+/,s=/\s+$/,u=0,c=o.round,h=o.min,f=o.max,l=o.random;function d(t,e){if(e=e||{},(t=t||"")instanceof d)return t;if(!(this instanceof d))return new d(t,e);var r=function(t){var e={r:0,g:0,b:0},r=1,n=null,u=null,c=null,l=!1,d=!1;"string"==typeof t&&(t=function(t){t=t.replace(a,"").replace(s,"").toLowerCase();var e,r=!1;if(P[t])t=P[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=X.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=X.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=X.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=X.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=X.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=X.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=X.hex8.exec(t))return{r:B(e[1]),g:B(e[2]),b:B(e[3]),a:F(e[4]),format:r?"name":"hex8"};if(e=X.hex6.exec(t))return{r:B(e[1]),g:B(e[2]),b:B(e[3]),format:r?"name":"hex"};if(e=X.hex4.exec(t))return{r:B(e[1]+""+e[1]),g:B(e[2]+""+e[2]),b:B(e[3]+""+e[3]),a:F(e[4]+""+e[4]),format:r?"name":"hex8"};if(e=X.hex3.exec(t))return{r:B(e[1]+""+e[1]),g:B(e[2]+""+e[2]),b:B(e[3]+""+e[3]),format:r?"name":"hex"};return!1}(t));"object"==i(t)&&(V(t.r)&&V(t.g)&&V(t.b)?(p=t.r,g=t.g,v=t.b,e={r:255*N(p,255),g:255*N(g,255),b:255*N(v,255)},l=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):V(t.h)&&V(t.s)&&V(t.v)?(n=L(t.s),u=L(t.v),e=function(t,e,r){t=6*N(t,360),e=N(e,100),r=N(r,100);var n=o.floor(t),i=t-n,a=r*(1-e),s=r*(1-i*e),u=r*(1-(1-i)*e),c=n%6;return{r:255*[r,s,a,a,u,r][c],g:255*[u,r,r,s,a,a][c],b:255*[a,a,u,r,r,s][c]}}(t.h,n,u),l=!0,d="hsv"):V(t.h)&&V(t.s)&&V(t.l)&&(n=L(t.s),c=L(t.l),e=function(t,e,r){var n,i,o;function a(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=N(t,360),e=N(e,100),r=N(r,100),0===e)n=i=o=r;else{var s=r<.5?r*(1+e):r+e-r*e,u=2*r-s;n=a(u,s,t+1/3),i=a(u,s,t),o=a(u,s,t-1/3)}return{r:255*n,g:255*i,b:255*o}}(t.h,n,c),l=!0,d="hsl"),t.hasOwnProperty("a")&&(r=t.a));var p,g,v;return r=T(r),{ok:l,format:t.format||d,r:h(255,f(e.r,0)),g:h(255,f(e.g,0)),b:h(255,f(e.b,0)),a:r}}(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=c(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=r.ok,this._tc_id=u++}function p(t,e,r){t=N(t,255),e=N(e,255),r=N(r,255);var n,i,o=f(t,e,r),a=h(t,e,r),s=(o+a)/2;if(o==a)n=i=0;else{var u=o-a;switch(i=s>.5?u/(2-o-a):u/(o+a),o){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:i,l:s}}function g(t,e,r){t=N(t,255),e=N(e,255),r=N(r,255);var n,i,o=f(t,e,r),a=h(t,e,r),s=o,u=o-a;if(i=0===o?0:u/o,o==a)n=0;else{switch(o){case t:n=(e-r)/u+(e<r?6:0);break;case e:n=(r-t)/u+2;break;case r:n=(t-e)/u+4}n/=6}return{h:n,s:i,v:s}}function v(t,e,r,n){var i=[R(c(t).toString(16)),R(c(e).toString(16)),R(c(r).toString(16))];return n&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function y(t,e,r,n){return[R(z(n)),R(c(t).toString(16)),R(c(e).toString(16)),R(c(r).toString(16))].join("")}function m(t,e){e=0===e?0:e||10;var r=d(t).toHsl();return r.s-=e/100,r.s=D(r.s),d(r)}function b(t,e){e=0===e?0:e||10;var r=d(t).toHsl();return r.s+=e/100,r.s=D(r.s),d(r)}function x(t){return d(t).desaturate(100)}function w(t,e){e=0===e?0:e||10;var r=d(t).toHsl();return r.l+=e/100,r.l=D(r.l),d(r)}function M(t,e){e=0===e?0:e||10;var r=d(t).toRgb();return r.r=f(0,h(255,r.r-c(-e/100*255))),r.g=f(0,h(255,r.g-c(-e/100*255))),r.b=f(0,h(255,r.b-c(-e/100*255))),d(r)}function S(t,e){e=0===e?0:e||10;var r=d(t).toHsl();return r.l-=e/100,r.l=D(r.l),d(r)}function _(t,e){var r=d(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,d(r)}function k(t){var e=d(t).toHsl();return e.h=(e.h+180)%360,d(e)}function O(t){var e=d(t).toHsl(),r=e.h;return[d(t),d({h:(r+120)%360,s:e.s,l:e.l}),d({h:(r+240)%360,s:e.s,l:e.l})]}function E(t){var e=d(t).toHsl(),r=e.h;return[d(t),d({h:(r+90)%360,s:e.s,l:e.l}),d({h:(r+180)%360,s:e.s,l:e.l}),d({h:(r+270)%360,s:e.s,l:e.l})]}function j(t){var e=d(t).toHsl(),r=e.h;return[d(t),d({h:(r+72)%360,s:e.s,l:e.l}),d({h:(r+216)%360,s:e.s,l:e.l})]}function C(t,e,r){e=e||6,r=r||30;var n=d(t).toHsl(),i=360/r,o=[d(t)];for(n.h=(n.h-(i*e>>1)+720)%360;--e;)n.h=(n.h+i)%360,o.push(d(n));return o}function A(t,e){e=e||6;for(var r=d(t).toHsv(),n=r.h,i=r.s,o=r.v,a=[],s=1/e;e--;)a.push(d({h:n,s:i,v:o})),o=(o+s)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,r,n=this.toRgb();return t=n.r/255,e=n.g/255,r=n.b/255,.2126*(t<=.03928?t/12.92:o.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:o.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:o.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=T(t),this._roundA=c(100*this._a)/100,this},toHsv:function(){var t=g(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=g(this._r,this._g,this._b),e=c(360*t.h),r=c(100*t.s),n=c(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=p(this._r,this._g,this._b),e=c(360*t.h),r=c(100*t.s),n=c(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return v(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,i){var o=[R(c(t).toString(16)),R(c(e).toString(16)),R(c(r).toString(16)),R(z(n))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*N(this._r,255))+"%",g:c(100*N(this._g,255))+"%",b:c(100*N(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*N(this._r,255))+"%, "+c(100*N(this._g,255))+"%, "+c(100*N(this._b,255))+"%)":"rgba("+c(100*N(this._r,255))+"%, "+c(100*N(this._g,255))+"%, "+c(100*N(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(I[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+y(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var i=d(t);r="#"+y(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(M,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(x,arguments)},spin:function(){return this._applyModification(_,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(k,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(j,arguments)},triad:function(){return this._applyCombination(O,arguments)},tetrad:function(){return this._applyCombination(E,arguments)}},d.fromRatio=function(t,e){if("object"==i(t)){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:L(t[n]));t=r}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:l(),g:l(),b:l()})},d.mix=function(t,e,r){r=0===r?0:r||50;var n=d(t).toRgb(),i=d(e).toRgb(),o=r/100;return d({r:(i.r-n.r)*o+n.r,g:(i.g-n.g)*o+n.g,b:(i.b-n.b)*o+n.b,a:(i.a-n.a)*o+n.a})},d.readability=function(t,e){var r=d(t),n=d(e);return(o.max(r.getLuminance(),n.getLuminance())+.05)/(o.min(r.getLuminance(),n.getLuminance())+.05)},d.isReadable=function(t,e,r){var n,i,o=d.readability(t,e);switch(i=!1,(n=function(t){var e,r;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==r&&"large"!==r&&(r="small");return{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},d.mostReadable=function(t,e,r){var n,i,o,a,s=null,u=0;i=(r=r||{}).includeFallbackColors,o=r.level,a=r.size;for(var c=0;c<e.length;c++)(n=d.readability(t,e[c]))>u&&(u=n,s=d(e[c]));return d.isReadable(t,s,{level:o,size:a})||!i?s:(r.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],r))};var P=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},I=d.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(P);function T(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function N(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=h(e,f(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),o.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function D(t){return h(1,f(0,t))}function B(t){return parseInt(t,16)}function R(t){return 1==t.length?"0"+t:""+t}function L(t){return t<=1&&(t=100*t+"%"),t}function z(t){return o.round(255*parseFloat(t)).toString(16)}function F(t){return B(t)/255}var Y,G,q,X=(G="[\\s|\\(]+("+(Y="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?",q="[\\s|\\(]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")[,|\\s]+("+Y+")\\s*\\)?",{CSS_UNIT:new RegExp(Y),rgb:new RegExp("rgb"+G),rgba:new RegExp("rgba"+q),hsl:new RegExp("hsl"+G),hsla:new RegExp("hsla"+q),hsv:new RegExp("hsv"+G),hsva:new RegExp("hsva"+q),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function V(t){return!!X.CSS_UNIT.exec(t)}t.exports?t.exports=d:void 0===(n=function(){return d}.call(e,r,e,t))||(t.exports=n)}(Math)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21);e.default=function(t,e){return!!n.default(t)&&t.indexOf(e)>-1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(28);Object.defineProperty(e,"Base",{enumerable:!0,get:function(){return n.default}});var i=r(334);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return i.default}});var o=r(335);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return o.default}});var a=r(336);Object.defineProperty(e,"Image",{enumerable:!0,get:function(){return a.default}});var s=r(337);Object.defineProperty(e,"Line",{enumerable:!0,get:function(){return s.default}});var u=r(338);Object.defineProperty(e,"Marker",{enumerable:!0,get:function(){return u.default}});var c=r(340);Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.default}});var h=r(342);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return h.default}});var f=r(343);Object.defineProperty(e,"Polyline",{enumerable:!0,get:function(){return f.default}});var l=r(345);Object.defineProperty(e,"Rect",{enumerable:!0,get:function(){return l.default}});var d=r(348);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return d.default}})},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.addEndArrow=e.addStartArrow=e.getShortenOffset=void 0;var i=r(1),o=r(73),a=Math.sin,s=Math.cos,u=Math.atan2,c=Math.PI;function h(t,e,r,n,i,h,f){var l=e.stroke,d=e.lineWidth,p=u(n-h,r-i),g=new o.Path({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*s(c/6)+","+10*a(c/6)+" L0,0 L"+10*s(c/6)+",-"+10*a(c/6),stroke:l,lineWidth:d}});g.translate(i,h),g.rotateAtPoint(i,h,p),t.set(f?"startArrowShape":"endArrowShape",g)}function f(t,e,r,n,c,h,f){var l=e.startArrow,d=e.endArrow,p=e.stroke,g=e.lineWidth,v=f?l:d,y=v.d,m=v.fill,b=v.stroke,x=v.lineWidth,w=i.__rest(v,["d","fill","stroke","lineWidth"]),M=u(n-h,r-c);y&&(c-=s(M)*y,h-=a(M)*y);var S=new o.Path({type:"path",canvas:t.get("canvas"),isArrowShape:!0,attrs:i.__assign(i.__assign({},w),{stroke:b||p,lineWidth:x||g,fill:m})});S.translate(c,h),S.rotateAtPoint(c,h,M),t.set(f?"startArrowShape":"endArrowShape",S)}e.getShortenOffset=function(t,e,r,n,i){var o=u(n-e,r-t);return{dx:s(o)*i,dy:a(o)*i}},e.addStartArrow=function(t,e,r,i,o,a){"object"===n(e.startArrow)?f(t,e,r,i,o,a,!0):e.startArrow?h(t,e,r,i,o,a,!0):t.set("startArrowShape",null)},e.addEndArrow=function(t,e,r,i,o,a){"object"===n(e.endArrow)?f(t,e,r,i,o,a,!1):e.endArrow?h(t,e,r,i,o,a,!1):t.set("startArrowShape",null)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(40);e.default=function(t,e,r,i,o,a,s){var u=Math.min(t,r),c=Math.max(t,r),h=Math.min(e,i),f=Math.max(e,i),l=o/2;return a>=u-l&&a<=c+l&&s>=h-l&&s<=f+l&&n.default.pointToLine(t,e,r,i,a,s)<=o/2}},function(t,e,r){var n=r(77),i=r(379),o=r(380),a=r(381),s=r(382),u=r(383);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=u,t.exports=c},function(t,e,r){var n=r(374),i=r(375),o=r(376),a=r(377),s=r(378);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,r){var n=r(51);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},function(t,e,r){var n=r(44)(Object,"create");t.exports=n},function(t,e,r){var n=r(399);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},function(t,e,r){var n=r(82),i=r(51),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var a=t[e];o.call(t,e)&&i(a,r)&&(void 0!==r||e in t)||n(t,e,r)}},function(t,e,r){var n=r(176);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=r(t);return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){var r=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,r){var n=r(178)(Object.getPrototypeOf,Object);t.exports=n},function(t,e,r){var n=r(123),i=r(428)(n);t.exports=i},function(t,e,r){var n=r(89),i=r(66);t.exports=function(t,e){for(var r=0,o=(e=n(e,t)).length;null!=t&&r<o;)t=t[i(e[r++])];return r&&r==o?t:void 0}},function(t,e,r){var n=r(15),i=r(126),o=r(442),a=r(201);t.exports=function(t,e){return n(t)?t:i(t,e)?[t]:o(a(t))}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=Array(n);++r<n;)i[r]=e(t[r],r,t);return i}},function(t,e,r){var n=r(47),i=r(210),o=r(211);t.exports=function(t,e){return o(i(t,e,n),t+"")}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(51),o=r(38),a=r(83),s=r(25);t.exports=function(t,e,r){if(!s(r))return!1;var u=n(e);return!!("number"==u?o(r)&&a(e,r.length):"string"==u&&e in r)&&i(r[e],t)}},function(t,e,r){"use strict";var n=r(13);t.exports={longestPath:function(t){var e={};n.forEach(t.sources(),(function r(i){var o=t.node(i);if(n.has(e,i))return o.rank;e[i]=!0;var a=n.min(n.map(t.outEdges(i),(function(e){return r(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),o.rank=a}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e,r){var n=r(226),i=function(){function t(t,e){void 0===e&&(e={});this.options=e,this.rootNode=n(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(102),i=r(21),o=r(3);e.default=function t(e,r){if(e===r)return!0;if(!e||!r)return!1;if(o.default(e)||o.default(r))return!1;if(i.default(e)||i.default(r)){if(e.length!==r.length)return!1;for(var a=!0,s=0;s<e.length&&(a=t(e[s],r[s]));s++);return a}if(n.default(e)||n.default(r)){var u=Object.keys(e),c=Object.keys(r);if(u.length!==c.length)return!1;for(a=!0,s=0;s<u.length&&(a=t(e[u[s]],r[u[s]]));s++);return a}return!1}},function(t,e,r){"use strict";var n=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();e.a=n},function(t,e,r){"use strict";var n=r(1),i=r(99),o=r(9),a=function(t){function e(e){var r=t.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=Object(o.i)(n,e),r}return Object(n.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,e){this.cfg[t]=e},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(i.a);e.a=a},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0});var i=r(4);e.default=function t(e){if("object"!==n(e)||null===e)return e;var r;if(i.default(e)){r=[];for(var o=0,a=e.length;o<a;o++)"object"===n(e[o])&&null!=e[o]?r[o]=t(e[o]):r[o]=e[o]}else for(var s in r={},e)"object"===n(e[s])&&null!=e[s]?r[s]=t(e[s]):r[s]=e[s];return r}},function(t,e,r){"use strict";var n=function(){function t(){this._events={}}return t.prototype.on=function(t,e,r){return this._events[t]||(this._events[t]=[]),this._events[t].push({callback:e,once:!!r}),this},t.prototype.once=function(t,e){return this.on(t,e,!0),this},t.prototype.emit=function(t){for(var e=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=this._events[t]||[],o=this._events["*"]||[],a=function(n){for(var i=n.length,o=0;o<i;o++)if(n[o]){var a=n[o],s=a.callback;a.once&&(n.splice(o,1),0===n.length&&delete e._events[t],i--,o--),s.apply(e,r)}};a(i),a(o)},t.prototype.off=function(t,e){if(t)if(e){for(var r=this._events[t]||[],n=r.length,i=0;i<n;i++)r[i].callback===e&&(r.splice(i,1),n--,i--);0===r.length&&delete this._events[t]}else delete this._events[t];else this._events={};return this},t.prototype.getEvents=function(){return this._events},t}();e.a=n},function(t,e,r){"use strict";var n=r(1),i=r(101),o=r(9),a={};var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.__extends)(e,t),e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,e=-1/0,r=1/0,n=-1/0,i=[],a=[],s=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return s.length>0?(Object(o.a)(s,(function(t){var e=t.getBBox();i.push(e.minX,e.maxX),a.push(e.minY,e.maxY)})),t=Math.min.apply(null,i),e=Math.max.apply(null,i),r=Math.min.apply(null,a),n=Math.max.apply(null,a)):(t=0,e=0,r=0,n=0),{x:t,y:r,minX:t,minY:r,maxX:e,maxY:n,width:e-t,height:n-r}},e.prototype.getCanvasBBox=function(){var t=1/0,e=-1/0,r=1/0,n=-1/0,i=[],a=[],s=this.getChildren().filter((function(t){return t.get("visible")&&(!t.isGroup()||t.isGroup()&&t.getChildren().length>0)}));return s.length>0?(Object(o.a)(s,(function(t){var e=t.getCanvasBBox();i.push(e.minX,e.maxX),a.push(e.minY,e.maxY)})),t=Math.min.apply(null,i),e=Math.max.apply(null,i),r=Math.min.apply(null,a),n=Math.max.apply(null,a)):(t=0,e=0,r=0,n=0),{x:t,y:r,minX:t,minY:r,maxX:e,maxY:n,width:e-t,height:n-r}},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.children=[],e},e.prototype.onAttrChange=function(e,r,n){if(t.prototype.onAttrChange.call(this,e,r,n),"matrix"===e){var i=this.getTotalMatrix();this._applyChildrenMarix(i)}},e.prototype.applyMatrix=function(e){var r=this.getTotalMatrix();t.prototype.applyMatrix.call(this,e);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var e=this.getChildren();Object(o.a)(e,(function(e){e.applyMatrix(t)}))},e.prototype.addShape=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[0],n=t[1];Object(o.f)(r)?n=r:n.type=r;var i=a[n.type];i||(i=Object(o.k)(n.type),a[n.type]=i);var s=this.getShapeBase(),u=new s[i](n);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r,n=t[0],i=t[1];if(Object(o.d)(n))r=new n(i||{parent:this});else{var a=n||{},s=this.getGroupBase();r=new s(a)}return this.add(r),r},e.prototype.getCanvas=function(){return this.isCanvas()?this:this.get("canvas")},e.prototype.getShape=function(t,e,r){if(!Object(o.b)(this))return null;var n,i=this.getChildren();if(this.isCanvas())n=this._findShape(i,t,e,r);else{var a=[t,e,1];a=this.invertFromMatrix(a),this.isClipped(a[0],a[1])||(n=this._findShape(i,a[0],a[1],r))}return n},e.prototype._findShape=function(t,e,r,n){for(var i=null,a=t.length-1;a>=0;a--){var s=t[a];if(Object(o.b)(s)&&(s.isGroup()?i=s.getShape(e,r,n):s.isHit(e,r)&&(i=s)),i)break}return i},e.prototype.add=function(t){var e=this.getCanvas(),r=this.getChildren(),n=this.get("timeline"),i=t.getParent();i&&function(t,e,r){void 0===r&&(r=!0),r?e.destroy():(e.set("parent",null),e.set("canvas",null)),Object(o.j)(t.getChildren(),e)}(i,t,!1),t.set("parent",this),e&&function t(e,r){if(e.set("canvas",r),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){t(e,r)}))}}(t,e),n&&function t(e,r){if(e.set("timeline",r),e.isGroup()){var n=e.get("children");n.length&&n.forEach((function(e){t(e,r)}))}}(t,n),r.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var e=this.getTotalMatrix();e&&t.applyMatrix(e)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t,e=this.getChildren();Object(o.a)(e,(function(t,e){return t._INDEX=e,t})),e.sort((t=function(t,e){return t.get("zIndex")-e.get("zIndex")},function(e,r){var n=t(e,r);return 0===n?e._INDEX-r._INDEX:n})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),e=t.length-1;e>=0;e--)t[e].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),t.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){return this.getChildren()[t]},e.prototype.getCount=function(){return this.getChildren().length},e.prototype.contain=function(t){return this.getChildren().indexOf(t)>-1},e.prototype.removeChild=function(t,e){void 0===e&&(e=!0),this.contain(t)&&t.remove(e)},e.prototype.findAll=function(t){var e=[],r=this.getChildren();return Object(o.a)(r,(function(r){t(r)&&e.push(r),r.isGroup()&&(e=e.concat(r.findAll(t)))})),e},e.prototype.find=function(t){var e=null,r=this.getChildren();return Object(o.a)(r,(function(r){if(t(r)?e=r:r.isGroup()&&(e=r.find(t)),e)return!1})),e},e.prototype.findById=function(t){return this.find((function(e){return e.get("id")===t}))},e.prototype.findByClassName=function(t){return this.find((function(e){return e.get("className")===t}))},e.prototype.findAllByName=function(t){return this.findAll((function(e){return e.get("name")===t}))},e}(i.a);e.a=s},function(t,e,r){"use strict";var n=r(1),i=r(0),o=r(133),a=r(9),s=r(32),u=r(97),c=o.ext.transform,h=["zIndex","capture","visible","type"],f=["repeat"];function l(t,e){var r={},n=e.attrs;for(var i in t)r[i]=n[i];return r}function d(t,e){var r={},n=e.attr();return Object(i.each)(t,(function(t,e){-1!==f.indexOf(e)||Object(i.isEqual)(n[e],t)||(r[e]=t)})),r}function p(t,e){if(e.onFrame)return t;var r=e.startTime,n=e.delay,o=e.duration,a=Object.prototype.hasOwnProperty;return Object(i.each)(t,(function(t){r+n<t.startTime+t.delay+t.duration&&o>t.delay&&Object(i.each)(e.toAttrs,(function(e,r){a.call(t.toAttrs,r)&&(delete t.toAttrs[r],delete t.fromAttrs[r])}))})),t}var g=function(t){function e(e){var r=t.call(this,e)||this;r.attrs={};var n=r.getDefaultAttrs();return Object(i.mix)(n,e.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return Object(n.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e[0],o=e[1];if(!n)return this.attrs;if(Object(i.isObject)(n)){for(var a in n)this.setAttr(a,n[a]);return this.afterAttrsChange(n),this}return 2===e.length?(this.setAttr(n,o),this.afterAttrsChange(((t={})[n]=o,t)),this):this.attrs[n]},e.prototype.isClipped=function(t,e){var r=this.getClip();return r&&!r.isHit(t,e)},e.prototype.setAttr=function(t,e){var r=this.attrs[t];r!==e&&(this.attrs[t]=e,this.onAttrChange(t,e,r))},e.prototype.onAttrChange=function(t,e,r){"matrix"===t&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var e=this.cfg.applyTo;e&&e.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var e=this.getParent();return e&&e.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var e=t.getChildren(),r=(this.get("el"),e.indexOf(this));e.splice(r,1),e.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var e=t.getChildren(),r=(this.get("el"),e.indexOf(this));e.splice(r,1),e.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){void 0===t&&(t=!0);var e=this.getParent();e?(Object(a.j)(e.getChildren(),this),e.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr("matrix",this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr("matrix")},e.prototype.setMatrix=function(t){this.attr("matrix",t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var e=this.attr("matrix"),r=this.cfg.parentMatrix;t=r&&e?Object(s.b)(r,e):e||r,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var e=this.attr("matrix"),r=null;r=t&&e?Object(s.b)(t,e):e||t,this.set("totalMatrix",r),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var e=this.attr("matrix");return e?Object(s.c)(e,t):t},e.prototype.invertFromMatrix=function(t){var e=this.attr("matrix");if(e){var r=Object(s.a)(e);if(r)return Object(s.c)(r,t)}return t},e.prototype.setClip=function(t){var e=this.getCanvas(),r=null;if(t){var n=this.getShapeBase()[Object(i.upperFirst)(t.type)];n&&(r=new n({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:e}))}return this.set("clipShape",r),this.onCanvasChange("clip"),r},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,e=this.attrs,r={};Object(i.each)(e,(function(t,n){Object(i.isArray)(e[n])?r[n]=function(t){for(var e=[],r=0;r<t.length;r++)Object(i.isArray)(t[r])?e.push([].concat(t[r])):e.push(t[r]);return e}(e[n]):r[n]=e[n]}));var n=new(0,this.constructor)({attrs:r});return Object(i.each)(h,(function(e){n.set(e,t.get(e))})),n},e.prototype.destroy=function(){this.destroyed||(this.attrs={},t.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.set("animating",!0);var r=this.get("timeline");r||(r=this.get("canvas").get("timeline"),this.set("timeline",r));var n=this.get("animations")||[];r.timer||r.initTimer();var o,a,s,u,c,h=t[0],f=t[1],g=t[2],v=void 0===g?"easeLinear":g,y=t[3],m=void 0===y?i.noop:y,b=t[4],x=void 0===b?0:b;Object(i.isFunction)(h)?(o=h,h={}):Object(i.isObject)(h)&&h.onFrame&&(o=h.onFrame,a=h.repeat),Object(i.isObject)(f)?(f=(c=f).duration,v=c.easing||"easeLinear",x=c.delay||0,a=c.repeat||a||!1,m=c.callback||i.noop,s=c.pauseCallback||i.noop,u=c.resumeCallback||i.noop):(Object(i.isNumber)(m)&&(x=m,m=null),Object(i.isFunction)(v)?(m=v,v="easeLinear"):v=v||"easeLinear");var w=d(h,this),M={fromAttrs:l(w,this),toAttrs:w,duration:f,easing:v,repeat:a,callback:m,pauseCallback:s,resumeCallback:u,delay:x,startTime:r.getTime(),id:Object(i.uniqueId)(),onFrame:o,pathFormatted:!1};n.length>0?n=p(n,M):r.addAnimator(this),n.push(M),this.set("animations",n),this.set("_pause",{isPaused:!1})},e.prototype.stopAnimate=function(t){var e=this;void 0===t&&(t=!0);var r=this.get("animations");Object(i.each)(r,(function(r){t&&(r.onFrame?e.attr(r.onFrame(1)):e.attr(r.toAttrs)),r.callback&&r.callback()})),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),e=this.get("animations"),r=t.getTime();return Object(i.each)(e,(function(t){t._paused=!0,t._pauseTime=r,t.pauseCallback&&t.pauseCallback()})),this.set("_pause",{isPaused:!0,pauseTime:r}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline").getTime(),e=this.get("animations"),r=this.get("_pause").pauseTime;return Object(i.each)(e,(function(e){e.startTime=e.startTime+(t-r),e._paused=!1,e._pauseTime=null,e.resumeCallback&&e.resumeCallback()})),this.set("_pause",{isPaused:!1}),this.set("animations",e),this},e.prototype.emitDelegation=function(t,e){var r,n=this,o=e.propagationPath;this.getEvents();"mouseenter"===t?r=e.fromShape:"mouseleave"===t&&(r=e.toShape);for(var s=function(t){var s=o[t],c=s.get("name");if(c){if((s.isGroup()||s.isCanvas&&s.isCanvas())&&r&&Object(a.g)(s,r))return"break";Object(i.isArray)(c)?Object(i.each)(c,(function(t){n.emitDelegateEvent(s,t,e)})):u.emitDelegateEvent(s,c,e)}},u=this,c=0;c<o.length;c++){if("break"===s(c))break}},e.prototype.emitDelegateEvent=function(t,e,r){var n=this.getEvents(),i=e+":"+r.type;(n[i]||n["*"])&&(r.name=i,r.currentTarget=t,r.delegateTarget=this,r.delegateObject=t.get("delegateObject"),this.emit(i,r))},e.prototype.translate=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var r=this.getMatrix(),n=c(r,[["t",t,e]]);return this.setMatrix(n),this},e.prototype.move=function(t,e){var r=this.attr("x")||0,n=this.attr("y")||0;return this.translate(t-r,e-n),this},e.prototype.moveTo=function(t,e){return this.move(t,e)},e.prototype.scale=function(t,e){var r=this.getMatrix(),n=c(r,[["s",t,e||t]]);return this.setMatrix(n),this},e.prototype.rotate=function(t){var e=this.getMatrix(),r=c(e,[["r",t]]);return this.setMatrix(r),this},e.prototype.rotateAtStart=function(t){var e=this.attr(),r=e.x,n=e.y,i=this.getMatrix(),o=c(i,[["t",-r,-n],["r",t],["t",r,n]]);return this.setMatrix(o),this},e.prototype.rotateAtPoint=function(t,e,r){var n=this.getMatrix(),i=c(n,[["t",-t,-e],["r",r],["t",t,e]]);return this.setMatrix(i),this},e}(u.a);e.a=g},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return"object"===n(t)&&null!==t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,r){return void 0===r&&(r=1e-5),Math.abs(t-e)<r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))};var n=e.EPSILON=1e-6;e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random;var i=Math.PI/180},function(t,e,r){"use strict";r.r(e),r.d(e,"create",(function(){return i})),r.d(e,"clone",(function(){return o})),r.d(e,"fromValues",(function(){return a})),r.d(e,"copy",(function(){return s})),r.d(e,"set",(function(){return u})),r.d(e,"add",(function(){return c})),r.d(e,"subtract",(function(){return h})),r.d(e,"multiply",(function(){return f})),r.d(e,"divide",(function(){return l})),r.d(e,"ceil",(function(){return d})),r.d(e,"floor",(function(){return p})),r.d(e,"min",(function(){return g})),r.d(e,"max",(function(){return v})),r.d(e,"round",(function(){return y})),r.d(e,"scale",(function(){return m})),r.d(e,"scaleAndAdd",(function(){return b})),r.d(e,"distance",(function(){return x})),r.d(e,"squaredDistance",(function(){return w})),r.d(e,"length",(function(){return M})),r.d(e,"squaredLength",(function(){return S})),r.d(e,"negate",(function(){return _})),r.d(e,"inverse",(function(){return k})),r.d(e,"normalize",(function(){return O})),r.d(e,"dot",(function(){return E})),r.d(e,"cross",(function(){return j})),r.d(e,"lerp",(function(){return C})),r.d(e,"random",(function(){return A})),r.d(e,"transformMat2",(function(){return P})),r.d(e,"transformMat2d",(function(){return I})),r.d(e,"transformMat3",(function(){return T})),r.d(e,"transformMat4",(function(){return N})),r.d(e,"rotate",(function(){return D})),r.d(e,"angle",(function(){return B})),r.d(e,"zero",(function(){return R})),r.d(e,"str",(function(){return L})),r.d(e,"exactEquals",(function(){return z})),r.d(e,"equals",(function(){return F})),r.d(e,"len",(function(){return G})),r.d(e,"sub",(function(){return q})),r.d(e,"mul",(function(){return X})),r.d(e,"div",(function(){return V})),r.d(e,"dist",(function(){return H})),r.d(e,"sqrDist",(function(){return U})),r.d(e,"sqrLen",(function(){return W})),r.d(e,"forEach",(function(){return Z}));var n=r(6);function i(){var t=new n.a(2);return n.a!=Float32Array&&(t[0]=0,t[1]=0),t}function o(t){var e=new n.a(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var r=new n.a(2);return r[0]=t,r[1]=e,r}function s(t,e){return t[0]=e[0],t[1]=e[1],t}function u(t,e,r){return t[0]=e,t[1]=r,t}function c(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function h(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function f(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function l(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function p(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function g(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function v(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function y(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function m(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function b(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function x(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function w(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function M(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function S(t){var e=t[0],r=t[1];return e*e+r*r}function _(t,e){return t[0]=-e[0],t[1]=-e[1],t}function k(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function O(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function E(t,e){return t[0]*e[0]+t[1]*e[1]}function j(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function C(t,e,r,n){var i=e[0],o=e[1];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t}function A(t,e){e=e||1;var r=2*n.c()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function P(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function I(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function T(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function N(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function D(t,e,r,n){var i=e[0]-r[0],o=e[1]-r[1],a=Math.sin(n),s=Math.cos(n);return t[0]=i*s-o*a+r[0],t[1]=i*a+o*s+r[1],t}function B(t,e){var r=t[0],n=t[1],i=e[0],o=e[1],a=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+o*o),s=a&&(r*i+n*o)/a;return Math.acos(Math.min(Math.max(s,-1),1))}function R(t){return t[0]=0,t[1]=0,t}function L(t){return"vec2("+t[0]+", "+t[1]+")"}function z(t,e){return t[0]===e[0]&&t[1]===e[1]}function F(t,e){var r=t[0],i=t[1],o=e[0],a=e[1];return Math.abs(r-o)<=n.b*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=n.b*Math.max(1,Math.abs(i),Math.abs(a))}var Y,G=M,q=h,X=f,V=l,H=x,U=w,W=S,Z=(Y=i(),function(t,e,r,n,i,o){var a,s;for(e||(e=2),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,a=r;a<s;a+=e)Y[0]=t[a],Y[1]=t[a+1],i(Y,Y,o),t[a]=Y[0],t[a+1]=Y[1];return t})},function(t,e,r){"use strict";r.r(e),r.d(e,"create",(function(){return i})),r.d(e,"clone",(function(){return o})),r.d(e,"length",(function(){return a})),r.d(e,"fromValues",(function(){return s})),r.d(e,"copy",(function(){return u})),r.d(e,"set",(function(){return c})),r.d(e,"add",(function(){return h})),r.d(e,"subtract",(function(){return f})),r.d(e,"multiply",(function(){return l})),r.d(e,"divide",(function(){return d})),r.d(e,"ceil",(function(){return p})),r.d(e,"floor",(function(){return g})),r.d(e,"min",(function(){return v})),r.d(e,"max",(function(){return y})),r.d(e,"round",(function(){return m})),r.d(e,"scale",(function(){return b})),r.d(e,"scaleAndAdd",(function(){return x})),r.d(e,"distance",(function(){return w})),r.d(e,"squaredDistance",(function(){return M})),r.d(e,"squaredLength",(function(){return S})),r.d(e,"negate",(function(){return _})),r.d(e,"inverse",(function(){return k})),r.d(e,"normalize",(function(){return O})),r.d(e,"dot",(function(){return E})),r.d(e,"cross",(function(){return j})),r.d(e,"lerp",(function(){return C})),r.d(e,"hermite",(function(){return A})),r.d(e,"bezier",(function(){return P})),r.d(e,"random",(function(){return I})),r.d(e,"transformMat4",(function(){return T})),r.d(e,"transformMat3",(function(){return N})),r.d(e,"transformQuat",(function(){return D})),r.d(e,"rotateX",(function(){return B})),r.d(e,"rotateY",(function(){return R})),r.d(e,"rotateZ",(function(){return L})),r.d(e,"angle",(function(){return z})),r.d(e,"zero",(function(){return F})),r.d(e,"str",(function(){return Y})),r.d(e,"exactEquals",(function(){return G})),r.d(e,"equals",(function(){return q})),r.d(e,"sub",(function(){return V})),r.d(e,"mul",(function(){return H})),r.d(e,"div",(function(){return U})),r.d(e,"dist",(function(){return W})),r.d(e,"sqrDist",(function(){return Z})),r.d(e,"len",(function(){return $})),r.d(e,"sqrLen",(function(){return K})),r.d(e,"forEach",(function(){return Q}));var n=r(6);function i(){var t=new n.a(3);return n.a!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=new n.a(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function s(t,e,r){var i=new n.a(3);return i[0]=t,i[1]=e,i[2]=r,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function h(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function f(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function l(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function d(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function g(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function v(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function y(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function b(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function x(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function w(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.hypot(r,n,i)}function M(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function S(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function _(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function k(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function O(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o,t}function E(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function j(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t}function C(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t}function A(t,e,r,n,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),h=a*(3-2*o);return t[0]=e[0]*s+r[0]*u+n[0]*c+i[0]*h,t[1]=e[1]*s+r[1]*u+n[1]*c+i[1]*h,t[2]=e[2]*s+r[2]*u+n[2]*c+i[2]*h,t}function P(t,e,r,n,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,h=3*o*s,f=3*u*a,l=u*o;return t[0]=e[0]*c+r[0]*h+n[0]*f+i[0]*l,t[1]=e[1]*c+r[1]*h+n[1]*f+i[1]*l,t[2]=e[2]*c+r[2]*h+n[2]*f+i[2]*l,t}function I(t,e){e=e||1;var r=2*n.c()*Math.PI,i=2*n.c()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=i*e,t}function T(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t}function N(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t}function D(t,e,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=e[0],u=e[1],c=e[2],h=i*c-o*u,f=o*s-n*c,l=n*u-i*s,d=i*l-o*f,p=o*h-n*l,g=n*f-i*h,v=2*a;return h*=v,f*=v,l*=v,d*=2,p*=2,g*=2,t[0]=s+h+d,t[1]=u+f+p,t[2]=c+l+g,t}function B(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function R(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function L(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t}function z(t,e){var r=t[0],n=t[1],i=t[2],o=e[0],a=e[1],s=e[2],u=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(o*o+a*a+s*s),c=u&&E(t,e)/u;return Math.acos(Math.min(Math.max(c,-1),1))}function F(t){return t[0]=0,t[1]=0,t[2]=0,t}function Y(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function G(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function q(t,e){var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(r-a)<=n.b*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=n.b*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=n.b*Math.max(1,Math.abs(o),Math.abs(u))}var X,V=f,H=l,U=d,W=w,Z=M,$=a,K=S,Q=(X=i(),function(t,e,r,n,i,o){var a,s;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,a=r;a<s;a+=e)X[0]=t[a],X[1]=t[a+1],X[2]=t[a+2],i(X,X,o),t[a]=X[0],t[a+1]=X[1],t[a+2]=X[2];return t})},function(t,e,r){"use strict";function n(t,e){return t&&e?{minX:Math.min(t.minX,e.minX),minY:Math.min(t.minY,e.minY),maxX:Math.max(t.maxX,e.maxX),maxY:Math.max(t.maxY,e.maxY)}:t||e}Object.defineProperty(e,"__esModule",{value:!0}),e.mergeArrowBBox=e.mergeBBox=void 0,e.mergeBBox=n,e.mergeArrowBBox=function(t,e){var r=t.get("startArrowShape"),i=t.get("endArrowShape");return r&&(e=n(e,r.getCanvasBBox())),i&&(e=n(e,i.getCanvasBBox())),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(33),i=r(40),o=r(161);function a(t,e,r,n,i){var o=1-i;return o*o*o*t+3*e*i*o*o+3*r*i*i*o+n*i*i*i}function s(t,e,r,n,i){var o=1-i;return 3*(o*o*(e-t)+2*o*i*(r-e)+i*i*(n-r))}function u(t,e,r,i){var o,a,s,u=-3*t+9*e-9*r+3*i,c=6*t-12*e+6*r,h=3*e-3*t,f=[];if(n.isNumberEqual(u,0))n.isNumberEqual(c,0)||(o=-h/c)>=0&&o<=1&&f.push(o);else{var l=c*c-4*u*h;n.isNumberEqual(l,0)?f.push(-c/(2*u)):l>0&&(a=(-c-(s=Math.sqrt(l)))/(2*u),(o=(-c+s)/(2*u))>=0&&o<=1&&f.push(o),a>=0&&a<=1&&f.push(a))}return f}function c(t,e,r,n,o,s,u,c,h){var f=a(t,r,o,u,h),l=a(e,n,s,c,h),d=i.default.pointAt(t,e,r,n,h),p=i.default.pointAt(r,n,o,s,h),g=i.default.pointAt(o,s,u,c,h),v=i.default.pointAt(d.x,d.y,p.x,p.y,h),y=i.default.pointAt(p.x,p.y,g.x,g.y,h);return[[t,e,d.x,d.y,v.x,v.y,f,l],[f,l,y.x,y.y,g.x,g.y,u,c]]}e.default={extrema:u,box:function(t,e,r,i,o,s,c,h){for(var f=[t,c],l=[e,h],d=u(t,r,o,c),p=u(e,i,s,h),g=0;g<d.length;g++)f.push(a(t,r,o,c,d[g]));for(g=0;g<p.length;g++)l.push(a(e,i,s,h,p[g]));return n.getBBoxByArray(f,l)},length:function(t,e,r,n,i,a,s,u){return function t(e,r,n,i,a,s,u,h,f){if(0===f)return o.snapLength([e,n,a,u],[r,i,s,h]);var l=c(e,r,n,i,a,s,u,h,.5),d=l[0],p=l[1];return d.push(f-1),p.push(f-1),t.apply(null,d)+t.apply(null,p)}(t,e,r,n,i,a,s,u,3)},nearestPoint:function(t,e,r,n,i,s,u,c,h,f,l){return o.nearestPoint([t,r,i,u],[e,n,s,c],h,f,a,l)},pointDistance:function(t,e,r,i,o,a,s,u,c,h,f){var l=this.nearestPoint(t,e,r,i,o,a,s,u,c,h,f);return n.distance(l.x,l.y,c,h)},interpolationAt:a,pointAt:function(t,e,r,n,i,o,s,u,c){return{x:a(t,r,i,s,c),y:a(e,n,o,u,c)}},divide:function(t,e,r,n,i,o,a,s,u){return c(t,e,r,n,i,o,a,s,u)},tangentAngle:function(t,e,r,i,o,a,u,c,h){var f=s(t,r,o,u,h),l=s(e,i,a,c,h);return n.piMod(Math.atan2(l,f))}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.refreshElement=e.drawChildren=void 0;var n=r(61),i=r(29);e.drawChildren=function(t,e){e.forEach((function(e){e.draw(t)}))},e.refreshElement=function(t,e){var r=t.get("canvas");if(r&&r.get("autoDraw")){var o=r.get("context"),a=t.getParent(),s=a?a.getChildren():[r],u=t.get("el");if("remove"===e)if(t.get("isClipShape")){var c=u&&u.parentNode,h=c&&c.parentNode;c&&h&&h.removeChild(c)}else u&&u.parentNode&&u.parentNode.removeChild(u);else if("show"===e)u.setAttribute("visibility","visible");else if("hide"===e)u.setAttribute("visibility","hidden");else if("zIndex"===e)i.moveTo(u,s.indexOf(t));else if("sort"===e){var f=t.get("children");f&&f.length&&i.sortDom(t,(function(t,e){return f.indexOf(t)-f.indexOf(e)?1:0}))}else"clear"===e?u&&(u.innerHTML=""):"matrix"===e?n.setTransform(t):"clip"===e?n.setClip(t,o):"attr"===e||"add"===e&&t.draw(o)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(23);Object.defineProperty(e,"Base",{enumerable:!0,get:function(){return n.default}});var i=r(349);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return i.default}});var o=r(350);Object.defineProperty(e,"Dom",{enumerable:!0,get:function(){return o.default}});var a=r(351);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return a.default}});var s=r(352);Object.defineProperty(e,"Image",{enumerable:!0,get:function(){return s.default}});var u=r(353);Object.defineProperty(e,"Line",{enumerable:!0,get:function(){return u.default}});var c=r(354);Object.defineProperty(e,"Marker",{enumerable:!0,get:function(){return c.default}});var h=r(356);Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return h.default}});var f=r(357);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return f.default}});var l=r(358);Object.defineProperty(e,"Polyline",{enumerable:!0,get:function(){return l.default}});var d=r(359);Object.defineProperty(e,"Rect",{enumerable:!0,get:function(){return d.default}});var p=r(361);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return p.default}})},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(24);t.exports=o;function o(t){this._isDirected=!i.has(t,"directed")||t.directed,this._isMultigraph=!!i.has(t,"multigraph")&&t.multigraph,this._isCompound=!!i.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=i.constant(void 0),this._defaultEdgeLabelFn=i.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(t,e){t[e]?t[e]++:t[e]=1}function s(t,e){--t[e]||delete t[e]}function u(t,e,r,n){var o=""+e,a=""+r;if(!t&&o>a){var s=o;o=a,a=s}return o+""+a+""+(i.isUndefined(n)?"\0":n)}function c(t,e,r,n){var i=""+e,o=""+r;if(!t&&i>o){var a=i;i=o,o=a}var s={v:i,w:o};return n&&(s.name=n),s}function h(t,e){return u(t,e.v,e.w,e.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(t){return this._label=t,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(t){return i.isFunction(t)||(t=i.constant(t)),this._defaultNodeLabelFn=t,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return i.keys(this._nodes)},o.prototype.sources=function(){var t=this;return i.filter(this.nodes(),(function(e){return i.isEmpty(t._in[e])}))},o.prototype.sinks=function(){var t=this;return i.filter(this.nodes(),(function(e){return i.isEmpty(t._out[e])}))},o.prototype.setNodes=function(t,e){var r=arguments,n=this;return i.each(t,(function(t){r.length>1?n.setNode(t,e):n.setNode(t)})),this},o.prototype.setNode=function(t,e){return i.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\0",this._children[t]={},this._children["\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},o.prototype.node=function(t){return this._nodes[t]},o.prototype.hasNode=function(t){return i.has(this._nodes,t)},o.prototype.removeNode=function(t){var e=this;if(i.has(this._nodes,t)){var r=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],i.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),i.each(i.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],i.each(i.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},o.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(i.isUndefined(e))e="\0";else{for(var r=e+="";!i.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},o.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},o.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\0"!==e)return e}},o.prototype.children=function(t){if(i.isUndefined(t)&&(t="\0"),this._isCompound){var e=this._children[t];if(e)return i.keys(e)}else{if("\0"===t)return this.nodes();if(this.hasNode(t))return[]}},o.prototype.predecessors=function(t){var e=this._preds[t];if(e)return i.keys(e)},o.prototype.successors=function(t){var e=this._sucs[t];if(e)return i.keys(e)},o.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return i.union(e,this.successors(t))},o.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},o.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;i.each(this._nodes,(function(r,n){t(n)&&e.setNode(n,r)})),i.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,r.edge(t))}));var n={};return this._isCompound&&i.each(e.nodes(),(function(t){e.setParent(t,function t(i){var o=r.parent(i);return void 0===o||e.hasNode(o)?(n[i]=o,o):o in n?n[o]:t(o)}(t))})),e},o.prototype.setDefaultEdgeLabel=function(t){return i.isFunction(t)||(t=i.constant(t)),this._defaultEdgeLabelFn=t,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return i.values(this._edgeObjs)},o.prototype.setPath=function(t,e){var r=this,n=arguments;return i.reduce(t,(function(t,i){return n.length>1?r.setEdge(t,i,e):r.setEdge(t,i),i})),this},o.prototype.setEdge=function(){var t,e,r,o,s=!1,h=arguments[0];"object"===n(h)&&null!==h&&"v"in h?(t=h.v,e=h.w,r=h.name,2===arguments.length&&(o=arguments[1],s=!0)):(t=h,e=arguments[1],r=arguments[3],arguments.length>2&&(o=arguments[2],s=!0)),t=""+t,e=""+e,i.isUndefined(r)||(r=""+r);var f=u(this._isDirected,t,e,r);if(i.has(this._edgeLabels,f))return s&&(this._edgeLabels[f]=o),this;if(!i.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[f]=s?o:this._defaultEdgeLabelFn(t,e,r);var l=c(this._isDirected,t,e,r);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[f]=l,a(this._preds[e],t),a(this._sucs[t],e),this._in[e][f]=l,this._out[t][f]=l,this._edgeCount++,this},o.prototype.edge=function(t,e,r){var n=1===arguments.length?h(this._isDirected,arguments[0]):u(this._isDirected,t,e,r);return this._edgeLabels[n]},o.prototype.hasEdge=function(t,e,r){var n=1===arguments.length?h(this._isDirected,arguments[0]):u(this._isDirected,t,e,r);return i.has(this._edgeLabels,n)},o.prototype.removeEdge=function(t,e,r){var n=1===arguments.length?h(this._isDirected,arguments[0]):u(this._isDirected,t,e,r),i=this._edgeObjs[n];return i&&(t=i.v,e=i.w,delete this._edgeLabels[n],delete this._edgeObjs[n],s(this._preds[e],t),s(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},o.prototype.inEdges=function(t,e){var r=this._in[t];if(r){var n=i.values(r);return e?i.filter(n,(function(t){return t.v===e})):n}},o.prototype.outEdges=function(t,e){var r=this._out[t];if(r){var n=i.values(r);return e?i.filter(n,(function(t){return t.w===e})):n}},o.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))}},function(t,e,r){var n=r(44)(r(31),"Map");t.exports=n},function(t,e,r){var n=r(391),i=r(398),o=r(400),a=r(401),s=r(402);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,r){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(174),o="object"==n(e)&&e&&!e.nodeType&&e,a=o&&"object"==n(t)&&t&&!t.nodeType&&t,s=a&&a.exports===o&&i.process,u=function(){try{var t=a&&a.require&&a.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(t){}}();t.exports=u}).call(this,r(115)(t))},function(t,e,r){var n=r(85),i=r(408),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return i(t);var e=[];for(var r in Object(t))o.call(t,r)&&"constructor"!=r&&e.push(r);return e}},function(t,e,r){var n=r(181),i=r(182),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),n(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},function(t,e){t.exports=function(t,e){for(var r=-1,n=e.length,i=t.length;++r<n;)t[i+r]=e[r];return t}},function(t,e,r){var n=r(187);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,r){var n=r(124),i=r(41);t.exports=function(t,e){return t&&n(t,e,i)}},function(t,e,r){var n=r(427)();t.exports=n},function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(15),o=r(55),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var r=n(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!o(t))||(s.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,r){var n=r(120),i=r(461);t.exports=function t(e,r,o,a,s){var u=-1,c=e.length;for(o||(o=i),s||(s=[]);++u<c;){var h=e[u];r>0&&o(h)?r>1?t(h,r-1,o,a,s):n(s,h):a||(s[s.length]=h)}return s}},function(t,e,r){var n=r(55);t.exports=function(t,e,r){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(void 0===u?s==s&&!n(s):r(s,u)))var u=s,c=a}return c}},function(t,e,r){var n=r(227),i=["LR","RL","TB","BT","H","V"],o=["LR","RL","H"],a=i[0];t.exports=function(t,e,r){var s=e.direction||a;if(e.isHorizontal=function(t){return o.indexOf(t)>-1}(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])r(t,e);else if(s===i[1])r(t,e),t.right2left();else if(s===i[2])r(t,e);else if(s===i[3])r(t,e),t.bottom2top();else if(s===i[4]||s===i[5]){var u=n(t,e),c=u.left,h=u.right;r(c,e),r(h,e),e.isHorizontal?c.right2left():c.bottom2top(),h.translate(c.x-h.x,c.y-h.y),t.x=c.x,t.y=h.y;var f=t.getBoundingBox();e.isHorizontal?f.top<0&&t.translate(0,-f.top):f.left<0&&t.translate(-f.left,0)}var l=e.fixedRoot;return void 0===l&&(l=!0),l&&t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3);e.default=function(t,e,r){for(var i=0,o=n.default(e)?e.split("."):e;t&&i<o.length;)t=t[o[i++]];return void 0===t||i<o.length?r:t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=o,e.fromValues=a,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},e.subtract=s,e.multiply=u,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},e.distance=h,e.squaredDistance=f,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=d,e.dot=p,e.cross=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[0],s=r[1],u=r[2];return t[0]=i*u-o*s,t[1]=o*a-n*u,t[2]=n*s-i*a,t},e.lerp=function(t,e,r,n){var i=e[0],o=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=o+n*(r[1]-o),t[2]=a+n*(r[2]-a),t},e.hermite=function(t,e,r,n,i,o){var a=o*o,s=a*(2*o-3)+1,u=a*(o-2)+o,c=a*(o-1),h=a*(3-2*o);return t[0]=e[0]*s+r[0]*u+n[0]*c+i[0]*h,t[1]=e[1]*s+r[1]*u+n[1]*c+i[1]*h,t[2]=e[2]*s+r[2]*u+n[2]*c+i[2]*h,t},e.bezier=function(t,e,r,n,i,o){var a=1-o,s=a*a,u=o*o,c=s*a,h=3*o*s,f=3*u*a,l=u*o;return t[0]=e[0]*c+r[0]*h+n[0]*f+i[0]*l,t[1]=e[1]*c+r[1]*h+n[1]*f+i[1]*l,t[2]=e[2]*c+r[2]*h+n[2]*f+i[2]*l,t},e.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,i=2*n.RANDOM()-1,o=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(r)*o,t[1]=Math.sin(r)*o,t[2]=i*e,t},e.transformMat4=function(t,e,r){var n=e[0],i=e[1],o=e[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,t},e.transformMat3=function(t,e,r){var n=e[0],i=e[1],o=e[2];return t[0]=n*r[0]+i*r[3]+o*r[6],t[1]=n*r[1]+i*r[4]+o*r[7],t[2]=n*r[2]+i*r[5]+o*r[8],t},e.transformQuat=function(t,e,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=e[0],u=e[1],c=e[2],h=i*c-o*u,f=o*s-n*c,l=n*u-i*s,d=i*l-o*f,p=o*h-n*l,g=n*f-i*h,v=2*a;return h*=v,f*=v,l*=v,d*=2,p*=2,g*=2,t[0]=s+h+d,t[1]=u+f+p,t[2]=c+l+g,t},e.rotateX=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateY=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.rotateZ=function(t,e,r,n){var i=[],o=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],t[0]=o[0]+r[0],t[1]=o[1]+r[1],t[2]=o[2]+r[2],t},e.angle=function(t,e){var r=a(t[0],t[1],t[2]),n=a(e[0],e[1],e[2]);d(r,r),d(n,n);var i=p(r,n);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1],u=e[2];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-s)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(104));function i(){var t=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function a(t,e,r){var i=new n.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=r,i}function s(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function u(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function c(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function h(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(r*r+n*n+i*i)}function f(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function l(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function d(t,e){var r=e[0],n=e[1],i=e[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}var g;e.sub=s,e.mul=u,e.div=c,e.dist=h,e.sqrDist=f,e.len=o,e.sqrLen=l,e.forEach=(g=i(),function(t,e,r,n,i,o){var a=void 0,s=void 0;for(e||(e=3),r||(r=0),s=n?Math.min(n*e+r,t.length):t.length,a=r;a<s;a+=e)g[0]=t[a],g[1]=t[a+1],g[2]=t[a+2],i(g,g,o),t[a]=g[0],t[a+1]=g[1],t[a+2]=g[2];return t})},function(t,e,r){"use strict";r.r(e),function(t){r.d(e,"BrowserInfo",(function(){return i})),r.d(e,"NodeInfo",(function(){return o})),r.d(e,"SearchBotDeviceInfo",(function(){return a})),r.d(e,"BotInfo",(function(){return s})),r.d(e,"ReactNativeInfo",(function(){return u})),r.d(e,"detect",(function(){return l})),r.d(e,"browserName",(function(){return p})),r.d(e,"parseUserAgent",(function(){return g})),r.d(e,"detectOS",(function(){return v})),r.d(e,"getNodeVersion",(function(){return y}));var n=function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)n[i]=o[a];return n},i=function(t,e,r){this.name=t,this.version=e,this.os=r,this.type="browser"},o=function(e){this.version=e,this.type="node",this.name="node",this.os=t.platform},a=function(t,e,r,n){this.name=t,this.version=e,this.os=r,this.bot=n,this.type="bot-device"},s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},u=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},c=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,h=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],f=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function l(t){return t?g(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new u:"undefined"!=typeof navigator?g(navigator.userAgent):y()}function d(t){return""!==t&&h.reduce((function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]}),!1)}function p(t){var e=d(t);return e?e[0]:null}function g(t){var e=d(t);if(!e)return null;var r=e[0],o=e[1];if("searchbot"===r)return new s;var u=o[1]&&o[1].split(/[._]/).slice(0,3);u?u.length<3&&(u=n(u,function(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}(3-u.length))):u=[];var h=u.join("."),f=v(t),l=c.exec(t);return l&&l[1]?new a(r,h,f,l[1]):new i(r,h,f)}function v(t){for(var e=0,r=f.length;e<r;e++){var n=f[e],i=n[0];if(n[1].exec(t))return i}return null}function y(){return void 0!==t&&t.version?new o(t.version.slice(1)):null}}.call(this,r(152))},function(t,e,r){"use strict";r.r(e),r.d(e,"mat3",(function(){return n})),r.d(e,"vec2",(function(){return L})),r.d(e,"vec3",(function(){return z})),r.d(e,"ext",(function(){return i}));var n={};r.r(n),r.d(n,"create",(function(){return a})),r.d(n,"fromMat4",(function(){return s})),r.d(n,"clone",(function(){return u})),r.d(n,"copy",(function(){return c})),r.d(n,"fromValues",(function(){return h})),r.d(n,"set",(function(){return f})),r.d(n,"identity",(function(){return l})),r.d(n,"transpose",(function(){return d})),r.d(n,"invert",(function(){return p})),r.d(n,"adjoint",(function(){return g})),r.d(n,"determinant",(function(){return v})),r.d(n,"multiply",(function(){return y})),r.d(n,"translate",(function(){return m})),r.d(n,"rotate",(function(){return b})),r.d(n,"scale",(function(){return x})),r.d(n,"fromTranslation",(function(){return w})),r.d(n,"fromRotation",(function(){return M})),r.d(n,"fromScaling",(function(){return S})),r.d(n,"fromMat2d",(function(){return _})),r.d(n,"fromQuat",(function(){return k})),r.d(n,"normalFromMat4",(function(){return O})),r.d(n,"projection",(function(){return E})),r.d(n,"str",(function(){return j})),r.d(n,"frob",(function(){return C})),r.d(n,"add",(function(){return A})),r.d(n,"subtract",(function(){return P})),r.d(n,"multiplyScalar",(function(){return I})),r.d(n,"multiplyScalarAndAdd",(function(){return T})),r.d(n,"exactEquals",(function(){return N})),r.d(n,"equals",(function(){return D})),r.d(n,"mul",(function(){return B})),r.d(n,"sub",(function(){return R}));var i={};r.r(i),r.d(i,"leftTranslate",(function(){return F})),r.d(i,"leftRotate",(function(){return Y})),r.d(i,"leftScale",(function(){return G})),r.d(i,"transform",(function(){return q})),r.d(i,"direction",(function(){return X})),r.d(i,"angleTo",(function(){return V})),r.d(i,"vertical",(function(){return H}));var o=r(6);function a(){var t=new o.a(9);return o.a!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function u(t){var e=new o.a(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function c(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function h(t,e,r,n,i,a,s,u,c){var h=new o.a(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=i,h[5]=a,h[6]=s,h[7]=u,h[8]=c,h}function f(t,e,r,n,i,o,a,s,u,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=o,t[5]=a,t[6]=s,t[7]=u,t[8]=c,t}function l(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function d(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function p(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=h*a-s*c,l=-h*o+s*u,d=c*o-a*u,p=r*f+n*l+i*d;return p?(p=1/p,t[0]=f*p,t[1]=(-h*n+i*c)*p,t[2]=(s*n-i*a)*p,t[3]=l*p,t[4]=(h*r-i*u)*p,t[5]=(-s*r+i*o)*p,t[6]=d*p,t[7]=(-c*r+n*u)*p,t[8]=(a*r-n*o)*p,t):null}function g(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8];return t[0]=a*h-s*c,t[1]=i*c-n*h,t[2]=n*s-i*a,t[3]=s*u-o*h,t[4]=r*h-i*u,t[5]=i*o-r*s,t[6]=o*c-a*u,t[7]=n*u-r*c,t[8]=r*a-n*o,t}function v(t){var e=t[0],r=t[1],n=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],c=t[8];return e*(c*o-a*u)+r*(-c*i+a*s)+n*(u*i-o*s)}function y(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=r[0],d=r[1],p=r[2],g=r[3],v=r[4],y=r[5],m=r[6],b=r[7],x=r[8];return t[0]=l*n+d*a+p*c,t[1]=l*i+d*s+p*h,t[2]=l*o+d*u+p*f,t[3]=g*n+v*a+y*c,t[4]=g*i+v*s+y*h,t[5]=g*o+v*u+y*f,t[6]=m*n+b*a+x*c,t[7]=m*i+b*s+x*h,t[8]=m*o+b*u+x*f,t}function m(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=r[0],d=r[1];return t[0]=n,t[1]=i,t[2]=o,t[3]=a,t[4]=s,t[5]=u,t[6]=l*n+d*a+c,t[7]=l*i+d*s+h,t[8]=l*o+d*u+f,t}function b(t,e,r){var n=e[0],i=e[1],o=e[2],a=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=Math.sin(r),d=Math.cos(r);return t[0]=d*n+l*a,t[1]=d*i+l*s,t[2]=d*o+l*u,t[3]=d*a-l*n,t[4]=d*s-l*i,t[5]=d*u-l*o,t[6]=c,t[7]=h,t[8]=f,t}function x(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function w(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function M(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function S(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function _(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function k(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=r+r,s=n+n,u=i+i,c=r*a,h=n*a,f=n*s,l=i*a,d=i*s,p=i*u,g=o*a,v=o*s,y=o*u;return t[0]=1-f-p,t[3]=h-y,t[6]=l+v,t[1]=h+y,t[4]=1-c-p,t[7]=d-g,t[2]=l-v,t[5]=d+g,t[8]=1-c-f,t}function O(t,e){var r=e[0],n=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],d=e[11],p=e[12],g=e[13],v=e[14],y=e[15],m=r*s-n*a,b=r*u-i*a,x=r*c-o*a,w=n*u-i*s,M=n*c-o*s,S=i*c-o*u,_=h*g-f*p,k=h*v-l*p,O=h*y-d*p,E=f*v-l*g,j=f*y-d*g,C=l*y-d*v,A=m*C-b*j+x*E+w*O-M*k+S*_;return A?(A=1/A,t[0]=(s*C-u*j+c*E)*A,t[1]=(u*O-a*C-c*k)*A,t[2]=(a*j-s*O+c*_)*A,t[3]=(i*j-n*C-o*E)*A,t[4]=(r*C-i*O+o*k)*A,t[5]=(n*O-r*j-o*_)*A,t[6]=(g*S-v*M+y*w)*A,t[7]=(v*x-p*S-y*b)*A,t[8]=(p*M-g*x+y*m)*A,t):null}function E(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function j(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function C(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function A(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function P(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function I(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function T(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function N(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function D(t,e){var r=t[0],n=t[1],i=t[2],a=t[3],s=t[4],u=t[5],c=t[6],h=t[7],f=t[8],l=e[0],d=e[1],p=e[2],g=e[3],v=e[4],y=e[5],m=e[6],b=e[7],x=e[8];return Math.abs(r-l)<=o.b*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-d)<=o.b*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(i-p)<=o.b*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-g)<=o.b*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(s-v)<=o.b*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-y)<=o.b*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(c-m)<=o.b*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(h-b)<=o.b*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(f-x)<=o.b*Math.max(1,Math.abs(f),Math.abs(x))}var B=y,R=P,L=r(105),z=r(106);function F(t,e,r){var i=[0,0,0,0,0,0,0,0,0];return n.fromTranslation(i,r),n.multiply(t,i,e)}function Y(t,e,r){var i=[0,0,0,0,0,0,0,0,0];return n.fromRotation(i,r),n.multiply(t,i,e)}function G(t,e,r){var i=[0,0,0,0,0,0,0,0,0];return n.fromScaling(i,r),n.multiply(t,i,e)}function q(t,e){for(var r,i,o,a=t?[].concat(t):[1,0,0,0,1,0,0,0,1],s=0,u=e.length;s<u;s++){var c=e[s];switch(c[0]){case"t":F(a,a,[c[1],c[2]]);break;case"s":G(a,a,[c[1],c[2]]);break;case"r":Y(a,a,c[1]);break;case"m":r=a,i=a,o=c[1],n.multiply(r,o,i)}}return a}function X(t,e){return t[0]*e[1]-e[0]*t[1]}function V(t,e,r){var n=L.angle(t,e),i=X(t,e)>=0;return r?i?2*Math.PI-n:n:i?n:2*Math.PI-n}function H(t,e,r){return r?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t}},function(t,e,r){t.exports={graphlib:r(30),layout:r(485),debug:r(544),util:{time:r(20).time,notime:r(20).notime},version:r(545)}},function(t,e,r){var n={compactBox:r(546),dendrogram:r(548),indented:r(550),mindmap:r(552)};t.exports=n},function(t,e,r){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},o=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(u(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(t).replace(o,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}})),s=n[r];r<i;s=n[++r])v(s)||!w(s)?a+=" "+s:a+=" "+u(s);return a},e.deprecate=function(r,n){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,n).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),i=!0}return r.apply(this,arguments)}};var a,s={};function u(t,r){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(r)?n.showHidden=r:r&&e._extend(n,r),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),f(n,t,n.depth)}function c(t,e){var r=u.styles[e];return r?"["+u.colors[r][0]+"m"+t+"["+u.colors[r][1]+"m":t}function h(t,e){return t}function f(t,r,n){if(t.customInspect&&r&&_(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var i=r.inspect(n,t);return m(i)||(i=f(t,i,n)),i}var o=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(y(e))return t.stylize(""+e,"number");if(g(e))return t.stylize(""+e,"boolean");if(v(e))return t.stylize("null","null")}(t,r);if(o)return o;var a=Object.keys(r),s=function(t){var e={};return t.forEach((function(t,r){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),S(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return l(r);if(0===a.length){if(_(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(x(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if(M(r))return t.stylize(Date.prototype.toString.call(r),"date");if(S(r))return l(r)}var c,h="",w=!1,k=["{","}"];(p(r)&&(w=!0,k=["[","]"]),_(r))&&(h=" [Function"+(r.name?": "+r.name:"")+"]");return x(r)&&(h=" "+RegExp.prototype.toString.call(r)),M(r)&&(h=" "+Date.prototype.toUTCString.call(r)),S(r)&&(h=" "+l(r)),0!==a.length||w&&0!=r.length?n<0?x(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=w?function(t,e,r,n,i){for(var o=[],a=0,s=e.length;a<s;++a)C(e,String(a))?o.push(d(t,e,r,n,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(d(t,e,r,n,i,!0))})),o}(t,r,n,s,a):a.map((function(e){return d(t,r,n,s,e,w)})),t.seen.pop(),function(t,e,r){if(t.reduce((function(t,e){return e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(c,h,k)):k[0]+h+k[1]}function l(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,r,n,i,o){var a,s,u;if((u=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(s=t.stylize("[Setter]","special")),C(n,i)||(a="["+i+"]"),s||(t.seen.indexOf(u.value)<0?(s=v(r)?f(t,u.value,null):f(t,u.value,r-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function p(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function v(t){return null===t}function y(t){return"number"==typeof t}function m(t){return"string"==typeof t}function b(t){return void 0===t}function x(t){return w(t)&&"[object RegExp]"===k(t)}function w(t){return"object"===n(t)&&null!==t}function M(t){return w(t)&&"[object Date]"===k(t)}function S(t){return w(t)&&("[object Error]"===k(t)||t instanceof Error)}function _(t){return"function"==typeof t}function k(t){return Object.prototype.toString.call(t)}function O(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(b(a)&&(a=t.env.NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(a)){var n=t.pid;s[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else s[r]=function(){};return s[r]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=p,e.isBoolean=g,e.isNull=v,e.isNullOrUndefined=function(t){return null==t},e.isNumber=y,e.isString=m,e.isSymbol=function(t){return"symbol"===n(t)},e.isUndefined=b,e.isRegExp=x,e.isObject=w,e.isDate=M,e.isError=S,e.isFunction=_,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===n(t)||void 0===t},e.isBuffer=r(554);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function j(){var t=new Date,e=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":");return[t.getDate(),E[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",j(),e.format.apply(e,arguments))},e.inherits=r(555),e._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var A="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function P(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(A&&t[A]){var e;if("function"!=typeof(e=t[A]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise((function(t,n){e=t,r=n})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,n){t?r(t):e(n)}));try{t.apply(this,i)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),A&&Object.defineProperty(e,A,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,i(t))},e.promisify.custom=A,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var i=r.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,r).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(P,e,a)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,i(e)),r}}).call(this,r(152))},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21);e.default=function(t,e){if(!n.default(t))return t;for(var r=[],i=0;i<t.length;i++){var o=t[i];e(o,i)&&r.push(o)}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),i=r(139);e.default=function(t,e){var r=i.default(e),o=r.length;if(n.default(t))return!o;for(var a=0;a<o;a+=1){var s=r[a];if(e[s]!==t[s]||!(s in t))return!1}return!0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(14),o=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return n.default(t,(function(r,n){i.default(t)&&"prototype"===n||e.push(n)})),e};e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21),i=Array.prototype.splice;e.default=function(t,e){if(!n.default(t))return[];for(var r=t?e.length:0,o=r-1;r--;){var a=void 0,s=e[r];r!==o&&s===a||(a=s,i.call(t,s,1))}return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(72),i=r(2);e.default=function(t){var e=[];return i.default(t,(function(t){n.default(e,t)||e.push(t)})),e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(14),o=r(69);e.default=function(t,e){if(!e)return{0:t};if(!i.default(e)){var r=n.default(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",n=0,i=r.length;n<i;n++)e+=t[r[n]]&&t[r[n]].toString();return e}}return o.default(t,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.hasOwnProperty(e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(14),o=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return n.default(t,(function(r,n){i.default(t)&&"prototype"===n||e.push(r)})),e};e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={}.toString;e.default=function(t){return n.call(t).replace(/^\[object /,"").replace(/]$/,"")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.prototype;e.default=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout)(t)}},function(t,e,r){var n=r(316),i={};for(var o in n)n.hasOwnProperty(o)&&(i[n[o]]=o);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var u=a[s].channels,c=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:u}),Object.defineProperty(a[s],"labels",{value:c})}a.rgb.hsl=function(t){var e,r,n=t[0]/255,i=t[1]/255,o=t[2]/255,a=Math.min(n,i,o),s=Math.max(n,i,o),u=s-a;return s===a?e=0:n===s?e=(i-o)/u:i===s?e=2+(o-n)/u:o===s&&(e=4+(n-i)/u),(e=Math.min(60*e,360))<0&&(e+=360),r=(a+s)/2,[e,100*(s===a?0:r<=.5?u/(s+a):u/(2-s-a)),100*r]},a.rgb.hsv=function(t){var e,r,n,i,o,a=t[0]/255,s=t[1]/255,u=t[2]/255,c=Math.max(a,s,u),h=c-Math.min(a,s,u),f=function(t){return(c-t)/6/h+.5};return 0===h?i=o=0:(o=h/c,e=f(a),r=f(s),n=f(u),a===c?i=n-r:s===c?i=1/3+e-n:u===c&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[360*i,100*o,100*c]},a.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2];return[a.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(r,n))),100*(n=1-1/255*Math.max(e,Math.max(r,n)))]},a.rgb.cmyk=function(t){var e,r=t[0]/255,n=t[1]/255,i=t[2]/255;return[100*((1-r-(e=Math.min(1-r,1-n,1-i)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-i-e)/(1-e)||0),100*e]},a.rgb.keyword=function(t){var e=i[t];if(e)return e;var r,o,a,s=1/0;for(var u in n)if(n.hasOwnProperty(u)){var c=n[u],h=(o=t,a=c,Math.pow(o[0]-a[0],2)+Math.pow(o[1]-a[1],2)+Math.pow(o[2]-a[2],2));h<s&&(s=h,r=u)}return r},a.keyword.rgb=function(t){return n[t]},a.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*r+.0722*n),100*(.0193*e+.1192*r+.9505*n)]},a.rgb.lab=function(t){var e=a.rgb.xyz(t),r=e[0],n=e[1],i=e[2];return n/=100,i/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))]},a.hsl.rgb=function(t){var e,r,n,i,o,a=t[0]/360,s=t[1]/100,u=t[2]/100;if(0===s)return[o=255*u,o,o];e=2*u-(r=u<.5?u*(1+s):u+s-u*s),i=[0,0,0];for(var c=0;c<3;c++)(n=a+1/3*-(c-1))<0&&n++,n>1&&n--,o=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,i[c]=255*o;return i},a.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=r,o=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,i*=o<=1?o:2-o,[e,100*(0===n?2*i/(o+i):2*r/(n+r)),100*((n+r)/2)]},a.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,o=e-Math.floor(e),a=255*n*(1-r),s=255*n*(1-r*o),u=255*n*(1-r*(1-o));switch(n*=255,i){case 0:return[n,u,a];case 1:return[s,n,a];case 2:return[a,n,u];case 3:return[a,s,n];case 4:return[u,a,n];case 5:return[n,a,s]}},a.hsv.hsl=function(t){var e,r,n,i=t[0],o=t[1]/100,a=t[2]/100,s=Math.max(a,.01);return n=(2-o)*a,r=o*s,[i,100*(r=(r/=(e=(2-o)*s)<=1?e:2-e)||0),100*(n/=2)]},a.hwb.rgb=function(t){var e,r,n,i,o,a,s,u=t[0]/360,c=t[1]/100,h=t[2]/100,f=c+h;switch(f>1&&(c/=f,h/=f),n=6*u-(e=Math.floor(6*u)),0!=(1&e)&&(n=1-n),i=c+n*((r=1-h)-c),e){default:case 6:case 0:o=r,a=i,s=c;break;case 1:o=i,a=r,s=c;break;case 2:o=c,a=r,s=i;break;case 3:o=c,a=i,s=r;break;case 4:o=i,a=c,s=r;break;case 5:o=r,a=c,s=i}return[255*o,255*a,255*s]},a.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100;return[255*(1-Math.min(1,e*(1-i)+i)),255*(1-Math.min(1,r*(1-i)+i)),255*(1-Math.min(1,n*(1-i)+i))]},a.xyz.rgb=function(t){var e,r,n,i=t[0]/100,o=t[1]/100,a=t[2]/100;return r=-.9689*i+1.8758*o+.0415*a,n=.0557*i+-.204*o+1.057*a,e=(e=3.2406*i+-1.5372*o+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},a.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2];return r/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(e-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},a.lab.xyz=function(t){var e,r,n,i=t[0];e=t[1]/500+(r=(i+16)/116),n=r-t[2]/200;var o=Math.pow(r,3),a=Math.pow(e,3),s=Math.pow(n,3);return r=o>.008856?o:(r-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,[e*=95.047,r*=100,n*=108.883]},a.lab.lch=function(t){var e,r=t[0],n=t[1],i=t[2];return(e=360*Math.atan2(i,n)/2/Math.PI)<0&&(e+=360),[r,Math.sqrt(n*n+i*i),e]},a.lch.lab=function(t){var e,r=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[r,n*Math.cos(e),n*Math.sin(e)]},a.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],i=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(0===(i=Math.round(i/50)))return 30;var o=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return 2===i&&(o+=60),o},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var r=.5*(1+~~(t>50));return[(1&e)*r*255,(e>>1&1)*r*255,(e>>2&1)*r*255]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var r;return t-=16,[Math.floor(t/36)/5*255,Math.floor((r=t%36)/6)/5*255,r%6/5*255]},a.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];3===e[0].length&&(r=r.split("").map((function(t){return t+t})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},a.rgb.hcg=function(t){var e,r=t[0]/255,n=t[1]/255,i=t[2]/255,o=Math.max(Math.max(r,n),i),a=Math.min(Math.min(r,n),i),s=o-a;return e=s<=0?0:o===r?(n-i)/s%6:o===n?2+(i-r)/s:4+(r-n)/s+4,e/=6,[360*(e%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,i=0;return(n=r<.5?2*e*r:2*e*(1-r))<1&&(i=(r-.5*n)/(1-n)),[t[0],100*n,100*i]},a.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],100*n,100*i]},a.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(0===r)return[255*n,255*n,255*n];var i,o=[0,0,0],a=e%1*6,s=a%1,u=1-s;switch(Math.floor(a)){case 0:o[0]=1,o[1]=s,o[2]=0;break;case 1:o[0]=u,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=s;break;case 3:o[0]=0,o[1]=u,o[2]=1;break;case 4:o[0]=s,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=u}return i=(1-r)*n,[255*(r*o[0]+i),255*(r*o[1]+i),255*(r*o[2]+i)]},a.hcg.hsv=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e),n=0;return r>0&&(n=e/r),[t[0],100*n,100*r]},a.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100*(1-e)+.5*e,n=0;return r>0&&r<.5?n=e/(2*r):r>=.5&&r<1&&(n=e/(2*(1-r))),[t[0],100*n,100*r]},a.hcg.hwb=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e);return[t[0],100*(r-e),100*(1-r)]},a.hwb.hcg=function(t){var e=t[1]/100,r=1-t[2]/100,n=r-e,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],100*n,100*i]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r},a.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},function(t,e){},function(t,e){},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,c=[],h=!1,f=-1;function l(){h&&u&&(h=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!h){var t=s(l);h=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,h=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||h||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";var n=r(1),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(n.__extends)(e,t),e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var e=t.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var i=r[n];e.add(i.clone())}return e},e}(r(100).a);e.a=i},function(t,e,r){"use strict";var n=r(1),i=r(101),o=r(32),a=function(t){function e(e){return t.call(this,e)||this}return Object(n.__extends)(e,t),e.prototype._isInBBox=function(t,e){var r=this.getBBox();return r.minX<=t&&r.maxX>=t&&r.minY<=e&&r.maxY>=e},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(e){t.prototype.applyMatrix.call(this,e),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),e=this.getTotalMatrix(),r=t.minX,n=t.minY,i=t.maxX,a=t.maxY;if(e){var s=Object(o.c)(e,[t.minX,t.minY]),u=Object(o.c)(e,[t.maxX,t.minY]),c=Object(o.c)(e,[t.minX,t.maxY]),h=Object(o.c)(e,[t.maxX,t.maxY]);r=Math.min(s[0],u[0],c[0],h[0]),i=Math.max(s[0],u[0],c[0],h[0]),n=Math.min(s[1],u[1],c[1],h[1]),a=Math.max(s[1],u[1],c[1],h[1])}var f=this.attrs;if(f.shadowColor){var l=f.shadowBlur,d=void 0===l?0:l,p=f.shadowOffsetX,g=void 0===p?0:p,v=f.shadowOffsetY,y=void 0===v?0:v,m=r-d+g,b=i+d+g,x=n-d+y,w=a+d+y;r=Math.min(r,m),i=Math.max(i,b),n=Math.min(n,x),a=Math.max(a,w)}return{x:r,y:n,minX:r,minY:n,maxX:i,maxY:a,width:i-r,height:a-n}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,e){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,e){var r=this.get("startArrowShape"),n=this.get("endArrowShape"),i=[t,e,1],o=(i=this.invertFromMatrix(i))[0],a=i[1],s=this._isInBBox(o,a);if(this.isOnlyHitBox())return s;if(s&&!this.isClipped(o,a)){if(this.isInShape(o,a))return!0;if(r&&r.isHit(o,a))return!0;if(n&&n.isHit(o,a))return!0}return!1},e}(i.a);e.a=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAllowCapture=e.isParent=e.isBrowser=e.removeFromArray=void 0,e.removeFromArray=function(t,e){var r=t.indexOf(e);-1!==r&&t.splice(r,1)},e.isBrowser="undefined"!=typeof window&&void 0!==window.document;var n=r(10);Object.defineProperty(e,"isNil",{enumerable:!0,get:function(){return n.default}});var i=r(14);Object.defineProperty(e,"isFunction",{enumerable:!0,get:function(){return i.default}});var o=r(3);Object.defineProperty(e,"isString",{enumerable:!0,get:function(){return o.default}});var a=r(35);Object.defineProperty(e,"isObject",{enumerable:!0,get:function(){return a.default}});var s=r(4);Object.defineProperty(e,"isArray",{enumerable:!0,get:function(){return s.default}});var u=r(17);Object.defineProperty(e,"mix",{enumerable:!0,get:function(){return u.default}});var c=r(2);Object.defineProperty(e,"each",{enumerable:!0,get:function(){return c.default}});var h=r(49);Object.defineProperty(e,"upperFirst",{enumerable:!0,get:function(){return h.default}}),e.isParent=function(t,e){if(t.isCanvas())return!0;for(var r=e.getParent(),n=!1;r;){if(r===t){n=!0;break}r=r.getParent()}return n},e.isAllowCapture=function(t){return t.cfg.visible&&t.cfg.capture}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseRadius=e.parseStyle=e.parsePattern=e.parseRadialGradient=e.parseLineGradient=void 0;var n=r(18),i=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,o=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,a=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,s=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function u(t,e){var r=t.match(s);n.each(r,(function(t){var r=t.split(":");e.addColorStop(r[0],r[1])}))}function c(t,e,r){var n,o,a=i.exec(r),s=parseFloat(a[1])%360*(Math.PI/180),c=a[2],h=e.getBBox();s>=0&&s<.5*Math.PI?(n={x:h.minX,y:h.minY},o={x:h.maxX,y:h.maxY}):.5*Math.PI<=s&&s<Math.PI?(n={x:h.maxX,y:h.minY},o={x:h.minX,y:h.maxY}):Math.PI<=s&&s<1.5*Math.PI?(n={x:h.maxX,y:h.maxY},o={x:h.minX,y:h.minY}):(n={x:h.minX,y:h.maxY},o={x:h.maxX,y:h.minY});var f=Math.tan(s),l=f*f,d=(o.x-n.x+f*(o.y-n.y))/(l+1)+n.x,p=f*(o.x-n.x+f*(o.y-n.y))/(l+1)+n.y,g=t.createLinearGradient(n.x,n.y,d,p);return u(c,g),g}function h(t,e,r){var n=o.exec(r),i=parseFloat(n[1]),a=parseFloat(n[2]),c=parseFloat(n[3]),h=n[4];if(0===c){var f=h.match(s);return f[f.length-1].split(":")[1]}var l=e.getBBox(),d=l.maxX-l.minX,p=l.maxY-l.minY,g=Math.sqrt(d*d+p*p)/2,v=t.createRadialGradient(l.minX+d*i,l.minY+p*a,0,l.minX+d/2,l.minY+p/2,c*g);return u(h,v),v}function f(t,e,r){if(e.get("patternSource")&&e.get("patternSource")===r)return e.get("pattern");var n,i,o=a.exec(r),s=o[1],u=o[2];function c(){n=t.createPattern(i,s),e.set("pattern",n),e.set("patternSource",r)}switch(s){case"a":s="repeat";break;case"x":s="repeat-x";break;case"y":s="repeat-y";break;case"n":s="no-repeat";break;default:s="no-repeat"}return i=new Image,u.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=u,i.complete?c():(i.onload=c,i.src=i.src),n}e.parseLineGradient=c,e.parseRadialGradient=h,e.parsePattern=f,e.parseStyle=function(t,e,r){if(n.isString(r)){if("("===r[1]||"("===r[2]){if("l"===r[0])return c(t,e,r);if("r"===r[0])return h(t,e,r);if("p"===r[0])return f(t,e,r)}return r}},e.parseRadius=function(t){var e=0,r=0,i=0,o=0;return n.isArray(t)?1===t.length?e=r=i=o=t[0]:2===t.length?(e=i=t[0],r=o=t[1]):3===t.length?(e=t[0],r=o=t[1],i=t[2]):(e=t[0],r=t[1],i=t[2],o=t[3]):e=r=i=o=t,[e,r,i,o]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBBoxMethod=void 0;var n=r(322);Object.defineProperty(e,"getBBoxMethod",{enumerable:!0,get:function(){return n.getMethod}});var i=r(323),o=r(324),a=r(325),s=r(326),u=r(327),c=r(328),h=r(332),f=r(333);n.register("rect",i.default),n.register("image",i.default),n.register("circle",o.default),n.register("marker",o.default),n.register("polyline",a.default),n.register("polygon",s.default),n.register("text",u.default),n.register("path",c.default),n.register("line",h.default),n.register("ellipse",f.default)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assembleFont=e.getTextWidth=e.getLineSpaceing=e.getTextHeight=void 0;var n=r(155),i=r(159);function o(t,e){return e?e-t:.14*t}e.getTextHeight=function(t,e,r){var i=1;return n.isString(t)&&(i=t.split("\n").length),i>1?e*i+o(e,r)*(i-1):e},e.getLineSpaceing=o,e.getTextWidth=function(t,e){var r=i.getOffScreenContext(),o=0;if(n.isNil(t)||""===t)return o;if(r.save(),r.font=e,n.isString(t)&&t.includes("\n")){var a=t.split("\n");n.each(a,(function(t){var e=r.measureText(t).width;o<e&&(o=e)}))}else o=r.measureText(t).width;return r.restore(),o},e.assembleFont=function(t){var e=t.fontSize,r=t.fontFamily,n=t.fontWeight;return[t.fontStyle,t.fontVariant,n,e+"px",r].join(" ").trim()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getOffScreenContext=void 0;var n=null;e.getOffScreenContext=function(){if(!n){var t=document.createElement("canvas");t.width=1,t.height=1,n=t.getContext("2d")}return n}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(40),i=r(33),o=r(161);function a(t,e,r,n){var i=1-n;return i*i*t+2*n*i*e+n*n*r}function s(t,e,r){var n=t+r-2*e;if(i.isNumberEqual(n,0))return[.5];var o=(t-e)/n;return o<=1&&o>=0?[o]:[]}function u(t,e,r,n){return 2*(1-n)*(e-t)+2*n*(r-e)}function c(t,e,r,i,o,s,u){var c=a(t,r,o,u),h=a(e,i,s,u),f=n.default.pointAt(t,e,r,i,u),l=n.default.pointAt(r,i,o,s,u);return[[t,e,f.x,f.y,c,h],[c,h,l.x,l.y,o,s]]}e.default={box:function(t,e,r,n,o,u){var c=s(t,r,o)[0],h=s(e,n,u)[0],f=[t,o],l=[e,u];return void 0!==c&&f.push(a(t,r,o,c)),void 0!==h&&l.push(a(e,n,u,h)),i.getBBoxByArray(f,l)},length:function(t,e,r,n,o,a){return function t(e,r,n,o,a,s,u){if(0===u)return(i.distance(e,r,n,o)+i.distance(n,o,a,s)+i.distance(e,r,a,s))/2;var h=c(e,r,n,o,a,s,.5),f=h[0],l=h[1];return f.push(u-1),l.push(u-1),t.apply(null,f)+t.apply(null,l)}(t,e,r,n,o,a,3)},nearestPoint:function(t,e,r,n,i,s,u,c){return o.nearestPoint([t,r,i],[e,n,s],u,c,a)},pointDistance:function(t,e,r,n,o,a,s,u){var c=this.nearestPoint(t,e,r,n,o,a,s,u);return i.distance(c.x,c.y,s,u)},interpolationAt:a,pointAt:function(t,e,r,n,i,o,s){return{x:a(t,r,i,s),y:a(e,n,o,s)}},divide:function(t,e,r,n,i,o,a){return c(t,e,r,n,i,o,a)},tangentAngle:function(t,e,r,n,o,a,s){var c=u(t,r,o,s),h=u(e,n,a,s),f=Math.atan2(h,c);return i.piMod(f)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.snapLength=e.nearestPoint=void 0;var n=r(33);e.nearestPoint=function(t,e,r,i,o,a){var s,u=1/0,c=[r,i],h=20;a&&a>200&&(h=a/10);for(var f=1/h,l=f/10,d=0;d<=h;d++){var p=d*f,g=[o.apply(null,t.concat([p])),o.apply(null,e.concat([p]))];(b=n.distance(c[0],c[1],g[0],g[1]))<u&&(s=p,u=b)}if(0===s)return{x:t[0],y:e[0]};if(1===s){var v=t.length;return{x:t[v-1],y:e[v-1]}}for(u=1/0,d=0;d<32&&!(l<1e-4);d++){var y=s-l,m=s+l,b=(g=[o.apply(null,t.concat([y])),o.apply(null,e.concat([y]))],n.distance(c[0],c[1],g[0],g[1]));if(y>=0&&b<u)s=y,u=b;else{var x=[o.apply(null,t.concat([m])),o.apply(null,e.concat([m]))],w=n.distance(c[0],c[1],x[0],x[1]);m<=1&&w<u?(s=m,u=w):l*=.5}}return{x:o.apply(null,t.concat([s])),y:o.apply(null,e.concat([s]))}},e.snapLength=function(t,e){for(var r=0,i=t.length,o=0;o<i;o++){var a=t[o],s=e[o],u=t[(o+1)%i],c=e[(o+1)%i];r+=n.distance(a,s,u,c)}return r/2}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(163),i=r(163),o=r(331);function a(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}e.default=function(t){for(var e=[],r=null,s=null,u=null,c=0,h=(t=o.default(t)).length,f=0;f<h;f++){var l=t[f];s=t[f+1];var d=l[0],p={command:d,prePoint:r,params:l,startTangent:null,endTangent:null};switch(d){case"M":u=[l[1],l[2]],c=f;break;case"A":var g=n.default(r,l);p.arcParams=g}if("Z"===d)r=u,s=t[c+1];else{var v=l.length;r=[l[v-2],l[v-1]]}s&&"Z"===s[0]&&(s=t[c],e[c]&&(e[c].prePoint=r)),p.currentPoint=r,e[c]&&i.isSamePoint(r,e[c].currentPoint)&&(e[c].prePoint=p.prePoint);var y=s?[s[s.length-2],s[s.length-1]]:null;p.nextPoint=y;var m=p.prePoint;if(["L","H","V"].includes(d))p.startTangent=[m[0]-r[0],m[1]-r[1]],p.endTangent=[r[0]-m[0],r[1]-m[1]];else if("Q"===d){var b=[l[1],l[2]];p.startTangent=[m[0]-b[0],m[1]-b[1]],p.endTangent=[r[0]-b[0],r[1]-b[1]]}else if("T"===d){b=a((M=e[f-1]).currentPoint,m);"Q"===M.command?(p.command="Q",p.startTangent=[m[0]-b[0],m[1]-b[1]],p.endTangent=[r[0]-b[0],r[1]-b[1]]):(p.command="TL",p.startTangent=[m[0]-r[0],m[1]-r[1]],p.endTangent=[r[0]-m[0],r[1]-m[1]])}else if("C"===d){var x=[l[1],l[2]],w=[l[3],l[4]];p.startTangent=[m[0]-x[0],m[1]-x[1]],p.endTangent=[r[0]-w[0],r[1]-w[1]]}else if("S"===d){var M;x=a((M=e[f-1]).currentPoint,m),w=[l[1],l[2]];"C"===M.command?(p.command="C",p.startTangent=[m[0]-x[0],m[1]-x[1]],p.endTangent=[r[0]-w[0],r[1]-w[1]]):(p.command="SQ",p.startTangent=[m[0]-w[0],m[1]-w[1]],p.endTangent=[r[0]-w[0],r[1]-w[1]])}else if("A"===d){var S=.001,_=p.arcParams||{},k=_.cx,O=void 0===k?0:k,E=_.cy,j=void 0===E?0:E,C=_.rx,A=void 0===C?0:C,P=_.ry,I=void 0===P?0:P,T=_.sweepFlag,N=void 0===T?0:T,D=_.startAngle,B=void 0===D?0:D,R=_.endAngle,L=void 0===R?0:R;0===N&&(S*=-1);var z=A*Math.cos(B-S)+O,F=I*Math.sin(B-S)+j;p.startTangent=[z-u[0],F-u[1]];var Y=A*Math.cos(B+L+S)+O,G=I*Math.sin(B+L-S)+j;p.endTangent=[m[0]-Y,m[1]-G]}e.push(p)}return e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(67),i=r(68);function o(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function a(t,e){return o(t)*o(e)?(t[0]*e[0]+t[1]*e[1])/(o(t)*o(e)):1}function s(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(a(t,e))}function u(t,e){return t[0]===e[0]&&t[1]===e[1]}e.isSamePoint=u,e.default=function(t,e){var r=e[1],o=e[2],c=n.default(i.default(e[3]),2*Math.PI),h=e[4],f=e[5],l=t[0],d=t[1],p=e[6],g=e[7],v=Math.cos(c)*(l-p)/2+Math.sin(c)*(d-g)/2,y=-1*Math.sin(c)*(l-p)/2+Math.cos(c)*(d-g)/2,m=v*v/(r*r)+y*y/(o*o);m>1&&(r*=Math.sqrt(m),o*=Math.sqrt(m));var b=r*r*(y*y)+o*o*(v*v),x=b?Math.sqrt((r*r*(o*o)-b)/b):1;h===f&&(x*=-1),isNaN(x)&&(x=0);var w=o?x*r*y/o:0,M=r?x*-o*v/r:0,S=(l+p)/2+Math.cos(c)*w-Math.sin(c)*M,_=(d+g)/2+Math.sin(c)*w+Math.cos(c)*M,k=[(v-w)/r,(y-M)/o],O=[(-1*v-w)/r,(-1*y-M)/o],E=s([1,0],k),j=s(k,O);return a(k,O)<=-1&&(j=Math.PI),a(k,O)>=1&&(j=0),0===f&&j>0&&(j-=2*Math.PI),1===f&&j<0&&(j+=2*Math.PI),{cx:S,cy:_,rx:u(t,[p,g])?0:r,ry:u(t,[p,g])?0:o,startAngle:E,endAngle:E+j,xRotation:c,arcFlag:h,sweepFlag:f}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(43),o=r(73),a=r(60),s=r(0),u=r(18),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.onCanvasChange=function(t){a.refreshElement(this,t)},e.prototype.getShapeBase=function(){return o},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,e){e&&(t.save(),a.applyAttrsToContext(t,e),e.createPath(t),t.restore(),t.clip(),e._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,e=[],r=[];s.each(t,(function(t){var n=t.cfg.cacheCanvasBBox;n&&t.cfg.isInView&&(e.push(n.minX,n.maxX),r.push(n.minY,n.maxY))}));var n=null;if(e.length){var i=Math.min.apply(null,e),o=Math.max.apply(null,e),a=Math.min.apply(null,r),c=Math.max.apply(null,r);n={minX:i,minY:a,x:i,y:a,maxX:o,maxY:c,width:o-i,height:c-a};var h=this.cfg.canvas;if(h){var f=h.getViewRange();this.set("isInView",u.intersectRect(n,f))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",n)},e.prototype.draw=function(t,e){var r=this.cfg.children,n=!e||this.cfg.refresh;r.length&&n&&(t.save(),a.applyAttrsToContext(t,this),this._applyClip(t,this.getClip()),a.drawChildren(t,r,e),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(i.AbstractGroup);e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(339),i=/[a-z]/;function o(t,e){return[e[0]+(e[0]-t[0]),e[1]+(e[1]-t[1])]}e.default=function(t){var e=n.default(t);if(!e||!e.length)return[["M",0,0]];for(var r=!1,a=0;a<e.length;a++){var s=e[a][0];if(i.test(s)||["V","H","T","S"].indexOf(s)>=0){r=!0;break}}if(!r)return e;var u=[],c=0,h=0,f=0,l=0,d=0,p=e[0];"M"!==p[0]&&"m"!==p[0]||(f=c=+p[1],l=h=+p[2],d++,u[0]=["M",c,h]),a=d;for(var g=e.length;a<g;a++){var v=e[a],y=u[a-1],m=[],b=(s=v[0]).toUpperCase();if(s!==b)switch(m[0]=b,b){case"A":m[1]=v[1],m[2]=v[2],m[3]=v[3],m[4]=v[4],m[5]=v[5],m[6]=+v[6]+c,m[7]=+v[7]+h;break;case"V":m[1]=+v[1]+h;break;case"H":m[1]=+v[1]+c;break;case"M":f=+v[1]+c,l=+v[2]+h;break;default:for(var x=1,w=v.length;x<w;x++)m[x]=+v[x]+(x%2?c:h)}else m=e[a];switch(b){case"Z":c=+f,h=+l;break;case"H":m=["L",c=m[1],h];break;case"V":m=["L",c,h=m[1]];break;case"T":c=m[1],h=m[2];var M=o([y[1],y[2]],[y[3],y[4]]);m=["Q",M[0],M[1],c,h];break;case"S":c=m[m.length-2],h=m[m.length-1];var S=y.length,_=o([y[S-4],y[S-3]],[y[S-2],y[S-1]]);m=["C",_[0],_[1],m[1],m[2],c,h];break;case"M":f=m[m.length-2],l=m[m.length-1];break;default:c=m[m.length-2],h=m[m.length-1]}u.push(m)}return u}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(159);e.default=function(t,e,r){var i=n.getOffScreenContext();return t.createPath(i),i.isPointInPath(e,r)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t){return Math.abs(t)<1e-6?0:t<0?-1:1}function i(t,e,r){return(r[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}e.default=function(t,e,r){var o=!1,a=t.length;if(a<=2)return!1;for(var s=0;s<a;s++){var u=t[s],c=t[(s+1)%a];if(i(u,c,[e,r]))return!0;n(u[1]-r)>0!=n(c[1]-r)>0&&n(e-(r-u[1])*(u[0]-c[0])/(u[1]-c[1])-u[0])<0&&(o=!o)}return o}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(18);e.default=function(t,e,r,i,o,a,s,u){var c=(Math.atan2(u-e,s-t)+2*Math.PI)%(2*Math.PI);if(c<i||c>o)return!1;var h={x:t+r*Math.cos(c),y:e+r*Math.sin(c)};return n.distance(h.x,h.y,s,u)<=a/2}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(75);e.default=function(t,e,r,i,o){var a=t.length;if(a<2)return!1;for(var s=0;s<a-1;s++){var u=t[s][0],c=t[s][1],h=t[s+1][0],f=t[s+1][1];if(n.default(u,c,h,f,e,r,i))return!0}if(o){var l=t[0],d=t[a-1];if(n.default(l[0],l[1],d[0],d[1],e,r,i))return!0}return!1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(344),i=r(33);e.default={box:function(t){for(var e=[],r=[],n=0;n<t.length;n++){var o=t[n];e.push(o[0]),r.push(o[1])}return i.getBBoxByArray(e,r)},length:function(t){return n.lengthOfSegment(t)},pointAt:function(t,e){return n.pointAtSegments(t,e)},pointDistance:function(t,e,r){return n.distanceAtSegment(t,e,r)},tangentAngle:function(t,e){return n.angleAtSegments(t,e)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(43),o=r(0),a=r(110),s=r(109),u=r(61),c=r(19),h=r(29),f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=h.createSVGElement("g");this.set("el",t);var e=this.getParent();if(e){var r=e.get("el");r||(r=e.createDom(),e.set("el",r)),r.appendChild(t)}return t},e.prototype.afterAttrsChange=function(e){t.prototype.afterAttrsChange.call(this,e);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,e)}},e.prototype.onCanvasChange=function(t){s.refreshElement(this,t)},e.prototype.getShapeBase=function(){return a},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var e=this.getChildren(),r=this.get("el");this.get("destroyed")?r&&r.parentNode.removeChild(r):(r||this.createDom(),u.setClip(this,t),this.createPath(t),e.length&&s.drawChildren(t,e))},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");o.each(e||r,(function(t,e){c.SVG_ATTR_MAP[e]&&n.setAttribute(c.SVG_ATTR_MAP[e],t)})),u.setTransform(this)},e}(i.AbstractGroup);e.default=f},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(16);n.translate=function(t,e,r){var i=new Array(9);return n.fromTranslation(i,r),n.multiply(t,i,e)},n.rotate=function(t,e,r){var i=new Array(9);return n.fromRotation(i,r),n.multiply(t,i,e)},n.scale=function(t,e,r){var i=new Array(9);return n.fromScaling(i,r),n.multiply(t,i,e)},n.transform=function(t,e){for(var r=[].concat(t),i=0,o=e.length;i<o;i++){var a=e[i];switch(a[0]){case"t":n.translate(r,r,[a[1],a[2]]);break;case"s":n.scale(r,r,[a[1],a[2]]);break;case"r":n.rotate(r,r,a[1])}}return r},e.default=n},function(t,e,r){var n=r(76),i=r(114),o=r(81),a=r(403),s=r(409),u=r(179),c=r(180),h=r(412),f=r(413),l=r(184),d=r(414),p=r(54),g=r(418),v=r(419),y=r(189),m=r(15),b=r(53),x=r(423),w=r(25),M=r(425),S=r(41),_=r(46),k={};k["[object Arguments]"]=k["[object Array]"]=k["[object ArrayBuffer]"]=k["[object DataView]"]=k["[object Boolean]"]=k["[object Date]"]=k["[object Float32Array]"]=k["[object Float64Array]"]=k["[object Int8Array]"]=k["[object Int16Array]"]=k["[object Int32Array]"]=k["[object Map]"]=k["[object Number]"]=k["[object Object]"]=k["[object RegExp]"]=k["[object Set]"]=k["[object String]"]=k["[object Symbol]"]=k["[object Uint8Array]"]=k["[object Uint8ClampedArray]"]=k["[object Uint16Array]"]=k["[object Uint32Array]"]=!0,k["[object Error]"]=k["[object Function]"]=k["[object WeakMap]"]=!1,t.exports=function t(e,r,O,E,j,C){var A,P=1&r,I=2&r,T=4&r;if(O&&(A=j?O(e,E,j,C):O(e)),void 0!==A)return A;if(!w(e))return e;var N=m(e);if(N){if(A=g(e),!P)return c(e,A)}else{var D=p(e),B="[object Function]"==D||"[object GeneratorFunction]"==D;if(b(e))return u(e,P);if("[object Object]"==D||"[object Arguments]"==D||B&&!j){if(A=I||B?{}:y(e),!P)return I?f(e,s(A,e)):h(e,a(A,e))}else{if(!k[D])return j?e:{};A=v(e,D,P)}}C||(C=new n);var R=C.get(e);if(R)return R;C.set(e,A),M(e)?e.forEach((function(n){A.add(t(n,r,O,n,e,C))})):x(e)&&e.forEach((function(n,i){A.set(i,t(n,r,O,i,e,C))}));var L=N?void 0:(T?I?d:l:I?_:S)(e);return i(L||e,(function(n,i){L&&(n=e[i=n]),o(A,i,t(n,r,O,i,e,C))})),A}},function(t,e,r){(function(e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n="object"==(void 0===e?"undefined":r(e))&&e&&e.Object===Object&&e;t.exports=n}).call(this,r(385))},function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,r){var n=r(44),i=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},function(t,e,r){var n=r(404),i=r(64),o=r(15),a=r(53),s=r(83),u=r(65),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=o(t),h=!r&&i(t),f=!r&&!h&&a(t),l=!r&&!h&&!f&&u(t),d=r||h||f||l,p=d?n(t.length,String):[],g=p.length;for(var v in t)!e&&!c.call(t,v)||d&&("length"==v||f&&("offset"==v||"parent"==v)||l&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,g))||p.push(v);return p}},function(t,e){t.exports=function(t,e){return function(r){return t(e(r))}}},function(t,e,r){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(31),o="object"==n(e)&&e&&!e.nodeType&&e,a=o&&"object"==n(t)&&t&&!t.nodeType&&t,s=a&&a.exports===o?i.Buffer:void 0,u=s?s.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=u?u(r):new t.constructor(r);return t.copy(n),n}}).call(this,r(115)(t))},function(t,e){t.exports=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,i=0,o=[];++r<n;){var a=t[r];e(a,r,t)&&(o[i++]=a)}return o}},function(t,e){t.exports=function(){return[]}},function(t,e,r){var n=r(120),i=r(86),o=r(119),a=r(182),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,o(t)),t=i(t);return e}:a;t.exports=s},function(t,e,r){var n=r(185),i=r(119),o=r(41);t.exports=function(t){return n(t,o,i)}},function(t,e,r){var n=r(120),i=r(15);t.exports=function(t,e,r){var o=e(t);return i(t)?o:n(o,r(t))}},function(t,e,r){var n=r(44)(r(31),"Set");t.exports=n},function(t,e,r){var n=r(31).Uint8Array;t.exports=n},function(t,e,r){var n=r(121);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},function(t,e,r){var n=r(190),i=r(86),o=r(85);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:n(i(t))}},function(t,e,r){var n=r(25),i=Object.create,o=function(){function t(){}return function(e){if(!n(e))return{};if(i)return i(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=o},function(t,e,r){t.exports=r(192)},function(t,e,r){var n=r(114),i=r(87),o=r(193),a=r(15);t.exports=function(t,e){return(a(t)?n:i)(t,o(e))}},function(t,e,r){var n=r(47);t.exports=function(t){return"function"==typeof t?t:n}},function(t,e,r){var n=r(181),i=r(429),o=r(39),a=r(15);t.exports=function(t,e){return(a(t)?n:i)(t,o(e,3))}},function(t,e,r){var n=r(432),i=r(34);t.exports=function t(e,r,o,a,s){return e===r||(null==e||null==r||!i(e)&&!i(r)?e!=e&&r!=r:n(e,r,o,a,t,s))}},function(t,e,r){var n=r(197),i=r(435),o=r(198);t.exports=function(t,e,r,a,s,u){var c=1&r,h=t.length,f=e.length;if(h!=f&&!(c&&f>h))return!1;var l=u.get(t),d=u.get(e);if(l&&d)return l==e&&d==t;var p=-1,g=!0,v=2&r?new n:void 0;for(u.set(t,e),u.set(e,t);++p<h;){var y=t[p],m=e[p];if(a)var b=c?a(m,y,p,e,t,u):a(y,m,p,t,e,u);if(void 0!==b){if(b)continue;g=!1;break}if(v){if(!i(e,(function(t,e){if(!o(v,e)&&(y===t||s(y,t,r,a,u)))return v.push(e)}))){g=!1;break}}else if(y!==m&&!s(y,m,r,a,u)){g=!1;break}}return u.delete(t),u.delete(e),g}},function(t,e,r){var n=r(113),i=r(433),o=r(434);function a(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,r){var n=r(25);t.exports=function(t){return t==t&&!n(t)}},function(t,e){t.exports=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}},function(t,e,r){var n=r(445);t.exports=function(t){return null==t?"":n(t)}},function(t,e,r){var n=r(446),i=r(203);t.exports=function(t,e){return null!=t&&i(t,e,n)}},function(t,e,r){var n=r(89),i=r(64),o=r(15),a=r(83),s=r(116),u=r(66);t.exports=function(t,e,r){for(var c=-1,h=(e=n(e,t)).length,f=!1;++c<h;){var l=u(e[c]);if(!(f=null!=t&&r(t,l)))break;t=t[l]}return f||++c!=h?f:!!(h=null==t?0:t.length)&&s(h)&&a(l,h)&&(o(t)||i(t))}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,r){var n=r(449),i=r(203);t.exports=function(t,e){return null!=t&&i(t,e,n)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,r){var n=r(90),i=r(39),o=r(208),a=r(15);t.exports=function(t,e){return(a(t)?n:o)(t,i(e,3))}},function(t,e,r){var n=r(87),i=r(38);t.exports=function(t,e){var r=-1,o=i(t)?Array(t.length):[];return n(t,(function(t,n,i){o[++r]=e(t,n,i)})),o}},function(t,e,r){var n=r(451),i=r(87),o=r(39),a=r(452),s=r(15);t.exports=function(t,e,r){var u=s(t)?n:a,c=arguments.length<3;return u(t,o(e,4),r,c,i)}},function(t,e,r){var n=r(462),i=Math.max;t.exports=function(t,e,r){return e=i(void 0===e?t.length-1:e,0),function(){for(var o=arguments,a=-1,s=i(o.length-e,0),u=Array(s);++a<s;)u[a]=o[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=o[a];return c[e]=r(u),n(t,this,c)}}},function(t,e,r){var n=r(463),i=r(464)(n);t.exports=i},function(t,e){t.exports=function(t,e,r,n){for(var i=t.length,o=r+(n?1:-1);n?o--:++o<i;)if(e(t[o],o,t))return o;return-1}},function(t,e,r){var n=r(38),i=r(34);t.exports=function(t){return i(t)&&n(t)}},function(t,e,r){var n=r(473),i=r(41);t.exports=function(t){return null==t?[]:n(t,i(t))}},function(t,e,r){var n=r(24),i=r(216);t.exports=function(t,e,r,n){return function(t,e,r,n){var o,a,s={},u=new i,c=function(t){var e=t.v!==o?t.v:t.w,n=s[e],i=r(t),c=a.distance+i;if(i<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+i);c<n.distance&&(n.distance=c,n.predecessor=o,u.decrease(e,c))};t.nodes().forEach((function(t){var r=t===e?0:Number.POSITIVE_INFINITY;s[t]={distance:r},u.add(t,r)}));for(;u.size()>0&&(o=u.removeMin(),(a=s[o]).distance!==Number.POSITIVE_INFINITY);)n(o).forEach(c);return s}(t,String(e),r||o,n||function(e){return t.outEdges(e)})};var o=n.constant(1)},function(t,e,r){var n=r(24);function i(){this._arr=[],this._keyIndices={}}t.exports=i,i.prototype.size=function(){return this._arr.length},i.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},i.prototype.has=function(t){return n.has(this._keyIndices,t)},i.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},i.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},i.prototype.add=function(t,e){var r=this._keyIndices;if(t=String(t),!n.has(r,t)){var i=this._arr,o=i.length;return r[t]=o,i.push({key:t,priority:e}),this._decrease(o),!0}return!1},i.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},i.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)},i.prototype._heapify=function(t){var e=this._arr,r=2*t,n=r+1,i=t;r<e.length&&(i=e[r].priority<e[i].priority?r:i,n<e.length&&(i=e[n].priority<e[i].priority?n:i),i!==t&&(this._swap(t,i),this._heapify(i)))},i.prototype._decrease=function(t){for(var e,r=this._arr,n=r[t].priority;0!==t&&!(r[e=t>>1].priority<n);)this._swap(t,e),t=e},i.prototype._swap=function(t,e){var r=this._arr,n=this._keyIndices,i=r[t],o=r[e];r[t]=o,r[e]=i,n[o.key]=t,n[i.key]=e}},function(t,e,r){var n=r(24);t.exports=function(t){var e=0,r=[],i={},o=[];return t.nodes().forEach((function(a){n.has(i,a)||function a(s){var u=i[s]={onStack:!0,lowlink:e,index:e++};if(r.push(s),t.successors(s).forEach((function(t){n.has(i,t)?i[t].onStack&&(u.lowlink=Math.min(u.lowlink,i[t].index)):(a(t),u.lowlink=Math.min(u.lowlink,i[t].lowlink))})),u.lowlink===u.index){var c,h=[];do{c=r.pop(),i[c].onStack=!1,h.push(c)}while(s!==c);o.push(h)}}(a)})),o}},function(t,e,r){var n=r(24);function i(t){var e={},r={},i=[];if(n.each(t.sinks(),(function a(s){if(n.has(r,s))throw new o;n.has(e,s)||(r[s]=!0,e[s]=!0,n.each(t.predecessors(s),a),delete r[s],i.push(s))})),n.size(e)!==t.nodeCount())throw new o;return i}function o(){}t.exports=i,i.CycleException=o,o.prototype=new Error},function(t,e,r){var n=r(24);t.exports=function(t,e,r){n.isArray(e)||(e=[e]);var i=(t.isDirected()?t.successors:t.neighbors).bind(t),o=[],a={};return n.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,r,i,o,a,s){n.has(o,r)||(o[r]=!0,i||s.push(r),n.each(a(r),(function(r){t(e,r,i,o,a,s)})),i&&s.push(r))}(t,e,"post"===r,a,i,o)})),o}},function(t,e,r){var n=r(492);t.exports=function(t){return t?(t=n(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,r){var n=r(127);t.exports=function(t){return(null==t?0:t.length)?n(t,1):[]}},function(t,e,r){var n=r(82),i=r(51);t.exports=function(t,e,r){(void 0!==r&&!i(t[e],r)||void 0===r&&!(e in t))&&n(t,e,r)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,r){"use strict";var n=r(13),i=r(30).Graph,o=r(93).slack;function a(t,e){return n.forEach(t.nodes(),(function r(i){n.forEach(e.nodeEdges(i),(function(n){var a=n.v,s=i===a?n.w:a;t.hasNode(s)||o(e,n)||(t.setNode(s,{}),t.setEdge(i,s,{}),r(s))}))})),t.nodeCount()}function s(t,e){return n.minBy(e.edges(),(function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return o(e,r)}))}function u(t,e,r){n.forEach(t.nodes(),(function(t){e.node(t).rank+=r}))}t.exports=function(t){var e,r,n=new i({directed:!1}),c=t.nodes()[0],h=t.nodeCount();n.setNode(c,{});for(;a(n,t)<h;)e=s(n,t),r=n.hasNode(e.v)?o(t,e):-o(t,e),u(n,t,r);return n}},function(t,e,r){var n=r(48),i={getId:function(t){return t.id||t.name},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.label||" ";return t.width||18*e.split("").length}};function o(t,e){var r=this;if(r.vgap=r.hgap=0,t instanceof o)return t;r.data=t;var n=e.getHGap(t),i=e.getVGap(t);return r.width=e.getWidth(t),r.height=e.getHeight(t),r.id=e.getId(t),r.x=r.y=0,r.depth=0,r.children||(r.children=[]),r.addGap(n,i),r}n.assign(o.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){this.hgap+=t,this.vgap+=e,this.width+=2*t,this.height+=2*e},eachNode:function(t){for(var e,r=[this];e=r.shift();)t(e),r=e.children.concat(r)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,r=[this];e=r.shift();)t(e),r=r.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode((function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)})),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode((function(r){r.x+=t,r.y+=e}))},right2left:function(){var t=this.getBoundingBox();this.eachNode((function(e){e.x=e.x-2*(e.x-t.left)-e.width})),this.translate(t.width,0)},bottom2top:function(){var t=this.getBoundingBox();this.eachNode((function(e){e.y=e.y-2*(e.y-t.top)-e.height})),this.translate(0,t.height)}}),t.exports=function(t,e,r){void 0===e&&(e={});var a,s=new o(t,e=n.assign({},i,e)),u=[s];if(!r&&!t.collapsed)for(;a=u.shift();)if(!a.data.collapsed){var c=e.getChildren(a.data),h=c?c.length:0;if(a.children=new Array(h),c&&h)for(var f=0;f<h;f++){var l=new o(c[f],e);a.children[f]=l,u.push(l),l.parent=a,l.depth=a.depth+1}}return s}},function(t,e,r){var n=r(226);t.exports=function(t,e){for(var r=n(t.data,e,!0),i=n(t.data,e,!0),o=t.children.length,a=Math.round(o/2),s=e.getSide||function(t,e){return e<a?"right":"left"},u=0;u<o;u++){var c=t.children[u];"right"===s(c,u)?i.children.push(c):r.children.push(c)}return r.eachNode((function(t){t.isRoot()||(t.side="left")})),i.eachNode((function(t){t.isRoot()||(t.side="right")})),{left:r,right:i}}},function(t,e,r){"use strict";var n={};r.r(n),r.d(n,"easeLinear",(function(){return E})),r.d(n,"easeQuad",(function(){return A})),r.d(n,"easeQuadIn",(function(){return j})),r.d(n,"easeQuadOut",(function(){return C})),r.d(n,"easeQuadInOut",(function(){return A})),r.d(n,"easeCubic",(function(){return T})),r.d(n,"easeCubicIn",(function(){return P})),r.d(n,"easeCubicOut",(function(){return I})),r.d(n,"easeCubicInOut",(function(){return T})),r.d(n,"easePoly",(function(){return B})),r.d(n,"easePolyIn",(function(){return N})),r.d(n,"easePolyOut",(function(){return D})),r.d(n,"easePolyInOut",(function(){return B})),r.d(n,"easeSin",(function(){return Y})),r.d(n,"easeSinIn",(function(){return z})),r.d(n,"easeSinOut",(function(){return F})),r.d(n,"easeSinInOut",(function(){return Y})),r.d(n,"easeExp",(function(){return V})),r.d(n,"easeExpIn",(function(){return q})),r.d(n,"easeExpOut",(function(){return X})),r.d(n,"easeExpInOut",(function(){return V})),r.d(n,"easeCircle",(function(){return W})),r.d(n,"easeCircleIn",(function(){return H})),r.d(n,"easeCircleOut",(function(){return U})),r.d(n,"easeCircleInOut",(function(){return W})),r.d(n,"easeBounce",(function(){return K})),r.d(n,"easeBounceIn",(function(){return $})),r.d(n,"easeBounceOut",(function(){return K})),r.d(n,"easeBounceInOut",(function(){return Q})),r.d(n,"easeBack",(function(){return et})),r.d(n,"easeBackIn",(function(){return J})),r.d(n,"easeBackOut",(function(){return tt})),r.d(n,"easeBackInOut",(function(){return et})),r.d(n,"easeElastic",(function(){return it})),r.d(n,"easeElasticIn",(function(){return nt})),r.d(n,"easeElasticOut",(function(){return it})),r.d(n,"easeElasticInOut",(function(){return ot}));var i=r(1),o=r(132),a=r(100),s=r(9),u=r(0);function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var h,f,l=0,d=0,p=0,g=0,v=0,y=0,m="object"===("undefined"==typeof performance?"undefined":c(performance))&&performance.now?performance:Date,b="object"===("undefined"==typeof window?"undefined":c(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function x(){return v||(b(w),v=m.now()+y)}function w(){v=0}function M(){this._call=this._time=this._next=null}function S(t,e,r){var n=new M;return n.restart(t,e,r),n}function _(){v=(g=m.now())+y,l=d=0;try{!function(){x(),++l;for(var t,e=h;e;)(t=v-e._time)>=0&&e._call.call(null,t),e=e._next;--l}()}finally{l=0,function(){var t,e,r=h,n=1/0;for(;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:h=e);f=t,O(n)}(),v=0}}function k(){var t=m.now(),e=t-g;e>1e3&&(y-=e,g=t)}function O(t){l||(d&&(d=clearTimeout(d)),t-v>24?(t<1/0&&(d=setTimeout(_,t-m.now()-y)),p&&(p=clearInterval(p))):(p||(g=m.now(),p=setInterval(k,1e3)),l=1,b(_)))}function E(t){return+t}function j(t){return t*t}function C(t){return t*(2-t)}function A(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function P(t){return t*t*t}function I(t){return--t*t*t+1}function T(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}M.prototype=S.prototype={constructor:M,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?x():+r)+(null==e?0:+e),this._next||f===this||(f?f._next=this:h=this,f=this),this._call=t,this._time=r,O()},stop:function(){this._call&&(this._call=null,this._time=1/0,O())}};var N=function t(e){function r(t){return Math.pow(t,e)}return e=+e,r.exponent=t,r}(3),D=function t(e){function r(t){return 1-Math.pow(1-t,e)}return e=+e,r.exponent=t,r}(3),B=function t(e){function r(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,r.exponent=t,r}(3),R=Math.PI,L=R/2;function z(t){return 1==+t?1:1-Math.cos(t*L)}function F(t){return Math.sin(t*L)}function Y(t){return(1-Math.cos(R*t))/2}function G(t){return 1.0009775171065494*(Math.pow(2,-10*t)-.0009765625)}function q(t){return G(1-+t)}function X(t){return 1-G(t)}function V(t){return((t*=2)<=1?G(1-t):2-G(t-1))/2}function H(t){return 1-Math.sqrt(1-t*t)}function U(t){return Math.sqrt(1- --t*t)}function W(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var Z=7.5625;function $(t){return 1-K(1-t)}function K(t){return(t=+t)<4/11?Z*t*t:t<8/11?Z*(t-=6/11)*t+3/4:t<10/11?Z*(t-=9/11)*t+15/16:Z*(t-=21/22)*t+63/64}function Q(t){return((t*=2)<=1?1-K(1-t):K(t-1)+1)/2}var J=function t(e){function r(t){return(t=+t)*t*(e*(t-1)+t)}return e=+e,r.overshoot=t,r}(1.70158),tt=function t(e){function r(t){return--t*t*((t+1)*e+t)+1}return e=+e,r.overshoot=t,r}(1.70158),et=function t(e){function r(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,r.overshoot=t,r}(1.70158),rt=2*Math.PI,nt=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=rt);function i(t){return e*G(- --t)*Math.sin((n-t)/r)}return i.amplitude=function(e){return t(e,r*rt)},i.period=function(r){return t(e,r)},i}(1,.3),it=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=rt);function i(t){return 1-e*G(t=+t)*Math.sin((t+n)/r)}return i.amplitude=function(e){return t(e,r*rt)},i.period=function(r){return t(e,r)},i}(1,.3),ot=function t(e,r){var n=Math.asin(1/(e=Math.max(1,e)))*(r/=rt);function i(t){return((t=2*t-1)<0?e*G(-t)*Math.sin((n-t)/r):2-e*G(t)*Math.sin((n+t)/r))/2}return i.amplitude=function(e){return t(e,r*rt)},i.period=function(r){return t(e,r)},i}(1,.3),at=function(t,e,r){t.prototype=e.prototype=r,r.constructor=t};function st(t,e){var r=Object.create(t.prototype);for(var n in e)r[n]=e[n];return r}function ut(){}var ct="\\s*([+-]?\\d+)\\s*",ht="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ft="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",lt=/^#([0-9a-f]{3,8})$/,dt=new RegExp("^rgb\\("+[ct,ct,ct]+"\\)$"),pt=new RegExp("^rgb\\("+[ft,ft,ft]+"\\)$"),gt=new RegExp("^rgba\\("+[ct,ct,ct,ht]+"\\)$"),vt=new RegExp("^rgba\\("+[ft,ft,ft,ht]+"\\)$"),yt=new RegExp("^hsl\\("+[ht,ft,ft]+"\\)$"),mt=new RegExp("^hsla\\("+[ht,ft,ft,ht]+"\\)$"),bt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function xt(){return this.rgb().formatHex()}function wt(){return this.rgb().formatRgb()}function Mt(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=lt.exec(t))?(r=e[1].length,e=parseInt(e[1],16),6===r?St(e):3===r?new Et(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===r?_t(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===r?_t(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=dt.exec(t))?new Et(e[1],e[2],e[3],1):(e=pt.exec(t))?new Et(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=gt.exec(t))?_t(e[1],e[2],e[3],e[4]):(e=vt.exec(t))?_t(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=yt.exec(t))?Pt(e[1],e[2]/100,e[3]/100,1):(e=mt.exec(t))?Pt(e[1],e[2]/100,e[3]/100,e[4]):bt.hasOwnProperty(t)?St(bt[t]):"transparent"===t?new Et(NaN,NaN,NaN,0):null}function St(t){return new Et(t>>16&255,t>>8&255,255&t,1)}function _t(t,e,r,n){return n<=0&&(t=e=r=NaN),new Et(t,e,r,n)}function kt(t){return t instanceof ut||(t=Mt(t)),t?new Et((t=t.rgb()).r,t.g,t.b,t.opacity):new Et}function Ot(t,e,r,n){return 1===arguments.length?kt(t):new Et(t,e,r,null==n?1:n)}function Et(t,e,r,n){this.r=+t,this.g=+e,this.b=+r,this.opacity=+n}function jt(){return"#"+At(this.r)+At(this.g)+At(this.b)}function Ct(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function At(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Pt(t,e,r,n){return n<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new Tt(t,e,r,n)}function It(t){if(t instanceof Tt)return new Tt(t.h,t.s,t.l,t.opacity);if(t instanceof ut||(t=Mt(t)),!t)return new Tt;if(t instanceof Tt)return t;var e=(t=t.rgb()).r/255,r=t.g/255,n=t.b/255,i=Math.min(e,r,n),o=Math.max(e,r,n),a=NaN,s=o-i,u=(o+i)/2;return s?(a=e===o?(r-n)/s+6*(r<n):r===o?(n-e)/s+2:(e-r)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new Tt(a,s,u,t.opacity)}function Tt(t,e,r,n){this.h=+t,this.s=+e,this.l=+r,this.opacity=+n}function Nt(t,e,r){return 255*(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)}function Dt(t,e,r,n,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*r+(1+3*t+3*o-3*a)*n+a*i)/6}at(ut,Mt,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:xt,formatHex:xt,formatHsl:function(){return It(this).formatHsl()},formatRgb:wt,toString:wt}),at(Et,Ot,st(ut,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Et(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:jt,formatHex:jt,formatRgb:Ct,toString:Ct})),at(Tt,(function(t,e,r,n){return 1===arguments.length?It(t):new Tt(t,e,r,null==n?1:n)}),st(ut,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Tt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Tt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*e,i=2*r-n;return new Et(Nt(t>=240?t-240:t+120,i,n),Nt(t,i,n),Nt(t<120?t+240:t-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Bt=function(t){return function(){return t}};function Rt(t,e){return function(r){return t+r*e}}function Lt(t){return 1==(t=+t)?zt:function(e,r){return r-e?function(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(n){return Math.pow(t+n*e,r)}}(e,r,t):Bt(isNaN(e)?r:e)}}function zt(t,e){var r=e-t;return r?Rt(t,r):Bt(isNaN(t)?e:t)}var Ft=function t(e){var r=Lt(e);function n(t,e){var n=r((t=Ot(t)).r,(e=Ot(e)).r),i=r(t.g,e.g),o=r(t.b,e.b),a=zt(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return n.gamma=t,n}(1);function Yt(t){return function(e){var r,n,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(r=0;r<i;++r)n=Ot(e[r]),o[r]=n.r||0,a[r]=n.g||0,s[r]=n.b||0;return o=t(o),a=t(a),s=t(s),n.opacity=1,function(t){return n.r=o(t),n.g=a(t),n.b=s(t),n+""}}}Yt((function(t){var e=t.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,e-1):Math.floor(r*e),i=t[n],o=t[n+1],a=n>0?t[n-1]:2*i-o,s=n<e-1?t[n+2]:2*o-i;return Dt((r-n/e)*e,a,i,o,s)}})),Yt((function(t){var e=t.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*e),i=t[(n+e-1)%e],o=t[n%e],a=t[(n+1)%e],s=t[(n+2)%e];return Dt((r-n/e)*e,i,o,a,s)}}));var Gt=function(t,e){e||(e=[]);var r,n=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(r=0;r<n;++r)i[r]=t[r]*(1-o)+e[r]*o;return i}};function qt(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Xt(t,e){var r,n=e?e.length:0,i=t?Math.min(n,t.length):0,o=new Array(i),a=new Array(n);for(r=0;r<i;++r)o[r]=Jt(t[r],e[r]);for(;r<n;++r)a[r]=e[r];return function(t){for(r=0;r<i;++r)a[r]=o[r](t);return a}}var Vt=function(t,e){var r=new Date;return t=+t,e=+e,function(n){return r.setTime(t*(1-n)+e*n),r}},Ht=function(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}};function Ut(t){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Wt=function(t,e){var r,n={},i={};for(r in null!==t&&"object"===Ut(t)||(t={}),null!==e&&"object"===Ut(e)||(e={}),e)r in t?n[r]=Jt(t[r],e[r]):i[r]=e[r];return function(t){for(r in n)i[r]=n[r](t);return i}},Zt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$t=new RegExp(Zt.source,"g");var Kt=function(t,e){var r,n,i,o=Zt.lastIndex=$t.lastIndex=0,a=-1,s=[],u=[];for(t+="",e+="";(r=Zt.exec(t))&&(n=$t.exec(e));)(i=n.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(r=r[0])===(n=n[0])?s[a]?s[a]+=n:s[++a]=n:(s[++a]=null,u.push({i:a,x:Ht(r,n)})),o=$t.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var r,n=0;n<e;++n)s[(r=u[n]).i]=r.x(t);return s.join("")})};function Qt(t){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Jt=function(t,e){var r,n=Qt(e);return null==e||"boolean"===n?Bt(e):("number"===n?Ht:"string"===n?(r=Mt(e))?(e=r,Ft):Kt:e instanceof Mt?Ft:e instanceof Date?Vt:qt(e)?Gt:Array.isArray(e)?Xt:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Wt:Ht)(t,e)},te=r(37),ee=[1,0,0,0,1,0,0,0,1];function re(t,e,r){var i,o=e.startTime;if(r<o+e.delay||e._paused)return!1;var a=e.duration,s=e.easing;if(r=r-o-e.delay,e.repeat)i=r%a/a,i=n[s](i);else{if(!((i=r/a)<1))return e.onFrame?t.attr(e.onFrame(1)):t.attr(e.toAttrs),!0;i=n[s](i)}if(e.onFrame){var c=e.onFrame(i);t.attr(c)}else!function(t,e,r){var n={},i=e.fromAttrs,o=e.toAttrs;if(!t.destroyed){var a,s,c,h;for(var f in o)if(!Object(u.isEqual)(i[f],o[f]))if("path"===f){var l=o[f],d=i[f];l.length>d.length?(l=te.parsePathString(o[f]),d=te.parsePathString(i[f]),d=te.fillPathByDiff(d,l),d=te.formatPath(d,l),e.fromAttrs.path=d,e.toAttrs.path=l):e.pathFormatted||(l=te.parsePathString(o[f]),d=te.parsePathString(i[f]),d=te.formatPath(d,l),e.fromAttrs.path=d,e.toAttrs.path=l,e.pathFormatted=!0),n[f]=[];for(var p=0;p<l.length;p++){for(var g=l[p],v=d[p],y=[],m=0;m<g.length;m++)Object(u.isNumber)(g[m])&&v&&Object(u.isNumber)(v[m])?(a=Jt(v[m],g[m]),y.push(a(r))):y.push(g[m]);n[f].push(y)}}else if("matrix"===f){var b=(c=i[f]||ee,(qt(h=o[f]||ee)?Gt:Xt)(c,h))(r);n[f]=b}else["fill","stroke","fillStyle","strokeStyle"].includes(f)&&(s=o[f],/^[r,R,L,l]{1}[\s]*\(/.test(s))?n[f]=o[f]:Object(u.isFunction)(o[f])||(a=Jt(i[f],o[f]),n[f]=a(r));t.attr(n)}}(t,e,i);return!1}var ne=function(){function t(t){this.animators=[],this.current=0,this.timer=null,this.canvas=t}return t.prototype.initTimer=function(){var t,e,r,n=this;this.timer=S((function(i){if(n.current=i,n.animators.length>0){for(var o=n.animators.length-1;o>=0;o--)if((t=n.animators[o]).destroyed)n.removeAnimator(o);else{if(!t.isAnimatePaused())for(var a=(e=t.get("animations")).length-1;a>=0;a--)r=e[a],re(t,r,i)&&(e.splice(a,1),!1,r.callback&&r.callback());0===e.length&&n.removeAnimator(o)}n.canvas.get("autoDraw")||n.canvas.draw()}}))},t.prototype.addAnimator=function(t){this.animators.push(t)},t.prototype.removeAnimator=function(t){this.animators.splice(t,1)},t.prototype.isAnimating=function(){return!!this.animators.length},t.prototype.stop=function(){this.timer&&this.timer.stop()},t.prototype.stopAllAnimations=function(t){void 0===t&&(t=!0),this.animators.forEach((function(e){e.stopAnimate(t)})),this.animators=[],this.canvas.draw()},t.prototype.getTime=function(){return this.current},t}(),ie=r(96),oe=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function ae(t,e,r){r.name=e,r.target=t,r.currentTarget=t,r.delegateTarget=t,t.emit(e,r)}function se(t,e,r){if(r.bubbles){var n=void 0,i=!1;if("mouseenter"===e?(n=r.fromShape,i=!0):"mouseleave"===e&&(i=!0,n=r.toShape),t.isCanvas()&&i)return;if(n&&Object(s.g)(t,n))return void(r.bubbles=!1);r.name=e,r.currentTarget=t,r.delegateTarget=t,t.emit(e,r)}}var ue=function(){function t(t){var e=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(t){var r=t.type;e._triggerEvent(r,t)},this._onDocumentMove=function(t){if(e.canvas.get("el")!==t.target&&(e.dragging||e.currentShape)){var r=e._getPointInfo(t);e.dragging&&e._emitEvent("drag",t,r,e.draggingShape)}},this._onDocumentMouseUp=function(t){if(e.canvas.get("el")!==t.target&&e.dragging){var r=e._getPointInfo(t);e.draggingShape&&e._emitEvent("drop",t,r,null),e._emitEvent("dragend",t,r,e.draggingShape),e._afterDrag(e.draggingShape,r,t)}},this.canvas=t.canvas}return t.prototype.init=function(){this._bindEvents()},t.prototype._bindEvents=function(){var t=this,e=this.canvas.get("el");Object(s.a)(oe,(function(r){e.addEventListener(r,t._eventCallback)})),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._clearEvents=function(){var t=this,e=this.canvas.get("el");Object(s.a)(oe,(function(r){e.removeEventListener(r,t._eventCallback)})),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},t.prototype._getEventObj=function(t,e,r,n,i,o){var a=new ie.a(t,e);return a.fromShape=i,a.toShape=o,a.x=r.x,a.y=r.y,a.clientX=r.clientX,a.clientY=r.clientY,a.propagationPath.push(n),a},t.prototype._getShape=function(t,e){return this.canvas.getShape(t.x,t.y,e)},t.prototype._getPointInfo=function(t){var e=this.canvas,r=e.getClientByEvent(t),n=e.getPointByEvent(t);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},t.prototype._triggerEvent=function(t,e){var r=this._getPointInfo(e),n=this._getShape(r,e),i=this["_on"+t],o=!1;if(i)i.call(this,r,n,e);else{var a=this.currentShape;"mouseenter"===t||"dragenter"===t||"mouseover"===t?(this._emitEvent(t,e,r,null,null,n),n&&this._emitEvent(t,e,r,n,null,n),"mouseenter"===t&&this.draggingShape&&this._emitEvent("dragenter",e,r,null)):"mouseleave"===t||"dragleave"===t||"mouseout"===t?(o=!0,a&&this._emitEvent(t,e,r,a,a,null),this._emitEvent(t,e,r,null,a,null),"mouseleave"===t&&this.draggingShape&&this._emitEvent("dragleave",e,r,null)):this._emitEvent(t,e,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var s=this.canvas;s.get("el").style.cursor=n.attr("cursor")||s.get("cursor")}},t.prototype._onmousedown=function(t,e,r){0===r.button&&(this.mousedownShape=e,this.mousedownPoint=t,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,t,e,null,null)},t.prototype._emitMouseoverEvents=function(t,e,r,n){var i=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",t,e,r,r,n),this._emitEvent("mouseleave",t,e,r,r,n),n&&!n.get("destroyed")||(i.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",t,e,n,r,n),this._emitEvent("mouseenter",t,e,n,r,n)))},t.prototype._emitDragoverEvents=function(t,e,r,n,i){n?(n!==r&&(r&&this._emitEvent("dragleave",t,e,r,r,n),this._emitEvent("dragenter",t,e,n,r,n)),i||this._emitEvent("dragover",t,e,n)):r&&this._emitEvent("dragleave",t,e,r,r,n),i&&this._emitEvent("dragover",t,e,n)},t.prototype._afterDrag=function(t,e,r){t&&(t.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(e,r);n!==t&&this._emitMouseoverEvents(r,e,t,n),this.currentShape=n},t.prototype._onmouseup=function(t,e,r){if(0===r.button){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,t,e),this._emitEvent("dragend",r,t,n),this._afterDrag(n,t,r)):(this._emitEvent("mouseup",r,t,e),e===this.mousedownShape&&this._emitEvent("click",r,t,e),this.mousedownShape=null,this.mousedownPoint=null)}},t.prototype._ondragover=function(t,e,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,t,n,e,!0)},t.prototype._onmousemove=function(t,e,r){var n=this.canvas,i=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,t,i,e,!1),this._emitEvent("drag",r,t,o);else{var a=this.mousedownPoint;if(a){var s=this.mousedownShape,u=r.timeStamp-this.mousedownTimeStamp,c=a.clientX-t.clientX,h=a.clientY-t.clientY;u>120||c*c+h*h>40?s&&s.get("draggable")?((o=this.mousedownShape).set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,t,o),this.mousedownShape=null,this.mousedownPoint=null):!s&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,t,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,t,i,e),this._emitEvent("mousemove",r,t,e)):(this._emitMouseoverEvents(r,t,i,e),this._emitEvent("mousemove",r,t,e))}else this._emitMouseoverEvents(r,t,i,e),this._emitEvent("mousemove",r,t,e)}},t.prototype._emitEvent=function(t,e,r,n,i,o){var a=this._getEventObj(t,e,r,n,i,o);if(n){a.shape=n,ae(n,t,a);for(var s=n.getParent();s;)s.emitDelegation(t,a),a.propagationStopped||se(s,t,a),a.propagationPath.push(s),s=s.getParent()}else{ae(this.canvas,t,a)}},t.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},t}(),ce=Object(o.detect)(),he=ce&&"firefox"===ce.name,fe=function(t){function e(e){var r=t.call(this,e)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return Object(i.__extends)(e,t),e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.cursor="default",e.supportCSSTransform=!1,e},e.prototype.initContainer=function(){var t=this.get("container");Object(s.h)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t),this.get("container").appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new ue({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new ne(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,e){var r=this.get("el");s.c&&(r.style.width=t+"px",r.style.height=e+"px")},e.prototype.changeSize=function(t,e){this.setDOMSize(t,e),this.set("width",t),this.set("height",e),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var e=this.get("el");s.c&&e&&(e.style.cursor=t)},e.prototype.getPointByEvent=function(t){if(this.get("supportCSSTransform")){if(he&&!Object(s.e)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!Object(s.e)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var e=this.getClientByEvent(t),r=e.x,n=e.y;return this.getPointByClient(r,n)},e.prototype.getClientByEvent=function(t){var e=t;return t.touches&&(e="touchend"===t.type?t.changedTouches[0]:t.touches[0]),{x:e.clientX,y:e.clientY}},e.prototype.getPointByClient=function(t,e){var r=this.get("el").getBoundingClientRect();return{x:t-r.left,y:e-r.top}},e.prototype.getClientByPoint=function(t,e){var r=this.get("el").getBoundingClientRect();return{x:t+r.left,y:e+r.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){this.get("eventController").destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var e=this.get("timeline");this.get("destroyed")||(this.clear(),e&&e.stop(),this.clearEvents(),this.removeDom(),t.prototype.destroy.call(this))},e}(a.a);e.a=fe},function(t){t.exports=JSON.parse('{"a":"3.8.5"}')},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();e.default=n},function(t,e,r){"use strict";t.exports=function(t,e,r,n){try{try{var i;try{i=new window.Blob([t])}catch(e){(i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),i=i.getBlob()}var o=window.URL||window.webkitURL,a=o.createObjectURL(i),s=new window[e](a,r);return o.revokeObjectURL(a),s}catch(n){return new window[e]("data:application/javascript,".concat(encodeURIComponent(t)),r)}}catch(t){if(!n)throw Error("Inline worker is not supported");return new window[e](n,r)}}},,,,,,,,,,,function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(137),i=r(72);e.default=function(t,e){return void 0===e&&(e=[]),n.default(t,(function(t){return!i.default(e,t)}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(14),i=r(138),o=r(4),a=r(58);e.default=function(t,e){if(!o.default(t))return null;var r;if(n.default(e)&&(r=e),a.default(e)&&(r=function(t){return i.default(t,e)}),r)for(var s=0;s<t.length;s+=1)if(r(t[s]))return t[s];return null}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){void 0===r&&(r=0);for(var n=r;n<t.length;n++)if(e(t[n],n))return n;return-1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),i=r(4);e.default=function(t,e){for(var r=null,o=0;o<t.length;o++){var a=t[o][e];if(!n.default(a)){r=i.default(a)?a[0]:a;break}}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4);e.default=function(t){if(!n.default(t))return[];for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4);e.default=function t(e,r){if(void 0===r&&(r=[]),n.default(e))for(var i=0;i<e.length;i+=1)t(e[i],r);else r.push(e);return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4);e.default=function(t){var e=t.filter((function(t){return!isNaN(t)}));if(!e.length)return{min:0,max:0};if(n.default(t[0])){for(var r=[],i=0;i<t.length;i++)r=r.concat(t[i]);e=r}var o=Math.max.apply(null,e);return{min:Math.min.apply(null,e),max:o}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Array.prototype,i=n.splice,o=n.indexOf;e.default=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0;n<e.length;n++)for(var a=e[n],s=-1;(s=o.call(t,a))>-1;)i.call(t,s,1);return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(4),o=r(58);e.default=function(t,e,r){if(!i.default(t)&&!o.default(t))return t;var a=r;return n.default(t,(function(t,r){a=e(a,t,r)})),a}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21),i=r(140);e.default=function(t,e){var r=[];if(!n.default(t))return r;for(var o=-1,a=[],s=t.length;++o<s;){var u=t[o];e(u,o,t)&&(r.push(u),a.push(o))}return i.default(t,a),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(3),o=r(14);e.default=function(t,e){var r;if(o.default(e))r=function(t,r){return e(t)-e(r)};else{var a=[];i.default(e)?a.push(e):n.default(e)&&(a=e),r=function(t,e){for(var r=0;r<a.length;r+=1){var n=a[r];if(t[n]>e[n])return 1;if(t[n]<e[n])return-1}return 0}}return t.sort(r),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(141);e.default=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.default([].concat.apply([],t))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(10);e.default=function(t,e){for(var r=[],o={},a=0;a<t.length;a++){var s=t[a][e];if(!i.default(s)){n.default(s)||(s=[s]);for(var u=0;u<s.length;u++){var c=s[u];o[c]||(r.push(c),o[c]=!0)}}}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21);e.default=function(t){if(n.default(t))return t[0]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21);e.default=function(t){if(n.default(t)){return t[t.length-1]}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(3);e.default=function(t,e){return!(!n.default(t)&&!i.default(t))&&t[0]===e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i=r(3);e.default=function(t,e){return!(!n.default(t)&&!i.default(t))&&t[t.length-1]===e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){for(var r=0;r<t.length;r++)if(!e(t[r],r))return!1;return!0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){for(var r=0;r<t.length;r++)if(e(t[r],r))return!0;return!1}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(142);e.default=function(t,e){if(!e)return[t];var r=n.default(t,e),i=[];for(var o in r)i.push(r[o]);return i}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t["_wrap_"+e]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};e.default=function(t){var e=n[t];if(!e){for(var r=t.toString(16),i=r.length;i<6;i++)r="0"+r;e="#"+r,n[t]=e}return e}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4);e.default=function(t){var e=0,r=0,i=0,o=0;return n.default(t)?1===t.length?e=r=i=o=t[0]:2===t.length?(e=i=t[0],r=o=t[1]):3===t.length?(e=t[0],r=o=t[1],i=t[2]):(e=t[0],r=t[1],i=t[2],o=t[3]):e=r=i=o=t,{r1:e,r2:r,r3:i,r4:o}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e,r){return t<e?e:t>r?r:t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){var r=e.toString(),n=r.indexOf(".");if(-1===n)return Math.round(t);var i=r.substr(n+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11);e.default=function(t){return n.default(t)&&t%1!=0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11);e.default=function(t){return n.default(t)&&t%2==0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11),i=Number.isInteger?Number.isInteger:function(t){return n.default(t)&&t%1==0};e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11);e.default=function(t){return n.default(t)&&t<0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11);e.default=function(t){return n.default(t)&&t%2!=0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11);e.default=function(t){return n.default(t)&&t>0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(4),o=r(14);e.default=function(t,e){if(i.default(t)){var r,a,s=t[0];return r=o.default(e)?e(t[0]):t[0][e],n.default(t,(function(t){(a=o.default(e)?e(t):t[e])>r&&(s=t,r=a)})),s}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(4),o=r(14);e.default=function(t,e){if(i.default(t)){var r,a,s=t[0];return r=o.default(e)?e(t[0]):t[0][e],n.default(t,(function(t){(a=o.default(e)?e(t):t[e])<r&&(s=t,r=a)})),s}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=180/Math.PI;e.default=function(t){return n*t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=parseInt},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2);e.default=n.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(143);e.default=n.default},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(72),i=r(144);e.default=function(t,e){return n.default(i.default(t),e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(59);e.default=function(t){return n.default(t).toLowerCase()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(59);e.default=function(t){var e=n.default(t);return e.charAt(0).toLowerCase()+e.substring(1)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,r){return"\\"===t.charAt(0)?t.slice(1):void 0===e[r]?"":e[r]})):t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(59);e.default=function(t){return n.default(t).toUpperCase()}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(27);e.default=function(t){return n.default(t,"Arguments")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(27);e.default=function(t){return n.default(t,"Boolean")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(27);e.default=function(t){return n.default(t,"Date")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(27);e.default=function(t){return n.default(t,"Error")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(11);e.default=function(t){return n.default(t)&&isFinite(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return null===t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(27);e.default=function(t){return n.default(t,"RegExp")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return void 0===t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return t instanceof Element||t instanceof HTMLDocument}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(17),i=r(14);e.default=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r=t[0],o=1;o<t.length;o++){var a=t[o];i.default(a)&&(a=a.prototype),n.default(r.prototype,a)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){var n;return function(){var i=this,o=arguments,a=function(){n=null,r||t.apply(i,o)},s=r&&!n;clearTimeout(n),n=setTimeout(a,e),s&&t.apply(i,o)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(14);e.default=function(t,e){if(!n.default(t))throw new TypeError("Expected a function");var r=function r(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var o=e?e.apply(this,n):n[0],a=r.cache;if(a.has(o))return a.get(o);var s=t.apply(this,n);return a.set(o,s),s};return r.cache=new Map,r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(17),i=r(14);e.default=function(t,e,r,o){i.default(e)||(r=e,e=t,t=function(){});var a=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function r(){}r.prototype=t;var n=new r;return n.constructor=e,n},s=a(e.prototype,t);return t.prototype=n.default(s,t.prototype),t.superclass=a(e.prototype,e),n.default(s,r),n.default(t,o),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21);e.default=function(t,e){if(!n.default(t))return-1;var r=Array.prototype.indexOf;if(r)return r.call(t,e);for(var i=-1,o=0;o<t.length;o++)if(t[o]===e){i=o;break}return i}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),i=r(21),o=r(145),a=r(146),s=Object.prototype.hasOwnProperty;e.default=function(t){if(n.default(t))return!0;if(i.default(t))return!t.length;var e=o.default(t);if("Map"===e||"Set"===e)return!t.size;if(a.default(t))return!Object.keys(t).length;for(var r in t)if(s.call(t,r))return!1;return!0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(14),i=r(95);e.default=function(t,e,r){return n.default(r)?!!r(t,e):i.default(t,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21);e.default=function(t,e){if(!n.default(t))return t;for(var r=[],i=0;i<t.length;i++){var o=t[i];r.push(e(o,i))}return r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),i=r(35),o=function(t){return t};e.default=function(t,e){void 0===e&&(e=o);var r={};return i.default(t)&&!n.default(t)&&Object.keys(t).forEach((function(n){r[n]=e(t[n],n)})),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(35),i=r(3),o=r(11);e.default=function(t,e,r){var a=t,s=i.default(e)?e.split("."):e;return s.forEach((function(t,e){e<s.length-1?(n.default(a[t])||(a[t]=o.default(s[e+1])?[]:{}),a=a[t]):a[t]=r})),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(58),o=Object.prototype.hasOwnProperty;e.default=function(t,e){if(null===t||!i.default(t))return{};var r={};return n.default(e,(function(e){o.call(t,e)&&(r[e]=t[e])})),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r){var n,i,o,a,s=0;r||(r={});var u=function(){s=!1===r.leading?0:Date.now(),n=null,a=t.apply(i,o),n||(i=o=null)},c=function(){var c=Date.now();s||!1!==r.leading||(s=c);var h=e-(c-s);return i=this,o=arguments,h<=0||h>e?(n&&(clearTimeout(n),n=null),s=c,a=t.apply(i,o),n||(i=o=null)):n||!1===r.trailing||(n=setTimeout(u,h)),a};return c.cancel=function(){clearTimeout(n),s=0,n=i=o=null},c}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(21);e.default=function(t){return n.default(t)?Array.prototype.slice.call(t):[]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};e.default=function(t){return n[t=t||"g"]?n[t]+=1:n[t]=1,t+n[t]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),i=r(21);e.default=function(t){return n.default(t)?0:i.default(t)?t.length:Object.keys(t).length}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this.map={}}return t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var r=this.map[t];return void 0===r?e:r},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length},t}();e.default=n},function(t,e,r){var n=r(312),i=r(313),o={};for(var a in n)n.hasOwnProperty(a)&&(o[n[a]]=a);var s=t.exports={to:{},get:{}};function u(t,e,r){return Math.min(Math.max(e,t),r)}function c(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}s.get=function(t){var e,r;switch(t.substring(0,3).toLowerCase()){case"hsl":e=s.get.hsl(t),r="hsl";break;case"hwb":e=s.get.hwb(t),r="hwb";break;default:e=s.get.rgb(t),r="rgb"}return e?{model:r,value:e}:null},s.get.rgb=function(t){if(!t)return null;var e,r,i,o=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(i=e[2],e=e[1],r=0;r<3;r++){var a=2*r;o[r]=parseInt(e.slice(a,a+2),16)}i&&(o[3]=parseInt(i,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(i=(e=e[1])[3],r=0;r<3;r++)o[r]=parseInt(e[r]+e[r],16);i&&(o[3]=parseInt(i+i,16)/255)}else if(e=t.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(r=0;r<3;r++)o[r]=parseInt(e[r+1],0);e[4]&&(o[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(e=t.match(/(\D+)/))?"transparent"===e[1]?[0,0,0,0]:(o=n[e[1]])?(o[3]=1,o):null:null;for(r=0;r<3;r++)o[r]=Math.round(2.55*parseFloat(e[r+1]));e[4]&&(o[3]=parseFloat(e[4]))}for(r=0;r<3;r++)o[r]=u(o[r],0,255);return o[3]=u(o[3],0,1),o},s.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(r)?1:r,0,1)]}return null},s.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,u(parseFloat(e[2]),0,100),u(parseFloat(e[3]),0,100),u(isNaN(r)?1:r,0,1)]}return null},s.to.hex=function(){var t=i(arguments);return"#"+c(t[0])+c(t[1])+c(t[2])+(t[3]<1?c(Math.round(255*t[3])):"")},s.to.rgb=function(){var t=i(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},s.to.rgb.percent=function(){var t=i(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"},s.to.hsl=function(){var t=i(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},s.to.hwb=function(){var t=i(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},s.to.keyword=function(t){return o[t.slice(0,3)]}},function(t,e,r){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,r){"use strict";var n=r(314),i=Array.prototype.concat,o=Array.prototype.slice,a=t.exports=function(t){for(var e=[],r=0,a=t.length;r<a;r++){var s=t[r];n(s)?e=i.call(e,o.call(s)):e.push(s)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},function(t,e){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=r(149),o=r(317),a={};Object.keys(i).forEach((function(t){a[t]={},Object.defineProperty(a[t],"channels",{value:i[t].channels}),Object.defineProperty(a[t],"labels",{value:i[t].labels});var e=o(t);Object.keys(e).forEach((function(r){var i=e[r];a[t][r]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var r=t(e);if("object"===n(r))for(var i=r.length,o=0;o<i;o++)r[o]=Math.round(r[o]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}(i),a[t][r].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(i)}))})),t.exports=a},function(t,e,r){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,r){var n=r(149);function i(t){var e=function(){for(var t={},e=Object.keys(n),r=e.length,i=0;i<r;i++)t[e[i]]={distance:-1,parent:null};return t}(),r=[t];for(e[t].distance=0;r.length;)for(var i=r.pop(),o=Object.keys(n[i]),a=o.length,s=0;s<a;s++){var u=o[s],c=e[u];-1===c.distance&&(c.distance=e[i].distance+1,c.parent=i,r.unshift(u))}return e}function o(t,e){return function(r){return e(t(r))}}function a(t,e){for(var r=[e[t].parent,t],i=n[e[t].parent][t],a=e[t].parent;e[a].parent;)r.unshift(e[a].parent),i=o(n[e[a].parent][a],i),a=e[a].parent;return i.conversion=r,i}t.exports=function(t){for(var e=i(t),r={},n=Object.keys(e),o=n.length,s=0;s<o;s++){var u=n[s];null!==e[u].parent&&(r[u]=a(u,e))}return r}},function(t){t.exports=JSON.parse('{"name":"@antv/g-base","version":"0.5.1","description":"A common util collection for antv projects","main":"lib/index.js","module":"esm/index.js","types":"lib/index.d.ts","files":["package.json","esm","lib","LICENSE","README.md"],"scripts":{"build":"npm run clean && run-p build:*","build:esm":"tsc -p tsconfig.json --target ES5 --module ESNext --outDir esm","build:cjs":"tsc -p tsconfig.json --target ES5 --module commonjs --outDir lib","clean":"rm -rf esm lib","watch:cjs":"tsc-watch -p tsconfig.json --target ES5 --module commonjs --outDir lib --compiler typescript/bin/tsc","coverage":"npm run coverage-generator && npm run coverage-viewer","coverage-generator":"torch --coverage --compile --source-pattern src/*.js,src/**/*.js --opts tests/mocha.opts","coverage-viewer":"torch-coverage","test":"torch --renderer --compile --opts tests/mocha.opts","test-live":"torch --compile --interactive tests/unit","tsc":"tsc --noEmit","typecheck":"tsc --noEmit"},"repository":{"type":"git","url":"git+https://github.com/antvis/util.git"},"keywords":["util","antv","g"],"publishConfig":{"access":"public"},"author":"https://github.com/orgs/antvis/people","license":"ISC","bugs":{"url":"https://github.com/antvis/util/issues"},"devDependencies":{"@antv/torch":"^1.0.0","gl-matrix":"^3.0.0","less":"^3.9.0","npm-run-all":"^4.1.5","tsc-watch":"^4.0.0"},"homepage":"https://github.com/antvis/util#readme","dependencies":{"@antv/event-emitter":"^0.1.1","@antv/g-math":"^0.1.5","@antv/matrix-util":"^3.1.0-beta.1","@antv/path-util":"~2.0.5","@antv/util":"~2.0.0","@types/d3-timer":"^1.0.9","d3-ease":"^1.0.5","d3-interpolate":"^1.3.2","d3-timer":"^1.0.9","detect-browser":"^5.1.0"},"__npminstall_done":true,"gitHead":"ba7ecf8b8deac37682414ac0b7fc2c3e903398bd","_from":"@antv/g-base@0.5.1","_resolved":"https://registry.npm.alibaba-inc.com/@antv/g-base/download/@antv/g-base-0.5.1.tgz"}')},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getShape=void 0;var n=r(155),i=r(320);function o(t,e,r){var n=t.getTotalMatrix();if(n){var o=function(t,e){if(e){var r=i.invert(e);return i.multiplyVec2(r,t)}return t}([e,r,1],n);return[o[0],o[1]]}return[e,r]}function a(t,e,r){if(t.isCanvas&&t.isCanvas())return!0;if(!n.isAllowCapture(t)||!1===t.cfg.isInView)return!1;if(t.cfg.clipShape){var i=o(t,e,r),a=i[0],s=i[1];if(t.isClipped(a,s))return!1}var u=t.cfg.cacheCanvasBBox||t.getCanvasBBox();return e>=u.minX&&e<=u.maxX&&r>=u.minY&&r<=u.maxY}e.getShape=function t(e,r,n){if(!a(e,r,n))return null;for(var i=null,s=e.getChildren(),u=s.length-1;u>=0;u--){var c=s[u];if(c.isGroup())i=t(c,r,n);else if(a(c,r,n)){var h=c,f=o(c,r,n),l=f[0],d=f[1];h.isInShape(l,d)&&(i=c)}if(i)break}return i}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.invert=e.multiplyVec2=e.multiplyMatrix=void 0,e.multiplyMatrix=function(t,e){var r=[],n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],u=t[5],c=t[6],h=t[7],f=t[8],l=e[0],d=e[1],p=e[2],g=e[3],v=e[4],y=e[5],m=e[6],b=e[7],x=e[8];return r[0]=l*n+d*a+p*c,r[1]=l*i+d*s+p*h,r[2]=l*o+d*u+p*f,r[3]=g*n+v*a+y*c,r[4]=g*i+v*s+y*h,r[5]=g*o+v*u+y*f,r[6]=m*n+b*a+x*c,r[7]=m*i+b*s+x*h,r[8]=m*o+b*u+x*f,r},e.multiplyVec2=function(t,e){var r=[],n=e[0],i=e[1];return r[0]=t[0]*n+t[3]*i+t[6],r[1]=t[1]*n+t[4]*i+t[7],r},e.invert=function(t){var e=[],r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],u=t[6],c=t[7],h=t[8],f=h*a-s*c,l=-h*o+s*u,d=c*o-a*u,p=r*f+n*l+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-h*n+i*c)*p,e[2]=(s*n-i*a)*p,e[3]=l*p,e[4]=(h*r-i*u)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-c*r+n*u)*p,e[8]=(a*r-n*o)*p,e):null}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(18);function i(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function o(t,e){return i(t)*i(e)?(t[0]*e[0]+t[1]*e[1])/(i(t)*i(e)):1}function a(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(o(t,e))}e.default=function(t,e){var r=e[1],i=e[2],s=n.mod(n.toRadian(e[3]),2*Math.PI),u=e[4],c=e[5],h=t[0],f=t[1],l=e[6],d=e[7],p=Math.cos(s)*(h-l)/2+Math.sin(s)*(f-d)/2,g=-1*Math.sin(s)*(h-l)/2+Math.cos(s)*(f-d)/2,v=p*p/(r*r)+g*g/(i*i);v>1&&(r*=Math.sqrt(v),i*=Math.sqrt(v));var y=r*r*(g*g)+i*i*(p*p),m=y?Math.sqrt((r*r*(i*i)-y)/y):1;u===c&&(m*=-1),isNaN(m)&&(m=0);var b=i?m*r*g/i:0,x=r?m*-i*p/r:0,w=(h+l)/2+Math.cos(s)*b-Math.sin(s)*x,M=(f+d)/2+Math.sin(s)*b+Math.cos(s)*x,S=[(p-b)/r,(g-x)/i],_=[(-1*p-b)/r,(-1*g-x)/i],k=a([1,0],S),O=a(S,_);return o(S,_)<=-1&&(O=Math.PI),o(S,_)>=1&&(O=0),0===c&&O>0&&(O-=2*Math.PI),1===c&&O<0&&(O+=2*Math.PI),{cx:w,cy:M,rx:n.isSamePoint(t,[l,d])?0:r,ry:n.isSamePoint(t,[l,d])?0:i,startAngle:k,endAngle:k+O,xRotation:s,arcFlag:u,sweepFlag:c}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMethod=e.register=void 0;var n=new Map;e.register=function(t,e){n.set(t,e)},e.getMethod=function(t){return n.get(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.attr();return{x:e.x,y:e.y,width:e.width,height:e.height}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.attr(),r=e.x,n=e.y,i=e.r;return{x:r-i,y:n-i,width:2*i,height:2*i}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(33),i=r(107);e.default=function(t){for(var e=t.attr().points,r=[],o=[],a=0;a<e.length;a++){var s=e[a];r.push(s[0]),o.push(s[1])}var u=n.getBBoxByArray(r,o),c=u.x,h=u.y,f={minX:c,minY:h,maxX:c+u.width,maxY:h+u.height};return{x:(f=i.mergeArrowBBox(t,f)).minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(33);e.default=function(t){for(var e=t.attr().points,r=[],i=[],o=0;o<e.length;o++){var a=e[o];r.push(a[0]),i.push(a[1])}return n.getBBoxByArray(r,i)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(158);e.default=function(t){var e=t.attr(),r=e.x,i=e.y,o=e.text,a=e.fontSize,s=e.lineHeight,u=e.font;u||(u=n.assembleFont(e));var c,h=n.getTextWidth(o,u);if(h){var f=e.textAlign,l=e.textBaseline,d=n.getTextHeight(o,a,s),p={x:r,y:i-d};f&&("end"===f||"right"===f?p.x-=h:"center"===f&&(p.x-=h/2)),l&&("top"===l?p.y+=d:"middle"===l&&(p.y+=d/2)),c={x:p.x,y:p.y,width:h,height:d}}else c={x:r,y:i,width:0,height:0};return c}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(160),i=r(108),o=r(329),a=r(162),s=r(103),u=r(107);function c(t,e){var r=t.prePoint,n=t.currentPoint,i=t.nextPoint,o=Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2),a=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),u=Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2),c=Math.acos((o+a-u)/(2*Math.sqrt(o)*Math.sqrt(a)));if(!c||0===Math.sin(c)||s.default(c,0))return{xExtra:0,yExtra:0};var h=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),f=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));return h=h>Math.PI/2?Math.PI-h:h,f=f>Math.PI/2?Math.PI-f:f,{xExtra:Math.cos(c/2-h)*(e/2*(1/Math.sin(c/2)))-e/2||0,yExtra:Math.cos(f-c/2)*(e/2*(1/Math.sin(c/2)))-e/2||0}}e.default=function(t){var e=t.attr(),r=e.path,s=e.stroke?e.lineWidth:0,h=function(t,e){for(var r=[],a=[],s=[],u=0;u<t.length;u++){var h=(b=t[u]).currentPoint,f=b.params,l=b.prePoint,d=void 0;switch(b.command){case"Q":d=n.default.box(l[0],l[1],f[1],f[2],f[3],f[4]);break;case"C":d=i.default.box(l[0],l[1],f[1],f[2],f[3],f[4],f[5],f[6]);break;case"A":var p=b.arcParams;d=o.default.box(p.cx,p.cy,p.rx,p.ry,p.xRotation,p.startAngle,p.endAngle);break;default:r.push(h[0]),a.push(h[1])}d&&(b.box=d,r.push(d.x,d.x+d.width),a.push(d.y,d.y+d.height)),e&&("L"===b.command||"M"===b.command)&&b.prePoint&&b.nextPoint&&s.push(b)}r=r.filter((function(t){return!Number.isNaN(t)})),a=a.filter((function(t){return!Number.isNaN(t)}));var g=Math.min.apply(null,r),v=Math.min.apply(null,a),y=Math.max.apply(null,r),m=Math.max.apply(null,a);if(0===s.length)return{x:g,y:v,width:y-g,height:m-v};for(u=0;u<s.length;u++){var b;(h=(b=s[u]).currentPoint)[0]===g?g-=c(b,e).xExtra:h[0]===y&&(y+=c(b,e).xExtra),h[1]===v?v-=c(b,e).yExtra:h[1]===m&&(m+=c(b,e).yExtra)}return{x:g,y:v,width:y-g,height:m-v}}(t.get("segments")||a.default(r),s),f=h.x,l=h.y,d={minX:f,minY:l,maxX:f+h.width,maxY:l+h.height};return{x:(d=u.mergeArrowBBox(t,d)).minX,y:d.minY,width:d.maxX-d.minX,height:d.maxY-d.minY}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(33),i=r(330);function o(t,e,r,n,i,o){return r*Math.cos(i)*Math.cos(o)-n*Math.sin(i)*Math.sin(o)+t}function a(t,e,r,n,i,o){return r*Math.sin(i)*Math.cos(o)+n*Math.cos(i)*Math.sin(o)+e}function s(t,e,r){return{x:t*Math.cos(r),y:e*Math.sin(r)}}function u(t,e,r){var n=Math.cos(r),i=Math.sin(r);return[t*n-e*i,t*i+e*n]}e.default={box:function(t,e,r,n,i,s,u){for(var c=function(t,e,r){return Math.atan(-e/t*Math.tan(r))}(r,n,i),h=1/0,f=-1/0,l=[s,u],d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var p=c+d;s<u?s<p&&p<u&&l.push(p):u<p&&p<s&&l.push(p)}for(d=0;d<l.length;d++){var g=o(t,0,r,n,i,l[d]);g<h&&(h=g),g>f&&(f=g)}var v=function(t,e,r){return Math.atan(e/(t*Math.tan(r)))}(r,n,i),y=1/0,m=-1/0,b=[s,u];for(d=2*-Math.PI;d<=2*Math.PI;d+=Math.PI){var x=v+d;s<u?s<x&&x<u&&b.push(x):u<x&&x<s&&b.push(x)}for(d=0;d<b.length;d++){var w=a(0,e,r,n,i,b[d]);w<y&&(y=w),w>m&&(m=w)}return{x:h,y:y,width:f-h,height:m-y}},length:function(t,e,r,n,i,o,a){},nearestPoint:function(t,e,r,n,o,a,c,h,f){var l=u(h-t,f-e,-o),d=l[0],p=l[1],g=i.default.nearestPoint(0,0,r,n,d,p),v=function(t,e,r,n){return(Math.atan2(n*t,r*e)+2*Math.PI)%(2*Math.PI)}(r,n,g.x,g.y);v<a?g=s(r,n,a):v>c&&(g=s(r,n,c));var y=u(g.x,g.y,o);return{x:y[0]+t,y:y[1]+e}},pointDistance:function(t,e,r,i,o,a,s,u,c){var h=this.nearestPoint(t,e,r,i,u,c);return n.distance(h.x,h.y,u,c)},pointAt:function(t,e,r,n,i,s,u,c){var h=(u-s)*c+s;return{x:o(t,0,r,n,i,h),y:a(0,e,r,n,i,h)}},tangentAngle:function(t,e,r,i,o,a,s,u){var c=(s-a)*u+a,h=function(t,e,r,n,i,o,a,s){return-1*r*Math.cos(i)*Math.sin(s)-n*Math.sin(i)*Math.cos(s)}(0,0,r,i,o,0,0,c),f=function(t,e,r,n,i,o,a,s){return-1*r*Math.sin(i)*Math.sin(s)+n*Math.cos(i)*Math.cos(s)}(0,0,r,i,o,0,0,c);return n.piMod(Math.atan2(f,h))}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(33);function i(t,e){var r=Math.abs(t);return e>0?r:-1*r}e.default={box:function(t,e,r,n){return{x:t-r,y:e-n,width:2*r,height:2*n}},length:function(t,e,r,n){return Math.PI*(3*(r+n)-Math.sqrt((3*r+n)*(r+3*n)))},nearestPoint:function(t,e,r,n,o,a){var s=r,u=n;if(0===s||0===u)return{x:t,y:e};for(var c,h,f=o-t,l=a-e,d=Math.abs(f),p=Math.abs(l),g=s*s,v=u*u,y=Math.PI/4,m=0;m<4;m++){c=s*Math.cos(y),h=u*Math.sin(y);var b=(g-v)*Math.pow(Math.cos(y),3)/s,x=(v-g)*Math.pow(Math.sin(y),3)/u,w=c-b,M=h-x,S=d-b,_=p-x,k=Math.hypot(M,w),O=Math.hypot(_,S);y+=k*Math.asin((w*_-M*S)/(k*O))/Math.sqrt(g+v-c*c-h*h),y=Math.min(Math.PI/2,Math.max(0,y))}return{x:t+i(c,f),y:e+i(h,l)}},pointDistance:function(t,e,r,i,o,a){var s=this.nearestPoint(t,e,r,i,o,a);return n.distance(s.x,s.y,o,a)},pointAt:function(t,e,r,n,i){var o=2*Math.PI*i;return{x:t+r*Math.cos(o),y:e+n*Math.sin(o)}},tangentAngle:function(t,e,r,i,o){var a=2*Math.PI*o,s=Math.atan2(i*Math.cos(a),-r*Math.sin(a));return n.piMod(s)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(4),o=r(3),a=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,s=/[^\s\,]+/gi;e.default=function(t){var e=t||[];return i.default(e)?e:o.default(e)?(e=e.match(a),n.default(e,(function(t,r){if((t=t.match(s))[0].length>1){var i=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=i}n.default(t,(function(e,r){isNaN(e)||(t[r]=+e)})),e[r]=t})),e):void 0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(107);e.default=function(t){var e=t.attr(),r=e.x1,i=e.y1,o=e.x2,a=e.y2,s={minX:Math.min(r,o),maxX:Math.max(r,o),minY:Math.min(i,a),maxY:Math.max(i,a)};return{x:(s=n.mergeArrowBBox(t,s)).minX,y:s.minY,width:s.maxX-s.minX,height:s.maxY-s.minY}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.attr(),r=e.x,n=e.y,i=e.rx,o=e.ry;return{x:r-i,y:n-o,width:2*i,height:2*o}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(28),o=r(18),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){var a=this.attr(),s=a.x,u=a.y,c=a.r,h=i/2,f=o.distance(s,u,t,e);return n&&r?f<=c+h:n?f<=c:!!r&&(f>=c-h&&f<=c+h)},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,n=e.y,i=e.r;t.beginPath(),t.arc(r,n,i,0,2*Math.PI,!1),t.closePath()},e}(i.default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1);function i(t,e,r,n){return t/(r*r)+e/(n*n)}var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,e,r,n,o){var a=this.attr(),s=o/2,u=a.x,c=a.y,h=a.rx,f=a.ry,l=(t-u)*(t-u),d=(e-c)*(e-c);return n&&r?i(l,d,h+s,f+s)<=1:n?i(l,d,h,f)<=1:!!r&&(i(l,d,h-s,f-s)>=1&&i(l,d,h+s,f+s)<=1)},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,n=e.y,i=e.rx,o=e.ry;if(t.beginPath(),t.ellipse)t.ellipse(r,n,i,o,0,0,2*Math.PI,!1);else{var a=i>o?i:o,s=i>o?1:i/o,u=i>o?o/i:1;t.save(),t.translate(r,n),t.scale(s,u),t.arc(0,0,a,0,2*Math.PI),t.restore(),t.closePath()}},e}(r(28).default);e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(28),o=r(18);function a(t){return t instanceof HTMLElement&&o.isString(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase()}var s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(!0===this.get("toDraw")){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var e=this,r=this.attrs;if(o.isString(t)){var n=new Image;n.onload=function(){if(e.destroyed)return!1;e.attr("img",n),e.set("loading",!1),e._afterLoading();var t=e.get("callback");t&&t.call(e)},n.crossOrigin="Anonymous",n.src=t,this.set("loading",!0)}else t instanceof Image?(r.width||(r.width=t.width),r.height||(r.height=t.height)):a(t)&&(r.width||(r.width=Number(t.getAttribute("width"))),r.height||(r.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),"img"===e&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading"))return this.set("toDraw",!0),void this.set("context",t);var e=this.attr(),r=e.x,n=e.y,i=e.width,s=e.height,u=e.sx,c=e.sy,h=e.swidth,f=e.sheight,l=e.img;(l instanceof Image||a(l))&&(o.isNil(u)||o.isNil(c)||o.isNil(h)||o.isNil(f)?t.drawImage(l,r,n,i,s):t.drawImage(l,u,c,h,f,r,n,i,s))},e}(i.default);e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(40),o=r(28),a=r(75),s=r(74),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),e=t.x1,r=t.y1,n=t.x2,i=t.y2,o=t.startArrow,a=t.endArrow;o&&s.addStartArrow(this,t,n,i,e,r),a&&s.addEndArrow(this,t,e,r,n,i)},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){if(!r||!i)return!1;var o=this.attr(),s=o.x1,u=o.y1,c=o.x2,h=o.y2;return a.default(s,u,c,h,i,t,e)},e.prototype.createPath=function(t){var e=this.attr(),r=e.x1,n=e.y1,i=e.x2,o=e.y2,a=e.startArrow,u=e.endArrow,c={dx:0,dy:0},h={dx:0,dy:0};a&&a.d&&(c=s.getShortenOffset(r,n,i,o,e.startArrow.d)),u&&u.d&&(h=s.getShortenOffset(r,n,i,o,e.endArrow.d)),t.beginPath(),t.moveTo(r+c.dx,n+c.dy),t.lineTo(i-h.dx,o-h.dy)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,r=t.y1,n=t.x2,o=t.y2;return i.default.length(e,r,n,o)},e.prototype.getPoint=function(t){var e=this.attr(),r=e.x1,n=e.y1,o=e.x2,a=e.y2;return i.default.pointAt(r,n,o,a,t)},e}(o.default);e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(165),a=r(28),s=r(18),u=r(60),c={circle:function(t,e,r){return[["M",t-r,e],["A",r,r,0,1,0,t+r,e],["A",r,r,0,1,0,t-r,e]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["Z"]]},"triangle-down":function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}},h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),-1!==["symbol","x","y","r","radius"].indexOf(e)&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return i.isNil(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t,r,n=this.attr(),i=n.x,a=n.y,u=n.symbol||"circle",c=this._getR(n);return s.isFunction(u)?(r=(t=u)(i,a,c),r=o.default(r)):r=(t=e.Symbols[u])(i,a,c),t?r:(console.warn(u+" marker is not supported."),null)},e.prototype.createPath=function(t){var e=this._getPath(),r=this.get("paramsCache");u.drawPath(this,t,{path:e},r)},e.Symbols=c,e}(a.default);e.default=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(4),i="\t\n\v\f\r   ᠎             　\u2028\u2029",o=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig");e.default=function(t){if(!t)return null;if(n.default(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(o,(function(t,n,i){var o=[],s=n.toLowerCase();if(i.replace(a,(function(t,e){e&&o.push(+e)})),"m"===s&&o.length>2&&(r.push([n].concat(o.splice(0,2))),s="l",n="m"===n?"l":"L"),"o"===s&&1===o.length&&r.push([n,o[0]]),"r"===s)r.push([n].concat(o));else for(;o.length>=e[s]&&(r.push([n].concat(o.splice(0,e[s]))),e[s]););return""})),r}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(108),o=r(0),a=r(28),s=r(165),u=r(162),c=r(60),h=r(166),f=r(167),l=r(341),d=r(74);function p(t,e,r){for(var n=!1,i=0;i<t.length;i++){var o=t[i];if(n=f.default(o,e,r))break}return n}var g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),"path"===e&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=s.default(t);var e=l.default.hasArc(t);this.set("hasArc",e),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=u.default(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),e=t.startArrow,r=t.endArrow;if(e){var n=this.getStartTangent();d.addStartArrow(this,t,n[0][0],n[0][1],n[1][0],n[1][1])}if(r){n=this.getEndTangent();d.addEndArrow(this,t,n[0][0],n[0][1],n[1][0],n[1][1])}},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){var o=this.getSegments(),a=this.get("hasArc"),s=!1;if(r){var u=this.getTotalLength();s=l.default.isPointInStroke(o,i,t,e,u)}if(!s&&n)if(a)s=h.default(this,t,e);else{var c=this.attr("path"),f=l.default.extractPolygons(c);s=p(f.polygons,t,e)||p(f.polylines,t,e)}return s},e.prototype.createPath=function(t){var e=this.attr(),r=this.get("paramsCache");c.drawPath(this,t,e,r)},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return o.isNil(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var e,r,n=this.get("tCache");n||(this._calculateCurve(),this._setTcache(),n=this.get("tCache"));var a=this.get("curve");if(!n||0===n.length)return a?{x:a[0][1],y:a[0][2]}:null;o.each(n,(function(n,i){t>=n[0]&&t<=n[1]&&(e=(t-n[0])/(n[1]-n[0]),r=i)}));var s=a[r];if(o.isNil(s)||o.isNil(r))return null;var u=s.length,c=a[r+1];return i.default.pointAt(s[u-2],s[u-1],c[1],c[2],c[3],c[4],c[5],c[6],e)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",l.default.pathToCurve(t))},e.prototype._setTcache=function(){var t,e,r,n,a=0,s=0,u=[],c=this.get("curve");c&&(o.each(c,(function(t,e){r=c[e+1],n=t.length,r&&(a+=i.default.length(t[n-2],t[n-1],r[1],r[2],r[3],r[4],r[5],r[6])||0)})),this.set("totalLength",a),0!==a?(o.each(c,(function(o,h){r=c[h+1],n=o.length,r&&((t=[])[0]=s/a,e=i.default.length(o[n-2],o[n-1],r[1],r[2],r[3],r[4],r[5],r[6]),s+=e||0,t[1]=s/a,u.push(t))})),this.set("tCache",u)):this.set("tCache",[]))},e.prototype.getStartTangent=function(){var t,e=this.getSegments();if(e.length>1){var r=e[0].currentPoint,n=e[1].currentPoint,i=e[1].startTangent;t=[],i?(t.push([r[0]-i[0],r[1]-i[1]]),t.push([r[0],r[1]])):(t.push([n[0],n[1]]),t.push([r[0],r[1]]))}return t},e.prototype.getEndTangent=function(){var t,e=this.getSegments(),r=e.length;if(r>1){var n=e[r-2].currentPoint,i=e[r-1].currentPoint,o=e[r-1].endTangent;t=[],o?(t.push([i[0]-o[0],i[1]-o[1]]),t.push([i[0],i[1]])):(t.push([n[0],n[1]]),t.push([i[0],i[1]]))}return t},e}(a.default);e.default=g},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(43),o=r(160),a=r(108),s=r(18),u=r(75),c=r(168),h=r(133),f=r(106),l=h.ext.transform;e.default=n.__assign({hasArc:function(t){for(var e=!1,r=t.length,n=0;n<r;n++){var i=t[n][0];if("C"===i||"A"===i||"Q"===i){e=!0;break}}return e},extractPolygons:function(t){for(var e=t.length,r=[],n=[],i=[],o=0;o<e;o++){var a=t[o],s=a[0];"M"===s?(i.length&&(n.push(i),i=[]),i.push([a[1],a[2]])):"Z"===s?i.length&&(r.push(i),i=[]):i.push([a[1],a[2]])}return i.length>0&&n.push(i),{polygons:r,polylines:n}},isPointInStroke:function(t,e,r,n,i){for(var h=!1,d=e/2,p=0;p<t.length;p++){var g=t[p],v=g.currentPoint,y=g.params,m=g.prePoint,b=g.box;if(!b||s.inBox(b.x-d,b.y-d,b.width+e,b.height+e,r,n)){switch(g.command){case"L":case"Z":h=u.default(m[0],m[1],v[0],v[1],e,r,n);break;case"Q":h=o.default.pointDistance(m[0],m[1],y[1],y[2],y[3],y[4],r,n)<=e/2;break;case"C":h=a.default.pointDistance(m[0],m[1],y[1],y[2],y[3],y[4],y[5],y[6],r,n,i)<=e/2;break;case"A":var x=g.arcParams,w=x.cx,M=x.cy,S=x.rx,_=x.ry,k=x.startAngle,O=x.endAngle,E=x.xRotation,j=[r,n,1],C=S>_?S:_,A=l(null,[["t",-w,-M],["r",-E],["s",1/(S>_?1:S/_),1/(S>_?_/S:1)]]);f.transformMat3(j,j,A),h=c.default(0,0,C,k,O,e,j[0],j[1])}if(h)break}}return h}},i.PathUtil)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(28),o=r(169),a=r(167),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.isInStrokeOrPath=function(t,e,r,n,i){var s=this.attr().points,u=!1;return r&&(u=o.default(s,i,t,e,!0)),!u&&n&&(u=a.default(s,t,e)),u},e.prototype.createPath=function(t){var e=this.attr().points;if(!(e.length<2)){t.beginPath();for(var r=0;r<e.length;r++){var n=e[r];0===r?t.moveTo(n[0],n[1]):t.lineTo(n[0],n[1])}t.closePath()}},e}(i.default);e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(40),o=r(170),a=r(0),s=r(28),u=r(169),c=r(74),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),this.setArrow(),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),e=this.attrs,r=e.points,n=e.startArrow,i=e.endArrow,o=r.length,a=r[0][0],s=r[0][1],u=r[o-1][0],h=r[o-1][1];n&&c.addStartArrow(this,t,r[1][0],r[1][1],a,s),i&&c.addEndArrow(this,t,r[o-2][0],r[o-2][1],u,h)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){if(!r||!i)return!1;var o=this.attr().points;return u.default(o,i,t,e,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var e=this.attr(),r=e.points,n=e.startArrow,i=e.endArrow,o=r.length;if(!(r.length<2)){var a,s=r[0][0],u=r[0][1],h=r[o-1][0],f=r[o-1][1];if(n&&n.d)s+=(a=c.getShortenOffset(s,u,r[1][0],r[1][1],n.d)).dx,u+=a.dy;if(i&&i.d)h-=(a=c.getShortenOffset(r[o-2][0],r[o-2][1],h,f,i.d)).dx,f-=a.dy;t.beginPath(),t.moveTo(s,u);for(var l=0;l<o-1;l++){var d=r[l];t.lineTo(d[0],d[1])}t.lineTo(h,f)}},e.prototype.afterDrawPath=function(t){var e=this.get("startArrowShape"),r=this.get("endArrowShape");e&&e.draw(t),r&&r.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return a.isNil(e)?(this.set("totalLength",o.default.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,r,n=this.attr().points,o=this.get("tCache");return o||(this._setTcache(),o=this.get("tCache")),a.each(o,(function(n,i){t>=n[0]&&t<=n[1]&&(e=(t-n[0])/(n[1]-n[0]),r=i)})),i.default.pointAt(n[r][0],n[r][1],n[r+1][0],n[r+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var r,n,o=0,s=[];a.each(t,(function(a,u){t[u+1]&&((r=[])[0]=o/e,n=i.default.length(a[0],a[1],t[u+1][0],t[u+1][1]),o+=n,r[1]=o/e,s.push(r))})),this.set("tCache",s)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,r=[];return r.push([t[e-1][0],t[e-1][1]]),r.push([t[e][0],t[e][1]]),r},e}(s.default);e.default=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.distanceAtSegment=e.angleAtSegments=e.pointAtSegments=e.lengthOfSegment=void 0;var n=r(40),i=r(33);function o(t){for(var e=0,r=[],n=0;n<t.length-1;n++){var o=t[n],a=t[n+1],s=i.distance(o[0],o[1],a[0],a[1]),u={from:o,to:a,length:s};r.push(u),e+=s}return{segments:r,totalLength:e}}e.lengthOfSegment=function(t){if(t.length<2)return 0;for(var e=0,r=0;r<t.length-1;r++){var n=t[r],o=t[r+1];e+=i.distance(n[0],n[1],o[0],o[1])}return e},e.pointAtSegments=function(t,e){if(e>1||e<0||t.length<2)return null;var r=o(t),i=r.segments,a=r.totalLength;if(0===a)return{x:t[0][0],y:t[0][1]};for(var s=0,u=null,c=0;c<i.length;c++){var h=i[c],f=h.from,l=h.to,d=h.length/a;if(e>=s&&e<=s+d){var p=(e-s)/d;u=n.default.pointAt(f[0],f[1],l[0],l[1],p);break}s+=d}return u},e.angleAtSegments=function(t,e){if(e>1||e<0||t.length<2)return 0;for(var r=o(t),n=r.segments,i=r.totalLength,a=0,s=0,u=0;u<n.length;u++){var c=n[u],h=c.from,f=c.to,l=c.length/i;if(e>=a&&e<=a+l){s=Math.atan2(f[1]-h[1],f[0]-h[0]);break}a+=l}return s},e.distanceAtSegment=function(t,e,r){for(var i=1/0,o=0;o<t.length-1;o++){var a=t[o],s=t[o+1],u=n.default.pointDistance(a[0],a[1],s[0],s[1],e,r);u<i&&(i=u)}return i}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(28),o=r(156),a=r(18),s=r(346),u=r(347),c=r(166),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,e,r,n,i){var o=this.attr(),h=o.x,f=o.y,l=o.width,d=o.height,p=o.radius;if(p){var g=!1;return r&&(g=u.default(h,f,l,d,p,i,t,e)),!g&&n&&(g=c.default(this,t,e)),g}var v=i/2;return n&&r?a.inBox(h-v,f-v,l+v,d+v,t,e):n?a.inBox(h,f,l,d,t,e):r?s.default(h,f,l,d,i,t,e):void 0},e.prototype.createPath=function(t){var e=this.attr(),r=e.x,n=e.y,i=e.width,a=e.height,s=e.radius;if(t.beginPath(),0===s)t.rect(r,n,i,a);else{var u=o.parseRadius(s),c=u[0],h=u[1],f=u[2],l=u[3];t.moveTo(r+c,n),t.lineTo(r+i-h,n),0!==h&&t.arc(r+i-h,n+h,h,-Math.PI/2,0),t.lineTo(r+i,n+a-f),0!==f&&t.arc(r+i-f,n+a-f,f,0,Math.PI/2),t.lineTo(r+l,n+a),0!==l&&t.arc(r+l,n+a-l,l,Math.PI/2,Math.PI),t.lineTo(r,n+c),0!==c&&t.arc(r+c,n+c,c,Math.PI,1.5*Math.PI),t.closePath()}},e}(i.default);e.default=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(18);e.default=function(t,e,r,i,o,a,s){var u=o/2;return n.inBox(t-u,e-u,r,o,a,s)||n.inBox(t+r-u,e-u,o,i,a,s)||n.inBox(t+u,e+i-u,r,o,a,s)||n.inBox(t-u,e+u,o,i,a,s)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(75),i=r(168);e.default=function(t,e,r,o,a,s,u,c){return n.default(t+a,e,t+r-a,e,s,u,c)||n.default(t+r,e+a,t+r,e+o-a,s,u,c)||n.default(t+r-a,e+o,t+a,e+o,s,u,c)||n.default(t,e+o-a,t,e+a,s,u,c)||i.default(t+r-a,e+a,a,1.5*Math.PI,2*Math.PI,s,u,c)||i.default(t+r-a,e+o-a,a,0,.5*Math.PI,s,u,c)||i.default(t+a,e+o-a,a,.5*Math.PI,Math.PI,s,u,c)||i.default(t+a,e+a,a,Math.PI,1.5*Math.PI,s,u,c)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(28),o=r(18),a=r(158),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=a.assembleFont(t)},e.prototype._setText=function(t){var e=null;o.isString(t)&&-1!==t.indexOf("\n")&&(e=t.split("\n")),this.set("textArr",e)},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),e.startsWith("font")&&this._assembleFont(),"text"===e&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,e=t.lineHeight,r=1*t.fontSize;return e?e-r:.14*r},e.prototype._drawTextArr=function(t,e,r){var n,i=this.attrs,s=i.textBaseline,u=i.x,c=i.y,h=1*i.fontSize,f=this._getSpaceingY(),l=a.getTextHeight(i.text,i.fontSize,i.lineHeight);o.each(e,(function(e,i){n=c+i*(f+h)-l+h,"middle"===s&&(n+=l-h-(l-h)/2),"top"===s&&(n+=l-h),r?t.fillText(e,u,n):t.strokeText(e,u,n)}))},e.prototype._drawText=function(t,e){var r=this.attr(),n=r.x,i=r.y,o=this.get("textArr");if(o)this._drawTextArr(t,o,e);else{var a=r.text;e?t.fillText(a,n,i):t.strokeText(a,n,i)}},e.prototype.strokeAndFill=function(t){var e=this.attrs,r=e.lineWidth,n=e.opacity,i=e.strokeOpacity,a=e.fillOpacity;this.isStroke()&&r>0&&(o.isNil(i)||1===i||(t.globalAlpha=n),this.stroke(t)),this.isFill()&&(o.isNil(a)||1===a?this.fill(t):(t.globalAlpha=a,this.fill(t),t.globalAlpha=n)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(i.default);e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(19),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="circle",e.canFill=!0,e.canStroke=!0,e}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,r:0})},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");i.each(e||r,(function(t,e){"x"===e||"y"===e?n.setAttribute("c"+e,t):o.SVG_ATTR_MAP[e]&&n.setAttribute(o.SVG_ATTR_MAP[e],t)}))},e}(r(23).default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(19),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dom",e.canFill=!1,e.canStroke=!1,e}return n.__extends(e,t),e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");if(i.each(e||r,(function(t,e){o.SVG_ATTR_MAP[e]&&n.setAttribute(o.SVG_ATTR_MAP[e],t)})),"function"==typeof r.html){var a=r.html.call(this,r);if(a instanceof Element||a instanceof HTMLDocument){for(var s=n.childNodes,u=s.length-1;u>=0;u--)n.removeChild(s[u]);n.appendChild(a)}else n.innerHTML=a}else n.innerHTML=r.html},e}(r(23).default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(19),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="ellipse",e.canFill=!0,e.canStroke=!0,e}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");i.each(e||r,(function(t,e){"x"===e||"y"===e?n.setAttribute("c"+e,t):o.SVG_ATTR_MAP[e]&&n.setAttribute(o.SVG_ATTR_MAP[e],t)}))},e}(r(23).default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(19),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="image",e.canFill=!1,e.canStroke=!1,e}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,e){var r=this,n=this.attr(),a=this.get("el");i.each(e||n,(function(t,e){"img"===e?r._setImage(n.img):o.SVG_ATTR_MAP[e]&&a.setAttribute(o.SVG_ATTR_MAP[e],t)}))},e.prototype.setAttr=function(t,e){this.attrs[t]=e,"img"===t&&this._setImage(e)},e.prototype._setImage=function(t){var e=this.attr(),r=this.get("el");if(i.isString(t))r.setAttribute("href",t);else if(t instanceof window.Image)e.width||(r.setAttribute("width",t.width),this.attr("width",t.width)),e.height||(r.setAttribute("height",t.height),this.attr("height",t.height)),r.setAttribute("href",t.src);else if(t instanceof HTMLElement&&i.isString(t.nodeName)&&"CANVAS"===t.nodeName.toUpperCase())r.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var n=document.createElement("canvas");n.setAttribute("width",""+t.width),n.setAttribute("height",""+t.height),n.getContext("2d").putImageData(t,0,0),e.width||(r.setAttribute("width",""+t.width),this.attr("width",t.width)),e.height||(r.setAttribute("height",""+t.height),this.attr("height",t.height)),r.setAttribute("href",n.toDataURL())}},e}(r(23).default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(40),o=r(0),a=r(19),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="line",e.canFill=!1,e.canStroke=!0,e}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");o.each(e||r,(function(e,i){if("startArrow"===i||"endArrow"===i)if(e){var s=o.isObject(e)?t.addArrow(r,a.SVG_ATTR_MAP[i]):t.getDefaultArrow(r,a.SVG_ATTR_MAP[i]);n.setAttribute(a.SVG_ATTR_MAP[i],"url(#"+s+")")}else n.removeAttribute(a.SVG_ATTR_MAP[i]);else a.SVG_ATTR_MAP[i]&&n.setAttribute(a.SVG_ATTR_MAP[i],e)}))},e.prototype.getTotalLength=function(){var t=this.attr(),e=t.x1,r=t.y1,n=t.x2,o=t.y2;return i.default.length(e,r,n,o)},e.prototype.getPoint=function(t){var e=this.attr(),r=e.x1,n=e.y1,o=e.x2,a=e.y2;return i.default.pointAt(r,n,o,a,t)},e}(r(23).default);e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(23),a=r(355),s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="marker",e.canFill=!0,e.canStroke=!0,e}return n.__extends(e,t),e.prototype.createPath=function(t){this.get("el").setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return i.isArray(t)?t.map((function(t){return t.join(" ")})).join(""):t},e.prototype._getPath=function(){var t,e=this.attr(),r=e.x,n=e.y,o=e.r||e.radius,s=e.symbol||"circle";return(t=i.isFunction(s)?s:a.default.get(s))?t(r,n,o):(console.warn(t+" symbol is not exist."),null)},e.symbolsFactory=a.default,e}(o.default);e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={circle:function(t,e,r){return[["M",t,e],["m",-r,0],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0]]},square:function(t,e,r){return[["M",t-r,e-r],["L",t+r,e-r],["L",t+r,e+r],["L",t-r,e+r],["Z"]]},diamond:function(t,e,r){return[["M",t-r,e],["L",t,e-r],["L",t+r,e],["L",t,e+r],["Z"]]},triangle:function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e+n],["L",t,e-n],["L",t+r,e+n],["z"]]},triangleDown:function(t,e,r){var n=r*Math.sin(1/3*Math.PI);return[["M",t-r,e-n],["L",t+r,e-n],["L",t,e+n],["Z"]]}};e.default={get:function(t){return n[t]},register:function(t,e){n[t]=e},remove:function(t){delete n[t]},getAll:function(){return n}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(19),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="path",e.canFill=!0,e.canStroke=!0,e}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,e){var r=this,n=this.attr(),a=this.get("el");i.each(e||n,(function(e,s){if("path"===s&&i.isArray(e))a.setAttribute("d",r._formatPath(e));else if("startArrow"===s||"endArrow"===s)if(e){var u=i.isObject(e)?t.addArrow(n,o.SVG_ATTR_MAP[s]):t.getDefaultArrow(n,o.SVG_ATTR_MAP[s]);a.setAttribute(o.SVG_ATTR_MAP[s],"url(#"+u+")")}else a.removeAttribute(o.SVG_ATTR_MAP[s]);else o.SVG_ATTR_MAP[s]&&a.setAttribute(o.SVG_ATTR_MAP[s],e)}))},e.prototype._formatPath=function(t){var e=t.map((function(t){return t.join(" ")})).join("");return~e.indexOf("NaN")?"":e},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var e=this.get("el"),r=this.getTotalLength();if(0===r)return null;var n=e?e.getPointAtLength(t*r):null;return n?{x:n.x,y:n.y}:null},e}(r(23).default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(19),a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polygon",e.canFill=!0,e.canStroke=!0,e}return n.__extends(e,t),e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");i.each(e||r,(function(t,e){"points"===e&&i.isArray(t)&&t.length>=2?n.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):o.SVG_ATTR_MAP[e]&&n.setAttribute(o.SVG_ATTR_MAP[e],t)}))},e}(r(23).default);e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(40),o=r(170),a=r(0),s=r(19),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="polyline",e.canFill=!0,e.canStroke=!0,e}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(e,r,n){t.prototype.onAttrChange.call(this,e,r,n),-1!==["points"].indexOf(e)&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,e){var r=this.attr(),n=this.get("el");a.each(e||r,(function(t,e){"points"===e&&a.isArray(t)&&t.length>=2?n.setAttribute("points",t.map((function(t){return t[0]+","+t[1]})).join(" ")):s.SVG_ATTR_MAP[e]&&n.setAttribute(s.SVG_ATTR_MAP[e],t)}))},e.prototype.getTotalLength=function(){var t=this.attr().points,e=this.get("totalLength");return a.isNil(e)?(this.set("totalLength",o.default.length(t)),this.get("totalLength")):e},e.prototype.getPoint=function(t){var e,r,n=this.attr().points,o=this.get("tCache");return o||(this._setTcache(),o=this.get("tCache")),a.each(o,(function(n,i){t>=n[0]&&t<=n[1]&&(e=(t-n[0])/(n[1]-n[0]),r=i)})),i.default.pointAt(n[r][0],n[r][1],n[r+1][0],n[r+1][1],e)},e.prototype._setTcache=function(){var t=this.attr().points;if(t&&0!==t.length){var e=this.getTotalLength();if(!(e<=0)){var r,n,o=0,s=[];a.each(t,(function(a,u){t[u+1]&&((r=[])[0]=o/e,n=i.default.length(a[0],a[1],t[u+1][0],t[u+1][1]),o+=n,r[1]=o/e,s.push(r))})),this.set("tCache",s)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},e.prototype.getEndTangent=function(){var t=this.attr().points,e=t.length-1,r=[];return r.push([t[e-1][0],t[e-1][1]]),r.push([t[e][0],t[e][1]]),r},e}(r(23).default);e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(23),a=r(19),s=r(360),u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="rect",e.canFill=!0,e.canStroke=!0,e}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,e){var r=this,n=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];i.each(e||n,(function(t,e){-1===u.indexOf(e)||s?-1===u.indexOf(e)&&a.SVG_ATTR_MAP[e]&&o.setAttribute(a.SVG_ATTR_MAP[e],t):(o.setAttribute("d",r._assembleRect(n)),s=!0)}))},e.prototype._assembleRect=function(t){var e=t.x,r=t.y,n=t.width,o=t.height,a=t.radius;if(!a)return"M "+e+","+r+" l "+n+",0 l 0,"+o+" l"+-n+" 0 z";var u=s.parseRadius(a);return i.isArray(a)?1===a.length?u.r1=u.r2=u.r3=u.r4=a[0]:2===a.length?(u.r1=u.r3=a[0],u.r2=u.r4=a[1]):3===a.length?(u.r1=a[0],u.r2=u.r4=a[1],u.r3=a[2]):(u.r1=a[0],u.r2=a[1],u.r3=a[2],u.r4=a[3]):u.r1=u.r2=u.r3=u.r4=a,[["M "+(e+u.r1)+","+r],["l "+(n-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-n)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]].join(" ")},e}(o.default);e.default=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parsePath=e.parseRadius=void 0;var n=r(0),i=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,o=/[^\s\,]+/gi;e.parseRadius=function(t){var e=0,r=0,i=0,o=0;return n.isArray(t)?1===t.length?e=r=i=o=t[0]:2===t.length?(e=i=t[0],r=o=t[1]):3===t.length?(e=t[0],r=o=t[1],i=t[2]):(e=t[0],r=t[1],i=t[2],o=t[3]):e=r=i=o=t,{r1:e,r2:r,r3:i,r4:o}},e.parsePath=function(t){return t=t||[],n.isArray(t)?t:n.isString(t)?(t=t.match(i),n.each(t,(function(e,r){if((e=e.match(o))[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}n.each(e,(function(t,r){isNaN(t)||(e[r]=+t)})),t[r]=e})),t):void 0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(0),o=r(132),a=r(61),s=r(19),u=r(23),c={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},h={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},f={left:"left",start:"left",center:"middle",right:"end",end:"end"},l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="text",e.canFill=!0,e.canStroke=!0,e}return n.__extends(e,t),e.prototype.getDefaultAttrs=function(){var e=t.prototype.getDefaultAttrs.call(this);return n.__assign(n.__assign({},e),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,e){var r=this,n=this.attr(),o=this.get("el");this._setFont(),i.each(e||n,(function(t,e){"text"===e?r._setText(""+t):"matrix"===e&&t?a.setTransform(r):s.SVG_ATTR_MAP[e]&&o.setAttribute(s.SVG_ATTR_MAP[e],t)})),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),e=this.attr(),r=e.textBaseline,n=e.textAlign,i=o.detect();i&&"firefox"===i.name?t.setAttribute("dominant-baseline",h[r]||"alphabetic"):t.setAttribute("alignment-baseline",c[r]||"baseline"),t.setAttribute("text-anchor",f[n]||"left")},e.prototype._setText=function(t){var e=this.get("el"),r=this.attr(),n=r.x,o=r.textBaseline,a=void 0===o?"bottom":o;if(t)if(~t.indexOf("\n")){var s=t.split("\n"),u=s.length-1,c="";i.each(s,(function(t,e){0===e?"alphabetic"===a?c+='<tspan x="'+n+'" dy="'+-u+'em">'+t+"</tspan>":"top"===a?c+='<tspan x="'+n+'" dy="0.9em">'+t+"</tspan>":"middle"===a?c+='<tspan x="'+n+'" dy="'+-(u-1)/2+'em">'+t+"</tspan>":"bottom"===a?c+='<tspan x="'+n+'" dy="-'+(u+.3)+'em">'+t+"</tspan>":"hanging"===a&&(c+='<tspan x="'+n+'" dy="'+(-(u-1)-.3)+'em">'+t+"</tspan>"):c+='<tspan x="'+n+'" dy="1em">'+t+"</tspan>"})),e.innerHTML=c}else e.innerHTML=t;else e.innerHTML=""},e}(u.default);e.default=l},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(363),o=r(364),a=r(365),s=r(366),u=r(367),c=r(29),h=function(){function t(t){var e=c.createSVGElement("defs"),r=n.uniqueId("defs_");e.id=r,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}return t.prototype.find=function(t,e){for(var r=this.children,n=null,i=0;i<r.length;i++)if(r[i].match(t,e)){n=r[i].id;break}return n},t.prototype.findById=function(t){for(var e=this.children,r=null,n=0;n<e.length;n++)if(e[n].id===t){r=e[n];break}return r},t.prototype.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},t.prototype.getDefaultArrow=function(t,e){var r=t.stroke||t.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new a.default(t,e);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},t.prototype.addGradient=function(t){var e=new i.default(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addArrow=function(t,e){var r=new a.default(t,e);return this.el.appendChild(r.el),this.add(r),r.id},t.prototype.addShadow=function(t){var e=new o.default(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addPattern=function(t){var e=new u.default(t);return this.el.appendChild(e.el),this.add(e),e.id},t.prototype.addClip=function(t){var e=new s.default(t);return this.el.appendChild(e.el),this.add(e),e.id},t}();e.default=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(29),o=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,a=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,s=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function u(t){var e=t.match(s);if(!e)return"";var r="";return e.sort((function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])})),n.each(e,(function(t){t=t.split(":"),r+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'})),r}var c=function(){function t(t){this.cfg={};var e=null,r=n.uniqueId("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var r,i,a=o.exec(t),s=n.mod(n.toRadian(parseFloat(a[1])),2*Math.PI),c=a[2];s>=0&&s<.5*Math.PI?(r={x:0,y:0},i={x:1,y:1}):.5*Math.PI<=s&&s<Math.PI?(r={x:1,y:0},i={x:0,y:1}):Math.PI<=s&&s<1.5*Math.PI?(r={x:1,y:1},i={x:0,y:0}):(r={x:0,y:1},i={x:1,y:0});var h=Math.tan(s),f=h*h,l=(i.x-r.x+h*(i.y-r.y))/(f+1)+r.x,d=h*(i.x-r.x+h*(i.y-r.y))/(f+1)+r.y;e.setAttribute("x1",r.x),e.setAttribute("y1",r.y),e.setAttribute("x2",l),e.setAttribute("y2",d),e.innerHTML=u(c)}(t,e=i.createSVGElement("linearGradient")):function(t,e){var r=a.exec(t),n=parseFloat(r[1]),i=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];e.setAttribute("cx",n),e.setAttribute("cy",i),e.setAttribute("r",o),e.innerHTML=u(s)}(t,e=i.createSVGElement("radialGradient")),e.setAttribute("id",r),this.el=e,this.id=r,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}();e.default=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(29),o={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},a={x:"-40%",y:"-40%",width:"200%",height:"200%"},s=function(){function t(t){this.type="filter",this.cfg={},this.type="filter";var e=i.createSVGElement("filter");return n.each(a,(function(t,r){e.setAttribute(r,t)})),this.el=e,this.id=n.uniqueId("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}return t.prototype.match=function(t,e){if(this.type!==t)return!1;var r=!0,i=this.cfg;return n.each(Object.keys(i),(function(t){if(i[t]!==e[t])return r=!1,!1})),r},t.prototype.update=function(t,e){var r=this.cfg;return r[o[t]]=e,this._parseShadow(r,this.el),this},t.prototype._parseShadow=function(t,e){var r='<feDropShadow\n      dx="'+(t.dx||0)+'"\n      dy="'+(t.dy||0)+'"\n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=r},t}();e.default=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(29),o=function(){function t(t,e){this.cfg={};var r=i.createSVGElement("marker"),o=n.uniqueId("marker_");r.setAttribute("id",o);var a=i.createSVGElement("path");a.setAttribute("stroke",t.stroke||"none"),a.setAttribute("fill",t.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=o;var s=t["marker-start"===e?"startArrow":"endArrow"];return this.stroke=t.stroke||"#000",!0===s?this._setDefaultPath(e,a):(this.cfg=s,this._setMarker(t.lineWidth,a)),this}return t.prototype.match=function(){return!1},t.prototype._setDefaultPath=function(t,e){var r=this.el;e.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},t.prototype._setMarker=function(t,e){var r=this.el,i=this.cfg.path,o=this.cfg.d;n.isArray(i)&&(i=i.map((function(t){return t.join(" ")})).join("")),e.setAttribute("d",i),r.appendChild(e),o&&r.setAttribute("refX",""+o/t)},t.prototype.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(29),o=function(){function t(t){this.type="clip",this.cfg={};var e=i.createSVGElement("clipPath");this.el=e,this.id=n.uniqueId("clip_"),e.id=this.id;var r=t.cfg.el;return e.appendChild(r),this.cfg=t,this}return t.prototype.match=function(){return!1},t.prototype.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}();e.default=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(29),o=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,a=function(){function t(t){this.cfg={};var e=i.createSVGElement("pattern");e.setAttribute("patternUnits","userSpaceOnUse");var r=i.createSVGElement("image");e.appendChild(r);var a=n.uniqueId("pattern_");e.id=a,this.el=e,this.id=a,this.cfg=t;var s=o.exec(t)[2];r.setAttribute("href",s);var u=new Image;function c(){e.setAttribute("width",""+u.width),e.setAttribute("height",""+u.height)}return s.match(/^data:/i)||(u.crossOrigin="Anonymous"),u.src=s,u.complete?c():(u.onload=c,u.src=u.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}();e.default=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(26),i=r(0);n.angle=function(t,e){var r=n.dot(t,e)/(n.length(t)*n.length(e));return Math.acos(i.clamp(r,-1,1))},n.direction=function(t,e){return t[0]*e[1]-e[0]*t[1]},n.angleTo=function(t,e,r){var i=n.angle(t,e),o=n.direction(t,e)>=0;return r?o?2*Math.PI-i:i:o?i:2*Math.PI-i},n.vertical=function(t,e,r){return r?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t},e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(131);e.default=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(172);e.default=function(t,e){var r=t?n.clone(t):[1,0,0,0,1,0,0,0,1];return n.each(e,(function(t){switch(t[0]){case"t":i.default.translate(r,r,[t[1],t[2]]);break;case"s":i.default.scale(r,r,[t[1],t[2]]);break;case"r":i.default.rotate(r,r,t[1]);break;case"m":i.default.multiply(r,r,t[1]);break;default:return!1}})),r}},function(t,e,r){var n=r(372);t.exports={Graph:n.Graph,json:r(475),alg:r(476),version:n.version}},function(t,e,r){t.exports={Graph:r(111),version:r(474)}},function(t,e,r){var n=r(173);t.exports=function(t){return n(t,4)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,r){var n=r(78),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0)&&(r==e.length-1?e.pop():i.call(e,r,1),--this.size,!0)}},function(t,e,r){var n=r(78);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},function(t,e,r){var n=r(78);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,r){var n=r(78);t.exports=function(t,e){var r=this.__data__,i=n(r,t);return i<0?(++this.size,r.push([t,e])):r[i][1]=e,this}},function(t,e,r){var n=r(77);t.exports=function(){this.__data__=new n,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,r){var n=r(77),i=r(112),o=r(113);t.exports=function(t,e){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new o(a)}return r.set(t,e),this.size=r.size,this}},function(t,e,r){var n=r(62),i=r(388),o=r(25),a=r(175),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,h=u.toString,f=c.hasOwnProperty,l=RegExp("^"+h.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(n(t)?l:s).test(a(t))}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e,r){var n=r(52),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=n?n.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),r=t[s];try{t[s]=void 0;var n=!0}catch(t){}var i=a.call(t);return n&&(e?t[s]=r:delete t[s]),i}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n,i=r(389),o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!o&&o in t}},function(t,e,r){var n=r(31)["__core-js_shared__"];t.exports=n},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,r){var n=r(392),i=r(77),o=r(112);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},function(t,e,r){var n=r(393),i=r(394),o=r(395),a=r(396),s=r(397);function u(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}u.prototype.clear=n,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},function(t,e,r){var n=r(79);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,r){var n=r(79),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(e,t)?e[t]:void 0}},function(t,e,r){var n=r(79),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:i.call(e,t)}},function(t,e,r){var n=r(79);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,r){var n=r(80);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=r(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,r){var n=r(80);t.exports=function(t){return n(this,t).get(t)}},function(t,e,r){var n=r(80);t.exports=function(t){return n(this,t).has(t)}},function(t,e,r){var n=r(80);t.exports=function(t,e){var r=n(this,t),i=r.size;return r.set(t,e),this.size+=r.size==i?0:1,this}},function(t,e,r){var n=r(63),i=r(41);t.exports=function(t,e){return t&&n(e,i(e),t)}},function(t,e){t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},function(t,e,r){var n=r(45),i=r(34);t.exports=function(t){return i(t)&&"[object Arguments]"==n(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,r){var n=r(45),i=r(116),o=r(34),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[n(t)]}},function(t,e,r){var n=r(178)(Object.keys,Object);t.exports=n},function(t,e,r){var n=r(63),i=r(46);t.exports=function(t,e){return t&&n(e,i(e),t)}},function(t,e,r){var n=r(25),i=r(85),o=r(411),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=i(t),r=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&r.push(s);return r}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},function(t,e,r){var n=r(63),i=r(119);t.exports=function(t,e){return n(t,i(t),e)}},function(t,e,r){var n=r(63),i=r(183);t.exports=function(t,e){return n(t,i(t),e)}},function(t,e,r){var n=r(185),i=r(183),o=r(46);t.exports=function(t){return n(t,o,i)}},function(t,e,r){var n=r(44)(r(31),"DataView");t.exports=n},function(t,e,r){var n=r(44)(r(31),"Promise");t.exports=n},function(t,e,r){var n=r(44)(r(31),"WeakMap");t.exports=n},function(t,e){var r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},function(t,e,r){var n=r(121),i=r(420),o=r(421),a=r(422),s=r(188);t.exports=function(t,e,r){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return n(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,r);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Set]":return new u;case"[object Symbol]":return a(t)}}},function(t,e,r){var n=r(121);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},function(t,e){var r=/\w*$/;t.exports=function(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,r){var n=r(52),i=n?n.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},function(t,e,r){var n=r(424),i=r(84),o=r(117),a=o&&o.isMap,s=a?i(a):n;t.exports=s},function(t,e,r){var n=r(54),i=r(34);t.exports=function(t){return i(t)&&"[object Map]"==n(t)}},function(t,e,r){var n=r(426),i=r(84),o=r(117),a=o&&o.isSet,s=a?i(a):n;t.exports=s},function(t,e,r){var n=r(54),i=r(34);t.exports=function(t){return i(t)&&"[object Set]"==n(t)}},function(t,e){t.exports=function(t){return function(e,r,n){for(var i=-1,o=Object(e),a=n(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===r(o[u],u,o))break}return e}}},function(t,e,r){var n=r(38);t.exports=function(t,e){return function(r,i){if(null==r)return r;if(!n(r))return t(r,i);for(var o=r.length,a=e?o:-1,s=Object(r);(e?a--:++a<o)&&!1!==i(s[a],a,s););return r}}},function(t,e,r){var n=r(87);t.exports=function(t,e){var r=[];return n(t,(function(t,n,i){e(t,n,i)&&r.push(t)})),r}},function(t,e,r){var n=r(431),i=r(439),o=r(200);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(r){return r===t||n(r,t,e)}}},function(t,e,r){var n=r(76),i=r(195);t.exports=function(t,e,r,o){var a=r.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var c=r[a];if(u&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<s;){var h=(c=r[a])[0],f=t[h],l=c[1];if(u&&c[2]){if(void 0===f&&!(h in t))return!1}else{var d=new n;if(o)var p=o(f,l,h,t,e,d);if(!(void 0===p?i(l,f,3,o,d):p))return!1}}return!0}},function(t,e,r){var n=r(76),i=r(196),o=r(436),a=r(438),s=r(54),u=r(15),c=r(53),h=r(65),f="[object Object]",l=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,d,p,g){var v=u(t),y=u(e),m=v?"[object Array]":s(t),b=y?"[object Array]":s(e),x=(m="[object Arguments]"==m?f:m)==f,w=(b="[object Arguments]"==b?f:b)==f,M=m==b;if(M&&c(t)){if(!c(e))return!1;v=!0,x=!1}if(M&&!x)return g||(g=new n),v||h(t)?i(t,e,r,d,p,g):o(t,e,m,r,d,p,g);if(!(1&r)){var S=x&&l.call(t,"__wrapped__"),_=w&&l.call(e,"__wrapped__");if(S||_){var k=S?t.value():t,O=_?e.value():e;return g||(g=new n),p(k,O,r,d,g)}}return!!M&&(g||(g=new n),a(t,e,r,d,p,g))}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}},function(t,e,r){var n=r(52),i=r(187),o=r(51),a=r(196),s=r(437),u=r(125),c=n?n.prototype:void 0,h=c?c.valueOf:void 0;t.exports=function(t,e,r,n,c,f,l){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!f(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=s;case"[object Set]":var p=1&n;if(d||(d=u),t.size!=e.size&&!p)return!1;var g=l.get(t);if(g)return g==e;n|=2,l.set(t,e);var v=a(d(t),d(e),n,c,f,l);return l.delete(t),v;case"[object Symbol]":if(h)return h.call(t)==h.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}},function(t,e,r){var n=r(184),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,o,a,s){var u=1&r,c=n(t),h=c.length;if(h!=n(e).length&&!u)return!1;for(var f=h;f--;){var l=c[f];if(!(u?l in e:i.call(e,l)))return!1}var d=s.get(t),p=s.get(e);if(d&&p)return d==e&&p==t;var g=!0;s.set(t,e),s.set(e,t);for(var v=u;++f<h;){var y=t[l=c[f]],m=e[l];if(o)var b=u?o(m,y,l,e,t,s):o(y,m,l,t,e,s);if(!(void 0===b?y===m||a(y,m,r,o,s):b)){g=!1;break}v||(v="constructor"==l)}if(g&&!v){var x=t.constructor,w=e.constructor;x==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(g=!1)}return s.delete(t),s.delete(e),g}},function(t,e,r){var n=r(199),i=r(41);t.exports=function(t){for(var e=i(t),r=e.length;r--;){var o=e[r],a=t[o];e[r]=[o,a,n(a)]}return e}},function(t,e,r){var n=r(195),i=r(441),o=r(202),a=r(126),s=r(199),u=r(200),c=r(66);t.exports=function(t,e){return a(t)&&s(e)?u(c(t),e):function(r){var a=i(r,t);return void 0===a&&a===e?o(r,t):n(e,a,3)}}},function(t,e,r){var n=r(88);t.exports=function(t,e,r){var i=null==t?void 0:n(t,e);return void 0===i?r:i}},function(t,e,r){var n=r(443),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,r,n,i){e.push(n?i.replace(o,"$1"):r||t)})),e}));t.exports=a},function(t,e,r){var n=r(444);t.exports=function(t){var e=n(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}},function(t,e,r){var n=r(113);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function r(){var n=arguments,i=e?e.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var a=t.apply(this,n);return r.cache=o.set(i,a)||o,a};return r.cache=new(i.Cache||n),r}i.Cache=n,t.exports=i},function(t,e,r){var n=r(52),i=r(90),o=r(15),a=r(55),s=n?n.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,r){var n=r(204),i=r(448),o=r(126),a=r(66);t.exports=function(t){return o(t)?n(a(t)):i(t)}},function(t,e,r){var n=r(88);t.exports=function(t){return function(e){return n(e,t)}}},function(t,e){var r=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&r.call(t,e)}},function(t,e,r){var n=r(118),i=r(54),o=r(64),a=r(15),s=r(38),u=r(53),c=r(85),h=r(65),f=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(s(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||u(t)||h(t)||o(t)))return!t.length;var e=i(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!n(t).length;for(var r in t)if(f.call(t,r))return!1;return!0}},function(t,e){t.exports=function(t,e,r,n){var i=-1,o=null==t?0:t.length;for(n&&o&&(r=t[++i]);++i<o;)r=e(r,t[i],i,t);return r}},function(t,e){t.exports=function(t,e,r,n,i){return i(t,(function(t,i,o){r=n?(n=!1,t):e(r,t,i,o)})),r}},function(t,e,r){var n=r(118),i=r(54),o=r(38),a=r(454),s=r(455);t.exports=function(t){if(null==t)return 0;if(o(t))return a(t)?s(t):t.length;var e=i(t);return"[object Map]"==e||"[object Set]"==e?t.size:n(t).length}},function(t,e,r){var n=r(45),i=r(15),o=r(34);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==n(t)}},function(t,e,r){var n=r(456),i=r(457),o=r(458);t.exports=function(t){return i(t)?o(t):n(t)}},function(t,e,r){var n=r(204)("length");t.exports=n},function(t,e){var r=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");t.exports=function(t){return r.test(t)}},function(t,e){var r="[\\ud800-\\udfff]",n="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^\\ud800-\\udfff]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+n+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[o,a,s].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),h="(?:"+[o+n+"?",n,a,s,r].join("|")+")",f=RegExp(i+"(?="+i+")|"+h+c,"g");t.exports=function(t){for(var e=f.lastIndex=0;f.test(t);)++e;return e}},function(t,e,r){var n=r(114),i=r(190),o=r(123),a=r(39),s=r(86),u=r(15),c=r(53),h=r(62),f=r(25),l=r(65);t.exports=function(t,e,r){var d=u(t),p=d||c(t)||l(t);if(e=a(e,4),null==r){var g=t&&t.constructor;r=p?d?new g:[]:f(t)&&h(g)?i(s(t)):{}}return(p?n:o)(t,(function(t,n,i){return e(r,t,n,i)})),r}},function(t,e,r){var n=r(127),i=r(91),o=r(465),a=r(213),s=i((function(t){return o(n(t,1,a,!0))}));t.exports=s},function(t,e,r){var n=r(52),i=r(64),o=r(15),a=n?n.isConcatSpreadable:void 0;t.exports=function(t){return o(t)||i(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},function(t,e,r){var n=r(122),i=r(176),o=r(47),a=i?function(t,e){return i(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:o;t.exports=a},function(t,e){var r=Date.now;t.exports=function(t){var e=0,n=0;return function(){var i=r(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,r){var n=r(197),i=r(466),o=r(470),a=r(198),s=r(471),u=r(125);t.exports=function(t,e,r){var c=-1,h=i,f=t.length,l=!0,d=[],p=d;if(r)l=!1,h=o;else if(f>=200){var g=e?null:s(t);if(g)return u(g);l=!1,h=a,p=new n}else p=e?[]:d;t:for(;++c<f;){var v=t[c],y=e?e(v):v;if(v=r||0!==v?v:0,l&&y==y){for(var m=p.length;m--;)if(p[m]===y)continue t;e&&p.push(y),d.push(v)}else h(p,y,r)||(p!==d&&p.push(y),d.push(v))}return d}},function(t,e,r){var n=r(467);t.exports=function(t,e){return!!(null==t?0:t.length)&&n(t,e,0)>-1}},function(t,e,r){var n=r(212),i=r(468),o=r(469);t.exports=function(t,e,r){return e==e?o(t,e,r):n(t,i,r)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,r){for(var n=r-1,i=t.length;++n<i;)if(t[n]===e)return n;return-1}},function(t,e){t.exports=function(t,e,r){for(var n=-1,i=null==t?0:t.length;++n<i;)if(r(e,t[n]))return!0;return!1}},function(t,e,r){var n=r(186),i=r(472),o=r(125),a=n&&1/o(new n([,-0]))[1]==1/0?function(t){return new n(t)}:i;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,r){var n=r(90);t.exports=function(t,e){return n(e,(function(e){return t[e]}))}},function(t,e){t.exports="2.1.8"},function(t,e,r){var n=r(24),i=r(111);function o(t){return n.map(t.nodes(),(function(e){var r=t.node(e),i=t.parent(e),o={v:e};return n.isUndefined(r)||(o.value=r),n.isUndefined(i)||(o.parent=i),o}))}function a(t){return n.map(t.edges(),(function(e){var r=t.edge(e),i={v:e.v,w:e.w};return n.isUndefined(e.name)||(i.name=e.name),n.isUndefined(r)||(i.value=r),i}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:o(t),edges:a(t)};n.isUndefined(t.graph())||(e.value=n.clone(t.graph()));return e},read:function(t){var e=new i(t.options).setGraph(t.value);return n.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),n.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},function(t,e,r){t.exports={components:r(477),dijkstra:r(215),dijkstraAll:r(478),findCycles:r(479),floydWarshall:r(480),isAcyclic:r(481),postorder:r(482),preorder:r(483),prim:r(484),tarjan:r(217),topsort:r(218)}},function(t,e,r){var n=r(24);t.exports=function(t){var e,r={},i=[];function o(i){n.has(r,i)||(r[i]=!0,e.push(i),n.each(t.successors(i),o),n.each(t.predecessors(i),o))}return n.each(t.nodes(),(function(t){e=[],o(t),e.length&&i.push(e)})),i}},function(t,e,r){var n=r(215),i=r(24);t.exports=function(t,e,r){return i.transform(t.nodes(),(function(i,o){i[o]=n(t,o,e,r)}),{})}},function(t,e,r){var n=r(24),i=r(217);t.exports=function(t){return n.filter(i(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},function(t,e,r){var n=r(24);t.exports=function(t,e,r){return function(t,e,r){var n={},i=t.nodes();return i.forEach((function(t){n[t]={},n[t][t]={distance:0},i.forEach((function(e){t!==e&&(n[t][e]={distance:Number.POSITIVE_INFINITY})})),r(t).forEach((function(r){var i=r.v===t?r.w:r.v,o=e(r);n[t][i]={distance:o,predecessor:t}}))})),i.forEach((function(t){var e=n[t];i.forEach((function(r){var o=n[r];i.forEach((function(r){var n=o[t],i=e[r],a=o[r],s=n.distance+i.distance;s<a.distance&&(a.distance=s,a.predecessor=i.predecessor)}))}))})),n}(t,e||i,r||function(e){return t.outEdges(e)})};var i=n.constant(1)},function(t,e,r){var n=r(218);t.exports=function(t){try{n(t)}catch(t){if(t instanceof n.CycleException)return!1;throw t}return!0}},function(t,e,r){var n=r(219);t.exports=function(t,e){return n(t,e,"post")}},function(t,e,r){var n=r(219);t.exports=function(t,e){return n(t,e,"pre")}},function(t,e,r){var n=r(24),i=r(111),o=r(216);t.exports=function(t,e){var r,a=new i,s={},u=new o;function c(t){var n=t.v===r?t.w:t.v,i=u.priority(n);if(void 0!==i){var o=e(t);o<i&&(s[n]=r,u.decrease(n,o))}}if(0===t.nodeCount())return a;n.each(t.nodes(),(function(t){u.add(t,Number.POSITIVE_INFINITY),a.setNode(t)})),u.decrease(t.nodes()[0],0);var h=!1;for(;u.size()>0;){if(r=u.removeMin(),n.has(s,r))a.setEdge(r,s[r]);else{if(h)throw new Error("Input graph is not connected: "+t);h=!0}t.nodeEdges(r).forEach(c)}return a}},function(t,e,r){"use strict";var n=r(13),i=r(523),o=r(526),a=r(527),s=r(20).normalizeRanks,u=r(529),c=r(20).removeEmptyRanks,h=r(530),f=r(531),l=r(532),d=r(533),p=r(542),g=r(20),v=r(30).Graph;t.exports=function(t,e){var r=e&&e.debugTiming?g.time:g.notime;r("layout",(function(){var e=r("  buildLayoutGraph",(function(){return function(t){var e=new v({multigraph:!0,compound:!0}),r=O(t.graph());return e.setGraph(n.merge({},m,k(r,y),n.pick(r,b))),n.forEach(t.nodes(),(function(r){var i=O(t.node(r));e.setNode(r,n.defaults(k(i,x),w)),e.setParent(r,t.parent(r))})),n.forEach(t.edges(),(function(r){var i=O(t.edge(r));e.setEdge(r,n.merge({},S,k(i,M),n.pick(i,_)))})),e}(t)}));r("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,n.forEach(t.edges(),(function(r){var n=t.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){n.forEach(t.edges(),(function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){i.run(t)})),e("    nestingGraph.run",(function(){h.run(t)})),e("    rank",(function(){a(g.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),i={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e:e};g.addDummyNode(t,"edge-proxy",i,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){h.cleanup(t)})),e("    normalizeRanks",(function(){s(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;n.forEach(t.nodes(),(function(r){var i=t.node(r);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=n.max(e,i.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){n.forEach(t.nodes(),(function(e){var r=t.node(e);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){o.run(t)})),e("    parentDummyChains",(function(){u(t)})),e("    addBorderSegments",(function(){f(t)})),e("    order",(function(){d(t)})),e("    insertSelfEdges",(function(){!function(t){var e=g.buildLayerMatrix(t);n.forEach(e,(function(e){var r=0;n.forEach(e,(function(e,i){var o=t.node(e);o.order=i+r,n.forEach(o.selfEdges,(function(e){g.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:o.rank,order:i+ ++r,e:e.e,label:e.label},"_se")})),delete o.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){l.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){n.forEach(t.nodes(),(function(e){var r=t.node(e);if("selfedge"===r.dummy){var n=t.node(r.e.v),i=n.x+n.width/2,o=n.y,a=r.x-i,s=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:i+2*a/3,y:o-s},{x:i+5*a/6,y:o-s},{x:i+a,y:o},{x:i+5*a/6,y:o+s},{x:i+2*a/3,y:o+s}],r.label.x=r.x,r.label.y=r.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){n.forEach(t.nodes(),(function(e){if(t.children(e).length){var r=t.node(e),i=t.node(r.borderTop),o=t.node(r.borderBottom),a=t.node(n.last(r.borderLeft)),s=t.node(n.last(r.borderRight));r.width=Math.abs(s.x-a.x),r.height=Math.abs(o.y-i.y),r.x=a.x+r.width/2,r.y=i.y+r.height/2}})),n.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){o.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);if(n.has(r,"x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){l.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,o=0,a=t.graph(),s=a.marginx||0,u=a.marginy||0;function c(t){var n=t.x,a=t.y,s=t.width,u=t.height;e=Math.min(e,n-s/2),r=Math.max(r,n+s/2),i=Math.min(i,a-u/2),o=Math.max(o,a+u/2)}n.forEach(t.nodes(),(function(e){c(t.node(e))})),n.forEach(t.edges(),(function(e){var r=t.edge(e);n.has(r,"x")&&c(r)})),e-=s,i-=u,n.forEach(t.nodes(),(function(r){var n=t.node(r);n.x-=e,n.y-=i})),n.forEach(t.edges(),(function(r){var o=t.edge(r);n.forEach(o.points,(function(t){t.x-=e,t.y-=i})),n.has(o,"x")&&(o.x-=e),n.has(o,"y")&&(o.y-=i)})),a.width=r-e+s,a.height=o-i+u}(t)})),e("    assignNodeIntersects",(function(){!function(t){n.forEach(t.edges(),(function(e){var r,n,i=t.edge(e),o=t.node(e.v),a=t.node(e.w);i.points?(r=i.points[0],n=i.points[i.points.length-1]):(i.points=[],r=a,n=o),i.points.unshift(g.intersectRect(o,r)),i.points.push(g.intersectRect(a,n))}))}(t)})),e("    reversePoints",(function(){!function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);r.reversed&&r.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){i.undo(t)}))}(e,r)})),r("  updateInputGraph",(function(){!function(t,e){n.forEach(t.nodes(),(function(r){var n=t.node(r),i=e.node(r);n&&(n.x=i.x,n.y=i.y,e.children(r).length&&(n.width=i.width,n.height=i.height))})),n.forEach(t.edges(),(function(r){var i=t.edge(r),o=e.edge(r);i.points=o.points,n.has(o,"x")&&(i.x=o.x,i.y=o.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],x=["width","height"],w={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],S={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_=["labelpos"];function k(t,e){return n.mapValues(n.pick(t,e),Number)}function O(t){var e={};return n.forEach(t,(function(t,r){e[r.toLowerCase()]=t})),e}},function(t,e,r){var n=r(173);t.exports=function(t){return n(t,5)}},function(t,e,r){var n=r(91),i=r(51),o=r(92),a=r(46),s=Object.prototype,u=s.hasOwnProperty,c=n((function(t,e){t=Object(t);var r=-1,n=e.length,c=n>2?e[2]:void 0;for(c&&o(e[0],e[1],c)&&(n=1);++r<n;)for(var h=e[r],f=a(h),l=-1,d=f.length;++l<d;){var p=f[l],g=t[p];(void 0===g||i(g,s[p])&&!u.call(t,p))&&(t[p]=h[p])}return t}));t.exports=c},function(t,e,r){var n=r(489)(r(490));t.exports=n},function(t,e,r){var n=r(39),i=r(38),o=r(41);t.exports=function(t){return function(e,r,a){var s=Object(e);if(!i(e)){var u=n(r,3);e=o(e),r=function(t){return u(s[t],t,s)}}var c=t(e,r,a);return c>-1?s[u?e[c]:c]:void 0}}},function(t,e,r){var n=r(212),i=r(39),o=r(491),a=Math.max;t.exports=function(t,e,r){var s=null==t?0:t.length;if(!s)return-1;var u=null==r?0:o(r);return u<0&&(u=a(s+u,0)),n(t,i(e,3),u)}},function(t,e,r){var n=r(220);t.exports=function(t){var e=n(t),r=e%1;return e==e?r?e-r:e:0}},function(t,e,r){var n=r(25),i=r(55),o=/^\s+|\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var r=s.test(t);return r||u.test(t)?c(t.slice(2),r?2:8):a.test(t)?NaN:+t}},function(t,e,r){var n=r(124),i=r(193),o=r(46);t.exports=function(t,e){return null==t?t:n(t,i(e),o)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,r){var n=r(82),i=r(123),o=r(39);t.exports=function(t,e){var r={};return e=o(e,3),i(t,(function(t,i,o){n(r,i,e(t,i,o))})),r}},function(t,e,r){var n=r(128),i=r(497),o=r(47);t.exports=function(t){return t&&t.length?n(t,o,i):void 0}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,r){var n=r(499),i=r(503)((function(t,e,r){n(t,e,r)}));t.exports=i},function(t,e,r){var n=r(76),i=r(222),o=r(124),a=r(500),s=r(25),u=r(46),c=r(223);t.exports=function t(e,r,h,f,l){e!==r&&o(r,(function(o,u){if(l||(l=new n),s(o))a(e,r,u,h,t,f,l);else{var d=f?f(c(e,u),o,u+"",e,r,l):void 0;void 0===d&&(d=o),i(e,u,d)}}),u)}},function(t,e,r){var n=r(222),i=r(179),o=r(188),a=r(180),s=r(189),u=r(64),c=r(15),h=r(213),f=r(53),l=r(62),d=r(25),p=r(501),g=r(65),v=r(223),y=r(502);t.exports=function(t,e,r,m,b,x,w){var M=v(t,r),S=v(e,r),_=w.get(S);if(_)n(t,r,_);else{var k=x?x(M,S,r+"",t,e,w):void 0,O=void 0===k;if(O){var E=c(S),j=!E&&f(S),C=!E&&!j&&g(S);k=S,E||j||C?c(M)?k=M:h(M)?k=a(M):j?(O=!1,k=i(S,!0)):C?(O=!1,k=o(S,!0)):k=[]:p(S)||u(S)?(k=M,u(M)?k=y(M):d(M)&&!l(M)||(k=s(S))):O=!1}O&&(w.set(S,k),b(k,S,m,x,w),w.delete(S)),n(t,r,k)}}},function(t,e,r){var n=r(45),i=r(86),o=r(34),a=Function.prototype,s=Object.prototype,u=a.toString,c=s.hasOwnProperty,h=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=n(t))return!1;var e=i(t);if(null===e)return!0;var r=c.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&u.call(r)==h}},function(t,e,r){var n=r(63),i=r(46);t.exports=function(t){return n(t,i(t))}},function(t,e,r){var n=r(91),i=r(92);t.exports=function(t){return n((function(e,r){var n=-1,o=r.length,a=o>1?r[o-1]:void 0,s=o>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&i(r[0],r[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++n<o;){var u=r[n];u&&t(e,u,n,a)}return e}))}},function(t,e,r){var n=r(128),i=r(224),o=r(47);t.exports=function(t){return t&&t.length?n(t,o,i):void 0}},function(t,e,r){var n=r(128),i=r(39),o=r(224);t.exports=function(t,e){return t&&t.length?n(t,i(e,2),o):void 0}},function(t,e,r){var n=r(31);t.exports=function(){return n.Date.now()}},function(t,e,r){var n=r(508),i=r(511)((function(t,e){return null==t?{}:n(t,e)}));t.exports=i},function(t,e,r){var n=r(509),i=r(202);t.exports=function(t,e){return n(t,e,(function(e,r){return i(t,r)}))}},function(t,e,r){var n=r(88),i=r(510),o=r(89);t.exports=function(t,e,r){for(var a=-1,s=e.length,u={};++a<s;){var c=e[a],h=n(t,c);r(h,c)&&i(u,o(c,t),h)}return u}},function(t,e,r){var n=r(81),i=r(89),o=r(83),a=r(25),s=r(66);t.exports=function(t,e,r,u){if(!a(t))return t;for(var c=-1,h=(e=i(e,t)).length,f=h-1,l=t;null!=l&&++c<h;){var d=s(e[c]),p=r;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=f){var g=l[d];void 0===(p=u?u(g,d,l):void 0)&&(p=a(g)?g:o(e[c+1])?[]:{})}n(l,d,p),l=l[d]}return t}},function(t,e,r){var n=r(221),i=r(210),o=r(211);t.exports=function(t){return o(i(t,void 0,n),t+"")}},function(t,e,r){var n=r(513)();t.exports=n},function(t,e,r){var n=r(514),i=r(92),o=r(220);t.exports=function(t){return function(e,r,a){return a&&"number"!=typeof a&&i(e,r,a)&&(r=a=void 0),e=o(e),void 0===r?(r=e,e=0):r=o(r),a=void 0===a?e<r?1:-1:o(a),n(e,r,a,t)}}},function(t,e){var r=Math.ceil,n=Math.max;t.exports=function(t,e,i,o){for(var a=-1,s=n(r((e-t)/(i||1)),0),u=Array(s);s--;)u[o?s:++a]=t,t+=i;return u}},function(t,e,r){var n=r(127),i=r(516),o=r(91),a=r(92),s=o((function(t,e){if(null==t)return[];var r=e.length;return r>1&&a(t,e[0],e[1])?e=[]:r>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),i(t,n(e,1),[])}));t.exports=s},function(t,e,r){var n=r(90),i=r(88),o=r(39),a=r(208),s=r(517),u=r(84),c=r(518),h=r(47),f=r(15);t.exports=function(t,e,r){e=e.length?n(e,(function(t){return f(t)?function(e){return i(e,1===t.length?t[0]:t)}:t})):[h];var l=-1;e=n(e,u(o));var d=a(t,(function(t,r,i){return{criteria:n(e,(function(e){return e(t)})),index:++l,value:t}}));return s(d,(function(t,e){return c(t,e,r)}))}},function(t,e){t.exports=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}},function(t,e,r){var n=r(519);t.exports=function(t,e,r){for(var i=-1,o=t.criteria,a=e.criteria,s=o.length,u=r.length;++i<s;){var c=n(o[i],a[i]);if(c)return i>=u?c:c*("desc"==r[i]?-1:1)}return t.index-e.index}},function(t,e,r){var n=r(55);t.exports=function(t,e){if(t!==e){var r=void 0!==t,i=null===t,o=t==t,a=n(t),s=void 0!==e,u=null===e,c=e==e,h=n(e);if(!u&&!h&&!a&&t>e||a&&s&&c&&!u&&!h||i&&s&&c||!r&&c||!o)return 1;if(!i&&!a&&!h&&t<e||h&&r&&o&&!i&&!a||u&&r&&o||!s&&o||!c)return-1}return 0}},function(t,e,r){var n=r(201),i=0;t.exports=function(t){var e=++i;return n(t)+e}},function(t,e,r){var n=r(81),i=r(522);t.exports=function(t,e){return i(t||[],e||[],n)}},function(t,e){t.exports=function(t,e,r){for(var n=-1,i=t.length,o=e.length,a={};++n<i;){var s=n<o?e[n]:void 0;r(a,t[n],s)}return a}},function(t,e,r){"use strict";var n=r(13),i=r(524);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?i(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],r={},i={};function o(a){n.has(i,a)||(i[a]=!0,r[a]=!0,n.forEach(t.outEdges(a),(function(t){n.has(r,t.w)?e.push(t):o(t.w)})),delete r[a])}return n.forEach(t.nodes(),o),e}(t);n.forEach(e,(function(e){var r=t.edge(e);t.removeEdge(e),r.forwardName=e.name,r.reversed=!0,t.setEdge(e.w,e.v,r,n.uniqueId("rev"))}))},undo:function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}}))}}},function(t,e,r){var n=r(13),i=r(30).Graph,o=r(525);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var r=function(t,e){var r=new i,a=0,s=0;n.forEach(t.nodes(),(function(t){r.setNode(t,{v:t,in:0,out:0})})),n.forEach(t.edges(),(function(t){var n=r.edge(t.v,t.w)||0,i=e(t),o=n+i;r.setEdge(t.v,t.w,o),s=Math.max(s,r.node(t.v).out+=i),a=Math.max(a,r.node(t.w).in+=i)}));var c=n.range(s+a+3).map((function(){return new o})),h=a+1;return n.forEach(r.nodes(),(function(t){u(c,h,r.node(t))})),{graph:r,buckets:c,zeroIdx:h}}(t,e||a),c=function(t,e,r){var n,i=[],o=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;n=a.dequeue();)s(t,e,r,n);for(;n=o.dequeue();)s(t,e,r,n);if(t.nodeCount())for(var u=e.length-2;u>0;--u)if(n=e[u].dequeue()){i=i.concat(s(t,e,r,n,!0));break}}return i}(r.graph,r.buckets,r.zeroIdx);return n.flatten(n.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var a=n.constant(1);function s(t,e,r,i,o){var a=o?[]:void 0;return n.forEach(t.inEdges(i.v),(function(n){var i=t.edge(n),s=t.node(n.v);o&&a.push({v:n.v,w:n.w}),s.out-=i,u(e,r,s)})),n.forEach(t.outEdges(i.v),(function(n){var i=t.edge(n),o=n.w,a=t.node(o);a.in-=i,u(e,r,a)})),t.removeNode(i.v),a}function u(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}},function(t,e){function r(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function i(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=r,r.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},r.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},r.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,i)),r=r._prev;return"["+t.join(", ")+"]"}},function(t,e,r){"use strict";var n=r(13),i=r(20);t.exports={run:function(t){t.graph().dummyChains=[],n.forEach(t.edges(),(function(e){!function(t,e){var r,n,o,a=e.v,s=t.node(a).rank,u=e.w,c=t.node(u).rank,h=e.name,f=t.edge(e),l=f.labelRank;if(c===s+1)return;for(t.removeEdge(e),o=0,++s;s<c;++o,++s)f.points=[],n={width:0,height:0,edgeLabel:f,edgeObj:e,rank:s},r=i.addDummyNode(t,"edge",n,"_d"),s===l&&(n.width=f.width,n.height=f.height,n.dummy="edge-label",n.labelpos=f.labelpos),t.setEdge(a,r,{weight:f.weight},h),0===o&&t.graph().dummyChains.push(r),a=r;t.setEdge(a,u,{weight:f.weight},h)}(t,e)}))},undo:function(t){n.forEach(t.graph().dummyChains,(function(e){var r,n=t.node(e),i=n.edgeLabel;for(t.setEdge(n.edgeObj,i);n.dummy;)r=t.successors(e)[0],t.removeNode(e),i.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(i.x=n.x,i.y=n.y,i.width=n.width,i.height=n.height),e=r,n=t.node(e)}))}}},function(t,e,r){"use strict";var n=r(93).longestPath,i=r(225),o=r(528);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":s(t);break;case"tight-tree":!function(t){n(t),i(t)}(t);break;case"longest-path":a(t);break;default:s(t)}};var a=n;function s(t){o(t)}},function(t,e,r){"use strict";var n=r(13),i=r(225),o=r(93).slack,a=r(93).longestPath,s=r(30).alg.preorder,u=r(30).alg.postorder,c=r(20).simplify;function h(t){t=c(t),a(t);var e,r=i(t);for(d(r),f(r,t);e=g(r);)y(r,t,e,v(r,t,e))}function f(t,e){var r=u(t,t.nodes());r=r.slice(0,r.length-1),n.forEach(r,(function(r){!function(t,e,r){var n=t.node(r).parent;t.edge(r,n).cutvalue=l(t,e,r)}(t,e,r)}))}function l(t,e,r){var i=t.node(r).parent,o=!0,a=e.edge(r,i),s=0;return a||(o=!1,a=e.edge(i,r)),s=a.weight,n.forEach(e.nodeEdges(r),(function(n){var a,u,c=n.v===r,h=c?n.w:n.v;if(h!==i){var f=c===o,l=e.edge(n).weight;if(s+=f?l:-l,a=r,u=h,t.hasEdge(a,u)){var d=t.edge(r,h).cutvalue;s+=f?-d:d}}})),s}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,r,i,o){var a=r,s=t.node(i);return e[i]=!0,n.forEach(t.neighbors(i),(function(o){n.has(e,o)||(r=p(t,e,r,o,i))})),s.low=a,s.lim=r++,o?s.parent=o:delete s.parent,r}function g(t){return n.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function v(t,e,r){var i=r.v,a=r.w;e.hasEdge(i,a)||(i=r.w,a=r.v);var s=t.node(i),u=t.node(a),c=s,h=!1;s.lim>u.lim&&(c=u,h=!0);var f=n.filter(e.edges(),(function(e){return h===m(t,t.node(e.v),c)&&h!==m(t,t.node(e.w),c)}));return n.minBy(f,(function(t){return o(e,t)}))}function y(t,e,r,i){var o=r.v,a=r.w;t.removeEdge(o,a),t.setEdge(i.v,i.w,{}),d(t),f(t,e),function(t,e){var r=n.find(t.nodes(),(function(t){return!e.node(t).parent})),i=s(t,r);i=i.slice(1),n.forEach(i,(function(r){var n=t.node(r).parent,i=e.edge(r,n),o=!1;i||(i=e.edge(n,r),o=!0),e.node(r).rank=e.node(n).rank+(o?i.minlen:-i.minlen)}))}(t,e)}function m(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}t.exports=h,h.initLowLimValues=d,h.initCutValues=f,h.calcCutValue=l,h.leaveEdge=g,h.enterEdge=v,h.exchangeEdges=y},function(t,e,r){var n=r(13);t.exports=function(t){var e=function(t){var e={},r=0;function i(o){var a=r;n.forEach(t.children(o),i),e[o]={low:a,lim:r++}}return n.forEach(t.children(),i),e}(t);n.forEach(t.graph().dummyChains,(function(r){for(var n=t.node(r),i=n.edgeObj,o=function(t,e,r,n){var i,o,a=[],s=[],u=Math.min(e[r].low,e[n].low),c=Math.max(e[r].lim,e[n].lim);i=r;do{i=t.parent(i),a.push(i)}while(i&&(e[i].low>u||c>e[i].lim));o=i,i=n;for(;(i=t.parent(i))!==o;)s.push(i);return{path:a.concat(s.reverse()),lca:o}}(t,e,i.v,i.w),a=o.path,s=o.lca,u=0,c=a[u],h=!0;r!==i.w;){if(n=t.node(r),h){for(;(c=a[u])!==s&&t.node(c).maxRank<n.rank;)u++;c===s&&(h=!1)}if(!h){for(;u<a.length-1&&t.node(c=a[u+1]).minRank<=n.rank;)u++;c=a[u]}t.setParent(r,c),r=t.successors(r)[0]}}))}},function(t,e,r){var n=r(13),i=r(20);t.exports={run:function(t){var e=i.addDummyNode(t,"root",{},"_root"),r=function(t){var e={};return n.forEach(t.children(),(function(r){!function r(i,o){var a=t.children(i);a&&a.length&&n.forEach(a,(function(t){r(t,o+1)}));e[i]=o}(r,1)})),e}(t),o=n.max(n.values(r))-1,a=2*o+1;t.graph().nestingRoot=e,n.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var s=function(t){return n.reduce(t.edges(),(function(e,r){return e+t.edge(r).weight}),0)}(t)+1;n.forEach(t.children(),(function(u){!function t(e,r,o,a,s,u,c){var h=e.children(c);if(!h.length)return void(c!==r&&e.setEdge(r,c,{weight:0,minlen:o}));var f=i.addBorderNode(e,"_bt"),l=i.addBorderNode(e,"_bb"),d=e.node(c);e.setParent(f,c),d.borderTop=f,e.setParent(l,c),d.borderBottom=l,n.forEach(h,(function(n){t(e,r,o,a,s,u,n);var i=e.node(n),h=i.borderTop?i.borderTop:n,d=i.borderBottom?i.borderBottom:n,p=i.borderTop?a:2*a,g=h!==d?1:s-u[c]+1;e.setEdge(f,h,{weight:p,minlen:g,nestingEdge:!0}),e.setEdge(d,l,{weight:p,minlen:g,nestingEdge:!0})})),e.parent(c)||e.setEdge(r,f,{weight:0,minlen:s+u[c]})}(t,e,a,s,o,r,u)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,n.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},function(t,e,r){var n=r(13),i=r(20);function o(t,e,r,n,o,a){var s={width:0,height:0,rank:a,borderType:e},u=o[e][a-1],c=i.addDummyNode(t,"border",s,r);o[e][a]=c,t.setParent(c,n),u&&t.setEdge(u,c,{weight:1})}t.exports=function(t){n.forEach(t.children(),(function e(r){var i=t.children(r),a=t.node(r);if(i.length&&n.forEach(i,e),n.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var s=a.minRank,u=a.maxRank+1;s<u;++s)o(t,"borderLeft","_bl",r,a,s),o(t,"borderRight","_br",r,a,s)}}))}},function(t,e,r){"use strict";var n=r(13);function i(t){n.forEach(t.nodes(),(function(e){o(t.node(e))})),n.forEach(t.edges(),(function(e){o(t.edge(e))}))}function o(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function s(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||i(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){n.forEach(t.nodes(),(function(e){a(t.node(e))})),n.forEach(t.edges(),(function(e){var r=t.edge(e);n.forEach(r.points,a),n.has(r,"y")&&a(r)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){n.forEach(t.nodes(),(function(e){s(t.node(e))})),n.forEach(t.edges(),(function(e){var r=t.edge(e);n.forEach(r.points,s),n.has(r,"x")&&s(r)}))}(t),i(t))}}},function(t,e,r){"use strict";var n=r(13),i=r(534),o=r(535),a=r(536),s=r(540),u=r(541),c=r(30).Graph,h=r(20);function f(t,e,r){return n.map(e,(function(e){return s(t,e,r)}))}function l(t,e){var r=new c;n.forEach(t,(function(t){var i=t.graph().root,o=a(t,i,r,e);n.forEach(o.vs,(function(e,r){t.node(e).order=r})),u(t,r,o.vs)}))}function d(t,e){n.forEach(e,(function(e){n.forEach(e,(function(e,r){t.node(e).order=r}))}))}t.exports=function(t){var e=h.maxRank(t),r=f(t,n.range(1,e+1),"inEdges"),a=f(t,n.range(e-1,-1,-1),"outEdges"),s=i(t);d(t,s);for(var u,c=Number.POSITIVE_INFINITY,p=0,g=0;g<4;++p,++g){l(p%2?r:a,p%4>=2),s=h.buildLayerMatrix(t);var v=o(t,s);v<c&&(g=0,u=n.cloneDeep(s),c=v)}d(t,u)}},function(t,e,r){"use strict";var n=r(13);t.exports=function(t){var e={},r=n.filter(t.nodes(),(function(e){return!t.children(e).length})),i=n.max(n.map(r,(function(e){return t.node(e).rank}))),o=n.map(n.range(i+1),(function(){return[]}));var a=n.sortBy(r,(function(e){return t.node(e).rank}));return n.forEach(a,(function r(i){if(n.has(e,i))return;e[i]=!0;var a=t.node(i);o[a.rank].push(i),n.forEach(t.successors(i),r)})),o}},function(t,e,r){"use strict";var n=r(13);function i(t,e,r){for(var i=n.zipObject(r,n.map(r,(function(t,e){return e}))),o=n.flatten(n.map(e,(function(e){return n.sortBy(n.map(t.outEdges(e),(function(e){return{pos:i[e.w],weight:t.edge(e).weight}})),"pos")})),!0),a=1;a<r.length;)a<<=1;var s=2*a-1;a-=1;var u=n.map(new Array(s),(function(){return 0})),c=0;return n.forEach(o.forEach((function(t){var e=t.pos+a;u[e]+=t.weight;for(var r=0;e>0;)e%2&&(r+=u[e+1]),u[e=e-1>>1]+=t.weight;c+=t.weight*r}))),c}t.exports=function(t,e){for(var r=0,n=1;n<e.length;++n)r+=i(t,e[n-1],e[n]);return r}},function(t,e,r){var n=r(13),i=r(537),o=r(538),a=r(539);t.exports=function t(e,r,s,u){var c=e.children(r),h=e.node(r),f=h?h.borderLeft:void 0,l=h?h.borderRight:void 0,d={};f&&(c=n.filter(c,(function(t){return t!==f&&t!==l})));var p=i(e,c);n.forEach(p,(function(r){if(e.children(r.v).length){var i=t(e,r.v,s,u);d[r.v]=i,n.has(i,"barycenter")&&(o=r,a=i,n.isUndefined(o.barycenter)?(o.barycenter=a.barycenter,o.weight=a.weight):(o.barycenter=(o.barycenter*o.weight+a.barycenter*a.weight)/(o.weight+a.weight),o.weight+=a.weight))}var o,a}));var g=o(p,s);!function(t,e){n.forEach(t,(function(t){t.vs=n.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(g,d);var v=a(g,u);if(f&&(v.vs=n.flatten([f,v.vs,l],!0),e.predecessors(f).length)){var y=e.node(e.predecessors(f)[0]),m=e.node(e.predecessors(l)[0]);n.has(v,"barycenter")||(v.barycenter=0,v.weight=0),v.barycenter=(v.barycenter*v.weight+y.order+m.order)/(v.weight+2),v.weight+=2}return v}},function(t,e,r){var n=r(13);t.exports=function(t,e){return n.map(e,(function(e){var r=t.inEdges(e);if(r.length){var i=n.reduce(r,(function(e,r){var n=t.edge(r),i=t.node(r.v);return{sum:e.sum+n.weight*i.order,weight:e.weight+n.weight}}),{sum:0,weight:0});return{v:e,barycenter:i.sum/i.weight,weight:i.weight}}return{v:e}}))}},function(t,e,r){"use strict";var n=r(13);t.exports=function(t,e){var r={};return n.forEach(t,(function(t,e){var i=r[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};n.isUndefined(t.barycenter)||(i.barycenter=t.barycenter,i.weight=t.weight)})),n.forEach(e.edges(),(function(t){var e=r[t.v],i=r[t.w];n.isUndefined(e)||n.isUndefined(i)||(i.indegree++,e.out.push(r[t.w]))})),function(t){var e=[];function r(t){return function(e){e.merged||(n.isUndefined(e.barycenter)||n.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var r=0,n=0;t.weight&&(r+=t.barycenter*t.weight,n+=t.weight);e.weight&&(r+=e.barycenter*e.weight,n+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=r/n,t.weight=n,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function i(e){return function(r){r.in.push(e),0==--r.indegree&&t.push(r)}}for(;t.length;){var o=t.pop();e.push(o),n.forEach(o.in.reverse(),r(o)),n.forEach(o.out,i(o))}return n.map(n.filter(e,(function(t){return!t.merged})),(function(t){return n.pick(t,["vs","i","barycenter","weight"])}))}(n.filter(r,(function(t){return!t.indegree})))}},function(t,e,r){var n=r(13),i=r(20);function o(t,e,r){for(var i;e.length&&(i=n.last(e)).i<=r;)e.pop(),t.push(i.vs),r++;return r}t.exports=function(t,e){var r=i.partition(t,(function(t){return n.has(t,"barycenter")})),a=r.lhs,s=n.sortBy(r.rhs,(function(t){return-t.i})),u=[],c=0,h=0,f=0;a.sort((l=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:l?e.i-t.i:t.i-e.i})),f=o(u,s,f),n.forEach(a,(function(t){f+=t.vs.length,u.push(t.vs),c+=t.barycenter*t.weight,h+=t.weight,f=o(u,s,f)}));var l;var d={vs:n.flatten(u,!0)};h&&(d.barycenter=c/h,d.weight=h);return d}},function(t,e,r){var n=r(13),i=r(30).Graph;t.exports=function(t,e,r){var o=function(t){var e;for(;t.hasNode(e=n.uniqueId("_root")););return e}(t),a=new i({compound:!0}).setGraph({root:o}).setDefaultNodeLabel((function(e){return t.node(e)}));return n.forEach(t.nodes(),(function(i){var s=t.node(i),u=t.parent(i);(s.rank===e||s.minRank<=e&&e<=s.maxRank)&&(a.setNode(i),a.setParent(i,u||o),n.forEach(t[r](i),(function(e){var r=e.v===i?e.w:e.v,o=a.edge(r,i),s=n.isUndefined(o)?0:o.weight;a.setEdge(r,i,{weight:t.edge(e).weight+s})})),n.has(s,"minRank")&&a.setNode(i,{borderLeft:s.borderLeft[e],borderRight:s.borderRight[e]}))})),a}},function(t,e,r){var n=r(13);t.exports=function(t,e,r){var i,o={};n.forEach(r,(function(r){for(var n,a,s=t.parent(r);s;){if((n=t.parent(s))?(a=o[n],o[n]=s):(a=i,i=s),a&&a!==s)return void e.setEdge(a,s);s=n}}))}},function(t,e,r){"use strict";var n=r(13),i=r(20),o=r(543).positionX;t.exports=function(t){(function(t){var e=i.buildLayerMatrix(t),r=t.graph().ranksep,o=0;n.forEach(e,(function(e){var i=n.max(n.map(e,(function(e){return t.node(e).height})));n.forEach(e,(function(e){t.node(e).y=o+i/2})),o+=i+r}))})(t=i.asNonCompoundGraph(t)),n.forEach(o(t),(function(e,r){t.node(r).x=e}))}},function(t,e,r){"use strict";var n=r(13),i=r(30).Graph,o=r(20);function a(t,e){var r={};return n.reduce(e,(function(e,i){var o=0,a=0,s=e.length,c=n.last(i);return n.forEach(i,(function(e,h){var f=function(t,e){if(t.node(e).dummy)return n.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),l=f?t.node(f).order:s;(f||e===c)&&(n.forEach(i.slice(a,h+1),(function(e){n.forEach(t.predecessors(e),(function(n){var i=t.node(n),a=i.order;!(a<o||l<a)||i.dummy&&t.node(e).dummy||u(r,n,e)}))})),a=h+1,o=l)})),i})),r}function s(t,e){var r={};function i(e,i,o,a,s){var c;n.forEach(n.range(i,o),(function(i){c=e[i],t.node(c).dummy&&n.forEach(t.predecessors(c),(function(e){var n=t.node(e);n.dummy&&(n.order<a||n.order>s)&&u(r,e,c)}))}))}return n.reduce(e,(function(e,r){var o,a=-1,s=0;return n.forEach(r,(function(n,u){if("border"===t.node(n).dummy){var c=t.predecessors(n);c.length&&(o=t.node(c[0]).order,i(r,s,u,a,o),s=u,a=o)}i(r,s,r.length,o,e.length)})),r})),r}function u(t,e,r){if(e>r){var n=e;e=r,r=n}var i=t[e];i||(t[e]=i={}),i[r]=!0}function c(t,e,r){if(e>r){var i=e;e=r,r=i}return n.has(t[e],r)}function h(t,e,r,i){var o={},a={},s={};return n.forEach(e,(function(t){n.forEach(t,(function(t,e){o[t]=t,a[t]=t,s[t]=e}))})),n.forEach(e,(function(t){var e=-1;n.forEach(t,(function(t){var u=i(t);if(u.length)for(var h=((u=n.sortBy(u,(function(t){return s[t]}))).length-1)/2,f=Math.floor(h),l=Math.ceil(h);f<=l;++f){var d=u[f];a[t]===t&&e<s[d]&&!c(r,t,d)&&(a[d]=t,a[t]=o[t]=o[d],e=s[d])}}))})),{root:o,align:a}}function f(t,e,r,o,a){var s={},u=function(t,e,r,o){var a=new i,s=t.graph(),u=function(t,e,r){return function(i,o,a){var s,u=i.node(o),c=i.node(a),h=0;if(h+=u.width/2,n.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":s=-u.width/2;break;case"r":s=u.width/2}if(s&&(h+=r?s:-s),s=0,h+=(u.dummy?e:t)/2,h+=(c.dummy?e:t)/2,h+=c.width/2,n.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":s=c.width/2;break;case"r":s=-c.width/2}return s&&(h+=r?s:-s),s=0,h}}(s.nodesep,s.edgesep,o);return n.forEach(e,(function(e){var i;n.forEach(e,(function(e){var n=r[e];if(a.setNode(n),i){var o=r[i],s=a.edge(o,n);a.setEdge(o,n,Math.max(u(t,e,i),s||0))}i=e}))})),a}(t,e,r,a),c=a?"borderLeft":"borderRight";function h(t,e){for(var r=u.nodes(),n=r.pop(),i={};n;)i[n]?t(n):(i[n]=!0,r.push(n),r=r.concat(e(n))),n=r.pop()}return h((function(t){s[t]=u.inEdges(t).reduce((function(t,e){return Math.max(t,s[e.v]+u.edge(e))}),0)}),u.predecessors.bind(u)),h((function(e){var r=u.outEdges(e).reduce((function(t,e){return Math.min(t,s[e.w]-u.edge(e))}),Number.POSITIVE_INFINITY),n=t.node(e);r!==Number.POSITIVE_INFINITY&&n.borderType!==c&&(s[e]=Math.max(s[e],r))}),u.successors.bind(u)),n.forEach(o,(function(t){s[t]=s[r[t]]})),s}function l(t,e){return n.minBy(n.values(e),(function(e){var r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;return n.forIn(e,(function(e,n){var o=function(t,e){return t.node(e).width}(t,n)/2;r=Math.max(e+o,r),i=Math.min(e-o,i)})),r-i}))}function d(t,e){var r=n.values(e),i=n.min(r),o=n.max(r);n.forEach(["u","d"],(function(r){n.forEach(["l","r"],(function(a){var s,u=r+a,c=t[u];if(c!==e){var h=n.values(c);(s="l"===a?i-n.min(h):o-n.max(h))&&(t[u]=n.mapValues(c,(function(t){return t+s})))}}))}))}function p(t,e){return n.mapValues(t.ul,(function(r,i){if(e)return t[e.toLowerCase()][i];var o=n.sortBy(n.map(t,i));return(o[1]+o[2])/2}))}t.exports={positionX:function(t){var e,r=o.buildLayerMatrix(t),i=n.merge(a(t,r),s(t,r)),u={};n.forEach(["u","d"],(function(o){e="u"===o?r:n.values(r).reverse(),n.forEach(["l","r"],(function(r){"r"===r&&(e=n.map(e,(function(t){return n.values(t).reverse()})));var a=("u"===o?t.predecessors:t.successors).bind(t),s=h(t,e,i,a),c=f(t,e,s.root,s.align,"r"===r);"r"===r&&(c=n.mapValues(c,(function(t){return-t}))),u[o+r]=c}))}));var c=l(t,u);return d(u,c),p(u,t.graph().align)},findType1Conflicts:a,findType2Conflicts:s,addConflict:u,hasConflict:c,verticalAlignment:h,horizontalCompaction:f,alignCoordinates:d,findSmallestWidthAlignment:l,balance:p}},function(t,e,r){var n=r(13),i=r(20),o=r(30).Graph;t.exports={debugOrdering:function(t){var e=i.buildLayerMatrix(t),r=new o({compound:!0,multigraph:!0}).setGraph({});return n.forEach(t.nodes(),(function(e){r.setNode(e,{label:e}),r.setParent(e,"layer"+t.node(e).rank)})),n.forEach(t.edges(),(function(t){r.setEdge(t.v,t.w,{},t.name)})),n.forEach(e,(function(t,e){var i="layer"+e;r.setNode(i,{rank:"same"}),n.reduce(t,(function(t,e){return r.setEdge(t,e,{style:"invis"}),e}))})),r}}},function(t,e){t.exports="0.8.5"},function(t,e,r){var n=r(94),i=r(547),o=r(129),a=r(48),s=function(t){var e,r;function n(){return t.apply(this,arguments)||this}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.execute=function(){return o(this.rootNode,this.options,i)},n}(n),u={};t.exports=function(t,e){return e=a.assign({},u,e),new s(t,e).execute()}},function(t,e){function r(t,e,r,n){void 0===n&&(n=[]);var i=this;i.w=t||0,i.h=e||0,i.y=r||0,i.x=0,i.c=n||[],i.cs=n.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function n(t,e){var r=function t(e,r){var n=r?e.y:e.x;return e.children.forEach((function(e){n=Math.min(t(e,r),n)})),n}(t,e);!function t(e,r,n){n?e.y+=r:e.x+=r,e.children.forEach((function(e){t(e,r,n)}))}(t,-r,e)}r.fromNode=function(t,e){if(!t)return null;var n=[];return t.children.forEach((function(t){n.push(r.fromNode(t,e))})),e?new r(t.height,t.width,t.x,n):new r(t.width,t.height,t.y,n)},t.exports=function(t,e){void 0===e&&(e={});var i=e.isHorizontal;function o(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function a(t,e,r){for(var n=t.c[e-1],i=n.mod,o=t.c[e],a=o.mod;null!==n&&null!==o;){h(n)>r.low&&(r=r.nxt);var f=i+n.prelim+n.w-(a+o.prelim);f>0&&(a+=f,s(t,e,r.index,f));var l=h(n),d=h(o);l<=d&&null!==(n=c(n))&&(i+=n.mod),l>=d&&null!==(o=u(o))&&(a+=o.mod)}!n&&o?function(t,e,r,n){var i=t.c[0].el;i.tl=r;var o=n-r.mod-t.c[0].msel;i.mod+=o,i.prelim-=o,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,o,a):n&&!o&&function(t,e,r,n){var i=t.c[e].er;i.tr=r;var o=n-r.mod-t.c[e].mser;i.mod+=o,i.prelim-=o,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,n,i)}function s(t,e,r,n){t.c[e].mod+=n,t.c[e].msel+=n,t.c[e].mser+=n,function(t,e,r,n){if(r!==e-1){var i=e-r;t.c[r+1].shift+=n/i,t.c[e].shift-=n/i,t.c[e].change-=n-n/i}}(t,e,r,n)}function u(t){return 0===t.cs?t.tl:t.c[0]}function c(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function h(t){return t.y+t.h}function f(t,e,r){for(;null!==r&&t>=r.low;)r=r.nxt;return{low:t,index:e,nxt:r}}!function t(e,r,n){void 0===n&&(n=0),r?(e.x=n,n+=e.width):(e.y=n,n+=e.height),e.children.forEach((function(e){t(e,r,n)}))}(t,i);var l=r.fromNode(t,i);return function t(e){if(0!==e.cs){t(e.c[0]);for(var r=f(h(e.c[0].el),0,null),n=1;n<e.cs;++n){t(e.c[n]);var i=h(e.c[n].er);a(e,n,r),r=f(i,n,r)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),o(e)}else o(e)}(l),function t(e,r){r+=e.mod,e.x=e.prelim+r,function(t){for(var e=0,r=0,n=0;n<t.cs;n++)e+=t.c[n].shift,r+=e+t.c[n].change,t.c[n].mod+=r}(e);for(var n=0;n<e.cs;n++)t(e.c[n],r)}(l,0),function t(e,r,n){n?r.y=e.x:r.x=e.x,e.c.forEach((function(e,i){t(e,r.children[i],n)}))}(l,t,i),n(t,i),t}},function(t,e,r){var n=r(94),i=r(549),o=r(129),a=r(48),s=function(t){var e,r;function n(){return t.apply(this,arguments)||this}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.execute=function(){return this.rootNode.width=0,o(this.rootNode,this.options,i)},n}(n),u={};t.exports=function(t,e){return e=a.assign({},u,e),new s(t,e).execute()}},function(t,e,r){var n=r(48);function i(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var r=this;r.x=r.y=0,r.leftChild=r.rightChild=null,r.height=0,r.children=e}var o={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t,e){void 0===e&&(e={}),e=n.assign({},o,e);var r,a=0;var s=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>a&&(a=e.depth);var r=e.children,n=r.length,o=new i(e.height,[]);return r.forEach((function(e,r){var i=t(e);o.children.push(i),0===r&&(o.leftChild=i),r===n-1&&(o.rightChild=i)})),o.originNode=e,o.isLeaf=e.isLeaf(),o}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=a;else{var r=e.children.map((function(e){return t(e)})),n=Math.min.apply(null,r);e.drawingDepth=n-1}return e.drawingDepth}(s),function t(n){n.x=n.drawingDepth*e.rankSep,n.isLeaf?(n.y=0,r&&(n.y=r.y+r.height+e.nodeSep,n.originNode.parent!==r.originNode.parent&&(n.y+=e.subTreeSep)),r=n):(n.children.forEach((function(e){t(e)})),n.y=(n.leftChild.y+n.rightChild.y)/2)}(s),function t(e,r,n){n?(r.x=e.x,r.y=e.y):(r.x=e.y,r.y=e.x),e.children.forEach((function(e,i){t(e,r.children[i],n)}))}(s,t,e.isHorizontal),t}},function(t,e,r){var n=r(94),i=r(551),o=r(227),a=r(48),s=["LR","RL","H"],u=s[0],c=function(t){var e,r;function n(){return t.apply(this,arguments)||this}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var r=t.indent,n=void 0===r?20:r,a=t.dropCap,c=void 0===a||a,h=t.direction||u;if(h&&-1===s.indexOf(h))throw new TypeError("Invalid direction: "+h);if(h===s[0])i(e,n,c);else if(h===s[1])i(e,n,c),e.right2left();else if(h===s[2]){var f=o(e,t),l=f.left,d=f.right;i(l,n,c),l.right2left(),i(d,n,c);var p=l.getBoundingBox();d.translate(p.width,0),e.x=d.x-e.width/2}return e},n}(n),h={};t.exports=function(t,e){return e=a.assign({},h,e),new c(t,e).execute()}},function(t,e){t.exports=function(t,e,r){var n=null;t.eachNode((function(t){!function(t,e,r,n){if(!n)try{if(t.id===t.parent.children[0].id)return t.x+=r*t.depth,void(t.y=e?e.y:0)}catch(t){}t.x+=r*t.depth,t.y=e?e.y+e.height:0}(t,n,e,r),n=t}))}},function(t,e,r){var n=r(94),i=r(553),o=r(129),a=r(48),s=function(t){var e,r;function n(){return t.apply(this,arguments)||this}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.execute=function(){return o(this.rootNode,this.options,i)},n}(n),u={};t.exports=function(t,e){return e=a.assign({},u,e),new s(t,e).execute()}},function(t,e,r){var n=r(48);var i={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=n.assign({},i,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse((function(t){t.x=t.parent.x+t.parent.width})),t.parent=null,function t(e,r){var n=0;return e.children.length?e.children.forEach((function(e){n+=t(e,r)})):n=e.height,e._subTreeSep=r.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,n)+2*e._subTreeSep,e.totalHeight}(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode((function(t){var e=t.children,r=e.length;if(r){var n=e[0];if(n.startY=t.startY+t._subTreeSep,1===r)n.y=t.y+t.height/2-n.height/2;else{n.y=n.startY+n.totalHeight/2-n.height/2;for(var i=1;i<r;i++){var o=e[i];o.startY=e[i-1].startY+e[i-1].totalHeight,o.y=o.startY+o.totalHeight/2-o.height/2}}}})),function t(e){var r=e.children,n=r.length;if(n){r.forEach((function(e){t(e)}));var i=r[0],o=r[n-1],a=o.y-i.y+o.height,s=0;if(r.forEach((function(t){s+=t.totalHeight})),a>e.height)e.y=i.y+a/2-e.height/2;else if(1!==r.length||e.height>s){var u=e.y+(e.height-a)/2-i.y;r.forEach((function(t){t.translate(0,u)}))}else e.y=(i.y+i.height/2+o.y+o.height/2)/2-e.height/2}}(t)}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return t&&"object"===r(t)&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";r.r(e),r.d(e,"registerNode",(function(){return cc})),r.d(e,"registerCombo",(function(){return fc})),r.d(e,"Graph",(function(){return qo})),r.d(e,"TreeGraph",(function(){return Ho})),r.d(e,"Util",(function(){return Ca})),r.d(e,"registerEdge",(function(){return hc})),r.d(e,"Layout",(function(){return fo})),r.d(e,"Global",(function(){return Q})),r.d(e,"registerLayout",(function(){return dc})),r.d(e,"Minimap",(function(){return pc})),r.d(e,"Grid",(function(){return gc})),r.d(e,"Bundling",(function(){return vc})),r.d(e,"Menu",(function(){return yc})),r.d(e,"Fisheye",(function(){return mc})),r.d(e,"registerBehavior",(function(){return lc})),r.d(e,"Algorithm",(function(){return c})),r.d(e,"ToolBar",(function(){return bc})),r.d(e,"Tooltip",(function(){return xc})),r.d(e,"TimeBar",(function(){return wc})),r.d(e,"ImageMinimap",(function(){return Mc})),r.d(e,"EdgeFilterLens",(function(){return Sc}));var n={};r.r(n),r.d(n,"formatPadding",(function(){return j})),r.d(n,"cloneEvent",(function(){return C})),r.d(n,"isViewportChanged",(function(){return A})),r.d(n,"isNaN",(function(){return P})),r.d(n,"calculationItemsBBox",(function(){return I})),r.d(n,"processParallelEdges",(function(){return T}));var i={};r.r(i),r.d(i,"mixColor",(function(){return Z})),r.d(i,"getColorsWithSubjectColor",(function(){return $}));var o={};r.r(o),r.d(o,"getLineIntersect",(function(){return Bt})),r.d(o,"getRectIntersectByPoint",(function(){return Rt})),r.d(o,"getCircleIntersectByPoint",(function(){return Lt})),r.d(o,"getEllipseIntersectByPoint",(function(){return zt})),r.d(o,"applyMatrix",(function(){return Ft})),r.d(o,"invertMatrix",(function(){return Yt})),r.d(o,"getCircleCenterByPoints",(function(){return Gt})),r.d(o,"distance",(function(){return qt})),r.d(o,"scaleMatrix",(function(){return Xt})),r.d(o,"floydWarshall",(function(){return Vt})),r.d(o,"getAdjMatrix",(function(){return Ht})),r.d(o,"translate",(function(){return Ut})),r.d(o,"move",(function(){return Wt})),r.d(o,"scale",(function(){return Zt})),r.d(o,"rotate",(function(){return $t})),r.d(o,"getDegree",(function(){return Kt})),r.d(o,"isPointInPolygon",(function(){return Jt})),r.d(o,"intersectBBox",(function(){return te})),r.d(o,"isPolygonsIntersect",(function(){return ee})),r.d(o,"Line",(function(){return re})),r.d(o,"getBBoxBoundLine",(function(){return ne})),r.d(o,"itemIntersectByLine",(function(){return oe})),r.d(o,"fractionToLine",(function(){return ae})),r.d(o,"getPointsCenter",(function(){return se})),r.d(o,"squareDist",(function(){return ue})),r.d(o,"pointLineSquareDist",(function(){return ce})),r.d(o,"isPointsOverlap",(function(){return he})),r.d(o,"pointRectSquareDist",(function(){return fe}));var a={};r.r(a),r.d(a,"getSpline",(function(){return me})),r.d(a,"getControlPoint",(function(){return be})),r.d(a,"pointsToPolygon",(function(){return xe})),r.d(a,"pathToPoints",(function(){return we})),r.d(a,"getClosedSpline",(function(){return Me})),r.d(a,"roundedHull",(function(){return Oe})),r.d(a,"paddedHull",(function(){return Ee}));var s={};r.r(s),r.d(s,"getBBox",(function(){return cr})),r.d(s,"getLoopCfgs",(function(){return hr})),r.d(s,"getLabelPosition",(function(){return fr})),r.d(s,"traverseTree",(function(){return pr})),r.d(s,"traverseTreeUp",(function(){return gr})),r.d(s,"radialLayout",(function(){return vr})),r.d(s,"getLetterWidth",(function(){return yr})),r.d(s,"getTextSize",(function(){return mr})),r.d(s,"plainCombosToTrees",(function(){return br})),r.d(s,"reconstructTree",(function(){return xr})),r.d(s,"getComboBBox",(function(){return wr})),r.d(s,"getChartRegion",(function(){return Mr}));var u={};r.r(u),r.d(u,"default",(function(){return xs})),r.d(u,"assign",(function(){return ts})),r.d(u,"format",(function(){return ms})),r.d(u,"parse",(function(){return bs})),r.d(u,"defaultI18n",(function(){return is})),r.d(u,"setGlobalDateI18n",(function(){return as})),r.d(u,"setGlobalDateMasks",(function(){return ys}));var c={};r.r(c),r.d(c,"depthFirstSearch",(function(){return Xu})),r.d(c,"breadthFirstSearch",(function(){return Hu})),r.d(c,"detectDirectedCycle",(function(){return Qu})),r.d(c,"degree",(function(){return Oo})),r.d(c,"adjMatrix",(function(){return Po})),r.d(c,"floydWarshall",(function(){return Io})),r.d(c,"getConnectedComponents",(function(){return Wu})),r.d(c,"detectAllCycles",(function(){return Ku})),r.d(c,"detectAllDirectedCycle",(function(){return $u})),r.d(c,"detectAllUndirectedCycle",(function(){return Zu})),r.d(c,"findShortestPath",(function(){return tc})),r.d(c,"findAllPath",(function(){return ec})),r.d(c,"minimumSpanningTree",(function(){return sc})),r.d(c,"getPageRank",(function(){return uc}));var h,f=r(229),l=r(2),d=r.n(l),p=r(7),g={getDefaultCfg:function(){return{}},getEvents:function(){return{}},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(t){var e=this,r=this.events;this.graph=t,"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!0),d()(r,(function(e,r){t.on(r,e)})),document.addEventListener("visibilitychange",(function(){e.keydown=!1}))},unbind:function(t){var e=this.events;"drag-canvas"!==this.type&&"brush-select"!==this.type&&"lasso-select"!==this.type||t.get("canvas").set("draggable",!1),d()(e,(function(e,r){t.off(r,e)}))},get:function(t){return this[t]},set:function(t,e){return this[t]=e,this}},v=function(){function t(){}return t.registerBehavior=function(e,r){if(!r)throw new Error("please specify handler for this behavior: "+e);var n=Object(p.clone)(g);Object.assign(n,r);var i=function(t){var e=this;Object.assign(this,this.getDefaultCfg(),t);var r=this.getEvents();this.events=null;var n={};r&&(Object(p.each)(r,(function(t,r){n[r]=Object(p.wrapBehavior)(e,t)})),this.events=n)};i.prototype=n,t.types[e]=i},t.hasBehavior=function(e){return!!t.types[e]},t.getBehavior=function(e){return t.types[e]},t.types={},t}();!function(t){t.CLICK="click",t.DBLCLICK="dblclick",t.MOUSEDOWN="mousedown",t.MOUDEUP="mouseup",t.CONTEXTMENU="contextmenu",t.MOUSEENTER="mouseenter",t.MOUSEOUT="mouseout",t.MOUSEOVER="mouseover",t.MOUSEMOVE="mousemove",t.MOUSELEAVE="mouseleave",t.DRAGSTART="dragstart",t.DRAGEND="dragend",t.DRAG="drag",t.DRAGENTER="dragenter",t.DRAGLEAVE="dragleave",t.DRAGOVER="dragover",t.DRAGOUT="dragout",t.DDROP="drop",t.KEYUP="keyup",t.KEYDOWN="keydown",t.WHEEL="wheel",t.FOCUS="focus",t.BLUR="blur",t.TOUCHSTART="touchstart",t.TOUCHMOVE="touchmove",t.TOUCHEND="touchend",t.NODE_CONTEXTMENU="node:contextmenu",t.NODE_CLICK="node:click",t.NODE_DBLCLICK="node:dblclick",t.NODE_MOUSEDOWN="node:mousedown",t.NODE_MOUSEUP="node:mouseup",t.NODE_MOUSEENTER="node:mouseenter",t.NODE_MOUSELEAVE="node:mouseleave",t.NODE_MOUSEMOVE="node:mousemove",t.NODE_MOUSEOUT="node:mouseout",t.NODE_MOUSEOVER="node:mouseover",t.NODE_DROP="node:drop",t.NODE_DRAGOVER="node:dragover",t.NODE_DRAGENTER="node:dragenter",t.NODE_DRAGLEAVE="node:dragleave",t.NODE_DRAGSTART="node:dragstart",t.NODE_DRAG="node:drag",t.NODE_DRAGEND="node:dragend",t.COMBO_CONTEXTMENU="combo:contextmenu",t.COMBO_CLICK="combo:click",t.COMBO_DBLCLICK="combo:dblclick",t.COMBO_MOUSEDOWN="combo:mousedown",t.COMBO_MOUSEUP="combo:mouseup",t.COMBO_MOUSEENTER="combo:mouseenter",t.COMBO_MOUSELEAVE="combo:mouseleave",t.COMBO_MOUSEMOVE="combo:mousemove",t.COMBO_MOUSEOUT="combo:mouseout",t.COMBO_MOUSEOVER="combo:mouseover",t.COMBO_DROP="combo:drop",t.COMBO_DRAGOVER="combo:dragover",t.COMBO_DRAGENTER="combo:dragenter",t.COMBO_DRAGLEAVE="combo:dragleave",t.COMBO_DRAGSTART="combo:dragstart",t.COMBO_DRAG="combo:drag",t.COMBO_DRAGEND="combo:dragend",t.EDGE_CONTEXTMENU="edge:contextmenu",t.EDGE_CLICK="edge:click",t.EDGE_DBLCLICK="edge:dblclick",t.EDGE_MOUSEDOWN="edge:mousedown",t.EDGE_MOUSEUP="edge:mouseup",t.EDGE_MOUSEENTER="edge:mouseenter",t.EDGE_MOUSELEAVE="edge:mouseleave",t.EDGE_MOUSEMOVE="edge:mousemove",t.EDGE_MOUSEOUT="edge:mouseout",t.EDGE_MOUSEOVER="edge:mouseover",t.EDGE_DROP="edge:drop",t.EDGE_DRAGOVER="edge:dragover",t.EDGE_DRAGENTER="edge:dragenter",t.EDGE_DRAGLEAVE="edge:dragleave",t.CANVAS_CONTEXTMENU="canvas:contextmenu",t.CANVAS_CLICK="canvas:click",t.CANVAS_DBLCLICK="canvas:dblclick",t.CANVAS_MOUSEDOWN="canvas:mousedown",t.CANVAS_MOUSEUP="canvas:mouseup",t.CANVAS_MOUSEENTER="canvas:mouseenter",t.CANVAS_MOUSELEAVE="canvas:mouseleave",t.CANVAS_MOUSEMOVE="canvas:mousemove",t.CANVAS_MOUSEOUT="canvas:mouseout",t.CANVAS_MOUSEOVER="canvas:mouseover",t.CANVAS_DROP="canvas:drop",t.CANVAS_DRAGENTER="canvas:dragenter",t.CANVAS_DRAGLEAVE="canvas:dragleave",t.CANVAS_DRAGSTART="canvas:dragstart",t.CANVAS_DRAG="canvas:drag",t.CANVAS_DRAGEND="canvas:dragend",t.BEFORERENDER="beforerender",t.AFTERRENDER="afterrender",t.BEFOREADDITEM="beforeadditem",t.AFTERADDITEM="afteradditem",t.BEFOREREMOVEITEM="beforeremoveitem",t.AFTERREMOVEITEM="afterremoveitem",t.BEFOREUPDATEITEM="beforeupdateitem",t.AFTERUPDATEITEM="afterupdateitem",t.BEFOREITEMVISIBILITYCHANGE="beforeitemvisibilitychange",t.AFTERITEMVISIBILITYCHANGE="afteritemvisibilitychange",t.BEFOREITEMSTATECHANGE="beforeitemstatechange",t.AFTERITEMSTATECHANGE="afteritemstatechange",t.BEFOREITEMREFRESH="beforeitemrefresh",t.AFTERITEMREFRESH="afteritemrefresh",t.BEFOREITEMSTATESCLEAR="beforeitemstatesclear",t.AFTERITEMSTATESCLEAR="afteritemstatesclear",t.BEFOREMODECHANGE="beforemodechange",t.AFTERMODECHANGE="aftermodechange",t.BEFORELAYOUT="beforelayout",t.AFTERLAYOUT="afterlayout",t.BEFORECREATEEDGE="beforecreateedge",t.AFTERCREATEEDGE="aftercreateedge",t.BEFOREGRAPHREFRESHPOSITION="beforegraphrefreshposition",t.AFTERGRAPHREFRESHPOSITION="aftergraphrefreshposition",t.BEFOREGRAPHREFRESH="beforegraphrefresh",t.AFTERGRAPHREFRESH="aftergraphrefresh",t.BEFOREANIMATE="beforeanimate",t.AFTERANIMATE="afteranimate",t.BEFOREPAINT="beforepaint",t.AFTERPAINT="afterpaint",t.GRAPHSTATECHANGE="graphstatechange",t.AFTERACTIVATERELATIONS="afteractivaterelations",t.NODESELECTCHANGE="nodeselectchange",t.TOOLTIPCHANGE="tooltipchange",t.WHEELZOOM="wheelzoom",t.VIEWPORTCHANGE="viewportchange",t.DRAGNODEEND="dragnodeend",t.STACKCHANGE="stackchange"}(h||(h={}));var y=r(4),m=r.n(y),b=r(10),x=r.n(b),w=r(11),M=r.n(w),S=r(3),_=r.n(S),k=r(1),O=r(230),E=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return Object(k.__extends)(e,t),e}(r.n(O).a),j=function(t){var e=0,r=0,n=0,i=0;if(M()(t))e=r=n=i=t;else if(_()(t)){e=r=n=i=parseInt(t,10)}else m()(t)&&(e=t[0],n=x()(t[1])?t[0]:t[1],i=x()(t[2])?t[0]:t[2],r=x()(t[3])?n:t[3]);return[e,n,i,r]},C=function(t){var e=new E(t.type,t);return e.clientX=t.clientX,e.clientY=t.clientY,e.x=t.x,e.y=t.y,e.target=t.target,e.currentTarget=t.currentTarget,e.bubbles=!0,e.item=t.item,e},A=function(t){if(!t)return!1;for(var e=[1,0,0,0,1,0,0,0,1],r=0;r<9;r++)if(t[r]!==e[r])return!0;return!1},P=function(t){return Number.isNaN(Number(t))},I=function(t){for(var e=1/0,r=-1/0,n=1/0,i=-1/0,o=0;o<t.length;o++){var a=t[o].getBBox(),s=a.minX,u=a.minY,c=a.maxX,h=a.maxY;s<e&&(e=s),u<n&&(n=u),c>r&&(r=c),h>i&&(i=h)}return{x:Math.floor(e),y:Math.floor(n),width:Math.ceil(r)-Math.floor(e),height:Math.ceil(i)-Math.floor(n),minX:e,minY:n,maxX:r,maxY:i}},T=function(t,e){void 0===e&&(e=15);for(var r=t.length,n=2*e,i=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],o={},a=[],s={},u=0;u<r;u++){var c=t[u],h=c.source,f=c.target,l=h+"-"+f;if(!a[u]){o[l]||(o[l]=[]),a[u]=!0,o[l].push(c);for(var d=0;d<r;d++)if(u!==d){var p=t[d],g=p.source,v=p.target;a[d]||(h===v&&f===g?(o[l].push(p),a[d]=!0,s[g+"|"+v+"|"+(o[l].length-1)]=!0):h===g&&f===v&&(o[l].push(p),a[d]=!0))}}}for(var y in o)for(var m=o[y],b=m.length,x=0;x<b;x++){var w=m[x];if(w.source!==w.target){w.type="quadratic";var M=(x%2==0?1:-1)*(s[w.source+"|"+w.target+"|"+x]?-1:1);w.curveOffset=b%2==1?M*Math.ceil(x/2)*n:M*(Math.floor(x/2)*n+e)}else w.type="loop",w.loopCfg={position:i[x%8],dist:20*Math.floor(x/8)+50}}return t},N=Math.abs,D=["shift","ctrl","alt","control"],B={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0}},getEvents:function(){return{dragstart:"onMouseDown",mousedown:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp",mouseup:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onMouseDown",touchmove:"onMouseMove",touchend:"onMouseUp"}},updateViewport:function(t){var e=this.origin,r=+t.clientX,n=+t.clientY;if(!P(r)&&!P(n)){var i=r-e.x,o=n-e.y;"x"===this.get("direction")?o=0:"y"===this.get("direction")&&(i=0),this.origin={x:r,y:n};var a=this.graph.get("width"),s=this.graph.get("height"),u=this.graph.get("canvas").getCanvasBBox();(u.minX<=a+this.scalableRange&&u.minX+i>a+this.scalableRange||u.maxX+this.scalableRange>=0&&u.maxX+this.scalableRange+i<0)&&(i=0),(u.minY<=s+this.scalableRange&&u.minY+o>s+this.scalableRange||u.maxY+this.scalableRange>=0&&u.maxY+this.scalableRange+o<0)&&(o=0),this.graph.translate(i,o)}},onMouseDown:function(t){var e=t.originalEvent;if((!e||0===e.button)&&(t.name===h.TOUCHSTART||!window||!window.event||"undefined"==typeof window||window.event.buttons||window.event.button)&&!this.keydown&&!t.shape&&(this.origin={x:t.clientX,y:t.clientY},this.dragging=!1,this.enableOptimize)){for(var r=this.graph,n=r.getEdges(),i=0,o=n.length;i<o;i++){var a=n[i].get("group").get("children");a&&a.forEach((function(t){t.hide()}))}for(var s=r.getNodes(),u=0,c=s.length;u<c;u++)for(var f=0,l=s[u].getContainer().get("children");f<l.length;f++){var d=l[f];d.get("isKeyShape")||d.hide()}}},onMouseMove:function(t){var e=this.graph;if(!this.keydown&&!t.shape&&(t=C(t),this.origin)){if(this.dragging)t.type="drag",e.emit("canvas:drag",t);else{if(N(this.origin.x-t.clientX)+N(this.origin.y-t.clientY)<10)return;this.shouldBegin.call(this,t)&&(t.type="dragstart",e.emit("canvas:dragstart",t),this.dragging=!0)}this.shouldUpdate.call(this,t)&&this.updateViewport(t)}},onMouseUp:function(t){var e=this.graph;if(!this.keydown&&!t.shape){if(this.enableOptimize){for(var r=e.getEdges(),n=0,i=r.length;n<i;n++){var o=r[n].get("group").get("children");o&&o.forEach((function(t){t.show()}))}for(var a=e.getNodes(),s=0,u=a.length;s<u;s++)for(var c=0,h=a[s].getContainer().get("children");c<h.length;c++){var f=h[c];f.get("isKeyShape")||f.show()}}this.dragging?(t=C(t),this.shouldEnd.call(this,t)&&this.updateViewport(t),t.type="dragend",e.emit("canvas:dragend",t),this.endDrag()):this.origin=null}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1},onKeyDown:function(t){var e=t.key;e&&(D.indexOf(e.toLowerCase())>-1?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1}},R=r(70),L=r.n(R),z=r(71),F=r.n(z),Y=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function G(t,e,r){var n;return(n=Math.round(t.h)>=60&&Math.round(t.h)<=240?r?Math.round(t.h)-2*e:Math.round(t.h)+2*e:r?Math.round(t.h)+2*e:Math.round(t.h)-2*e)<0?n+=360:n>=360&&(n-=360),n}function q(t,e,r){return 0===t.h&&0===t.s?t.s:((n=r?t.s-.16*e:4===e?t.s+.16:t.s+.05*e)>1&&(n=1),r&&5===e&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2)));var n}function X(t,e,r){var n;return(n=r?t.v+.05*e:t.v-.15*e)>1&&(n=1),Number(n.toFixed(2))}function V(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=F()(t),i=5;i>0;i-=1){var o=n.toHsv(),a=F()({h:G(o,i,!0),s:q(o,i,!0),v:X(o,i,!0)}).toHexString();r.push(a)}r.push(n.toHexString());for(var s=1;s<=4;s+=1){var u=n.toHsv(),c=F()({h:G(u,s),s:q(u,s),v:X(u,s)}).toHexString();r.push(c)}return"dark"===e.theme?Y.map((function(t){var n=t.index,i=t.opacity;return F.a.mix(e.backgroundColor||"#141414",r[n],100*i).toHexString()})):r}var H={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},U={},W={};Object.keys(H).forEach((function(t){U[t]=V(H[t]),U[t].primary=U[t][5],W[t]=V(H[t],{theme:"dark",backgroundColor:"#141414"}),W[t].primary=W[t][5]}));U.red,U.volcano,U.gold,U.orange,U.yellow,U.lime,U.green,U.cyan,U.blue,U.geekblue,U.purple,U.magenta,U.grey;var Z=function(t,e,r){var n=L()(t),i=L()(e);return L()([(1-r)*n.color[0]+r*i.color[0],(1-r)*n.color[1]+r*i.color[1],(1-r)*n.color[2]+r*i.color[2]]).rgb()},$=function(t,e,r,n){void 0===e&&(e="#fff"),void 0===r&&(r="default"),void 0===n&&(n="rgb(150, 150, 150)");var i=Z(e,t,.05).rgb().toString(),o=Z(e,n,.02).rgb().toString(),a=Z(e,n,.05).rgb().toString(),s=Z(e,n,.1).rgb().toString(),u=Z(e,n,.2).rgb().toString(),c=Z(e,n,.3).rgb().toString(),h=V(t,{theme:r,backgroundColor:e}),f=L()(t).hex().toLowerCase(),l=h.indexOf(f),d=t;return-1!==l&&(d=h[l+1]),{mainStroke:t,mainFill:Z(e,t,.1).rgb().toString(),activeStroke:t,activeFill:i,inactiveStroke:Z(e,t,.4).rgb().toString(),inactiveFill:i,selectedStroke:t,selectedFill:e,highlightStroke:d,highlightFill:Z(e,t,.2).rgb().toString(),disableStroke:c,disableFill:a,edgeMainStroke:c,edgeActiveStroke:t,edgeInactiveStroke:u,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:s,comboMainStroke:c,comboMainFill:o,comboActiveStroke:t,comboActiveFill:i,comboInactiveStroke:c,comboInactiveFill:o,comboSelectedStroke:t,comboSelectedFill:o,comboHighlightStroke:d,comboHighlightFill:o,comboDisableStroke:u,comboDisableFill:a}},K=$("rgb(95, 149, 255)","rgb(255, 255, 255)"),Q={version:"3.8.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",customGroupContainerClassName:"custom-group-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:K.mainStroke,fill:K.mainFill},size:20,color:K.mainStroke,linkPoints:{size:8,lineWidth:1,fill:K.activeFill,stroke:K.activeStroke}},nodeStateStyles:{active:{fill:K.activeFill,stroke:K.activeStroke,lineWidth:2,shadowColor:K.mainStroke,shadowBlur:10},selected:{fill:K.selectedFill,stroke:K.selectedStroke,lineWidth:4,shadowColor:K.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:K.highlightFill,stroke:K.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:K.inactiveFill,stroke:K.inactiveStroke,lineWidth:1},disable:{fill:K.disableFill,stroke:K.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:K.edgeMainStroke,lineAppendWidth:2},color:K.edgeMainStroke},edgeStateStyles:{active:{stroke:K.edgeActiveStroke,lineWidth:1},selected:{stroke:K.edgeSelectedStroke,lineWidth:2,shadowColor:K.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:K.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:K.edgeInactiveStroke,lineWidth:1},disable:{stroke:K.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:K.comboMainFill,lineWidth:1,stroke:K.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:K.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:K.comboActiveStroke,lineWidth:1,fill:K.comboActiveFill},selected:{stroke:K.comboSelectedStroke,lineWidth:2,fill:K.comboSelectedFill,shadowColor:K.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:K.comboHighlightStroke,lineWidth:2,fill:K.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:K.comboInactiveStroke,fill:K.comboInactiveFill,lineWidth:1},disable:{stroke:K.comboDisableStroke,fill:K.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},J={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected"}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas"}},validationCombo:function(t){return!(!this.origin||!t||t.destroyed)&&"combo"===t.getType()},onDragStart:function(t){var e=this;if(this.shouldBegin.call(this,t)){var r=t.item;if(r&&!r.destroyed&&!r.hasLocked()){r.getContainer().set("capture",!1);var n=t.target;if(n)if(n.get("isAnchorPoint"))return;var i=this.graph;this.targets=[],this.targetCombo=null;var o=i.findAllByState("node",this.selectedState),a=r.get("id");0===o.filter((function(t){var e=t.get("id");return a===e})).length?this.targets.push(r):o.length>1?o.forEach((function(t){t.hasLocked()||e.targets.push(t)})):this.targets.push(r);var s=[];this.targets.forEach((function(t){s.push(Object(p.clone)(t.getModel()))})),this.set("beforeDragNodes",s),this.origin={x:t.x,y:t.y},this.point={},this.originPoint={}}}},onDrag:function(t){var e=this;this.origin&&this.shouldUpdate(this,t)&&(this.get("enableDelegate")?this.updateDelegate(t):this.targets.map((function(r){e.update(r,t)})))},onDragEnd:function(t){if(this.origin&&this.shouldEnd.call(this,t)){var e=t.item;if(e)e.getContainer().set("capture",!0);this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.updatePositions(t);var r=this.graph;if(r.get("enabledStack")){var n={before:{nodes:this.get("beforeDragNodes"),edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.targets.forEach((function(t){n.after.nodes.push(t.getModel())})),r.pushStack("update",Object(p.clone)(n))}r.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(t){var e=t.item;if(this.validationCombo(e)){this.updatePositions(t);var r=this.graph;if(this.comboActiveState&&r.setItemState(e,this.comboActiveState,!1),this.targetCombo=e,this.onlyChangeComboSize)r.updateCombos();else{var n=e.getModel();this.targets.map((function(t){t.getModel().comboId!==n.id&&r.updateComboTree(t,n.id)})),r.updateCombo(e)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(t){var e=this.graph;this.targets&&0!==this.targets.length&&(this.updatePositions(t),this.onlyChangeComboSize?e.updateCombos():this.targets.map((function(t){t.getModel().comboId&&e.updateComboTree(t)})))},onDropNode:function(t){if(this.targets&&0!==this.targets.length){var e=t.item;this.updatePositions(t);var r=this.graph,n=e.getModel().comboId;if(n){var i=r.findById(n);this.comboActiveState&&r.setItemState(i,this.comboActiveState,!1),this.targets.map((function(t){var e=t.getModel();n!==e.comboId&&r.updateComboTree(t,n)})),r.updateCombo(i)}else this.targets.map((function(t){t.getModel().comboId&&r.updateComboTree(t)}));r.emit("dragnodeend",{items:this.targets,targetItem:e})}},onDragEnter:function(t){var e=t.item;if(this.validationCombo(e)){var r=this.graph;this.comboActiveState&&r.setItemState(e,this.comboActiveState,!0)}},onDragLeave:function(t){var e=t.item;if(this.validationCombo(e)){var r=this.graph;this.comboActiveState&&r.setItemState(e,this.comboActiveState,!1)}},updatePositions:function(t){var e=this;this.targets&&0!==this.targets.length&&this.get("enableDelegate")&&this.targets.map((function(r){return e.update(r,t)}))},update:function(t,e){var r=this.origin,n=t.get("model"),i=t.get("id");this.point[i]||(this.point[i]={x:n.x||0,y:n.y||0});var o={x:e.x-r.x+this.point[i].x,y:e.y-r.y+this.point[i].y};this.get("updateEdge")?this.graph.updateItem(t,o,!1):t.updatePosition(o)},updateDelegate:function(t){this.graph;if(this.delegateRect){var e=t.x-this.origin.x+this.originPoint.minX,r=t.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:e,y:r})}else{var n=this.graph.get("group"),i=Object(p.deepMix)({},Q.delegateStyle,this.delegateStyle),o=this.calculationGroupPosition(t),a=o.x,s=o.y,u=o.width,c=o.height,h=o.minX,f=o.minY;this.originPoint={x:a,y:s,width:u,height:c,minX:h,minY:f},this.delegateRect=n.addShape("rect",{attrs:Object(k.__assign)({width:u,height:c,x:a,y:s},i),name:"rect-delegate-shape"}),this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(t){var e=this.graph.findAllByState("node",this.selectedState);0===e.length&&e.push(t.item);for(var r=1/0,n=-1/0,i=1/0,o=-1/0,a=0;a<e.length;a++){var s=e[a].getBBox(),u=s.minX,c=s.minY,h=s.maxX,f=s.maxY;u<r&&(r=u),c<i&&(i=c),h>n&&(n=h),f>o&&(o=f)}return{x:Math.floor(r),y:Math.floor(i),width:Math.ceil(n)-Math.floor(r),height:Math.ceil(o)-Math.floor(i),minX:r,minY:i}}},tt=Math.min,et=Math.max,rt=Math.abs,nt=["drag","shift","ctrl","alt","control"],it={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return nt.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),"drag"===this.trigger?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(t){var e=t.item,r=this.brush;e||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:t.canvasX,y:t.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&this.updateBrush(t)},onMouseUp:function(t){this.graph;(this.brush||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(t),this.dragging=!1)},clearStates:function(){var t=this.graph,e=this.selectedState,r=t.findAllByState("node",e),n=t.findAllByState("edge",e);r.forEach((function(r){return t.setItemState(r,e,!1)})),n.forEach((function(r){return t.setItemState(r,e,!1)})),this.selectedNodes=[],this.selectedEdges=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedNodes:function(t){var e=this,r=this.graph,n=this.originPoint,i=this.shouldUpdate,o=this.selectedState,a={x:t.x,y:t.y},s=r.getPointByCanvas(n.x,n.y),u=tt(a.x,s.x),c=et(a.x,s.x),h=tt(a.y,s.y),f=et(a.y,s.y),l=[],d=[];r.getNodes().forEach((function(t){var e=t.getBBox();if(e.centerX>=u&&e.centerX<=c&&e.centerY>=h&&e.centerY<=f&&i(t,"select")){l.push(t);var n=t.getModel();d.push(n.id),r.setItemState(t,o,!0)}}));var p=[];this.includeEdges&&l.forEach((function(t){t.getOutEdges().forEach((function(t){var n=t.getModel(),o=n.source,a=n.target;d.includes(o)&&d.includes(a)&&i(t,"select")&&(p.push(t),r.setItemState(t,e.selectedState,!0))}))})),this.selectedEdges=p,this.selectedNodes=l,this.onSelect&&this.onSelect(l,p),r.emit("nodeselectchange",{selectedItems:{nodes:l,edges:p},select:!0})},createBrush:function(){var t=this.graph.get("canvas").addShape("rect",{attrs:this.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,t},updateBrush:function(t){var e=this.originPoint;this.brush.attr({width:rt(t.canvasX-e.x),height:rt(t.canvasY-e.y),x:tt(t.canvasX,e.x),y:tt(t.canvasY,e.y)})},onKeyDown:function(t){var e=t.key;if(e){var r=this.trigger.toLowerCase(),n=e.toLowerCase();this.keydown=n===r||"control"===n&&"ctrl"===r||"ctrl"===n&&"control"===r}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},ot=["shift","ctrl","alt","control"],at={getDefaultCfg:function(){return{multiple:!0,trigger:"shift",selectedState:"selected"}},getEvents:function(){return ot.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior brush-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.multiple?{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(t){var e=this,r=t.item;if(r&&!r.destroyed){var n=r.getType(),i=this,o=i.graph,a=i.keydown,s=i.multiple,u=i.shouldUpdate;if(i.shouldBegin.call(this,t)){if(!a||!s){var c=o.findAllByState(n,this.selectedState);d()(c,(function(t){t!==r&&o.setItemState(t,e.selectedState,!1)}))}if(r.hasState(this.selectedState)){u.call(this,t)&&o.setItemState(r,this.selectedState,!1);var h=o.findAllByState("node",this.selectedState),f=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:r,selectedItems:{nodes:h,combos:f},select:!1})}else{u.call(this,t)&&o.setItemState(r,this.selectedState,!0);h=o.findAllByState("node",this.selectedState),f=o.findAllByState("combo",this.selectedState);o.emit("nodeselectchange",{target:r,selectedItems:{nodes:h,combos:f},select:!0})}}}},onCanvasClick:function(){var t=this,e=this.graph,r=e.findAllByState("node",this.selectedState);d()(r,(function(r){e.setItemState(r,t.selectedState,!1)}));var n=e.findAllByState("combo",this.selectedState);d()(n,(function(r){e.setItemState(r,t.selectedState,!1)})),e.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()||"control"===e.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.keydown=!1}},st=r(16);st.translate=function(t,e,r){var n=new Array(9);return st.fromTranslation(n,r),st.multiply(t,n,e)},st.rotate=function(t,e,r){var n=new Array(9);return st.fromRotation(n,r),st.multiply(t,n,e)},st.scale=function(t,e,r){var n=new Array(9);return st.fromScaling(n,r),st.multiply(t,n,e)},st.transform=function(t,e){for(var r=[].concat(t),n=0,i=e.length;n<i;n++){var o=e[n];switch(o[0]){case"t":st.translate(r,r,[o[1],o[2]]);break;case"s":st.scale(r,r,[o[1],o[2]]);break;case"r":st.rotate(r,r,o[1])}}return r};var ut=st,ct=r(26),ht=r(0);ct.angle=function(t,e){var r=ct.dot(t,e)/(ct.length(t)*ct.length(e));return Math.acos(Object(ht.clamp)(r,-1,1))},ct.direction=function(t,e){return t[0]*e[1]-e[0]*t[1]},ct.angleTo=function(t,e,r){var n=ct.angle(t,e),i=ct.direction(t,e)>=0;return r?i?2*Math.PI-n:n:i?n:2*Math.PI-n},ct.vertical=function(t,e,r){return r?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t};var ft=ct,lt=r(131),dt=function(t,e){var r=t?Object(ht.clone)(t):[1,0,0,0,1,0,0,0,1];return Object(ht.each)(e,(function(t){switch(t[0]){case"t":ut.translate(r,r,[t[1],t[2]]);break;case"s":ut.scale(r,r,[t[1],t[2]]);break;case"r":ut.rotate(r,r,t[1]);break;case"m":ut.multiply(r,r,t[1]);break;default:return!1}})),r},pt={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.7,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"}}},getEvents:function(){var t=this.fixSelectedItems;return t.fixState||(t.fixState="selected"),t.fixAll&&(t.fixLineWidth=!0,t.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(t){var e=t.originalEvent.touches,r=e[0],n=e[1];t.preventDefault(),n&&(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.currentScale||1)},onTouchMove:function(t){if(this.moveable){t.preventDefault();var e=t.originalEvent.touches,r=e[0],n=e[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var i=function(t,e){return Math.hypot(e.x-t.x,e.y-t.y)},o=i({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/i({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),a=this.originScale*o;this.currentScale=a;var s=this.get("minZoom")||this.graph.get("minZoom");if(!(a>(this.get("maxZoom")||this.graph.get("maxZoom"))||a<s)){var u=this.graph.get("canvas").getPointByClient(t.clientX,t.clientY);this.graph.zoomTo(a,{x:u.x,y:u.y}),this.graph.emit("wheelzoom",t)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(t){var e=this,r=this.graph,n=this.fixSelectedItems;if(this.shouldUpdate.call(this,t)){t.preventDefault();var i,o=r.get("canvas").getPointByClient(t.clientX,t.clientY),a=this.get("sensitivity"),s=r.getZoom();i=s*(t.wheelDelta<0?1-.05*a:1/(1-.05*a));var u=this.get("minZoom")||r.get("minZoom");if(!(i>(this.get("maxZoom")||r.get("maxZoom"))||i<u)){if(this.get("enableOptimize")){var c=this.get("optimizeZoom"),h=this.get("optimized"),f=r.getNodes(),l=r.getEdges(),d=f.length,p=l.length;if(!h){for(var g=0;g<d;g++){if(!(k=f[g]).destroyed)for(var v=(U=k.get("group").get("children")).length,y=0;y<v;y++){(D=U[y]).destoryed||D.get("isKeyShape")||D.hide()}}for(var m=0;m<p;m++)for(v=(U=(H=l[m]).get("group").get("children")).length,y=0;y<v;y++){(D=U[y]).hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var b=setTimeout((function(){var t=r.getZoom();if(e.get("optimized")){e.set("optimized",!1);for(var n=0;n<d;n++){var i=f[n],o=(u=i.get("group").get("children")).length;if(t<c)i.getKeyShape().show();else for(var a=0;a<o;a++){(g=u[a]).get("visible")||g.show()}}for(var s=0;s<p;s++){var u,h=l[s];o=(u=h.get("group").get("children")).length;if(t<c)h.getKeyShape().show();else for(a=0;a<o;a++){var g;(g=u[a]).get("visible")||g.show()}}}}),500);this.set("timeout",b)}if(s<=1){var x=void 0,w=void 0;if(n.fixAll||n.fixLineWidth||n.fixLabel){x=r.findAllByState("node",n.fixState),w=r.findAllByState("edge",n.fixState);for(var M=s/i,S=x.length,_=0;_<S;_++){var k,O=(k=x[_]).getContainer(),E=k.getModel(),j=k.getOriginStyle(),C=k.getStateStyle(n.fixState),A=k.get("shapeFactory").getShape(E.shape||E.type).getStateStyle(n.fixState,k)[n.fixState];if(n.fixAll){if(i<=1){var P=Object(ht.clone)(O.getMatrix());P||(P=[1,0,0,0,1,0,0,0,1]);var I=k.getModel(),T=I.x,N=I.y;ut.translate(P,P,[-T,-N]),ut.scale(P,P,[M,M]),ut.translate(P,P,[T,N]),O.setMatrix(P)}}else for(v=(U=O.get("children")).length,y=0;y<v;y++){var D=U[y],B=void 0,R=void 0;if(n.fixLabel)if("text"===D.get("type")){B=D.attr("fontSize")||12;var L=C[D.get("name")],z=A[D.get("name")],F=L?L.fontSize:12,Y=z?z.fontSize:12,G=F||Y||12;if(i<=1&&D.attr("fontSize",G/i),R)break}if(n.fixLineWidth&&D.get("isKeyShape")){R=D.attr("lineWidth")||0;var q=C.lineWidth||A.lineWidth||j.lineWidth||0;if(i<=1&&D.attr("lineWidth",q/i),B)break}}}for(var X=w.length,V=0;V<X;V++){var H,U=(O=(H=w[V]).getContainer()).get("children");for(E=H.getModel(),C=H.getStateStyle(n.fixState),A=H.get("shapeFactory").getShape(E.shape||E.type).getStateStyle(n.fixState,H)[n.fixState],v=U.length,y=0;y<v;y++){D=U[y],B=void 0,R=void 0;if(n.fixLabel||n.fixAll)if("text"===D.get("type")){B=D.attr("fontSize")||12;L=C[D.get("name")],z=A[D.get("name")],F=L?L.fontSize:12,Y=z?z.fontSize:12,G=F||Y||12;if(i<=1&&D.attr("fontSize",G/i),R)break}if((n.fixLineWidth||n.fixAll)&&D.get("isKeyShape")){R=D.attr("lineWidth")||0;q=C.lineWidth||A.lineWidth||1;if(i<=1&&D.attr("lineWidth",q/i),B)break}}}}}r.zoomTo(i,{x:o.x,y:o.y}),r.emit("wheelzoom",t)}}}},gt=r(5),vt=r.n(gt),yt=r(8),mt=r.n(yt),bt={onMouseEnter:function(t){var e=t.item;this.currentTarget=e,this.showTooltip(t),this.graph.emit("tooltipchange",{item:t.item,action:"show"})},onMouseMove:function(t){this.shouldUpdate(t)?this.currentTarget&&t.item===this.currentTarget&&this.updatePosition(t):this.hideTooltip()},onMouseLeave:function(t){this.shouldEnd(t)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(t){var e=this.container;if(t.item&&!t.item.destroyed){e||(e=this.createTooltip(this.graph.get("canvas")),this.container=e);var r=this.formatText(t.item.get("model"),t);e.innerHTML=r,vt()(this.container,{visibility:"visible"}),this.updatePosition(t)}},hideTooltip:function(){vt()(this.container,{visibility:"hidden"})},updatePosition:function(t){var e=this.get("shouldBegin"),r=this.width,n=this.height,i=this.container,o=this.graph;if(e(t)){var a=o.getPointByClient(t.clientX,t.clientY),s=o.getCanvasByPoint(a.x,a.y),u=s.x,c=s.y,h=i.getBoundingClientRect();u>r/2?u-=h.width:u+=this.offset,c>n/2?c-=h.height:c+=this.offset;var f=u+"px",l=c+"px";vt()(this.container,{left:f,top:l,visibility:"visible"})}else vt()(i,{visibility:"hidden"})},createTooltip:function(t){var e=t.get("el");e.style.position="relative";var r=mt()('<div class="g6-tooltip g6-'+this.item+'-tooltip"></div>');return e.parentNode.appendChild(r),vt()(r,{position:"absolute",visibility:"visible"}),this.width=t.get("width"),this.height=t.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},xt=Object(k.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},bt),wt=Object(k.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: "+t.source+" target: "+t.target}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},bt),Mt=r(12),St=r.n(Mt),_t={getDefaultCfg:function(){return{delegate:!0,delegateStyle:{},delegateShapes:{},delegateShapeBBoxs:{}}},getEvents:function(){return{dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd","canvas:mouseleave":"onOutOfRange"}},onDragStart:function(t){var e=this.graph,r=t.target.get("groupId");if(r){var n=e.get("customGroupControll"),i=n.customGroup,o=i[r].nodeGroup;this.targetGroup=o,this.mouseOrigin={x:t.x,y:t.y};for(var a=e.save().groups,s=null,u=0;u<a.length;u++){var c=a[u];if(r===c.id){s=c.parentId;break}}if(s){var h=i[s].nodeGroup;n.setGroupStyle(h.get("keyShape"),"hover")}}},onDrag:function(t){this.mouseOrigin&&this.updateDelegate(t)},onDragEnd:function(t){var e=this.graph,r=t.target.get("groupId");if(this.delegateShapes[r]&&(this.delegateShapeBBox=this.delegateShapes[r].getBBox(),this.delegateShapes[r].remove(),delete this.delegateShapes[r]),this.delegateShapeBBox){var n=e.get("customGroupControll"),i=this.delegateShapeBBoxs[r];n.updateGroup(r,i,this.mouseOrigin),this.mouseOrigin=null,this.shapeOrigin=null,n.resetNodePoint(),this.delegateShapeBBox=null}},updateDelegate:function(t){var e=this.graph,r=t.target.get("groupId"),n=this.targetGroup.get("keyShape"),i=this.delegateShapes[r],o=n.getBBox(),a=n.get("type");if(i){var s=this.mouseOrigin,u=this.shapeOrigin,c=t.x-s.x,h=t.y-s.y,f=c+u.x,l=h+u.y;i.attr({x:f,y:l}),this.delegateShapeBBoxs[r]=i.getBBox()}else{var d=e.get("delegateGroup"),p=o.x,g=o.y,v=o.width,y=o.height,m=Object(k.__assign)({width:v,height:y},St()({},Q.delegateStyle,this.delegateStyle));if("circle"===a){var b=v>y?v/2:y/2,x=p+b,w=g+b;i=d.addShape("circle",{attrs:Object(k.__assign)({x:x,y:w,r:b},m),name:"circle-delegate-shape"}),this.shapeOrigin={x:x,y:w}}else i=d.addShape("rect",{attrs:Object(k.__assign)({x:p,y:g},m),name:"rect-delegate-shape"}),this.shapeOrigin={x:p,y:g};this.delegateShapes[r]=i,this.delegateShapeBBoxs[r]=i.getBBox()}},onOutOfRange:function(t){var e=this,r=this.graph.get("canvas").get("el"),n=function(i){i.target!==r&&(e.onDragEnd(t),document.body.removeEventListener("mouseup",n,!0))};this.mouseOrigin&&document.body.addEventListener("mouseup",n,!0)}},kt=document.body,Ot={getDefaultCfg:function(){return{updateEdge:!0,delegate:!0,delegateStyle:{},maxMultiple:1.1,minMultiple:1}},getEvents:function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd","canvas:mouseleave":"onOutOfRange",dragover:"onDragOver",dragleave:"onDragLeave"}},onDragOver:function(t){var e=this.graph,r=t.target.get("groupId");if(r&&this.origin){var n=e.get("customGroupControll"),i=n.getDeletageGroupById(r);if(i){var o=i.nodeGroup.get("keyShape");this.inGroupId=r,n.setGroupStyle(o,"hover")}}},onDragLeave:function(t){var e=this.graph,r=t.target.get("groupId");if(r&&this.origin){var n=e.get("customGroupControll"),i=n.getDeletageGroupById(r);if(i){var o=i.nodeGroup.get("keyShape");n.setGroupStyle(o,"default")}}r||(this.inGroupId=null)},onDragStart:function(t){var e=this.graph;if(this.shouldBegin.call(this,t)){var r=t.item;this.target=r;var n=r.getModel().groupId;if(n){var i=e.get("customGroupControll"),o=i.getDeletageGroupById(n);if(o){var a=o.nodeGroup.get("keyShape");i.setGroupStyle(a,"hover"),this.inGroupId=n}}this.origin={x:t.x,y:t.y},this.point={},this.originPoint={}}},onDrag:function(t){if(this.origin&&this.get("shouldUpdate").call(this,t)){this.update(this.target,t,!0);var e=t.item,r=this.graph,n=e.getModel().groupId;if(n){var i=r.get("customGroupControll"),o=i.getDeletageGroupById(n);if(o){var a=o.nodeGroup.get("keyShape");this.inGroupId!==n?i.setGroupStyle(a,"default"):i.setGroupStyle(a,"hover")}}}},onDragEnd:function(t){if(this.origin&&this.shouldEnd.call(this,t)){if(this.shape&&(this.shape.remove(),this.shape=null),this.target){var e=this.target.get("delegateShape");e&&(e.remove(),this.target.set("delegateShape",null))}this.target&&this.update(this.target,t),this.point={},this.origin=null,this.originPoint={},this.target=null,this.setCurrentGroupStyle(t)}},setCurrentGroupStyle:function(t){var e=this.graph,r=t.item,n=r.getModel(),i=n.groupId,o=n.id,a=e.get("customGroupControll"),s=a.customGroup,u=e.get("groupNodes");if(this.inGroupId&&i){if(!(w=s[i].nodeGroup))return;var c=w.get("keyShape"),h=r.getBBox(),f=c.getBBox(),l=h.centerX,d=h.centerY,p=f.minX,g=f.minY,v=f.maxX,y=f.maxY;if(!(l<v*this.maxMultiple&&l>p*this.minMultiple&&d<y*this.maxMultiple&&d>g*this.minMultiple)||this.inGroupId!==i){var m=u[i];u[i]=m.filter((function(t){return t!==o})),a.dynamicChangeGroupSize(t,w,c),delete n.groupId}if(this.inGroupId!==i){if(!(x=s[this.inGroupId].nodeGroup))return;var b=x.get("keyShape");-1===u[this.inGroupId].indexOf(o)&&u[this.inGroupId].push(o),n.groupId=this.inGroupId,a.dynamicChangeGroupSize(t,x,b)}a.setGroupStyle(c,"default")}else if(this.inGroupId&&!i){var x;if(!(x=s[this.inGroupId].nodeGroup))return;c=x.get("keyShape");-1===u[this.inGroupId].indexOf(o)&&u[this.inGroupId].push(o),n.groupId=this.inGroupId,a.dynamicChangeGroupSize(t,x,c)}else if(!this.inGroupId&&i){var w;if(Object.keys(u).forEach((function(t){var e=u[t];u[t]=e.filter((function(t){return t!==o}))})),!(w=s[i].nodeGroup))return;c=w.get("keyShape");a.dynamicChangeGroupSize(t,w,c),delete n.groupId}this.inGroupId=null},onOutOfRange:function(t){var e=this,r=e.graph.get("canvas").get("el");e.origin&&kt.addEventListener("mouseup",(function n(i){i.target!==r&&(t.item=e.target,e.onDragEnd(t),document.body.removeEventListener("mouseup",n,!0))}),!0)},update:function(t,e,r){var n=this.origin,i=t.get("model"),o=t.get("id");this.point[o]||(this.point[o]={x:i.x,y:i.y});var a=e.x-n.x+this.point[o].x,s=e.y-n.y+this.point[o].y;if(r)this.updateDelegate(e,a,s);else{var u={x:a,y:s};this.get("updateEdge")?this.graph.updateItem(t,u):(t.updatePosition(u),this.graph.paint())}},updateDelegate:function(t,e,r){var n=this.graph,i=t.item,o=n.get("groupType"),a=i.get("keyShape").getBBox();if(!this.shape){var s=n.get("delegateGroup"),u=St()({},Q.delegateStyle,this.delegateStyle);this.target&&(this.shape=s.addShape("rect",{attrs:Object(k.__assign)({width:a.width,height:a.height,x:e-a.width/2,y:r-a.height/2},u),name:"delegate-shape"}),this.target.set("delegateShape",this.shape)),this.shape.set("capture",!1)}this.target&&("circle"===o?this.shape.attr({x:e-a.width/2,y:r-a.height/2}):"rect"===o&&this.shape.attr({x:e,y:r}))}},Et=["click","dblclick"],jt={getDefaultCfg:function(){return{trigger:"dblclick"}},getEvents:function(){var t,e;return Et.includes(this.trigger)?e=this.trigger:(e="dblclick",console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),(t={})[""+e]="onGroupClick",t},onGroupClick:function(t){var e=t.target,r=this.graph,n=e.get("groupId");n&&r.get("customGroupControll").collapseExpandGroup(n)}},Ct=["click","dblclick"],At={getDefaultCfg:function(){return{trigger:"click",onChange:function(){}}},getEvents:function(){var t,e;return Ct.includes(this.trigger)?e=this.trigger:(e="click",console.warn("Behavior collapse-expand 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),(t={})["node:"+e]="onNodeClick",t.touchstart="onNodeClick",t},onNodeClick:function(t){var e=t.item,r=this.graph.findDataById(e.get("id"));if(r){var n=r.children;if(n&&0!==n.length){var i=!r.collapsed;if(this.shouldBegin(t,i)&&(r.collapsed=i,e.getModel().collapsed=i,this.graph.emit("itemcollapsed",{item:t.item,collapsed:i}),this.shouldUpdate(t,i))){try{this.onChange(e,i)}catch(t){console.warn("G6 自 3.0.4 版本支持直接从 item.getModel() 获取源数据(临时通知，将在3.2.0版本中清除)",t)}this.graph.layout()}}}}},Pt=function(t,e){if(!1!==e(t)&&t){var r=t.get("combos");if(0===r.length)return!1;Object(p.each)(r,(function(t){Pt(t,e)}))}},It={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected"}},getEvents:function(){return{"combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(t){var e=t.item;return!(!e||e.destroyed)&&(!!this.shouldUpdate(this,t)&&"combo"===e.getType())},onDragStart:function(t){var e=this,r=this.graph,n=t.item;if(this.validationCombo(t)){this.targets=[];var i=r.findAllByState("combo",this.selectedState),o=n.get("id");0===i.filter((function(t){var e=t.get("id");return o===e})).length?this.targets.push(n):this.targets=i,this.activeState&&this.targets.map((function(t){var n=t.getModel();if(n.parentId){var i=r.findById(n.parentId);i&&r.setItemState(i,e.activeState,!0)}})),this.point={},this.originPoint={},this.origin={x:t.x,y:t.y},this.currentItemChildCombos=[],Pt(n,(function(t){if(t.destroyed)return!1;var r=t.getModel();return e.currentItemChildCombos.push(r.id),!0}))}},onDrag:function(t){var e=this;if(this.origin&&this.validationCombo(t))if(this.enableDelegate)this.updateDelegate(t);else{if(this.activeState){var r=this.graph,n=t.item,i=n.getModel(),o=r.getCombos(),a=n.getBBox(),s=a.centerX,u=a.centerY,c=a.width;o.filter((function(t){var r=t.getModel();return i.parentId,r.id!==i.id&&!e.currentItemChildCombos.includes(r.id)})).map((function(t){var n=t.getBBox(),i=n.centerX,o=n.centerY,a=n.width,h=s-i,f=u-o,l=2*Math.sqrt(h*h+f*f);c+a-l>.8*c?r.setItemState(t,e.activeState,!0):r.setItemState(t,e.activeState,!1)}))}Object(p.each)(this.targets,(function(r){e.updateCombo(r,t)}))}},updatePositions:function(t){var e=this;this.enableDelegate&&Object(p.each)(this.targets,(function(r){e.updateCombo(r,t)}))},onDrop:function(t){var e=this,r=t.item;if(r&&this.targets&&!r.destroyed){this.updatePositions(t);var n=this.graph,i=r.getModel();this.targets.map((function(t){t.getModel().parentId!==i.id?(e.activeState&&n.setItemState(r,e.activeState,!1),e.onlyChangeComboSize?n.updateCombo(t):n.updateComboTree(t,i.id)):n.updateCombo(r)})),this.end(r,t),this.endComparison=!0}},onNodeDrop:function(t){var e=this;if(this.targets&&0!==this.targets.length){this.updatePositions(t);var r,n=this.graph,i=t.item.getModel().comboId;if(i){if(this.activeState){var o=n.findById(i);n.setItemState(o,this.activeState,!1)}this.targets.map((function(t){e.onlyChangeComboSize?n.updateCombo(t):i!==t.getID()&&(r=n.findById(i),i!==t.getModel().parentId&&n.updateComboTree(t,i))}))}else this.targets.map((function(t){e.onlyChangeComboSize?n.updateCombo(t):t.getModel().comboId&&n.updateComboTree(t)}));this.endComparison=!0,this.end(r,t)}},onDragEnter:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,r=this.graph;this.activeState&&r.setItemState(e,this.activeState,!0)}},onDragLeave:function(t){if(this.origin&&this.validationCombo(t)){var e=t.item,r=this.graph;this.activeState&&r.setItemState(e,this.activeState,!1)}},onDragEnd:function(t){if(this.targets&&0!==this.targets.length){var e=t.item;this.updatePositions(t);var r=this.getParentCombo(e.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,t)}},end:function(t,e){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape)n.get("delegateGroup").clear(),this.delegateShape=null;t&&this.activeState&&n.setItemState(t,this.activeState,!1),t||this.targets.map((function(t){r.onlyChangeComboSize?n.updateCombo(t):n.updateComboTree(t)})),this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(t,e){var r=this;if(!1!==e(t)&&t){var n=t.get("combos");Object(p.each)(n,(function(t){r.traverse(t,e)}));var i=t.get("nodes");Object(p.each)(i,(function(t){r.traverse(t,e)}))}},updateCombo:function(t,e){var r=this;this.traverse(t,(function(t){return!t.destroyed&&(r.updateSignleItem(t,e),!0)}))},updateSignleItem:function(t,e){var r=this.origin,n=this.graph,i=t.getModel(),o=t.get("id");this.point[o]||(this.point[o]={x:i.x,y:i.y});var a=e.x-r.x+this.point[o].x,s=e.y-r.y+this.point[o].y;n.updateItem(t,{x:a,y:s})},getParentCombo:function(t){var e=this.graph;if(t){var r=e.findById(t);if(r)return r}},updateDelegate:function(t){var e=this.graph;if(this.delegateShape){var r=t.x-this.origin.x+this.originPoint.minX,n=t.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:r,y:n})}else{var i=e.get("delegateGroup"),o=null,a=(o=this.targets.length>1?I(this.targets):this.targets[0].getBBox()).x,s=o.y,u=o.width,c=o.height,h=o.minX,f=o.minY;this.originPoint={x:a,y:s,width:u,height:c,minX:h,minY:f};var l=Object(k.__assign)(Object(k.__assign)({},Q.delegateStyle),this.delegateStyle);this.delegateShape=i.addShape("rect",{attrs:Object(k.__assign)({width:o.width,height:o.height,x:o.x,y:o.y},l),name:"combo-delegate-shape"})}}},Tt=["click","dblclick"],Nt={getDefaultCfg:function(){return{trigger:"dblclick",relayout:!0}},getEvents:function(){var t,e;return Tt.includes(this.trigger)?e=this.trigger:(e="dblclick",console.warn("Behavior collapse-expand-group 的 trigger 参数不合法，请输入 'click' 或 'dblclick'")),(t={})["combo:"+e]="onComboClick",t},onComboClick:function(t){var e=t.item,r=this.graph,n=this.relayout;if(e&&!e.destroyed&&"combo"===e.getType()){var i=e.getModel().id;i&&(r.collapseExpandCombo(i),n&&r.get("layout")?r.layout():r.refreshPositions())}}},Dt=function(t,e,r){return t>=e&&t<=r},Bt=function(t,e,r,n){var i=r.x-t.x,o=r.y-t.y,a=e.x-t.x,s=e.y-t.y,u=n.x-r.x,c=n.y-r.y,h=a*c-s*u,f=null;if(h*h>.001*(a*a+s*s)*(u*u+c*c)){var l=(i*c-o*u)/h,d=(i*s-o*a)/h;Dt(l,0,1)&&Dt(d,0,1)&&(f={x:t.x+l*a,y:t.y+l*s})}return f},Rt=function(t,e){var r=t.x,n=t.y,i=t.width,o=t.height,a=[],s={x:r+i/2,y:n+o/2};a.push({x:r,y:n}),a.push({x:r+i,y:n}),a.push({x:r+i,y:n+o}),a.push({x:r,y:n+o}),a.push({x:r,y:n});for(var u=null,c=1;c<a.length&&!(u=Bt(a[c-1],a[c],s,e));c++);return u},Lt=function(t,e){var r=t.x,n=t.y,i=t.r,o=e.x-r,a=e.y-n;if(Math.sqrt(o*o+a*a)<i)return null;var s=Math.sign(o),u=Math.sign(a),c=Math.atan(a/o);return{x:r+Math.abs(i*Math.cos(c))*s,y:n+Math.abs(i*Math.sin(c))*u}},zt=function(t,e){var r=t.rx,n=t.ry,i=t.x,o=t.y,a=e.x-i,s=e.y-o,u=Math.atan2(s/n,a/r);return u<0&&(u+=2*Math.PI),{x:i+r*Math.cos(u),y:o+n*Math.sin(u)}},Ft=function(t,e,r){void 0===r&&(r=1);var n=[t.x,t.y,r];return e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]),lt.transformMat3(n,n,e),{x:n[0],y:n[1]}},Yt=function(t,e,r){void 0===r&&(r=1),e&&!isNaN(e[0])||(e=[1,0,0,0,1,0,0,0,1]);var n=ut.invert([],e);n||(n=[1,0,0,0,1,0,0,0,1]);var i=[t.x,t.y,r];return lt.transformMat3(i,i,n),{x:i[0],y:i[1]}},Gt=function(t,e,r){var n=t.x-e.x,i=t.y-e.y,o=t.x-r.x,a=t.y-r.y,s=(t.x*t.x-e.x*e.x-e.y*e.y+t.y*t.y)/2,u=(t.x*t.x-r.x*r.x-r.y*r.y+t.y*t.y)/2,c=i*o-n*a;return{x:-(a*s-i*u)/c,y:-(n*u-o*s)/c}},qt=function(t,e){var r=t.x-e.x,n=t.y-e.y;return Math.sqrt(r*r+n*n)},Xt=function(t,e){var r=[];return t.forEach((function(t){var n=[];t.forEach((function(t){n.push(t*e)})),r.push(n)})),r},Vt=function(t){for(var e=[],r=t.length,n=0;n<r;n+=1){e[n]=[];for(var i=0;i<r;i+=1)n===i?e[n][i]=0:0!==t[n][i]&&t[n][i]?e[n][i]=t[n][i]:e[n][i]=1/0}for(var o=0;o<r;o+=1)for(n=0;n<r;n+=1)for(i=0;i<r;i+=1)e[n][i]>e[n][o]+e[o][i]&&(e[n][i]=e[n][o]+e[o][i]);return e},Ht=function(t,e){var r=t.nodes,n=t.edges,i=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((function(t,e){o[t.id]=e;i.push([])})),n&&n.forEach((function(t){var r=t.source,n=t.target,a=o[r],s=o[n];i[a][s]=1,e||(i[s][a]=1)})),i},Ut=function(t,e){t.translate(e.x,e.y)},Wt=function(t,e){var r=t.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t.getCanvasBBox(),i=e.x-n.minX,o=e.y-n.minY,a=dt(r,[["t",i,o]]);t.setMatrix(a)},Zt=function(t,e){var r=t.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=e;m()(e)||(n=[e,e]),m()(e)&&1===e.length&&(n=[e[0],e[0]]),r=dt(r,[["s",n[0],n[1]]]),t.setMatrix(r)},$t=function(t,e){var r=t.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=dt(r,[["r",e]]),t.setMatrix(r)},Kt=function(t,e,r){for(var n=[],i=0;i<t;i++)n[i]=0;return r.forEach((function(t){t.source&&(n[e[t.source]]+=1),t.target&&(n[e[t.target]]+=1)})),n};function Qt(t,e,r){return(r[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(r[1]-t[1])&&Math.min(t[0],e[0])<=r[0]&&r[0]<=Math.max(t[0],e[0])&&Math.min(t[1],e[1])<=r[1]&&r[1]<=Math.max(t[1],e[1])}var Jt=function(t,e,r){var n=!1,i=t.length;function o(t){return Math.abs(t)<1e-6?0:t<0?-1:1}if(i<=2)return!1;for(var a=0;a<i;a++){var s=t[a],u=t[(a+1)%i];if(Qt(s,u,[e,r]))return!0;o(s[1]-r)>0!=o(u[1]-r)>0&&o(e-(r-s[1])*(s[0]-u[0])/(s[1]-u[1])-s[0])<0&&(n=!n)}return n},te=function(t,e){return!(e.minX>t.maxX||e.maxX<t.minX||e.minY>t.maxY||e.maxY<t.minY)},ee=function(t,e){var r=function(t){var e=t.map((function(t){return t[0]})),r=t.map((function(t){return t[1]}));return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,r),maxY:Math.max.apply(null,r)}},n=function(t){for(var e=[],r=t.length,n=0;n<r-1;n++){var i=t[n],o=t[n+1];e.push({from:{x:i[0],y:i[1]},to:{x:o[0],y:o[1]}})}if(e.length>1){var a=t[0],s=t[r-1];e.push({from:{x:s[0],y:s[1]},to:{x:a[0],y:a[1]}})}return e};if(t.length<2||e.length<2)return!1;var i=r(t),o=r(e);if(!te(i,o))return!1;var a=!1;if(Object(ht.each)(e,(function(e){if(Jt(t,e[0],e[1]))return a=!0,!1})),a)return!0;if(Object(ht.each)(t,(function(t){if(Jt(e,t[0],t[1]))return a=!0,!1})),a)return!0;var s=n(t),u=n(e),c=!1;return Object(ht.each)(u,(function(t){if(function(t,e){var r=!1;return Object(ht.each)(t,(function(t){if(Bt(t.from,t.to,e.from,e.to))return r=!0,!1})),r}(s,t))return c=!0,!1})),c},re=function(){function t(t,e,r,n){this.x1=t,this.y1=e,this.x2=r,this.y2=n}return t.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:r,maxY:n,width:r-t,height:n-e}},t}(),ne=function(t,e){return{top:[t.minX,t.minY,t.maxX,t.minY],left:[t.minX,t.minY,t.minX,t.maxY],bottom:[t.minX,t.maxY,t.maxX,t.maxY],right:[t.maxX,t.minY,t.maxX,t.maxY]}[e]},ie=function(t,e){var r=(e.x2-e.x1)*(t.y1-e.y1)-(e.y2-e.y1)*(t.x1-e.x1),n=(t.x2-t.x1)*(t.y1-e.y1)-(t.y2-t.y1)*(t.x1-e.x1),i=(e.y2-e.y1)*(t.x2-t.x1)-(e.x2-e.x1)*(t.y2-t.y1);if(i){var o=r/i,a=n/i;if(o>=0&&o<=1&&a>=0&&a<=1)return o}return Number.POSITIVE_INFINITY},oe=function(t,e){for(var r=["top","left","bottom","right"],n=t.getBBox(),i=0,o=[],a=0;a<4;a++){var s=ne(n,r[a]),u=s[0],c=s[1],h=s[2],f=s[3];o[a]=Bt({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},{x:u,y:c},{x:h,y:f}),o[a]&&(i+=1)}return[o,i]},ae=function(t,e){for(var r=["top","left","bottom","right"],n=t.getBBox(),i=Number.POSITIVE_INFINITY,o=0,a=0;a<4;a++){var s=ne(n,r[a]),u=s[0],c=s[1],h=s[2],f=s[3],l=ie(e,new re(u,c,h,f));(l=Math.abs(l-.5))>=0&&l<=1&&(o+=1,i=l<i?l:i)}return 0===o?-1:i},se=function(t){var e=0,r=0;if(t.length>0){for(var n=0,i=t;n<i.length;n++){var o=i[n];e+=o.x,r+=o.y}e/=t.length,r/=t.length}return{x:e,y:r}},ue=function(t,e){return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)},ce=function(t,e){var r,n=e.x1,i=e.y1,o=e.x2-n,a=e.y2-i,s=t.x-n,u=t.y-i,c=s*o+u*a;r=c<=0||(c=(s=o-s)*o+(u=a-u)*a)<=0?0:c*c/(o*o+a*a);var h=s*s+u*u-r;return h<0&&(h=0),h},he=function(t,e,r){return void 0===r&&(r=.001),Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<Math.pow(r,2)},fe=function(t,e){var r=t.x<e.x,n=t.x>e.x+e.width,i=t.y>e.y+e.height,o=t.y<e.y;if(!(r||n||i||o))return 0;if(i&&!r&&!n)return Math.pow(e.y+e.height-t.y,2);if(o&&!r&&!n)return Math.pow(t.y-e.y,2);if(r&&!i&&!o)return Math.pow(e.x-t.x,2);if(n&&!i&&!o)return Math.pow(e.x+e.width-t.x,2);var a=Math.min(Math.abs(e.x-t.x),Math.abs(e.x+e.width-t.x)),s=Math.min(Math.abs(e.y-t.y),Math.abs(e.y+e.height-t.y));return a*a+s*s};function le(t,e){for(var r=[],n=0,i=t.length;i-2*!e>n;n+=2){var o=[{x:+t[n-2],y:+t[n-1]},{x:+t[n],y:+t[n+1]},{x:+t[n+2],y:+t[n+3]},{x:+t[n+4],y:+t[n+5]}];e?n?i-4===n?o[3]={x:+t[0],y:+t[1]}:i-2===n&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[i-2],y:+t[i-1]}:i-4===n?o[3]=o[2]:n||(o[0]={x:+t[n],y:+t[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}r(95);var de="\t\n\v\f\r   ᠎             　\u2028\u2029",pe=new RegExp("([a-z])["+de+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+de+"]*,?["+de+"]*)+)","ig"),ge=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+de+"]*,?["+de+"]*","ig");function ve(t){if(!t)return null;if(m()(t))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(pe,(function(t,n,i){var o=[],a=n.toLowerCase();if(i.replace(ge,(function(t,e){e&&o.push(+e)})),"m"===a&&o.length>2&&(r.push([n].concat(o.splice(0,2))),a="l",n="m"===n?"l":"L"),"o"===a&&1===o.length&&r.push([n,o[0]]),"r"===a)r.push([n].concat(o));else for(;o.length>=e[a]&&(r.push([n].concat(o.splice(0,e[a]))),e[a]););return""})),r}r(67),r(68);var ye=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,(function(t,r){if("\\"===t.charAt(0))return t.slice(1);var n=e[r];return 0===n&&(n="0"),n||""})):t},me=function(t){var e=[];if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);for(var r=0,n=t;r<n.length;r++){var i=n[r],o=i.x,a=i.y;e.push(o),e.push(a)}var s=le(e);return s.unshift(["M",t[0].x,t[0].y]),s},be=function(t,e,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i={x:(1-r)*t.x+r*e.x,y:(1-r)*t.y+r*e.y},o=[];ft.normalize(o,[e.x-t.x,e.y-t.y]),0===o.length&&(o=[0,0]);var a=[-o[1]*n,o[0]*n];return i.x+=a[0],i.y+=a[1],i},xe=function(t,e){var r=t.length;if(!r)return"";for(var n="",i=0;i<r;i++){var o=t[i];n+=ye(0===i?"M{x} {y}":"L{x} {y}",o)}return e&&(n+="Z"),n},we=function(t){var e=[];return t.forEach((function(t){if("A"!==t[0])for(var r=1;r<t.length;r+=2)e.push([t[r],t[r+1]]);else{var n=t.length;e.push([t[n-2],t[n-1]])}})),e},Me=function(t){if(t.length<2)throw new Error("point length must largn than 2, now it's "+t.length);var e=t[0],r=t[1],n=t[t.length-1],i=t[t.length-2];t.unshift(n),t.unshift(i),t.push(e),t.push(r);for(var o=[],a=1;a<t.length-2;a+=1){var s=t[a-1].x,u=t[a-1].y,c=t[a].x,h=t[a].y,f=t[a+1].x,l=t[a+1].y,d=c+(f-s)/6,p=h+(l-u)/6,g=f-((a!==t.length-2?t[a+2].x:f)-c)/6,v=l-((a!==t.length-2?t[a+2].y:l)-h)/6;o.push(["C",d,p,g,v,f,l])}return o.unshift(["M",n.x,n.y]),o},Se=function(t,e){return ft.scale([],ft.normalize([],t),e)},_e=function(t,e){var r=[t[1]-e[1],e[0]-t[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(0===n)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},ke=function(t,e){return[e[0]-t[0],e[1]-t[1]]};function Oe(t,e){if(!t||t.length<1)return"";if(1===t.length)return function(t){var r=[t[0][0],t[0][1]-e],n=[t[0][0],t[0][1]+e];return"M "+r+" A "+e+","+e+",0,0,0,"+n+" A "+e+","+e+",0,0,0,"+r}(t);if(2===t.length)return function(t){var r=ft.scale([],_e(t[0],t[1]),e),n=ft.scale([],r,-1),i=ft.add([],t[0],r),o=ft.add([],t[1],r),a=ft.add([],t[1],n),s=ft.add([],t[0],n);return"M "+i+" L "+o+" A "+[e,e,"0,0,0",a].join(",")+" L "+s+" A "+[e,e,"0,0,0",i].join(",")}(t);for(var r=new Array(t.length),n=0;n<r.length;++n){var i=0===n?t[t.length-1]:t[n-1],o=t[n],a=ft.scale([],_e(i,o),e);r[n]=[ft.add([],i,a),ft.add([],o,a)]}var s="A "+[e,e,"0,0,0,"].join(",");return(r=r.map((function(t,e){var n="";return 0===e&&(n="M "+r[r.length-1][1]+" "),n+=s+t[0]+" L "+t[1]}))).join(" ")}function Ee(t,e){var r,n,i,o=t.length;if(!t||o<1)return"";if(1===o)return n=[(r=t)[0][0],r[0][1]-e],i=[r[0][0],r[0][1]+e],"M "+n+" A "+[e,e,"0,0,0",i].join(",")+" A "+[e,e,"0,0,0",n].join(",");if(2===o)return function(t){var r=ke(t[0],t[1]),n=Se(r,e),i=ft.add([],t[0],ft.scale([],n,-1)),o=ft.add([],t[1],n),a=1.2*e,s=Se(ft.normalize([],r),a),u=ft.scale([],s,-1),c=ft.add([],i,u),h=ft.add([],o,u),f=ft.add([],i,s);return"M "+i+" C "+[c,h,o].join(",")+" S "+[f,i].join(",")+" Z"}(t);for(var a=t.map((function(e,r){var n=t[(r+1)%o];return{p:e,v:ft.normalize([],ke(e,n))}})),s=0;s<a.length;++s){var u=s>0?s-1:o-1,c=ft.normalize([],ft.add([],a[u].v,ft.scale([],a[s].v,-1)));a[s].p=ft.add([],a[s].p,ft.scale([],c,e))}return a.map((function(t){var e=t.p;return{x:e[0],y:e[1]}}))}var je=["drag","shift","ctrl","alt","control"],Ce=["click","drag"],Ae=["shift","ctrl","control","alt","meta",void 0],Pe=["shift","ctrl","alt","control"],Ie={"drag-canvas":B,"zoom-canvas":pt,"drag-node":J,"activate-relations":{getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return"mouseenter"===this.get("trigger")?{"node:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","canvas:click":"clearAllItemStates"}},setAllItemStates:function(t){var e=t.item,r=this.graph;if(this.item=e,this.shouldUpdate(t.item,{event:t,action:"activate"})){for(var n=this.activeState,i=this.inactiveState,o=r.getNodes(),a=r.getEdges(),s=o.length,u=a.length,c=0;c<s;c++){var h=o[c],f=h.hasState("selected");this.resetSelected&&f&&r.setItemState(h,"selected",!1),r.setItemState(h,n,!1),i&&r.setItemState(h,i,!0)}for(c=0;c<u;c++){var l=a[c];r.setItemState(l,n,!1),i&&r.setItemState(l,i,!0)}i&&r.setItemState(e,i,!1),r.setItemState(e,n,!0);var d=e.getEdges(),p=d.length;for(c=0;c<p;c++){var g=void 0;g=(l=d[c]).getSource()===e?l.getTarget():l.getSource(),i&&r.setItemState(g,i,!1),r.setItemState(g,n,!0),r.setItemState(l,i,!1),r.setItemState(l,n,!0),l.toFront()}r.emit("afteractivaterelations",{item:t.item,action:"activate"})}},clearActiveState:function(t){var e=this.get("graph");if(this.shouldUpdate(t.item,{event:t,action:"deactivate"})){var r=this.activeState,n=this.inactiveState,i=e.get("autoPaint");e.setAutoPaint(!1);for(var o=e.getNodes(),a=e.getEdges(),s=o.length,u=a.length,c=0;c<s;c++){var h=o[c];e.clearItemStates(h,[r,n])}for(c=0;c<u;c++){var f=a[c];e.clearItemStates(f,[r,n,"deactivate"])}e.paint(),e.setAutoPaint(i),e.emit("afteractivaterelations",{item:t.item||this.get("item"),action:"deactivate"})}},clearAllItemStates:function(t){var e=this.graph;if(this.shouldUpdate(t.item,{event:t,action:"deactivate"})){for(var r=this.activeState,n=this.inactiveState,i=e.getNodes(),o=e.getEdges(),a=i.length,s=o.length,u=0;u<a;u++){var c=i[u];e.clearItemStates(c,[r,n])}for(u=0;u<s;u++){var h=o[u];e.clearItemStates(h,[r,n,"deactivate"])}e.emit("afteractivaterelations",{item:t.item||this.get("item"),action:"deactivate"})}}},"brush-select":it,"click-select":at,"lasso-select":{getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:"shift",includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return je.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="shift",console.warn("Behavior lasso-select 的 trigger 参数不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),"drag"===this.trigger?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(t){var e=this.lasso;t.item||("drag"===this.trigger||this.keydown)&&(this.selectedNodes&&0!==this.selectedNodes.length&&this.clearStates(),e||(e=this.createLasso()),this.dragging=!0,this.originPoint={x:t.x,y:t.y},this.points.push(this.originPoint),e.show())},onDragMove:function(t){this.dragging&&("drag"===this.trigger||this.keydown)&&(this.points.push({x:t.x,y:t.y}),this.updateLasso(t))},onDragEnd:function(t){(this.lasso||this.dragging)&&("drag"===this.trigger||this.keydown)&&(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var t=this.points,e=[];return t.length&&(t.forEach((function(t,r){0===r?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e.push(["L",t[0].x,t[0].y])),e},clearStates:function(){var t=this.graph,e=this.selectedState,r=t.findAllByState("node",e),n=t.findAllByState("edge",e);r.forEach((function(r){return t.setItemState(r,e,!1)})),n.forEach((function(r){return t.setItemState(r,e,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var t=this,e=this.graph,r=this.shouldUpdate,n=this.points.map((function(t){return[e.getCanvasByPoint(t.x,t.y).x,e.getCanvasByPoint(t.x,t.y).y]})),i=this.selectedState,o=[],a=[];e.getNodes().forEach((function(t){if(function(t,e){var r,n=t.getKeyShape();if("path"===t.get("type"))r=we(n.attr("path"));else{var i=n.getCanvasBBox();r=[[i.minX,i.minY],[i.maxX,i.minY],[i.maxX,i.maxY],[i.minX,i.maxY]]}return ee(e,r)}(t,n)&&r(t,"select")){o.push(t);var s=t.getModel();a.push(s.id),e.setItemState(t,i,!0)}}));var s=[];this.includeEdges&&o.forEach((function(n){n.getOutEdges().forEach((function(n){var i=n.getModel(),o=i.source,u=i.target;a.includes(o)&&a.includes(u)&&r(n,"select")&&(s.push(n),e.setItemState(n,t.selectedState,!0))}))})),this.selectedEdges=s,this.selectedNodes=o,this.onSelect&&this.onSelect(o,s),e.emit("nodeselectchange",{selectedItems:{nodes:o,edges:s},select:!0})},createLasso:function(){var t=this.graph.get("delegateGroup").addShape("path",{attrs:Object(k.__assign)({path:[]},this.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.points=[],t},updateLasso:function(t){this.lasso.attr({path:this.getLassoPath()})},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},tooltip:xt,"edge-tooltip":wt,"drag-group":_t,"drag-node-with-group":Ot,"collapse-expand-group":jt,"collapse-expand":At,"drag-combo":It,"collapse-expand-combo":Nt,"create-edge":{getDefaultCfg:function(){return{trigger:"click",key:void 0,edgeConfig:{}}},getEvents:function(){var t;return Ce.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="click",console.warn("Behavior create-edge 的 trigger 参数不合法，请输入 'click'，'drag'")),this.key&&-1===Ae.indexOf(this.key.toLowerCase())&&(this.trigger=void 0,console.warn("Behavior create-edge 的 key 参数不合法，请输入 'shift'，'ctrl'，'alt'，'control'，或 undefined")),"drag"===this.trigger?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:"click"===this.trigger&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),this.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(t){if(!this.key||this.keydown){var e=t.item;e&&e.getID()!==this.source&&"node"===e.getType()||this.cancelCreating({item:this.edge,x:t.x,y:t.y})}},onClick:function(t){if(!this.key||this.keydown){var e=t.item,r=this.graph,n=e.getModel();if(this.addingEdge&&this.edge){if(!this.shouldEnd.call(this,t))return;var i={target:n.id};this.source===n.id&&(i.type="loop"),r.emit("beforecreateedge",{}),r.updateItem(this.edge,i),r.emit("aftercreateedge",{edge:this.edge}),this.edge.getKeyShape().set("capture",!0),this.edge=null,this.addingEdge=!1}else{if(!this.shouldBegin.call(this,t))return;this.edge=r.addItem("edge",Object(k.__assign)({source:n.id,target:n.id},this.edgeConfig),!1),this.source=n.id,this.addingEdge=!0,this.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(t){if(!this.key||this.keydown){var e={x:t.x,y:t.y};this.graph.findById(this.source)?this.addingEdge&&this.edge&&this.graph.updateItem(this.edge,{target:e},!1):this.addingEdge=!1}},cancelCreating:function(t){if(!this.key||this.keydown){var e=this.graph,r=t.item;if(this.addingEdge&&t.target&&t.target.isCanvas&&t.target.isCanvas())return e.removeItem(this.edge,!1),this.edge=null,void(this.addingEdge=!1);if(this.addingEdge&&this.edge===r){var n=!0;if(!e.get("groupByTypes"))for(var i=t.x,o=t.y,a=e.getNodes(),s=a.length,u=0;u<s;u++){var c=a[u],h=c.getModel(),f=c.getBBox();if(i<=f.maxX&&i>=f.minX&&o<=f.maxY&&o>=f.minY){if(!this.shouldEnd.call(this,{x:t.x,y:t.y,canvasX:t.canvasX,canvasY:t.canvasY,clientX:t.clientX,clientY:t.clientY,item:c}))return;e.emit("beforecreateedge",{}),e.updateItem(this.edge,{target:h.id}),e.emit("aftercreateedge",{edge:this.edge}),n=!1;break}}n&&e.removeItem(this.edge,!1),this.edge=null,this.addingEdge=!1}}},onKeyDown:function(t){var e=t.key;e&&(e.toLowerCase()===this.key.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.addingEdge&&this.edge&&(this.graph.removeItem(this.edge,!1),this.addingEdge=!1,this.edge=null),this.keydown=!1}},"shortcuts-call":{getDefaultCfg:function(){return{trigger:"ctrl",combinedKey:"1",functionName:"fitView",functionParams:[]}},getEvents:function(){return Pe.indexOf(this.trigger.toLowerCase())>-1||(this.trigger="ctrl",console.warn("Behavior shortcuts-fit-view 的 trigger 参数 '"+this.trigger+"' 不合法，请输入 'drag'、'shift'、'ctrl' 或 'alt'")),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(t){var e=t.key;if(e){var r=this.trigger.toLowerCase(),n=e.toLowerCase();this.triggerKeydown||(this.triggerKeydown=n===r||"control"===n&&"ctrl"===r||"ctrl"===n&&"control"===r);var i=this.graph;if(!i[this.functionName])return console.warn("Behavior shortcuts-fit-view 的 functionName 参数 '"+this.functionName+"' 不合法，它不是 Graph 的一个函数名"),{};if(!this.triggerKeydown||this.combinedKey){var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||"control"===n&&"ctrl"===o||"ctrl"===n&&"control"===o)&&(this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]())}else this.functionParams&&this.functionParams.length?i[this.functionName].apply(i,this.functionParams):i[this.functionName]()}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}}};d()(Ie,(function(t,e){v.registerBehavior(e,t)}));var Te=v,Ne=r(99),De=r(36),Be=r.n(De),Re=r(42),Le=r.n(Re),ze=r(22),Fe=r(69),Ye=r.n(Fe),Ge=function(){function t(t){this.graph=t,this.destroyed=!1,this.modes=t.get("modes")||{default:[]},this.formatModes(),this.mode=t.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return t.prototype.formatModes=function(){var t=this.modes;d()(t,(function(t){d()(t,(function(e,r){_()(e)&&(t[r]={type:e})}))}))},t.prototype.setBehaviors=function(t){var e,r=this.graph,n=this.modes[t],i=[];d()(n||[],(function(t){var n=v.getBehavior(t.type);n&&(e=new n(t))&&(e.bind(r),i.push(e))})),this.currentBehaves=i},t.mergeBehaviors=function(t,e){return d()(e,(function(e){t.indexOf(e)<0&&(_()(e)&&(e={type:e}),t.push(e))})),t},t.filterBehaviors=function(t,e){var r=[];return t.forEach((function(t){var n="";n=_()(t)?t:t.type,e.indexOf(n)<0&&r.push(t)})),r},t.prototype.setMode=function(t){var e=this.modes,r=this.graph,n=t;e[n]&&(r.emit("beforemodechange",{mode:t}),d()(this.currentBehaves,(function(t){t.unbind(r)})),this.setBehaviors(n),r.emit("aftermodechange",{mode:t}),this.mode=t)},t.prototype.getMode=function(){return this.mode},t.prototype.manipulateBehaviors=function(e,r,n){var i,o=this;if(i=m()(e)?e:[e],m()(r))return d()(r,(function(e){o.modes[e]?o.modes[e]=n?t.mergeBehaviors(o.modes[e]||[],i):t.filterBehaviors(o.modes[e]||[],i):n&&(o.modes[e]=i)})),this;var a=r;return r||(a=this.mode),this.modes[a]||n&&(this.modes[a]=i),this.modes[a]=n?t.mergeBehaviors(this.modes[a]||[],i):t.filterBehaviors(this.modes[a]||[],i),this.setMode(this.mode),this},t.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},t}(),qe=function(){function t(t){this.destroyed=!1,this.graph=t,this.destroyed=!1}return t.prototype.getViewCenter=function(){var t=this.getFormatPadding(),e=this.graph,r=this.graph.get("width"),n=e.get("height");return{x:(r-t[1]-t[3])/2+t[3],y:(n-t[0]-t[2])/2+t[0]}},t.prototype.fitCenter=function(){var t=this.graph,e=t.get("group");e.resetMatrix();var r=e.getCanvasBBox();if(0!==r.width&&0!==r.height){var n=this.getViewCenter(),i=r.x+r.width/2,o=r.y+r.height/2;t.translate(n.x-i,n.y-o)}},t.prototype.fitView=function(){var t=this.graph,e=this.getFormatPadding(),r=t.get("width"),n=t.get("height"),i=t.get("group");i.resetMatrix();var o=i.getCanvasBBox();if(0!==o.width&&0!==o.height){var a=this.getViewCenter(),s=o.x+o.width/2,u=o.y+o.height/2;t.translate(a.x-s,a.y-u);var c=(r-e[1]-e[3])/o.width,h=(n-e[0]-e[2])/o.height,f=c;c>h&&(f=h),t.zoom(f,a)}},t.prototype.getFormatPadding=function(){var t=this.graph.get("fitViewPadding");return j(t)},t.prototype.focusPoint=function(t,e,r){var n=this,i=this.getViewCenter(),o=this.getPointByCanvas(i.x,i.y),a=this.graph.get("group").getMatrix();if(a||(a=[1,0,0,0,1,0,0,0,1]),e){var s=(o.x-t.x)*a[0],u=(o.y-t.y)*a[4],c=0,h=0,f=0,l=0;this.graph.get("canvas").animate((function(t){f=s*t,l=u*t,n.graph.translate(f-c,l-h),c=f,h=l}),Object(k.__assign)({},r))}else this.graph.translate((o.x-t.x)*a[0],(o.y-t.y)*a[4])},t.prototype.getPointByCanvas=function(t,e){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Yt({x:t,y:e},r)},t.prototype.getPointByClient=function(t,e){var r=this.graph.get("canvas").getPointByClient(t,e);return this.getPointByCanvas(r.x,r.y)},t.prototype.getClientByPoint=function(t,e){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(t,e),i=r.getClientByPoint(n.x,n.y);return{x:i.x,y:i.y}},t.prototype.getCanvasByPoint=function(t,e){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Ft({x:t,y:e},r)},t.prototype.focus=function(t,e,r){_()(t)&&(t=this.graph.findById(t));var n=t.get("group").getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]),t&&this.focusPoint({x:n[6],y:n[7]},e,r)},t.prototype.changeSize=function(t,e){var r=this.graph;if(!M()(t)||!M()(e))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:t,height:e}),r.get("canvas").changeSize(t,e),r.get("plugins").forEach((function(n){if(n.get("gridContainer")){var i=r.get("minZoom");vt()(n.get("container"),{width:t+"px",height:e+"px"}),vt()(n.get("gridContainer"),{width:t/i+"px",height:e/i+"px",left:0,top:0})}}))},t.prototype.destroy=function(){this.graph=null,this.destroyed=!1},t}(),Xe=r(57),Ve=r.n(Xe),He=r(50),Ue=r.n(He),We=function(){function t(t){this.preItem=null,this.graph=t,this.extendEvents=[],this.dragging=!1,this.destroyed=!1,this.initEvents()}return t.prototype.initEvents=function(){var t=this.graph,e=this.extendEvents,r=t.get("canvas"),n=r.get("el"),i=Ue()(this,"onCanvasEvents"),o=Ue()(this,"onExtendEvents"),a=Ue()(this,"onWheelEvent");r.on("*",i),this.canvasHandler=i,e.push(Ve()(n,"DOMMouseScroll",a)),e.push(Ve()(n,"mousewheel",a)),"undefined"!=typeof window&&(e.push(Ve()(window,"keydown",o)),e.push(Ve()(window,"keyup",o)),e.push(Ve()(window,"focus",o)))},t.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},t.prototype.onCanvasEvents=function(e){var r=this.graph,n=r.get("canvas"),i=e.target,o=e.type;e.canvasX=e.x,e.canvasY=e.y;var a={x:e.canvasX,y:e.canvasY},s=r.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),A(s)&&(a=r.getPointByClient(e.clientX,e.clientY)),e.x=a.x,e.y=a.y,e.currentTarget=r,i===n)return"mousemove"===o&&this.handleMouseMove(e,"canvas"),e.target=n,e.item=null,r.emit(o,e),void r.emit("canvas:"+o,e);var u=t.getItemRoot(i);if(u){var c=u.get("item");if(!c.destroyed){var h=c.getType();if(e.target=i,e.item=c,e.canvasX===e.x&&e.canvasY===e.y){var f=r.getCanvasByPoint(e.x,e.y);e.canvasX=f.x,e.canvasY=f.y}r.emit(o,e),e.name&&!e.name.includes(":")?r.emit(h+":"+o,e):r.emit(e.name,e),"dragstart"===o&&(this.dragging=!0),"dragend"===o&&(this.dragging=!1),"mousemove"===o&&this.handleMouseMove(e,h)}}else r.emit(o,e)},t.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},t.prototype.onWheelEvent=function(t){x()(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},t.prototype.handleMouseMove=function(t,e){var r=this.graph,n=this.preItem,i=r.get("canvas"),o=t.target===i?null:t.item;t=C(t),n&&n!==o&&!n.destroyed&&(t.item=n,this.emitCustomEvent(n.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(n.getType(),"dragleave",t)),o&&n!==o&&(t.item=o,this.emitCustomEvent(e,"mouseenter",t),this.dragging&&this.emitCustomEvent(e,"dragenter",t)),this.preItem=o},t.prototype.emitCustomEvent=function(t,e,r){r.type=e,this.graph.emit(t+":"+e,r)},t.prototype.destroy=function(){var t=this.graph,e=this.canvasHandler,r=this.extendEvents;t.get("canvas").off("*",e),d()(r,(function(t){t.remove()})),this.dragging=!1,this.preItem=null,this.extendEvents.length=0,this.canvasHandler=null,this.destroyed=!0},t}(),Ze=r(98),$e=r.n(Ze),Ke=r(35),Qe=r.n(Ke),Je=r(49),tr=r.n(Je),er=r(130),rr=r.n(er),nr={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},ir=Math.PI,or=Math.sin,ar=Math.cos,sr=or(ir/8),ur=ar(ir/8),cr=function(t,e){var r=t.getBBox(),n={x:r.minX,y:r.minY},i={x:r.maxX,y:r.maxY};if(e){var o=e.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=Ft(n,o),i=Ft(i,o)}var a=n.x,s=n.y,u=i.x,c=i.y;return{x:a,y:s,minX:a,minY:s,maxX:u,maxY:c,width:u-a,height:c-s}},hr=function(t){var e=t.sourceNode||t.targetNode,r=e.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=e.getKeyShape().getBBox(),i=t.loopCfg||{},o=i.dist||2*Math.max(n.width,n.height),a=i.position||Q.defaultLoopPosition,s=[r[6],r[7]],u=[t.startPoint.x,t.startPoint.y],c=[t.endPoint.x,t.endPoint.y],h=n.height/2,f=n.height/2,l=h*sr,d=h*ur,p=f*sr,g=f*ur;if(u[0]===c[0]&&u[1]===c[1]){switch(a){case"top":u=[s[0]-l,s[1]-d],c=[s[0]+p,s[1]-g];break;case"top-right":h=n.height/2,f=n.width/2,u=[s[0]+(l=h*sr),s[1]-(d=h*ur)],c=[s[0]+(g=f*ur),s[1]-(p=f*sr)];break;case"right":h=n.width/2,f=n.width/2,u=[s[0]+(d=h*ur),s[1]-(l=h*sr)],c=[s[0]+(g=f*ur),s[1]+(p=f*sr)];break;case"bottom-right":h=n.width/2,f=n.height/2,u=[s[0]+(d=h*ur),s[1]+(l=h*sr)],c=[s[0]+(p=f*sr),s[1]+(g=f*ur)];break;case"bottom":h=n.height/2,f=n.height/2,u=[s[0]+(l=h*sr),s[1]+(d=h*ur)],c=[s[0]-(p=f*sr),s[1]+(g=f*ur)];break;case"bottom-left":h=n.height/2,f=n.width/2,u=[s[0]-(l=h*sr),s[1]+(d=h*ur)],c=[s[0]-(g=f*ur),s[1]+(p=f*sr)];break;case"left":h=n.width/2,f=n.width/2,u=[s[0]-(d=h*ur),s[1]+(l=h*sr)],c=[s[0]-(g=f*ur),s[1]-(p=f*sr)];break;case"top-left":h=n.width/2,f=n.height/2,u=[s[0]-(d=h*ur),s[1]-(l=h*sr)],c=[s[0]-(p=f*sr),s[1]-(g=f*ur)];break;default:h=n.width/2,f=n.width/2,u=[s[0]-(l=h*sr),s[1]-(d=h*ur)],c=[s[0]+(p=f*sr),s[1]-(g=f*ur)]}if(!1===i.clockwise){var v=[u[0],u[1]];u=[c[0],c[1]],c=[v[0],v[1]]}}var y=[u[0]-s[0],u[1]-s[1]],m=(h+o)/h,b=(f+o)/f;!1===i.clockwise&&(m=(f+o)/f,b=(h+o)/h);var x=ft.scale([],y,m),w=[s[0]+x[0],s[1]+x[1]],M=[c[0]-s[0],c[1]-s[1]],S=ft.scale([],M,b),_=[s[0]+S[0],s[1]+S[1]];return t.startPoint={x:u[0],y:u[1]},t.endPoint={x:c[0],y:c[1]},t.controlPoints=[{x:w[0],y:w[1]},{x:_[0],y:_[1]}],t},fr=function(t,e,r,n,i){var o=[],a=t.getPoint(e);if(null===a)return{x:0,y:0,angle:0};if(e<1e-4)o=t.getStartTangent().reverse();else if(e>.9999)o=t.getEndTangent();else{var s=t.getPoint(e+1e-4);o.push([a.x,a.y]),o.push([s.x,s.y])}var u=Math.atan2(o[1][1]-o[0][1],o[1][0]-o[0][0]);if(u<0&&(u+=2*ir),r&&(a.x+=ar(u)*r,a.y+=or(u)*r),n){var c=u-ir/2;u>.5*ir&&u<1.5*ir&&(c-=ir),a.x+=ar(c)*n,a.y+=or(c)*n}var h={x:a.x,y:a.y,angle:u};return i?(u>.5*ir&&u<1.5*ir&&(u-=ir),Object(k.__assign)({rotate:u},h)):h},lr=function(t,e){if(!1===e(t))return!1;if(t&&t.children)for(var r=t.children.length-1;r>=0;r--)if(!lr(t.children[r],e))return!1;return!0},dr=function(t,e){if(t&&t.children)for(var r=t.children.length-1;r>=0;r--)if(!dr(t.children[r],e))return;return!1!==e(t)},pr=function(t,e){"function"==typeof e&&lr(t,e)},gr=function(t,e){"function"==typeof e&&dr(t,e)},vr=function(t,e){var r={x:1/0,y:1/0},n={x:-1/0,y:-1/0},i="x",o="y";e&&["V","TB","BT"].indexOf(e)>=0&&(o="x",i="y");var a=0;pr(t,(function(t){return a++,t.x>n.x&&(n.x=t.x),t.x<r.x&&(r.x=t.x),t.y>n.y&&(n.y=t.y),t.y<r.y&&(r.y=t.y),!0}));var s=2*ir/a,u=n[o]-r[o];return 0===u||pr(t,(function(e){var n=(e[o]-r[o])/u*(2*ir-s)+s,a=Math.abs("x"===i?e.x-t.x:e.y-t.y);return e.x=a*Math.cos(n),e.y=a*Math.sin(n),!0})),t},yr=function(t,e){return e*(nr[t]||1)},mr=function(t,e){var r=0,n=new RegExp("[一-龥]+");return t.split("").forEach((function(t){n.test(t)?r+=e:r+=yr(t,e)})),[r,e]},br=function(t,e){var r=[],n={},i={};t.forEach((function(t){i[t.id]=t})),t.forEach((function(t,e){var o=Object(ht.clone)(t);o.itemType="combo",o.children=void 0,o.parentId===o.id?(console.warn("The parentId for combo "+o.id+" can not be the same as the combo's id"),delete o.parentId):o.parentId&&!i[o.parentId]&&(console.warn("The parent combo for combo "+o.id+" does not exist!"),delete o.parentId);var a=n[o.id];if(a){if(o.children=a.children,n[o.id]=o,!(a=o).parentId)return void r.push(a);var s=n[a.parentId];if(s)s.children?s.children.push(o):s.children=[o];else{var u={id:a.parentId,children:[a]};n[a.parentId]=u,n[o.id]=o}}else{if(Object(ht.isString)(t.parentId))if(u=n[t.parentId])u.children?u.children.push(o):u.children=[o],n[o.id]=o;else{var c={id:t.parentId,children:[o]};n[c.id]=c,n[o.id]=o}else r.push(o),n[o.id]=o}}));var o={};return(e||[]).forEach((function(t){o[t.id]=t;var e=n[t.comboId];if(e){var r={id:t.id,comboId:t.comboId};e.children?e.children.push(r):e.children=[r],r.itemType="node",n[t.id]=r}})),r.forEach((function(t){t.depth=0,lr(t,(function(t){var e,r=n[t.id].itemType;e="node"===r?n[t.comboId]:n[t.parentId],t.depth=e?"node"===r?e.depth+1:e.depth+2:0;var i=o[t.id];return i&&(i.depth=t.depth),!0}))})),r},xr=function(t,e,r){var n,i=t,o={root:{children:t}},a=!1,s="root";(t||[]).forEach((function(t){if(!a)return t.id===e?(n=t,"combo"===t.itemType?n.parentId=r:n.comboId=r,void(a=!0)):void pr(t,(function(t){return o[t.id]={children:t.children},i=o[t.parentId||t.comboId||"root"].children,!t||!t.removed&&e!==t.id||!i||(s=t.parentId||t.comboId||"root",n=t,"combo"===t.itemType?n.parentId=r:n.comboId=r,a=!0,!1)}))}));var u=(i=o[s].children)?i.indexOf(n):-1;if(u>-1&&i.splice(u,1),a||(n={id:e,itemType:"node",comboId:r},o[e]={children:void 0}),e){var c=!1;if(r){var h=0;(t||[]).forEach((function(t){c||pr(t,(function(t){return r!==t.id||(c=!0,t.children?t.children.push(n):t.children=[n],h=t.depth,"node"===n.itemType?n.depth=h+2:n.depth=h+1,!1)}))}))}else r&&c||"node"===n.itemType||t.push(n);var f=n.depth;pr(n,(function(t){return"node"===t.itemType?f+=2:f+=1,t.depth=f,!0}))}return t},wr=function(t,e){var r={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};return t&&0!==t.length?(t.forEach((function(t){var n=e.findById(t.id);if(n&&n.isVisible()){n.set("bboxCanvasCache",void 0);var i=n.getCanvasBBox();i.x&&r.minX>i.minX&&(r.minX=i.minX),i.y&&r.minY>i.minY&&(r.minY=i.minY),i.x&&r.maxX<i.maxX&&(r.maxX=i.maxX),i.y&&r.maxY<i.maxY&&(r.maxY=i.maxY)}})),r.x=(r.minX+r.maxX)/2,r.y=(r.minY+r.maxY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,Object.keys(r).forEach((function(t){r[t]!==1/0&&r[t]!==-1/0||(r[t]=void 0)})),r):r},Mr=function(t){var e=t.group,r=t.height,n=t.width,i=t.x,o=t.y,a=e.get("canvas"),s=a.get("width"),u=a.get("height"),c={start:{x:0,y:0},end:{x:0,y:0}};return c.start.x=i/s,c.start.y=o/u,c.end.x=(i+n)/s,c.end.y=(o+r)/u,c};function Sr(t){if("string"!=typeof t)return t;var e=function(t){if("string"!=typeof t)return t;try{return JSON.parse(t.trim())}catch(e){return t.trim()}},r=e(t);if("string"!=typeof r)return r;for(var n=function(t){return t[t.length-1]},i=t.trim(),o=[],a=[],s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.some((function(t){return n(a)===t}))},u=null,c=0,h="";c<i.length;){var f=i[c],l=s('"',"'");if(l||f.trim()){var d="\\"===i[c-1],p=s("}"),g=s("]"),v=s(","),y=n(o);if(l)if(n(a)!==f||d)h+=f;else{a.pop();var m=e(h);y.push(m),u=m,h=""}else if(g&&","===f)h&&(y.push(e(h)),h="");else if(p&&":"===f)a.push(","),h&&(y.push(h),h="");else if(v&&","===f)h&&(y.push(e(h)),h=""),a.pop();else if("}"===f&&(p||v)){h&&(y.push(e(h)),h=""),v&&a.pop();for(var b={},x=1;x<y.length;x+=2)b[y[x-1]]=y[x];o.pop(),o.length&&n(o).push(b),a.pop(),u=b}else"]"===f&&g?(h&&(y.push(e(h)),h=""),o.pop(),o.length&&n(o).push(y),a.pop(),u=y):"{"===f?(o.push([]),a.push("}")):"["===f?(o.push([]),a.push("]")):'"'===f?a.push('"'):"'"===f?a.push("'"):h+=f;c+=1}else c+=1}return u||h}function _r(t,e){var r;void 0===e&&(e={x:0,y:0});var n=Object(k.__assign)({x:0,y:0,width:0,height:0},e);if(null===(r=t.children)||void 0===r?void 0:r.length){var i=t.attrs,o=void 0===i?{}:i,a=o.marginTop,s=Object(k.__assign)({},e);a&&(s.y+=a);for(var u=0;u<t.children.length;u++){t.children[u].attrs.key=(o.key||"root")+" -"+u+" ";var c=_r(t.children[u],s);if(c.bbox){var h=c.bbox;"inline"===c.attrs.next?s.x+=c.bbox.width:s.y+=c.bbox.height,h.width+h.x>n.width&&(n.width=h.width+h.x),h.height+h.y>n.height&&(n.height=h.height+h.y)}}}return t.bbox=function(t,e,r){var n,i,o=t.attrs,a=void 0===o?{}:o,s={x:e.x||0,y:e.y||0,width:r.width||0,height:r.height||0};switch(t.type){case"maker":case"circle":a.r&&(i=2*a.r,n=2*a.r);break;case"text":a.text&&(i=mr(a.text,a.fontSize||12)[0],n=16,s.y+=n,s.height=n,s.width=i,t.attrs=Object(k.__assign)({fontSize:12,fill:"#000"},a));break;default:a.width&&(i=a.width),a.height&&(n=a.height)}return n>=0&&(s.height=n),i>=0&&(s.width=i),a.marginTop&&(s.y+=a.marginTop),a.marginLeft&&(s.x+=a.marginLeft),s}(t,e,n),t.attrs=Object(k.__assign)(Object(k.__assign)({},t.attrs),t.bbox),t}function kr(t){var e={},r=function(e){var r=function(t){return function(e){for(var r=t.length,n=[],i=0,o="";i<r;)if("{"===t[i]&&"{"===t[i+1])n.push(o),o="",i+=2;else if("}"===t[i]&&"}"===t[i+1]){if(n.length){var a=n.pop();o=rr()(e,o,a.endsWith("=")?'"{'+o+'}"':o),n.push(a+o)}i+=2,o=""}else o+=t[i],i+=1;return n.push(o),n.map((function(t,e){return n[e-1]&&n[e-1].endsWith("=")?'"{'+t+'}"':t})).join("")}}("function"==typeof t?t(e):t)(e),n=document.createElement("div");n.innerHTML=r;var i=_r(function t(e,r){var n={},i=e.getAttributeNames&&e.getAttributeNames()||[],o=e.children&&Array.from(e.children).map((function(e){return t(e,r)})),a={},s=e.tagName?e.tagName.toLowerCase():"group";return"text"===s&&(n.text=e.innerText),a.type=s,"img"===s&&(a.type="image"),Array.from(i).forEach((function(t){var r=t.split("-").reduce((function(t,e){return t+e.charAt(0).toUpperCase()+e.slice(1)})),i=e.getAttribute(t);try{if("style"===r||"attrs"===r){var o=Sr(i);n=Object(k.__assign)(Object(k.__assign)({},n),o)}else a[r]=Sr(i)}catch(t){if("style"===r)throw t;a[r]=i}})),a.attrs=n,r&&r.style&&a.name&&"object"==typeof r.style[a.name]&&(a.attrs=Object(k.__assign)(Object(k.__assign)({},a.attrs),r.style[a.name])),r&&r.style&&a.keyshape&&(a.attrs=Object(k.__assign)(Object(k.__assign)({},a.attrs),r.style)),o.length&&(a.children=o),a}(n.children[0],e));return n.remove(),i};return{draw:function(t,n){var i=r(t),o=n,a=function(t){var e=t.attrs,r=void 0===e?{}:e,i=t.bbox,s=t.type,u=t.children,c=Object(k.__rest)(t,["attrs","bbox","type","children"]);if("group"!==t.type){var h=n.addShape(t.type,Object(k.__assign)({attrs:r,origin:{bbox:i,type:s,children:u}},c));t.keyshape&&(o=h)}t.children&&t.children.forEach((function(t){return a(t)}))};return a(i),e[t.id]=[i],o},update:function(t,n){e[t.id]||(e[t.id]=[]);var i=n.getContainer(),o=i.get("children"),a=r(t),s=function t(e,r){var n,i,o,a,s=(e||{}).type,u=((null==r?void 0:r.attrs)||{}).key;if(u&&e&&(e.attrs.key=u),!e&&r)return{action:"delete",val:r,type:s,key:u};if(e&&!r)return{action:"add",val:e,type:s};if(!e&&!r)return{action:"same",type:s};var c=[];if((null===(n=e.children)||void 0===n?void 0:n.length)>0||(null===(i=r.children)||void 0===i?void 0:i.length)>0)for(var h=Math.max(null===(o=e.children)||void 0===o?void 0:o.length,null===(a=r.children)||void 0===a?void 0:a.length),f=r.children||[],l=e.children||[],d=0;d<h;d+=1)c.push(t(l[d],f[d]));var p=Object.keys(r.attrs),g=Object.keys(e.attrs);return r.type!==e.type?{action:"restructure",nowTarget:e,formerTarget:r,key:u,children:c}:p.filter((function(t){return"children"!==t})).some((function(t){return e.attrs[t]!==r.attrs[t]||!g.includes(t)}))?{action:"change",val:e,children:c,type:s,key:u}:{action:"same",children:c,type:s,key:u}}(a,e[t.id].pop()),u=function(t){var e;"group"!==t.type&&i.addShape(t.type,{attrs:t.attrs}),(null===(e=t.children)||void 0===e?void 0:e.length)&&t.children.map((function(t){return u(t)}))},c=function(t){var e,r=o.find((function(e){return e.attrs.key===t.attrs.key}));r&&i.removeChild(r),(null===(e=t.children)||void 0===e?void 0:e.length)&&t.children.map((function(t){return c(t)}))},h=function(t){var e=t.key;if("group"!==t.type){var r=o.find((function(t){return t.attrs.key===e}));switch(t.action){case"change":if(r){var i=t.val.keyshape?n.getOriginStyle():{};r.attr(Object(k.__assign)(Object(k.__assign)({},i),t.val.attrs))}break;case"add":u(t.val);break;case"delete":c(t.val);break;case"restructure":c(t.formerTarget),u(t.nowTarget)}}t.children&&t.children.forEach((function(t){return h(t)}))};h(s),e[t.id].push(a)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Or={};function Er(t){return Or[t]||(Or[t]=Object(ht.upperFirst)(t)),Or[t]}var jr={defaultShapeType:"defaultType",className:null,getShape:function(t){return this[t]||this[this.defaultShapeType]},draw:function(t,e,r){var n=this.getShape(t),i=n.draw(e,r);return n.afterDraw&&n.afterDraw(e,r,i),i},baseUpdate:function(t,e,r){var n=this.getShape(t);n.update&&n.update(e,r),n.afterUpdate&&n.afterUpdate(e,r)},setState:function(t,e,r,n){this.getShape(t).setState(e,r,n)},shouldUpdate:function(t){return!!this.getShape(t).update},getControlPoints:function(t,e){return this.getShape(t).getControlPoints(e)},getAnchorPoints:function(t,e){return this.getShape(t).getAnchorPoints(e)}},Cr={options:{},draw:function(t,e){return this.drawShape(t,e)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){var e=this.options.anchorPoints;return t.anchorPoints||e}},Ar=function(){function t(){}return t.registerFactory=function(e,r){var n=Er(e),i=jr,o=Object(k.__assign)(Object(k.__assign)({},i),r);return t[n]=o,o.className=n,o},t.getFactory=function(e){return t[Er(e)]},t.registerNode=function(e,r,n){var i,o=t.Node;if("string"==typeof r||"function"==typeof r){var a=kr(r);i=Object(k.__assign)(Object(k.__assign)({},o.getShape("single-node")),a)}else if(r.jsx){a=kr(r.jsx);i=Object(k.__assign)(Object(k.__assign)(Object(k.__assign)({},o.getShape("single-node")),a),r)}else{var s=n?o.getShape(n):Cr;i=Object(k.__assign)(Object(k.__assign)({},s),r)}return i.type=e,i.itemType="node",o[e]=i,i},t.registerEdge=function(e,r,n){var i=t.Edge,o=n?i.getShape(n):Cr,a=Object(k.__assign)(Object(k.__assign)({},o),r);return a.type=e,a.itemType="edge",i[e]=a,a},t.registerCombo=function(e,r,n){var i=t.Combo,o=n?i.getShape(n):Cr,a=Object(k.__assign)(Object(k.__assign)({},o),r);return a.type=e,a.itemType="combo",i[e]=a,a},t}(),Pr=Ar;Ar.registerFactory("node",{defaultShapeType:"circle"}),Ar.registerFactory("edge",{defaultShapeType:"line"}),Ar.registerFactory("combo",{defaultShapeType:"circle"});var Ir=function(){function t(t){this._cfg={},this.destroyed=!1;var e={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(e,this.getDefaultCfg(),t);var r=this.get("model"),n=r.id,i=this.get("type");n||(n=Object(ht.uniqueId)(i),this.get("model").id=n),this.set("id",n);var o=t.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var a=r.shape||r.type||("edge"===i?"line":"circle"),s=this.get("shapeFactory");if(s&&s[a]){var u=s[a].options;if(u&&u.stateStyles){var c=this.get("styles")||r.stateStyles;c=Object(ht.deepMix)({},u.stateStyles,c),this.set("styles",c)}}}return t.prototype.calculateBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=cr(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},t.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=cr(t,e);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},t.prototype.drawInner=function(){var t=this.get("shapeFactory"),e=this.get("group"),r=this.get("model");e.clear();var n=r.visible;if(void 0===n||n||this.changeVisibility(n),t){this.updatePosition(r);var i=this.getShapeCfg(r),o=i.shape||i.type,a=t.draw(o,i,e);a&&(this.set("keyShape",a),a.set("isKeyShape",!0),a.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",o),this.restoreStates(t,o)}},t.prototype.setOriginStyle=function(t){var e={},r=this.get("group").get("children"),n=this.getKeyShape(),i=this;Object(ht.each)(r,(function(t){var r=t.get("name");if(r)e[r]=i.getShapeStyleByName(r);else{var o=n.get("name"),a=i.getShapeStyleByName();o?e[o]=a:Object.assign(e,a)}}));var o=this.getOriginStyle(),a={};a=t?Object(ht.deepMix)({},o,e,t.style,{labelCfg:t.labelCfg}):Object(ht.deepMix)({},o,e),i.set("originStyle",a)},t.prototype.restoreStates=function(t,e){var r=this,n=r.get("states");Object(ht.each)(n,(function(n){t.setState(e,n,!0,r)}))},t.prototype.init=function(){var t=Pr.getFactory(this.get("type"));this.set("shapeFactory",t)},t.prototype.get=function(t){return this._cfg[t]},t.prototype.set=function(t,e){Object(ht.isPlainObject)(t)?this._cfg=Object(k.__assign)(Object(k.__assign)({},this._cfg),t):this._cfg[t]=e},t.prototype.getDefaultCfg=function(){return{}},t.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null)},t.prototype.beforeDraw=function(){},t.prototype.afterDraw=function(){},t.prototype.afterUpdate=function(){},t.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},t.prototype.getShapeStyleByName=function(t){var e=this.get("group"),r=this.getKeyShape();if(t&&(r=e.find((function(e){return e.get("name")===t}))),r){var n={};return Object(ht.each)(r.attr(),(function(t,e){"img"!==e&&(n[e]=t)})),n}return{}},t.prototype.getShapeCfg=function(t){var e=this.get("styles");if(e){var r=t;return r.style=Object(k.__assign)(Object(k.__assign)({},e),t.style),r}return t},t.prototype.getStateStyle=function(t){var e=this.get("styles");return e&&e[t]},t.prototype.getOriginStyle=function(){return this.get("originStyle")},t.prototype.getCurrentStatesStyle=function(){var t=this,e={};return Object(ht.each)(t.getStates(),(function(r){e=Object.assign(e,t.getStateStyle(r))})),e},t.prototype.setState=function(t,e){var r=this.get("states"),n=this.get("shapeFactory"),i=t,o=t;Object(ht.isString)(e)&&(i=t+":"+e,o=t+":");var a=r;if(Object(ht.isBoolean)(e)){var s=r.indexOf(o);if(e){if(s>-1)return;r.push(i)}else s>-1&&r.splice(s,1)}else if(Object(ht.isString)(e)){var u=r.filter((function(t){return t.includes(o)}));u.length>0&&this.clearStates(u),(a=a.filter((function(t){return!t.includes(o)}))).push(i),this.set("states",a)}if(n){var c=this.get("model"),h=c.shape||c.type;n.setState(h,t,e,this)}},t.prototype.clearStates=function(t){var e=this,r=e.getStates(),n=e.get("shapeFactory"),i=e.get("model"),o=i.shape||i.type;t||(t=r),Object(ht.isString)(t)&&(t=[t]);var a=r.filter((function(e){return-1===t.indexOf(e)}));e.set("states",a),t.forEach((function(t){n.setState(o,t,!1,e)}))},t.prototype.getContainer=function(){return this.get("group")},t.prototype.getKeyShape=function(){return this.get("keyShape")},t.prototype.getModel=function(){return this.get("model")},t.prototype.getType=function(){return this.get("type")},t.prototype.getID=function(){return this.get("id")},t.prototype.isItem=function(){return!0},t.prototype.getStates=function(){return this.get("states")},t.prototype.hasState=function(t){return this.getStates().indexOf(t)>=0},t.prototype.refresh=function(){var t=this.get("model");this.updatePosition(t),this.updateShape(),this.afterUpdate(),this.clearCache()},t.prototype.isOnlyMove=function(t){return!1},t.prototype.update=function(t){var e=this.get("model"),r=e.visible,n=t.visible;r!==n&&void 0!==n&&this.changeVisibility(n);var i=e.x,o=e.y;t.x=isNaN(t.x)?e.x:t.x,t.y=isNaN(t.y)?e.y:t.y;var a=this.get("styles");if(t.stateStyles){var s=t.stateStyles;Object(ht.mix)(a,s),delete t.stateStyles}Object.assign(e,t),this.isOnlyMove(t)?this.updatePosition(t):(i===t.x&&o===t.y||this.updatePosition(t),this.updateShape()),this.afterUpdate(),this.clearCache()},t.prototype.updateShape=function(){var t=this.get("shapeFactory"),e=this.get("model"),r=e.shape||e.type;if(t.shouldUpdate(r)&&r===this.get("currentShape")){var n=this.getShapeCfg(e);t.baseUpdate(r,n,this)}else this.draw();this.setOriginStyle(e),this.restoreStates(t,r)},t.prototype.updatePosition=function(t){var e=this.get("model"),r=Object(ht.isNil)(t.x)?e.x:t.x,n=Object(ht.isNil)(t.y)?e.y:t.y,i=this.get("group");Object(ht.isNil)(r)||Object(ht.isNil)(n)||(i.resetMatrix(),Ut(i,{x:r,y:n}),e.x=r,e.y=n,this.clearCache())},t.prototype.getBBox=function(){var t=this.get("bboxCache");return t||(t=this.calculateBBox(),this.set("bboxCache",t)),t},t.prototype.getCanvasBBox=function(){var t=this.get("bboxCanvasCache");return t||(t=this.calculateCanvasBBox(),this.set("bboxCanvasCache",t)),t},t.prototype.toFront=function(){this.get("group").toFront()},t.prototype.toBack=function(){this.get("group").toBack()},t.prototype.show=function(){this.changeVisibility(!0)},t.prototype.hide=function(){this.changeVisibility(!1)},t.prototype.changeVisibility=function(t){var e=this.get("group");t?e.show():e.hide(),this.set("visible",t)},t.prototype.isVisible=function(){return this.get("visible")},t.prototype.enableCapture=function(t){var e=this.get("group");e&&e.set("capture",t)},t.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),e.remove(),this._cfg=null,this.destroyed=!0}},t}(),Tr={source:"start",target:"end"},Nr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,e){var r=Tr[t]+"Point",n=t+"Node",i=this.get(n);i&&!i.destroyed&&i.removeEdge(this),Object(ht.isPlainObject)(e)?(this.set(r,e),this.set(n,null)):(e.addEdge(this),this.set(n,e),this.set(r,null))},e.prototype.getLinkPoint=function(t,e,r){var n=Tr[t]+"Point",i=t+"Node",o=this.get(n);if(!o){var a=this.get(i),s=t+"Anchor",u=this.getPrePoint(t,r),c=e[s];Object(ht.isNil)(c)||(o=a.getLinkPointByAnchor(c)),o=o||a.getLinkPoint(u),Object(ht.isNil)(o.index)||this.set(t+"AnchorIndex",o.index)}return o},e.prototype.getPrePoint=function(t,e){if(e&&e.length)return e["source"===t?0:e.length-1];var r="source"===t?"target":"source";return this.getEndPoint(r)},e.prototype.getEndPoint=function(t){var e=t+"Node",r=Tr[t]+"Point",n=this.get(e);return n?n.get("model"):this.get(r)},e.prototype.getControlPointsByCenter=function(t){var e=this.getEndPoint("source"),r=this.getEndPoint("target"),n=this.get("shapeFactory"),i=t.shape||t.type;return n.getControlPoints(i,{startPoint:e,endPoint:r})},e.prototype.getEndCenter=function(t){var e=t+"Node",r=Tr[t]+"Point",n=this.get(e);if(n){var i=n.getBBox();return{x:i.centerX,y:i.centerY}}return this.get(r)},e.prototype.init=function(){t.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(e){var r=this.get("linkCenter"),n=t.prototype.getShapeCfg.call(this,e);if(r)n.startPoint=this.getEndCenter("source"),n.endPoint=this.getEndCenter("target");else{var i=n.controlPoints||this.getControlPointsByCenter(n);n.startPoint=this.getLinkPoint("source",e,i),n.endPoint=this.getLinkPoint("target",e,i)}return n.sourceNode=this.get("sourceNode"),n.targetNode=this.get("targetNode"),n},e.prototype.getModel=function(){var t=this.get("model"),e=this.get("sourceNode"),r=this.get("targetNode");return e?delete t.sourceNode:t.source=this.get("startPoint"),r?delete t.targetNode:t.target=this.get("endPoint"),Object(ht.isString)(t.source)||Object(ht.isPlainObject)(t.source)||(t.source=t.source.getID()),Object(ht.isString)(t.target)||Object(ht.isPlainObject)(t.target)||(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){},e.prototype.update=function(t){var e=this.get("model"),r=e.visible,n=t.visible;r!==n&&void 0!==n&&this.changeVisibility(n);var i=this.get("styles");if(t.stateStyles){var o=t.stateStyles;Object(ht.mix)(i,o),delete t.stateStyles}Object.assign(e,t),this.updateShape(),this.afterUpdate(),this.clearCache()},e.prototype.destroy=function(){var e=this.get("sourceNode"),r=this.get("targetNode");e&&!e.destroyed&&e.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),t.prototype.destroy.call(this)},e}(Ir),Dr=r(17),Br=r.n(Dr),Rr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getNearestPoint=function(t,e){for(var r=0,n=t[0],i=qt(t[0],e),o=0;o<t.length;o++){var a=t[o],s=qt(a,e);s<i&&(n=a,i=s,r=o)}return n.anchorIndex=r,n},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("target")===t}))},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter((function(e){return e.get("source")===t}))},e.prototype.getNeighbors=function(t){var e=this,r=this.get("edges");if("target"===t){return r.filter((function(t){return t.getSource()===e})).map((function(t){return t.getTarget()}))}if("source"===t){return r.filter((function(t){return t.getTarget()===e})).map((function(t){return t.getSource()}))}return r.map((function(t){return t.getSource()===e?t.getTarget():t.getSource()}))},e.prototype.getLinkPointByAnchor=function(t){return this.getAnchorPoints()[t]},e.prototype.getLinkPoint=function(t){var e,r,n=this.get("keyShape").get("type"),i=this.get("type"),o=this.getBBox();"combo"===i?(e=(o.maxX+o.minX)/2,r=(o.maxY+o.minY)/2):(e=o.centerX,r=o.centerY);var a,s=this.getAnchorPoints();switch(n){case"circle":a=Lt({x:e,y:r,r:o.width/2},t);break;case"ellipse":a=zt({x:e,y:r,rx:o.width/2,ry:o.height/2},t);break;default:a=Rt(o,t)}var u=a;return s.length&&(u||(u=t),u=this.getNearestPoint(s,u)),u||(u={x:e,y:r}),u},e.prototype.getAnchorPoints=function(){var t=this.get("anchorPointsCache");if(!t){t=[];var e=this.get("shapeFactory"),r=this.getBBox(),n=this.get("model"),i=this.getShapeCfg(n),o=n.shape||n.type,a=e.getAnchorPoints(o,i)||[];d()(a,(function(e,n){var i=Br()({x:r.minX+e[0]*r.width,y:r.minY+e[1]*r.height},e[2],{index:n});t.push(i)})),this.set("anchorPointsCache",t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var e=this.getEdges(),r=e.indexOf(t);r>-1&&e.splice(r,1)},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set("anchorPointsCache",null)},e.prototype.isOnlyMove=function(t){if(!t)return!1;var e=!x()(t.x),r=!x()(t.y),n=Object.keys(t);return 1===n.length&&(e||r)||2===n.length&&e&&r},e}(Ir),Lr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var e=this.get("styles"),r=this.get("bbox");if(e&&r){var n=t,i={r:Math.hypot(r.height,r.width)/2||Q.defaultCombo.size[0]/2,width:r.width||Q.defaultCombo.size[0],height:r.height||Q.defaultCombo.size[1]};n.style=Object(k.__assign)(Object(k.__assign)(Object(k.__assign)({},e),t.style),i);var o=t.padding||Q.defaultCombo.padding;return M()(o)?(i.r+=o,i.width+=2*o,i.height+=2*o):(i.r+=o[0],i.width+=o[1]+o[3]||2*o[1],i.height+=o[0]+o[2]||2*o[0]),this.set("sizeCache",i),n}return t},e.prototype.calculateCanvasBBox=function(){var t=this.get("keyShape"),e=this.get("group"),r=cr(t,e);r.x=r.minX,r.y=r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2;var n=this.get("sizeCache");n?("circle"===t.get("type")?(r.width=2*n.r,r.height=2*n.r):(r.width=n.width,r.height=n.height),r.minX=r.centerX-r.width/2,r.minY=r.centerY-r.height/2,r.maxX=r.centerX+r.width/2,r.maxY=r.centerY+r.height/2):(r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2);return r},e.prototype.getChildren=function(){return{nodes:this.getNodes(),combos:this.getCombos()}},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.addChild=function(t){switch(t.getType()){case"node":this.addNode(t);break;case"combo":this.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){return this.get("combos").push(t),!0},e.prototype.addNode=function(t){return this.get("nodes").push(t),!0},e.prototype.removeChild=function(t){switch(t.getType()){case"node":this.removeNode(t);break;case"combo":this.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var e=this.getCombos(),r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)}},e.prototype.removeNode=function(t){if(t){var e=this.getNodes(),r=e.indexOf(t);return r>-1&&(e.splice(r,1),!0)}},e.prototype.isOnlyMove=function(t){return!1},e.prototype.getBBox=function(){return this.set("bboxCanvasCache",null),this.calculateCanvasBBox()},e.prototype.clearCache=function(){this.set("bboxCache",null),this.set("bboxCanvasCache",null),this.set("anchorPointsCache",null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),e=this.get("group");t&&e.stopAnimate(),this.clearCache(),this.set("sizeCache",null),this.set("bbox",null),e.remove(),this._cfg=null,this.destroyed=!0}},e}(Rr),zr=Object.hasOwnProperty,Fr=function(){function t(t){this.graph=t,this.destroyed=!1}return t.prototype.addItem=function(t,e){var r=this,n=this.graph,i="vedge"===t?"edge":t,o=n.get(i+"Group")||n.get("group"),a=tr()(i),s=null,u=n.get(i+tr()("stateStyles"))||{},c=n.get("default"+a);e.stateStyles&&(u=e.stateStyles);var h=n.get(i+"Mapper");if(h){var f=h(e);f.stateStyles&&(u=f.stateStyles,delete f.stateStyles),e=St()({},c,e,f)}else c&&d()(c,(function(t,r){zr.call(e,r)||(Qe()(t)?e[r]=$e()(t):e[r]=c[r])}));if(e.shape&&!e.type&&console.warn("shape 字段即将被废弃，请使用 type 代替"),n.emit("beforeadditem",{type:t,model:e}),"edge"===t||"vedge"===t){var l=void 0,p=void 0;if(l=e.source,p=e.target,l&&_()(l)&&(l=n.findById(l)),p&&_()(p)&&(p=n.findById(p)),!l||!p)return void console.warn("The source or target node of edge "+e.id+" does not exist!");l.getType&&"combo"===l.getType()&&(e.isComboEdge=!0,n.updateCombo(l)),p.getType&&"combo"===p.getType()&&(e.isComboEdge=!0,n.updateCombo(p)),s=new Nr({model:e,source:l,target:p,styles:u,linkCenter:n.get("linkCenter"),group:o.addGroup()})}else if("node"===t)s=new Rr({model:e,styles:u,group:o.addGroup()});else if("combo"===t){var g=e.children,v=wr(g,n);e.x=v.x||e.x||100*Math.random(),e.y=v.y||e.y||100*Math.random();var y=o.addGroup();y.setZIndex(e.depth);var m=(s=new Lr({model:e,styles:u,bbox:v,group:y})).getModel();(g||[]).forEach((function(t){var e=n.findById(t.id);s.addChild(e),t.depth=m.depth+2})),e.collapsed&&setTimeout((function(){n.collapseCombo(s),r.updateCombo(s,[])}),250)}if(s)return n.get(t+"s").push(s),n.get("itemMap")[s.get("id")]=s,n.emit("afteradditem",{item:s,model:e}),s},t.prototype.updateItem=function(t,e){var r=this.graph;if(_()(t)&&(t=r.findById(t)),t&&!t.destroyed){var n="";t.getType&&(n=t.getType());var i=r.get(n+"Mapper"),o=t.getModel();if(i){var a=i(St()({},o,e)),s=St()({},o,a,e);a.stateStyles&&(t.set("styles",s.stateStyles),delete s.stateStyles),d()(s,(function(t,r){e[r]=t}))}else d()(e,(function(t,r){o[r]&&Qe()(t)&&!m()(t)&&(e[r]=Object(k.__assign)(Object(k.__assign)({},o[r]),e[r]))}));if(r.emit("beforeupdateitem",{item:t,cfg:e}),"edge"===n){if(e.source){var u=e.source;_()(u)&&(u=r.findById(u)),t.setSource(u)}if(e.target){var c=e.target;_()(c)&&(c=r.findById(c)),t.setTarget(c)}}if(t.update(e),"node"===n||"combo"===n){var h=t.getEdges();d()(h,(function(t){t.refresh()}))}r.emit("afterupdateitem",{item:t,cfg:e})}},t.prototype.updateCombo=function(t,e){var r=this.graph;if(_()(t)&&(t=r.findById(t)),t&&!t.destroyed){var n=wr(e,r);t.set("bbox",n),t.update({x:n.x,y:n.y});for(var i=t.getEdges()||[],o=i.length,a=0;a<o;a++){var s=i[a];null==s||s.refresh()}}},t.prototype.collapseCombo=function(t){var e=this.graph;_()(t)&&(t=e.findById(t));var r=t.getChildren();r.nodes.forEach((function(t){e.hideItem(t)})),r.combos.forEach((function(t){e.hideItem(t)}))},t.prototype.expandCombo=function(t){var e=this.graph;_()(t)&&(t=e.findById(t));var r=t.getChildren();r.nodes.forEach((function(t){e.showItem(t)})),r.combos.forEach((function(t){t.getModel().collapsed?t.show():e.showItem(t)}))},t.prototype.removeItem=function(t){var e=this,r=this.graph;if(_()(t)&&(t=r.findById(t)),t&&!t.destroyed){var n=$e()(t.getModel());r.emit("beforeremoveitem",{item:n});var i="";t.getType&&(i=t.getType());var o=r.get(i+"s"),a=o.indexOf(t);if(a>-1&&o.splice(a,1),"edge"===i){var s=r.get("v"+i+"s"),u=s.indexOf(t);u>-1&&s.splice(u,1)}var c=t.get("id");delete r.get("itemMap")[c];var h=r.get("comboTrees"),f=t.get("id");if("node"===i){var l=t.getModel().comboId;if(h){var d=h,p=!1;h.forEach((function(t){p||pr(t,(function(t){if(t.id===f&&d){var e=d.indexOf(t);return d.splice(e,1),p=!0,!1}return d=t.children,!0}))}))}for(var g=(b=t.getEdges()).length-1;g>=0;g--)r.removeItem(b[g],!1);l&&r.updateCombo(l)}else if("combo"===i){var v,y=t.getModel().parentId,m=!1;(h||[]).forEach((function(t){m||pr(t,(function(t){return t.id!==f||(v=t,m=!0,!1)}))})),v.removed=!0,v&&v.children&&v.children.forEach((function(t){e.removeItem(t.id)}));var b;for(g=(b=t.getEdges()).length;g>=0;g--)r.removeItem(b[g],!1);y&&r.updateCombo(y)}t.destroy(),r.emit("afterremoveitem",{item:n})}},t.prototype.setItemState=function(t,e,r){var n=this.graph,i=e;_()(r)&&(i=e+":"+r),t.hasState(i)===r||_()(r)&&t.hasState(i)||(n.emit("beforeitemstatechange",{item:t,state:i,enabled:r}),t.setState(e,r),n.autoPaint(),n.emit("afteritemstatechange",{item:t,state:i,enabled:r}))},t.prototype.priorityState=function(t,e){var r=this.graph,n=t;_()(t)&&(n=r.findById(t)),this.setItemState(n,e,!1),this.setItemState(n,e,!0)},t.prototype.clearItemStates=function(t,e){var r=this.graph;_()(t)&&(t=r.findById(t)),r.emit("beforeitemstatesclear",{item:t,states:e}),t.clearStates(e),r.emit("afteritemstatesclear",{item:t,states:e})},t.prototype.refreshItem=function(t){var e=this.graph;_()(t)&&(t=e.findById(t)),e.emit("beforeitemrefresh",{item:t}),t.refresh(),e.emit("afteritemrefresh",{item:t})},t.prototype.addCombos=function(t,e){var r=this,n=this.graph;(t||[]).forEach((function(t){gr(t,(function(t){var n;return e.forEach((function(e){e.id===t.id&&(e.children=t.children,e.depth=t.depth,n=e)})),n&&r.addItem("combo",n),!0}))}));var i=n.get("comboGroup");i&&i.sort()},t.prototype.changeItemVisibility=function(t,e){var r=this,n=this.graph;if(_()(t)&&(t=n.findById(t)),t){if(n.emit("beforeitemvisibilitychange",{item:t,visible:e}),t.changeVisibility(e),t.getType&&"node"===t.getType()){var i=t.getEdges();d()(i,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&r.changeItemVisibility(t,e)}))}else if(t.getType&&"combo"===t.getType()){var o=n.get("comboTrees"),a=t.get("id"),s=[],u=!1;(o||[]).forEach((function(t){u||t.children&&0!==t.children.length&&pr(t,(function(t){return t.id!==a||(s=t.children,u=!0,!1)}))})),s.forEach((function(t){var i=n.findById(t.id);r.changeItemVisibility(i,e)}));i=t.getEdges();d()(i,(function(t){(!e||t.get("source").isVisible()&&t.get("target").isVisible())&&r.changeItemVisibility(t,e)}))}return n.emit("afteritemvisibilitychange",{item:t,visible:e}),t}console.warn("The item to be shown or hidden does not exist!")},t.prototype.destroy=function(){this.graph=null,this.destroyed=!0},t}(),Yr=function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1}return t.prototype.init=function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]},t.prototype.execute=function(){},t.prototype.layout=function(t){this.init(t),this.execute()},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(t){Br()(this,t)},t.prototype.destroy=function(){this.positions=null,this.nodes=null,this.edges=null,this.destroyed=!0},t}(),Gr={registerLayout:function(t,e,r){if(void 0===r&&(r=Yr),!e)throw new Error("please specify handler for this layout: "+t);var n=function(t){function r(r){var n=t.call(this)||this,i=n,o={},a=i.getDefaultCfg();return Br()(o,a,e,r),d()(o,(function(t,e){i[e]=t})),n}return Object(k.__extends)(r,t),r}(r);Gr[t]=n}},qr=Gr;function Xr(t,e){return t.degree<e.degree?-1:t.degree>e.degree?1:0}var Vr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var t=this.nodes,e=this.edges,r=t.length,n=this.center;if(0!==r){if(1===r)return t[0].x=n[0],void(t[0].y=n[1]);var i=this.radius,o=this.startRadius,a=this.endRadius,s=this.divisions,u=this.startAngle,c=this.endAngle,h=(c-u)/r,f={};t.forEach((function(t,e){f[t.id]=e})),this.nodeMap=f;var l=Kt(t.length,f,e);this.degrees=l,this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),i||o||a?!o&&a?o=a:o&&!a&&(a=o):i=this.height>this.width?this.width/2:this.height/2;var d=h*this.angleRatio;this.astep=d;var p=this.ordering,g=[];g="topology"===p?this.topologyOrdering():"topology-directed"===p?this.topologyOrdering(!0):"degree"===p?this.degreeOrdering():t;for(var v=this.clockwise,y=Math.ceil(r/s),m=0;m<r;++m){var b=i;b||null===o||null===a||(b=o+m*(a-o)/(r-1)),b||(b=10+100*m/(r-1));var x=u+m%y*d+2*Math.PI/s*Math.floor(m/y);v||(x=c-m%y*d-2*Math.PI/s*Math.floor(m/y)),g[m].x=n[0]+Math.cos(x)*b,g[m].y=n[1]+Math.sin(x)*b,g[m].weight=l[m]}}},e.prototype.topologyOrdering=function(t){void 0===t&&(t=!1);var e=this.degrees,r=this.edges,n=this.nodes,i=Object(ht.clone)(n),o=this.nodeMap,a=[i[0]],s=[n[0]],u=[],c=n.length;u[0]=!0,function(t,e,r,n){t.forEach((function(e,r){t[r].children=[],t[r].parent=[]})),n?e.forEach((function(e){var n=0;e.source&&(n=r[e.source]);var i=0;e.target&&(i=r[e.target]),t[n].children.push(t[i].id),t[i].parent.push(t[n].id)})):e.forEach((function(e){var n=0;e.source&&(n=r[e.source]);var i=0;e.target&&(i=r[e.target]),t[n].children.push(t[i].id),t[i].children.push(t[n].id)}))}(i,r,o,t);var h=0;return i.forEach((function(t,f){if(0!==f)if(f!==c-1&&e[f]===e[f+1]&&!function(t,e,r){for(var n=r.length,i=0;i<n;i++)if(t.id===r[i].source&&e.id===r[i].target||e.id===r[i].source&&t.id===r[i].target)return!0;return!1}(a[h],t,r)||!0===u[f]){for(var l=a[h].children,d=!1,p=0;p<l.length;p++){var g=o[l[p]];if(e[g]===e[f]&&!0!==u[g]){a.push(i[g]),s.push(n[o[i[g].id]]),u[g]=!0,d=!0;break}}for(var v=0;!d&&(u[v]||(a.push(i[v]),s.push(n[o[i[v].id]]),u[v]=!0,d=!0),++v!==c););}else a.push(t),s.push(n[o[t.id]]),u[f]=!0,h++})),s},e.prototype.degreeOrdering=function(){var t=this.nodes,e=[],r=this.degrees;return t.forEach((function(t,n){t.degree=r[n],e.push(t)})),e.sort(Xr),e},e}(Yr),Hr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=1.5*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.edges,n=e.length,i=t.center;if(0!==n){if(1===n)return e[0].x=i[0],void(e[0].y=i[1]);var o,a=[];o=m()(t.nodeSize)?Math.max(t.nodeSize[0],t.nodeSize[1]):t.nodeSize,e.forEach((function(t){a.push(t);var e=o;m()(t.size)?e=Math.max(t.size[0],t.size[1]):Object(ht.isNumber)(t.size)&&(e=t.size),o=Math.max(o,e)})),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise;var s={},u={};if(a.forEach((function(t,e){s[t.id]=t,u[t.id]=e})),!("degree"!==t.sortBy&&_()(t.sortBy)&&void 0!==a[0][t.sortBy]||(t.sortBy="degree",Object(ht.isNumber)(e[0].degree)))){var c=Kt(e.length,u,r);a.forEach((function(t,e){t.degree=c[e]}))}a.sort((function(e,r){return r[t.sortBy]-e[t.sortBy]})),t.maxValueNode=a[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var h=[[]],f=h[0];a.forEach((function(e){if(f.length>0){var r=Math.abs(f[0][t.sortBy]-e[t.sortBy]);t.maxLevelDiff&&r>=t.maxLevelDiff&&(f=[],h.push(f))}f.push(e)}));var l=o+t.minNodeSpacing;if(!t.preventOverlap){var d=h.length>0&&h[0].length>1,p=(Math.min(t.width,t.height)/2-l)/(h.length+(d?1:0));l=Math.min(l,p)}var g=0;if(h.forEach((function(e){var r=t.sweep;void 0===r&&(r=2*Math.PI-2*Math.PI/e.length);var n=e.dTheta=r/Math.max(1,e.length-1);if(e.length>1&&t.preventOverlap){var i=Math.cos(n)-Math.cos(0),o=Math.sin(n)-Math.sin(0),a=Math.sqrt(l*l/(i*i+o*o));g=Math.max(a,g)}e.r=g,g+=l})),t.equidistant){for(var v=0,y=0,b=0;b<h.length;b++){var x=h[b].r-y;v=Math.max(v,x)}y=0,h.forEach((function(t,e){0===e&&(y=t.r),t.r=y,y+=v}))}h.forEach((function(e){var r=e.dTheta,n=e.r;e.forEach((function(e,o){var a=t.startAngle+(t.clockwise?1:-1)*r*o;e.x=i[0]+n*Math.cos(a),e.y=i[1]+n*Math.sin(a)}))}))}},e}(Yr),Ur=r(134),Wr=r.n(Ur),Zr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.nodeSize,n=t.rankdir;if(e){var i,o=t.edges||[],a=new Wr.a.graphlib.Graph;i=r?m()(r)?function(){return r}:function(){return[r,r]}:function(t){return t.size?m()(t.size)?t.size:[t.size,t.size]:[40,40]};var s,u=$r(t.nodesepFunc,t.nodesep,50),c=$r(t.ranksepFunc,t.ranksep,50);"LR"!==n&&"RL"!==n||(u=$r(t.ranksepFunc,t.ranksep,50),c=$r(t.nodesepFunc,t.nodesep,50)),a.setDefaultEdgeLabel((function(){return{}})),a.setGraph(t),e.forEach((function(t){var e=i(t),r=c(t),n=u(t),o=e[0]+2*n,s=e[1]+2*r;a.setNode(t.id,{width:o,height:s})})),o.forEach((function(t){a.setEdge(t.source,t.target,{weight:t.weight||1})})),Wr.a.layout(a),a.nodes().forEach((function(t){s=a.node(t);var r=e.findIndex((function(e){return e.id===t}));e[r].x=s.x,e[r].y=s.y})),a.edges().forEach((function(e){s=a.edge(e);var r=o.findIndex((function(t){return t.source===e.v&&t.target===e.w}));t.controlPoints&&"loop"!==o[r].type&&"loop"!==o[r].shape&&(o[r].controlPoints=s.points.slice(1,s.points.length-1))})),t.sortByCombo&&t.sortLevel("comboId")}},e.prototype.sortLevel=function(t){var e=this.nodes,r={};e.forEach((function(t){r[t.y]||(r[t.y]={y:t.y,nodes:[]}),r[t.y].nodes.push(t)})),Object.keys(r).forEach((function(e){var n=r[e].nodes,i=n.length,o={};if(n.forEach((function(t){var e=t.comboId;o[e]||(o[e]={x:0,y:0,count:0}),o[e].x+=t.x,o[e].y+=t.y,o[e].count++})),Object.keys(o).forEach((function(t){o[t].x/=o[t].count,o[t].y/=o[t].count})),1!==i){var a=n.sort((function(t,e){return t.x-e.x})),s=a[0].x,u=(a[i-1].x-s)/(i-1);n.sort((function(e,r){var n=e[t]||"undefined",i=r[t]||"undefined";return n<i?-1:n>i?1:0})).forEach((function(t,e){t.x=s+e*u}))}}))},e}(Yr);function $r(t,e,r){return t||(Object(ht.isNumber)(e)?function(){return e}:function(){return r})}function Kr(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var i,o,a,s,u,c,h,f,l,d=t._root,p={data:n},g=t._x0,v=t._y0,y=t._x1,m=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(o=(g+y)/2))?g=o:y=o,(h=r>=(a=(v+m)/2))?v=a:m=a,i=d,!(d=d[f=h<<1|c]))return i[f]=p,t;if(s=+t._x.call(null,d.data),u=+t._y.call(null,d.data),e===s&&r===u)return p.next=d,i?i[f]=p:t._root=p,t;do{i=i?i[f]=new Array(4):t._root=new Array(4),(c=e>=(o=(g+y)/2))?g=o:y=o,(h=r>=(a=(v+m)/2))?v=a:m=a}while((f=h<<1|c)==(l=(u>=a)<<1|s>=o));return i[l]=d,i[f]=p,t}var Qr=function(t,e,r,n,i){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=i};function Jr(t){return t[0]}function tn(t){return t[1]}function en(t,e,r){var n=new rn(null==e?Jr:e,null==r?tn:r,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function rn(t,e,r,n,i,o){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=i,this._y1=o,this._root=void 0}function nn(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var on=en.prototype=rn.prototype;on.copy=function(){var t,e,r=new rn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return r;if(!n.length)return r._root=nn(n),r;for(t=[{source:n,target:r._root=new Array(4)}];n=t.pop();)for(var i=0;i<4;++i)(e=n.source[i])&&(e.length?t.push({source:e,target:n.target[i]=new Array(4)}):n.target[i]=nn(e));return r},on.add=function(t){var e=+this._x.call(null,t),r=+this._y.call(null,t);return Kr(this.cover(e,r),e,r,t)},on.addAll=function(t){var e,r,n,i,o=t.length,a=new Array(o),s=new Array(o),u=1/0,c=1/0,h=-1/0,f=-1/0;for(r=0;r<o;++r)isNaN(n=+this._x.call(null,e=t[r]))||isNaN(i=+this._y.call(null,e))||(a[r]=n,s[r]=i,n<u&&(u=n),n>h&&(h=n),i<c&&(c=i),i>f&&(f=i));if(u>h||c>f)return this;for(this.cover(u,c).cover(h,f),r=0;r<o;++r)Kr(this,a[r],s[r],t[r]);return this},on.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,i=this._x1,o=this._y1;if(isNaN(r))i=(r=Math.floor(t))+1,o=(n=Math.floor(e))+1;else{for(var a,s,u=i-r||1,c=this._root;r>t||t>=i||n>e||e>=o;)switch(s=(e<n)<<1|t<r,(a=new Array(4))[s]=c,c=a,u*=2,s){case 0:i=r+u,o=n+u;break;case 1:r=i-u,o=n+u;break;case 2:i=r+u,n=o-u;break;case 3:r=i-u,n=o-u}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=n,this._x1=i,this._y1=o,this},on.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},on.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},on.find=function(t,e,r){var n,i,o,a,s,u,c,h=this._x0,f=this._y0,l=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new Qr(g,h,f,l,d)),null==r?r=1/0:(h=t-r,f=e-r,l=t+r,d=e+r,r*=r);u=p.pop();)if(!(!(g=u.node)||(i=u.x0)>l||(o=u.y0)>d||(a=u.x1)<h||(s=u.y1)<f))if(g.length){var v=(i+a)/2,y=(o+s)/2;p.push(new Qr(g[3],v,y,a,s),new Qr(g[2],i,y,v,s),new Qr(g[1],v,o,a,y),new Qr(g[0],i,o,v,y)),(c=(e>=y)<<1|t>=v)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=u)}else{var m=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),x=m*m+b*b;if(x<r){var w=Math.sqrt(r=x);h=t-w,f=e-w,l=t+w,d=e+w,n=g.data}}return n},on.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,r,n,i,o,a,s,u,c,h,f,l,d=this._root,p=this._x0,g=this._y0,v=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=o>=(s=(p+v)/2))?p=s:v=s,(h=a>=(u=(g+y)/2))?g=u:y=u,e=d,!(d=d[f=h<<1|c]))return this;if(!d.length)break;(e[f+1&3]||e[f+2&3]||e[f+3&3])&&(r=e,l=f)}for(;d.data!==t;)if(n=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,n?(i?n.next=i:delete n.next,this):e?(i?e[f]=i:delete e[f],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(r?r[l]=d:this._root=d),this):(this._root=i,this)},on.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},on.root=function(){return this._root},on.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},on.visit=function(t){var e,r,n,i,o,a,s=[],u=this._root;for(u&&s.push(new Qr(u,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(u=e.node,n=e.x0,i=e.y0,o=e.x1,a=e.y1)&&u.length){var c=(n+o)/2,h=(i+a)/2;(r=u[3])&&s.push(new Qr(r,c,h,o,a)),(r=u[2])&&s.push(new Qr(r,n,h,c,a)),(r=u[1])&&s.push(new Qr(r,c,i,o,h)),(r=u[0])&&s.push(new Qr(r,n,i,c,h))}return this},on.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new Qr(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var i=e.node;if(i.length){var o,a=e.x0,s=e.y0,u=e.x1,c=e.y1,h=(a+u)/2,f=(s+c)/2;(o=i[0])&&r.push(new Qr(o,a,s,h,f)),(o=i[1])&&r.push(new Qr(o,h,s,u,f)),(o=i[2])&&r.push(new Qr(o,a,f,h,c)),(o=i[3])&&r.push(new Qr(o,h,f,u,c))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},on.x=function(t){return arguments.length?(this._x=t,this):this._x},on.y=function(t){return arguments.length?(this._y=t,this):this._y};var an=function(t){return function(){return t}},sn=function(t){return 1e-6*(t()-.5)},un={value:function(){}};function cn(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n||/[\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new hn(n)}function hn(t){this._=t}function fn(t,e){return t.trim().split(/^|\s+/).map((function(t){var r="",n=t.indexOf(".");if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}}))}function ln(t,e){for(var r,n=0,i=t.length;n<i;++n)if((r=t[n]).name===e)return r.value}function dn(t,e,r){for(var n=0,i=t.length;n<i;++n)if(t[n].name===e){t[n]=un,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}hn.prototype=cn.prototype={constructor:hn,on:function(t,e){var r,n=this._,i=fn(t+"",n),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(r=(t=i[o]).type)n[r]=dn(n[r],t.name,e);else if(null==e)for(r in n)n[r]=dn(n[r],t.name,null);return this}for(;++o<a;)if((r=(t=i[o]).type)&&(r=ln(n[r],t.name)))return r},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new hn(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,n,i=new Array(r),o=0;o<r;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,r=(n=this._[t]).length;o<r;++o)n[o].value.apply(e,i)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],i=0,o=n.length;i<o;++i)n[i].value.apply(e,r)}};var pn=cn;function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var vn,yn,mn=0,bn=0,xn=0,wn=0,Mn=0,Sn=0,_n="object"===("undefined"==typeof performance?"undefined":gn(performance))&&performance.now?performance:Date,kn="object"===("undefined"==typeof window?"undefined":gn(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function On(){return Mn||(kn(En),Mn=_n.now()+Sn)}function En(){Mn=0}function jn(){this._call=this._time=this._next=null}function Cn(t,e,r){var n=new jn;return n.restart(t,e,r),n}function An(){Mn=(wn=_n.now())+Sn,mn=bn=0;try{!function(){On(),++mn;for(var t,e=vn;e;)(t=Mn-e._time)>=0&&e._call.call(null,t),e=e._next;--mn}()}finally{mn=0,function(){var t,e,r=vn,n=1/0;for(;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:vn=e);yn=t,In(n)}(),Mn=0}}function Pn(){var t=_n.now(),e=t-wn;e>1e3&&(Sn-=e,wn=t)}function In(t){mn||(bn&&(bn=clearTimeout(bn)),t-Mn>24?(t<1/0&&(bn=setTimeout(An,t-_n.now()-Sn)),xn&&(xn=clearInterval(xn))):(xn||(wn=_n.now(),xn=setInterval(Pn,1e3)),mn=1,kn(An)))}jn.prototype=Cn.prototype={constructor:jn,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?On():+r)+(null==e?0:+e),this._next||yn===this||(yn?yn._next=this:vn=this,yn=this),this._call=t,this._time=r,In()},stop:function(){this._call&&(this._call=null,this._time=1/0,In())}};function Tn(t){return t.x}function Nn(t){return t.y}var Dn=Math.PI*(3-Math.sqrt(5)),Bn=function(t){var e,r,n=1,i=.001,o=1-Math.pow(i,1/300),a=0,s=.6,u=new Map,c=Cn(l),h=pn("tick","end"),f=(r=1,function(){return(r=(1664525*r+1013904223)%4294967296)/4294967296});function l(){d(),h.call("tick",e),n<i&&(c.stop(),h.call("end",e))}function d(r){var i,c,h=t.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(a-n)*o,u.forEach((function(t){t(n)})),i=0;i<h;++i)null==(c=t[i]).fx?c.x+=c.vx*=s:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=s:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,r=0,n=t.length;r<n;++r){if((e=t[r]).index=r,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+r),o=r*Dn;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function g(e){return e.initialize&&e.initialize(t,f),e}return null==t&&(t=[]),p(),e={tick:d,restart:function(){return c.restart(l),e},stop:function(){return c.stop(),e},nodes:function(r){return arguments.length?(t=r,p(),u.forEach(g),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(i=+t,e):i},alphaDecay:function(t){return arguments.length?(o=+t,e):+o},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(f=t,u.forEach(g),e):f},force:function(t,r){return arguments.length>1?(null==r?u.delete(t):u.set(t,g(r)),e):u.get(t)},find:function(e,r,n){var i,o,a,s,u,c=0,h=t.length;for(null==n?n=1/0:n*=n,c=0;c<h;++c)(a=(i=e-(s=t[c]).x)*i+(o=r-s.y)*o)<n&&(u=s,n=a);return u},on:function(t,r){return arguments.length>1?(h.on(t,r),e):h.on(t)}}},Rn=function(){var t,e,r,n,i,o=an(-30),a=1,s=1/0,u=.81;function c(r){var i,o=t.length,a=en(t,Tn,Nn).visitAfter(f);for(n=r,i=0;i<o;++i)e=t[i],a.visit(l)}function h(){if(t){var e,r,n=t.length;for(i=new Array(n),e=0;e<n;++e)r=t[e],i[r.index]=+o(r,e,t)}}function f(t){var e,r,n,o,a,s=0,u=0;if(t.length){for(n=o=a=0;a<4;++a)(e=t[a])&&(r=Math.abs(e.value))&&(s+=e.value,u+=r,n+=r*e.x,o+=r*e.y);t.x=n/u,t.y=o/u}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=i[e.data.index]}while(e=e.next)}t.value=s}function l(t,o,c,h){if(!t.value)return!0;var f=t.x-e.x,l=t.y-e.y,d=h-o,p=f*f+l*l;if(d*d/u<p)return p<s&&(0===f&&(p+=(f=sn(r))*f),0===l&&(p+=(l=sn(r))*l),p<a&&(p=Math.sqrt(a*p)),e.vx+=f*t.value*n/p,e.vy+=l*t.value*n/p),!0;if(!(t.length||p>=s)){(t.data!==e||t.next)&&(0===f&&(p+=(f=sn(r))*f),0===l&&(p+=(l=sn(r))*l),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(d=i[t.data.index]*n/p,e.vx+=f*d,e.vy+=l*d)}while(t=t.next)}}return c.initialize=function(e,n){t=e,r=n,h()},c.strength=function(t){return arguments.length?(o="function"==typeof t?t:an(+t),h(),c):o},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.theta=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c};function Ln(t){return(Ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zn(t){return t.index}function Fn(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}var Yn=function(t){var e,r,n,i,o,a,s=zn,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=an(30),h=1;function f(n){for(var i=0,s=t.length;i<h;++i)for(var u,c,f,l,d,p,g,v=0;v<s;++v)c=(u=t[v]).source,l=(f=u.target).x+f.vx-c.x-c.vx||sn(a),d=f.y+f.vy-c.y-c.vy||sn(a),l*=p=((p=Math.sqrt(l*l+d*d))-r[v])/p*n*e[v],d*=p,f.vx-=l*(g=o[v]),f.vy-=d*g,c.vx+=l*(g=1-g),c.vy+=d*g}function l(){if(n){var a,u,c=n.length,h=t.length,f=new Map(n.map((function(t,e){return[s(t,e,n),t]})));for(a=0,i=new Array(c);a<h;++a)(u=t[a]).index=a,"object"!==Ln(u.source)&&(u.source=Fn(f,u.source)),"object"!==Ln(u.target)&&(u.target=Fn(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(h);a<h;++a)u=t[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);e=new Array(h),d(),r=new Array(h),p()}}function d(){if(n)for(var r=0,i=t.length;r<i;++r)e[r]=+u(t[r],r,t)}function p(){if(n)for(var e=0,i=t.length;e<i;++e)r[e]=+c(t[e],e,t)}return null==t&&(t=[]),f.initialize=function(t,e){n=t,a=e,l()},f.links=function(e){return arguments.length?(t=e,l(),f):t},f.id=function(t){return arguments.length?(s=t,f):s},f.iterations=function(t){return arguments.length?(h=+t,f):h},f.strength=function(t){return arguments.length?(u="function"==typeof t?t:an(+t),d(),f):u},f.distance=function(t){return arguments.length?(c="function"==typeof t?t:an(+t),p(),f):c},f};function Gn(t){return t.x+t.vx}function qn(t){return t.y+t.vy}var Xn=function(t){var e,r,n,i=1,o=1;function a(){for(var t,a,u,c,h,f,l,d=e.length,p=0;p<o;++p)for(a=en(e,Gn,qn).visitAfter(s),t=0;t<d;++t)u=e[t],f=r[u.index],l=f*f,c=u.x+u.vx,h=u.y+u.vy,a.visit(g);function g(t,e,r,o,a){var s=t.data,d=t.r,p=f+d;if(!s)return e>c+p||o<c-p||r>h+p||a<h-p;if(s.index>u.index){var g=c-s.x-s.vx,v=h-s.y-s.vy,y=g*g+v*v;y<p*p&&(0===g&&(y+=(g=sn(n))*g),0===v&&(y+=(v=sn(n))*v),y=(p-(y=Math.sqrt(y)))/y*i,u.vx+=(g*=y)*(p=(d*=d)/(l+d)),u.vy+=(v*=y)*p,s.vx-=g*(p=1-p),s.vy-=v*p)}}}function s(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function u(){if(e){var n,i,o=e.length;for(r=new Array(o),n=0;n<o;++n)i=e[n],r[i.index]=+t(i,n,e)}}return"function"!=typeof t&&(t=an(null==t?1:+t)),a.initialize=function(t,r){e=t,n=r,u()},a.iterations=function(t){return arguments.length?(o=+t,a):o},a.strength=function(t){return arguments.length?(i=+t,a):i},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:an(+e),u(),a):t},a};function Vn(){function t(t){return function(){return t}}var e,r=function(t){return t.cluster},n=t(1),i=t(-1),o=t(100),a=t(.1),s=[0,0],u=[],c={},h=[],f=100,l=100,d={none:{x:0,y:0}},p=[],g="force",v=!0,y=.1;function m(t){if(!v)return m;e.tick(),x();for(var n=0,i=u.length,o=void 0,a=t*y;n<i;++n)(o=u[n]).vx+=(d[r(o)].x-o.x)*a,o.vy+=(d[r(o)].y-o.y)*a}function b(){u&&function(){if(!u||!u.length)return;if(void 0===r(u[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var t=(d=[],g=[],v={},y=[],s=function(t){var e={};return t.forEach((function(t){var n=r(t);e[n]||(e[n]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var i=r(t),o=n(t),a=e[i];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(o*o)*1.3,e[i]=a})),e}(u),y=function(t){var e={},n=[];return t.forEach((function(t){var n=function(t){var e=r(c[t.source]),n=r(c[t.target]);return e<=n?e+"~"+n:n+"~"+e}(t),i=0;void 0!==e[n]&&(i=e[n]),i+=1,e[n]=i})),Object.entries(e).forEach((function(t){var e=t[0],r=t[1],i=e.split("~")[0],o=e.split("~")[1];void 0!==i&&void 0!==o&&n.push({source:i,target:o,count:r})})),n}(h),Object.keys(s).forEach((function(t,e){var r=s[t];d.push({id:t,size:r.count,r:Math.sqrt(r.sumforceNodeSize/Math.PI)}),v[t]=e})),y.forEach((function(t){var e=v[t.source],r=v[t.target];void 0!==e&&void 0!==r&&g.push({source:e,target:r,count:t.count})})),{nodes:d,links:g});var s,d,g,v,y;e=Bn(t.nodes).force("x",function(t){var e,r,n,i=an(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vx+=(n[o]-i.x)*r[o]*t}function a(){if(e){var o,a=e.length;for(r=new Array(a),n=new Array(a),o=0;o<a;++o)r[o]=isNaN(n[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=an(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:an(+t),a(),o):i},o.x=function(e){return arguments.length?(t="function"==typeof e?e:an(+e),a(),o):t},o}(f).strength(.1)).force("y",function(t){var e,r,n,i=an(.1);function o(t){for(var i,o=0,a=e.length;o<a;++o)(i=e[o]).vy+=(n[o]-i.y)*r[o]*t}function a(){if(e){var o,a=e.length;for(r=new Array(a),n=new Array(a),o=0;o<a;++o)r[o]=isNaN(n[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!=typeof t&&(t=an(null==t?0:+t)),o.initialize=function(t){e=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:an(+t),a(),o):i},o.y=function(e){return arguments.length?(t="function"==typeof e?e:an(+e),a(),o):t},o}(l).strength(.1)).force("collide",Xn((function(t){return t.r})).iterations(4)).force("charge",Rn().strength(i)).force("links",Yn(t.nodes.length?t.links:[]).distance(o).strength(a)),p=e.nodes(),x()}()}function x(){return d={none:{x:0,y:0}},p.forEach((function(t){d[t.id]={x:t.x-s[0],y:t.y-s[1]}})),d}function w(t){c={},t.forEach((function(t){c[t.id]=t}))}return m.initialize=function(t){u=t,b()},m.template=function(t){return arguments.length?(g=t,b(),m):g},m.groupBy=function(t){return arguments.length?"string"==typeof t?(r=function(e){return e[t]},m):(r=t,m):r},m.enableGrouping=function(t){return arguments.length?(v=t,m):v},m.strength=function(t){return arguments.length?(y=t,m):y},m.centerX=function(t){return arguments.length?(f=t,m):f},m.centerY=function(t){return arguments.length?(l=t,m):l},m.nodes=function(t){return arguments.length?(w(t||[]),u=t||[],m):u},m.links=function(t){return arguments.length?(h=t||[],b(),m):h},m.forceNodeSize=function(e){return arguments.length?(n="function"==typeof e?e:t(+e),b(),m):n},m.nodeSize=m.forceNodeSize,m.forceCharge=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),b(),m):i},m.forceLinkDistance=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),b(),m):o},m.forceLinkStrength=function(e){return arguments.length?(a="function"==typeof e?e:t(+e),b(),m):a},m.offset=function(t){return arguments.length?(s=t,m):s},m.getFocis=x,m}var Hn=r(14),Un=r.n(Hn),Wn="LAYOUT_RUN",Zn="LAYOUT_END",$n="LAYOUT_TICK",Kn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.onTick=function(){},e.ticking=void 0,e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},onTick:function(){},workerEnabled:!1}},e.prototype.init=function(t){this.nodes=t.nodes||[];var e=t.edges||[];this.edges=e.map((function(t){var e={},r=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(n){r.indexOf(n)>-1||(e[n]=t[n])})),e})),this.ticking=!1},e.prototype.execute=function(t){var e=this,r=e.nodes,n=e.edges;if(!e.ticking){var i=e.forceSimulation,o=e.alphaMin,a=e.alphaDecay,s=e.alpha;if(i)t&&(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(r),e.clusterForce.links(n)),i.nodes(r),e.edgeForce.links(n)),e.preventOverlap&&e.overlapProcess(i),i.alpha(s).restart(),this.ticking=!0;else try{var u=Rn();if(e.nodeStrength&&u.strength(e.nodeStrength),i=Bn().nodes(r),e.clustering){var c=Vn();c.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),n&&c.links(n),r&&c.nodes(r),c.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=c,i.force("group",c)}if(i.force("center",function(t,e){var r,n=1;function i(){var i,o,a=r.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=r[i]).x,u+=o.y;for(s=(s/a-t)*n,u=(u/a-e)*n,i=0;i<a;++i)(o=r[i]).x-=s,o.y-=u}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){r=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(n=+t,i):n},i}(e.center[0],e.center[1])).force("charge",u).alpha(s).alphaDecay(a).alphaMin(o),e.preventOverlap&&e.overlapProcess(i),n){var h=Yn().id((function(t){return t.id})).links(n);e.edgeStrength&&h.strength(e.edgeStrength),e.linkDistance&&h.distance(e.linkDistance),e.edgeForce=h,i.force("link",h)}if(e.workerEnabled&&!Qn()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){i.stop();for(var f=function(t){var e=t.alphaMin(),r=t.alphaTarget(),n=t.alpha(),i=Math.log((e-r)/(n-r))/Math.log(1-t.alphaDecay());return Math.ceil(i)}(i),l=1;l<=f;l++)i.tick(),postMessage({type:$n,currentTick:l,totalTicks:f,nodes:r},void 0);e.ticking=!1}else i.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=i,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}},e.prototype.overlapProcess=function(t){var e,r,n=this.nodeSize,i=this.nodeSpacing,o=this.collideStrength;if(r=M()(i)?function(){return i}:Un()(i)?i:function(){return 0},n)if(Un()(n))e=function(t){return n(t)+r(t)};else if(m()(n)){var a=(n[0]>n[1]?n[0]:n[1])/2;e=function(t){return a+r(t)}}else if(M()(n)){var s=n/2;e=function(t){return s+r(t)}}else e=function(){return 10};else e=function(t){return t.size?m()(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+r(t):t.size/2+r(t):10+r(t)};t.force("collisionForce",Xn(e).strength(o))},e.prototype.updateCfg=function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,Br()(this,t)},e.prototype.destroy=function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0},e}(Yr);function Qn(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}var Jn=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.maxIteration=500,e.gravity=10,e.clustering=!1,e.clusterGravity=10,e.linkDistance=50,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.linkStrength=1,e.nodeStrength=30,e.preventOverlap=!1,e.collideStrength=1,e.optimizeRangeFactor=1,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.nodeIdxMap={},e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,clustering:!1,clusterGravity:10,preventOverlap:!1,nodeSpacing:void 0,collideStrength:10}},e.prototype.execute=function(){var t=this.nodes,e=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=e[0],void(t[0].y=e[1]);var r={},n={};t.forEach((function(t,e){r[t.id]=t,n[t.id]=e})),this.nodeMap=r,this.nodeIdxMap=n,this.run()}},e.prototype.run=function(){var t=this,e=t.nodes,r=t.edges,n=t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var i,o=t.center,a=t.velocityDecay,s=t.clustering;t.initVals(),s&&(i=t.getClusterMap());for(var u=function(n){var o=[];e.forEach((function(t,e){o[e]={x:0,y:0}})),t.applyCalculate(e,r,o),s&&t.applyClusterForce(i,o),e.forEach((function(t,e){Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(t.y)&&(t.x+=o[e].x*a,t.y+=o[e].y*a)})),c.alpha+=(c.alphaTarget-c.alpha)*c.alphaDecay,t.tick()},c=this,h=0;h<n;h++)u();var f=[0,0];e.forEach((function(t){Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(t.y)&&(f[0]+=t.x,f[1]+=t.y)})),f[0]/=e.length,f[1]/=e.length;var l=[o[0]-f[0],o[1]-f[1]];e.forEach((function(t,e){Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(t.y)&&(t.x+=l[0],t.y+=l[1])}))},e.prototype.initVals=function(){for(var t=this.edges,e={},r=0;r<t.length;++r)e[t[r].source]?e[t[r].source]++:e[t[r].source]=1,e[t[r].target]?e[t[r].target]++:e[t[r].target]=1;var n=[];for(r=0;r<t.length;++r)n[r]=e[t[r].source]/(e[t[r].source]+e[t[r].target]);this.bias=n;var i,o,a=this.nodeSize,s=this.nodeSpacing;if(o=Object(ht.isNumber)(s)?function(){return s}:Object(ht.isFunction)(s)?s:function(){return 0},a)if(Object(ht.isFunction)(a))i=function(t){return a(t)+o(t)};else if(Object(ht.isArray)(a)){var u=(a[0]>a[1]?a[0]:a[1])/2;i=function(t){return u+o(t)}}else if(Object(ht.isNumber)(a)){var c=a/2;i=function(t){return c+o(t)}}else i=function(){return 10};else i=function(t){return t.size?Object(ht.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+o(t):t.size/2+o(t):10+o(t)};this.nodeSize=i;var h,f=this.linkDistance;f||(f=50),Object(ht.isNumber)(f)&&(h=function(t){return f}),this.linkDistance=h;var l,d=this.linkStrength;d||(d=1),Object(ht.isNumber)(d)&&(l=function(t){return d}),this.linkStrength=l;var p,g=this.nodeStrength;g||(g=30),Object(ht.isNumber)(g)&&(p=function(t){return g}),this.nodeStrength=p},e.prototype.getClusterMap=function(){var t=this.nodes,e={};for(var r in t.forEach((function(t){if(void 0===e[t.cluster]){var r={name:t.cluster,cx:0,cy:0,count:0};e[t.cluster]=r}var n=e[t.cluster];Object(ht.isNumber)(t.x)&&(n.cx+=t.x),Object(ht.isNumber)(t.y)&&(n.cy+=t.y),n.count++})),e)e[r].cx/=e[r].count,e[r].cy/=e[r].count;return e},e.prototype.applyClusterForce=function(t,e){var r=this.gravity,n=this.nodes,i=this.clusterGravity||r,o=this.alpha;for(var a in n.forEach((function(r,n){if(Object(ht.isNumber)(r.x)&&Object(ht.isNumber)(r.y)){var a=t[r.cluster],s=r.x-a.cx,u=r.y-a.cy,c=Math.sqrt(s*s+u*u);e[n].x-=s*i*o/c,e[n].y-=u*i*o/c}})),t)t[a].cx=0,t[a].cy=0,t[a].count=0;for(var a in n.forEach((function(e){var r=t[e.cluster];Object(ht.isNumber)(e.x)&&(r.cx+=e.x),Object(ht.isNumber)(e.y)&&(r.cy+=e.y),r.count++})),t)t[a].cx/=t[a].count,t[a].cy/=t[a].count},e.prototype.applyCalculate=function(t,e,r){var n={};t.forEach((function(e,i){r[i]={x:0,y:0},t.forEach((function(t,r){if(!(i<r)){var o=e.x-t.x,a=e.y-t.y,s=o*o+a*a;s<1&&(s=Math.sqrt(s)),0===o&&(s+=(o=.01*Math.random())*o),0===a&&(s+=(a=.01*Math.random())*a);var u=Math.sqrt(s);n[e.id+"-"+t.id]={vx:o,vy:a,vl:s,sqrtVl:u},n[t.id+"-"+e.id]={vx:-o,vy:-a,vl:s,sqrtVl:u}}}))})),this.calRepulsive(t,r,n),this.calAttractive(e,r,n)},e.prototype.calRepulsive=function(t,e,r){var n=this.width*this.optimizeRangeFactor*this.width*this.optimizeRangeFactor,i=this.nodeStrength,o=this.alpha,a=this.collideStrength,s=this.preventOverlap,u=this.nodeSize;t.forEach((function(c,h){t.forEach((function(t,f){if(h!==f&&Object(ht.isNumber)(c.x)&&Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(c.y)&&Object(ht.isNumber)(t.y)){var l=r[c.id+"-"+t.id],d=l.vl,p=l.vx,g=l.vy;if(!(d>n)&&(e[h].x+=p*i(t)*o/d,e[h].y+=g*i(t)*o/d,s&&h<f)){var v=u(c),y=u(t),m=v+y;if(d<m*m){var b=r[c.id+"-"+t.id].sqrtVl,x=(m-b)/b*a,w=y*y/(v*v+y*y),M=p*x,S=g*x;e[h].x+=M*w,e[h].y+=S*w,w=1-w,e[f].x-=M*w,e[f].y-=S*w}}}}))}))},e.prototype.calAttractive=function(t,e,r){var n=this,i=this.linkDistance,o=this.alpha,a=this.linkStrength,s=this.bias;t.forEach((function(t,u){if(t.source&&t.target){var c=n.nodeIdxMap[t.source],h=n.nodeIdxMap[t.target];if(c!==h){var f=n.nodeMap[t.source],l=n.nodeMap[t.target];if(Object(ht.isNumber)(l.x)&&Object(ht.isNumber)(f.x)&&Object(ht.isNumber)(l.y)&&Object(ht.isNumber)(f.y)){var d=r[t.target+"-"+t.source],p=(d.vl,d.sqrtVl),g=d.vx,v=d.vy,y=(p-i(t))/p*o*a(t),m=g*y,b=v*y,x=s[u];e[h].x-=m*x,e[h].y-=b*x,e[c].x+=m*(1-x),e[c].y+=b*(1-x)}}}}))},e}(Yr),ti=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){var t=this,e=this.nodes,r=this.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=r[0],void(e[0].y=r[1]);var n={},i={};e.forEach((function(e,r){Object(ht.isNumber)(e.x)||(e.x=Math.random()*t.width),Object(ht.isNumber)(e.y)||(e.y=Math.random()*t.height),n[e.id]=e,i[e.id]=r})),this.nodeMap=n,this.nodeIdxMap=i,this.run()}},e.prototype.run=function(){var t=this,e=t.nodes,r=t.edges,n=t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var i=t.center,o=t.width/10,a=Math.sqrt(t.width*t.height/(e.length+1)),s=t.gravity,u=t.speed,c=t.clustering,h={};if(c)for(var f in e.forEach((function(t){if(void 0===h[t.cluster]){var e={name:t.cluster,cx:0,cy:0,count:0};h[t.cluster]=e}var r=h[t.cluster];Object(ht.isNumber)(t.x)&&(r.cx+=t.x),Object(ht.isNumber)(t.y)&&(r.cy+=t.y),r.count++})),h)h[f].cx/=h[f].count,h[f].cy/=h[f].count;for(var l=function(n){var f=[];if(e.forEach((function(t,e){f[e]={x:0,y:0}})),t.applyCalculate(e,r,f,a),c){var l=t.clusterGravity||s;for(var d in e.forEach((function(t,e){if(Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(t.y)){var r=h[t.cluster],n=Math.sqrt((t.x-r.cx)*(t.x-r.cx)+(t.y-r.cy)*(t.y-r.cy)),i=a*l;f[e].x-=i*(t.x-r.cx)/n,f[e].y-=i*(t.y-r.cy)/n}})),h)h[d].cx=0,h[d].cy=0,h[d].count=0;for(var d in e.forEach((function(t){var e=h[t.cluster];Object(ht.isNumber)(t.x)&&(e.cx+=t.x),Object(ht.isNumber)(t.y)&&(e.cy+=t.y),e.count++})),h)h[d].cx/=h[d].count,h[d].cy/=h[d].count}e.forEach((function(t,e){if(Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(t.y)){var r=.01*a*s;f[e].x-=r*(t.x-i[0]),f[e].y-=r*(t.y-i[1])}})),e.forEach((function(t,e){if(Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(t.y)){var r=Math.sqrt(f[e].x*f[e].x+f[e].y*f[e].y);if(r>0){var n=Math.min(o*(u/800),r);t.x+=f[e].x/r*n,t.y+=f[e].y/r*n}}}))},d=0;d<n;d++)l()},e.prototype.applyCalculate=function(t,e,r,n){this.calRepulsive(t,r,n),this.calAttractive(e,r,n)},e.prototype.calRepulsive=function(t,e,r){t.forEach((function(n,i){e[i]={x:0,y:0},t.forEach((function(t,o){if(i!==o&&Object(ht.isNumber)(n.x)&&Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(n.y)&&Object(ht.isNumber)(t.y)){var a=n.x-t.x,s=n.y-t.y,u=a*a+s*s;if(0===u){u=1;var c=i>o?1:-1;a=.01*c,s=.01*c}var h=r*r/u;e[i].x+=a*h,e[i].y+=s*h}}))}))},e.prototype.calAttractive=function(t,e,r){var n=this;t.forEach((function(t){if(t.source&&t.target){var i=n.nodeIdxMap[t.source],o=n.nodeIdxMap[t.target];if(i!==o){var a=n.nodeMap[t.source],s=n.nodeMap[t.target];if(Object(ht.isNumber)(s.x)&&Object(ht.isNumber)(a.x)&&Object(ht.isNumber)(s.y)&&Object(ht.isNumber)(a.y)){var u=s.x-a.x,c=s.y-a.y,h=Math.sqrt(u*u+c*c),f=h*h/r;e[o].x-=u/h*f,e[o].y-=c/h*f,e[i].x+=u/h*f,e[i].y+=c/h*f}}}}))},e}(Yr),ei=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.center=[0,0],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var t=this,e=t.nodes,r=e.length,n=t.center;if(0!==r){if(1===r)return e[0].x=n[0],void(e[0].y=n[1]);var i=t.edges,o=[];e.forEach((function(t){o.push(t)}));var a={};if(o.forEach((function(t,e){a[t.id]=e})),("degree"===t.sortBy||!_()(t.sortBy)||void 0===o[0][t.sortBy])&&(t.sortBy="degree",P(e[0].degree))){var s=Kt(o.length,a,i);o.forEach((function(t,e){t.degree=s[e]}))}o.sort((function(e,r){return r[t.sortBy]-e[t.sortBy]})),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var u=t.rows,c=null!=t.cols?t.cols:t.columns;if(t.cells=r,null!=u&&null!=c?(t.rows=u,t.cols=c):null!=u&&null==c?(t.rows=u,t.cols=Math.ceil(t.cells/t.rows)):null==u&&null!=c?(t.cols=c,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells)((f=t.small())-1)*(h=t.large())>=t.cells?t.small(f-1):(h-1)*f>=t.cells&&t.large(h-1);else for(;t.cols*t.rows<t.cells;){var h,f=t.small();((h=t.large())+1)*f>=t.cells?t.large(h+1):t.small(f+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&o.forEach((function(e){var r,n;e.x&&e.y||(e.x=0,e.y=0),Object(ht.isArray)(e.size)?(r=e.size[0],n=e.size[1]):Object(ht.isNumber)(e.size)&&(r=e.size,n=e.size),void 0!==r&&void 0!==n||(Object(ht.isArray)(t.nodeSize)?(r=t.nodeSize[0],n=t.nodeSize[1]):Object(ht.isNumber)(t.nodeSize)?(r=t.nodeSize,n=t.nodeSize):(r=30,n=30));var i=t.preventOverlapPadding,o=r+i,a=n+i;t.cellWidth=Math.max(t.cellWidth,o),t.cellHeight=Math.max(t.cellHeight,a)})),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var l=0;l<o.length;l++){var d=o[l],p=void 0;if(t.position&&(p=t.position(d)),p&&(void 0!==p.row||void 0!==p.col)){var g={row:p.row,col:p.col};if(void 0===g.col)for(g.col=0;t.used(g.row,g.col);)g.col++;else if(void 0===g.row)for(g.row=0;t.used(g.row,g.col);)g.row++;t.id2manPos[d.id]=g,t.use(g.row,g.col)}t.getPos(d)}}},e.prototype.small=function(t){var e,r=this.rows||5,n=this.cols||5;null==t?e=Math.min(r,n):Math.min(r,n)===this.rows?this.rows=t:this.cols=t;return e},e.prototype.large=function(t){var e,r=this.rows||5,n=this.cols||5;null==t?e=Math.max(r,n):Math.max(r,n)===this.rows?this.rows=t:this.cols=t;return e},e.prototype.used=function(t,e){return this.cellUsed["c-"+t+"-"+e]||!1},e.prototype.use=function(t,e){this.cellUsed["c-"+t+"-"+e]=!0},e.prototype.moveToNextCell=function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)},e.prototype.getPos=function(t){var e,r,n=this.begin,i=this.cellWidth,o=this.cellHeight,a=this.id2manPos[t.id];if(a)e=a.col*i+i/2+n[0],r=a.row*o+o/2+n[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();e=this.col*i+i/2+n[0],r=this.row*o+o/2+n[1],this.use(this.row,this.col),this.moveToNextCell()}t.x=e,t.y=r},e}(Yr),ri=Object.prototype.toString;function ni(t){return ri.call(t).endsWith("Array]")}var ii=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ni(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,i=e.toIndex,o=void 0===i?t.length:i;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=n||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[n],s=n+1;s<o;s++)t[s]>a&&(a=t[s]);return a};var oi=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ni(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,i=e.toIndex,o=void 0===i?t.length:i;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(o<=n||o>t.length||!Number.isInteger(o))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[n],s=n+1;s<o;s++)t[s]<a&&(a=t[s]);return a};var ai=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ni(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!ni(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var n=oi(t),i=ii(t);if(n===i)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var o=r.min,a=void 0===o?r.autoMinMax?n:0:o,s=r.max,u=void 0===s?r.autoMinMax?i:1:s;if(a>=u)throw new RangeError("min option must be smaller than max option");for(var c=(u-a)/(i-n),h=0;h<t.length;h++)e[h]=(t[h]-n)*c+a;return e},si=" ".repeat(2),ui=" ".repeat(4);function ci(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.maxRows,n=void 0===r?15:r,i=e.maxColumns,o=void 0===i?10:i,a=e.maxNumSize,s=void 0===a?8:a;return"".concat(t.constructor.name," {\n").concat(si,"[\n").concat(ui).concat(hi(t,n,o,s),"\n").concat(si,"]\n").concat(si,"rows: ").concat(t.rows,"\n").concat(si,"columns: ").concat(t.columns,"\n}")}function hi(t,e,r,n){for(var i=t.rows,o=t.columns,a=Math.min(i,e),s=Math.min(o,r),u=[],c=0;c<a;c++){for(var h=[],f=0;f<s;f++)h.push(fi(t.get(c,f),n));u.push("".concat(h.join(" ")))}return s!==o&&(u[u.length-1]+=" ... ".concat(o-r," more columns")),a!==i&&u.push("... ".concat(i-e," more rows")),u.join("\n".concat(ui))}function fi(t,e){var r=String(t);if(r.length<=e)return r.padEnd(e," ");var n=t.toPrecision(e-2);if(n.length<=e)return n;var i=t.toExponential(e-2),o=i.indexOf("e"),a=i.slice(o);return i.slice(0,e-a.length)+a}function li(t){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function di(t,e,r){var n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function pi(t,e,r){var n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function gi(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function vi(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function yi(t,e){if("object"!==li(e))throw new TypeError("unexpected type for row indices");if(e.some((function(e){return e<0||e>=t.rows})))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function mi(t,e){if("object"!==li(e))throw new TypeError("unexpected type for column indices");if(e.some((function(e){return e<0||e>=t.columns})))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function bi(t,e,r,n,i){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(wi("startRow",e),wi("endRow",r),wi("startColumn",n),wi("endColumn",i),e>r||n>i||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||i<0||i>=t.columns)throw new RangeError("Submatrix indices are out of range")}function xi(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=0;n<t;n++)r.push(e);return r}function wi(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function Mi(t,e,r){for(var n=t.rows,i=t.columns,o=[],a=0;a<n;a++){for(var s=0,u=0,c=0,h=0;h<i;h++)s+=c=t.get(a,h)-r[a],u+=c*c;e?o.push((u-s*s/i)/(i-1)):o.push((u-s*s/i)/i)}return o}function Si(t,e,r){for(var n=t.rows,i=t.columns,o=[],a=0;a<i;a++){for(var s=0,u=0,c=0,h=0;h<n;h++)s+=c=t.get(h,a)-r[a],u+=c*c;e?o.push((u-s*s/n)/(n-1)):o.push((u-s*s/n)/n)}return o}function _i(t,e,r){for(var n=t.rows,i=t.columns,o=n*i,a=0,s=0,u=0,c=0;c<n;c++)for(var h=0;h<i;h++)a+=u=t.get(c,h)-r,s+=u*u;return e?(s-a*a/o)/(o-1):(s-a*a/o)/o}function ki(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}function Oi(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}function Ei(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}function ji(t){for(var e=[],r=0;r<t.rows;r++){for(var n=0,i=0;i<t.columns;i++)n+=Math.pow(t.get(r,i),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}function Ci(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}function Ai(t){for(var e=[],r=0;r<t.columns;r++){for(var n=0,i=0;i<t.rows;i++)n+=Math.pow(t.get(i,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}function Pi(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}function Ii(t){for(var e=t.size-1,r=0,n=0;n<t.columns;n++)for(var i=0;i<t.rows;i++)r+=Math.pow(t.get(i,n),2)/e;return Math.sqrt(r)}function Ti(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}function Ni(t,e){return(Ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Di(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ri(t);if(e){var i=Ri(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Bi(this,r)}}function Bi(t,e){return!e||"object"!==Li(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ri(t){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Li(t){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zi(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yi(t,e,r){return e&&Fi(t.prototype,e),r&&Fi(t,r),t}var Gi=function(){function t(){zi(this,t)}return Yi(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.call(this,e,r);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.push(this.get(e,r));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,r=-1,n=!0,i=!1;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);t++}return n}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,r=-1,n=!0,i=!1;t<this.rows&&n;){for(e=0,i=!1;e<this.columns&&!1===i;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(i=!0,r=e):(n=!1,i=!0);for(var o=e+1;o<this.rows;o++)0!==this.get(t,o)&&(n=!1);t++}return n}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,r=0;e<t.rows&&r<t.columns;){for(var n=e,i=e;i<t.rows;i++)t.get(i,r)>t.get(n,r)&&(n=i);if(0===t.get(n,r))r++;else{t.swapRows(e,n);for(var o=t.get(e,r),a=r;a<t.columns;a++)t.set(e,a,t.get(e,a)/o);for(var s=e+1;s<t.rows;s++){var u=t.get(s,r)/t.get(e,r);t.set(s,r,0);for(var c=r+1;c<t.columns;c++)t.set(s,c,t.get(s,c)-t.get(e,c)*u)}e++,r++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,r=t.rows,n=r-1;n>=0;)if(0===t.maxRow(n))n--;else{for(var i=0,o=!1;i<r&&!1===o;)1===t.get(n,i)?o=!0:i++;for(var a=0;a<n;a++)for(var s=t.get(a,i),u=i;u<e;u++){var c=t.get(a,u)-s*t.get(n,u);t.set(a,u,c)}n--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==Li(t))throw new TypeError("options must be an object");var e=t.rows,r=void 0===e?1:e,n=t.columns,i=void 0===n?1:n;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(i)||i<=0)throw new TypeError("columns must be a positive integer");for(var o=new Hi(this.rows*r,this.columns*i),a=0;a<r;a++)for(var s=0;s<i;s++)o.setSubMatrix(this,this.rows*a,this.columns*s);return o}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){di(this,t);for(var e=[],r=0;r<this.columns;r++)e.push(this.get(t,r));return e}},{key:"getRowVector",value:function(t){return Hi.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){di(this,t),e=gi(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}},{key:"swapRows",value:function(t,e){di(this,t),di(this,e);for(var r=0;r<this.columns;r++){var n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}},{key:"getColumn",value:function(t){pi(this,t);for(var e=[],r=0;r<this.rows;r++)e.push(this.get(r,t));return e}},{key:"getColumnVector",value:function(t){return Hi.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){pi(this,t),e=vi(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}},{key:"swapColumns",value:function(t,e){pi(this,t),pi(this,e);for(var r=0;r<this.rows;r++){var n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}},{key:"addRowVector",value:function(t){t=gi(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}},{key:"subRowVector",value:function(t){t=gi(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}},{key:"mulRowVector",value:function(t){t=gi(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}},{key:"divRowVector",value:function(t){t=gi(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}},{key:"addColumnVector",value:function(t){t=vi(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=vi(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=vi(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=vi(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}},{key:"mulRow",value:function(t,e){di(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}},{key:"mulColumn",value:function(t,e){pi(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}},{key:"max",value:function(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}},{key:"maxIndex",value:function(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}},{key:"min",value:function(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}},{key:"minIndex",value:function(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}},{key:"maxRow",value:function(t){di(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}},{key:"maxRowIndex",value:function(t){di(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}},{key:"minRow",value:function(t){di(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}},{key:"minRowIndex",value:function(t){di(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}},{key:"maxColumn",value:function(t){pi(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}},{key:"maxColumnIndex",value:function(t){pi(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}},{key:"minColumn",value:function(t){pi(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}},{key:"minColumnIndex",value:function(t){pi(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],r=0;r<t;r++)e.push(this.get(r,r));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",e=0;if("max"===t)return this.max();if("frobenius"===t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)e+=this.get(r,n)*this.get(r,n);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var r=this.to1DArray();if(r.length!==e.length)throw new RangeError("vectors do not have the same size");for(var n=0,i=0;i<r.length;i++)n+=r[i]*e[i];return n}},{key:"mmul",value:function(t){t=Hi.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.columns,i=new Hi(e,n),o=new Float64Array(r),a=0;a<n;a++){for(var s=0;s<r;s++)o[s]=t.get(s,a);for(var u=0;u<e;u++){for(var c=0,h=0;h<r;h++)c+=this.get(u,h)*o[h];i.set(u,a,c)}}return i}},{key:"strassen2x2",value:function(t){t=Hi.checkMatrix(t);var e=new Hi(2,2),r=this.get(0,0),n=t.get(0,0),i=this.get(0,1),o=t.get(0,1),a=this.get(1,0),s=t.get(1,0),u=this.get(1,1),c=t.get(1,1),h=(r+u)*(n+c),f=(a+u)*n,l=r*(o-c),d=u*(s-n),p=(r+i)*c,g=h+d-p+(i-u)*(s+c),v=l+p,y=f+d,m=h-f+l+(a-r)*(n+o);return e.set(0,0,g),e.set(0,1,v),e.set(1,0,y),e.set(1,1,m),e}},{key:"strassen3x3",value:function(t){t=Hi.checkMatrix(t);var e=new Hi(3,3),r=this.get(0,0),n=this.get(0,1),i=this.get(0,2),o=this.get(1,0),a=this.get(1,1),s=this.get(1,2),u=this.get(2,0),c=this.get(2,1),h=this.get(2,2),f=t.get(0,0),l=t.get(0,1),d=t.get(0,2),p=t.get(1,0),g=t.get(1,1),v=t.get(1,2),y=t.get(2,0),m=t.get(2,1),b=t.get(2,2),x=(r-o)*(-l+g),w=(-r+o+a)*(f-l+g),M=(o+a)*(-f+l),S=r*f,_=(-r+u+c)*(f-d+v),k=(-r+u)*(d-v),O=(u+c)*(-f+d),E=(-i+c+h)*(g+y-m),j=(i-h)*(g-m),C=i*y,A=(c+h)*(-y+m),P=(-i+a+s)*(v+y-b),I=(i-s)*(v-b),T=(a+s)*(-y+b),N=S+C+n*p,D=(r+n+i-o-a-c-h)*g+w+M+S+E+C+A,B=S+_+O+(r+n+i-a-s-u-c)*v+C+P+T,R=x+a*(-f+l+p-g-v-y+b)+w+S+C+P+I,L=x+w+M+S+s*m,z=C+P+I+T+o*d,F=S+_+k+c*(-f+d+p-g-v-y+m)+E+j+C,Y=E+j+C+A+u*l,G=S+_+k+O+h*b;return e.set(0,0,N),e.set(0,1,D),e.set(0,2,B),e.set(1,0,R),e.set(1,1,L),e.set(1,2,z),e.set(2,0,F),e.set(2,1,Y),e.set(2,2,G),e}},{key:"mmulStrassen",value:function(e){e=Hi.checkMatrix(e);var r=this.clone(),n=r.rows,i=r.columns,o=e.rows,a=e.columns;function s(e,r,n){var i=e.rows,o=e.columns;if(i===r&&o===n)return e;var a=t.zeros(r,n);return a=a.setSubMatrix(e,0,0)}i!==o&&console.warn("Multiplying ".concat(n," x ").concat(i," and ").concat(o," x ").concat(a," matrix: dimensions do not match."));var u=Math.max(n,o),c=Math.max(i,a);return function e(r,n,i,o){if(i<=512||o<=512)return r.mmul(n);i%2==1&&o%2==1?(r=s(r,i+1,o+1),n=s(n,i+1,o+1)):i%2==1?(r=s(r,i+1,o),n=s(n,i+1,o)):o%2==1&&(r=s(r,i,o+1),n=s(n,i,o+1));var a=parseInt(r.rows/2,10),u=parseInt(r.columns/2,10),c=r.subMatrix(0,a-1,0,u-1),h=n.subMatrix(0,a-1,0,u-1),f=r.subMatrix(0,a-1,u,r.columns-1),l=n.subMatrix(0,a-1,u,n.columns-1),d=r.subMatrix(a,r.rows-1,0,u-1),p=n.subMatrix(a,n.rows-1,0,u-1),g=r.subMatrix(a,r.rows-1,u,r.columns-1),v=n.subMatrix(a,n.rows-1,u,n.columns-1),y=e(t.add(c,g),t.add(h,v),a,u),m=e(t.add(d,g),h,a,u),b=e(c,t.sub(l,v),a,u),x=e(g,t.sub(p,h),a,u),w=e(t.add(c,f),v,a,u),M=e(t.sub(d,c),t.add(h,l),a,u),S=e(t.sub(f,g),t.add(p,v),a,u),_=t.add(y,x);_.sub(w),_.add(S);var k=t.add(b,w),O=t.add(m,x),E=t.sub(y,m);E.add(b),E.add(M);var j=t.zeros(2*_.rows,2*_.columns);return(j=(j=(j=(j=j.setSubMatrix(_,0,0)).setSubMatrix(k,_.rows,0)).setSubMatrix(O,0,_.columns)).setSubMatrix(E,_.rows,_.columns)).subMatrix(0,i-1,0,o-1)}(r=s(r,u,c),e=s(e,u,c),u,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==Li(t))throw new TypeError("options must be an object");var e=t.min,r=void 0===e?0:e,n=t.max,i=void 0===n?1:n;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(r>=i)throw new RangeError("min must be smaller than max");for(var o=new Hi(this.rows,this.columns),a=0;a<this.rows;a++){var s=this.getRow(a);ai(s,{min:r,max:i,output:s}),o.setRow(a,s)}return o}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==Li(t))throw new TypeError("options must be an object");var e=t.min,r=void 0===e?0:e,n=t.max,i=void 0===n?1:n;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(i))throw new TypeError("max must be a number");if(r>=i)throw new RangeError("min must be smaller than max");for(var o=new Hi(this.rows,this.columns),a=0;a<this.columns;a++){var s=this.getColumn(a);ai(s,{min:r,max:i,output:s}),o.setColumn(a,s)}return o}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var r=0;r<t;r++){var n=this.get(e,r),i=this.get(e,this.columns-1-r);this.set(e,r,i),this.set(e,this.columns-1-r,n)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var r=0;r<t;r++){var n=this.get(r,e),i=this.get(this.rows-1-r,e);this.set(r,e,i),this.set(this.rows-1-r,e,n)}return this}},{key:"kroneckerProduct",value:function(t){t=Hi.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,i=t.columns,o=new Hi(e*n,r*i),a=0;a<e;a++)for(var s=0;s<r;s++)for(var u=0;u<n;u++)for(var c=0;c<i;c++)o.set(n*a+u,i*s+c,this.get(a,s)*t.get(u,c));return o}},{key:"transpose",value:function(){for(var t=new Hi(this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qi,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,r,n){bi(this,t,e,r,n);for(var i=new Hi(e-t+1,n-r+1),o=t;o<=e;o++)for(var a=r;a<=n;a++)i.set(o-t,a-r,this.get(o,a));return i}},{key:"subMatrixRow",value:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var n=new Hi(t.length,r-e+1),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(t[i]<0||t[i]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[i]));n.set(i,o-e,this.get(t[i],o))}return n}},{key:"subMatrixColumn",value:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var n=new Hi(r-e+1,t.length),i=0;i<t.length;i++)for(var o=e;o<=r;o++){if(t[i]<0||t[i]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[i]));n.set(o-e,i,this.get(o,t[i]))}return n}},{key:"setSubMatrix",value:function(t,e,r){bi(this,e,e+(t=Hi.checkMatrix(t)).rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var i=0;i<t.columns;i++)this.set(e+n,r+i,t.get(n,i));return this}},{key:"selection",value:function(t,e){for(var r=function(t,e,r){return{row:yi(t,e),column:mi(t,r)}}(this,t,e),n=new Hi(t.length,e.length),i=0;i<r.row.length;i++)for(var o=r.row[i],a=0;a<r.column.length;a++){var s=r.column[a];n.set(i,a,this.get(o,s))}return n}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}},{key:"clone",value:function(){for(var t=new Hi(this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=xi(t.rows),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}(this);case"column":return function(t){for(var e=xi(t.columns),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}(this);case void 0:return function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=xi(t.rows,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}(this);case"column":return function(t){for(var e=xi(t.columns,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}(this);case void 0:return function(t){for(var e=1,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e*=t.get(r,n);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var r=0;r<this.rows;r++)e[r]/=this.columns;return e;case"column":for(var n=0;n<this.columns;n++)e[n]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===Li(t)&&(e=t,t=void 0),"object"!==Li(e))throw new TypeError("options must be an object");var r=e,n=r.unbiased,i=void 0===n||n,o=r.mean,a=void 0===o?this.mean(t):o;if("boolean"!=typeof i)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return Mi(this,i,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return Si(this,i,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return _i(this,i,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"===Li(t)&&(e=t,t=void 0);var r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(var n=0;n<r.length;n++)r[n]=Math.sqrt(r[n]);return r}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===Li(t)&&(e=t,t=void 0),"object"!==Li(e))throw new TypeError("options must be an object");var r=e,n=r.center,i=void 0===n?this.mean(t):n;switch(t){case"row":if(!Array.isArray(i))throw new TypeError("center must be an array");return ki(this,i),this;case"column":if(!Array.isArray(i))throw new TypeError("center must be an array");return Oi(this,i),this;case void 0:if("number"!=typeof i)throw new TypeError("center must be a number");return Ei(this,i),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===Li(t)&&(e=t,t=void 0),"object"!==Li(e))throw new TypeError("options must be an object");var r=e.scale;switch(t){case"row":if(void 0===r)r=ji(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return Ci(this,r),this;case"column":if(void 0===r)r=Ai(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return Pi(this,r),this;case void 0:if(void 0===r)r=Ii(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return Ti(this,r),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return ci(this,t)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");for(var n=new Hi(t,e),i=0;i<t;i++)for(var o=0;o<e;o++)n.set(i,o,r[i*e+o]);return n}},{key:"rowVector",value:function(t){for(var e=new Hi(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}},{key:"columnVector",value:function(t){for(var e=new Hi(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}},{key:"zeros",value:function(t,e){return new Hi(t,e)}},{key:"ones",value:function(t,e){return new Hi(t,e).fill(1)}},{key:"rand",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==Li(r))throw new TypeError("options must be an object");for(var n=r.random,i=void 0===n?Math.random:n,o=new Hi(t,e),a=0;a<t;a++)for(var s=0;s<e;s++)o.set(a,s,i());return o}},{key:"randInt",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==Li(r))throw new TypeError("options must be an object");var n=r.min,i=void 0===n?0:n,o=r.max,a=void 0===o?1e3:o,s=r.random,u=void 0===s?Math.random:s;if(!Number.isInteger(i))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(i>=a)throw new RangeError("min must be smaller than max");for(var c=a-i,h=new Hi(t,e),f=0;f<t;f++)for(var l=0;l<e;l++){var d=i+Math.round(u()*c);h.set(f,l,d)}return h}},{key:"eye",value:function(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=Math.min(t,e),i=this.zeros(t,e),o=0;o<n;o++)i.set(o,o,r);return i}},{key:"diag",value:function(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var i=Math.min(n,e,r),o=this.zeros(e,r),a=0;a<i;a++)o.set(a,a,t[a]);return o}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new Hi(r,n),o=0;o<r;o++)for(var a=0;a<n;a++)i.set(o,a,Math.min(t.get(o,a),e.get(o,a)));return i}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,i=new this(r,n),o=0;o<r;o++)for(var a=0;a<n;a++)i.set(o,a,Math.max(t.get(o,a),e.get(o,a)));return i}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new Hi(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function qi(t,e){return t-e}Gi.prototype.klass="Matrix","undefined"!=typeof Symbol&&(Gi.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return ci(this)}),Gi.random=Gi.rand,Gi.randomInt=Gi.randInt,Gi.diagonal=Gi.diag,Gi.prototype.diagonal=Gi.prototype.diag,Gi.identity=Gi.eye,Gi.prototype.negate=Gi.prototype.neg,Gi.prototype.tensorProduct=Gi.prototype.kroneckerProduct;var Xi,Vi,Hi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ni(t,e)}(r,t);var e=Di(r);function r(t,n){var i;if(zi(this,r),i=e.call(this),r.isMatrix(t))return Bi(i,t.clone());if(Number.isInteger(t)&&t>0){if(i.data=[],!(Number.isInteger(n)&&n>0))throw new TypeError("nColumns must be a positive integer");for(var o=0;o<t;o++)i.data.push(new Float64Array(n))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var a=t;if(t=a.length,"number"!=typeof(n=a[0].length)||0===n)throw new TypeError("Data must be a 2D array with at least one element");i.data=[];for(var s=0;s<t;s++){if(a[s].length!==n)throw new RangeError("Inconsistent array dimensions");i.data.push(Float64Array.from(a[s]))}}return i.rows=t,i.columns=n,i}return Yi(r,[{key:"set",value:function(t,e,r){return this.data[t][e]=r,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){if(di(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),di(this,t,!0),e=Float64Array.from(gi(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){if(pi(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++){for(var r=new Float64Array(this.columns-1),n=0;n<t;n++)r[n]=this.data[e][n];for(var i=t+1;i<this.columns;i++)r[i-1]=this.data[e][i];this.data[e]=r}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),pi(this,t,!0),e=vi(this,e);for(var r=0;r<this.rows;r++){for(var n=new Float64Array(this.columns+1),i=0;i<t;i++)n[i]=this.data[r][i];for(n[i++]=e[r];i<this.columns+1;i++)n[i]=this.data[r][i-1];this.data[r]=n}return this.columns+=1,this}}]),r}(Gi);function Ui(t){return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Zi(t,e){return(Zi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function $i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Qi(t);if(e){var i=Qi(this).constructor;r=Reflect.construct(n,arguments,i)}else r=n.apply(this,arguments);return Ki(this,r)}}function Ki(t,e){return!e||"object"!==Ui(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Qi(t){return(Qi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Vi=Hi,(Xi=Gi).prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},Xi.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},Xi.prototype.addM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},Xi.add=function(t,e){return new Vi(t).add(e)},Xi.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},Xi.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},Xi.prototype.subM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},Xi.sub=function(t,e){return new Vi(t).sub(e)},Xi.prototype.subtract=Xi.prototype.sub,Xi.prototype.subtractS=Xi.prototype.subS,Xi.prototype.subtractM=Xi.prototype.subM,Xi.subtract=Xi.sub,Xi.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},Xi.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},Xi.prototype.mulM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},Xi.mul=function(t,e){return new Vi(t).mul(e)},Xi.prototype.multiply=Xi.prototype.mul,Xi.prototype.multiplyS=Xi.prototype.mulS,Xi.prototype.multiplyM=Xi.prototype.mulM,Xi.multiply=Xi.mul,Xi.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},Xi.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},Xi.prototype.divM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},Xi.div=function(t,e){return new Vi(t).div(e)},Xi.prototype.divide=Xi.prototype.div,Xi.prototype.divideS=Xi.prototype.divS,Xi.prototype.divideM=Xi.prototype.divM,Xi.divide=Xi.div,Xi.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},Xi.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},Xi.prototype.modM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},Xi.mod=function(t,e){return new Vi(t).mod(e)},Xi.prototype.modulus=Xi.prototype.mod,Xi.prototype.modulusS=Xi.prototype.modS,Xi.prototype.modulusM=Xi.prototype.modM,Xi.modulus=Xi.mod,Xi.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},Xi.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},Xi.prototype.andM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},Xi.and=function(t,e){return new Vi(t).and(e)},Xi.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},Xi.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},Xi.prototype.orM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},Xi.or=function(t,e){return new Vi(t).or(e)},Xi.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},Xi.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},Xi.prototype.xorM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},Xi.xor=function(t,e){return new Vi(t).xor(e)},Xi.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},Xi.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},Xi.prototype.leftShiftM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},Xi.leftShift=function(t,e){return new Vi(t).leftShift(e)},Xi.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},Xi.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},Xi.prototype.signPropagatingRightShiftM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},Xi.signPropagatingRightShift=function(t,e){return new Vi(t).signPropagatingRightShift(e)},Xi.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},Xi.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},Xi.prototype.rightShiftM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},Xi.rightShift=function(t,e){return new Vi(t).rightShift(e)},Xi.prototype.zeroFillRightShift=Xi.prototype.rightShift,Xi.prototype.zeroFillRightShiftS=Xi.prototype.rightShiftS,Xi.prototype.zeroFillRightShiftM=Xi.prototype.rightShiftM,Xi.zeroFillRightShift=Xi.rightShift,Xi.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},Xi.not=function(t){return new Vi(t).not()},Xi.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},Xi.abs=function(t){return new Vi(t).abs()},Xi.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},Xi.acos=function(t){return new Vi(t).acos()},Xi.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},Xi.acosh=function(t){return new Vi(t).acosh()},Xi.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},Xi.asin=function(t){return new Vi(t).asin()},Xi.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},Xi.asinh=function(t){return new Vi(t).asinh()},Xi.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},Xi.atan=function(t){return new Vi(t).atan()},Xi.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},Xi.atanh=function(t){return new Vi(t).atanh()},Xi.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},Xi.cbrt=function(t){return new Vi(t).cbrt()},Xi.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},Xi.ceil=function(t){return new Vi(t).ceil()},Xi.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},Xi.clz32=function(t){return new Vi(t).clz32()},Xi.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},Xi.cos=function(t){return new Vi(t).cos()},Xi.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},Xi.cosh=function(t){return new Vi(t).cosh()},Xi.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},Xi.exp=function(t){return new Vi(t).exp()},Xi.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},Xi.expm1=function(t){return new Vi(t).expm1()},Xi.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},Xi.floor=function(t){return new Vi(t).floor()},Xi.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},Xi.fround=function(t){return new Vi(t).fround()},Xi.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},Xi.log=function(t){return new Vi(t).log()},Xi.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},Xi.log1p=function(t){return new Vi(t).log1p()},Xi.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},Xi.log10=function(t){return new Vi(t).log10()},Xi.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},Xi.log2=function(t){return new Vi(t).log2()},Xi.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},Xi.round=function(t){return new Vi(t).round()},Xi.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},Xi.sign=function(t){return new Vi(t).sign()},Xi.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},Xi.sin=function(t){return new Vi(t).sin()},Xi.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},Xi.sinh=function(t){return new Vi(t).sinh()},Xi.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},Xi.sqrt=function(t){return new Vi(t).sqrt()},Xi.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},Xi.tan=function(t){return new Vi(t).tan()},Xi.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},Xi.tanh=function(t){return new Vi(t).tanh()},Xi.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},Xi.trunc=function(t){return new Vi(t).trunc()},Xi.pow=function(t,e){return new Vi(t).pow(e)},Xi.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},Xi.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t));return this},Xi.prototype.powM=function(t){if(t=Vi.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t.get(e,r)));return this};var Ji=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zi(t,e)}(o,t);var e,r,n,i=$i(o);function o(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).data=t,e.rows=t.length,e.columns=t[0].length,e}return e=o,(r=[{key:"set",value:function(t,e,r){return this.data[t][e]=r,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])&&Wi(e.prototype,r),n&&Wi(e,n),o}(Gi);function to(t,e){var r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}function eo(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ro(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var no=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};eo(this,t);var n,i=(e=Ji.checkMatrix(e)).rows,o=e.columns,a=r.computeLeftSingularVectors,s=void 0===a||a,u=r.computeRightSingularVectors,c=void 0===u||u,h=r.autoTranspose,f=void 0!==h&&h,l=Boolean(s),d=Boolean(c),p=!1;if(i<o)if(f){i=(n=e.transpose()).rows,o=n.columns,p=!0;var g=l;l=d,d=g}else n=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else n=e.clone();for(var v=Math.min(i,o),y=Math.min(i+1,o),m=new Float64Array(y),b=new Hi(i,v),x=new Hi(o,o),w=new Float64Array(o),M=new Float64Array(i),S=new Float64Array(y),_=0;_<y;_++)S[_]=_;for(var k=Math.min(i-1,o),O=Math.max(0,Math.min(o-2,i)),E=Math.max(k,O),j=0;j<E;j++){if(j<k){m[j]=0;for(var C=j;C<i;C++)m[j]=to(m[j],n.get(C,j));if(0!==m[j]){n.get(j,j)<0&&(m[j]=-m[j]);for(var A=j;A<i;A++)n.set(A,j,n.get(A,j)/m[j]);n.set(j,j,n.get(j,j)+1)}m[j]=-m[j]}for(var P=j+1;P<o;P++){if(j<k&&0!==m[j]){for(var I=0,T=j;T<i;T++)I+=n.get(T,j)*n.get(T,P);I=-I/n.get(j,j);for(var N=j;N<i;N++)n.set(N,P,n.get(N,P)+I*n.get(N,j))}w[P]=n.get(j,P)}if(l&&j<k)for(var D=j;D<i;D++)b.set(D,j,n.get(D,j));if(j<O){w[j]=0;for(var B=j+1;B<o;B++)w[j]=to(w[j],w[B]);if(0!==w[j]){w[j+1]<0&&(w[j]=0-w[j]);for(var R=j+1;R<o;R++)w[R]/=w[j];w[j+1]+=1}if(w[j]=-w[j],j+1<i&&0!==w[j]){for(var L=j+1;L<i;L++)M[L]=0;for(var z=j+1;z<i;z++)for(var F=j+1;F<o;F++)M[z]+=w[F]*n.get(z,F);for(var Y=j+1;Y<o;Y++)for(var G=-w[Y]/w[j+1],q=j+1;q<i;q++)n.set(q,Y,n.get(q,Y)+G*M[q])}if(d)for(var X=j+1;X<o;X++)x.set(X,j,w[X])}}var V=Math.min(o,i+1);if(k<o&&(m[k]=n.get(k,k)),i<V&&(m[V-1]=0),O+1<V&&(w[O]=n.get(O,V-1)),w[V-1]=0,l){for(var H=k;H<v;H++){for(var U=0;U<i;U++)b.set(U,H,0);b.set(H,H,1)}for(var W=k-1;W>=0;W--)if(0!==m[W]){for(var Z=W+1;Z<v;Z++){for(var $=0,K=W;K<i;K++)$+=b.get(K,W)*b.get(K,Z);$=-$/b.get(W,W);for(var Q=W;Q<i;Q++)b.set(Q,Z,b.get(Q,Z)+$*b.get(Q,W))}for(var J=W;J<i;J++)b.set(J,W,-b.get(J,W));b.set(W,W,1+b.get(W,W));for(var tt=0;tt<W-1;tt++)b.set(tt,W,0)}else{for(var et=0;et<i;et++)b.set(et,W,0);b.set(W,W,1)}}if(d)for(var rt=o-1;rt>=0;rt--){if(rt<O&&0!==w[rt])for(var nt=rt+1;nt<o;nt++){for(var it=0,ot=rt+1;ot<o;ot++)it+=x.get(ot,rt)*x.get(ot,nt);it=-it/x.get(rt+1,rt);for(var at=rt+1;at<o;at++)x.set(at,nt,x.get(at,nt)+it*x.get(at,rt))}for(var st=0;st<o;st++)x.set(st,rt,0);x.set(rt,rt,1)}for(var ut=V-1,ct=Number.EPSILON;V>0;){var ht=void 0,ft=void 0;for(ht=V-2;ht>=-1&&-1!==ht;ht--){var lt=Number.MIN_VALUE+ct*Math.abs(m[ht]+Math.abs(m[ht+1]));if(Math.abs(w[ht])<=lt||Number.isNaN(w[ht])){w[ht]=0;break}}if(ht===V-2)ft=4;else{var dt=void 0;for(dt=V-1;dt>=ht&&dt!==ht;dt--){var pt=(dt!==V?Math.abs(w[dt]):0)+(dt!==ht+1?Math.abs(w[dt-1]):0);if(Math.abs(m[dt])<=ct*pt){m[dt]=0;break}}dt===ht?ft=3:dt===V-1?ft=1:(ft=2,ht=dt)}switch(ht++,ft){case 1:var gt=w[V-2];w[V-2]=0;for(var vt=V-2;vt>=ht;vt--){var yt=to(m[vt],gt),mt=m[vt]/yt,bt=gt/yt;if(m[vt]=yt,vt!==ht&&(gt=-bt*w[vt-1],w[vt-1]=mt*w[vt-1]),d)for(var xt=0;xt<o;xt++)yt=mt*x.get(xt,vt)+bt*x.get(xt,V-1),x.set(xt,V-1,-bt*x.get(xt,vt)+mt*x.get(xt,V-1)),x.set(xt,vt,yt)}break;case 2:var wt=w[ht-1];w[ht-1]=0;for(var Mt=ht;Mt<V;Mt++){var St=to(m[Mt],wt),_t=m[Mt]/St,kt=wt/St;if(m[Mt]=St,wt=-kt*w[Mt],w[Mt]=_t*w[Mt],l)for(var Ot=0;Ot<i;Ot++)St=_t*b.get(Ot,Mt)+kt*b.get(Ot,ht-1),b.set(Ot,ht-1,-kt*b.get(Ot,Mt)+_t*b.get(Ot,ht-1)),b.set(Ot,Mt,St)}break;case 3:var Et=Math.max(Math.abs(m[V-1]),Math.abs(m[V-2]),Math.abs(w[V-2]),Math.abs(m[ht]),Math.abs(w[ht])),jt=m[V-1]/Et,Ct=m[V-2]/Et,At=w[V-2]/Et,Pt=m[ht]/Et,It=w[ht]/Et,Tt=((Ct+jt)*(Ct-jt)+At*At)/2,Nt=jt*At*(jt*At),Dt=0;0===Tt&&0===Nt||(Dt=Nt/(Tt+(Dt=Tt<0?0-Math.sqrt(Tt*Tt+Nt):Math.sqrt(Tt*Tt+Nt))));for(var Bt=(Pt+jt)*(Pt-jt)+Dt,Rt=Pt*It,Lt=ht;Lt<V-1;Lt++){var zt=to(Bt,Rt);0===zt&&(zt=Number.MIN_VALUE);var Ft=Bt/zt,Yt=Rt/zt;if(Lt!==ht&&(w[Lt-1]=zt),Bt=Ft*m[Lt]+Yt*w[Lt],w[Lt]=Ft*w[Lt]-Yt*m[Lt],Rt=Yt*m[Lt+1],m[Lt+1]=Ft*m[Lt+1],d)for(var Gt=0;Gt<o;Gt++)zt=Ft*x.get(Gt,Lt)+Yt*x.get(Gt,Lt+1),x.set(Gt,Lt+1,-Yt*x.get(Gt,Lt)+Ft*x.get(Gt,Lt+1)),x.set(Gt,Lt,zt);if(0===(zt=to(Bt,Rt))&&(zt=Number.MIN_VALUE),Ft=Bt/zt,Yt=Rt/zt,m[Lt]=zt,Bt=Ft*w[Lt]+Yt*m[Lt+1],m[Lt+1]=-Yt*w[Lt]+Ft*m[Lt+1],Rt=Yt*w[Lt+1],w[Lt+1]=Ft*w[Lt+1],l&&Lt<i-1)for(var qt=0;qt<i;qt++)zt=Ft*b.get(qt,Lt)+Yt*b.get(qt,Lt+1),b.set(qt,Lt+1,-Yt*b.get(qt,Lt)+Ft*b.get(qt,Lt+1)),b.set(qt,Lt,zt)}w[V-2]=Bt,1;break;case 4:if(m[ht]<=0&&(m[ht]=m[ht]<0?-m[ht]:0,d))for(var Xt=0;Xt<=ut;Xt++)x.set(Xt,ht,-x.get(Xt,ht));for(;ht<ut&&!(m[ht]>=m[ht+1]);){var Vt=m[ht];if(m[ht]=m[ht+1],m[ht+1]=Vt,d&&ht<o-1)for(var Ht=0;Ht<o;Ht++)Vt=x.get(Ht,ht+1),x.set(Ht,ht+1,x.get(Ht,ht)),x.set(Ht,ht,Vt);if(l&&ht<i-1)for(var Ut=0;Ut<i;Ut++)Vt=b.get(Ut,ht+1),b.set(Ut,ht+1,b.get(Ut,ht)),b.set(Ut,ht,Vt);ht++}0,V--}}if(p){var Wt=x;x=b,b=Wt}this.m=i,this.n=o,this.s=m,this.U=b,this.V=x}var e,r,n;return e=t,(r=[{key:"solve",value:function(t){for(var e=t,r=this.threshold,n=this.s.length,i=Hi.zeros(n,n),o=0;o<n;o++)Math.abs(this.s[o])<=r?i.set(o,o,0):i.set(o,o,1/this.s[o]);for(var a=this.U,s=this.rightSingularVectors,u=s.mmul(i),c=s.rows,h=a.rows,f=Hi.zeros(c,h),l=0;l<c;l++)for(var d=0;d<h;d++){for(var p=0,g=0;g<n;g++)p+=u.get(l,g)*a.get(d,g);f.set(l,d,p)}return f.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(Hi.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,r=t.rows,n=t.columns,i=new Hi(r,this.s.length),o=0;o<r;o++)for(var a=0;a<n;a++)Math.abs(this.s[a])>e&&i.set(o,a,t.get(o,a)/this.s[a]);for(var s=this.U,u=s.rows,c=s.columns,h=new Hi(r,u),f=0;f<r;f++)for(var l=0;l<u;l++){for(var d=0,p=0;p<c;p++)d+=i.get(f,p)*s.get(l,p);h.set(f,l,d)}return h}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s,n=0,i=r.length;n<i;n++)r[n]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Hi.diag(this.s)}}])&&ro(e.prototype,r),n&&ro(e,n),t}(),io=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.linkDistance=50,e.scaledDistances=null,e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var t=this.nodes,e=this.edges,r=void 0===e?[]:e,n=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=n[0],void(t[0].y=n[1]);var i=this.linkDistance,o=Ht({nodes:t,edges:r},!1),a=Vt(o);this.handleInfinity(a);var s=Xt(a,i);this.scaledDistances=s;var u=this.runMDS();this.positions=u,u.forEach((function(e,r){t[r].x=e[0]+n[0],t[r].y=e[1]+n[1]}))}},e.prototype.runMDS=function(){var t=this.scaledDistances,e=Hi.mul(Hi.pow(t,2),-.5),r=e.mean("row"),n=e.mean("column"),i=e.mean();e.add(i).subRowVector(r).subColumnVector(n);var o=new no(e),a=Hi.sqrt(o.diagonalMatrix).diagonal();return o.leftSingularVectors.toJSON().map((function(t){return Hi.mul([t],[a]).toJSON()[0].splice(0,2)}))},e.prototype.handleInfinity=function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(r,n){r.forEach((function(r,i){r===1/0&&(t[n][i]=e)}))}))},e}(Yr),oo=function(){function t(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}return t.prototype.layout=function(){var t=this.dimension,e=this.distances,r=this.linkDistance;try{var n=Hi.mul(Hi.pow(e,2),-.5),i=n.mean("row"),o=n.mean("column"),a=n.mean();n.add(a).subRowVector(i).subColumnVector(o);var s=new no(n),u=Hi.sqrt(s.diagonalMatrix).diagonal();return s.leftSingularVectors.toJSON().map((function(e){return Hi.mul([e],[u]).toJSON()[0].splice(0,t)}))}catch(t){for(var c=[],h=0;h<e.length;h++){var f=Math.random()*r,l=Math.random()*r;c.push([f,l])}return c}},t}(),ao=function(){function t(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}return t.prototype.layout=function(){var t=this.positions,e=[],r=this.iterations,n=this.width/10;this.maxDisplace=n,this.disp=e;for(var i=0;i<r;i++)t.forEach((function(t,r){e[r]={x:0,y:0}})),this.getRepulsion(),this.updatePositions();return t},t.prototype.getRepulsion=function(){var t=this,e=t.positions,r=t.nodes,n=t.disp,i=t.k,o=t.radii||[];e.forEach((function(a,s){n[s]={x:0,y:0},e.forEach((function(e,u){if(s!==u&&o[s]===o[u]){var c=a[0]-e[0],h=a[1]-e[1],f=Math.sqrt(c*c+h*h);if(0===f){f=1;var l=s>u?1:-1;c=.01*l,h=.01*l}if(f<t.nodeSizeFunc(r[s])/2+t.nodeSizeFunc(r[u])/2){var d=i*i/f;n[s].x+=c/f*d,n[s].y+=h/f*d}}}))}))},t.prototype.updatePositions=function(){var t=this.positions,e=this.disp,r=this.speed,n=this.strictRadial,i=this.focusID,o=this.maxDisplace||this.width/10;n&&e.forEach((function(e,r){var n=t[r][0]-t[i][0],o=t[r][1]-t[i][1],a=Math.sqrt(n*n+o*o),s=o/a,u=-n/a,c=Math.sqrt(e.x*e.x+e.y*e.y),h=Math.acos((s*e.x+u*e.y)/c);h>Math.PI/2&&(h-=Math.PI/2,s*=-1,u*=-1);var f=Math.cos(h)*c;e.x=s*f,e.y=u*f}));var a=this.radii;t.forEach((function(s,u){if(u!==i){var c=Math.sqrt(e[u].x*e[u].x+e[u].y*e[u].y);if(c>0&&u!==i){var h=Math.min(o*(r/800),c);if(s[0]+=e[u].x/c*h,s[1]+=e[u].y/c*h,n){var f=s[0]-t[i][0],l=s[1]-t[i][1],d=Math.sqrt(f*f+l*l);f=f/d*a[u],l=l/d*a[u],s[0]=t[i][0]+f,s[1]=t[i][1]+l}}}}))},t}();function so(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var uo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.edges||[],n=t.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=n[0],void(e[0].y=n[1]);var i=t.linkDistance,o=null;if(_()(t.focusNode)){for(var a=!1,s=0;s<e.length;s++)e[s].id===t.focusNode&&(o=e[s],t.focusNode=o,a=!0,s=e.length);a||(o=null)}else o=t.focusNode;o||(o=e[0],t.focusNode=o);var u,c,h,f=(u=e,c=o.id,h=-1,u.forEach((function(t,e){t.id===c&&(h=e)})),h);t.focusIndex=f;var l=Ht({nodes:e,edges:r},!1),d=Vt(l),p=t.maxToFocus(d,f);t.handleInfinity(d,f,p+1),t.distances=d;var g=d[f];t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var v=t.width||500,y=t.height||500,b=v-n[0]>n[0]?n[0]:v-n[0],x=y-n[1]>n[1]?n[1]:y-n[1];0===b&&(b=v/2),0===x&&(x=y/2);var w=x>b?b:x,S=Math.max.apply(Math,g),k=[];g.forEach((function(e,r){t.unitRadius||(t.unitRadius=w/S),k[r]=e*t.unitRadius})),t.radii=k;var O=t.eIdealDisMatrix();t.eIdealDistances=O;var E=function(t){for(var e=t.length,r=t[0].length,n=[],i=0;i<e;i++){for(var o=[],a=0;a<r;a++)0!==t[i][a]?o.push(1/(t[i][a]*t[i][a])):o.push(0);n.push(o)}return n}(O);t.weights=E;var j=new oo({distances:O,linkDistance:i}).layout();j.forEach((function(t){P(t[0])&&(t[0]=Math.random()*i),P(t[1])&&(t[1]=Math.random()*i)})),t.positions=j,j.forEach((function(t,r){e[r].x=t[0]+n[0],e[r].y=t[1]+n[1]})),j.forEach((function(t){t[0]-=j[f][0],t[1]-=j[f][1]})),t.run();var C=t.preventOverlap,A=t.nodeSize,I=t.strictRadial;if(C){var T,N=t.nodeSpacing;T=M()(N)?function(){return N}:Un()(N)?N:function(){return 0};var D={nodeSizeFunc:A?m()(A)?function(t){return(A[0]>A[1]?A[0]:A[1])+T(t)}:function(t){return A+T(t)}:function(t){return t.size?m()(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+T(t):t.size+T(t):10+T(t)},adjMatrix:l,positions:j,radii:k,height:y,width:v,strictRadial:I,focusID:f,iterations:t.maxPreventOverlapIteration||200,k:j.length/4.5,nodes:e},B=new ao(D);j=B.layout()}j.forEach((function(t,r){e[r].x=t[0]+n[0],e[r].y=t[1]+n[1]}))}},e.prototype.run=function(){for(var t=this.maxIteration,e=this.positions||[],r=this.weights||[],n=this.eIdealDistances||[],i=this.radii||[],o=0;o<=t;o++){var a=o/t;this.oneIteration(a,e,i,n,r)}},e.prototype.oneIteration=function(t,e,r,n,i){var o=1-t,a=this.focusIndex;e.forEach((function(s,u){var c=so(s,[0,0]),h=0===c?0:1/c;if(u!==a){var f=0,l=0,d=0;e.forEach((function(t,e){if(u!==e){var r=so(s,t),o=0===r?0:1/r,a=n[e][u];d+=i[u][e],f+=i[u][e]*(t[0]+a*(s[0]-t[0])*o),l+=i[u][e]*(t[1]+a*(s[1]-t[1])*o)}}));var p=0===r[u]?0:1/r[u];d*=o,d+=t*p*p,f*=o,f+=t*p*s[0]*h,s[0]=f/d,l*=o,l+=t*p*s[1]*h,s[1]=l/d}}))},e.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var r=t.distances,n=t.linkDistance,i=t.radii||[],o=t.unitRadius||50,a=[];return r&&r.forEach((function(r,s){var u=[];r.forEach((function(r,a){if(s===a)u.push(0);else if(i[s]===i[a])if("data"===t.sortBy)u.push(r*(Math.abs(s-a)*t.sortStrength)/(i[s]/o));else if(t.sortBy){var c=e[s][t.sortBy]||0,h=e[a][t.sortBy]||0;_()(c)&&(c=c.charCodeAt(0)),_()(h)&&(h=h.charCodeAt(0)),u.push(r*(Math.abs(c-h)*t.sortStrength)/(i[s]/o))}else u.push(r*n/(i[s]/o));else{var f=(n+o)/2;u.push(r*f)}})),a.push(u)})),a},e.prototype.handleInfinity=function(t,e,r){for(var n=t.length,i=0;i<n;i++)if(t[e][i]===1/0){t[e][i]=r,t[i][e]=r;for(var o=0;o<n;o++)t[i][o]!==1/0&&t[e][o]===1/0&&(t[e][o]=r+t[i][o],t[o][e]=r+t[i][o])}for(i=0;i<n;i++)if(i!==e)for(o=0;o<n;o++)if(t[i][o]===1/0){var a=Math.abs(t[e][i]-t[e][o]);a=0===a?1:a,t[i][o]=a}},e.prototype.maxToFocus=function(t,e){for(var r=0,n=0;n<t[e].length;n++)t[e][n]!==1/0&&(r=t[e][n]>r?t[e][n]:r);return r},e}(Yr),co=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.width=300,e.height=300,e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.center;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+r[0],e.y=.9*(Math.random()-.5)*t.height+r[1]}))},e}(Yr),ho={circular:Vr,concentric:Hr,dagre:Zr,force:Kn,g6force:Jn,comboForce:function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.2,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=void 0,e.comboCollideStrength=void 0,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=.5,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.nodeIdxMap={},e.comboMap={},e.previousLayouted=!1,e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.2,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var t=this.nodes,e=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=e[0],void(t[0].y=e[1]);this.initVals(),this.run(),this.onLayoutEnd()}},e.prototype.run=function(){var t=this,e=t.nodes,r=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var n=t.center,i=t.velocityDecay,o=t.comboMap;t.previousLayouted||t.initPos(o);for(var a=function(r){var n=[];e.forEach((function(t,e){n[e]={x:0,y:0}})),t.applyCalculate(n),t.applyComboCenterForce(n),e.forEach((function(t,e){Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(t.y)&&(t.x+=n[e].x*i,t.y+=n[e].y*i)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},s=0;s<r;s++)a();var u=[0,0];e.forEach((function(t){Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(t.y)&&(u[0]+=t.x,u[1]+=t.y)})),u[0]/=e.length,u[1]/=e.length;var c=[n[0]-u[0],n[1]-u[1]];e.forEach((function(t,e){Object(ht.isNumber)(t.x)&&Object(ht.isNumber)(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=o[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0},e.prototype.initVals=function(){var t=this.edges,e=this.nodes,r=this.combos,n={},i={},o={};e.forEach((function(t,e){i[t.id]=t,o[t.id]=e})),this.nodeMap=i,this.nodeIdxMap=o;var a={};r.forEach((function(t){a[t.id]=t})),this.oriComboMap=a,this.comboMap=this.getComboMap();var s=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||s,this.preventNodeOverlap=this.preventNodeOverlap||s;var u=this.collideStrength;u&&(this.comboCollideStrength=u,this.nodeCollideStrength=u);for(var c=0;c<t.length;++c)n[t[c].source]?n[t[c].source]++:n[t[c].source]=1,n[t[c].target]?n[t[c].target]++:n[t[c].target]=1;var h=[];for(c=0;c<t.length;++c)h[c]=n[t[c].source]/(n[t[c].source]+n[t[c].target]);this.bias=h;var f,l,d=this.nodeSize,p=this.nodeSpacing;if(l=Object(ht.isNumber)(p)?function(){return p}:Object(ht.isFunction)(p)?p:function(){return 0},this.nodeSpacing=l,d)if(Object(ht.isFunction)(d))f=function(t){return d(t)};else if(Object(ht.isArray)(d)){var g=(d[0]>d[1]?d[0]:d[1])/2;f=function(t){return g}}else{var v=d/2;f=function(t){return v}}else f=function(t){return t.size?Object(ht.isArray)(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:t.size/2:10};this.nodeSize=f;var y,m=this.comboSpacing;y=Object(ht.isNumber)(m)?function(){return m}:Object(ht.isFunction)(m)?m:function(){return 0},this.comboSpacing=y;var b,x=this.comboPadding;b=Object(ht.isNumber)(x)?function(){return x}:Object(ht.isArray)(x)?function(){return Math.max.apply(null,x)}:Object(ht.isFunction)(x)?x:function(){return 0},this.comboPadding=b;var w,M=this.linkDistance;M||(M=10),w=Object(ht.isNumber)(M)?function(t){return M}:M,this.linkDistance=w;var S,_=this.edgeStrength;_||(_=1),S=Object(ht.isNumber)(_)?function(t){return _}:_,this.edgeStrength=S;var k,O=this.nodeStrength;O||(O=30),k=Object(ht.isNumber)(O)?function(t){return O}:O,this.nodeStrength=k},e.prototype.initPos=function(t){this.nodes.forEach((function(e,r){if(e.comboId){var n=t[e.comboId];e.x=n.cx+100/(r+1),e.y=n.cy+100/(r+1)}else e.x=100/(r+1),e.y=100/(r+1)}))},e.prototype.getComboMap=function(){var t=this,e=t.nodeMap,r=t.nodeIdxMap,n=t.comboTrees,i=t.oriComboMap,o={};return(n||[]).forEach((function(n){var a=[];gr(n,(function(n){if("node"===n.itemType)return!0;if(!i[n.id])return!0;if(void 0===o[n.id]){var s={name:n.id,cx:0,cy:0,count:0,depth:t.oriComboMap[n.id].depth,children:[]};o[n.id]=s}var u=n.children;u&&u.forEach((function(t){if(!o[t.id]&&!e[t.id])return!0;a.push(t)}));var c=o[n.id];if(c.cx=0,c.cy=0,0===a.length){c.empty=!0;var h=i[n.id],f=Object.keys(e).length,l=n.id+"-visual-child-"+f,d={id:l,x:h.x,y:h.y,depth:c.depth+1,itemType:"node"};t.nodes.push(d),e[l]=d,r[l]=f,c.cx=h.x,c.cy=h.y,a.push(d)}return a.forEach((function(t){if(c.count++,"node"!==t.itemType){var r=o[t.id];return Object(ht.isNumber)(r.cx)&&(c.cx+=r.cx),void(Object(ht.isNumber)(r.cy)&&(c.cy+=r.cy))}var n=e[t.id];n&&(Object(ht.isNumber)(n.x)&&(c.cx+=n.x),Object(ht.isNumber)(n.y)&&(c.cy+=n.y))})),c.cx/=c.count,c.cy/=c.count,c.children=a,!0}))})),o},e.prototype.applyComboCenterForce=function(t){var e=this.gravity,r=this.comboGravity||e,n=this.alpha,i=this.comboTrees,o=this.nodeIdxMap,a=this.nodeMap,s=this.comboMap;(i||[]).forEach((function(e){gr(e,(function(e){if("node"===e.itemType)return!0;if(!s[e.id])return!0;var i=s[e.id],u=.5*(i.depth+1),c=i.cx,h=i.cy;return i.cx=0,i.cy=0,i.children.forEach((function(e){if("node"!==e.itemType){var f=s[e.id];return f&&Object(ht.isNumber)(f.cx)&&(i.cx+=f.cx),void(f&&Object(ht.isNumber)(f.cy)&&(i.cy+=f.cy))}var l=a[e.id],d=l.x-c||.005,p=l.y-h||.005,g=Math.sqrt(d*d+p*p),v=o[l.id],y=r*n/g*u;t[v].x-=d*y,t[v].y-=p*y,Object(ht.isNumber)(l.x)&&(i.cx+=l.x),Object(ht.isNumber)(l.y)&&(i.cy+=l.y)})),i.cx/=i.count,i.cy/=i.count,!0}))}))},e.prototype.applyCalculate=function(t){var e=this.comboMap,r=this.nodes,n={};r.forEach((function(t,e){r.forEach((function(r,i){if(!(e<i)){var o=t.x-r.x||.005,a=t.y-r.y||.005,s=o*o+a*a,u=Math.sqrt(s);s<1&&(s=u),n[t.id+"-"+r.id]={vx:o,vy:a,vl2:s,vl:u},n[r.id+"-"+t.id]={vx:-o,vy:-a,vl2:s,vl:u}}}))})),this.updateComboSizes(e),this.calRepulsive(t,n),this.calAttractive(t,n),this.preventComboOverlap&&this.comboNonOverlapping(t,e)},e.prototype.updateComboSizes=function(t){var e=this,r=e.comboTrees,n=e.nodeMap,i=e.nodeSize,o=e.comboSpacing,a=e.comboPadding;(r||[]).forEach((function(r){var s=[];gr(r,(function(r){if("node"===r.itemType)return!0;var u=t[r.id];if(u){var c=r.children;c&&c.forEach((function(e){(t[e.id]||n[e.id])&&s.push(e)})),u.minX=1/0,u.minY=1/0,u.maxX=-1/0,u.maxY=-1/0,s.forEach((function(t){if("node"!==t.itemType)return!0;var e=n[t.id];if(!e)return!0;var r=i(e),o=e.x-r,a=e.y-r,s=e.x+r,c=e.y+r;u.minX>o&&(u.minX=o),u.minY>a&&(u.minY=a),u.maxX<s&&(u.maxX=s),u.maxY<c&&(u.maxY=c)}));var h=e.oriComboMap[r.id].size||Q.defaultCombo.size;Object(ht.isArray)(h)&&(h=h[0]);var f=Math.max(u.maxX-u.minX,u.maxY-u.minY,h);return u.r=f/2+o(u)/2+a(u),!0}}))}))},e.prototype.comboNonOverlapping=function(t,e){var r=this.comboTree,n=this.comboCollideStrength,i=this.nodeIdxMap,o=this.nodeMap;gr(r,(function(r){if(e[r.id]||o[r.id]||"comboTreeRoot"===r.id){var a=r.children;return a&&a.length>1&&a.forEach((function(r,s){if("node"!==r.itemType){var u=e[r.id];u&&a.forEach((function(a,c){if(!(s<=c)&&"node"!==a.itemType){var h=e[a.id];if(h){var f=u.cx-h.cx||.005,l=u.cy-h.cy||.005,d=f*f+l*l,p=u.r,g=h.r,v=p+g,y=g*g,m=p*p;if(d<v*v){var b=r.children;if(!b||0===b.length)return;var x=a.children;if(!x||0===x.length)return;var w=Math.sqrt(d),M=(v-w)/w*n,S=f*M,_=l*M,k=y/(m+y),O=1-k;b.forEach((function(e){if("node"===e.itemType&&o[e.id]){var r=i[e.id];x.forEach((function(e){if("node"===e.itemType&&o[e.id]){var n=i[e.id];t[r].x+=S*k,t[r].y+=_*k,t[n].x-=S*O,t[n].y-=_*O}}))}}))}}}}))}})),!0}}))},e.prototype.calRepulsive=function(t,e){var r=this,n=r.nodes,i=r.width*r.optimizeRangeFactor,o=r.nodeStrength,a=r.alpha,s=r.nodeCollideStrength,u=r.preventNodeOverlap,c=r.nodeSize,h=r.nodeSpacing,f=r.depthRepulsiveForceScale,l=r.center;n.forEach((function(d,p){if(d.x&&d.y){if(l){var g=r.gravity,v=d.x-l[0]||.005,y=d.y-l[1]||.005,m=Math.sqrt(v*v+y*y);t[p].x-=v*g*a/m,t[p].y-=y*g*a/m}n.forEach((function(r,n){if(p!==n&&r.x&&r.y){var l=e[d.id+"-"+r.id],g=l.vl2,v=l.vl;if(!(v>i)){var y=e[d.id+"-"+r.id],m=y.vx,b=y.vy,x=Math.abs(r.depth-d.depth)+1||1;r.comboId!==d.comboId&&x++;var w=x?Math.pow(f,x):1,M=o(r)*a/g*w;if(t[p].x+=m*M,t[p].y+=b*M,p<n&&u){var S=c(d)+h(d),_=c(r)+h(r),k=S+_;if(g<k*k){var O=(k-v)/v*s,E=_*_,j=E/(S*S+E),C=m*O,A=b*O;t[p].x+=C*j,t[p].y+=A*j,j=1-j,t[n].x-=C*j,t[n].y-=A*j}}}}}))}}))},e.prototype.calAttractive=function(t,e){var r=this,n=r.edges,i=r.linkDistance,o=r.alpha,a=r.edgeStrength,s=r.bias,u=r.depthAttractiveForceScale;n.forEach((function(n,c){if(n.source&&n.target&&n.source!==n.target){var h=r.nodeIdxMap[n.source],f=r.nodeIdxMap[n.target],l=r.nodeMap[n.source],d=r.nodeMap[n.target],p=Math.abs(l.depth-d.depth);l.comboId===d.comboId&&(p/=2);var g=p?Math.pow(u,p):1;if(l.comboId!==d.comboId&&1===g?g=u/2:l.comboId===d.comboId&&(g=2),Object(ht.isNumber)(d.x)&&Object(ht.isNumber)(l.x)&&Object(ht.isNumber)(d.y)&&Object(ht.isNumber)(l.y)){var v=e[n.target+"-"+n.source],y=v.vl,m=v.vx,b=v.vy,x=(y-i(n))/y*o*a(n)*g,w=m*x,M=b*x,S=s[c];t[f].x-=w*S,t[f].y-=M*S,t[h].x+=w*(1-S),t[h].y+=M*(1-S)}}}))},e}(Yr),fruchterman:ti,grid:ei,mds:io,radial:uo,random:co};d()(ho,(function(t,e){qr.registerLayout(e,{},t)}));var fo=qr,lo=r(231),po=r.n(lo),go=function(){return po()('!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=317)}([function(t,e,r){var n;try{n={cloneDeep:r(250),constant:r(67),defaults:r(251),each:r(93),filter:r(96),find:r(252),flatten:r(123),forEach:r(94),forIn:r(257),has:r(107),isUndefined:r(108),last:r(258),map:r(109),mapValues:r(259),max:r(260),merge:r(262),min:r(268),minBy:r(269),now:r(270),pick:r(271),range:r(276),reduce:r(111),sortBy:r(279),uniqueId:r(284),values:r(116),zipObject:r(285)}}catch(t){}n||(n=window._),t.exports=n},function(t,e){var r=Array.isArray;t.exports=r},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(34);e.default=function(t){return Array.isArray?Array.isArray(t):n.default(t,"Array")}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new n.ARRAY_TYPE(9);n.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new n.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,r,o,i,a,u,s,c){var f=new n.ARRAY_TYPE(9);return f[0]=t,f[1]=e,f[2]=r,f[3]=o,f[4]=i,f[5]=a,f[6]=u,f[7]=s,f[8]=c,f},e.set=function(t,e,r,n,o,i,a,u,s,c){return t[0]=e,t[1]=r,t[2]=n,t[3]=o,t[4]=i,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var r=e[1],n=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=f*a-u*c,l=-f*i+u*s,d=c*i-a*s,p=r*h+n*l+o*d;if(!p)return null;return p=1/p,t[0]=h*p,t[1]=(-f*n+o*c)*p,t[2]=(u*n-o*a)*p,t[3]=l*p,t[4]=(f*r-o*s)*p,t[5]=(-u*r+o*i)*p,t[6]=d*p,t[7]=(-c*r+n*s)*p,t[8]=(a*r-n*i)*p,t},e.adjoint=function(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=a*f-u*c,t[1]=o*c-n*f,t[2]=n*u-o*a,t[3]=u*s-i*f,t[4]=r*f-o*s,t[5]=o*i-r*u,t[6]=i*c-a*s,t[7]=n*s-r*c,t[8]=r*a-n*i,t},e.determinant=function(t){var e=t[0],r=t[1],n=t[2],o=t[3],i=t[4],a=t[5],u=t[6],s=t[7],c=t[8];return e*(c*i-a*s)+r*(-c*o+a*u)+n*(s*o-i*u)},e.multiply=o,e.translate=function(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=r[0],d=r[1];return t[0]=n,t[1]=o,t[2]=i,t[3]=a,t[4]=u,t[5]=s,t[6]=l*n+d*a+c,t[7]=l*o+d*u+f,t[8]=l*i+d*s+h,t},e.rotate=function(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=Math.sin(r),d=Math.cos(r);return t[0]=d*n+l*a,t[1]=d*o+l*u,t[2]=d*i+l*s,t[3]=d*a-l*n,t[4]=d*u-l*o,t[5]=d*s-l*i,t[6]=c,t[7]=f,t[8]=h,t},e.scale=function(t,e,r){var n=r[0],o=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=r+r,u=n+n,s=o+o,c=r*a,f=n*a,h=n*u,l=o*a,d=o*u,p=o*s,v=i*a,g=i*u,y=i*s;return t[0]=1-h-p,t[3]=f-y,t[6]=l+g,t[1]=f+y,t[4]=1-c-p,t[7]=d-v,t[2]=l-g,t[5]=d+v,t[8]=1-c-h,t},e.normalFromMat4=function(t,e){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],h=e[9],l=e[10],d=e[11],p=e[12],v=e[13],g=e[14],y=e[15],m=r*u-n*a,b=r*s-o*a,w=r*c-i*a,x=n*s-o*u,M=n*c-i*u,k=o*c-i*s,_=f*v-h*p,S=f*g-l*p,E=f*y-d*p,j=h*g-l*v,A=h*y-d*v,O=l*y-d*g,N=m*O-b*A+w*j+x*E-M*S+k*_;if(!N)return null;return N=1/N,t[0]=(u*O-s*A+c*j)*N,t[1]=(s*E-a*O-c*S)*N,t[2]=(a*A-u*E+c*_)*N,t[3]=(o*A-n*O-i*j)*N,t[4]=(r*O-o*E+i*S)*N,t[5]=(n*E-r*A-i*_)*N,t[6]=(v*k-g*M+y*x)*N,t[7]=(g*w-p*k-y*b)*N,t[8]=(p*M-v*w+y*m)*N,t},e.projection=function(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t},e.subtract=i,e.multiplyScalar=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t},e.multiplyScalarAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var r=t[0],o=t[1],i=t[2],a=t[3],u=t[4],s=t[5],c=t[6],f=t[7],h=t[8],l=e[0],d=e[1],p=e[2],v=e[3],g=e[4],y=e[5],m=e[6],b=e[7],w=e[8];return Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(o-d)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(i-p)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-v)<=n.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-g)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(g))&&Math.abs(s-y)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(y))&&Math.abs(c-m)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(f-b)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))&&Math.abs(h-w)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(w))};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(55));function o(t,e,r){var n=e[0],o=e[1],i=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],h=e[8],l=r[0],d=r[1],p=r[2],v=r[3],g=r[4],y=r[5],m=r[6],b=r[7],w=r[8];return t[0]=l*n+d*a+p*c,t[1]=l*o+d*u+p*f,t[2]=l*i+d*s+p*h,t[3]=v*n+g*a+y*c,t[4]=v*o+g*u+y*f,t[5]=v*i+g*s+y*h,t[6]=m*n+b*a+w*c,t[7]=m*o+b*u+w*f,t[8]=m*i+b*s+w*h,t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}e.mul=o,e.sub=i},function(t,e,r){"use strict";var n=r(0),o=r(7).Graph;function i(t,e,r,o){var i;do{i=n.uniqueId(o)}while(t.hasNode(i));return r.dummy=e,t.setNode(i,r),i}function a(t){return n.max(n.map(t.nodes(),(function(e){var r=t.node(e).rank;if(!n.isUndefined(r))return r})))}t.exports={addDummyNode:i,simplify:function(t){var e=(new o).setGraph(t.graph());return n.forEach(t.nodes(),(function(r){e.setNode(r,t.node(r))})),n.forEach(t.edges(),(function(r){var n=e.edge(r.v,r.w)||{weight:0,minlen:1},o=t.edge(r);e.setEdge(r.v,r.w,{weight:n.weight+o.weight,minlen:Math.max(n.minlen,o.minlen)})})),e},asNonCompoundGraph:function(t){var e=new o({multigraph:t.isMultigraph()}).setGraph(t.graph());return n.forEach(t.nodes(),(function(r){t.children(r).length||e.setNode(r,t.node(r))})),n.forEach(t.edges(),(function(r){e.setEdge(r,t.edge(r))})),e},successorWeights:function(t){var e=n.map(t.nodes(),(function(e){var r={};return n.forEach(t.outEdges(e),(function(e){r[e.w]=(r[e.w]||0)+t.edge(e).weight})),r}));return n.zipObject(t.nodes(),e)},predecessorWeights:function(t){var e=n.map(t.nodes(),(function(e){var r={};return n.forEach(t.inEdges(e),(function(e){r[e.v]=(r[e.v]||0)+t.edge(e).weight})),r}));return n.zipObject(t.nodes(),e)},intersectRect:function(t,e){var r,n,o=t.x,i=t.y,a=e.x-o,u=e.y-i,s=t.width/2,c=t.height/2;if(!a&&!u)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(u)*s>Math.abs(a)*c?(u<0&&(c=-c),r=c*a/u,n=c):(a<0&&(s=-s),r=s,n=s*u/a);return{x:o+r,y:i+n}},buildLayerMatrix:function(t){var e=n.map(n.range(a(t)+1),(function(){return[]}));return n.forEach(t.nodes(),(function(r){var o=t.node(r),i=o.rank;n.isUndefined(i)||(e[i][o.order]=r)})),e},normalizeRanks:function(t){var e=n.min(n.map(t.nodes(),(function(e){return t.node(e).rank})));n.forEach(t.nodes(),(function(r){var o=t.node(r);n.has(o,"rank")&&(o.rank-=e)}))},removeEmptyRanks:function(t){var e=n.min(n.map(t.nodes(),(function(e){return t.node(e).rank}))),r=[];n.forEach(t.nodes(),(function(n){var o=t.node(n).rank-e;r[o]||(r[o]=[]),r[o].push(n)}));var o=0,i=t.graph().nodeRankFactor;n.forEach(r,(function(e,r){n.isUndefined(e)&&r%i!=0?--o:o&&n.forEach(e,(function(e){t.node(e).rank+=o}))}))},addBorderNode:function(t,e,r,n){var o={width:0,height:0};arguments.length>=4&&(o.rank=r,o.order=n);return i(t,"border",o,e)},maxRank:a,partition:function(t,e){var r={lhs:[],rhs:[]};return n.forEach(t,(function(t){e(t)?r.lhs.push(t):r.rhs.push(t)})),r},time:function(t,e){var r=n.now();try{return e()}finally{console.log(t+" time: "+(n.now()-r)+"ms")}},notime:function(t,e){return e()}}},function(t,e,r){var n;try{n={clone:r(137),constant:r(67),each:r(93),filter:r(96),has:r(107),isArray:r(1),isEmpty:r(214),isFunction:r(25),isUndefined:r(108),keys:r(14),map:r(109),reduce:r(111),size:r(217),transform:r(223),union:r(224),values:r(116)}}catch(t){}n||(n=window._),t.exports=n},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=r(t);return null!=t&&("object"==e||"function"==e)}},function(t,e,r){var n;try{n=r(135)}catch(t){}n||(n=window.graphlib),t.exports=n},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(76),i="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,a=o||i||Function("return this")();t.exports=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=o,e.clone=function(t){var e=new n.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var r=new n.ARRAY_TYPE(2);return r[0]=t,r[1]=e,r},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,r){return t[0]=e,t[1]=r,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t},e.subtract=i,e.multiply=a,e.divide=u,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t},e.distance=s,e.squaredDistance=c,e.length=f,e.squaredLength=h,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var r=e[0],n=e[1],o=r*r+n*n;o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o);return t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t},e.lerp=function(t,e,r,n){var o=e[0],i=e[1];return t[0]=o+n*(r[0]-o),t[1]=i+n*(r[1]-i),t},e.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t},e.transformMat2=function(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o,t[1]=r[1]*n+r[3]*o,t},e.transformMat2d=function(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t},e.transformMat3=function(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[3]*o+r[6],t[1]=r[1]*n+r[4]*o+r[7],t},e.transformMat4=function(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[4]*o+r[12],t[1]=r[1]*n+r[5]*o+r[13],t},e.rotate=function(t,e,r,n){var o=e[0]-r[0],i=e[1]-r[1],a=Math.sin(n),u=Math.cos(n);return t[0]=o*u-i*a+r[0],t[1]=o*a+i*u+r[1],t},e.angle=function(t,e){var r=t[0],n=t[1],o=e[0],i=e[1],a=r*r+n*n;a>0&&(a=1/Math.sqrt(a));var u=o*o+i*i;u>0&&(u=1/Math.sqrt(u));var s=(r*o+n*i)*a*u;return s>1?0:s<-1?Math.PI:Math.acos(s)},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var r=t[0],o=t[1],i=e[0],a=e[1];return Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-a)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(a))};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(55));function o(){var t=new n.ARRAY_TYPE(2);return n.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function i(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function a(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function u(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function s(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(r*r+n*n)}function c(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function f(t){var e=t[0],r=t[1];return Math.sqrt(e*e+r*r)}function h(t){var e=t[0],r=t[1];return e*e+r*r}var l;e.len=f,e.sub=i,e.mul=a,e.div=u,e.dist=s,e.sqrDist=c,e.sqrLen=h,e.forEach=(l=o(),function(t,e,r,n,o,i){var a=void 0,u=void 0;for(e||(e=2),r||(r=0),u=n?Math.min(n*e+r,t.length):t.length,a=r;a<u;a+=e)l[0]=t[a],l[1]=t[a+1],o(l,l,i),t[a]=l[0],t[a+1]=l[1];return t})},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!=t&&"object"==r(t)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(34);e.default=function(t){return n.default(t,"String")}},function(t,e,r){var n=r(25),o=r(61);t.exports=function(t){return null!=t&&o(t.length)&&!n(t)}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(194),i=r(204),a=r(18),u=r(1),s=r(211);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==n(t)?u(t)?i(t[0],t[1]):o(t):s(t)}},function(t,e,r){var n=r(79),o=r(63),i=r(12);t.exports=function(t){return i(t)?n(t):o(t)}},function(t,e,r){var n=r(148),o=r(154);t.exports=function(t,e){var r=o(t,e);return n(r)?r:void 0}},function(t,e,r){var n=r(21),o=r(150),i=r(151),a=n?n.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?o(t):i(t)}},function(t,e,r){var n=r(79),o=r(174),i=r(12);t.exports=function(t){return i(t)?n(t,!0):o(t)}},function(t,e){t.exports=function(t){return t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(34);e.default=function(t){return n.default(t,"Number")}},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,r){var n=r(8).Symbol;t.exports=n},function(t,e,r){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(8),i=r(170),a="object"==n(e)&&e&&!e.nodeType&&e,u=a&&"object"==n(t)&&t&&!t.nodeType&&t,s=u&&u.exports===a?o.Buffer:void 0,c=(s?s.isBuffer:void 0)||i;t.exports=c}).call(this,r(60)(t))},function(t,e,r){var n=r(179),o=r(57),i=r(180),a=r(88),u=r(181),s=r(16),c=r(77),f=c(n),h=c(o),l=c(i),d=c(a),p=c(u),v=s;(n&&"[object DataView]"!=v(new n(new ArrayBuffer(1)))||o&&"[object Map]"!=v(new o)||i&&"[object Promise]"!=v(i.resolve())||a&&"[object Set]"!=v(new a)||u&&"[object WeakMap]"!=v(new u))&&(v=function(t){var e=s(t),r="[object Object]"==e?t.constructor:void 0,n=r?c(r):"";if(n)switch(n){case f:return"[object DataView]";case h:return"[object Map]";case l:return"[object Promise]";case d:return"[object Set]";case p:return"[object WeakMap]"}return e}),t.exports=v},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(16),i=r(10);t.exports=function(t){return"symbol"==n(t)||i(t)&&"[object Symbol]"==o(t)}},function(t,e,r){var n=r(16),o=r(6);t.exports=function(t){if(!o(t))return!1;var e=n(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e,r){var n=r(40),o=r(41);t.exports=function(t,e,r,i){var a=!r;r||(r={});for(var u=-1,s=e.length;++u<s;){var c=e[u],f=i?i(r[c],t[c],c,r,t):void 0;void 0===f&&(f=t[c]),a?o(r,c,f):n(r,c,f)}return r}},function(t,e,r){var n=r(169),o=r(10),i=Object.prototype,a=i.hasOwnProperty,u=i.propertyIsEnumerable,s=n(function(){return arguments}())?n:function(t){return o(t)&&a.call(t,"callee")&&!u.call(t,"callee")};t.exports=s},function(t,e,r){var n=r(171),o=r(43),i=r(62),a=i&&i.isTypedArray,u=a?o(a):n;t.exports=u},function(t,e,r){var n=r(24);t.exports=function(t){if("string"==typeof t||n(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},function(t,e,r){"use strict";function n(t,e){for(var r in e)e.hasOwnProperty(r)&&"constructor"!==r&&void 0!==e[r]&&(t[r]=e[r])}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,r,o){return e&&n(t,e),r&&n(t,r),o&&n(t,o),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(34);e.default=function(t){return n.default(t,"Function")}},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(310),i=r(314),a=[].slice,u=["keyword","gray","hex"],s={};Object.keys(i).forEach((function(t){s[a.call(i[t].labels).sort().join("")]=t}));var c={};function f(t,e){if(!(this instanceof f))return new f(t,e);if(e&&e in u&&(e=null),e&&!(e in i))throw new Error("Unknown model: "+e);var r,n;if(null==t)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof f)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if("string"==typeof t){var h=o.get(t);if(null===h)throw new Error("Unable to parse color from string: "+t);this.model=h.model,n=i[this.model].channels,this.color=h.value.slice(0,n),this.valpha="number"==typeof h.value[n]?h.value[n]:1}else if(t.length){this.model=e||"rgb",n=i[this.model].channels;var l=a.call(t,0,n);this.color=p(l,n),this.valpha="number"==typeof t[n]?t[n]:1}else if("number"==typeof t)t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,255&t],this.valpha=1;else{this.valpha=1;var d=Object.keys(t);"alpha"in t&&(d.splice(d.indexOf("alpha"),1),this.valpha="number"==typeof t.alpha?t.alpha:0);var v=d.sort().join("");if(!(v in s))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=s[v];var g=i[this.model].labels,y=[];for(r=0;r<g.length;r++)y.push(t[g[r]]);this.color=p(y)}if(c[this.model])for(n=i[this.model].channels,r=0;r<n;r++){var m=c[this.model][r];m&&(this.color[r]=m(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function h(t,e,r){return(t=Array.isArray(t)?t:[t]).forEach((function(t){(c[t]||(c[t]=[]))[e]=r})),t=t[0],function(n){var o;return arguments.length?(r&&(n=r(n)),(o=this[t]()).color[e]=n,o):(o=this[t]().color[e],r&&(o=r(o)),o)}}function l(t){return function(e){return Math.max(0,Math.min(t,e))}}function d(t){return Array.isArray(t)?t:[t]}function p(t,e){for(var r=0;r<e;r++)"number"!=typeof t[r]&&(t[r]=0);return t}f.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in o.to?this:this.rgb(),r=1===(e=e.round("number"==typeof t?t:1)).valpha?e.color:e.color.concat(this.valpha);return o.to[e.model](r)},percentString:function(t){var e=this.rgb().round("number"==typeof t?t:1),r=1===e.valpha?e.color:e.color.concat(this.valpha);return o.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=i[this.model].channels,r=i[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return 1!==this.valpha&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,1!==this.valpha&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,1!==this.valpha&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new f(this.color.map(function(t){return function(e){return function(t,e){return Number(t.toFixed(e))}(e,t)}}(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new f(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:h("rgb",0,l(255)),green:h("rgb",1,l(255)),blue:h("rgb",2,l(255)),hue:h(["hsl","hsv","hsl","hwb","hcg"],0,(function(t){return(t%360+360)%360})),saturationl:h("hsl",1,l(100)),lightness:h("hsl",2,l(100)),saturationv:h("hsv",1,l(100)),value:h("hsv",2,l(100)),chroma:h("hcg",1,l(100)),gray:h("hcg",2,l(100)),white:h("hwb",1,l(100)),wblack:h("hwb",2,l(100)),cyan:h("cmyk",0,l(100)),magenta:h("cmyk",1,l(100)),yellow:h("cmyk",2,l(100)),black:h("cmyk",3,l(100)),x:h("xyz",0,l(100)),y:h("xyz",1,l(100)),z:h("xyz",2,l(100)),l:h("lab",0,l(100)),a:h("lab",1),b:h("lab",2),keyword:function(t){return arguments.length?new f(t):i[this.model].keyword(this.color)},hex:function(t){return arguments.length?new f(t):o.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(255&t[0])<<16|(255&t[1])<<8|255&t[2]},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color;return(299*t[0]+587*t[1]+114*t[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=.3*t[0]+.59*t[1]+.11*t[2];return f.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r=(r+t)%360)<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error(\'Argument to "mix" was not a Color instance, but rather an instance of \'+n(t));var r=t.rgb(),o=this.rgb(),i=void 0===e?.5:e,a=2*i-1,u=r.alpha()-o.alpha(),s=((a*u==-1?a:(a+u)/(1+a*u))+1)/2,c=1-s;return f.rgb(s*r.red()+c*o.red(),s*r.green()+c*o.green(),s*r.blue()+c*o.blue(),r.alpha()*i+o.alpha()*(1-i))}},Object.keys(i).forEach((function(t){if(-1===u.indexOf(t)){var e=i[t].channels;f.prototype[t]=function(){if(this.model===t)return new f(this);if(arguments.length)return new f(arguments,t);var r="number"==typeof arguments[e]?e:this.valpha;return new f(d(i[this.model][t].raw(this.color)).concat(r),t)},f[t]=function(r){return"number"==typeof r&&(r=p(a.call(arguments),e)),new f(r,t)}}})),t.exports=f},function(t,e,r){var n;function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(i){var a=/^\\s+/,u=/\\s+$/,s=0,c=i.round,f=i.min,h=i.max,l=i.random;function d(t,e){if(e=e||{},(t=t||"")instanceof d)return t;if(!(this instanceof d))return new d(t,e);var r=function(t){var e={r:0,g:0,b:0},r=1,n=null,s=null,c=null,l=!1,d=!1;"string"==typeof t&&(t=function(t){t=t.replace(a,"").replace(u,"").toLowerCase();var e,r=!1;if(I[t])t=I[t],r=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};if(e=Y.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=Y.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=Y.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=Y.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=Y.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=Y.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=Y.hex8.exec(t))return{r:F(e[1]),g:F(e[2]),b:F(e[3]),a:L(e[4]),format:r?"name":"hex8"};if(e=Y.hex6.exec(t))return{r:F(e[1]),g:F(e[2]),b:F(e[3]),format:r?"name":"hex"};if(e=Y.hex4.exec(t))return{r:F(e[1]+""+e[1]),g:F(e[2]+""+e[2]),b:F(e[3]+""+e[3]),a:L(e[4]+""+e[4]),format:r?"name":"hex8"};if(e=Y.hex3.exec(t))return{r:F(e[1]+""+e[1]),g:F(e[2]+""+e[2]),b:F(e[3]+""+e[3]),format:r?"name":"hex"};return!1}(t));"object"==o(t)&&(H(t.r)&&H(t.g)&&H(t.b)?(p=t.r,v=t.g,g=t.b,e={r:255*C(p,255),g:255*C(v,255),b:255*C(g,255)},l=!0,d="%"===String(t.r).substr(-1)?"prgb":"rgb"):H(t.h)&&H(t.s)&&H(t.v)?(n=D(t.s),s=D(t.v),e=function(t,e,r){t=6*C(t,360),e=C(e,100),r=C(r,100);var n=i.floor(t),o=t-n,a=r*(1-e),u=r*(1-o*e),s=r*(1-(1-o)*e),c=n%6;return{r:255*[r,u,a,a,s,r][c],g:255*[s,r,r,u,a,a][c],b:255*[a,a,s,r,r,u][c]}}(t.h,n,s),l=!0,d="hsv"):H(t.h)&&H(t.s)&&H(t.l)&&(n=D(t.s),c=D(t.l),e=function(t,e,r){var n,o,i;function a(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t}if(t=C(t,360),e=C(e,100),r=C(r,100),0===e)n=o=i=r;else{var u=r<.5?r*(1+e):r+e-r*e,s=2*r-u;n=a(s,u,t+1/3),o=a(s,u,t),i=a(s,u,t-1/3)}return{r:255*n,g:255*o,b:255*i}}(t.h,n,c),l=!0,d="hsl"),t.hasOwnProperty("a")&&(r=t.a));var p,v,g;return r=P(r),{ok:l,format:t.format||d,r:f(255,h(e.r,0)),g:f(255,h(e.g,0)),b:f(255,h(e.b,0)),a:r}}(t);this._originalInput=t,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=c(100*this._a)/100,this._format=e.format||r.format,this._gradientType=e.gradientType,this._r<1&&(this._r=c(this._r)),this._g<1&&(this._g=c(this._g)),this._b<1&&(this._b=c(this._b)),this._ok=r.ok,this._tc_id=s++}function p(t,e,r){t=C(t,255),e=C(e,255),r=C(r,255);var n,o,i=h(t,e,r),a=f(t,e,r),u=(i+a)/2;if(i==a)n=o=0;else{var s=i-a;switch(o=u>.5?s/(2-i-a):s/(i+a),i){case t:n=(e-r)/s+(e<r?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return{h:n,s:o,l:u}}function v(t,e,r){t=C(t,255),e=C(e,255),r=C(r,255);var n,o,i=h(t,e,r),a=f(t,e,r),u=i,s=i-a;if(o=0===i?0:s/i,i==a)n=0;else{switch(i){case t:n=(e-r)/s+(e<r?6:0);break;case e:n=(r-t)/s+2;break;case r:n=(t-e)/s+4}n/=6}return{h:n,s:o,v:u}}function g(t,e,r,n){var o=[T(c(t).toString(16)),T(c(e).toString(16)),T(c(r).toString(16))];return n&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function y(t,e,r,n){return[T(q(n)),T(c(t).toString(16)),T(c(e).toString(16)),T(c(r).toString(16))].join("")}function m(t,e){e=0===e?0:e||10;var r=d(t).toHsl();return r.s-=e/100,r.s=z(r.s),d(r)}function b(t,e){e=0===e?0:e||10;var r=d(t).toHsl();return r.s+=e/100,r.s=z(r.s),d(r)}function w(t){return d(t).desaturate(100)}function x(t,e){e=0===e?0:e||10;var r=d(t).toHsl();return r.l+=e/100,r.l=z(r.l),d(r)}function M(t,e){e=0===e?0:e||10;var r=d(t).toRgb();return r.r=h(0,f(255,r.r-c(-e/100*255))),r.g=h(0,f(255,r.g-c(-e/100*255))),r.b=h(0,f(255,r.b-c(-e/100*255))),d(r)}function k(t,e){e=0===e?0:e||10;var r=d(t).toHsl();return r.l-=e/100,r.l=z(r.l),d(r)}function _(t,e){var r=d(t).toHsl(),n=(r.h+e)%360;return r.h=n<0?360+n:n,d(r)}function S(t){var e=d(t).toHsl();return e.h=(e.h+180)%360,d(e)}function E(t){var e=d(t).toHsl(),r=e.h;return[d(t),d({h:(r+120)%360,s:e.s,l:e.l}),d({h:(r+240)%360,s:e.s,l:e.l})]}function j(t){var e=d(t).toHsl(),r=e.h;return[d(t),d({h:(r+90)%360,s:e.s,l:e.l}),d({h:(r+180)%360,s:e.s,l:e.l}),d({h:(r+270)%360,s:e.s,l:e.l})]}function A(t){var e=d(t).toHsl(),r=e.h;return[d(t),d({h:(r+72)%360,s:e.s,l:e.l}),d({h:(r+216)%360,s:e.s,l:e.l})]}function O(t,e,r){e=e||6,r=r||30;var n=d(t).toHsl(),o=360/r,i=[d(t)];for(n.h=(n.h-(o*e>>1)+720)%360;--e;)n.h=(n.h+o)%360,i.push(d(n));return i}function N(t,e){e=e||6;for(var r=d(t).toHsv(),n=r.h,o=r.s,i=r.v,a=[],u=1/e;e--;)a.push(d({h:n,s:o,v:i})),i=(i+u)%1;return a}d.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,r,n=this.toRgb();return t=n.r/255,e=n.g/255,r=n.b/255,.2126*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:i.pow((r+.055)/1.055,2.4))},setAlpha:function(t){return this._a=P(t),this._roundA=c(100*this._a)/100,this},toHsv:function(){var t=v(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=v(this._r,this._g,this._b),e=c(360*t.h),r=c(100*t.s),n=c(100*t.v);return 1==this._a?"hsv("+e+", "+r+"%, "+n+"%)":"hsva("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=p(this._r,this._g,this._b),e=c(360*t.h),r=c(100*t.s),n=c(100*t.l);return 1==this._a?"hsl("+e+", "+r+"%, "+n+"%)":"hsla("+e+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(t){return g(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,r,n,o){var i=[T(c(t).toString(16)),T(c(e).toString(16)),T(c(r).toString(16)),T(q(n))];if(o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0);return i.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:c(this._r),g:c(this._g),b:c(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+c(this._r)+", "+c(this._g)+", "+c(this._b)+")":"rgba("+c(this._r)+", "+c(this._g)+", "+c(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:c(100*C(this._r,255))+"%",g:c(100*C(this._g,255))+"%",b:c(100*C(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+c(100*C(this._r,255))+"%, "+c(100*C(this._g,255))+"%, "+c(100*C(this._b,255))+"%)":"rgba("+c(100*C(this._r,255))+"%, "+c(100*C(this._g,255))+"%, "+c(100*C(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[g(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+y(this._r,this._g,this._b,this._a),r=e,n=this._gradientType?"GradientType = 1, ":"";if(t){var o=d(t);r="#"+y(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+e+",endColorstr="+r+")"},toString:function(t){var e=!!t;t=t||this._format;var r=!1,n=this._a<1&&this._a>=0;return e||!n||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(r=this.toRgbString()),"prgb"===t&&(r=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(r=this.toHexString()),"hex3"===t&&(r=this.toHexString(!0)),"hex4"===t&&(r=this.toHex8String(!0)),"hex8"===t&&(r=this.toHex8String()),"name"===t&&(r=this.toName()),"hsl"===t&&(r=this.toHslString()),"hsv"===t&&(r=this.toHsvString()),r||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return d(this.toString())},_applyModification:function(t,e){var r=t.apply(null,[this].concat([].slice.call(e)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(M,arguments)},darken:function(){return this._applyModification(k,arguments)},desaturate:function(){return this._applyModification(m,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(w,arguments)},spin:function(){return this._applyModification(_,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(S,arguments)},monochromatic:function(){return this._applyCombination(N,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(E,arguments)},tetrad:function(){return this._applyCombination(j,arguments)}},d.fromRatio=function(t,e){if("object"==o(t)){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]="a"===n?t[n]:D(t[n]));t=r}return d(t,e)},d.equals=function(t,e){return!(!t||!e)&&d(t).toRgbString()==d(e).toRgbString()},d.random=function(){return d.fromRatio({r:l(),g:l(),b:l()})},d.mix=function(t,e,r){r=0===r?0:r||50;var n=d(t).toRgb(),o=d(e).toRgb(),i=r/100;return d({r:(o.r-n.r)*i+n.r,g:(o.g-n.g)*i+n.g,b:(o.b-n.b)*i+n.b,a:(o.a-n.a)*i+n.a})},d.readability=function(t,e){var r=d(t),n=d(e);return(i.max(r.getLuminance(),n.getLuminance())+.05)/(i.min(r.getLuminance(),n.getLuminance())+.05)},d.isReadable=function(t,e,r){var n,o,i=d.readability(t,e);switch(o=!1,(n=function(t){var e,r;e=((t=t||{level:"AA",size:"small"}).level||"AA").toUpperCase(),r=(t.size||"small").toLowerCase(),"AA"!==e&&"AAA"!==e&&(e="AA");"small"!==r&&"large"!==r&&(r="small");return{level:e,size:r}}(r)).level+n.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},d.mostReadable=function(t,e,r){var n,o,i,a,u=null,s=0;o=(r=r||{}).includeFallbackColors,i=r.level,a=r.size;for(var c=0;c<e.length;c++)(n=d.readability(t,e[c]))>s&&(s=n,u=d(e[c]));return d.isReadable(t,u,{level:i,size:a})||!o?u:(r.includeFallbackColors=!1,d.mostReadable(t,["#fff","#000"],r))};var I=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=d.hexNames=function(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[t[r]]=r);return e}(I);function P(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function C(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var r=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=f(e,h(0,parseFloat(t))),r&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function z(t){return f(1,h(0,t))}function F(t){return parseInt(t,16)}function T(t){return 1==t.length?"0"+t:""+t}function D(t){return t<=1&&(t=100*t+"%"),t}function q(t){return i.round(255*parseFloat(t)).toString(16)}function L(t){return F(t)/255}var B,V,U,Y=(V="[\\\\s|\\\\(]+("+(B="(?:[-\\\\+]?\\\\d*\\\\.\\\\d+%?)|(?:[-\\\\+]?\\\\d+%?)")+")[,|\\\\s]+("+B+")[,|\\\\s]+("+B+")\\\\s*\\\\)?",U="[\\\\s|\\\\(]+("+B+")[,|\\\\s]+("+B+")[,|\\\\s]+("+B+")[,|\\\\s]+("+B+")\\\\s*\\\\)?",{CSS_UNIT:new RegExp(B),rgb:new RegExp("rgb"+V),rgba:new RegExp("rgba"+U),hsl:new RegExp("hsl"+V),hsla:new RegExp("hsla"+U),hsv:new RegExp("hsv"+V),hsva:new RegExp("hsva"+U),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(t){return!!Y.CSS_UNIT.exec(t)}t.exports?t.exports=d:void 0===(n=function(){return d}.call(e,r,e,t))||(t.exports=n)}(Math)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={}.toString;e.default=function(t,e){return n.call(t)==="[object "+e+"]"}},function(t,e,r){var n=r(36),o=r(143),i=r(144),a=r(145),u=r(146),s=r(147);function c(t){var e=this.__data__=new n(t);this.size=e.size}c.prototype.clear=o,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=u,c.prototype.set=s,t.exports=c},function(t,e,r){var n=r(138),o=r(139),i=r(140),a=r(141),u=r(142);function s(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,r){var n=r(20);t.exports=function(t,e){for(var r=t.length;r--;)if(n(t[r][0],e))return r;return-1}},function(t,e,r){var n=r(15)(Object,"create");t.exports=n},function(t,e,r){var n=r(163);t.exports=function(t,e){var r=t.__data__;return n(e)?r["string"==typeof e?"string":"hash"]:r.map}},function(t,e,r){var n=r(41),o=r(20),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,r){var a=t[e];i.call(t,e)&&o(a,r)&&(void 0!==r||e in t)||n(t,e,r)}},function(t,e,r){var n=r(78);t.exports=function(t,e,r){"__proto__"==e&&n?n(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=/^(?:0|[1-9]\\d*)$/;t.exports=function(t,e){var o=r(t);return!!(e=null==e?9007199254740991:e)&&("number"==o||"symbol"!=o&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e){var r=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},function(t,e,r){var n=r(80)(Object.getPrototypeOf,Object);t.exports=n},function(t,e,r){var n=r(68),o=r(192)(n);t.exports=o},function(t,e,r){var n=r(48),o=r(29);t.exports=function(t,e){for(var r=0,i=(e=n(e,t)).length;null!=t&&r<i;)t=t[o(e[r++])];return r&&r==i?t:void 0}},function(t,e,r){var n=r(1),o=r(71),i=r(206),a=r(103);t.exports=function(t,e){return n(t)?t:o(t,e)?[t]:i(a(t))}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}},function(t,e,r){var n=r(18),o=r(112),i=r(113);t.exports=function(t,e){return i(o(t,e,n),t+"")}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(20),i=r(12),a=r(42),u=r(6);t.exports=function(t,e,r){if(!u(r))return!1;var s=n(e);return!!("number"==s?i(r)&&a(e,r.length):"string"==s&&e in r)&&o(r[e],t)}},function(t,e,r){"use strict";var n=r(0);t.exports={longestPath:function(t){var e={};n.forEach(t.sources(),(function r(o){var i=t.node(o);if(n.has(e,o))return i.rank;e[o]=!0;var a=n.min(n.map(t.outEdges(o),(function(e){return r(e.w)-t.edge(e).minlen})));return a!==Number.POSITIVE_INFINITY&&null!=a||(a=0),i.rank=a}))},slack:function(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=r(134);e.default=function(t,e){if(t)if(n.default(t))for(var r=0,i=t.length;r<i&&!1!==e(t[r],r);r++);else if(o.default(t))for(var a in t)if(t.hasOwnProperty(a)&&!1===e(t[a],a))break}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return null==t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t},e.toRadian=function(t){return t*o},e.equals=function(t,e){return Math.abs(t-e)<=n*Math.max(1,Math.abs(t),Math.abs(e))};var n=e.EPSILON=1e-6;e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random;var o=Math.PI/180},function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(5);t.exports=i;function i(t){this._isDirected=!o.has(t,"directed")||t.directed,this._isMultigraph=!!o.has(t,"multigraph")&&t.multigraph,this._isCompound=!!o.has(t,"compound")&&t.compound,this._label=void 0,this._defaultNodeLabelFn=o.constant(void 0),this._defaultEdgeLabelFn=o.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(t,e){t[e]?t[e]++:t[e]=1}function u(t,e){--t[e]||delete t[e]}function s(t,e,r,n){var i=""+e,a=""+r;if(!t&&i>a){var u=i;i=a,a=u}return i+""+a+""+(o.isUndefined(n)?"\\0":n)}function c(t,e,r,n){var o=""+e,i=""+r;if(!t&&o>i){var a=o;o=i,i=a}var u={v:o,w:i};return n&&(u.name=n),u}function f(t,e){return s(t,e.v,e.w,e.name)}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(t){return this._label=t,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultNodeLabelFn=t,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return o.keys(this._nodes)},i.prototype.sources=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._in[e])}))},i.prototype.sinks=function(){var t=this;return o.filter(this.nodes(),(function(e){return o.isEmpty(t._out[e])}))},i.prototype.setNodes=function(t,e){var r=arguments,n=this;return o.each(t,(function(t){r.length>1?n.setNode(t,e):n.setNode(t)})),this},i.prototype.setNode=function(t,e){return o.has(this._nodes,t)?(arguments.length>1&&(this._nodes[t]=e),this):(this._nodes[t]=arguments.length>1?e:this._defaultNodeLabelFn(t),this._isCompound&&(this._parent[t]="\\0",this._children[t]={},this._children["\\0"][t]=!0),this._in[t]={},this._preds[t]={},this._out[t]={},this._sucs[t]={},++this._nodeCount,this)},i.prototype.node=function(t){return this._nodes[t]},i.prototype.hasNode=function(t){return o.has(this._nodes,t)},i.prototype.removeNode=function(t){var e=this;if(o.has(this._nodes,t)){var r=function(t){e.removeEdge(e._edgeObjs[t])};delete this._nodes[t],this._isCompound&&(this._removeFromParentsChildList(t),delete this._parent[t],o.each(this.children(t),(function(t){e.setParent(t)})),delete this._children[t]),o.each(o.keys(this._in[t]),r),delete this._in[t],delete this._preds[t],o.each(o.keys(this._out[t]),r),delete this._out[t],delete this._sucs[t],--this._nodeCount}return this},i.prototype.setParent=function(t,e){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(o.isUndefined(e))e="\\0";else{for(var r=e+="";!o.isUndefined(r);r=this.parent(r))if(r===t)throw new Error("Setting "+e+" as parent of "+t+" would create a cycle");this.setNode(e)}return this.setNode(t),this._removeFromParentsChildList(t),this._parent[t]=e,this._children[e][t]=!0,this},i.prototype._removeFromParentsChildList=function(t){delete this._children[this._parent[t]][t]},i.prototype.parent=function(t){if(this._isCompound){var e=this._parent[t];if("\\0"!==e)return e}},i.prototype.children=function(t){if(o.isUndefined(t)&&(t="\\0"),this._isCompound){var e=this._children[t];if(e)return o.keys(e)}else{if("\\0"===t)return this.nodes();if(this.hasNode(t))return[]}},i.prototype.predecessors=function(t){var e=this._preds[t];if(e)return o.keys(e)},i.prototype.successors=function(t){var e=this._sucs[t];if(e)return o.keys(e)},i.prototype.neighbors=function(t){var e=this.predecessors(t);if(e)return o.union(e,this.successors(t))},i.prototype.isLeaf=function(t){return 0===(this.isDirected()?this.successors(t):this.neighbors(t)).length},i.prototype.filterNodes=function(t){var e=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});e.setGraph(this.graph());var r=this;o.each(this._nodes,(function(r,n){t(n)&&e.setNode(n,r)})),o.each(this._edgeObjs,(function(t){e.hasNode(t.v)&&e.hasNode(t.w)&&e.setEdge(t,r.edge(t))}));var n={};return this._isCompound&&o.each(e.nodes(),(function(t){e.setParent(t,function t(o){var i=r.parent(o);return void 0===i||e.hasNode(i)?(n[o]=i,i):i in n?n[i]:t(i)}(t))})),e},i.prototype.setDefaultEdgeLabel=function(t){return o.isFunction(t)||(t=o.constant(t)),this._defaultEdgeLabelFn=t,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return o.values(this._edgeObjs)},i.prototype.setPath=function(t,e){var r=this,n=arguments;return o.reduce(t,(function(t,o){return n.length>1?r.setEdge(t,o,e):r.setEdge(t,o),o})),this},i.prototype.setEdge=function(){var t,e,r,i,u=!1,f=arguments[0];"object"===n(f)&&null!==f&&"v"in f?(t=f.v,e=f.w,r=f.name,2===arguments.length&&(i=arguments[1],u=!0)):(t=f,e=arguments[1],r=arguments[3],arguments.length>2&&(i=arguments[2],u=!0)),t=""+t,e=""+e,o.isUndefined(r)||(r=""+r);var h=s(this._isDirected,t,e,r);if(o.has(this._edgeLabels,h))return u&&(this._edgeLabels[h]=i),this;if(!o.isUndefined(r)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(t),this.setNode(e),this._edgeLabels[h]=u?i:this._defaultEdgeLabelFn(t,e,r);var l=c(this._isDirected,t,e,r);return t=l.v,e=l.w,Object.freeze(l),this._edgeObjs[h]=l,a(this._preds[e],t),a(this._sucs[t],e),this._in[e][h]=l,this._out[t][h]=l,this._edgeCount++,this},i.prototype.edge=function(t,e,r){var n=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,r);return this._edgeLabels[n]},i.prototype.hasEdge=function(t,e,r){var n=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,r);return o.has(this._edgeLabels,n)},i.prototype.removeEdge=function(t,e,r){var n=1===arguments.length?f(this._isDirected,arguments[0]):s(this._isDirected,t,e,r),o=this._edgeObjs[n];return o&&(t=o.v,e=o.w,delete this._edgeLabels[n],delete this._edgeObjs[n],u(this._preds[e],t),u(this._sucs[t],e),delete this._in[e][n],delete this._out[t][n],this._edgeCount--),this},i.prototype.inEdges=function(t,e){var r=this._in[t];if(r){var n=o.values(r);return e?o.filter(n,(function(t){return t.v===e})):n}},i.prototype.outEdges=function(t,e){var r=this._out[t];if(r){var n=o.values(r);return e?o.filter(n,(function(t){return t.w===e})):n}},i.prototype.nodeEdges=function(t,e){var r=this.inEdges(t,e);if(r)return r.concat(this.outEdges(t,e))}},function(t,e,r){var n=r(15)(r(8),"Map");t.exports=n},function(t,e,r){var n=r(155),o=r(162),i=r(164),a=r(165),u=r(166);function s(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););return t}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e,r){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(76),i="object"==n(e)&&e&&!e.nodeType&&e,a=i&&"object"==n(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i&&o.process,s=function(){try{var t=a&&a.require&&a.require("util").types;return t||u&&u.binding&&u.binding("util")}catch(t){}}();t.exports=s}).call(this,r(60)(t))},function(t,e,r){var n=r(44),o=r(172),i=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return o(t);var e=[];for(var r in Object(t))i.call(t,r)&&"constructor"!=r&&e.push(r);return e}},function(t,e,r){var n=r(83),o=r(84),i=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,u=a?function(t){return null==t?[]:(t=Object(t),n(a(t),(function(e){return i.call(t,e)})))}:o;t.exports=u},function(t,e){t.exports=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}},function(t,e,r){var n=r(89);t.exports=function(t){var e=new t.constructor(t.byteLength);return new n(e).set(new n(t)),e}},function(t,e){t.exports=function(t){return function(){return t}}},function(t,e,r){var n=r(69),o=r(14);t.exports=function(t,e){return t&&n(t,e,o)}},function(t,e,r){var n=r(191)();t.exports=n},function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(1),i=r(24),a=/\\.|\\[(?:[^[\\]]*|(["\'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,u=/^\\w*$/;t.exports=function(t,e){if(o(t))return!1;var r=n(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!i(t))||(u.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,r){var n=r(65),o=r(225);t.exports=function t(e,r,i,a,u){var s=-1,c=e.length;for(i||(i=o),u||(u=[]);++s<c;){var f=e[s];r>0&&i(f)?r>1?t(f,r-1,i,a,u):n(u,f):a||(u[u.length]=f)}return u}},function(t,e,r){var n=r(24);t.exports=function(t,e,r){for(var o=-1,i=t.length;++o<i;){var a=t[o],u=e(a);if(null!=u&&(void 0===s?u==u&&!n(u):r(u,s)))var s=u,c=a}return c}},function(t,e,r){t.exports={graphlib:r(7),layout:r(249),debug:r(308),util:{time:r(4).time,notime:r(4).notime},version:r(309)}},function(t,e,r){var n=r(35),o=r(59),i=r(40),a=r(167),u=r(173),s=r(81),c=r(82),f=r(176),h=r(177),l=r(86),d=r(178),p=r(23),v=r(182),g=r(183),y=r(91),m=r(1),b=r(22),w=r(187),x=r(6),M=r(189),k=r(14),_=r(17),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,t.exports=function t(e,r,E,j,A,O){var N,I=1&r,R=2&r,P=4&r;if(E&&(N=A?E(e,j,A,O):E(e)),void 0!==N)return N;if(!x(e))return e;var C=m(e);if(C){if(N=v(e),!I)return c(e,N)}else{var z=p(e),F="[object Function]"==z||"[object GeneratorFunction]"==z;if(b(e))return s(e,I);if("[object Object]"==z||"[object Arguments]"==z||F&&!A){if(N=R||F?{}:y(e),!I)return R?h(e,u(N,e)):f(e,a(N,e))}else{if(!S[z])return A?e:{};N=g(e,z,I)}}O||(O=new n);var T=O.get(e);if(T)return T;O.set(e,N),M(e)?e.forEach((function(n){N.add(t(n,r,E,n,e,O))})):w(e)&&e.forEach((function(n,o){N.set(o,t(n,r,E,o,e,O))}));var D=C?void 0:(P?R?d:l:R?_:k)(e);return o(D||e,(function(n,o){D&&(n=e[o=n]),i(N,o,t(n,r,E,o,e,O))})),N}},function(t,e,r){(function(e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n="object"==(void 0===e?"undefined":r(e))&&e&&e.Object===Object&&e;t.exports=n}).call(this,r(149))},function(t,e){var r=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,r){var n=r(15),o=function(){try{var t=n(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=o},function(t,e,r){var n=r(168),o=r(27),i=r(1),a=r(22),u=r(42),s=r(28),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var r=i(t),f=!r&&o(t),h=!r&&!f&&a(t),l=!r&&!f&&!h&&s(t),d=r||f||h||l,p=d?n(t.length,String):[],v=p.length;for(var g in t)!e&&!c.call(t,g)||d&&("length"==g||h&&("offset"==g||"parent"==g)||l&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||u(g,v))||p.push(g);return p}},function(t,e){t.exports=function(t,e){return function(r){return t(e(r))}}},function(t,e,r){(function(t){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(8),i="object"==n(e)&&e&&!e.nodeType&&e,a=i&&"object"==n(t)&&t&&!t.nodeType&&t,u=a&&a.exports===i?o.Buffer:void 0,s=u?u.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var r=t.length,n=s?s(r):new t.constructor(r);return t.copy(n),n}}).call(this,r(60)(t))},function(t,e){t.exports=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}},function(t,e){t.exports=function(){return[]}},function(t,e,r){var n=r(65),o=r(45),i=r(64),a=r(84),u=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)n(e,i(t)),t=o(t);return e}:a;t.exports=u},function(t,e,r){var n=r(87),o=r(64),i=r(14);t.exports=function(t){return n(t,i,o)}},function(t,e,r){var n=r(65),o=r(1);t.exports=function(t,e,r){var i=e(t);return o(t)?i:n(i,r(t))}},function(t,e,r){var n=r(15)(r(8),"Set");t.exports=n},function(t,e,r){var n=r(8).Uint8Array;t.exports=n},function(t,e,r){var n=r(66);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}},function(t,e,r){var n=r(92),o=r(45),i=r(44);t.exports=function(t){return"function"!=typeof t.constructor||i(t)?{}:n(o(t))}},function(t,e,r){var n=r(6),o=Object.create,i=function(){function t(){}return function(e){if(!n(e))return{};if(o)return o(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();t.exports=i},function(t,e,r){t.exports=r(94)},function(t,e,r){var n=r(59),o=r(46),i=r(95),a=r(1);t.exports=function(t,e){return(a(t)?n:o)(t,i(e))}},function(t,e,r){var n=r(18);t.exports=function(t){return"function"==typeof t?t:n}},function(t,e,r){var n=r(83),o=r(193),i=r(13),a=r(1);t.exports=function(t,e){return(a(t)?n:o)(t,i(e,3))}},function(t,e,r){var n=r(196),o=r(10);t.exports=function t(e,r,i,a,u){return e===r||(null==e||null==r||!o(e)&&!o(r)?e!=e&&r!=r:n(e,r,i,a,t,u))}},function(t,e,r){var n=r(99),o=r(199),i=r(100);t.exports=function(t,e,r,a,u,s){var c=1&r,f=t.length,h=e.length;if(f!=h&&!(c&&h>f))return!1;var l=s.get(t),d=s.get(e);if(l&&d)return l==e&&d==t;var p=-1,v=!0,g=2&r?new n:void 0;for(s.set(t,e),s.set(e,t);++p<f;){var y=t[p],m=e[p];if(a)var b=c?a(m,y,p,e,t,s):a(y,m,p,t,e,s);if(void 0!==b){if(b)continue;v=!1;break}if(g){if(!o(e,(function(t,e){if(!i(g,e)&&(y===t||u(y,t,r,a,s)))return g.push(e)}))){v=!1;break}}else if(y!==m&&!u(y,m,r,a,s)){v=!1;break}}return s.delete(t),s.delete(e),v}},function(t,e,r){var n=r(58),o=r(197),i=r(198);function a(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n;++e<r;)this.add(t[e])}a.prototype.add=a.prototype.push=o,a.prototype.has=i,t.exports=a},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,r){var n=r(6);t.exports=function(t){return t==t&&!n(t)}},function(t,e){t.exports=function(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}},function(t,e,r){var n=r(209);t.exports=function(t){return null==t?"":n(t)}},function(t,e,r){var n=r(210),o=r(105);t.exports=function(t,e){return null!=t&&o(t,e,n)}},function(t,e,r){var n=r(48),o=r(27),i=r(1),a=r(42),u=r(61),s=r(29);t.exports=function(t,e,r){for(var c=-1,f=(e=n(e,t)).length,h=!1;++c<f;){var l=s(e[c]);if(!(h=null!=t&&r(t,l)))break;t=t[l]}return h||++c!=f?h:!!(f=null==t?0:t.length)&&u(f)&&a(l,f)&&(i(t)||o(t))}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,r){var n=r(213),o=r(105);t.exports=function(t,e){return null!=t&&o(t,e,n)}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e,r){var n=r(49),o=r(13),i=r(110),a=r(1);t.exports=function(t,e){return(a(t)?n:i)(t,o(e,3))}},function(t,e,r){var n=r(46),o=r(12);t.exports=function(t,e){var r=-1,i=o(t)?Array(t.length):[];return n(t,(function(t,n,o){i[++r]=e(t,n,o)})),i}},function(t,e,r){var n=r(215),o=r(46),i=r(13),a=r(216),u=r(1);t.exports=function(t,e,r){var s=u(t)?n:a,c=arguments.length<3;return s(t,i(e,4),r,c,o)}},function(t,e,r){var n=r(226),o=Math.max;t.exports=function(t,e,r){return e=o(void 0===e?t.length-1:e,0),function(){for(var i=arguments,a=-1,u=o(i.length-e,0),s=Array(u);++a<u;)s[a]=i[e+a];a=-1;for(var c=Array(e+1);++a<e;)c[a]=i[a];return c[e]=r(s),n(t,this,c)}}},function(t,e,r){var n=r(227),o=r(228)(n);t.exports=o},function(t,e){t.exports=function(t,e,r,n){for(var o=t.length,i=r+(n?1:-1);n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}},function(t,e,r){var n=r(12),o=r(10);t.exports=function(t){return o(t)&&n(t)}},function(t,e,r){var n=r(237),o=r(14);t.exports=function(t){return null==t?[]:n(t,o(t))}},function(t,e,r){var n=r(5),o=r(118);t.exports=function(t,e,r,n){return function(t,e,r,n){var i,a,u={},s=new o,c=function(t){var e=t.v!==i?t.v:t.w,n=u[e],o=r(t),c=a.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+t+" Weight: "+o);c<n.distance&&(n.distance=c,n.predecessor=i,s.decrease(e,c))};t.nodes().forEach((function(t){var r=t===e?0:Number.POSITIVE_INFINITY;u[t]={distance:r},s.add(t,r)}));for(;s.size()>0&&(i=s.removeMin(),(a=u[i]).distance!==Number.POSITIVE_INFINITY);)n(i).forEach(c);return u}(t,String(e),r||i,n||function(e){return t.outEdges(e)})};var i=n.constant(1)},function(t,e,r){var n=r(5);function o(){this._arr=[],this._keyIndices={}}t.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(t){return t.key}))},o.prototype.has=function(t){return n.has(this._keyIndices,t)},o.prototype.priority=function(t){var e=this._keyIndices[t];if(void 0!==e)return this._arr[e].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(t,e){var r=this._keyIndices;if(t=String(t),!n.has(r,t)){var o=this._arr,i=o.length;return r[t]=i,o.push({key:t,priority:e}),this._decrease(i),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var t=this._arr.pop();return delete this._keyIndices[t.key],this._heapify(0),t.key},o.prototype.decrease=function(t,e){var r=this._keyIndices[t];if(e>this._arr[r].priority)throw new Error("New priority is greater than current priority. Key: "+t+" Old: "+this._arr[r].priority+" New: "+e);this._arr[r].priority=e,this._decrease(r)},o.prototype._heapify=function(t){var e=this._arr,r=2*t,n=r+1,o=t;r<e.length&&(o=e[r].priority<e[o].priority?r:o,n<e.length&&(o=e[n].priority<e[o].priority?n:o),o!==t&&(this._swap(t,o),this._heapify(o)))},o.prototype._decrease=function(t){for(var e,r=this._arr,n=r[t].priority;0!==t&&!(r[e=t>>1].priority<n);)this._swap(t,e),t=e},o.prototype._swap=function(t,e){var r=this._arr,n=this._keyIndices,o=r[t],i=r[e];r[t]=i,r[e]=o,n[i.key]=t,n[o.key]=e}},function(t,e,r){var n=r(5);t.exports=function(t){var e=0,r=[],o={},i=[];return t.nodes().forEach((function(a){n.has(o,a)||function a(u){var s=o[u]={onStack:!0,lowlink:e,index:e++};if(r.push(u),t.successors(u).forEach((function(t){n.has(o,t)?o[t].onStack&&(s.lowlink=Math.min(s.lowlink,o[t].index)):(a(t),s.lowlink=Math.min(s.lowlink,o[t].lowlink))})),s.lowlink===s.index){var c,f=[];do{c=r.pop(),o[c].onStack=!1,f.push(c)}while(u!==c);i.push(f)}}(a)})),i}},function(t,e,r){var n=r(5);function o(t){var e={},r={},o=[];if(n.each(t.sinks(),(function a(u){if(n.has(r,u))throw new i;n.has(e,u)||(r[u]=!0,e[u]=!0,n.each(t.predecessors(u),a),delete r[u],o.push(u))})),n.size(e)!==t.nodeCount())throw new i;return o}function i(){}t.exports=o,o.CycleException=i,i.prototype=new Error},function(t,e,r){var n=r(5);t.exports=function(t,e,r){n.isArray(e)||(e=[e]);var o=(t.isDirected()?t.successors:t.neighbors).bind(t),i=[],a={};return n.each(e,(function(e){if(!t.hasNode(e))throw new Error("Graph does not have node: "+e);!function t(e,r,o,i,a,u){n.has(i,r)||(i[r]=!0,o||u.push(r),n.each(a(r),(function(r){t(e,r,o,i,a,u)})),o&&u.push(r))}(t,e,"post"===r,a,o,i)})),i}},function(t,e,r){var n=r(256);t.exports=function(t){return t?(t=n(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,r){var n=r(72);t.exports=function(t){return(null==t?0:t.length)?n(t,1):[]}},function(t,e,r){var n=r(41),o=r(20);t.exports=function(t,e,r){(void 0!==r&&!o(t[e],r)||void 0===r&&!(e in t))&&n(t,e,r)}},function(t,e){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},function(t,e){t.exports=function(t,e){return t<e}},function(t,e,r){"use strict";var n=r(0),o=r(7).Graph,i=r(52).slack;function a(t,e){return n.forEach(t.nodes(),(function r(o){n.forEach(e.nodeEdges(o),(function(n){var a=n.v,u=o===a?n.w:a;t.hasNode(u)||i(e,n)||(t.setNode(u,{}),t.setEdge(o,u,{}),r(u))}))})),t.nodeCount()}function u(t,e){return n.minBy(e.edges(),(function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return i(e,r)}))}function s(t,e,r){n.forEach(t.nodes(),(function(t){e.node(t).rank+=r}))}t.exports=function(t){var e,r,n=new o({directed:!1}),c=t.nodes()[0],f=t.nodeCount();n.setNode(c,{});for(;a(n,t)<f;)e=u(n,t),r=n.hasNode(e.v)?i(t,e):-i(t,e),s(n,t,r);return n}},function(t,e,r){var n=r(315),o={};for(var i in n)n.hasOwnProperty(i)&&(o[n[i]]=i);var a=t.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var u in a)if(a.hasOwnProperty(u)){if(!("channels"in a[u]))throw new Error("missing channels property: "+u);if(!("labels"in a[u]))throw new Error("missing channel labels property: "+u);if(a[u].labels.length!==a[u].channels)throw new Error("channel and label counts mismatch: "+u);var s=a[u].channels,c=a[u].labels;delete a[u].channels,delete a[u].labels,Object.defineProperty(a[u],"channels",{value:s}),Object.defineProperty(a[u],"labels",{value:c})}a.rgb.hsl=function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),u=Math.max(n,o,i),s=u-a;return u===a?e=0:n===u?e=(o-i)/s:o===u?e=2+(i-n)/s:i===u&&(e=4+(n-o)/s),(e=Math.min(60*e,360))<0&&(e+=360),r=(a+u)/2,[e,100*(u===a?0:r<=.5?s/(u+a):s/(2-u-a)),100*r]},a.rgb.hsv=function(t){var e,r,n,o,i,a=t[0]/255,u=t[1]/255,s=t[2]/255,c=Math.max(a,u,s),f=c-Math.min(a,u,s),h=function(t){return(c-t)/6/f+.5};return 0===f?o=i=0:(i=f/c,e=h(a),r=h(u),n=h(s),a===c?o=n-r:u===c?o=1/3+e-n:s===c&&(o=2/3+r-e),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*c]},a.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2];return[a.rgb.hsl(t)[0],100*(1/255*Math.min(e,Math.min(r,n))),100*(n=1-1/255*Math.max(e,Math.max(r,n)))]},a.rgb.cmyk=function(t){var e,r=t[0]/255,n=t[1]/255,o=t[2]/255;return[100*((1-r-(e=Math.min(1-r,1-n,1-o)))/(1-e)||0),100*((1-n-e)/(1-e)||0),100*((1-o-e)/(1-e)||0),100*e]},a.rgb.keyword=function(t){var e=o[t];if(e)return e;var r,i,a,u=1/0;for(var s in n)if(n.hasOwnProperty(s)){var c=n[s],f=(i=t,a=c,Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));f<u&&(u=f,r=s)}return r},a.keyword.rgb=function(t){return n[t]},a.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;return[100*(.4124*(e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*e+.7152*r+.0722*n),100*(.0193*e+.1192*r+.9505*n)]},a.rgb.lab=function(t){var e=a.rgb.xyz(t),r=e[0],n=e[1],o=e[2];return n/=100,o/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},a.hsl.rgb=function(t){var e,r,n,o,i,a=t[0]/360,u=t[1]/100,s=t[2]/100;if(0===u)return[i=255*s,i,i];e=2*s-(r=s<.5?s*(1+u):s+u-s*u),o=[0,0,0];for(var c=0;c<3;c++)(n=a+1/3*-(c-1))<0&&n++,n>1&&n--,i=6*n<1?e+6*(r-e)*n:2*n<1?r:3*n<2?e+(r-e)*(2/3-n)*6:e,o[c]=255*i;return o},a.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,o=r,i=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,o*=i<=1?i:2-i,[e,100*(0===n?2*o/(i+o):2*r/(n+r)),100*((n+r)/2)]},a.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,o=Math.floor(e)%6,i=e-Math.floor(e),a=255*n*(1-r),u=255*n*(1-r*i),s=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,s,a];case 1:return[u,n,a];case 2:return[a,n,s];case 3:return[a,u,n];case 4:return[s,a,n];case 5:return[n,a,u]}},a.hsv.hsl=function(t){var e,r,n,o=t[0],i=t[1]/100,a=t[2]/100,u=Math.max(a,.01);return n=(2-i)*a,r=i*u,[o,100*(r=(r/=(e=(2-i)*u)<=1?e:2-e)||0),100*(n/=2)]},a.hwb.rgb=function(t){var e,r,n,o,i,a,u,s=t[0]/360,c=t[1]/100,f=t[2]/100,h=c+f;switch(h>1&&(c/=h,f/=h),n=6*s-(e=Math.floor(6*s)),0!=(1&e)&&(n=1-n),o=c+n*((r=1-f)-c),e){default:case 6:case 0:i=r,a=o,u=c;break;case 1:i=o,a=r,u=c;break;case 2:i=c,a=r,u=o;break;case 3:i=c,a=o,u=r;break;case 4:i=o,a=c,u=r;break;case 5:i=r,a=c,u=o}return[255*i,255*a,255*u]},a.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,o=t[3]/100;return[255*(1-Math.min(1,e*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},a.xyz.rgb=function(t){var e,r,n,o=t[0]/100,i=t[1]/100,a=t[2]/100;return r=-.9689*o+1.8758*i+.0415*a,n=.0557*o+-.204*i+1.057*a,e=(e=3.2406*o+-1.5372*i+-.4986*a)>.0031308?1.055*Math.pow(e,1/2.4)-.055:12.92*e,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(e=Math.min(Math.max(0,e),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},a.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2];return r/=100,n/=108.883,e=(e/=95.047)>.008856?Math.pow(e,1/3):7.787*e+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(e-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},a.lab.xyz=function(t){var e,r,n,o=t[0];e=t[1]/500+(r=(o+16)/116),n=r-t[2]/200;var i=Math.pow(r,3),a=Math.pow(e,3),u=Math.pow(n,3);return r=i>.008856?i:(r-16/116)/7.787,e=a>.008856?a:(e-16/116)/7.787,n=u>.008856?u:(n-16/116)/7.787,[e*=95.047,r*=100,n*=108.883]},a.lab.lch=function(t){var e,r=t[0],n=t[1],o=t[2];return(e=360*Math.atan2(o,n)/2/Math.PI)<0&&(e+=360),[r,Math.sqrt(n*n+o*o),e]},a.lch.lab=function(t){var e,r=t[0],n=t[1];return e=t[2]/360*2*Math.PI,[r,n*Math.cos(e),n*Math.sin(e)]},a.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],o=1 in arguments?arguments[1]:a.rgb.hsv(t)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return 2===o&&(i+=60),i},a.hsv.ansi16=function(t){return a.rgb.ansi16(a.hsv.rgb(t),t[2])},a.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},a.ansi16.rgb=function(t){var e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),[e=e/10.5*255,e,e];var r=.5*(1+~~(t>50));return[(1&e)*r*255,(e>>1&1)*r*255,(e>>2&1)*r*255]},a.ansi256.rgb=function(t){if(t>=232){var e=10*(t-232)+8;return[e,e,e]}var r;return t-=16,[Math.floor(t/36)/5*255,Math.floor((r=t%36)/6)/5*255,r%6/5*255]},a.rgb.hex=function(t){var e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},a.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];3===e[0].length&&(r=r.split("").map((function(t){return t+t})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},a.rgb.hcg=function(t){var e,r=t[0]/255,n=t[1]/255,o=t[2]/255,i=Math.max(Math.max(r,n),o),a=Math.min(Math.min(r,n),o),u=i-a;return e=u<=0?0:i===r?(n-o)/u%6:i===n?2+(o-r)/u:4+(r-n)/u+4,e/=6,[360*(e%=1),100*u,100*(u<1?a/(1-u):0)]},a.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,o=0;return(n=r<.5?2*e*r:2*e*(1-r))<1&&(o=(r-.5*n)/(1-n)),[t[0],100*n,100*o]},a.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},a.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(0===r)return[255*n,255*n,255*n];var o,i=[0,0,0],a=e%1*6,u=a%1,s=1-u;switch(Math.floor(a)){case 0:i[0]=1,i[1]=u,i[2]=0;break;case 1:i[0]=s,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=u;break;case 3:i[0]=0,i[1]=s,i[2]=1;break;case 4:i[0]=u,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=s}return o=(1-r)*n,[255*(r*i[0]+o),255*(r*i[1]+o),255*(r*i[2]+o)]},a.hcg.hsv=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e),n=0;return r>0&&(n=e/r),[t[0],100*n,100*r]},a.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100*(1-e)+.5*e,n=0;return r>0&&r<.5?n=e/(2*r):r>=.5&&r<1&&(n=e/(2*(1-r))),[t[0],100*n,100*r]},a.hcg.hwb=function(t){var e=t[1]/100,r=e+t[2]/100*(1-e);return[t[0],100*(r-e),100*(1-r)]},a.hwb.hcg=function(t){var e=t[1]/100,r=1-t[2]/100,n=r-e,o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},a.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},a.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},a.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},a.gray.hsl=a.gray.hsv=function(t){return[0,0,t[0]]},a.gray.hwb=function(t){return[0,100,t[0]]},a.gray.cmyk=function(t){return[0,0,0,t[0]]},a.gray.lab=function(t){return[t[0],0,0]},a.gray.hex=function(t){var e=255&Math.round(t[0]/100*255),r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r},a.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=o,e.clone=function(t){var e=new n.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=i,e.fromValues=a,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t},e.add=function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t},e.subtract=u,e.multiply=s,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t},e.max=function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t},e.scaleAndAdd=function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t},e.distance=f,e.squaredDistance=h,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=d,e.dot=p,e.cross=function(t,e,r){var n=e[0],o=e[1],i=e[2],a=r[0],u=r[1],s=r[2];return t[0]=o*s-i*u,t[1]=i*a-n*s,t[2]=n*u-o*a,t},e.lerp=function(t,e,r,n){var o=e[0],i=e[1],a=e[2];return t[0]=o+n*(r[0]-o),t[1]=i+n*(r[1]-i),t[2]=a+n*(r[2]-a),t},e.hermite=function(t,e,r,n,o,i){var a=i*i,u=a*(2*i-3)+1,s=a*(i-2)+i,c=a*(i-1),f=a*(3-2*i);return t[0]=e[0]*u+r[0]*s+n[0]*c+o[0]*f,t[1]=e[1]*u+r[1]*s+n[1]*c+o[1]*f,t[2]=e[2]*u+r[2]*s+n[2]*c+o[2]*f,t},e.bezier=function(t,e,r,n,o,i){var a=1-i,u=a*a,s=i*i,c=u*a,f=3*i*u,h=3*s*a,l=s*i;return t[0]=e[0]*c+r[0]*f+n[0]*h+o[0]*l,t[1]=e[1]*c+r[1]*f+n[1]*h+o[1]*l,t[2]=e[2]*c+r[2]*f+n[2]*h+o[2]*l,t},e.random=function(t,e){e=e||1;var r=2*n.RANDOM()*Math.PI,o=2*n.RANDOM()-1,i=Math.sqrt(1-o*o)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=o*e,t},e.transformMat4=function(t,e,r){var n=e[0],o=e[1],i=e[2],a=r[3]*n+r[7]*o+r[11]*i+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*o+r[8]*i+r[12])/a,t[1]=(r[1]*n+r[5]*o+r[9]*i+r[13])/a,t[2]=(r[2]*n+r[6]*o+r[10]*i+r[14])/a,t},e.transformMat3=function(t,e,r){var n=e[0],o=e[1],i=e[2];return t[0]=n*r[0]+o*r[3]+i*r[6],t[1]=n*r[1]+o*r[4]+i*r[7],t[2]=n*r[2]+o*r[5]+i*r[8],t},e.transformQuat=function(t,e,r){var n=r[0],o=r[1],i=r[2],a=r[3],u=e[0],s=e[1],c=e[2],f=o*c-i*s,h=i*u-n*c,l=n*s-o*u,d=o*l-i*h,p=i*f-n*l,v=n*h-o*f,g=2*a;return f*=g,h*=g,l*=g,d*=2,p*=2,v*=2,t[0]=u+f+d,t[1]=s+h+p,t[2]=c+l+v,t},e.rotateX=function(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[0],i[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),i[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.rotateY=function(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),i[1]=o[1],i[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.rotateZ=function(t,e,r,n){var o=[],i=[];return o[0]=e[0]-r[0],o[1]=e[1]-r[1],o[2]=e[2]-r[2],i[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),i[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),i[2]=o[2],t[0]=i[0]+r[0],t[1]=i[1]+r[1],t[2]=i[2]+r[2],t},e.angle=function(t,e){var r=a(t[0],t[1],t[2]),n=a(e[0],e[1],e[2]);d(r,r),d(n,n);var o=p(r,n);return o>1?0:o<-1?Math.PI:Math.acos(o)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var r=t[0],o=t[1],i=t[2],a=e[0],u=e[1],s=e[2];return Math.abs(r-a)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))&&Math.abs(i-s)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))};var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(55));function o(){var t=new n.ARRAY_TYPE(3);return n.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function i(t){var e=t[0],r=t[1],n=t[2];return Math.sqrt(e*e+r*r+n*n)}function a(t,e,r){var o=new n.ARRAY_TYPE(3);return o[0]=t,o[1]=e,o[2]=r,o}function u(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function s(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function c(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function f(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return Math.sqrt(r*r+n*n+o*o)}function h(t,e){var r=e[0]-t[0],n=e[1]-t[1],o=e[2]-t[2];return r*r+n*n+o*o}function l(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function d(t,e){var r=e[0],n=e[1],o=e[2],i=r*r+n*n+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i),t}function p(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}var v;e.sub=u,e.mul=s,e.div=c,e.dist=f,e.sqrDist=h,e.len=i,e.sqrLen=l,e.forEach=(v=o(),function(t,e,r,n,o,i){var a=void 0,u=void 0;for(e||(e=3),r||(r=0),u=n?Math.min(n*e+r,t.length):t.length,a=r;a<u;a+=e)v[0]=t[a],v[1]=t[a+1],v[2]=t[a+2],o(v,v,i),t[a]=v[0],t[a+1]=v[1],t[a+2]=v[2];return t})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=t,this.name=t,this.originalEvent=e,this.timeStamp=e.timeStamp}return t.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){this.propagationStopped=!0},t.prototype.toString=function(){return"[Event (type="+this.type+")]"},t.prototype.save=function(){},t.prototype.restore=function(){},t}();e.default=n},,,,function(t,e,r){"use strict";function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=n(t);return null!==t&&"object"===e||"function"===e}},function(t,e,r){var n=r(136);t.exports={Graph:n.Graph,json:r(239),alg:r(240),version:n.version}},function(t,e,r){t.exports={Graph:r(56),version:r(238)}},function(t,e,r){var n=r(75);t.exports=function(t){return n(t,4)}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,r){var n=r(37),o=Array.prototype.splice;t.exports=function(t){var e=this.__data__,r=n(e,t);return!(r<0)&&(r==e.length-1?e.pop():o.call(e,r,1),--this.size,!0)}},function(t,e,r){var n=r(37);t.exports=function(t){var e=this.__data__,r=n(e,t);return r<0?void 0:e[r][1]}},function(t,e,r){var n=r(37);t.exports=function(t){return n(this.__data__,t)>-1}},function(t,e,r){var n=r(37);t.exports=function(t,e){var r=this.__data__,o=n(r,t);return o<0?(++this.size,r.push([t,e])):r[o][1]=e,this}},function(t,e,r){var n=r(36);t.exports=function(){this.__data__=new n,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,r){var n=r(36),o=r(57),i=r(58);t.exports=function(t,e){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!o||a.length<199)return a.push([t,e]),this.size=++r.size,this;r=this.__data__=new i(a)}return r.set(t,e),this.size=r.size,this}},function(t,e,r){var n=r(25),o=r(152),i=r(6),a=r(77),u=/^\\[object .+?Constructor\\]$/,s=Function.prototype,c=Object.prototype,f=s.toString,h=c.hasOwnProperty,l=RegExp("^"+f.call(h).replace(/[\\\\^$.*+?()[\\]{}|]/g,"\\\\$&").replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!i(t)||o(t))&&(n(t)?l:u).test(a(t))}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(n=window)}t.exports=n},function(t,e,r){var n=r(21),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,u=n?n.toStringTag:void 0;t.exports=function(t){var e=i.call(t,u),r=t[u];try{t[u]=void 0;var n=!0}catch(t){}var o=a.call(t);return n&&(e?t[u]=r:delete t[u]),o}},function(t,e){var r=Object.prototype.toString;t.exports=function(t){return r.call(t)}},function(t,e,r){var n,o=r(153),i=(n=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";t.exports=function(t){return!!i&&i in t}},function(t,e,r){var n=r(8)["__core-js_shared__"];t.exports=n},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,r){var n=r(156),o=r(36),i=r(57);t.exports=function(){this.size=0,this.__data__={hash:new n,map:new(i||o),string:new n}}},function(t,e,r){var n=r(157),o=r(158),i=r(159),a=r(160),u=r(161);function s(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}s.prototype.clear=n,s.prototype.delete=o,s.prototype.get=i,s.prototype.has=a,s.prototype.set=u,t.exports=s},function(t,e,r){var n=r(38);t.exports=function(){this.__data__=n?n(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,r){var n=r(38),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(n){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return o.call(e,t)?e[t]:void 0}},function(t,e,r){var n=r(38),o=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return n?void 0!==e[t]:o.call(e,t)}},function(t,e,r){var n=r(38);t.exports=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=n&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e,r){var n=r(39);t.exports=function(t){var e=n(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){var e=r(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,r){var n=r(39);t.exports=function(t){return n(this,t).get(t)}},function(t,e,r){var n=r(39);t.exports=function(t){return n(this,t).has(t)}},function(t,e,r){var n=r(39);t.exports=function(t,e){var r=n(this,t),o=r.size;return r.set(t,e),this.size+=r.size==o?0:1,this}},function(t,e,r){var n=r(26),o=r(14);t.exports=function(t,e){return t&&n(e,o(e),t)}},function(t,e){t.exports=function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}},function(t,e,r){var n=r(16),o=r(10);t.exports=function(t){return o(t)&&"[object Arguments]"==n(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,r){var n=r(16),o=r(61),i=r(10),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return i(t)&&o(t.length)&&!!a[n(t)]}},function(t,e,r){var n=r(80)(Object.keys,Object);t.exports=n},function(t,e,r){var n=r(26),o=r(17);t.exports=function(t,e){return t&&n(e,o(e),t)}},function(t,e,r){var n=r(6),o=r(44),i=r(175),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!n(t))return i(t);var e=o(t),r=[];for(var u in t)("constructor"!=u||!e&&a.call(t,u))&&r.push(u);return r}},function(t,e){t.exports=function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}},function(t,e,r){var n=r(26),o=r(64);t.exports=function(t,e){return n(t,o(t),e)}},function(t,e,r){var n=r(26),o=r(85);t.exports=function(t,e){return n(t,o(t),e)}},function(t,e,r){var n=r(87),o=r(85),i=r(17);t.exports=function(t){return n(t,i,o)}},function(t,e,r){var n=r(15)(r(8),"DataView");t.exports=n},function(t,e,r){var n=r(15)(r(8),"Promise");t.exports=n},function(t,e,r){var n=r(15)(r(8),"WeakMap");t.exports=n},function(t,e){var r=Object.prototype.hasOwnProperty;t.exports=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&r.call(t,"index")&&(n.index=t.index,n.input=t.input),n}},function(t,e,r){var n=r(66),o=r(184),i=r(185),a=r(186),u=r(90);t.exports=function(t,e,r){var s=t.constructor;switch(e){case"[object ArrayBuffer]":return n(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return o(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return u(t,r);case"[object Map]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return i(t);case"[object Set]":return new s;case"[object Symbol]":return a(t)}}},function(t,e,r){var n=r(66);t.exports=function(t,e){var r=e?n(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}},function(t,e){var r=/\\w*$/;t.exports=function(t){var e=new t.constructor(t.source,r.exec(t));return e.lastIndex=t.lastIndex,e}},function(t,e,r){var n=r(21),o=n?n.prototype:void 0,i=o?o.valueOf:void 0;t.exports=function(t){return i?Object(i.call(t)):{}}},function(t,e,r){var n=r(188),o=r(43),i=r(62),a=i&&i.isMap,u=a?o(a):n;t.exports=u},function(t,e,r){var n=r(23),o=r(10);t.exports=function(t){return o(t)&&"[object Map]"==n(t)}},function(t,e,r){var n=r(190),o=r(43),i=r(62),a=i&&i.isSet,u=a?o(a):n;t.exports=u},function(t,e,r){var n=r(23),o=r(10);t.exports=function(t){return o(t)&&"[object Set]"==n(t)}},function(t,e){t.exports=function(t){return function(e,r,n){for(var o=-1,i=Object(e),a=n(e),u=a.length;u--;){var s=a[t?u:++o];if(!1===r(i[s],s,i))break}return e}}},function(t,e,r){var n=r(12);t.exports=function(t,e){return function(r,o){if(null==r)return r;if(!n(r))return t(r,o);for(var i=r.length,a=e?i:-1,u=Object(r);(e?a--:++a<i)&&!1!==o(u[a],a,u););return r}}},function(t,e,r){var n=r(46);t.exports=function(t,e){var r=[];return n(t,(function(t,n,o){e(t,n,o)&&r.push(t)})),r}},function(t,e,r){var n=r(195),o=r(203),i=r(102);t.exports=function(t){var e=o(t);return 1==e.length&&e[0][2]?i(e[0][0],e[0][1]):function(r){return r===t||n(r,t,e)}}},function(t,e,r){var n=r(35),o=r(97);t.exports=function(t,e,r,i){var a=r.length,u=a,s=!i;if(null==t)return!u;for(t=Object(t);a--;){var c=r[a];if(s&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++a<u;){var f=(c=r[a])[0],h=t[f],l=c[1];if(s&&c[2]){if(void 0===h&&!(f in t))return!1}else{var d=new n;if(i)var p=i(h,l,f,t,e,d);if(!(void 0===p?o(l,h,3,i,d):p))return!1}}return!0}},function(t,e,r){var n=r(35),o=r(98),i=r(200),a=r(202),u=r(23),s=r(1),c=r(22),f=r(28),h="[object Object]",l=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,d,p,v){var g=s(t),y=s(e),m=g?"[object Array]":u(t),b=y?"[object Array]":u(e),w=(m="[object Arguments]"==m?h:m)==h,x=(b="[object Arguments]"==b?h:b)==h,M=m==b;if(M&&c(t)){if(!c(e))return!1;g=!0,w=!1}if(M&&!w)return v||(v=new n),g||f(t)?o(t,e,r,d,p,v):i(t,e,m,r,d,p,v);if(!(1&r)){var k=w&&l.call(t,"__wrapped__"),_=x&&l.call(e,"__wrapped__");if(k||_){var S=k?t.value():t,E=_?e.value():e;return v||(v=new n),p(S,E,r,d,v)}}return!!M&&(v||(v=new n),a(t,e,r,d,p,v))}},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}},function(t,e,r){var n=r(21),o=r(89),i=r(20),a=r(98),u=r(201),s=r(70),c=n?n.prototype:void 0,f=c?c.valueOf:void 0;t.exports=function(t,e,r,n,c,h,l){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new o(t),new o(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return i(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var d=u;case"[object Set]":var p=1&n;if(d||(d=s),t.size!=e.size&&!p)return!1;var v=l.get(t);if(v)return v==e;n|=2,l.set(t,e);var g=a(d(t),d(e),n,c,h,l);return l.delete(t),g;case"[object Symbol]":if(f)return f.call(t)==f.call(e)}return!1}},function(t,e){t.exports=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r}},function(t,e,r){var n=r(86),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,r,i,a,u){var s=1&r,c=n(t),f=c.length;if(f!=n(e).length&&!s)return!1;for(var h=f;h--;){var l=c[h];if(!(s?l in e:o.call(e,l)))return!1}var d=u.get(t),p=u.get(e);if(d&&p)return d==e&&p==t;var v=!0;u.set(t,e),u.set(e,t);for(var g=s;++h<f;){var y=t[l=c[h]],m=e[l];if(i)var b=s?i(m,y,l,e,t,u):i(y,m,l,t,e,u);if(!(void 0===b?y===m||a(y,m,r,i,u):b)){v=!1;break}g||(g="constructor"==l)}if(v&&!g){var w=t.constructor,x=e.constructor;w==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x||(v=!1)}return u.delete(t),u.delete(e),v}},function(t,e,r){var n=r(101),o=r(14);t.exports=function(t){for(var e=o(t),r=e.length;r--;){var i=e[r],a=t[i];e[r]=[i,a,n(a)]}return e}},function(t,e,r){var n=r(97),o=r(205),i=r(104),a=r(71),u=r(101),s=r(102),c=r(29);t.exports=function(t,e){return a(t)&&u(e)?s(c(t),e):function(r){var a=o(r,t);return void 0===a&&a===e?i(r,t):n(e,a,3)}}},function(t,e,r){var n=r(47);t.exports=function(t,e,r){var o=null==t?void 0:n(t,e);return void 0===o?r:o}},function(t,e,r){var n=r(207),o=/[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|(["\'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g,i=/\\\\(\\\\)?/g,a=n((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(o,(function(t,r,n,o){e.push(n?o.replace(i,"$1"):r||t)})),e}));t.exports=a},function(t,e,r){var n=r(208);t.exports=function(t){var e=n(t,(function(t){return 500===r.size&&r.clear(),t})),r=e.cache;return e}},function(t,e,r){var n=r(58);function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(o.Cache||n),r}o.Cache=n,t.exports=o},function(t,e,r){var n=r(21),o=r(49),i=r(1),a=r(24),u=n?n.prototype:void 0,s=u?u.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(i(e))return o(e,t)+"";if(a(e))return s?s.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,r){var n=r(106),o=r(212),i=r(71),a=r(29);t.exports=function(t){return i(t)?n(a(t)):o(t)}},function(t,e,r){var n=r(47);t.exports=function(t){return function(e){return n(e,t)}}},function(t,e){var r=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&r.call(t,e)}},function(t,e,r){var n=r(63),o=r(23),i=r(27),a=r(1),u=r(12),s=r(22),c=r(44),f=r(28),h=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(u(t)&&(a(t)||"string"==typeof t||"function"==typeof t.splice||s(t)||f(t)||i(t)))return!t.length;var e=o(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!n(t).length;for(var r in t)if(h.call(t,r))return!1;return!0}},function(t,e){t.exports=function(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}},function(t,e){t.exports=function(t,e,r,n,o){return o(t,(function(t,o,i){r=n?(n=!1,t):e(r,t,o,i)})),r}},function(t,e,r){var n=r(63),o=r(23),i=r(12),a=r(218),u=r(219);t.exports=function(t){if(null==t)return 0;if(i(t))return a(t)?u(t):t.length;var e=o(t);return"[object Map]"==e||"[object Set]"==e?t.size:n(t).length}},function(t,e,r){var n=r(16),o=r(1),i=r(10);t.exports=function(t){return"string"==typeof t||!o(t)&&i(t)&&"[object String]"==n(t)}},function(t,e,r){var n=r(220),o=r(221),i=r(222);t.exports=function(t){return o(t)?i(t):n(t)}},function(t,e,r){var n=r(106)("length");t.exports=n},function(t,e){var r=RegExp("[\\\\u200d\\\\ud800-\\\\udfff\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff\\\\ufe0e\\\\ufe0f]");t.exports=function(t){return r.test(t)}},function(t,e){var r="[\\\\ud800-\\\\udfff]",n="[\\\\u0300-\\\\u036f\\\\ufe20-\\\\ufe2f\\\\u20d0-\\\\u20ff]",o="\\\\ud83c[\\\\udffb-\\\\udfff]",i="[^\\\\ud800-\\\\udfff]",a="(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}",u="[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]",s="(?:"+n+"|"+o+")"+"?",c="[\\\\ufe0e\\\\ufe0f]?"+s+("(?:\\\\u200d(?:"+[i,a,u].join("|")+")[\\\\ufe0e\\\\ufe0f]?"+s+")*"),f="(?:"+[i+n+"?",n,a,u,r].join("|")+")",h=RegExp(o+"(?="+o+")|"+f+c,"g");t.exports=function(t){for(var e=h.lastIndex=0;h.test(t);)++e;return e}},function(t,e,r){var n=r(59),o=r(92),i=r(68),a=r(13),u=r(45),s=r(1),c=r(22),f=r(25),h=r(6),l=r(28);t.exports=function(t,e,r){var d=s(t),p=d||c(t)||l(t);if(e=a(e,4),null==r){var v=t&&t.constructor;r=p?d?new v:[]:h(t)&&f(v)?o(u(t)):{}}return(p?n:i)(t,(function(t,n,o){return e(r,t,n,o)})),r}},function(t,e,r){var n=r(72),o=r(50),i=r(229),a=r(115),u=o((function(t){return i(n(t,1,a,!0))}));t.exports=u},function(t,e,r){var n=r(21),o=r(27),i=r(1),a=n?n.isConcatSpreadable:void 0;t.exports=function(t){return i(t)||o(t)||!!(a&&t&&t[a])}},function(t,e){t.exports=function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}},function(t,e,r){var n=r(67),o=r(78),i=r(18),a=o?function(t,e){return o(t,"toString",{configurable:!0,enumerable:!1,value:n(e),writable:!0})}:i;t.exports=a},function(t,e){var r=Date.now;t.exports=function(t){var e=0,n=0;return function(){var o=r(),i=16-(o-n);if(n=o,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},function(t,e,r){var n=r(99),o=r(230),i=r(234),a=r(100),u=r(235),s=r(70);t.exports=function(t,e,r){var c=-1,f=o,h=t.length,l=!0,d=[],p=d;if(r)l=!1,f=i;else if(h>=200){var v=e?null:u(t);if(v)return s(v);l=!1,f=a,p=new n}else p=e?[]:d;t:for(;++c<h;){var g=t[c],y=e?e(g):g;if(g=r||0!==g?g:0,l&&y==y){for(var m=p.length;m--;)if(p[m]===y)continue t;e&&p.push(y),d.push(g)}else f(p,y,r)||(p!==d&&p.push(y),d.push(g))}return d}},function(t,e,r){var n=r(231);t.exports=function(t,e){return!!(null==t?0:t.length)&&n(t,e,0)>-1}},function(t,e,r){var n=r(114),o=r(232),i=r(233);t.exports=function(t,e,r){return e==e?i(t,e,r):n(t,o,r)}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,r){for(var n=r-1,o=t.length;++n<o;)if(t[n]===e)return n;return-1}},function(t,e){t.exports=function(t,e,r){for(var n=-1,o=null==t?0:t.length;++n<o;)if(r(e,t[n]))return!0;return!1}},function(t,e,r){var n=r(88),o=r(236),i=r(70),a=n&&1/i(new n([,-0]))[1]==1/0?function(t){return new n(t)}:o;t.exports=a},function(t,e){t.exports=function(){}},function(t,e,r){var n=r(49);t.exports=function(t,e){return n(e,(function(e){return t[e]}))}},function(t,e){t.exports="2.1.8"},function(t,e,r){var n=r(5),o=r(56);function i(t){return n.map(t.nodes(),(function(e){var r=t.node(e),o=t.parent(e),i={v:e};return n.isUndefined(r)||(i.value=r),n.isUndefined(o)||(i.parent=o),i}))}function a(t){return n.map(t.edges(),(function(e){var r=t.edge(e),o={v:e.v,w:e.w};return n.isUndefined(e.name)||(o.name=e.name),n.isUndefined(r)||(o.value=r),o}))}t.exports={write:function(t){var e={options:{directed:t.isDirected(),multigraph:t.isMultigraph(),compound:t.isCompound()},nodes:i(t),edges:a(t)};n.isUndefined(t.graph())||(e.value=n.clone(t.graph()));return e},read:function(t){var e=new o(t.options).setGraph(t.value);return n.each(t.nodes,(function(t){e.setNode(t.v,t.value),t.parent&&e.setParent(t.v,t.parent)})),n.each(t.edges,(function(t){e.setEdge({v:t.v,w:t.w,name:t.name},t.value)})),e}}},function(t,e,r){t.exports={components:r(241),dijkstra:r(117),dijkstraAll:r(242),findCycles:r(243),floydWarshall:r(244),isAcyclic:r(245),postorder:r(246),preorder:r(247),prim:r(248),tarjan:r(119),topsort:r(120)}},function(t,e,r){var n=r(5);t.exports=function(t){var e,r={},o=[];function i(o){n.has(r,o)||(r[o]=!0,e.push(o),n.each(t.successors(o),i),n.each(t.predecessors(o),i))}return n.each(t.nodes(),(function(t){e=[],i(t),e.length&&o.push(e)})),o}},function(t,e,r){var n=r(117),o=r(5);t.exports=function(t,e,r){return o.transform(t.nodes(),(function(o,i){o[i]=n(t,i,e,r)}),{})}},function(t,e,r){var n=r(5),o=r(119);t.exports=function(t){return n.filter(o(t),(function(e){return e.length>1||1===e.length&&t.hasEdge(e[0],e[0])}))}},function(t,e,r){var n=r(5);t.exports=function(t,e,r){return function(t,e,r){var n={},o=t.nodes();return o.forEach((function(t){n[t]={},n[t][t]={distance:0},o.forEach((function(e){t!==e&&(n[t][e]={distance:Number.POSITIVE_INFINITY})})),r(t).forEach((function(r){var o=r.v===t?r.w:r.v,i=e(r);n[t][o]={distance:i,predecessor:t}}))})),o.forEach((function(t){var e=n[t];o.forEach((function(r){var i=n[r];o.forEach((function(r){var n=i[t],o=e[r],a=i[r],u=n.distance+o.distance;u<a.distance&&(a.distance=u,a.predecessor=o.predecessor)}))}))})),n}(t,e||o,r||function(e){return t.outEdges(e)})};var o=n.constant(1)},function(t,e,r){var n=r(120);t.exports=function(t){try{n(t)}catch(t){if(t instanceof n.CycleException)return!1;throw t}return!0}},function(t,e,r){var n=r(121);t.exports=function(t,e){return n(t,e,"post")}},function(t,e,r){var n=r(121);t.exports=function(t,e){return n(t,e,"pre")}},function(t,e,r){var n=r(5),o=r(56),i=r(118);t.exports=function(t,e){var r,a=new o,u={},s=new i;function c(t){var n=t.v===r?t.w:t.v,o=s.priority(n);if(void 0!==o){var i=e(t);i<o&&(u[n]=r,s.decrease(n,i))}}if(0===t.nodeCount())return a;n.each(t.nodes(),(function(t){s.add(t,Number.POSITIVE_INFINITY),a.setNode(t)})),s.decrease(t.nodes()[0],0);var f=!1;for(;s.size()>0;){if(r=s.removeMin(),n.has(u,r))a.setEdge(r,u[r]);else{if(f)throw new Error("Input graph is not connected: "+t);f=!0}t.nodeEdges(r).forEach(c)}return a}},function(t,e,r){"use strict";var n=r(0),o=r(287),i=r(290),a=r(291),u=r(4).normalizeRanks,s=r(293),c=r(4).removeEmptyRanks,f=r(294),h=r(295),l=r(296),d=r(297),p=r(306),v=r(4),g=r(7).Graph;t.exports=function(t,e){var r=e&&e.debugTiming?v.time:v.notime;r("layout",(function(){var e=r("  buildLayoutGraph",(function(){return function(t){var e=new g({multigraph:!0,compound:!0}),r=E(t.graph());return e.setGraph(n.merge({},m,S(r,y),n.pick(r,b))),n.forEach(t.nodes(),(function(r){var o=E(t.node(r));e.setNode(r,n.defaults(S(o,w),x)),e.setParent(r,t.parent(r))})),n.forEach(t.edges(),(function(r){var o=E(t.edge(r));e.setEdge(r,n.merge({},k,S(o,M),n.pick(o,_)))})),e}(t)}));r("  runLayout",(function(){!function(t,e){e("    makeSpaceForEdgeLabels",(function(){!function(t){var e=t.graph();e.ranksep/=2,n.forEach(t.edges(),(function(r){var n=t.edge(r);n.minlen*=2,"c"!==n.labelpos.toLowerCase()&&("TB"===e.rankdir||"BT"===e.rankdir?n.width+=n.labeloffset:n.height+=n.labeloffset)}))}(t)})),e("    removeSelfEdges",(function(){!function(t){n.forEach(t.edges(),(function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e:e,label:t.edge(e)}),t.removeEdge(e)}}))}(t)})),e("    acyclic",(function(){o.run(t)})),e("    nestingGraph.run",(function(){f.run(t)})),e("    rank",(function(){a(v.asNonCompoundGraph(t))})),e("    injectEdgeLabelProxies",(function(){!function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);if(r.width&&r.height){var n=t.node(e.v),o={rank:(t.node(e.w).rank-n.rank)/2+n.rank,e:e};v.addDummyNode(t,"edge-proxy",o,"_ep")}}))}(t)})),e("    removeEmptyRanks",(function(){c(t)})),e("    nestingGraph.cleanup",(function(){f.cleanup(t)})),e("    normalizeRanks",(function(){u(t)})),e("    assignRankMinMax",(function(){!function(t){var e=0;n.forEach(t.nodes(),(function(r){var o=t.node(r);o.borderTop&&(o.minRank=t.node(o.borderTop).rank,o.maxRank=t.node(o.borderBottom).rank,e=n.max(e,o.maxRank))})),t.graph().maxRank=e}(t)})),e("    removeEdgeLabelProxies",(function(){!function(t){n.forEach(t.nodes(),(function(e){var r=t.node(e);"edge-proxy"===r.dummy&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))}))}(t)})),e("    normalize.run",(function(){i.run(t)})),e("    parentDummyChains",(function(){s(t)})),e("    addBorderSegments",(function(){h(t)})),e("    order",(function(){d(t)})),e("    insertSelfEdges",(function(){!function(t){var e=v.buildLayerMatrix(t);n.forEach(e,(function(e){var r=0;n.forEach(e,(function(e,o){var i=t.node(e);i.order=o+r,n.forEach(i.selfEdges,(function(e){v.addDummyNode(t,"selfedge",{width:e.label.width,height:e.label.height,rank:i.rank,order:o+ ++r,e:e.e,label:e.label},"_se")})),delete i.selfEdges}))}))}(t)})),e("    adjustCoordinateSystem",(function(){l.adjust(t)})),e("    position",(function(){p(t)})),e("    positionSelfEdges",(function(){!function(t){n.forEach(t.nodes(),(function(e){var r=t.node(e);if("selfedge"===r.dummy){var n=t.node(r.e.v),o=n.x+n.width/2,i=n.y,a=r.x-o,u=n.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:o+2*a/3,y:i-u},{x:o+5*a/6,y:i-u},{x:o+a,y:i},{x:o+5*a/6,y:i+u},{x:o+2*a/3,y:i+u}],r.label.x=r.x,r.label.y=r.y}}))}(t)})),e("    removeBorderNodes",(function(){!function(t){n.forEach(t.nodes(),(function(e){if(t.children(e).length){var r=t.node(e),o=t.node(r.borderTop),i=t.node(r.borderBottom),a=t.node(n.last(r.borderLeft)),u=t.node(n.last(r.borderRight));r.width=Math.abs(u.x-a.x),r.height=Math.abs(i.y-o.y),r.x=a.x+r.width/2,r.y=o.y+r.height/2}})),n.forEach(t.nodes(),(function(e){"border"===t.node(e).dummy&&t.removeNode(e)}))}(t)})),e("    normalize.undo",(function(){i.undo(t)})),e("    fixupEdgeLabelCoords",(function(){!function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);if(n.has(r,"x"))switch("l"!==r.labelpos&&"r"!==r.labelpos||(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset}}))}(t)})),e("    undoCoordinateSystem",(function(){l.undo(t)})),e("    translateGraph",(function(){!function(t){var e=Number.POSITIVE_INFINITY,r=0,o=Number.POSITIVE_INFINITY,i=0,a=t.graph(),u=a.marginx||0,s=a.marginy||0;function c(t){var n=t.x,a=t.y,u=t.width,s=t.height;e=Math.min(e,n-u/2),r=Math.max(r,n+u/2),o=Math.min(o,a-s/2),i=Math.max(i,a+s/2)}n.forEach(t.nodes(),(function(e){c(t.node(e))})),n.forEach(t.edges(),(function(e){var r=t.edge(e);n.has(r,"x")&&c(r)})),e-=u,o-=s,n.forEach(t.nodes(),(function(r){var n=t.node(r);n.x-=e,n.y-=o})),n.forEach(t.edges(),(function(r){var i=t.edge(r);n.forEach(i.points,(function(t){t.x-=e,t.y-=o})),n.has(i,"x")&&(i.x-=e),n.has(i,"y")&&(i.y-=o)})),a.width=r-e+u,a.height=i-o+s}(t)})),e("    assignNodeIntersects",(function(){!function(t){n.forEach(t.edges(),(function(e){var r,n,o=t.edge(e),i=t.node(e.v),a=t.node(e.w);o.points?(r=o.points[0],n=o.points[o.points.length-1]):(o.points=[],r=a,n=i),o.points.unshift(v.intersectRect(i,r)),o.points.push(v.intersectRect(a,n))}))}(t)})),e("    reversePoints",(function(){!function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);r.reversed&&r.points.reverse()}))}(t)})),e("    acyclic.undo",(function(){o.undo(t)}))}(e,r)})),r("  updateInputGraph",(function(){!function(t,e){n.forEach(t.nodes(),(function(r){var n=t.node(r),o=e.node(r);n&&(n.x=o.x,n.y=o.y,e.children(r).length&&(n.width=o.width,n.height=o.height))})),n.forEach(t.edges(),(function(r){var o=t.edge(r),i=e.edge(r);o.points=i.points,n.has(i,"x")&&(o.x=i.x,o.y=i.y)})),t.graph().width=e.graph().width,t.graph().height=e.graph().height}(t,e)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],m={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},b=["acyclicer","ranker","rankdir","align"],w=["width","height"],x={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],k={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_=["labelpos"];function S(t,e){return n.mapValues(n.pick(t,e),Number)}function E(t){var e={};return n.forEach(t,(function(t,r){e[r.toLowerCase()]=t})),e}},function(t,e,r){var n=r(75);t.exports=function(t){return n(t,5)}},function(t,e,r){var n=r(50),o=r(20),i=r(51),a=r(17),u=Object.prototype,s=u.hasOwnProperty,c=n((function(t,e){t=Object(t);var r=-1,n=e.length,c=n>2?e[2]:void 0;for(c&&i(e[0],e[1],c)&&(n=1);++r<n;)for(var f=e[r],h=a(f),l=-1,d=h.length;++l<d;){var p=h[l],v=t[p];(void 0===v||o(v,u[p])&&!s.call(t,p))&&(t[p]=f[p])}return t}));t.exports=c},function(t,e,r){var n=r(253)(r(254));t.exports=n},function(t,e,r){var n=r(13),o=r(12),i=r(14);t.exports=function(t){return function(e,r,a){var u=Object(e);if(!o(e)){var s=n(r,3);e=i(e),r=function(t){return s(u[t],t,u)}}var c=t(e,r,a);return c>-1?u[s?e[c]:c]:void 0}}},function(t,e,r){var n=r(114),o=r(13),i=r(255),a=Math.max;t.exports=function(t,e,r){var u=null==t?0:t.length;if(!u)return-1;var s=null==r?0:i(r);return s<0&&(s=a(u+s,0)),n(t,o(e,3),s)}},function(t,e,r){var n=r(122);t.exports=function(t){var e=n(t),r=e%1;return e==e?r?e-r:e:0}},function(t,e,r){var n=r(6),o=r(24),i=/^\\s+|\\s+$/g,a=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,s=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(o(t))return NaN;if(n(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=n(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var r=u.test(t);return r||s.test(t)?c(t.slice(2),r?2:8):a.test(t)?NaN:+t}},function(t,e,r){var n=r(69),o=r(95),i=r(17);t.exports=function(t,e){return null==t?t:n(t,o(e),i)}},function(t,e){t.exports=function(t){var e=null==t?0:t.length;return e?t[e-1]:void 0}},function(t,e,r){var n=r(41),o=r(68),i=r(13);t.exports=function(t,e){var r={};return e=i(e,3),o(t,(function(t,o,i){n(r,o,e(t,o,i))})),r}},function(t,e,r){var n=r(73),o=r(261),i=r(18);t.exports=function(t){return t&&t.length?n(t,i,o):void 0}},function(t,e){t.exports=function(t,e){return t>e}},function(t,e,r){var n=r(263),o=r(267)((function(t,e,r){n(t,e,r)}));t.exports=o},function(t,e,r){var n=r(35),o=r(124),i=r(69),a=r(264),u=r(6),s=r(17),c=r(125);t.exports=function t(e,r,f,h,l){e!==r&&i(r,(function(i,s){if(l||(l=new n),u(i))a(e,r,s,f,t,h,l);else{var d=h?h(c(e,s),i,s+"",e,r,l):void 0;void 0===d&&(d=i),o(e,s,d)}}),s)}},function(t,e,r){var n=r(124),o=r(81),i=r(90),a=r(82),u=r(91),s=r(27),c=r(1),f=r(115),h=r(22),l=r(25),d=r(6),p=r(265),v=r(28),g=r(125),y=r(266);t.exports=function(t,e,r,m,b,w,x){var M=g(t,r),k=g(e,r),_=x.get(k);if(_)n(t,r,_);else{var S=w?w(M,k,r+"",t,e,x):void 0,E=void 0===S;if(E){var j=c(k),A=!j&&h(k),O=!j&&!A&&v(k);S=k,j||A||O?c(M)?S=M:f(M)?S=a(M):A?(E=!1,S=o(k,!0)):O?(E=!1,S=i(k,!0)):S=[]:p(k)||s(k)?(S=M,s(M)?S=y(M):d(M)&&!l(M)||(S=u(k))):E=!1}E&&(x.set(k,S),b(S,k,m,w,x),x.delete(k)),n(t,r,S)}}},function(t,e,r){var n=r(16),o=r(45),i=r(10),a=Function.prototype,u=Object.prototype,s=a.toString,c=u.hasOwnProperty,f=s.call(Object);t.exports=function(t){if(!i(t)||"[object Object]"!=n(t))return!1;var e=o(t);if(null===e)return!0;var r=c.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&s.call(r)==f}},function(t,e,r){var n=r(26),o=r(17);t.exports=function(t){return n(t,o(t))}},function(t,e,r){var n=r(50),o=r(51);t.exports=function(t){return n((function(e,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,u=i>2?r[2]:void 0;for(a=t.length>3&&"function"==typeof a?(i--,a):void 0,u&&o(r[0],r[1],u)&&(a=i<3?void 0:a,i=1),e=Object(e);++n<i;){var s=r[n];s&&t(e,s,n,a)}return e}))}},function(t,e,r){var n=r(73),o=r(126),i=r(18);t.exports=function(t){return t&&t.length?n(t,i,o):void 0}},function(t,e,r){var n=r(73),o=r(13),i=r(126);t.exports=function(t,e){return t&&t.length?n(t,o(e,2),i):void 0}},function(t,e,r){var n=r(8);t.exports=function(){return n.Date.now()}},function(t,e,r){var n=r(272),o=r(275)((function(t,e){return null==t?{}:n(t,e)}));t.exports=o},function(t,e,r){var n=r(273),o=r(104);t.exports=function(t,e){return n(t,e,(function(e,r){return o(t,r)}))}},function(t,e,r){var n=r(47),o=r(274),i=r(48);t.exports=function(t,e,r){for(var a=-1,u=e.length,s={};++a<u;){var c=e[a],f=n(t,c);r(f,c)&&o(s,i(c,t),f)}return s}},function(t,e,r){var n=r(40),o=r(48),i=r(42),a=r(6),u=r(29);t.exports=function(t,e,r,s){if(!a(t))return t;for(var c=-1,f=(e=o(e,t)).length,h=f-1,l=t;null!=l&&++c<f;){var d=u(e[c]),p=r;if("__proto__"===d||"constructor"===d||"prototype"===d)return t;if(c!=h){var v=l[d];void 0===(p=s?s(v,d,l):void 0)&&(p=a(v)?v:i(e[c+1])?[]:{})}n(l,d,p),l=l[d]}return t}},function(t,e,r){var n=r(123),o=r(112),i=r(113);t.exports=function(t){return i(o(t,void 0,n),t+"")}},function(t,e,r){var n=r(277)();t.exports=n},function(t,e,r){var n=r(278),o=r(51),i=r(122);t.exports=function(t){return function(e,r,a){return a&&"number"!=typeof a&&o(e,r,a)&&(r=a=void 0),e=i(e),void 0===r?(r=e,e=0):r=i(r),a=void 0===a?e<r?1:-1:i(a),n(e,r,a,t)}}},function(t,e){var r=Math.ceil,n=Math.max;t.exports=function(t,e,o,i){for(var a=-1,u=n(r((e-t)/(o||1)),0),s=Array(u);u--;)s[i?u:++a]=t,t+=o;return s}},function(t,e,r){var n=r(72),o=r(280),i=r(50),a=r(51),u=i((function(t,e){if(null==t)return[];var r=e.length;return r>1&&a(t,e[0],e[1])?e=[]:r>2&&a(e[0],e[1],e[2])&&(e=[e[0]]),o(t,n(e,1),[])}));t.exports=u},function(t,e,r){var n=r(49),o=r(47),i=r(13),a=r(110),u=r(281),s=r(43),c=r(282),f=r(18),h=r(1);t.exports=function(t,e,r){e=e.length?n(e,(function(t){return h(t)?function(e){return o(e,1===t.length?t[0]:t)}:t})):[f];var l=-1;e=n(e,s(i));var d=a(t,(function(t,r,o){return{criteria:n(e,(function(e){return e(t)})),index:++l,value:t}}));return u(d,(function(t,e){return c(t,e,r)}))}},function(t,e){t.exports=function(t,e){var r=t.length;for(t.sort(e);r--;)t[r]=t[r].value;return t}},function(t,e,r){var n=r(283);t.exports=function(t,e,r){for(var o=-1,i=t.criteria,a=e.criteria,u=i.length,s=r.length;++o<u;){var c=n(i[o],a[o]);if(c)return o>=s?c:c*("desc"==r[o]?-1:1)}return t.index-e.index}},function(t,e,r){var n=r(24);t.exports=function(t,e){if(t!==e){var r=void 0!==t,o=null===t,i=t==t,a=n(t),u=void 0!==e,s=null===e,c=e==e,f=n(e);if(!s&&!f&&!a&&t>e||a&&u&&c&&!s&&!f||o&&u&&c||!r&&c||!i)return 1;if(!o&&!a&&!f&&t<e||f&&r&&i&&!o&&!a||s&&r&&i||!u&&i||!c)return-1}return 0}},function(t,e,r){var n=r(103),o=0;t.exports=function(t){var e=++o;return n(t)+e}},function(t,e,r){var n=r(40),o=r(286);t.exports=function(t,e){return o(t||[],e||[],n)}},function(t,e){t.exports=function(t,e,r){for(var n=-1,o=t.length,i=e.length,a={};++n<o;){var u=n<i?e[n]:void 0;r(a,t[n],u)}return a}},function(t,e,r){"use strict";var n=r(0),o=r(288);t.exports={run:function(t){var e="greedy"===t.graph().acyclicer?o(t,function(t){return function(e){return t.edge(e).weight}}(t)):function(t){var e=[],r={},o={};function i(a){n.has(o,a)||(o[a]=!0,r[a]=!0,n.forEach(t.outEdges(a),(function(t){n.has(r,t.w)?e.push(t):i(t.w)})),delete r[a])}return n.forEach(t.nodes(),i),e}(t);n.forEach(e,(function(e){var r=t.edge(e);t.removeEdge(e),r.forwardName=e.name,r.reversed=!0,t.setEdge(e.w,e.v,r,n.uniqueId("rev"))}))},undo:function(t){n.forEach(t.edges(),(function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var n=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,n)}}))}}},function(t,e,r){var n=r(0),o=r(7).Graph,i=r(289);t.exports=function(t,e){if(t.nodeCount()<=1)return[];var r=function(t,e){var r=new o,a=0,u=0;n.forEach(t.nodes(),(function(t){r.setNode(t,{v:t,in:0,out:0})})),n.forEach(t.edges(),(function(t){var n=r.edge(t.v,t.w)||0,o=e(t),i=n+o;r.setEdge(t.v,t.w,i),u=Math.max(u,r.node(t.v).out+=o),a=Math.max(a,r.node(t.w).in+=o)}));var c=n.range(u+a+3).map((function(){return new i})),f=a+1;return n.forEach(r.nodes(),(function(t){s(c,f,r.node(t))})),{graph:r,buckets:c,zeroIdx:f}}(t,e||a),c=function(t,e,r){var n,o=[],i=e[e.length-1],a=e[0];for(;t.nodeCount();){for(;n=a.dequeue();)u(t,e,r,n);for(;n=i.dequeue();)u(t,e,r,n);if(t.nodeCount())for(var s=e.length-2;s>0;--s)if(n=e[s].dequeue()){o=o.concat(u(t,e,r,n,!0));break}}return o}(r.graph,r.buckets,r.zeroIdx);return n.flatten(n.map(c,(function(e){return t.outEdges(e.v,e.w)})),!0)};var a=n.constant(1);function u(t,e,r,o,i){var a=i?[]:void 0;return n.forEach(t.inEdges(o.v),(function(n){var o=t.edge(n),u=t.node(n.v);i&&a.push({v:n.v,w:n.w}),u.out-=o,s(e,r,u)})),n.forEach(t.outEdges(o.v),(function(n){var o=t.edge(n),i=n.w,a=t.node(i);a.in-=o,s(e,r,a)})),t.removeNode(o.v),a}function s(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}},function(t,e){function r(){var t={};t._next=t._prev=t,this._sentinel=t}function n(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function o(t,e){if("_next"!==t&&"_prev"!==t)return e}t.exports=r,r.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return n(e),e},r.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&n(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e},r.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,o)),r=r._prev;return"["+t.join(", ")+"]"}},function(t,e,r){"use strict";var n=r(0),o=r(4);t.exports={run:function(t){t.graph().dummyChains=[],n.forEach(t.edges(),(function(e){!function(t,e){var r,n,i,a=e.v,u=t.node(a).rank,s=e.w,c=t.node(s).rank,f=e.name,h=t.edge(e),l=h.labelRank;if(c===u+1)return;for(t.removeEdge(e),i=0,++u;u<c;++i,++u)h.points=[],n={width:0,height:0,edgeLabel:h,edgeObj:e,rank:u},r=o.addDummyNode(t,"edge",n,"_d"),u===l&&(n.width=h.width,n.height=h.height,n.dummy="edge-label",n.labelpos=h.labelpos),t.setEdge(a,r,{weight:h.weight},f),0===i&&t.graph().dummyChains.push(r),a=r;t.setEdge(a,s,{weight:h.weight},f)}(t,e)}))},undo:function(t){n.forEach(t.graph().dummyChains,(function(e){var r,n=t.node(e),o=n.edgeLabel;for(t.setEdge(n.edgeObj,o);n.dummy;)r=t.successors(e)[0],t.removeNode(e),o.points.push({x:n.x,y:n.y}),"edge-label"===n.dummy&&(o.x=n.x,o.y=n.y,o.width=n.width,o.height=n.height),e=r,n=t.node(e)}))}}},function(t,e,r){"use strict";var n=r(52).longestPath,o=r(127),i=r(292);t.exports=function(t){switch(t.graph().ranker){case"network-simplex":u(t);break;case"tight-tree":!function(t){n(t),o(t)}(t);break;case"longest-path":a(t);break;default:u(t)}};var a=n;function u(t){i(t)}},function(t,e,r){"use strict";var n=r(0),o=r(127),i=r(52).slack,a=r(52).longestPath,u=r(7).alg.preorder,s=r(7).alg.postorder,c=r(4).simplify;function f(t){t=c(t),a(t);var e,r=o(t);for(d(r),h(r,t);e=v(r);)y(r,t,e,g(r,t,e))}function h(t,e){var r=s(t,t.nodes());r=r.slice(0,r.length-1),n.forEach(r,(function(r){!function(t,e,r){var n=t.node(r).parent;t.edge(r,n).cutvalue=l(t,e,r)}(t,e,r)}))}function l(t,e,r){var o=t.node(r).parent,i=!0,a=e.edge(r,o),u=0;return a||(i=!1,a=e.edge(o,r)),u=a.weight,n.forEach(e.nodeEdges(r),(function(n){var a,s,c=n.v===r,f=c?n.w:n.v;if(f!==o){var h=c===i,l=e.edge(n).weight;if(u+=h?l:-l,a=r,s=f,t.hasEdge(a,s)){var d=t.edge(r,f).cutvalue;u+=h?-d:d}}})),u}function d(t,e){arguments.length<2&&(e=t.nodes()[0]),p(t,{},1,e)}function p(t,e,r,o,i){var a=r,u=t.node(o);return e[o]=!0,n.forEach(t.neighbors(o),(function(i){n.has(e,i)||(r=p(t,e,r,i,o))})),u.low=a,u.lim=r++,i?u.parent=i:delete u.parent,r}function v(t){return n.find(t.edges(),(function(e){return t.edge(e).cutvalue<0}))}function g(t,e,r){var o=r.v,a=r.w;e.hasEdge(o,a)||(o=r.w,a=r.v);var u=t.node(o),s=t.node(a),c=u,f=!1;u.lim>s.lim&&(c=s,f=!0);var h=n.filter(e.edges(),(function(e){return f===m(t,t.node(e.v),c)&&f!==m(t,t.node(e.w),c)}));return n.minBy(h,(function(t){return i(e,t)}))}function y(t,e,r,o){var i=r.v,a=r.w;t.removeEdge(i,a),t.setEdge(o.v,o.w,{}),d(t),h(t,e),function(t,e){var r=n.find(t.nodes(),(function(t){return!e.node(t).parent})),o=u(t,r);o=o.slice(1),n.forEach(o,(function(r){var n=t.node(r).parent,o=e.edge(r,n),i=!1;o||(o=e.edge(n,r),i=!0),e.node(r).rank=e.node(n).rank+(i?o.minlen:-o.minlen)}))}(t,e)}function m(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}t.exports=f,f.initLowLimValues=d,f.initCutValues=h,f.calcCutValue=l,f.leaveEdge=v,f.enterEdge=g,f.exchangeEdges=y},function(t,e,r){var n=r(0);t.exports=function(t){var e=function(t){var e={},r=0;function o(i){var a=r;n.forEach(t.children(i),o),e[i]={low:a,lim:r++}}return n.forEach(t.children(),o),e}(t);n.forEach(t.graph().dummyChains,(function(r){for(var n=t.node(r),o=n.edgeObj,i=function(t,e,r,n){var o,i,a=[],u=[],s=Math.min(e[r].low,e[n].low),c=Math.max(e[r].lim,e[n].lim);o=r;do{o=t.parent(o),a.push(o)}while(o&&(e[o].low>s||c>e[o].lim));i=o,o=n;for(;(o=t.parent(o))!==i;)u.push(o);return{path:a.concat(u.reverse()),lca:i}}(t,e,o.v,o.w),a=i.path,u=i.lca,s=0,c=a[s],f=!0;r!==o.w;){if(n=t.node(r),f){for(;(c=a[s])!==u&&t.node(c).maxRank<n.rank;)s++;c===u&&(f=!1)}if(!f){for(;s<a.length-1&&t.node(c=a[s+1]).minRank<=n.rank;)s++;c=a[s]}t.setParent(r,c),r=t.successors(r)[0]}}))}},function(t,e,r){var n=r(0),o=r(4);t.exports={run:function(t){var e=o.addDummyNode(t,"root",{},"_root"),r=function(t){var e={};return n.forEach(t.children(),(function(r){!function r(o,i){var a=t.children(o);a&&a.length&&n.forEach(a,(function(t){r(t,i+1)}));e[o]=i}(r,1)})),e}(t),i=n.max(n.values(r))-1,a=2*i+1;t.graph().nestingRoot=e,n.forEach(t.edges(),(function(e){t.edge(e).minlen*=a}));var u=function(t){return n.reduce(t.edges(),(function(e,r){return e+t.edge(r).weight}),0)}(t)+1;n.forEach(t.children(),(function(s){!function t(e,r,i,a,u,s,c){var f=e.children(c);if(!f.length)return void(c!==r&&e.setEdge(r,c,{weight:0,minlen:i}));var h=o.addBorderNode(e,"_bt"),l=o.addBorderNode(e,"_bb"),d=e.node(c);e.setParent(h,c),d.borderTop=h,e.setParent(l,c),d.borderBottom=l,n.forEach(f,(function(n){t(e,r,i,a,u,s,n);var o=e.node(n),f=o.borderTop?o.borderTop:n,d=o.borderBottom?o.borderBottom:n,p=o.borderTop?a:2*a,v=f!==d?1:u-s[c]+1;e.setEdge(h,f,{weight:p,minlen:v,nestingEdge:!0}),e.setEdge(d,l,{weight:p,minlen:v,nestingEdge:!0})})),e.parent(c)||e.setEdge(r,h,{weight:0,minlen:u+s[c]})}(t,e,a,u,i,r,s)})),t.graph().nodeRankFactor=a},cleanup:function(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,n.forEach(t.edges(),(function(e){t.edge(e).nestingEdge&&t.removeEdge(e)}))}}},function(t,e,r){var n=r(0),o=r(4);function i(t,e,r,n,i,a){var u={width:0,height:0,rank:a,borderType:e},s=i[e][a-1],c=o.addDummyNode(t,"border",u,r);i[e][a]=c,t.setParent(c,n),s&&t.setEdge(s,c,{weight:1})}t.exports=function(t){n.forEach(t.children(),(function e(r){var o=t.children(r),a=t.node(r);if(o.length&&n.forEach(o,e),n.has(a,"minRank")){a.borderLeft=[],a.borderRight=[];for(var u=a.minRank,s=a.maxRank+1;u<s;++u)i(t,"borderLeft","_bl",r,a,u),i(t,"borderRight","_br",r,a,u)}}))}},function(t,e,r){"use strict";var n=r(0);function o(t){n.forEach(t.nodes(),(function(e){i(t.node(e))})),n.forEach(t.edges(),(function(e){i(t.edge(e))}))}function i(t){var e=t.width;t.width=t.height,t.height=e}function a(t){t.y=-t.y}function u(t){var e=t.x;t.x=t.y,t.y=e}t.exports={adjust:function(t){var e=t.graph().rankdir.toLowerCase();"lr"!==e&&"rl"!==e||o(t)},undo:function(t){var e=t.graph().rankdir.toLowerCase();"bt"!==e&&"rl"!==e||function(t){n.forEach(t.nodes(),(function(e){a(t.node(e))})),n.forEach(t.edges(),(function(e){var r=t.edge(e);n.forEach(r.points,a),n.has(r,"y")&&a(r)}))}(t);"lr"!==e&&"rl"!==e||(!function(t){n.forEach(t.nodes(),(function(e){u(t.node(e))})),n.forEach(t.edges(),(function(e){var r=t.edge(e);n.forEach(r.points,u),n.has(r,"x")&&u(r)}))}(t),o(t))}}},function(t,e,r){"use strict";var n=r(0),o=r(298),i=r(299),a=r(300),u=r(304),s=r(305),c=r(7).Graph,f=r(4);function h(t,e,r){return n.map(e,(function(e){return u(t,e,r)}))}function l(t,e){var r=new c;n.forEach(t,(function(t){var o=t.graph().root,i=a(t,o,r,e);n.forEach(i.vs,(function(e,r){t.node(e).order=r})),s(t,r,i.vs)}))}function d(t,e){n.forEach(e,(function(e){n.forEach(e,(function(e,r){t.node(e).order=r}))}))}t.exports=function(t){var e=f.maxRank(t),r=h(t,n.range(1,e+1),"inEdges"),a=h(t,n.range(e-1,-1,-1),"outEdges"),u=o(t);d(t,u);for(var s,c=Number.POSITIVE_INFINITY,p=0,v=0;v<4;++p,++v){l(p%2?r:a,p%4>=2),u=f.buildLayerMatrix(t);var g=i(t,u);g<c&&(v=0,s=n.cloneDeep(u),c=g)}d(t,s)}},function(t,e,r){"use strict";var n=r(0);t.exports=function(t){var e={},r=n.filter(t.nodes(),(function(e){return!t.children(e).length})),o=n.max(n.map(r,(function(e){return t.node(e).rank}))),i=n.map(n.range(o+1),(function(){return[]}));var a=n.sortBy(r,(function(e){return t.node(e).rank}));return n.forEach(a,(function r(o){if(n.has(e,o))return;e[o]=!0;var a=t.node(o);i[a.rank].push(o),n.forEach(t.successors(o),r)})),i}},function(t,e,r){"use strict";var n=r(0);function o(t,e,r){for(var o=n.zipObject(r,n.map(r,(function(t,e){return e}))),i=n.flatten(n.map(e,(function(e){return n.sortBy(n.map(t.outEdges(e),(function(e){return{pos:o[e.w],weight:t.edge(e).weight}})),"pos")})),!0),a=1;a<r.length;)a<<=1;var u=2*a-1;a-=1;var s=n.map(new Array(u),(function(){return 0})),c=0;return n.forEach(i.forEach((function(t){var e=t.pos+a;s[e]+=t.weight;for(var r=0;e>0;)e%2&&(r+=s[e+1]),s[e=e-1>>1]+=t.weight;c+=t.weight*r}))),c}t.exports=function(t,e){for(var r=0,n=1;n<e.length;++n)r+=o(t,e[n-1],e[n]);return r}},function(t,e,r){var n=r(0),o=r(301),i=r(302),a=r(303);t.exports=function t(e,r,u,s){var c=e.children(r),f=e.node(r),h=f?f.borderLeft:void 0,l=f?f.borderRight:void 0,d={};h&&(c=n.filter(c,(function(t){return t!==h&&t!==l})));var p=o(e,c);n.forEach(p,(function(r){if(e.children(r.v).length){var o=t(e,r.v,u,s);d[r.v]=o,n.has(o,"barycenter")&&(i=r,a=o,n.isUndefined(i.barycenter)?(i.barycenter=a.barycenter,i.weight=a.weight):(i.barycenter=(i.barycenter*i.weight+a.barycenter*a.weight)/(i.weight+a.weight),i.weight+=a.weight))}var i,a}));var v=i(p,u);!function(t,e){n.forEach(t,(function(t){t.vs=n.flatten(t.vs.map((function(t){return e[t]?e[t].vs:t})),!0)}))}(v,d);var g=a(v,s);if(h&&(g.vs=n.flatten([h,g.vs,l],!0),e.predecessors(h).length)){var y=e.node(e.predecessors(h)[0]),m=e.node(e.predecessors(l)[0]);n.has(g,"barycenter")||(g.barycenter=0,g.weight=0),g.barycenter=(g.barycenter*g.weight+y.order+m.order)/(g.weight+2),g.weight+=2}return g}},function(t,e,r){var n=r(0);t.exports=function(t,e){return n.map(e,(function(e){var r=t.inEdges(e);if(r.length){var o=n.reduce(r,(function(e,r){var n=t.edge(r),o=t.node(r.v);return{sum:e.sum+n.weight*o.order,weight:e.weight+n.weight}}),{sum:0,weight:0});return{v:e,barycenter:o.sum/o.weight,weight:o.weight}}return{v:e}}))}},function(t,e,r){"use strict";var n=r(0);t.exports=function(t,e){var r={};return n.forEach(t,(function(t,e){var o=r[t.v]={indegree:0,in:[],out:[],vs:[t.v],i:e};n.isUndefined(t.barycenter)||(o.barycenter=t.barycenter,o.weight=t.weight)})),n.forEach(e.edges(),(function(t){var e=r[t.v],o=r[t.w];n.isUndefined(e)||n.isUndefined(o)||(o.indegree++,e.out.push(r[t.w]))})),function(t){var e=[];function r(t){return function(e){e.merged||(n.isUndefined(e.barycenter)||n.isUndefined(t.barycenter)||e.barycenter>=t.barycenter)&&function(t,e){var r=0,n=0;t.weight&&(r+=t.barycenter*t.weight,n+=t.weight);e.weight&&(r+=e.barycenter*e.weight,n+=e.weight);t.vs=e.vs.concat(t.vs),t.barycenter=r/n,t.weight=n,t.i=Math.min(e.i,t.i),e.merged=!0}(t,e)}}function o(e){return function(r){r.in.push(e),0==--r.indegree&&t.push(r)}}for(;t.length;){var i=t.pop();e.push(i),n.forEach(i.in.reverse(),r(i)),n.forEach(i.out,o(i))}return n.map(n.filter(e,(function(t){return!t.merged})),(function(t){return n.pick(t,["vs","i","barycenter","weight"])}))}(n.filter(r,(function(t){return!t.indegree})))}},function(t,e,r){var n=r(0),o=r(4);function i(t,e,r){for(var o;e.length&&(o=n.last(e)).i<=r;)e.pop(),t.push(o.vs),r++;return r}t.exports=function(t,e){var r=o.partition(t,(function(t){return n.has(t,"barycenter")})),a=r.lhs,u=n.sortBy(r.rhs,(function(t){return-t.i})),s=[],c=0,f=0,h=0;a.sort((l=!!e,function(t,e){return t.barycenter<e.barycenter?-1:t.barycenter>e.barycenter?1:l?e.i-t.i:t.i-e.i})),h=i(s,u,h),n.forEach(a,(function(t){h+=t.vs.length,s.push(t.vs),c+=t.barycenter*t.weight,f+=t.weight,h=i(s,u,h)}));var l;var d={vs:n.flatten(s,!0)};f&&(d.barycenter=c/f,d.weight=f);return d}},function(t,e,r){var n=r(0),o=r(7).Graph;t.exports=function(t,e,r){var i=function(t){var e;for(;t.hasNode(e=n.uniqueId("_root")););return e}(t),a=new o({compound:!0}).setGraph({root:i}).setDefaultNodeLabel((function(e){return t.node(e)}));return n.forEach(t.nodes(),(function(o){var u=t.node(o),s=t.parent(o);(u.rank===e||u.minRank<=e&&e<=u.maxRank)&&(a.setNode(o),a.setParent(o,s||i),n.forEach(t[r](o),(function(e){var r=e.v===o?e.w:e.v,i=a.edge(r,o),u=n.isUndefined(i)?0:i.weight;a.setEdge(r,o,{weight:t.edge(e).weight+u})})),n.has(u,"minRank")&&a.setNode(o,{borderLeft:u.borderLeft[e],borderRight:u.borderRight[e]}))})),a}},function(t,e,r){var n=r(0);t.exports=function(t,e,r){var o,i={};n.forEach(r,(function(r){for(var n,a,u=t.parent(r);u;){if((n=t.parent(u))?(a=i[n],i[n]=u):(a=o,o=u),a&&a!==u)return void e.setEdge(a,u);u=n}}))}},function(t,e,r){"use strict";var n=r(0),o=r(4),i=r(307).positionX;t.exports=function(t){(function(t){var e=o.buildLayerMatrix(t),r=t.graph().ranksep,i=0;n.forEach(e,(function(e){var o=n.max(n.map(e,(function(e){return t.node(e).height})));n.forEach(e,(function(e){t.node(e).y=i+o/2})),i+=o+r}))})(t=o.asNonCompoundGraph(t)),n.forEach(i(t),(function(e,r){t.node(r).x=e}))}},function(t,e,r){"use strict";var n=r(0),o=r(7).Graph,i=r(4);function a(t,e){var r={};return n.reduce(e,(function(e,o){var i=0,a=0,u=e.length,c=n.last(o);return n.forEach(o,(function(e,f){var h=function(t,e){if(t.node(e).dummy)return n.find(t.predecessors(e),(function(e){return t.node(e).dummy}))}(t,e),l=h?t.node(h).order:u;(h||e===c)&&(n.forEach(o.slice(a,f+1),(function(e){n.forEach(t.predecessors(e),(function(n){var o=t.node(n),a=o.order;!(a<i||l<a)||o.dummy&&t.node(e).dummy||s(r,n,e)}))})),a=f+1,i=l)})),o})),r}function u(t,e){var r={};function o(e,o,i,a,u){var c;n.forEach(n.range(o,i),(function(o){c=e[o],t.node(c).dummy&&n.forEach(t.predecessors(c),(function(e){var n=t.node(e);n.dummy&&(n.order<a||n.order>u)&&s(r,e,c)}))}))}return n.reduce(e,(function(e,r){var i,a=-1,u=0;return n.forEach(r,(function(n,s){if("border"===t.node(n).dummy){var c=t.predecessors(n);c.length&&(i=t.node(c[0]).order,o(r,u,s,a,i),u=s,a=i)}o(r,u,r.length,i,e.length)})),r})),r}function s(t,e,r){if(e>r){var n=e;e=r,r=n}var o=t[e];o||(t[e]=o={}),o[r]=!0}function c(t,e,r){if(e>r){var o=e;e=r,r=o}return n.has(t[e],r)}function f(t,e,r,o){var i={},a={},u={};return n.forEach(e,(function(t){n.forEach(t,(function(t,e){i[t]=t,a[t]=t,u[t]=e}))})),n.forEach(e,(function(t){var e=-1;n.forEach(t,(function(t){var s=o(t);if(s.length)for(var f=((s=n.sortBy(s,(function(t){return u[t]}))).length-1)/2,h=Math.floor(f),l=Math.ceil(f);h<=l;++h){var d=s[h];a[t]===t&&e<u[d]&&!c(r,t,d)&&(a[d]=t,a[t]=i[t]=i[d],e=u[d])}}))})),{root:i,align:a}}function h(t,e,r,i,a){var u={},s=function(t,e,r,i){var a=new o,u=t.graph(),s=function(t,e,r){return function(o,i,a){var u,s=o.node(i),c=o.node(a),f=0;if(f+=s.width/2,n.has(s,"labelpos"))switch(s.labelpos.toLowerCase()){case"l":u=-s.width/2;break;case"r":u=s.width/2}if(u&&(f+=r?u:-u),u=0,f+=(s.dummy?e:t)/2,f+=(c.dummy?e:t)/2,f+=c.width/2,n.has(c,"labelpos"))switch(c.labelpos.toLowerCase()){case"l":u=c.width/2;break;case"r":u=-c.width/2}return u&&(f+=r?u:-u),u=0,f}}(u.nodesep,u.edgesep,i);return n.forEach(e,(function(e){var o;n.forEach(e,(function(e){var n=r[e];if(a.setNode(n),o){var i=r[o],u=a.edge(i,n);a.setEdge(i,n,Math.max(s(t,e,o),u||0))}o=e}))})),a}(t,e,r,a),c=a?"borderLeft":"borderRight";function f(t,e){for(var r=s.nodes(),n=r.pop(),o={};n;)o[n]?t(n):(o[n]=!0,r.push(n),r=r.concat(e(n))),n=r.pop()}return f((function(t){u[t]=s.inEdges(t).reduce((function(t,e){return Math.max(t,u[e.v]+s.edge(e))}),0)}),s.predecessors.bind(s)),f((function(e){var r=s.outEdges(e).reduce((function(t,e){return Math.min(t,u[e.w]-s.edge(e))}),Number.POSITIVE_INFINITY),n=t.node(e);r!==Number.POSITIVE_INFINITY&&n.borderType!==c&&(u[e]=Math.max(u[e],r))}),s.successors.bind(s)),n.forEach(i,(function(t){u[t]=u[r[t]]})),u}function l(t,e){return n.minBy(n.values(e),(function(e){var r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return n.forIn(e,(function(e,n){var i=function(t,e){return t.node(e).width}(t,n)/2;r=Math.max(e+i,r),o=Math.min(e-i,o)})),r-o}))}function d(t,e){var r=n.values(e),o=n.min(r),i=n.max(r);n.forEach(["u","d"],(function(r){n.forEach(["l","r"],(function(a){var u,s=r+a,c=t[s];if(c!==e){var f=n.values(c);(u="l"===a?o-n.min(f):i-n.max(f))&&(t[s]=n.mapValues(c,(function(t){return t+u})))}}))}))}function p(t,e){return n.mapValues(t.ul,(function(r,o){if(e)return t[e.toLowerCase()][o];var i=n.sortBy(n.map(t,o));return(i[1]+i[2])/2}))}t.exports={positionX:function(t){var e,r=i.buildLayerMatrix(t),o=n.merge(a(t,r),u(t,r)),s={};n.forEach(["u","d"],(function(i){e="u"===i?r:n.values(r).reverse(),n.forEach(["l","r"],(function(r){"r"===r&&(e=n.map(e,(function(t){return n.values(t).reverse()})));var a=("u"===i?t.predecessors:t.successors).bind(t),u=f(t,e,o,a),c=h(t,e,u.root,u.align,"r"===r);"r"===r&&(c=n.mapValues(c,(function(t){return-t}))),s[i+r]=c}))}));var c=l(t,s);return d(s,c),p(s,t.graph().align)},findType1Conflicts:a,findType2Conflicts:u,addConflict:s,hasConflict:c,verticalAlignment:f,horizontalCompaction:h,alignCoordinates:d,findSmallestWidthAlignment:l,balance:p}},function(t,e,r){var n=r(0),o=r(4),i=r(7).Graph;t.exports={debugOrdering:function(t){var e=o.buildLayerMatrix(t),r=new i({compound:!0,multigraph:!0}).setGraph({});return n.forEach(t.nodes(),(function(e){r.setNode(e,{label:e}),r.setParent(e,"layer"+t.node(e).rank)})),n.forEach(t.edges(),(function(t){r.setEdge(t.v,t.w,{},t.name)})),n.forEach(e,(function(t,e){var o="layer"+e;r.setNode(o,{rank:"same"}),n.reduce(t,(function(t,e){return r.setEdge(t,e,{style:"invis"}),e}))})),r}}},function(t,e){t.exports="0.8.5"},function(t,e,r){var n=r(311),o=r(312),i={};for(var a in n)n.hasOwnProperty(a)&&(i[n[a]]=a);var u=t.exports={to:{},get:{}};function s(t,e,r){return Math.min(Math.max(e,t),r)}function c(t){var e=t.toString(16).toUpperCase();return e.length<2?"0"+e:e}u.get=function(t){var e,r;switch(t.substring(0,3).toLowerCase()){case"hsl":e=u.get.hsl(t),r="hsl";break;case"hwb":e=u.get.hwb(t),r="hwb";break;default:e=u.get.rgb(t),r="rgb"}return e?{model:r,value:e}:null},u.get.rgb=function(t){if(!t)return null;var e,r,o,i=[0,0,0,1];if(e=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=e[2],e=e[1],r=0;r<3;r++){var a=2*r;i[r]=parseInt(e.slice(a,a+2),16)}o&&(i[3]=parseInt(o,16)/255)}else if(e=t.match(/^#([a-f0-9]{3,4})$/i)){for(o=(e=e[1])[3],r=0;r<3;r++)i[r]=parseInt(e[r]+e[r],16);o&&(i[3]=parseInt(o+o,16)/255)}else if(e=t.match(/^rgba?\\(\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*,\\s*([+-]?\\d+)\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/)){for(r=0;r<3;r++)i[r]=parseInt(e[r+1],0);e[4]&&(i[3]=parseFloat(e[4]))}else{if(!(e=t.match(/^rgba?\\(\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*,\\s*([+-]?[\\d\\.]+)\\%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/)))return(e=t.match(/(\\D+)/))?"transparent"===e[1]?[0,0,0,0]:(i=n[e[1]])?(i[3]=1,i):null:null;for(r=0;r<3;r++)i[r]=Math.round(2.55*parseFloat(e[r+1]));e[4]&&(i[3]=parseFloat(e[4]))}for(r=0;r<3;r++)i[r]=s(i[r],0,255);return i[3]=s(i[3],0,1),i},u.get.hsl=function(t){if(!t)return null;var e=t.match(/^hsla?\\(\\s*([+-]?(?:\\d*\\.)?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])+360)%360,s(parseFloat(e[2]),0,100),s(parseFloat(e[3]),0,100),s(isNaN(r)?1:r,0,1)]}return null},u.get.hwb=function(t){if(!t)return null;var e=t.match(/^hwb\\(\\s*([+-]?\\d*[\\.]?\\d+)(?:deg)?\\s*,\\s*([+-]?[\\d\\.]+)%\\s*,\\s*([+-]?[\\d\\.]+)%\\s*(?:,\\s*([+-]?[\\d\\.]+)\\s*)?\\)$/);if(e){var r=parseFloat(e[4]);return[(parseFloat(e[1])%360+360)%360,s(parseFloat(e[2]),0,100),s(parseFloat(e[3]),0,100),s(isNaN(r)?1:r,0,1)]}return null},u.to.hex=function(){var t=o(arguments);return"#"+c(t[0])+c(t[1])+c(t[2])+(t[3]<1?c(Math.round(255*t[3])):"")},u.to.rgb=function(){var t=o(arguments);return t.length<4||1===t[3]?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},u.to.rgb.percent=function(){var t=o(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||1===t[3]?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"},u.to.hsl=function(){var t=o(arguments);return t.length<4||1===t[3]?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},u.to.hwb=function(){var t=o(arguments),e="";return t.length>=4&&1!==t[3]&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"},u.to.keyword=function(t){return i[t.slice(0,3)]}},function(t,e,r){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,r){"use strict";var n=r(313),o=Array.prototype.concat,i=Array.prototype.slice,a=t.exports=function(t){for(var e=[],r=0,a=t.length;r<a;r++){var u=t[r];n(u)?e=o.call(e,i.call(u)):e.push(u)}return e};a.wrap=function(t){return function(){return t(a(arguments))}}},function(t,e){t.exports=function(t){return!(!t||"string"==typeof t)&&(t instanceof Array||Array.isArray(t)||t.length>=0&&(t.splice instanceof Function||Object.getOwnPropertyDescriptor(t,t.length-1)&&"String"!==t.constructor.name))}},function(t,e,r){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(128),i=r(316),a={};Object.keys(o).forEach((function(t){a[t]={},Object.defineProperty(a[t],"channels",{value:o[t].channels}),Object.defineProperty(a[t],"labels",{value:o[t].labels});var e=i(t);Object.keys(e).forEach((function(r){var o=e[r];a[t][r]=function(t){var e=function(e){if(null==e)return e;arguments.length>1&&(e=Array.prototype.slice.call(arguments));var r=t(e);if("object"===n(r))for(var o=r.length,i=0;i<o;i++)r[i]=Math.round(r[i]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}(o),a[t][r].raw=function(t){var e=function(e){return null==e?e:(arguments.length>1&&(e=Array.prototype.slice.call(arguments)),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(o)}))})),t.exports=a},function(t,e,r){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,r){var n=r(128);function o(t){var e=function(){for(var t={},e=Object.keys(n),r=e.length,o=0;o<r;o++)t[e[o]]={distance:-1,parent:null};return t}(),r=[t];for(e[t].distance=0;r.length;)for(var o=r.pop(),i=Object.keys(n[o]),a=i.length,u=0;u<a;u++){var s=i[u],c=e[s];-1===c.distance&&(c.distance=e[o].distance+1,c.parent=o,r.unshift(s))}return e}function i(t,e){return function(r){return e(t(r))}}function a(t,e){for(var r=[e[t].parent,t],o=n[e[t].parent][t],a=e[t].parent;e[a].parent;)r.unshift(e[a].parent),o=i(n[e[a].parent][a],o),a=e[a].parent;return o.conversion=r,o}t.exports=function(t){for(var e=o(t),r={},n=Object.keys(e),i=n.length,u=0;u<i;u++){var s=n[u];null!==e[s].parent&&(r[s]=a(s,e))}return r}},function(t,e,r){"use strict";r.r(e);var n=r(53),o=r.n(n);\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\nvar i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(t,e)};function a(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}Object.create;Object.create;var u=r(30),s=r.n(u),c=function(){function t(){this.nodes=[],this.edges=[],this.combos=[],this.positions=[],this.destroyed=!1}return t.prototype.init=function(t){this.nodes=t.nodes||[],this.edges=t.edges||[],this.combos=t.combos||[]},t.prototype.execute=function(){},t.prototype.layout=function(t){this.init(t),this.execute()},t.prototype.getDefaultCfg=function(){return{}},t.prototype.updateCfg=function(t){s()(this,t)},t.prototype.destroy=function(){this.positions=null,this.nodes=null,this.edges=null,this.destroyed=!0},t}(),f={registerLayout:function(t,e,r){if(void 0===r&&(r=c),!e)throw new Error("please specify handler for this layout: "+t);var n=function(t){function r(r){var n=t.call(this)||this,i=n,a={},u=i.getDefaultCfg();return s()(a,u,e,r),o()(a,(function(t,e){i[e]=t})),n}return a(r,t),r}(r);f[t]=n}},h=f,l=r(3);l.translate=function(t,e,r){var n=new Array(9);return l.fromTranslation(n,r),l.multiply(t,n,e)},l.rotate=function(t,e,r){var n=new Array(9);return l.fromRotation(n,r),l.multiply(t,n,e)},l.scale=function(t,e,r){var n=new Array(9);return l.fromScaling(n,r),l.multiply(t,n,e)},l.transform=function(t,e){for(var r=[].concat(t),n=0,o=e.length;n<o;n++){var i=e[n];switch(i[0]){case"t":l.translate(r,r,[i[1],i[2]]);break;case"s":l.scale(r,r,[i[1],i[2]]);break;case"r":l.rotate(r,r,i[1])}}return r};var d=r(9),p={}.toString,v=function(t,e){return p.call(t)==="[object "+e+"]"},g=function(t){return v(t,"Function")},y=function(t){return Array.isArray?Array.isArray(t):v(t,"Array")};function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var b=function(t){var e=m(t);return null!==t&&"object"===e||"function"===e};var w=function(t,e){if(t)if(y(t))for(var r=0,n=t.length;r<n&&!1!==e(t[r],r);r++);else if(b(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break};Object.keys;var x=Array.prototype;x.splice,x.indexOf,Array.prototype.splice;Object.prototype.hasOwnProperty;var M=function(t,e,r){return t<e?e:t>r?r:t},k=function(t){return v(t,"Number")};Number.isInteger&&Number.isInteger;Math.PI,parseInt,Math.PI,Object.values;Object.prototype;function _(t){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var S=function t(e){if("object"!==_(e)||null===e)return e;var r;if(y(e)){r=[];for(var n=0,o=e.length;n<o;n++)"object"===_(e[n])&&null!=e[n]?r[n]=t(e[n]):r[n]=e[n]}else for(var i in r={},e)"object"===_(e[i])&&null!=e[i]?r[i]=t(e[i]):r[i]=e[i];return r};Object.prototype.hasOwnProperty;Object.prototype.hasOwnProperty;!function(){function t(){this.map={}}t.prototype.has=function(t){return void 0!==this.map[t]},t.prototype.get=function(t,e){var r=this.map[t];return void 0===r?e:r},t.prototype.set=function(t,e){this.map[t]=e},t.prototype.clear=function(){this.map={}},t.prototype.delete=function(t){delete this.map[t]},t.prototype.size=function(){return Object.keys(this.map).length}}();d.angle=function(t,e){var r=d.dot(t,e)/(d.length(t)*d.length(e));return Math.acos(M(r,-1,1))},d.direction=function(t,e){return t[0]*e[1]-e[0]*t[1]},d.angleTo=function(t,e,r){var n=d.angle(t,e),o=d.direction(t,e)>=0;return r?o?2*Math.PI-n:n:o?n:2*Math.PI-n},d.vertical=function(t,e,r){return r?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t};r(129);var E=r(2),j=r.n(E),A=function(t){for(var e=[],r=t.length,n=0;n<r;n+=1){e[n]=[];for(var o=0;o<r;o+=1)n===o?e[n][o]=0:0!==t[n][o]&&t[n][o]?e[n][o]=t[n][o]:e[n][o]=1/0}for(var i=0;i<r;i+=1)for(n=0;n<r;n+=1)for(o=0;o<r;o+=1)e[n][o]>e[n][i]+e[i][o]&&(e[n][o]=e[n][i]+e[i][o]);return e},O=function(t,e){var r=t.nodes,n=t.edges,o=[],i={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((function(t,e){i[t.id]=e;o.push([])})),n&&n.forEach((function(t){var r=t.source,n=t.target,a=i[r],u=i[n];o[a][u]=1,e||(o[u][a]=1)})),o},N=function(t,e,r){for(var n=[],o=0;o<t;o++)n[o]=0;return r.forEach((function(t){t.source&&(n[e[t.source]]+=1),t.target&&(n[e[t.target]]+=1)})),n};!function(){function t(t,e,r,n){this.x1=t,this.y1=e,this.x2=r,this.y2=n}t.prototype.getBBox=function(){var t=Math.min(this.x1,this.x2),e=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2);return{x:t,y:e,minX:t,minY:e,maxX:r,maxY:n,width:r-t,height:n-e}}}();function I(t,e){return t.degree<e.degree?-1:t.degree>e.degree?1:0}var R=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.radius=null,e.startRadius=null,e.endRadius=null,e.startAngle=0,e.endAngle=2*Math.PI,e.clockwise=!0,e.divisions=1,e.ordering=null,e.angleRatio=1,e.nodes=[],e.edges=[],e.nodeMap={},e.degrees=[],e.width=300,e.height=300,e}return a(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},e.prototype.execute=function(){var t=this.nodes,e=this.edges,r=t.length,n=this.center;if(0!==r){if(1===r)return t[0].x=n[0],void(t[0].y=n[1]);var o=this.radius,i=this.startRadius,a=this.endRadius,u=this.divisions,s=this.startAngle,c=this.endAngle,f=(c-s)/r,h={};t.forEach((function(t,e){h[t.id]=e})),this.nodeMap=h;var l=N(t.length,h,e);this.degrees=l,this.width||"undefined"==typeof window||(this.width=window.innerWidth),this.height||"undefined"==typeof window||(this.height=window.innerHeight),o||i||a?!i&&a?i=a:i&&!a&&(a=i):o=this.height>this.width?this.width/2:this.height/2;var d=f*this.angleRatio;this.astep=d;var p=this.ordering,v=[];v="topology"===p?this.topologyOrdering():"topology-directed"===p?this.topologyOrdering(!0):"degree"===p?this.degreeOrdering():t;for(var g=this.clockwise,y=Math.ceil(r/u),m=0;m<r;++m){var b=o;b||null===i||null===a||(b=i+m*(a-i)/(r-1)),b||(b=10+100*m/(r-1));var w=s+m%y*d+2*Math.PI/u*Math.floor(m/y);g||(w=c-m%y*d-2*Math.PI/u*Math.floor(m/y)),v[m].x=n[0]+Math.cos(w)*b,v[m].y=n[1]+Math.sin(w)*b,v[m].weight=l[m]}}},e.prototype.topologyOrdering=function(t){void 0===t&&(t=!1);var e=this.degrees,r=this.edges,n=this.nodes,o=S(n),i=this.nodeMap,a=[o[0]],u=[n[0]],s=[],c=n.length;s[0]=!0,function(t,e,r,n){t.forEach((function(e,r){t[r].children=[],t[r].parent=[]})),n?e.forEach((function(e){var n=0;e.source&&(n=r[e.source]);var o=0;e.target&&(o=r[e.target]),t[n].children.push(t[o].id),t[o].parent.push(t[n].id)})):e.forEach((function(e){var n=0;e.source&&(n=r[e.source]);var o=0;e.target&&(o=r[e.target]),t[n].children.push(t[o].id),t[o].children.push(t[n].id)}))}(o,r,i,t);var f=0;return o.forEach((function(t,h){if(0!==h)if(h!==c-1&&e[h]===e[h+1]&&!function(t,e,r){for(var n=r.length,o=0;o<n;o++)if(t.id===r[o].source&&e.id===r[o].target||e.id===r[o].source&&t.id===r[o].target)return!0;return!1}(a[f],t,r)||!0===s[h]){for(var l=a[f].children,d=!1,p=0;p<l.length;p++){var v=i[l[p]];if(e[v]===e[h]&&!0!==s[v]){a.push(o[v]),u.push(n[i[o[v].id]]),s[v]=!0,d=!0;break}}for(var g=0;!d&&(s[g]||(a.push(o[g]),u.push(n[i[o[g].id]]),s[g]=!0,d=!0),++g!==c););}else a.push(t),u.push(n[i[t.id]]),s[h]=!0,f++})),u},e.prototype.degreeOrdering=function(){var t=this.nodes,e=[],r=this.degrees;return t.forEach((function(t,n){t.degree=r[n],e.push(t)})),e.sort(I),e},e}(c),P=r(11),C=r.n(P),z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.nodeSize=30,e.minNodeSpacing=10,e.preventOverlap=!1,e.equidistant=!1,e.startAngle=1.5*Math.PI,e.clockwise=!0,e.sortBy="degree",e.nodes=[],e.edges=[],e.width=300,e.height=300,e}return a(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeSize:30,minNodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:1.5*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.edges,n=e.length,o=t.center;if(0!==n){if(1===n)return e[0].x=o[0],void(e[0].y=o[1]);var i,a=[];i=j()(t.nodeSize)?Math.max(t.nodeSize[0],t.nodeSize[1]):t.nodeSize,e.forEach((function(t){a.push(t);var e=i;j()(t.size)?e=Math.max(t.size[0],t.size[1]):k(t.size)&&(e=t.size),i=Math.max(i,e)})),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),t.clockwise=void 0!==t.counterclockwise?!t.counterclockwise:t.clockwise;var u={},s={};if(a.forEach((function(t,e){u[t.id]=t,s[t.id]=e})),!("degree"!==t.sortBy&&C()(t.sortBy)&&void 0!==a[0][t.sortBy]||(t.sortBy="degree",k(e[0].degree)))){var c=N(e.length,s,r);a.forEach((function(t,e){t.degree=c[e]}))}a.sort((function(e,r){return r[t.sortBy]-e[t.sortBy]})),t.maxValueNode=a[0],t.maxLevelDiff=t.maxLevelDiff||t.maxValueNode[t.sortBy]/4;var f=[[]],h=f[0];a.forEach((function(e){if(h.length>0){var r=Math.abs(h[0][t.sortBy]-e[t.sortBy]);t.maxLevelDiff&&r>=t.maxLevelDiff&&(h=[],f.push(h))}h.push(e)}));var l=i+t.minNodeSpacing;if(!t.preventOverlap){var d=f.length>0&&f[0].length>1,p=(Math.min(t.width,t.height)/2-l)/(f.length+(d?1:0));l=Math.min(l,p)}var v=0;if(f.forEach((function(e){var r=t.sweep;void 0===r&&(r=2*Math.PI-2*Math.PI/e.length);var n=e.dTheta=r/Math.max(1,e.length-1);if(e.length>1&&t.preventOverlap){var o=Math.cos(n)-Math.cos(0),i=Math.sin(n)-Math.sin(0),a=Math.sqrt(l*l/(o*o+i*i));v=Math.max(a,v)}e.r=v,v+=l})),t.equidistant){for(var g=0,y=0,m=0;m<f.length;m++){var b=f[m].r-y;g=Math.max(g,b)}y=0,f.forEach((function(t,e){0===e&&(y=t.r),t.r=y,y+=g}))}f.forEach((function(e){var r=e.dTheta,n=e.r;e.forEach((function(e,i){var a=t.startAngle+(t.clockwise?1:-1)*r*i;e.x=o[0]+n*Math.cos(a),e.y=o[1]+n*Math.sin(a)}))}))}},e}(c),F=r(74),T=r.n(F),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.rankdir="TB",e.nodesep=50,e.ranksep=50,e.controlPoints=!1,e.sortByCombo=!1,e}return a(e,t),e.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.nodeSize,n=t.rankdir;if(e){var o,i=t.edges||[],a=new T.a.graphlib.Graph;o=r?j()(r)?function(){return r}:function(){return[r,r]}:function(t){return t.size?j()(t.size)?t.size:[t.size,t.size]:[40,40]};var u,s=q(t.nodesepFunc,t.nodesep,50),c=q(t.ranksepFunc,t.ranksep,50);"LR"!==n&&"RL"!==n||(s=q(t.ranksepFunc,t.ranksep,50),c=q(t.nodesepFunc,t.nodesep,50)),a.setDefaultEdgeLabel((function(){return{}})),a.setGraph(t),e.forEach((function(t){var e=o(t),r=c(t),n=s(t),i=e[0]+2*n,u=e[1]+2*r;a.setNode(t.id,{width:i,height:u})})),i.forEach((function(t){a.setEdge(t.source,t.target,{weight:t.weight||1})})),T.a.layout(a),a.nodes().forEach((function(t){u=a.node(t);var r=e.findIndex((function(e){return e.id===t}));e[r].x=u.x,e[r].y=u.y})),a.edges().forEach((function(e){u=a.edge(e);var r=i.findIndex((function(t){return t.source===e.v&&t.target===e.w}));t.controlPoints&&"loop"!==i[r].type&&"loop"!==i[r].shape&&(i[r].controlPoints=u.points.slice(1,u.points.length-1))})),t.sortByCombo&&t.sortLevel("comboId")}},e.prototype.sortLevel=function(t){var e=this.nodes,r={};e.forEach((function(t){r[t.y]||(r[t.y]={y:t.y,nodes:[]}),r[t.y].nodes.push(t)})),Object.keys(r).forEach((function(e){var n=r[e].nodes,o=n.length,i={};if(n.forEach((function(t){var e=t.comboId;i[e]||(i[e]={x:0,y:0,count:0}),i[e].x+=t.x,i[e].y+=t.y,i[e].count++})),Object.keys(i).forEach((function(t){i[t].x/=i[t].count,i[t].y/=i[t].count})),1!==o){var a=n.sort((function(t,e){return t.x-e.x})),u=a[0].x,s=(a[o-1].x-u)/(o-1);n.sort((function(e,r){var n=e[t]||"undefined",o=r[t]||"undefined";return n<o?-1:n>o?1:0})).forEach((function(t,e){t.x=u+e*s}))}}))},e}(c);function q(t,e,r){return t||(k(e)?function(){return e}:function(){return r})}function L(t,e,r,n){if(isNaN(e)||isNaN(r))return t;var o,i,a,u,s,c,f,h,l,d=t._root,p={data:n},v=t._x0,g=t._y0,y=t._x1,m=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((c=e>=(i=(v+y)/2))?v=i:y=i,(f=r>=(a=(g+m)/2))?g=a:m=a,o=d,!(d=d[h=f<<1|c]))return o[h]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&r===s)return p.next=d,o?o[h]=p:t._root=p,t;do{o=o?o[h]=new Array(4):t._root=new Array(4),(c=e>=(i=(v+y)/2))?v=i:y=i,(f=r>=(a=(g+m)/2))?g=a:m=a}while((h=f<<1|c)==(l=(s>=a)<<1|u>=i));return o[l]=d,o[h]=p,t}var B=function(t,e,r,n,o){this.node=t,this.x0=e,this.y0=r,this.x1=n,this.y1=o};function V(t){return t[0]}function U(t){return t[1]}function Y(t,e,r){var n=new H(null==e?V:e,null==r?U:r,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function H(t,e,r,n,o,i){this._x=t,this._y=e,this._x0=r,this._y0=n,this._x1=o,this._y1=i,this._root=void 0}function W(t){for(var e={data:t.data},r=e;t=t.next;)r=r.next={data:t.data};return e}var G=Y.prototype=H.prototype;G.copy=function(){var t,e,r=new H(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return r;if(!n.length)return r._root=W(n),r;for(t=[{source:n,target:r._root=new Array(4)}];n=t.pop();)for(var o=0;o<4;++o)(e=n.source[o])&&(e.length?t.push({source:e,target:n.target[o]=new Array(4)}):n.target[o]=W(e));return r},G.add=function(t){var e=+this._x.call(null,t),r=+this._y.call(null,t);return L(this.cover(e,r),e,r,t)},G.addAll=function(t){var e,r,n,o,i=t.length,a=new Array(i),u=new Array(i),s=1/0,c=1/0,f=-1/0,h=-1/0;for(r=0;r<i;++r)isNaN(n=+this._x.call(null,e=t[r]))||isNaN(o=+this._y.call(null,e))||(a[r]=n,u[r]=o,n<s&&(s=n),n>f&&(f=n),o<c&&(c=o),o>h&&(h=o));if(s>f||c>h)return this;for(this.cover(s,c).cover(f,h),r=0;r<i;++r)L(this,a[r],u[r],t[r]);return this},G.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var r=this._x0,n=this._y0,o=this._x1,i=this._y1;if(isNaN(r))o=(r=Math.floor(t))+1,i=(n=Math.floor(e))+1;else{for(var a,u,s=o-r||1,c=this._root;r>t||t>=o||n>e||e>=i;)switch(u=(e<n)<<1|t<r,(a=new Array(4))[u]=c,c=a,s*=2,u){case 0:o=r+s,i=n+s;break;case 1:r=o-s,i=n+s;break;case 2:o=r+s,n=i-s;break;case 3:r=o-s,n=i-s}this._root&&this._root.length&&(this._root=c)}return this._x0=r,this._y0=n,this._x1=o,this._y1=i,this},G.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},G.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},G.find=function(t,e,r){var n,o,i,a,u,s,c,f=this._x0,h=this._y0,l=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new B(v,f,h,l,d)),null==r?r=1/0:(f=t-r,h=e-r,l=t+r,d=e+r,r*=r);s=p.pop();)if(!(!(v=s.node)||(o=s.x0)>l||(i=s.y0)>d||(a=s.x1)<f||(u=s.y1)<h))if(v.length){var g=(o+a)/2,y=(i+u)/2;p.push(new B(v[3],g,y,a,u),new B(v[2],o,y,g,u),new B(v[1],g,i,a,y),new B(v[0],o,i,g,y)),(c=(e>=y)<<1|t>=g)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-c],p[p.length-1-c]=s)}else{var m=t-+this._x.call(null,v.data),b=e-+this._y.call(null,v.data),w=m*m+b*b;if(w<r){var x=Math.sqrt(r=w);f=t-x,h=e-x,l=t+x,d=e+x,n=v.data}}return n},G.remove=function(t){if(isNaN(i=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var e,r,n,o,i,a,u,s,c,f,h,l,d=this._root,p=this._x0,v=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((c=i>=(u=(p+g)/2))?p=u:g=u,(f=a>=(s=(v+y)/2))?v=s:y=s,e=d,!(d=d[h=f<<1|c]))return this;if(!d.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(r=e,l=h)}for(;d.data!==t;)if(n=d,!(d=d.next))return this;return(o=d.next)&&delete d.next,n?(o?n.next=o:delete n.next,this):e?(o?e[h]=o:delete e[h],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(r?r[l]=d:this._root=d),this):(this._root=o,this)},G.removeAll=function(t){for(var e=0,r=t.length;e<r;++e)this.remove(t[e]);return this},G.root=function(){return this._root},G.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},G.visit=function(t){var e,r,n,o,i,a,u=[],s=this._root;for(s&&u.push(new B(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,n=e.x0,o=e.y0,i=e.x1,a=e.y1)&&s.length){var c=(n+i)/2,f=(o+a)/2;(r=s[3])&&u.push(new B(r,c,f,i,a)),(r=s[2])&&u.push(new B(r,n,f,c,a)),(r=s[1])&&u.push(new B(r,c,o,i,f)),(r=s[0])&&u.push(new B(r,n,o,c,f))}return this},G.visitAfter=function(t){var e,r=[],n=[];for(this._root&&r.push(new B(this._root,this._x0,this._y0,this._x1,this._y1));e=r.pop();){var o=e.node;if(o.length){var i,a=e.x0,u=e.y0,s=e.x1,c=e.y1,f=(a+s)/2,h=(u+c)/2;(i=o[0])&&r.push(new B(i,a,u,f,h)),(i=o[1])&&r.push(new B(i,f,u,s,h)),(i=o[2])&&r.push(new B(i,a,h,f,c)),(i=o[3])&&r.push(new B(i,f,h,s,c))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},G.x=function(t){return arguments.length?(this._x=t,this):this._x},G.y=function(t){return arguments.length?(this._y=t,this):this._y};var $=function(t){return function(){return t}},X=function(t){return 1e-6*(t()-.5)},J={value:function(){}};function Q(){for(var t,e=0,r=arguments.length,n={};e<r;++e){if(!(t=arguments[e]+"")||t in n||/[\\s.]/.test(t))throw new Error("illegal type: "+t);n[t]=[]}return new K(n)}function K(t){this._=t}function Z(t,e){return t.trim().split(/^|\\s+/).map((function(t){var r="",n=t.indexOf(".");if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:r}}))}function tt(t,e){for(var r,n=0,o=t.length;n<o;++n)if((r=t[n]).name===e)return r.value}function et(t,e,r){for(var n=0,o=t.length;n<o;++n)if(t[n].name===e){t[n]=J,t=t.slice(0,n).concat(t.slice(n+1));break}return null!=r&&t.push({name:e,value:r}),t}K.prototype=Q.prototype={constructor:K,on:function(t,e){var r,n=this._,o=Z(t+"",n),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<a;)if(r=(t=o[i]).type)n[r]=et(n[r],t.name,e);else if(null==e)for(r in n)n[r]=et(n[r],t.name,null);return this}for(;++i<a;)if((r=(t=o[i]).type)&&(r=tt(n[r],t.name)))return r},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new K(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var r,n,o=new Array(r),i=0;i<r;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,r=(n=this._[t]).length;i<r;++i)n[i].value.apply(e,o)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var n=this._[t],o=0,i=n.length;o<i;++o)n[o].value.apply(e,r)}};var rt=Q;function nt(t){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ot,it,at=0,ut=0,st=0,ct=0,ft=0,ht=0,lt="object"===("undefined"==typeof performance?"undefined":nt(performance))&&performance.now?performance:Date,dt="object"===("undefined"==typeof window?"undefined":nt(window))&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function pt(){return ft||(dt(vt),ft=lt.now()+ht)}function vt(){ft=0}function gt(){this._call=this._time=this._next=null}function yt(t,e,r){var n=new gt;return n.restart(t,e,r),n}function mt(){ft=(ct=lt.now())+ht,at=ut=0;try{!function(){pt(),++at;for(var t,e=ot;e;)(t=ft-e._time)>=0&&e._call.call(null,t),e=e._next;--at}()}finally{at=0,function(){var t,e,r=ot,n=1/0;for(;r;)r._call?(n>r._time&&(n=r._time),t=r,r=r._next):(e=r._next,r._next=null,r=t?t._next=e:ot=e);it=t,wt(n)}(),ft=0}}function bt(){var t=lt.now(),e=t-ct;e>1e3&&(ht-=e,ct=t)}function wt(t){at||(ut&&(ut=clearTimeout(ut)),t-ft>24?(t<1/0&&(ut=setTimeout(mt,t-lt.now()-ht)),st&&(st=clearInterval(st))):(st||(ct=lt.now(),st=setInterval(bt,1e3)),at=1,dt(mt)))}gt.prototype=yt.prototype={constructor:gt,restart:function(t,e,r){if("function"!=typeof t)throw new TypeError("callback is not a function");r=(null==r?pt():+r)+(null==e?0:+e),this._next||it===this||(it?it._next=this:ot=this,it=this),this._call=t,this._time=r,wt()},stop:function(){this._call&&(this._call=null,this._time=1/0,wt())}};function xt(t){return t.x}function Mt(t){return t.y}var kt=Math.PI*(3-Math.sqrt(5)),_t=function(t){var e,r,n=1,o=.001,i=1-Math.pow(o,1/300),a=0,u=.6,s=new Map,c=yt(l),f=rt("tick","end"),h=(r=1,function(){return(r=(1664525*r+1013904223)%4294967296)/4294967296});function l(){d(),f.call("tick",e),n<o&&(c.stop(),f.call("end",e))}function d(r){var o,c,f=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(a-n)*i,s.forEach((function(t){t(n)})),o=0;o<f;++o)null==(c=t[o]).fx?c.x+=c.vx*=u:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=u:(c.y=c.fy,c.vy=0);return e}function p(){for(var e,r=0,n=t.length;r<n;++r){if((e=t[r]).index=r,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var o=10*Math.sqrt(.5+r),i=r*kt;e.x=o*Math.cos(i),e.y=o*Math.sin(i)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function v(e){return e.initialize&&e.initialize(t,h),e}return null==t&&(t=[]),p(),e={tick:d,restart:function(){return c.restart(l),e},stop:function(){return c.stop(),e},nodes:function(r){return arguments.length?(t=r,p(),s.forEach(v),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(o=+t,e):o},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(a=+t,e):a},velocityDecay:function(t){return arguments.length?(u=1-t,e):1-u},randomSource:function(t){return arguments.length?(h=t,s.forEach(v),e):h},force:function(t,r){return arguments.length>1?(null==r?s.delete(t):s.set(t,v(r)),e):s.get(t)},find:function(e,r,n){var o,i,a,u,s,c=0,f=t.length;for(null==n?n=1/0:n*=n,c=0;c<f;++c)(a=(o=e-(u=t[c]).x)*o+(i=r-u.y)*i)<n&&(s=u,n=a);return s},on:function(t,r){return arguments.length>1?(f.on(t,r),e):f.on(t)}}},St=function(){var t,e,r,n,o,i=$(-30),a=1,u=1/0,s=.81;function c(r){var o,i=t.length,a=Y(t,xt,Mt).visitAfter(h);for(n=r,o=0;o<i;++o)e=t[o],a.visit(l)}function f(){if(t){var e,r,n=t.length;for(o=new Array(n),e=0;e<n;++e)r=t[e],o[r.index]=+i(r,e,t)}}function h(t){var e,r,n,i,a,u=0,s=0;if(t.length){for(n=i=a=0;a<4;++a)(e=t[a])&&(r=Math.abs(e.value))&&(u+=e.value,s+=r,n+=r*e.x,i+=r*e.y);t.x=n/s,t.y=i/s}else{(e=t).x=e.data.x,e.y=e.data.y;do{u+=o[e.data.index]}while(e=e.next)}t.value=u}function l(t,i,c,f){if(!t.value)return!0;var h=t.x-e.x,l=t.y-e.y,d=f-i,p=h*h+l*l;if(d*d/s<p)return p<u&&(0===h&&(p+=(h=X(r))*h),0===l&&(p+=(l=X(r))*l),p<a&&(p=Math.sqrt(a*p)),e.vx+=h*t.value*n/p,e.vy+=l*t.value*n/p),!0;if(!(t.length||p>=u)){(t.data!==e||t.next)&&(0===h&&(p+=(h=X(r))*h),0===l&&(p+=(l=X(r))*l),p<a&&(p=Math.sqrt(a*p)));do{t.data!==e&&(d=o[t.data.index]*n/p,e.vx+=h*d,e.vy+=l*d)}while(t=t.next)}}return c.initialize=function(e,n){t=e,r=n,f()},c.strength=function(t){return arguments.length?(i="function"==typeof t?t:$(+t),f(),c):i},c.distanceMin=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.distanceMax=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c.theta=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c};function Et(t){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jt(t){return t.index}function At(t,e){var r=t.get(e);if(!r)throw new Error("node not found: "+e);return r}var Ot=function(t){var e,r,n,o,i,a,u=jt,s=function(t){return 1/Math.min(o[t.source.index],o[t.target.index])},c=$(30),f=1;function h(n){for(var o=0,u=t.length;o<f;++o)for(var s,c,h,l,d,p,v,g=0;g<u;++g)c=(s=t[g]).source,l=(h=s.target).x+h.vx-c.x-c.vx||X(a),d=h.y+h.vy-c.y-c.vy||X(a),l*=p=((p=Math.sqrt(l*l+d*d))-r[g])/p*n*e[g],d*=p,h.vx-=l*(v=i[g]),h.vy-=d*v,c.vx+=l*(v=1-v),c.vy+=d*v}function l(){if(n){var a,s,c=n.length,f=t.length,h=new Map(n.map((function(t,e){return[u(t,e,n),t]})));for(a=0,o=new Array(c);a<f;++a)(s=t[a]).index=a,"object"!==Et(s.source)&&(s.source=At(h,s.source)),"object"!==Et(s.target)&&(s.target=At(h,s.target)),o[s.source.index]=(o[s.source.index]||0)+1,o[s.target.index]=(o[s.target.index]||0)+1;for(a=0,i=new Array(f);a<f;++a)s=t[a],i[a]=o[s.source.index]/(o[s.source.index]+o[s.target.index]);e=new Array(f),d(),r=new Array(f),p()}}function d(){if(n)for(var r=0,o=t.length;r<o;++r)e[r]=+s(t[r],r,t)}function p(){if(n)for(var e=0,o=t.length;e<o;++e)r[e]=+c(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){n=t,a=e,l()},h.links=function(e){return arguments.length?(t=e,l(),h):t},h.id=function(t){return arguments.length?(u=t,h):u},h.iterations=function(t){return arguments.length?(f=+t,h):f},h.strength=function(t){return arguments.length?(s="function"==typeof t?t:$(+t),d(),h):s},h.distance=function(t){return arguments.length?(c="function"==typeof t?t:$(+t),p(),h):c},h};function Nt(t){return t.x+t.vx}function It(t){return t.y+t.vy}var Rt=function(t){var e,r,n,o=1,i=1;function a(){for(var t,a,s,c,f,h,l,d=e.length,p=0;p<i;++p)for(a=Y(e,Nt,It).visitAfter(u),t=0;t<d;++t)s=e[t],h=r[s.index],l=h*h,c=s.x+s.vx,f=s.y+s.vy,a.visit(v);function v(t,e,r,i,a){var u=t.data,d=t.r,p=h+d;if(!u)return e>c+p||i<c-p||r>f+p||a<f-p;if(u.index>s.index){var v=c-u.x-u.vx,g=f-u.y-u.vy,y=v*v+g*g;y<p*p&&(0===v&&(y+=(v=X(n))*v),0===g&&(y+=(g=X(n))*g),y=(p-(y=Math.sqrt(y)))/y*o,s.vx+=(v*=y)*(p=(d*=d)/(l+d)),s.vy+=(g*=y)*p,u.vx-=v*(p=1-p),u.vy-=g*p)}}}function u(t){if(t.data)return t.r=r[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var n,o,i=e.length;for(r=new Array(i),n=0;n<i;++n)o=e[n],r[o.index]=+t(o,n,e)}}return"function"!=typeof t&&(t=$(null==t?1:+t)),a.initialize=function(t,r){e=t,n=r,s()},a.iterations=function(t){return arguments.length?(i=+t,a):i},a.strength=function(t){return arguments.length?(o=+t,a):o},a.radius=function(e){return arguments.length?(t="function"==typeof e?e:$(+e),s(),a):t},a};function Pt(){function t(t){return function(){return t}}var e,r=function(t){return t.cluster},n=t(1),o=t(-1),i=t(100),a=t(.1),u=[0,0],s=[],c={},f=[],h=100,l=100,d={none:{x:0,y:0}},p=[],v="force",g=!0,y=.1;function m(t){if(!g)return m;e.tick(),w();for(var n=0,o=s.length,i=void 0,a=t*y;n<o;++n)(i=s[n]).vx+=(d[r(i)].x-i.x)*a,i.vy+=(d[r(i)].y-i.y)*a}function b(){s&&function(){if(!s||!s.length)return;if(void 0===r(s[0]))throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy(\'clusterAttr\') before calling .links()");var t=(d=[],v=[],g={},y=[],u=function(t){var e={};return t.forEach((function(t){var n=r(t);e[n]||(e[n]={count:0,sumforceNodeSize:0})})),t.forEach((function(t){var o=r(t),i=n(t),a=e[o];a.count=a.count+1,a.sumforceNodeSize=a.sumforceNodeSize+Math.PI*(i*i)*1.3,e[o]=a})),e}(s),y=function(t){var e={},n=[];return t.forEach((function(t){var n=function(t){var e=r(c[t.source]),n=r(c[t.target]);return e<=n?e+"~"+n:n+"~"+e}(t),o=0;void 0!==e[n]&&(o=e[n]),o+=1,e[n]=o})),Object.entries(e).forEach((function(t){var e=t[0],r=t[1],o=e.split("~")[0],i=e.split("~")[1];void 0!==o&&void 0!==i&&n.push({source:o,target:i,count:r})})),n}(f),Object.keys(u).forEach((function(t,e){var r=u[t];d.push({id:t,size:r.count,r:Math.sqrt(r.sumforceNodeSize/Math.PI)}),g[t]=e})),y.forEach((function(t){var e=g[t.source],r=g[t.target];void 0!==e&&void 0!==r&&v.push({source:e,target:r,count:t.count})})),{nodes:d,links:v});var u,d,v,g,y;e=_t(t.nodes).force("x",function(t){var e,r,n,o=$(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vx+=(n[i]-o.x)*r[i]*t}function a(){if(e){var i,a=e.length;for(r=new Array(a),n=new Array(a),i=0;i<a;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=$(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:$(+t),a(),i):o},i.x=function(e){return arguments.length?(t="function"==typeof e?e:$(+e),a(),i):t},i}(h).strength(.1)).force("y",function(t){var e,r,n,o=$(.1);function i(t){for(var o,i=0,a=e.length;i<a;++i)(o=e[i]).vy+=(n[i]-o.y)*r[i]*t}function a(){if(e){var i,a=e.length;for(r=new Array(a),n=new Array(a),i=0;i<a;++i)r[i]=isNaN(n[i]=+t(e[i],i,e))?0:+o(e[i],i,e)}}return"function"!=typeof t&&(t=$(null==t?0:+t)),i.initialize=function(t){e=t,a()},i.strength=function(t){return arguments.length?(o="function"==typeof t?t:$(+t),a(),i):o},i.y=function(e){return arguments.length?(t="function"==typeof e?e:$(+e),a(),i):t},i}(l).strength(.1)).force("collide",Rt((function(t){return t.r})).iterations(4)).force("charge",St().strength(o)).force("links",Ot(t.nodes.length?t.links:[]).distance(i).strength(a)),p=e.nodes(),w()}()}function w(){return d={none:{x:0,y:0}},p.forEach((function(t){d[t.id]={x:t.x-u[0],y:t.y-u[1]}})),d}function x(t){c={},t.forEach((function(t){c[t.id]=t}))}return m.initialize=function(t){s=t,b()},m.template=function(t){return arguments.length?(v=t,b(),m):v},m.groupBy=function(t){return arguments.length?"string"==typeof t?(r=function(e){return e[t]},m):(r=t,m):r},m.enableGrouping=function(t){return arguments.length?(g=t,m):g},m.strength=function(t){return arguments.length?(y=t,m):y},m.centerX=function(t){return arguments.length?(h=t,m):h},m.centerY=function(t){return arguments.length?(l=t,m):l},m.nodes=function(t){return arguments.length?(x(t||[]),s=t||[],m):s},m.links=function(t){return arguments.length?(f=t||[],b(),m):f},m.forceNodeSize=function(e){return arguments.length?(n="function"==typeof e?e:t(+e),b(),m):n},m.nodeSize=m.forceNodeSize,m.forceCharge=function(e){return arguments.length?(o="function"==typeof e?e:t(+e),b(),m):o},m.forceLinkDistance=function(e){return arguments.length?(i="function"==typeof e?e:t(+e),b(),m):i},m.forceLinkStrength=function(e){return arguments.length?(a="function"==typeof e?e:t(+e),b(),m):a},m.offset=function(t){return arguments.length?(u=t,m):u},m.getFocis=w,m}var Ct=r(31),zt=r.n(Ct),Ft=r(19),Tt=r.n(Ft),Dt="LAYOUT_RUN",qt="LAYOUT_END",Lt="LAYOUT_ERROR",Bt="LAYOUT_TICK",Vt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.nodeStrength=null,e.edgeStrength=null,e.preventOverlap=!1,e.clusterNodeStrength=null,e.clusterEdgeStrength=null,e.clusterEdgeDistance=null,e.clusterNodeSize=null,e.clusterFociStrength=null,e.linkDistance=50,e.alphaDecay=.028,e.alphaMin=.001,e.alpha=.3,e.collideStrength=1,e.workerEnabled=!1,e.tick=function(){},e.onLayoutEnd=function(){},e.onTick=function(){},e.ticking=void 0,e}return a(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},onTick:function(){},workerEnabled:!1}},e.prototype.init=function(t){this.nodes=t.nodes||[];var e=t.edges||[];this.edges=e.map((function(t){var e={},r=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(t).forEach((function(n){r.indexOf(n)>-1||(e[n]=t[n])})),e})),this.ticking=!1},e.prototype.execute=function(t){var e=this,r=e.nodes,n=e.edges;if(!e.ticking){var o=e.forceSimulation,i=e.alphaMin,a=e.alphaDecay,u=e.alpha;if(o)t&&(e.clustering&&e.clusterForce&&(e.clusterForce.nodes(r),e.clusterForce.links(n)),o.nodes(r),e.edgeForce.links(n)),e.preventOverlap&&e.overlapProcess(o),o.alpha(u).restart(),this.ticking=!0;else try{var s=St();if(e.nodeStrength&&s.strength(e.nodeStrength),o=_t().nodes(r),e.clustering){var c=Pt();c.centerX(e.center[0]).centerY(e.center[1]).template("force").strength(e.clusterFociStrength),n&&c.links(n),r&&c.nodes(r),c.forceLinkDistance(e.clusterEdgeDistance).forceLinkStrength(e.clusterEdgeStrength).forceCharge(e.clusterNodeStrength).forceNodeSize(e.clusterNodeSize),e.clusterForce=c,o.force("group",c)}if(o.force("center",function(t,e){var r,n=1;function o(){var o,i,a=r.length,u=0,s=0;for(o=0;o<a;++o)u+=(i=r[o]).x,s+=i.y;for(u=(u/a-t)*n,s=(s/a-e)*n,o=0;o<a;++o)(i=r[o]).x-=u,i.y-=s}return null==t&&(t=0),null==e&&(e=0),o.initialize=function(t){r=t},o.x=function(e){return arguments.length?(t=+e,o):t},o.y=function(t){return arguments.length?(e=+t,o):e},o.strength=function(t){return arguments.length?(n=+t,o):n},o}(e.center[0],e.center[1])).force("charge",s).alpha(u).alphaDecay(a).alphaMin(i),e.preventOverlap&&e.overlapProcess(o),n){var f=Ot().id((function(t){return t.id})).links(n);e.edgeStrength&&f.strength(e.edgeStrength),e.linkDistance&&f.distance(e.linkDistance),e.edgeForce=f,o.force("link",f)}if(e.workerEnabled&&!Ut()&&(e.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),e.workerEnabled){o.stop();for(var h=function(t){var e=t.alphaMin(),r=t.alphaTarget(),n=t.alpha(),o=Math.log((e-r)/(n-r))/Math.log(1-t.alphaDecay());return Math.ceil(o)}(o),l=1;l<=h;l++)o.tick(),postMessage({type:Bt,currentTick:l,totalTicks:h,nodes:r},void 0);e.ticking=!1}else o.on("tick",(function(){e.tick()})).on("end",(function(){e.ticking=!1,e.onLayoutEnd&&e.onLayoutEnd()})),e.ticking=!0;e.forceSimulation=o,e.ticking=!0}catch(t){e.ticking=!1,console.warn(t)}}},e.prototype.overlapProcess=function(t){var e,r,n=this.nodeSize,o=this.nodeSpacing,i=this.collideStrength;if(r=Tt()(o)?function(){return o}:zt()(o)?o:function(){return 0},n)if(zt()(n))e=function(t){return n(t)+r(t)};else if(j()(n)){var a=(n[0]>n[1]?n[0]:n[1])/2;e=function(t){return a+r(t)}}else if(Tt()(n)){var u=n/2;e=function(t){return u+r(t)}}else e=function(){return 10};else e=function(t){return t.size?j()(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+r(t):t.size/2+r(t):10+r(t)};t.force("collisionForce",Rt(e).strength(i))},e.prototype.updateCfg=function(t){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.forceSimulation=null,s()(this,t)},e.prototype.destroy=function(){this.ticking&&(this.forceSimulation.stop(),this.ticking=!1),this.nodes=null,this.edges=null,this.destroyed=!0},e}(c);function Ut(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}var Yt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.maxIteration=500,e.gravity=10,e.clustering=!1,e.clusterGravity=10,e.linkDistance=50,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.linkStrength=1,e.nodeStrength=30,e.preventOverlap=!1,e.collideStrength=1,e.optimizeRangeFactor=1,e.tick=function(){},e.nodes=[],e.edges=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.nodeIdxMap={},e}return a(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,clustering:!1,clusterGravity:10,preventOverlap:!1,nodeSpacing:void 0,collideStrength:10}},e.prototype.execute=function(){var t=this.nodes,e=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=e[0],void(t[0].y=e[1]);var r={},n={};t.forEach((function(t,e){r[t.id]=t,n[t.id]=e})),this.nodeMap=r,this.nodeIdxMap=n,this.run()}},e.prototype.run=function(){var t=this,e=t.nodes,r=t.edges,n=t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var o,i=t.center,a=t.velocityDecay,u=t.clustering;t.initVals(),u&&(o=t.getClusterMap());for(var s=function(n){var i=[];e.forEach((function(t,e){i[e]={x:0,y:0}})),t.applyCalculate(e,r,i),u&&t.applyClusterForce(o,i),e.forEach((function(t,e){k(t.x)&&k(t.y)&&(t.x+=i[e].x*a,t.y+=i[e].y*a)})),c.alpha+=(c.alphaTarget-c.alpha)*c.alphaDecay,t.tick()},c=this,f=0;f<n;f++)s();var h=[0,0];e.forEach((function(t){k(t.x)&&k(t.y)&&(h[0]+=t.x,h[1]+=t.y)})),h[0]/=e.length,h[1]/=e.length;var l=[i[0]-h[0],i[1]-h[1]];e.forEach((function(t,e){k(t.x)&&k(t.y)&&(t.x+=l[0],t.y+=l[1])}))},e.prototype.initVals=function(){for(var t=this.edges,e={},r=0;r<t.length;++r)e[t[r].source]?e[t[r].source]++:e[t[r].source]=1,e[t[r].target]?e[t[r].target]++:e[t[r].target]=1;var n=[];for(r=0;r<t.length;++r)n[r]=e[t[r].source]/(e[t[r].source]+e[t[r].target]);this.bias=n;var o,i,a=this.nodeSize,u=this.nodeSpacing;if(i=k(u)?function(){return u}:g(u)?u:function(){return 0},a)if(g(a))o=function(t){return a(t)+i(t)};else if(y(a)){var s=(a[0]>a[1]?a[0]:a[1])/2;o=function(t){return s+i(t)}}else if(k(a)){var c=a/2;o=function(t){return c+i(t)}}else o=function(){return 10};else o=function(t){return t.size?y(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2+i(t):t.size/2+i(t):10+i(t)};this.nodeSize=o;var f,h=this.linkDistance;h||(h=50),k(h)&&(f=function(t){return h}),this.linkDistance=f;var l,d=this.linkStrength;d||(d=1),k(d)&&(l=function(t){return d}),this.linkStrength=l;var p,v=this.nodeStrength;v||(v=30),k(v)&&(p=function(t){return v}),this.nodeStrength=p},e.prototype.getClusterMap=function(){var t=this.nodes,e={};for(var r in t.forEach((function(t){if(void 0===e[t.cluster]){var r={name:t.cluster,cx:0,cy:0,count:0};e[t.cluster]=r}var n=e[t.cluster];k(t.x)&&(n.cx+=t.x),k(t.y)&&(n.cy+=t.y),n.count++})),e)e[r].cx/=e[r].count,e[r].cy/=e[r].count;return e},e.prototype.applyClusterForce=function(t,e){var r=this.gravity,n=this.nodes,o=this.clusterGravity||r,i=this.alpha;for(var a in n.forEach((function(r,n){if(k(r.x)&&k(r.y)){var a=t[r.cluster],u=r.x-a.cx,s=r.y-a.cy,c=Math.sqrt(u*u+s*s);e[n].x-=u*o*i/c,e[n].y-=s*o*i/c}})),t)t[a].cx=0,t[a].cy=0,t[a].count=0;for(var a in n.forEach((function(e){var r=t[e.cluster];k(e.x)&&(r.cx+=e.x),k(e.y)&&(r.cy+=e.y),r.count++})),t)t[a].cx/=t[a].count,t[a].cy/=t[a].count},e.prototype.applyCalculate=function(t,e,r){var n={};t.forEach((function(e,o){r[o]={x:0,y:0},t.forEach((function(t,r){if(!(o<r)){var i=e.x-t.x,a=e.y-t.y,u=i*i+a*a;u<1&&(u=Math.sqrt(u)),0===i&&(u+=(i=.01*Math.random())*i),0===a&&(u+=(a=.01*Math.random())*a);var s=Math.sqrt(u);n[e.id+"-"+t.id]={vx:i,vy:a,vl:u,sqrtVl:s},n[t.id+"-"+e.id]={vx:-i,vy:-a,vl:u,sqrtVl:s}}}))})),this.calRepulsive(t,r,n),this.calAttractive(e,r,n)},e.prototype.calRepulsive=function(t,e,r){var n=this.width*this.optimizeRangeFactor*this.width*this.optimizeRangeFactor,o=this.nodeStrength,i=this.alpha,a=this.collideStrength,u=this.preventOverlap,s=this.nodeSize;t.forEach((function(c,f){t.forEach((function(t,h){if(f!==h&&k(c.x)&&k(t.x)&&k(c.y)&&k(t.y)){var l=r[c.id+"-"+t.id],d=l.vl,p=l.vx,v=l.vy;if(!(d>n)&&(e[f].x+=p*o(t)*i/d,e[f].y+=v*o(t)*i/d,u&&f<h)){var g=s(c),y=s(t),m=g+y;if(d<m*m){var b=r[c.id+"-"+t.id].sqrtVl,w=(m-b)/b*a,x=y*y/(g*g+y*y),M=p*w,_=v*w;e[f].x+=M*x,e[f].y+=_*x,x=1-x,e[h].x-=M*x,e[h].y-=_*x}}}}))}))},e.prototype.calAttractive=function(t,e,r){var n=this,o=this.linkDistance,i=this.alpha,a=this.linkStrength,u=this.bias;t.forEach((function(t,s){if(t.source&&t.target){var c=n.nodeIdxMap[t.source],f=n.nodeIdxMap[t.target];if(c!==f){var h=n.nodeMap[t.source],l=n.nodeMap[t.target];if(k(l.x)&&k(h.x)&&k(l.y)&&k(h.y)){var d=r[t.target+"-"+t.source],p=(d.vl,d.sqrtVl),v=d.vx,g=d.vy,y=(p-o(t))/p*i*a(t),m=v*y,b=g*y,w=u[s];e[f].x-=m*w,e[f].y-=b*w,e[c].x+=m*(1-w),e[c].y+=b*(1-w)}}}}))},e}(c),Ht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.maxIteration=1e3,e.gravity=10,e.speed=1,e.clustering=!1,e.clusterGravity=10,e.nodes=[],e.edges=[],e.width=300,e.height=300,e.nodeMap={},e.nodeIdxMap={},e}return a(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:1e3,center:[0,0],gravity:10,speed:1,clustering:!1,clusterGravity:10}},e.prototype.execute=function(){var t=this,e=this.nodes,r=this.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=r[0],void(e[0].y=r[1]);var n={},o={};e.forEach((function(e,r){k(e.x)||(e.x=Math.random()*t.width),k(e.y)||(e.y=Math.random()*t.height),n[e.id]=e,o[e.id]=r})),this.nodeMap=n,this.nodeIdxMap=o,this.run()}},e.prototype.run=function(){var t=this,e=t.nodes,r=t.edges,n=t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var o=t.center,i=t.width/10,a=Math.sqrt(t.width*t.height/(e.length+1)),u=t.gravity,s=t.speed,c=t.clustering,f={};if(c)for(var h in e.forEach((function(t){if(void 0===f[t.cluster]){var e={name:t.cluster,cx:0,cy:0,count:0};f[t.cluster]=e}var r=f[t.cluster];k(t.x)&&(r.cx+=t.x),k(t.y)&&(r.cy+=t.y),r.count++})),f)f[h].cx/=f[h].count,f[h].cy/=f[h].count;for(var l=function(n){var h=[];if(e.forEach((function(t,e){h[e]={x:0,y:0}})),t.applyCalculate(e,r,h,a),c){var l=t.clusterGravity||u;for(var d in e.forEach((function(t,e){if(k(t.x)&&k(t.y)){var r=f[t.cluster],n=Math.sqrt((t.x-r.cx)*(t.x-r.cx)+(t.y-r.cy)*(t.y-r.cy)),o=a*l;h[e].x-=o*(t.x-r.cx)/n,h[e].y-=o*(t.y-r.cy)/n}})),f)f[d].cx=0,f[d].cy=0,f[d].count=0;for(var d in e.forEach((function(t){var e=f[t.cluster];k(t.x)&&(e.cx+=t.x),k(t.y)&&(e.cy+=t.y),e.count++})),f)f[d].cx/=f[d].count,f[d].cy/=f[d].count}e.forEach((function(t,e){if(k(t.x)&&k(t.y)){var r=.01*a*u;h[e].x-=r*(t.x-o[0]),h[e].y-=r*(t.y-o[1])}})),e.forEach((function(t,e){if(k(t.x)&&k(t.y)){var r=Math.sqrt(h[e].x*h[e].x+h[e].y*h[e].y);if(r>0){var n=Math.min(i*(s/800),r);t.x+=h[e].x/r*n,t.y+=h[e].y/r*n}}}))},d=0;d<n;d++)l()},e.prototype.applyCalculate=function(t,e,r,n){this.calRepulsive(t,r,n),this.calAttractive(e,r,n)},e.prototype.calRepulsive=function(t,e,r){t.forEach((function(n,o){e[o]={x:0,y:0},t.forEach((function(t,i){if(o!==i&&k(n.x)&&k(t.x)&&k(n.y)&&k(t.y)){var a=n.x-t.x,u=n.y-t.y,s=a*a+u*u;if(0===s){s=1;var c=o>i?1:-1;a=.01*c,u=.01*c}var f=r*r/s;e[o].x+=a*f,e[o].y+=u*f}}))}))},e.prototype.calAttractive=function(t,e,r){var n=this;t.forEach((function(t){if(t.source&&t.target){var o=n.nodeIdxMap[t.source],i=n.nodeIdxMap[t.target];if(o!==i){var a=n.nodeMap[t.source],u=n.nodeMap[t.target];if(k(u.x)&&k(a.x)&&k(u.y)&&k(a.y)){var s=u.x-a.x,c=u.y-a.y,f=Math.sqrt(s*s+c*c),h=f*f/r;e[i].x-=s/f*h,e[i].y-=c/f*h,e[o].x+=s/f*h,e[o].y+=c/f*h}}}}))},e}(c),Wt=(r(54),r(130)),Gt=(function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}a(e,t)}(r.n(Wt).a),function(t){return Number.isNaN(Number(t))}),$t=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.begin=[0,0],e.preventOverlap=!0,e.preventOverlapPadding=10,e.condense=!1,e.sortBy="degree",e.nodeSize=30,e.nodes=[],e.edges=[],e.center=[0,0],e.width=300,e.height=300,e.row=0,e.col=0,e.cellWidth=0,e.cellHeight=0,e.cellUsed={},e.id2manPos={},e}return a(e,t),e.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},e.prototype.execute=function(){var t=this,e=t.nodes,r=e.length,n=t.center;if(0!==r){if(1===r)return e[0].x=n[0],void(e[0].y=n[1]);var o=t.edges,i=[];e.forEach((function(t){i.push(t)}));var a={};if(i.forEach((function(t,e){a[t.id]=e})),("degree"===t.sortBy||!C()(t.sortBy)||void 0===i[0][t.sortBy])&&(t.sortBy="degree",Gt(e[0].degree))){var u=N(i.length,a,o);i.forEach((function(t,e){t.degree=u[e]}))}i.sort((function(e,r){return r[t.sortBy]-e[t.sortBy]})),t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var s=t.rows,c=null!=t.cols?t.cols:t.columns;if(t.cells=r,null!=s&&null!=c?(t.rows=s,t.cols=c):null!=s&&null==c?(t.rows=s,t.cols=Math.ceil(t.cells/t.rows)):null==s&&null!=c?(t.cols=c,t.rows=Math.ceil(t.cells/t.cols)):(t.splits=Math.sqrt(t.cells*t.height/t.width),t.rows=Math.round(t.splits),t.cols=Math.round(t.width/t.height*t.splits)),t.cols*t.rows>t.cells)((h=t.small())-1)*(f=t.large())>=t.cells?t.small(h-1):(f-1)*h>=t.cells&&t.large(f-1);else for(;t.cols*t.rows<t.cells;){var f,h=t.small();((f=t.large())+1)*h>=t.cells?t.large(f+1):t.small(h+1)}t.cellWidth=t.width/t.cols,t.cellHeight=t.height/t.rows,t.condense&&(t.cellWidth=0,t.cellHeight=0),t.preventOverlap&&i.forEach((function(e){var r,n;e.x&&e.y||(e.x=0,e.y=0),y(e.size)?(r=e.size[0],n=e.size[1]):k(e.size)&&(r=e.size,n=e.size),void 0!==r&&void 0!==n||(y(t.nodeSize)?(r=t.nodeSize[0],n=t.nodeSize[1]):k(t.nodeSize)?(r=t.nodeSize,n=t.nodeSize):(r=30,n=30));var o=t.preventOverlapPadding,i=r+o,a=n+o;t.cellWidth=Math.max(t.cellWidth,i),t.cellHeight=Math.max(t.cellHeight,a)})),t.cellUsed={},t.row=0,t.col=0,t.id2manPos={};for(var l=0;l<i.length;l++){var d=i[l],p=void 0;if(t.position&&(p=t.position(d)),p&&(void 0!==p.row||void 0!==p.col)){var v={row:p.row,col:p.col};if(void 0===v.col)for(v.col=0;t.used(v.row,v.col);)v.col++;else if(void 0===v.row)for(v.row=0;t.used(v.row,v.col);)v.row++;t.id2manPos[d.id]=v,t.use(v.row,v.col)}t.getPos(d)}}},e.prototype.small=function(t){var e,r=this.rows||5,n=this.cols||5;null==t?e=Math.min(r,n):Math.min(r,n)===this.rows?this.rows=t:this.cols=t;return e},e.prototype.large=function(t){var e,r=this.rows||5,n=this.cols||5;null==t?e=Math.max(r,n):Math.max(r,n)===this.rows?this.rows=t:this.cols=t;return e},e.prototype.used=function(t,e){return this.cellUsed["c-"+t+"-"+e]||!1},e.prototype.use=function(t,e){this.cellUsed["c-"+t+"-"+e]=!0},e.prototype.moveToNextCell=function(){var t=this.cols||5;this.col++,this.col>=t&&(this.col=0,this.row++)},e.prototype.getPos=function(t){var e,r,n=this.begin,o=this.cellWidth,i=this.cellHeight,a=this.id2manPos[t.id];if(a)e=a.col*o+o/2+n[0],r=a.row*i+i/2+n[1];else{for(;this.used(this.row,this.col);)this.moveToNextCell();e=this.col*o+o/2+n[0],r=this.row*i+i/2+n[1],this.use(this.row,this.col),this.moveToNextCell()}t.x=e,t.y=r},e}(c),Xt=Object.prototype.toString;function Jt(t){return Xt.call(t).endsWith("Array]")}var Qt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Jt(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,o=e.toIndex,i=void 0===o?t.length:o;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=n||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[n],u=n+1;u<i;u++)t[u]>a&&(a=t[u]);return a};var Kt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Jt(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");var r=e.fromIndex,n=void 0===r?0:r,o=e.toIndex,i=void 0===o?t.length:o;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(i<=n||i>t.length||!Number.isInteger(i))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var a=t[n],u=n+1;u<i;u++)t[u]<a&&(a=t[u]);return a};var Zt=function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Jt(t))throw new TypeError("input must be an array");if(0===t.length)throw new TypeError("input must not be empty");if(void 0!==r.output){if(!Jt(r.output))throw new TypeError("output option must be an array if specified");e=r.output}else e=new Array(t.length);var n=Kt(t),o=Qt(t);if(n===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var i=r.min,a=void 0===i?r.autoMinMax?n:0:i,u=r.max,s=void 0===u?r.autoMinMax?o:1:u;if(a>=s)throw new RangeError("min option must be smaller than max option");for(var c=(s-a)/(o-n),f=0;f<t.length;f++)e[f]=(t[f]-n)*c+a;return e},te=" ".repeat(2),ee=" ".repeat(4);function re(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.maxRows,n=void 0===r?15:r,o=e.maxColumns,i=void 0===o?10:o,a=e.maxNumSize,u=void 0===a?8:a;return"".concat(t.constructor.name," {\\n").concat(te,"[\\n").concat(ee).concat(ne(t,n,i,u),"\\n").concat(te,"]\\n").concat(te,"rows: ").concat(t.rows,"\\n").concat(te,"columns: ").concat(t.columns,"\\n}")}function ne(t,e,r,n){for(var o=t.rows,i=t.columns,a=Math.min(o,e),u=Math.min(i,r),s=[],c=0;c<a;c++){for(var f=[],h=0;h<u;h++)f.push(oe(t.get(c,h),n));s.push("".concat(f.join(" ")))}return u!==i&&(s[s.length-1]+=" ... ".concat(i-r," more columns")),a!==o&&s.push("... ".concat(o-e," more rows")),s.join("\\n".concat(ee))}function oe(t,e){var r=String(t);if(r.length<=e)return r.padEnd(e," ");var n=t.toPrecision(e-2);if(n.length<=e)return n;var o=t.toExponential(e-2),i=o.indexOf("e"),a=o.slice(i);return o.slice(0,e-a.length)+a}function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ae(t,e,r){var n=r?t.rows:t.rows-1;if(e<0||e>n)throw new RangeError("Row index out of range")}function ue(t,e,r){var n=r?t.columns:t.columns-1;if(e<0||e>n)throw new RangeError("Column index out of range")}function se(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function ce(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function fe(t,e){if("object"!==ie(e))throw new TypeError("unexpected type for row indices");if(e.some((function(e){return e<0||e>=t.rows})))throw new RangeError("row indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function he(t,e){if("object"!==ie(e))throw new TypeError("unexpected type for column indices");if(e.some((function(e){return e<0||e>=t.columns})))throw new RangeError("column indices are out of range");return Array.isArray(e)||(e=Array.from(e)),e}function le(t,e,r,n,o){if(5!==arguments.length)throw new RangeError("expected 4 arguments");if(pe("startRow",e),pe("endRow",r),pe("startColumn",n),pe("endColumn",o),e>r||n>o||e<0||e>=t.rows||r<0||r>=t.rows||n<0||n>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function de(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=0;n<t;n++)r.push(e);return r}function pe(t,e){if("number"!=typeof e)throw new TypeError("".concat(t," must be a number"))}function ve(t,e,r){for(var n=t.rows,o=t.columns,i=[],a=0;a<n;a++){for(var u=0,s=0,c=0,f=0;f<o;f++)u+=c=t.get(a,f)-r[a],s+=c*c;e?i.push((s-u*u/o)/(o-1)):i.push((s-u*u/o)/o)}return i}function ge(t,e,r){for(var n=t.rows,o=t.columns,i=[],a=0;a<o;a++){for(var u=0,s=0,c=0,f=0;f<n;f++)u+=c=t.get(f,a)-r[a],s+=c*c;e?i.push((s-u*u/n)/(n-1)):i.push((s-u*u/n)/n)}return i}function ye(t,e,r){for(var n=t.rows,o=t.columns,i=n*o,a=0,u=0,s=0,c=0;c<n;c++)for(var f=0;f<o;f++)a+=s=t.get(c,f)-r,u+=s*s;return e?(u-a*a/i)/(i-1):(u-a*a/i)/i}function me(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[r])}function be(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e[n])}function we(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)-e)}function xe(t){for(var e=[],r=0;r<t.rows;r++){for(var n=0,o=0;o<t.columns;o++)n+=Math.pow(t.get(r,o),2)/(t.columns-1);e.push(Math.sqrt(n))}return e}function Me(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[r])}function ke(t){for(var e=[],r=0;r<t.columns;r++){for(var n=0,o=0;o<t.rows;o++)n+=Math.pow(t.get(o,r),2)/(t.rows-1);e.push(Math.sqrt(n))}return e}function _e(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e[n])}function Se(t){for(var e=t.size-1,r=0,n=0;n<t.columns;n++)for(var o=0;o<t.rows;o++)r+=Math.pow(t.get(o,n),2)/e;return Math.sqrt(r)}function Ee(t,e){for(var r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)t.set(r,n,t.get(r,n)/e)}function je(t,e){return(je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=Ne(t);if(e){var o=Ne(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Oe(this,r)}}function Oe(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t):e}function Ne(t){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Re(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ce(t,e,r){return e&&Pe(t.prototype,e),r&&Pe(t,r),t}var ze=function(){function t(){Re(this,t)}return Ce(t,[{key:"apply",value:function(t){if("function"!=typeof t)throw new TypeError("callback must be a function");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.call(this,e,r);return this}},{key:"to1DArray",value:function(){for(var t=[],e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.push(this.get(e,r));return t}},{key:"to2DArray",value:function(){for(var t=[],e=0;e<this.rows;e++){t.push([]);for(var r=0;r<this.columns;r++)t[e].push(this.get(e,r))}return t}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return 1===this.rows}},{key:"isColumnVector",value:function(){return 1===this.columns}},{key:"isVector",value:function(){return 1===this.rows||1===this.columns}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var t=0;t<this.rows;t++)for(var e=0;e<=t;e++)if(this.get(t,e)!==this.get(e,t))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var t=0,e=0,r=-1,n=!0,o=!1;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);t++}return n}},{key:"isReducedEchelonForm",value:function(){for(var t=0,e=0,r=-1,n=!0,o=!1;t<this.rows&&n;){for(e=0,o=!1;e<this.columns&&!1===o;)0===this.get(t,e)?e++:1===this.get(t,e)&&e>r?(o=!0,r=e):(n=!1,o=!0);for(var i=e+1;i<this.rows;i++)0!==this.get(t,i)&&(n=!1);t++}return n}},{key:"echelonForm",value:function(){for(var t=this.clone(),e=0,r=0;e<t.rows&&r<t.columns;){for(var n=e,o=e;o<t.rows;o++)t.get(o,r)>t.get(n,r)&&(n=o);if(0===t.get(n,r))r++;else{t.swapRows(e,n);for(var i=t.get(e,r),a=r;a<t.columns;a++)t.set(e,a,t.get(e,a)/i);for(var u=e+1;u<t.rows;u++){var s=t.get(u,r)/t.get(e,r);t.set(u,r,0);for(var c=r+1;c<t.columns;c++)t.set(u,c,t.get(u,c)-t.get(e,c)*s)}e++,r++}}return t}},{key:"reducedEchelonForm",value:function(){for(var t=this.echelonForm(),e=t.columns,r=t.rows,n=r-1;n>=0;)if(0===t.maxRow(n))n--;else{for(var o=0,i=!1;o<r&&!1===i;)1===t.get(n,o)?i=!0:o++;for(var a=0;a<n;a++)for(var u=t.get(a,o),s=o;s<e;s++){var c=t.get(a,s)-u*t.get(n,s);t.set(a,s,c)}n--}return t}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==Ie(t))throw new TypeError("options must be an object");var e=t.rows,r=void 0===e?1:e,n=t.columns,o=void 0===n?1:n;if(!Number.isInteger(r)||r<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(o)||o<=0)throw new TypeError("columns must be a positive integer");for(var i=new qe(this.rows*r,this.columns*o),a=0;a<r;a++)for(var u=0;u<o;u++)i.setSubMatrix(this,this.rows*a,this.columns*u);return i}},{key:"fill",value:function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,t);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(t){ae(this,t);for(var e=[],r=0;r<this.columns;r++)e.push(this.get(t,r));return e}},{key:"getRowVector",value:function(t){return qe.rowVector(this.getRow(t))}},{key:"setRow",value:function(t,e){ae(this,t),e=se(this,e);for(var r=0;r<this.columns;r++)this.set(t,r,e[r]);return this}},{key:"swapRows",value:function(t,e){ae(this,t),ae(this,e);for(var r=0;r<this.columns;r++){var n=this.get(t,r);this.set(t,r,this.get(e,r)),this.set(e,r,n)}return this}},{key:"getColumn",value:function(t){ue(this,t);for(var e=[],r=0;r<this.rows;r++)e.push(this.get(r,t));return e}},{key:"getColumnVector",value:function(t){return qe.columnVector(this.getColumn(t))}},{key:"setColumn",value:function(t,e){ue(this,t),e=ce(this,e);for(var r=0;r<this.rows;r++)this.set(r,t,e[r]);return this}},{key:"swapColumns",value:function(t,e){ue(this,t),ue(this,e);for(var r=0;r<this.rows;r++){var n=this.get(r,t);this.set(r,t,this.get(r,e)),this.set(r,e,n)}return this}},{key:"addRowVector",value:function(t){t=se(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[r]);return this}},{key:"subRowVector",value:function(t){t=se(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[r]);return this}},{key:"mulRowVector",value:function(t){t=se(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[r]);return this}},{key:"divRowVector",value:function(t){t=se(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[r]);return this}},{key:"addColumnVector",value:function(t){t=ce(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t[e]);return this}},{key:"subColumnVector",value:function(t){t=ce(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t[e]);return this}},{key:"mulColumnVector",value:function(t){t=ce(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t[e]);return this}},{key:"divColumnVector",value:function(t){t=ce(this,t);for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t[e]);return this}},{key:"mulRow",value:function(t,e){ae(this,t);for(var r=0;r<this.columns;r++)this.set(t,r,this.get(t,r)*e);return this}},{key:"mulColumn",value:function(t,e){ue(this,t);for(var r=0;r<this.rows;r++)this.set(r,t,this.get(r,t)*e);return this}},{key:"max",value:function(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)>t&&(t=this.get(e,r));return t}},{key:"maxIndex",value:function(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)>t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}},{key:"min",value:function(){for(var t=this.get(0,0),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.get(e,r)<t&&(t=this.get(e,r));return t}},{key:"minIndex",value:function(){for(var t=this.get(0,0),e=[0,0],r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)this.get(r,n)<t&&(t=this.get(r,n),e[0]=r,e[1]=n);return e}},{key:"maxRow",value:function(t){ae(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)>e&&(e=this.get(t,r));return e}},{key:"maxRowIndex",value:function(t){ae(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)>e&&(e=this.get(t,n),r[1]=n);return r}},{key:"minRow",value:function(t){ae(this,t);for(var e=this.get(t,0),r=1;r<this.columns;r++)this.get(t,r)<e&&(e=this.get(t,r));return e}},{key:"minRowIndex",value:function(t){ae(this,t);for(var e=this.get(t,0),r=[t,0],n=1;n<this.columns;n++)this.get(t,n)<e&&(e=this.get(t,n),r[1]=n);return r}},{key:"maxColumn",value:function(t){ue(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)>e&&(e=this.get(r,t));return e}},{key:"maxColumnIndex",value:function(t){ue(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)>e&&(e=this.get(n,t),r[0]=n);return r}},{key:"minColumn",value:function(t){ue(this,t);for(var e=this.get(0,t),r=1;r<this.rows;r++)this.get(r,t)<e&&(e=this.get(r,t));return e}},{key:"minColumnIndex",value:function(t){ue(this,t);for(var e=this.get(0,t),r=[0,t],n=1;n<this.rows;n++)this.get(n,t)<e&&(e=this.get(n,t),r[0]=n);return r}},{key:"diag",value:function(){for(var t=Math.min(this.rows,this.columns),e=[],r=0;r<t;r++)e.push(this.get(r,r));return e}},{key:"norm",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"frobenius",e=0;if("max"===t)return this.max();if("frobenius"===t){for(var r=0;r<this.rows;r++)for(var n=0;n<this.columns;n++)e+=this.get(r,n)*this.get(r,n);return Math.sqrt(e)}throw new RangeError("unknown norm type: ".concat(t))}},{key:"cumulativeSum",value:function(){for(var t=0,e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t+=this.get(e,r),this.set(e,r,t);return this}},{key:"dot",value:function(e){t.isMatrix(e)&&(e=e.to1DArray());var r=this.to1DArray();if(r.length!==e.length)throw new RangeError("vectors do not have the same size");for(var n=0,o=0;o<r.length;o++)n+=r[o]*e[o];return n}},{key:"mmul",value:function(t){t=qe.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.columns,o=new qe(e,n),i=new Float64Array(r),a=0;a<n;a++){for(var u=0;u<r;u++)i[u]=t.get(u,a);for(var s=0;s<e;s++){for(var c=0,f=0;f<r;f++)c+=this.get(s,f)*i[f];o.set(s,a,c)}}return o}},{key:"strassen2x2",value:function(t){t=qe.checkMatrix(t);var e=new qe(2,2),r=this.get(0,0),n=t.get(0,0),o=this.get(0,1),i=t.get(0,1),a=this.get(1,0),u=t.get(1,0),s=this.get(1,1),c=t.get(1,1),f=(r+s)*(n+c),h=(a+s)*n,l=r*(i-c),d=s*(u-n),p=(r+o)*c,v=f+d-p+(o-s)*(u+c),g=l+p,y=h+d,m=f-h+l+(a-r)*(n+i);return e.set(0,0,v),e.set(0,1,g),e.set(1,0,y),e.set(1,1,m),e}},{key:"strassen3x3",value:function(t){t=qe.checkMatrix(t);var e=new qe(3,3),r=this.get(0,0),n=this.get(0,1),o=this.get(0,2),i=this.get(1,0),a=this.get(1,1),u=this.get(1,2),s=this.get(2,0),c=this.get(2,1),f=this.get(2,2),h=t.get(0,0),l=t.get(0,1),d=t.get(0,2),p=t.get(1,0),v=t.get(1,1),g=t.get(1,2),y=t.get(2,0),m=t.get(2,1),b=t.get(2,2),w=(r-i)*(-l+v),x=(-r+i+a)*(h-l+v),M=(i+a)*(-h+l),k=r*h,_=(-r+s+c)*(h-d+g),S=(-r+s)*(d-g),E=(s+c)*(-h+d),j=(-o+c+f)*(v+y-m),A=(o-f)*(v-m),O=o*y,N=(c+f)*(-y+m),I=(-o+a+u)*(g+y-b),R=(o-u)*(g-b),P=(a+u)*(-y+b),C=k+O+n*p,z=(r+n+o-i-a-c-f)*v+x+M+k+j+O+N,F=k+_+E+(r+n+o-a-u-s-c)*g+O+I+P,T=w+a*(-h+l+p-v-g-y+b)+x+k+O+I+R,D=w+x+M+k+u*m,q=O+I+R+P+i*d,L=k+_+S+c*(-h+d+p-v-g-y+m)+j+A+O,B=j+A+O+N+s*l,V=k+_+S+E+f*b;return e.set(0,0,C),e.set(0,1,z),e.set(0,2,F),e.set(1,0,T),e.set(1,1,D),e.set(1,2,q),e.set(2,0,L),e.set(2,1,B),e.set(2,2,V),e}},{key:"mmulStrassen",value:function(e){e=qe.checkMatrix(e);var r=this.clone(),n=r.rows,o=r.columns,i=e.rows,a=e.columns;function u(e,r,n){var o=e.rows,i=e.columns;if(o===r&&i===n)return e;var a=t.zeros(r,n);return a=a.setSubMatrix(e,0,0)}o!==i&&console.warn("Multiplying ".concat(n," x ").concat(o," and ").concat(i," x ").concat(a," matrix: dimensions do not match."));var s=Math.max(n,i),c=Math.max(o,a);return function e(r,n,o,i){if(o<=512||i<=512)return r.mmul(n);o%2==1&&i%2==1?(r=u(r,o+1,i+1),n=u(n,o+1,i+1)):o%2==1?(r=u(r,o+1,i),n=u(n,o+1,i)):i%2==1&&(r=u(r,o,i+1),n=u(n,o,i+1));var a=parseInt(r.rows/2,10),s=parseInt(r.columns/2,10),c=r.subMatrix(0,a-1,0,s-1),f=n.subMatrix(0,a-1,0,s-1),h=r.subMatrix(0,a-1,s,r.columns-1),l=n.subMatrix(0,a-1,s,n.columns-1),d=r.subMatrix(a,r.rows-1,0,s-1),p=n.subMatrix(a,n.rows-1,0,s-1),v=r.subMatrix(a,r.rows-1,s,r.columns-1),g=n.subMatrix(a,n.rows-1,s,n.columns-1),y=e(t.add(c,v),t.add(f,g),a,s),m=e(t.add(d,v),f,a,s),b=e(c,t.sub(l,g),a,s),w=e(v,t.sub(p,f),a,s),x=e(t.add(c,h),g,a,s),M=e(t.sub(d,c),t.add(f,l),a,s),k=e(t.sub(h,v),t.add(p,g),a,s),_=t.add(y,w);_.sub(x),_.add(k);var S=t.add(b,x),E=t.add(m,w),j=t.sub(y,m);j.add(b),j.add(M);var A=t.zeros(2*_.rows,2*_.columns);return(A=(A=(A=(A=A.setSubMatrix(_,0,0)).setSubMatrix(S,_.rows,0)).setSubMatrix(E,0,_.columns)).setSubMatrix(j,_.rows,_.columns)).subMatrix(0,o-1,0,i-1)}(r=u(r,s,c),e=u(e,s,c),s,c)}},{key:"scaleRows",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==Ie(t))throw new TypeError("options must be an object");var e=t.min,r=void 0===e?0:e,n=t.max,o=void 0===n?1:n;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(r>=o)throw new RangeError("min must be smaller than max");for(var i=new qe(this.rows,this.columns),a=0;a<this.rows;a++){var u=this.getRow(a);Zt(u,{min:r,max:o,output:u}),i.setRow(a,u)}return i}},{key:"scaleColumns",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==Ie(t))throw new TypeError("options must be an object");var e=t.min,r=void 0===e?0:e,n=t.max,o=void 0===n?1:n;if(!Number.isFinite(r))throw new TypeError("min must be a number");if(!Number.isFinite(o))throw new TypeError("max must be a number");if(r>=o)throw new RangeError("min must be smaller than max");for(var i=new qe(this.rows,this.columns),a=0;a<this.columns;a++){var u=this.getColumn(a);Zt(u,{min:r,max:o,output:u}),i.setColumn(a,u)}return i}},{key:"flipRows",value:function(){for(var t=Math.ceil(this.columns/2),e=0;e<this.rows;e++)for(var r=0;r<t;r++){var n=this.get(e,r),o=this.get(e,this.columns-1-r);this.set(e,r,o),this.set(e,this.columns-1-r,n)}return this}},{key:"flipColumns",value:function(){for(var t=Math.ceil(this.rows/2),e=0;e<this.columns;e++)for(var r=0;r<t;r++){var n=this.get(r,e),o=this.get(this.rows-1-r,e);this.set(r,e,o),this.set(this.rows-1-r,e,n)}return this}},{key:"kroneckerProduct",value:function(t){t=qe.checkMatrix(t);for(var e=this.rows,r=this.columns,n=t.rows,o=t.columns,i=new qe(e*n,r*o),a=0;a<e;a++)for(var u=0;u<r;u++)for(var s=0;s<n;s++)for(var c=0;c<o;c++)i.set(n*a+s,o*u+c,this.get(a,u)*t.get(s,c));return i}},{key:"transpose",value:function(){for(var t=new qe(this.columns,this.rows),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(r,e,this.get(e,r));return t}},{key:"sortRows",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,e=0;e<this.rows;e++)this.setRow(e,this.getRow(e).sort(t));return this}},{key:"sortColumns",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,e=0;e<this.columns;e++)this.setColumn(e,this.getColumn(e).sort(t));return this}},{key:"subMatrix",value:function(t,e,r,n){le(this,t,e,r,n);for(var o=new qe(e-t+1,n-r+1),i=t;i<=e;i++)for(var a=r;a<=n;a++)o.set(i-t,a-r,this.get(i,a));return o}},{key:"subMatrixRow",value:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.columns-1),e>r||e<0||e>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");for(var n=new qe(t.length,r-e+1),o=0;o<t.length;o++)for(var i=e;i<=r;i++){if(t[o]<0||t[o]>=this.rows)throw new RangeError("Row index out of range: ".concat(t[o]));n.set(o,i-e,this.get(t[o],i))}return n}},{key:"subMatrixColumn",value:function(t,e,r){if(void 0===e&&(e=0),void 0===r&&(r=this.rows-1),e>r||e<0||e>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");for(var n=new qe(r-e+1,t.length),o=0;o<t.length;o++)for(var i=e;i<=r;i++){if(t[o]<0||t[o]>=this.columns)throw new RangeError("Column index out of range: ".concat(t[o]));n.set(i-e,o,this.get(i,t[o]))}return n}},{key:"setSubMatrix",value:function(t,e,r){le(this,e,e+(t=qe.checkMatrix(t)).rows-1,r,r+t.columns-1);for(var n=0;n<t.rows;n++)for(var o=0;o<t.columns;o++)this.set(e+n,r+o,t.get(n,o));return this}},{key:"selection",value:function(t,e){for(var r=function(t,e,r){return{row:fe(t,e),column:he(t,r)}}(this,t,e),n=new qe(t.length,e.length),o=0;o<r.row.length;o++)for(var i=r.row[o],a=0;a<r.column.length;a++){var u=r.column[a];n.set(o,a,this.get(i,u))}return n}},{key:"trace",value:function(){for(var t=Math.min(this.rows,this.columns),e=0,r=0;r<t;r++)e+=this.get(r,r);return e}},{key:"clone",value:function(){for(var t=new qe(this.rows,this.columns),e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)t.set(e,r,this.get(e,r));return t}},{key:"sum",value:function(t){switch(t){case"row":return function(t){for(var e=de(t.rows),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[r]+=t.get(r,n);return e}(this);case"column":return function(t){for(var e=de(t.columns),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[n]+=t.get(r,n);return e}(this);case void 0:return function(t){for(var e=0,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e+=t.get(r,n);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"product",value:function(t){switch(t){case"row":return function(t){for(var e=de(t.rows,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[r]*=t.get(r,n);return e}(this);case"column":return function(t){for(var e=de(t.columns,1),r=0;r<t.rows;++r)for(var n=0;n<t.columns;++n)e[n]*=t.get(r,n);return e}(this);case void 0:return function(t){for(var e=1,r=0;r<t.rows;r++)for(var n=0;n<t.columns;n++)e*=t.get(r,n);return e}(this);default:throw new Error("invalid option: ".concat(t))}}},{key:"mean",value:function(t){var e=this.sum(t);switch(t){case"row":for(var r=0;r<this.rows;r++)e[r]/=this.columns;return e;case"column":for(var n=0;n<this.columns;n++)e[n]/=this.rows;return e;case void 0:return e/this.size;default:throw new Error("invalid option: ".concat(t))}}},{key:"variance",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===Ie(t)&&(e=t,t=void 0),"object"!==Ie(e))throw new TypeError("options must be an object");var r=e,n=r.unbiased,o=void 0===n||n,i=r.mean,a=void 0===i?this.mean(t):i;if("boolean"!=typeof o)throw new TypeError("unbiased must be a boolean");switch(t){case"row":if(!Array.isArray(a))throw new TypeError("mean must be an array");return ve(this,o,a);case"column":if(!Array.isArray(a))throw new TypeError("mean must be an array");return ge(this,o,a);case void 0:if("number"!=typeof a)throw new TypeError("mean must be a number");return ye(this,o,a);default:throw new Error("invalid option: ".concat(t))}}},{key:"standardDeviation",value:function(t,e){"object"===Ie(t)&&(e=t,t=void 0);var r=this.variance(t,e);if(void 0===t)return Math.sqrt(r);for(var n=0;n<r.length;n++)r[n]=Math.sqrt(r[n]);return r}},{key:"center",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===Ie(t)&&(e=t,t=void 0),"object"!==Ie(e))throw new TypeError("options must be an object");var r=e,n=r.center,o=void 0===n?this.mean(t):n;switch(t){case"row":if(!Array.isArray(o))throw new TypeError("center must be an array");return me(this,o),this;case"column":if(!Array.isArray(o))throw new TypeError("center must be an array");return be(this,o),this;case void 0:if("number"!=typeof o)throw new TypeError("center must be a number");return we(this,o),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"scale",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("object"===Ie(t)&&(e=t,t=void 0),"object"!==Ie(e))throw new TypeError("options must be an object");var r=e.scale;switch(t){case"row":if(void 0===r)r=xe(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return Me(this,r),this;case"column":if(void 0===r)r=ke(this);else if(!Array.isArray(r))throw new TypeError("scale must be an array");return _e(this,r),this;case void 0:if(void 0===r)r=Se(this);else if("number"!=typeof r)throw new TypeError("scale must be a number");return Ee(this,r),this;default:throw new Error("invalid option: ".concat(t))}}},{key:"toString",value:function(t){return re(this,t)}},{key:"size",get:function(){return this.rows*this.columns}}],[{key:"from1DArray",value:function(t,e,r){if(t*e!==r.length)throw new RangeError("data length does not match given dimensions");for(var n=new qe(t,e),o=0;o<t;o++)for(var i=0;i<e;i++)n.set(o,i,r[o*e+i]);return n}},{key:"rowVector",value:function(t){for(var e=new qe(1,t.length),r=0;r<t.length;r++)e.set(0,r,t[r]);return e}},{key:"columnVector",value:function(t){for(var e=new qe(t.length,1),r=0;r<t.length;r++)e.set(r,0,t[r]);return e}},{key:"zeros",value:function(t,e){return new qe(t,e)}},{key:"ones",value:function(t,e){return new qe(t,e).fill(1)}},{key:"rand",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==Ie(r))throw new TypeError("options must be an object");for(var n=r.random,o=void 0===n?Math.random:n,i=new qe(t,e),a=0;a<t;a++)for(var u=0;u<e;u++)i.set(a,u,o());return i}},{key:"randInt",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==Ie(r))throw new TypeError("options must be an object");var n=r.min,o=void 0===n?0:n,i=r.max,a=void 0===i?1e3:i,u=r.random,s=void 0===u?Math.random:u;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(a))throw new TypeError("max must be an integer");if(o>=a)throw new RangeError("min must be smaller than max");for(var c=a-o,f=new qe(t,e),h=0;h<t;h++)for(var l=0;l<e;l++){var d=o+Math.round(s()*c);f.set(h,l,d)}return f}},{key:"eye",value:function(t,e,r){void 0===e&&(e=t),void 0===r&&(r=1);for(var n=Math.min(t,e),o=this.zeros(t,e),i=0;i<n;i++)o.set(i,i,r);return o}},{key:"diag",value:function(t,e,r){var n=t.length;void 0===e&&(e=n),void 0===r&&(r=e);for(var o=Math.min(n,e,r),i=this.zeros(e,r),a=0;a<o;a++)i.set(a,a,t[a]);return i}},{key:"min",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,o=new qe(r,n),i=0;i<r;i++)for(var a=0;a<n;a++)o.set(i,a,Math.min(t.get(i,a),e.get(i,a)));return o}},{key:"max",value:function(t,e){t=this.checkMatrix(t),e=this.checkMatrix(e);for(var r=t.rows,n=t.columns,o=new this(r,n),i=0;i<r;i++)for(var a=0;a<n;a++)o.set(i,a,Math.max(t.get(i,a),e.get(i,a)));return o}},{key:"checkMatrix",value:function(e){return t.isMatrix(e)?e:new qe(e)}},{key:"isMatrix",value:function(t){return null!=t&&"Matrix"===t.klass}}]),t}();function Fe(t,e){return t-e}ze.prototype.klass="Matrix","undefined"!=typeof Symbol&&(ze.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return re(this)}),ze.random=ze.rand,ze.randomInt=ze.randInt,ze.diagonal=ze.diag,ze.prototype.diagonal=ze.prototype.diag,ze.identity=ze.eye,ze.prototype.negate=ze.prototype.neg,ze.prototype.tensorProduct=ze.prototype.kroneckerProduct;var Te,De,qe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&je(t,e)}(r,t);var e=Ae(r);function r(t,n){var o;if(Re(this,r),o=e.call(this),r.isMatrix(t))return Oe(o,t.clone());if(Number.isInteger(t)&&t>0){if(o.data=[],!(Number.isInteger(n)&&n>0))throw new TypeError("nColumns must be a positive integer");for(var i=0;i<t;i++)o.data.push(new Float64Array(n))}else{if(!Array.isArray(t))throw new TypeError("First argument must be a positive number or an array");var a=t;if(t=a.length,"number"!=typeof(n=a[0].length)||0===n)throw new TypeError("Data must be a 2D array with at least one element");o.data=[];for(var u=0;u<t;u++){if(a[u].length!==n)throw new RangeError("Inconsistent array dimensions");o.data.push(Float64Array.from(a[u]))}}return o.rows=t,o.columns=n,o}return Ce(r,[{key:"set",value:function(t,e,r){return this.data[t][e]=r,this}},{key:"get",value:function(t,e){return this.data[t][e]}},{key:"removeRow",value:function(t){if(ae(this,t),1===this.rows)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(t,1),this.rows-=1,this}},{key:"addRow",value:function(t,e){return void 0===e&&(e=t,t=this.rows),ae(this,t,!0),e=Float64Array.from(se(this,e)),this.data.splice(t,0,e),this.rows+=1,this}},{key:"removeColumn",value:function(t){if(ue(this,t),1===this.columns)throw new RangeError("A matrix cannot have less than one column");for(var e=0;e<this.rows;e++){for(var r=new Float64Array(this.columns-1),n=0;n<t;n++)r[n]=this.data[e][n];for(var o=t+1;o<this.columns;o++)r[o-1]=this.data[e][o];this.data[e]=r}return this.columns-=1,this}},{key:"addColumn",value:function(t,e){void 0===e&&(e=t,t=this.columns),ue(this,t,!0),e=ce(this,e);for(var r=0;r<this.rows;r++){for(var n=new Float64Array(this.columns+1),o=0;o<t;o++)n[o]=this.data[r][o];for(n[o++]=e[r];o<this.columns+1;o++)n[o]=this.data[r][o-1];this.data[r]=n}return this.columns+=1,this}}]),r}(ze);function Le(t){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Be(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ve(t,e){return(Ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ue(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=He(t);if(e){var o=He(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ye(this,r)}}function Ye(t,e){return!e||"object"!==Le(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called");return t}(t):e}function He(t){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}De=qe,(Te=ze).prototype.add=function(t){return"number"==typeof t?this.addS(t):this.addM(t)},Te.prototype.addS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t);return this},Te.prototype.addM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)+t.get(e,r));return this},Te.add=function(t,e){return new De(t).add(e)},Te.prototype.sub=function(t){return"number"==typeof t?this.subS(t):this.subM(t)},Te.prototype.subS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t);return this},Te.prototype.subM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)-t.get(e,r));return this},Te.sub=function(t,e){return new De(t).sub(e)},Te.prototype.subtract=Te.prototype.sub,Te.prototype.subtractS=Te.prototype.subS,Te.prototype.subtractM=Te.prototype.subM,Te.subtract=Te.sub,Te.prototype.mul=function(t){return"number"==typeof t?this.mulS(t):this.mulM(t)},Te.prototype.mulS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t);return this},Te.prototype.mulM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*t.get(e,r));return this},Te.mul=function(t,e){return new De(t).mul(e)},Te.prototype.multiply=Te.prototype.mul,Te.prototype.multiplyS=Te.prototype.mulS,Te.prototype.multiplyM=Te.prototype.mulM,Te.multiply=Te.mul,Te.prototype.div=function(t){return"number"==typeof t?this.divS(t):this.divM(t)},Te.prototype.divS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t);return this},Te.prototype.divM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)/t.get(e,r));return this},Te.div=function(t,e){return new De(t).div(e)},Te.prototype.divide=Te.prototype.div,Te.prototype.divideS=Te.prototype.divS,Te.prototype.divideM=Te.prototype.divM,Te.divide=Te.div,Te.prototype.mod=function(t){return"number"==typeof t?this.modS(t):this.modM(t)},Te.prototype.modS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t);return this},Te.prototype.modM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)%t.get(e,r));return this},Te.mod=function(t,e){return new De(t).mod(e)},Te.prototype.modulus=Te.prototype.mod,Te.prototype.modulusS=Te.prototype.modS,Te.prototype.modulusM=Te.prototype.modM,Te.modulus=Te.mod,Te.prototype.and=function(t){return"number"==typeof t?this.andS(t):this.andM(t)},Te.prototype.andS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t);return this},Te.prototype.andM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)&t.get(e,r));return this},Te.and=function(t,e){return new De(t).and(e)},Te.prototype.or=function(t){return"number"==typeof t?this.orS(t):this.orM(t)},Te.prototype.orS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t);return this},Te.prototype.orM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)|t.get(e,r));return this},Te.or=function(t,e){return new De(t).or(e)},Te.prototype.xor=function(t){return"number"==typeof t?this.xorS(t):this.xorM(t)},Te.prototype.xorS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t);return this},Te.prototype.xorM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)^t.get(e,r));return this},Te.xor=function(t,e){return new De(t).xor(e)},Te.prototype.leftShift=function(t){return"number"==typeof t?this.leftShiftS(t):this.leftShiftM(t)},Te.prototype.leftShiftS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t);return this},Te.prototype.leftShiftM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)<<t.get(e,r));return this},Te.leftShift=function(t,e){return new De(t).leftShift(e)},Te.prototype.signPropagatingRightShift=function(t){return"number"==typeof t?this.signPropagatingRightShiftS(t):this.signPropagatingRightShiftM(t)},Te.prototype.signPropagatingRightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t);return this},Te.prototype.signPropagatingRightShiftM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>t.get(e,r));return this},Te.signPropagatingRightShift=function(t,e){return new De(t).signPropagatingRightShift(e)},Te.prototype.rightShift=function(t){return"number"==typeof t?this.rightShiftS(t):this.rightShiftM(t)},Te.prototype.rightShiftS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t);return this},Te.prototype.rightShiftM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)>>>t.get(e,r));return this},Te.rightShift=function(t,e){return new De(t).rightShift(e)},Te.prototype.zeroFillRightShift=Te.prototype.rightShift,Te.prototype.zeroFillRightShiftS=Te.prototype.rightShiftS,Te.prototype.zeroFillRightShiftM=Te.prototype.rightShiftM,Te.zeroFillRightShift=Te.rightShift,Te.prototype.not=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,~this.get(t,e));return this},Te.not=function(t){return new De(t).not()},Te.prototype.abs=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.abs(this.get(t,e)));return this},Te.abs=function(t){return new De(t).abs()},Te.prototype.acos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acos(this.get(t,e)));return this},Te.acos=function(t){return new De(t).acos()},Te.prototype.acosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.acosh(this.get(t,e)));return this},Te.acosh=function(t){return new De(t).acosh()},Te.prototype.asin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asin(this.get(t,e)));return this},Te.asin=function(t){return new De(t).asin()},Te.prototype.asinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.asinh(this.get(t,e)));return this},Te.asinh=function(t){return new De(t).asinh()},Te.prototype.atan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atan(this.get(t,e)));return this},Te.atan=function(t){return new De(t).atan()},Te.prototype.atanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.atanh(this.get(t,e)));return this},Te.atanh=function(t){return new De(t).atanh()},Te.prototype.cbrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cbrt(this.get(t,e)));return this},Te.cbrt=function(t){return new De(t).cbrt()},Te.prototype.ceil=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.ceil(this.get(t,e)));return this},Te.ceil=function(t){return new De(t).ceil()},Te.prototype.clz32=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.clz32(this.get(t,e)));return this},Te.clz32=function(t){return new De(t).clz32()},Te.prototype.cos=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cos(this.get(t,e)));return this},Te.cos=function(t){return new De(t).cos()},Te.prototype.cosh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.cosh(this.get(t,e)));return this},Te.cosh=function(t){return new De(t).cosh()},Te.prototype.exp=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.exp(this.get(t,e)));return this},Te.exp=function(t){return new De(t).exp()},Te.prototype.expm1=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.expm1(this.get(t,e)));return this},Te.expm1=function(t){return new De(t).expm1()},Te.prototype.floor=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.floor(this.get(t,e)));return this},Te.floor=function(t){return new De(t).floor()},Te.prototype.fround=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.fround(this.get(t,e)));return this},Te.fround=function(t){return new De(t).fround()},Te.prototype.log=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log(this.get(t,e)));return this},Te.log=function(t){return new De(t).log()},Te.prototype.log1p=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log1p(this.get(t,e)));return this},Te.log1p=function(t){return new De(t).log1p()},Te.prototype.log10=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log10(this.get(t,e)));return this},Te.log10=function(t){return new De(t).log10()},Te.prototype.log2=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.log2(this.get(t,e)));return this},Te.log2=function(t){return new De(t).log2()},Te.prototype.round=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.round(this.get(t,e)));return this},Te.round=function(t){return new De(t).round()},Te.prototype.sign=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sign(this.get(t,e)));return this},Te.sign=function(t){return new De(t).sign()},Te.prototype.sin=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sin(this.get(t,e)));return this},Te.sin=function(t){return new De(t).sin()},Te.prototype.sinh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sinh(this.get(t,e)));return this},Te.sinh=function(t){return new De(t).sinh()},Te.prototype.sqrt=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.sqrt(this.get(t,e)));return this},Te.sqrt=function(t){return new De(t).sqrt()},Te.prototype.tan=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tan(this.get(t,e)));return this},Te.tan=function(t){return new De(t).tan()},Te.prototype.tanh=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.tanh(this.get(t,e)));return this},Te.tanh=function(t){return new De(t).tanh()},Te.prototype.trunc=function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this.set(t,e,Math.trunc(this.get(t,e)));return this},Te.trunc=function(t){return new De(t).trunc()},Te.pow=function(t,e){return new De(t).pow(e)},Te.prototype.pow=function(t){return"number"==typeof t?this.powS(t):this.powM(t)},Te.prototype.powS=function(t){for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t));return this},Te.prototype.powM=function(t){if(t=De.checkMatrix(t),this.rows!==t.rows||this.columns!==t.columns)throw new RangeError("Matrices dimensions must be equal");for(var e=0;e<this.rows;e++)for(var r=0;r<this.columns;r++)this.set(e,r,Math.pow(this.get(e,r),t.get(e,r)));return this};var We=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ve(t,e)}(i,t);var e,r,n,o=Ue(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).data=t,e.rows=t.length,e.columns=t[0].length,e}return e=i,(r=[{key:"set",value:function(t,e,r){return this.data[t][e]=r,this}},{key:"get",value:function(t,e){return this.data[t][e]}}])&&Be(e.prototype,r),n&&Be(e,n),i}(ze);function Ge(t,e){var r=0;return Math.abs(t)>Math.abs(e)?(r=e/t,Math.abs(t)*Math.sqrt(1+r*r)):0!==e?(r=t/e,Math.abs(e)*Math.sqrt(1+r*r)):0}function $e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Je=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$e(this,t);var n,o=(e=We.checkMatrix(e)).rows,i=e.columns,a=r.computeLeftSingularVectors,u=void 0===a||a,s=r.computeRightSingularVectors,c=void 0===s||s,f=r.autoTranspose,h=void 0!==f&&f,l=Boolean(u),d=Boolean(c),p=!1;if(o<i)if(h){o=(n=e.transpose()).rows,i=n.columns,p=!0;var v=l;l=d,d=v}else n=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else n=e.clone();for(var g=Math.min(o,i),y=Math.min(o+1,i),m=new Float64Array(y),b=new qe(o,g),w=new qe(i,i),x=new Float64Array(i),M=new Float64Array(o),k=new Float64Array(y),_=0;_<y;_++)k[_]=_;for(var S=Math.min(o-1,i),E=Math.max(0,Math.min(i-2,o)),j=Math.max(S,E),A=0;A<j;A++){if(A<S){m[A]=0;for(var O=A;O<o;O++)m[A]=Ge(m[A],n.get(O,A));if(0!==m[A]){n.get(A,A)<0&&(m[A]=-m[A]);for(var N=A;N<o;N++)n.set(N,A,n.get(N,A)/m[A]);n.set(A,A,n.get(A,A)+1)}m[A]=-m[A]}for(var I=A+1;I<i;I++){if(A<S&&0!==m[A]){for(var R=0,P=A;P<o;P++)R+=n.get(P,A)*n.get(P,I);R=-R/n.get(A,A);for(var C=A;C<o;C++)n.set(C,I,n.get(C,I)+R*n.get(C,A))}x[I]=n.get(A,I)}if(l&&A<S)for(var z=A;z<o;z++)b.set(z,A,n.get(z,A));if(A<E){x[A]=0;for(var F=A+1;F<i;F++)x[A]=Ge(x[A],x[F]);if(0!==x[A]){x[A+1]<0&&(x[A]=0-x[A]);for(var T=A+1;T<i;T++)x[T]/=x[A];x[A+1]+=1}if(x[A]=-x[A],A+1<o&&0!==x[A]){for(var D=A+1;D<o;D++)M[D]=0;for(var q=A+1;q<o;q++)for(var L=A+1;L<i;L++)M[q]+=x[L]*n.get(q,L);for(var B=A+1;B<i;B++)for(var V=-x[B]/x[A+1],U=A+1;U<o;U++)n.set(U,B,n.get(U,B)+V*M[U])}if(d)for(var Y=A+1;Y<i;Y++)w.set(Y,A,x[Y])}}var H=Math.min(i,o+1);if(S<i&&(m[S]=n.get(S,S)),o<H&&(m[H-1]=0),E+1<H&&(x[E]=n.get(E,H-1)),x[H-1]=0,l){for(var W=S;W<g;W++){for(var G=0;G<o;G++)b.set(G,W,0);b.set(W,W,1)}for(var $=S-1;$>=0;$--)if(0!==m[$]){for(var X=$+1;X<g;X++){for(var J=0,Q=$;Q<o;Q++)J+=b.get(Q,$)*b.get(Q,X);J=-J/b.get($,$);for(var K=$;K<o;K++)b.set(K,X,b.get(K,X)+J*b.get(K,$))}for(var Z=$;Z<o;Z++)b.set(Z,$,-b.get(Z,$));b.set($,$,1+b.get($,$));for(var tt=0;tt<$-1;tt++)b.set(tt,$,0)}else{for(var et=0;et<o;et++)b.set(et,$,0);b.set($,$,1)}}if(d)for(var rt=i-1;rt>=0;rt--){if(rt<E&&0!==x[rt])for(var nt=rt+1;nt<i;nt++){for(var ot=0,it=rt+1;it<i;it++)ot+=w.get(it,rt)*w.get(it,nt);ot=-ot/w.get(rt+1,rt);for(var at=rt+1;at<i;at++)w.set(at,nt,w.get(at,nt)+ot*w.get(at,rt))}for(var ut=0;ut<i;ut++)w.set(ut,rt,0);w.set(rt,rt,1)}for(var st=H-1,ct=Number.EPSILON;H>0;){var ft=void 0,ht=void 0;for(ft=H-2;ft>=-1&&-1!==ft;ft--){var lt=Number.MIN_VALUE+ct*Math.abs(m[ft]+Math.abs(m[ft+1]));if(Math.abs(x[ft])<=lt||Number.isNaN(x[ft])){x[ft]=0;break}}if(ft===H-2)ht=4;else{var dt=void 0;for(dt=H-1;dt>=ft&&dt!==ft;dt--){var pt=(dt!==H?Math.abs(x[dt]):0)+(dt!==ft+1?Math.abs(x[dt-1]):0);if(Math.abs(m[dt])<=ct*pt){m[dt]=0;break}}dt===ft?ht=3:dt===H-1?ht=1:(ht=2,ft=dt)}switch(ft++,ht){case 1:var vt=x[H-2];x[H-2]=0;for(var gt=H-2;gt>=ft;gt--){var yt=Ge(m[gt],vt),mt=m[gt]/yt,bt=vt/yt;if(m[gt]=yt,gt!==ft&&(vt=-bt*x[gt-1],x[gt-1]=mt*x[gt-1]),d)for(var wt=0;wt<i;wt++)yt=mt*w.get(wt,gt)+bt*w.get(wt,H-1),w.set(wt,H-1,-bt*w.get(wt,gt)+mt*w.get(wt,H-1)),w.set(wt,gt,yt)}break;case 2:var xt=x[ft-1];x[ft-1]=0;for(var Mt=ft;Mt<H;Mt++){var kt=Ge(m[Mt],xt),_t=m[Mt]/kt,St=xt/kt;if(m[Mt]=kt,xt=-St*x[Mt],x[Mt]=_t*x[Mt],l)for(var Et=0;Et<o;Et++)kt=_t*b.get(Et,Mt)+St*b.get(Et,ft-1),b.set(Et,ft-1,-St*b.get(Et,Mt)+_t*b.get(Et,ft-1)),b.set(Et,Mt,kt)}break;case 3:var jt=Math.max(Math.abs(m[H-1]),Math.abs(m[H-2]),Math.abs(x[H-2]),Math.abs(m[ft]),Math.abs(x[ft])),At=m[H-1]/jt,Ot=m[H-2]/jt,Nt=x[H-2]/jt,It=m[ft]/jt,Rt=x[ft]/jt,Pt=((Ot+At)*(Ot-At)+Nt*Nt)/2,Ct=At*Nt*(At*Nt),zt=0;0===Pt&&0===Ct||(zt=Ct/(Pt+(zt=Pt<0?0-Math.sqrt(Pt*Pt+Ct):Math.sqrt(Pt*Pt+Ct))));for(var Ft=(It+At)*(It-At)+zt,Tt=It*Rt,Dt=ft;Dt<H-1;Dt++){var qt=Ge(Ft,Tt);0===qt&&(qt=Number.MIN_VALUE);var Lt=Ft/qt,Bt=Tt/qt;if(Dt!==ft&&(x[Dt-1]=qt),Ft=Lt*m[Dt]+Bt*x[Dt],x[Dt]=Lt*x[Dt]-Bt*m[Dt],Tt=Bt*m[Dt+1],m[Dt+1]=Lt*m[Dt+1],d)for(var Vt=0;Vt<i;Vt++)qt=Lt*w.get(Vt,Dt)+Bt*w.get(Vt,Dt+1),w.set(Vt,Dt+1,-Bt*w.get(Vt,Dt)+Lt*w.get(Vt,Dt+1)),w.set(Vt,Dt,qt);if(0===(qt=Ge(Ft,Tt))&&(qt=Number.MIN_VALUE),Lt=Ft/qt,Bt=Tt/qt,m[Dt]=qt,Ft=Lt*x[Dt]+Bt*m[Dt+1],m[Dt+1]=-Bt*x[Dt]+Lt*m[Dt+1],Tt=Bt*x[Dt+1],x[Dt+1]=Lt*x[Dt+1],l&&Dt<o-1)for(var Ut=0;Ut<o;Ut++)qt=Lt*b.get(Ut,Dt)+Bt*b.get(Ut,Dt+1),b.set(Ut,Dt+1,-Bt*b.get(Ut,Dt)+Lt*b.get(Ut,Dt+1)),b.set(Ut,Dt,qt)}x[H-2]=Ft,1;break;case 4:if(m[ft]<=0&&(m[ft]=m[ft]<0?-m[ft]:0,d))for(var Yt=0;Yt<=st;Yt++)w.set(Yt,ft,-w.get(Yt,ft));for(;ft<st&&!(m[ft]>=m[ft+1]);){var Ht=m[ft];if(m[ft]=m[ft+1],m[ft+1]=Ht,d&&ft<i-1)for(var Wt=0;Wt<i;Wt++)Ht=w.get(Wt,ft+1),w.set(Wt,ft+1,w.get(Wt,ft)),w.set(Wt,ft,Ht);if(l&&ft<o-1)for(var Gt=0;Gt<o;Gt++)Ht=b.get(Gt,ft+1),b.set(Gt,ft+1,b.get(Gt,ft)),b.set(Gt,ft,Ht);ft++}0,H--}}if(p){var $t=w;w=b,b=$t}this.m=o,this.n=i,this.s=m,this.U=b,this.V=w}var e,r,n;return e=t,(r=[{key:"solve",value:function(t){for(var e=t,r=this.threshold,n=this.s.length,o=qe.zeros(n,n),i=0;i<n;i++)Math.abs(this.s[i])<=r?o.set(i,i,0):o.set(i,i,1/this.s[i]);for(var a=this.U,u=this.rightSingularVectors,s=u.mmul(o),c=u.rows,f=a.rows,h=qe.zeros(c,f),l=0;l<c;l++)for(var d=0;d<f;d++){for(var p=0,v=0;v<n;v++)p+=s.get(l,v)*a.get(d,v);h.set(l,d,p)}return h.mmul(e)}},{key:"solveForDiagonal",value:function(t){return this.solve(qe.diag(t))}},{key:"inverse",value:function(){for(var t=this.V,e=this.threshold,r=t.rows,n=t.columns,o=new qe(r,this.s.length),i=0;i<r;i++)for(var a=0;a<n;a++)Math.abs(this.s[a])>e&&o.set(i,a,t.get(i,a)/this.s[a]);for(var u=this.U,s=u.rows,c=u.columns,f=new qe(r,s),h=0;h<r;h++)for(var l=0;l<s;l++){for(var d=0,p=0;p<c;p++)d+=o.get(h,p)*u.get(l,p);f.set(h,l,d)}return f}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var t=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,e=0,r=this.s,n=0,o=r.length;n<o;n++)r[n]>t&&e++;return e}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return qe.diag(this.s)}}])&&Xe(e.prototype,r),n&&Xe(e,n),t}(),Qe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.linkDistance=50,e.scaledDistances=null,e}return a(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},e.prototype.execute=function(){var t=this.nodes,e=this.edges,r=void 0===e?[]:e,n=this.center;if(t&&0!==t.length){if(1===t.length)return t[0].x=n[0],void(t[0].y=n[1]);var o=this.linkDistance,i=O({nodes:t,edges:r},!1),a=A(i);this.handleInfinity(a);var u,s,c=(u=o,s=[],a.forEach((function(t){var e=[];t.forEach((function(t){e.push(t*u)})),s.push(e)})),s);this.scaledDistances=c;var f=this.runMDS();this.positions=f,f.forEach((function(e,r){t[r].x=e[0]+n[0],t[r].y=e[1]+n[1]}))}},e.prototype.runMDS=function(){var t=this.scaledDistances,e=qe.mul(qe.pow(t,2),-.5),r=e.mean("row"),n=e.mean("column"),o=e.mean();e.add(o).subRowVector(r).subColumnVector(n);var i=new Je(e),a=qe.sqrt(i.diagonalMatrix).diagonal();return i.leftSingularVectors.toJSON().map((function(t){return qe.mul([t],[a]).toJSON()[0].splice(0,2)}))},e.prototype.handleInfinity=function(t){var e=-999999;t.forEach((function(t){t.forEach((function(t){t!==1/0&&e<t&&(e=t)}))})),t.forEach((function(r,n){r.forEach((function(r,o){r===1/0&&(t[n][o]=e)}))}))},e}(c),Ke=function(){function t(t){this.distances=t.distances,this.dimension=t.dimension||2,this.linkDistance=t.linkDistance}return t.prototype.layout=function(){var t=this.dimension,e=this.distances,r=this.linkDistance;try{var n=qe.mul(qe.pow(e,2),-.5),o=n.mean("row"),i=n.mean("column"),a=n.mean();n.add(a).subRowVector(o).subColumnVector(i);var u=new Je(n),s=qe.sqrt(u.diagonalMatrix).diagonal();return u.leftSingularVectors.toJSON().map((function(e){return qe.mul([e],[s]).toJSON()[0].splice(0,t)}))}catch(t){for(var c=[],f=0;f<e.length;f++){var h=Math.random()*r,l=Math.random()*r;c.push([h,l])}return c}},t}(),Ze=function(){function t(t){this.disp=[],this.positions=t.positions,this.adjMatrix=t.adjMatrix,this.focusID=t.focusID,this.radii=t.radii,this.iterations=t.iterations||10,this.height=t.height||10,this.width=t.width||10,this.speed=t.speed||100,this.gravity=t.gravity||10,this.nodeSizeFunc=t.nodeSizeFunc,this.k=t.k||5,this.strictRadial=t.strictRadial,this.nodes=t.nodes}return t.prototype.layout=function(){var t=this.positions,e=[],r=this.iterations,n=this.width/10;this.maxDisplace=n,this.disp=e;for(var o=0;o<r;o++)t.forEach((function(t,r){e[r]={x:0,y:0}})),this.getRepulsion(),this.updatePositions();return t},t.prototype.getRepulsion=function(){var t=this,e=t.positions,r=t.nodes,n=t.disp,o=t.k,i=t.radii||[];e.forEach((function(a,u){n[u]={x:0,y:0},e.forEach((function(e,s){if(u!==s&&i[u]===i[s]){var c=a[0]-e[0],f=a[1]-e[1],h=Math.sqrt(c*c+f*f);if(0===h){h=1;var l=u>s?1:-1;c=.01*l,f=.01*l}if(h<t.nodeSizeFunc(r[u])/2+t.nodeSizeFunc(r[s])/2){var d=o*o/h;n[u].x+=c/h*d,n[u].y+=f/h*d}}}))}))},t.prototype.updatePositions=function(){var t=this.positions,e=this.disp,r=this.speed,n=this.strictRadial,o=this.focusID,i=this.maxDisplace||this.width/10;n&&e.forEach((function(e,r){var n=t[r][0]-t[o][0],i=t[r][1]-t[o][1],a=Math.sqrt(n*n+i*i),u=i/a,s=-n/a,c=Math.sqrt(e.x*e.x+e.y*e.y),f=Math.acos((u*e.x+s*e.y)/c);f>Math.PI/2&&(f-=Math.PI/2,u*=-1,s*=-1);var h=Math.cos(f)*c;e.x=u*h,e.y=s*h}));var a=this.radii;t.forEach((function(u,s){if(s!==o){var c=Math.sqrt(e[s].x*e[s].x+e[s].y*e[s].y);if(c>0&&s!==o){var f=Math.min(i*(r/800),c);if(u[0]+=e[s].x/c*f,u[1]+=e[s].y/c*f,n){var h=u[0]-t[o][0],l=u[1]-t[o][1],d=Math.sqrt(h*h+l*l);h=h/d*a[s],l=l/d*a[s],u[0]=t[o][0]+h,u[1]=t[o][1]+l}}}}))},t}();function tr(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var er=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.maxIteration=1e3,e.focusNode=null,e.unitRadius=null,e.linkDistance=50,e.preventOverlap=!1,e.strictRadial=!0,e.maxPreventOverlapIteration=200,e.sortStrength=10,e}return a(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.edges||[],n=t.center;if(e&&0!==e.length){if(1===e.length)return e[0].x=n[0],void(e[0].y=n[1]);var o=t.linkDistance,i=null;if(C()(t.focusNode)){for(var a=!1,u=0;u<e.length;u++)e[u].id===t.focusNode&&(i=e[u],t.focusNode=i,a=!0,u=e.length);a||(i=null)}else i=t.focusNode;i||(i=e[0],t.focusNode=i);var s,c,f,h=(s=e,c=i.id,f=-1,s.forEach((function(t,e){t.id===c&&(f=e)})),f);t.focusIndex=h;var l=O({nodes:e,edges:r},!1),d=A(l),p=t.maxToFocus(d,h);t.handleInfinity(d,h,p+1),t.distances=d;var v=d[h];t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var g=t.width||500,y=t.height||500,m=g-n[0]>n[0]?n[0]:g-n[0],b=y-n[1]>n[1]?n[1]:y-n[1];0===m&&(m=g/2),0===b&&(b=y/2);var w=b>m?m:b,x=Math.max.apply(Math,v),M=[];v.forEach((function(e,r){t.unitRadius||(t.unitRadius=w/x),M[r]=e*t.unitRadius})),t.radii=M;var k=t.eIdealDisMatrix();t.eIdealDistances=k;var _=function(t){for(var e=t.length,r=t[0].length,n=[],o=0;o<e;o++){for(var i=[],a=0;a<r;a++)0!==t[o][a]?i.push(1/(t[o][a]*t[o][a])):i.push(0);n.push(i)}return n}(k);t.weights=_;var S=new Ke({distances:k,linkDistance:o}).layout();S.forEach((function(t){Gt(t[0])&&(t[0]=Math.random()*o),Gt(t[1])&&(t[1]=Math.random()*o)})),t.positions=S,S.forEach((function(t,r){e[r].x=t[0]+n[0],e[r].y=t[1]+n[1]})),S.forEach((function(t){t[0]-=S[h][0],t[1]-=S[h][1]})),t.run();var E=t.preventOverlap,N=t.nodeSize,I=t.strictRadial;if(E){var R,P=t.nodeSpacing;R=Tt()(P)?function(){return P}:zt()(P)?P:function(){return 0};var z={nodeSizeFunc:N?j()(N)?function(t){return(N[0]>N[1]?N[0]:N[1])+R(t)}:function(t){return N+R(t)}:function(t){return t.size?j()(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])+R(t):t.size+R(t):10+R(t)},adjMatrix:l,positions:S,radii:M,height:y,width:g,strictRadial:I,focusID:h,iterations:t.maxPreventOverlapIteration||200,k:S.length/4.5,nodes:e},F=new Ze(z);S=F.layout()}S.forEach((function(t,r){e[r].x=t[0]+n[0],e[r].y=t[1]+n[1]}))}},e.prototype.run=function(){for(var t=this.maxIteration,e=this.positions||[],r=this.weights||[],n=this.eIdealDistances||[],o=this.radii||[],i=0;i<=t;i++){var a=i/t;this.oneIteration(a,e,o,n,r)}},e.prototype.oneIteration=function(t,e,r,n,o){var i=1-t,a=this.focusIndex;e.forEach((function(u,s){var c=tr(u,[0,0]),f=0===c?0:1/c;if(s!==a){var h=0,l=0,d=0;e.forEach((function(t,e){if(s!==e){var r=tr(u,t),i=0===r?0:1/r,a=n[e][s];d+=o[s][e],h+=o[s][e]*(t[0]+a*(u[0]-t[0])*i),l+=o[s][e]*(t[1]+a*(u[1]-t[1])*i)}}));var p=0===r[s]?0:1/r[s];d*=i,d+=t*p*p,h*=i,h+=t*p*u[0]*f,u[0]=h/d,l*=i,l+=t*p*u[1]*f,u[1]=l/d}}))},e.prototype.eIdealDisMatrix=function(){var t=this,e=t.nodes;if(!e)return[];var r=t.distances,n=t.linkDistance,o=t.radii||[],i=t.unitRadius||50,a=[];return r&&r.forEach((function(r,u){var s=[];r.forEach((function(r,a){if(u===a)s.push(0);else if(o[u]===o[a])if("data"===t.sortBy)s.push(r*(Math.abs(u-a)*t.sortStrength)/(o[u]/i));else if(t.sortBy){var c=e[u][t.sortBy]||0,f=e[a][t.sortBy]||0;C()(c)&&(c=c.charCodeAt(0)),C()(f)&&(f=f.charCodeAt(0)),s.push(r*(Math.abs(c-f)*t.sortStrength)/(o[u]/i))}else s.push(r*n/(o[u]/i));else{var h=(n+i)/2;s.push(r*h)}})),a.push(s)})),a},e.prototype.handleInfinity=function(t,e,r){for(var n=t.length,o=0;o<n;o++)if(t[e][o]===1/0){t[e][o]=r,t[o][e]=r;for(var i=0;i<n;i++)t[o][i]!==1/0&&t[e][i]===1/0&&(t[e][i]=r+t[o][i],t[i][e]=r+t[o][i])}for(o=0;o<n;o++)if(o!==e)for(i=0;i<n;i++)if(t[o][i]===1/0){var a=Math.abs(t[e][o]-t[e][i]);a=0===a?1:a,t[o][i]=a}},e.prototype.maxToFocus=function(t,e){for(var r=0,n=0;n<t[e].length;n++)t[e][n]!==1/0&&(r=t[e][n]>r?t[e][n]:r);return r},e}(c),rr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.width=300,e.height=300,e}return a(e,t),e.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},e.prototype.execute=function(){var t=this,e=t.nodes,r=t.center;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight),e&&e.forEach((function(e){e.x=.9*(Math.random()-.5)*t.width+r[0],e.y=.9*(Math.random()-.5)*t.height+r[1]}))},e}(c),nr=r(32),or=r.n(nr),ir=r(33),ar=r.n(ir),ur=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function sr(t,e,r){var n;return(n=Math.round(t.h)>=60&&Math.round(t.h)<=240?r?Math.round(t.h)-2*e:Math.round(t.h)+2*e:r?Math.round(t.h)+2*e:Math.round(t.h)-2*e)<0?n+=360:n>=360&&(n-=360),n}function cr(t,e,r){return 0===t.h&&0===t.s?t.s:((n=r?t.s-.16*e:4===e?t.s+.16:t.s+.05*e)>1&&(n=1),r&&5===e&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2)));var n}function fr(t,e,r){var n;return(n=r?t.v+.05*e:t.v-.15*e)>1&&(n=1),Number(n.toFixed(2))}function hr(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=ar()(t),o=5;o>0;o-=1){var i=n.toHsv(),a=ar()({h:sr(i,o,!0),s:cr(i,o,!0),v:fr(i,o,!0)}).toHexString();r.push(a)}r.push(n.toHexString());for(var u=1;u<=4;u+=1){var s=n.toHsv(),c=ar()({h:sr(s,u),s:cr(s,u),v:fr(s,u)}).toHexString();r.push(c)}return"dark"===e.theme?ur.map((function(t){var n=t.index,o=t.opacity;return ar.a.mix(e.backgroundColor||"#141414",r[n],100*o).toHexString()})):r}var lr={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},dr={},pr={};Object.keys(lr).forEach((function(t){dr[t]=hr(lr[t]),dr[t].primary=dr[t][5],pr[t]=hr(lr[t],{theme:"dark",backgroundColor:"#141414"}),pr[t].primary=pr[t][5]}));dr.red,dr.volcano,dr.gold,dr.orange,dr.yellow,dr.lime,dr.green,dr.cyan,dr.blue,dr.geekblue,dr.purple,dr.magenta,dr.grey;var vr=function(t,e,r){var n=or()(t),o=or()(e);return or()([(1-r)*n.color[0]+r*o.color[0],(1-r)*n.color[1]+r*o.color[1],(1-r)*n.color[2]+r*o.color[2]]).rgb()},gr=function(t,e,r,n){void 0===e&&(e="#fff"),void 0===r&&(r="default"),void 0===n&&(n="rgb(150, 150, 150)");var o=vr(e,t,.05).rgb().toString(),i=vr(e,n,.02).rgb().toString(),a=vr(e,n,.05).rgb().toString(),u=vr(e,n,.1).rgb().toString(),s=vr(e,n,.2).rgb().toString(),c=vr(e,n,.3).rgb().toString(),f=hr(t,{theme:r,backgroundColor:e}),h=or()(t).hex().toLowerCase(),l=f.indexOf(h),d=t;return-1!==l&&(d=f[l+1]),{mainStroke:t,mainFill:vr(e,t,.1).rgb().toString(),activeStroke:t,activeFill:o,inactiveStroke:vr(e,t,.4).rgb().toString(),inactiveFill:o,selectedStroke:t,selectedFill:e,highlightStroke:d,highlightFill:vr(e,t,.2).rgb().toString(),disableStroke:c,disableFill:a,edgeMainStroke:c,edgeActiveStroke:t,edgeInactiveStroke:s,edgeSelectedStroke:t,edgeHighlightStroke:t,edgeDisableStroke:u,comboMainStroke:c,comboMainFill:i,comboActiveStroke:t,comboActiveFill:o,comboInactiveStroke:c,comboInactiveFill:i,comboSelectedStroke:t,comboSelectedFill:i,comboHighlightStroke:d,comboHighlightFill:i,comboDisableStroke:s,comboDisableFill:a}}("rgb(95, 149, 255)","rgb(255, 255, 255)"),yr={version:"3.8.5",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",customGroupContainerClassName:"custom-group-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:gr.mainStroke,fill:gr.mainFill},size:20,color:gr.mainStroke,linkPoints:{size:8,lineWidth:1,fill:gr.activeFill,stroke:gr.activeStroke}},nodeStateStyles:{active:{fill:gr.activeFill,stroke:gr.activeStroke,lineWidth:2,shadowColor:gr.mainStroke,shadowBlur:10},selected:{fill:gr.selectedFill,stroke:gr.selectedStroke,lineWidth:4,shadowColor:gr.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:gr.highlightFill,stroke:gr.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:gr.inactiveFill,stroke:gr.inactiveStroke,lineWidth:1},disable:{fill:gr.disableFill,stroke:gr.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:"rgb(0, 0, 0)",textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:gr.edgeMainStroke,lineAppendWidth:2},color:gr.edgeMainStroke},edgeStateStyles:{active:{stroke:gr.edgeActiveStroke,lineWidth:1},selected:{stroke:gr.edgeSelectedStroke,lineWidth:2,shadowColor:gr.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:gr.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:gr.edgeInactiveStroke,lineWidth:1},disable:{stroke:gr.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:"rgb(0, 0, 0)",textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:gr.comboMainFill,lineWidth:1,stroke:gr.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:gr.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:gr.comboActiveStroke,lineWidth:1,fill:gr.comboActiveFill},selected:{stroke:gr.comboSelectedStroke,lineWidth:2,fill:gr.comboSelectedFill,shadowColor:gr.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:gr.comboHighlightStroke,lineWidth:2,fill:gr.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:gr.comboInactiveStroke,fill:gr.comboInactiveFill,lineWidth:1},disable:{stroke:gr.comboDisableStroke,fill:gr.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},mr=Math.PI,br=Math.sin,wr=Math.cos,xr=(br(mr/8),wr(mr/8),function(t,e){if(t&&t.children)for(var r=t.children.length-1;r>=0;r--)if(!xr(t.children[r],e))return;return!1!==e(t)}),Mr=function(t,e){"function"==typeof e&&xr(t,e)},kr={circular:R,concentric:z,dagre:D,force:Vt,g6force:Yt,comboForce:function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.center=[0,0],e.maxIteration=100,e.gravity=10,e.comboGravity=10,e.linkDistance=10,e.alpha=1,e.alphaMin=.001,e.alphaDecay=1-Math.pow(e.alphaMin,1/300),e.alphaTarget=0,e.velocityDecay=.6,e.edgeStrength=.2,e.nodeStrength=30,e.preventOverlap=!1,e.preventNodeOverlap=!1,e.preventComboOverlap=!1,e.collideStrength=void 0,e.nodeCollideStrength=void 0,e.comboCollideStrength=void 0,e.optimizeRangeFactor=1,e.onTick=function(){},e.onLayoutEnd=function(){},e.depthAttractiveForceScale=.5,e.depthRepulsiveForceScale=2,e.nodes=[],e.edges=[],e.combos=[],e.comboTrees=[],e.width=300,e.height=300,e.bias=[],e.nodeMap={},e.oriComboMap={},e.nodeIdxMap={},e.comboMap={},e.previousLayouted=!1,e}return a(e,t),e.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.2,nodeStrength:30,linkDistance:10}},e.prototype.execute=function(){var t=this.nodes,e=this.center;if(this.comboTree={id:"comboTreeRoot",depth:-1,children:this.comboTrees},t&&0!==t.length){if(1===t.length)return t[0].x=e[0],void(t[0].y=e[1]);this.initVals(),this.run(),this.onLayoutEnd()}},e.prototype.run=function(){var t=this,e=t.nodes,r=t.previousLayouted?t.maxIteration/5:t.maxIteration;t.width||"undefined"==typeof window||(t.width=window.innerWidth),t.height||"undefined"==typeof window||(t.height=window.innerHeight);var n=t.center,o=t.velocityDecay,i=t.comboMap;t.previousLayouted||t.initPos(i);for(var a=function(r){var n=[];e.forEach((function(t,e){n[e]={x:0,y:0}})),t.applyCalculate(n),t.applyComboCenterForce(n),e.forEach((function(t,e){k(t.x)&&k(t.y)&&(t.x+=n[e].x*o,t.y+=n[e].y*o)})),t.alpha+=(t.alphaTarget-t.alpha)*t.alphaDecay,t.onTick()},u=0;u<r;u++)a();var s=[0,0];e.forEach((function(t){k(t.x)&&k(t.y)&&(s[0]+=t.x,s[1]+=t.y)})),s[0]/=e.length,s[1]/=e.length;var c=[n[0]-s[0],n[1]-s[1]];e.forEach((function(t,e){k(t.x)&&k(t.y)&&(t.x+=c[0],t.y+=c[1])})),t.combos.forEach((function(t){var e=i[t.id];e&&e.empty&&(t.x=e.cx||t.x,t.y=e.cy||t.y)})),t.previousLayouted=!0},e.prototype.initVals=function(){var t=this.edges,e=this.nodes,r=this.combos,n={},o={},i={};e.forEach((function(t,e){o[t.id]=t,i[t.id]=e})),this.nodeMap=o,this.nodeIdxMap=i;var a={};r.forEach((function(t){a[t.id]=t})),this.oriComboMap=a,this.comboMap=this.getComboMap();var u=this.preventOverlap;this.preventComboOverlap=this.preventComboOverlap||u,this.preventNodeOverlap=this.preventNodeOverlap||u;var s=this.collideStrength;s&&(this.comboCollideStrength=s,this.nodeCollideStrength=s);for(var c=0;c<t.length;++c)n[t[c].source]?n[t[c].source]++:n[t[c].source]=1,n[t[c].target]?n[t[c].target]++:n[t[c].target]=1;var f=[];for(c=0;c<t.length;++c)f[c]=n[t[c].source]/(n[t[c].source]+n[t[c].target]);this.bias=f;var h,l,d=this.nodeSize,p=this.nodeSpacing;if(l=k(p)?function(){return p}:g(p)?p:function(){return 0},this.nodeSpacing=l,d)if(g(d))h=function(t){return d(t)};else if(y(d)){var v=(d[0]>d[1]?d[0]:d[1])/2;h=function(t){return v}}else{var m=d/2;h=function(t){return m}}else h=function(t){return t.size?y(t.size)?(t.size[0]>t.size[1]?t.size[0]:t.size[1])/2:t.size/2:10};this.nodeSize=h;var b,w=this.comboSpacing;b=k(w)?function(){return w}:g(w)?w:function(){return 0},this.comboSpacing=b;var x,M=this.comboPadding;x=k(M)?function(){return M}:y(M)?function(){return Math.max.apply(null,M)}:g(M)?M:function(){return 0},this.comboPadding=x;var _,S=this.linkDistance;S||(S=10),_=k(S)?function(t){return S}:S,this.linkDistance=_;var E,j=this.edgeStrength;j||(j=1),E=k(j)?function(t){return j}:j,this.edgeStrength=E;var A,O=this.nodeStrength;O||(O=30),A=k(O)?function(t){return O}:O,this.nodeStrength=A},e.prototype.initPos=function(t){this.nodes.forEach((function(e,r){if(e.comboId){var n=t[e.comboId];e.x=n.cx+100/(r+1),e.y=n.cy+100/(r+1)}else e.x=100/(r+1),e.y=100/(r+1)}))},e.prototype.getComboMap=function(){var t=this,e=t.nodeMap,r=t.nodeIdxMap,n=t.comboTrees,o=t.oriComboMap,i={};return(n||[]).forEach((function(n){var a=[];Mr(n,(function(n){if("node"===n.itemType)return!0;if(!o[n.id])return!0;if(void 0===i[n.id]){var u={name:n.id,cx:0,cy:0,count:0,depth:t.oriComboMap[n.id].depth,children:[]};i[n.id]=u}var s=n.children;s&&s.forEach((function(t){if(!i[t.id]&&!e[t.id])return!0;a.push(t)}));var c=i[n.id];if(c.cx=0,c.cy=0,0===a.length){c.empty=!0;var f=o[n.id],h=Object.keys(e).length,l=n.id+"-visual-child-"+h,d={id:l,x:f.x,y:f.y,depth:c.depth+1,itemType:"node"};t.nodes.push(d),e[l]=d,r[l]=h,c.cx=f.x,c.cy=f.y,a.push(d)}return a.forEach((function(t){if(c.count++,"node"!==t.itemType){var r=i[t.id];return k(r.cx)&&(c.cx+=r.cx),void(k(r.cy)&&(c.cy+=r.cy))}var n=e[t.id];n&&(k(n.x)&&(c.cx+=n.x),k(n.y)&&(c.cy+=n.y))})),c.cx/=c.count,c.cy/=c.count,c.children=a,!0}))})),i},e.prototype.applyComboCenterForce=function(t){var e=this.gravity,r=this.comboGravity||e,n=this.alpha,o=this.comboTrees,i=this.nodeIdxMap,a=this.nodeMap,u=this.comboMap;(o||[]).forEach((function(e){Mr(e,(function(e){if("node"===e.itemType)return!0;if(!u[e.id])return!0;var o=u[e.id],s=.5*(o.depth+1),c=o.cx,f=o.cy;return o.cx=0,o.cy=0,o.children.forEach((function(e){if("node"!==e.itemType){var h=u[e.id];return h&&k(h.cx)&&(o.cx+=h.cx),void(h&&k(h.cy)&&(o.cy+=h.cy))}var l=a[e.id],d=l.x-c||.005,p=l.y-f||.005,v=Math.sqrt(d*d+p*p),g=i[l.id],y=r*n/v*s;t[g].x-=d*y,t[g].y-=p*y,k(l.x)&&(o.cx+=l.x),k(l.y)&&(o.cy+=l.y)})),o.cx/=o.count,o.cy/=o.count,!0}))}))},e.prototype.applyCalculate=function(t){var e=this.comboMap,r=this.nodes,n={};r.forEach((function(t,e){r.forEach((function(r,o){if(!(e<o)){var i=t.x-r.x||.005,a=t.y-r.y||.005,u=i*i+a*a,s=Math.sqrt(u);u<1&&(u=s),n[t.id+"-"+r.id]={vx:i,vy:a,vl2:u,vl:s},n[r.id+"-"+t.id]={vx:-i,vy:-a,vl2:u,vl:s}}}))})),this.updateComboSizes(e),this.calRepulsive(t,n),this.calAttractive(t,n),this.preventComboOverlap&&this.comboNonOverlapping(t,e)},e.prototype.updateComboSizes=function(t){var e=this,r=e.comboTrees,n=e.nodeMap,o=e.nodeSize,i=e.comboSpacing,a=e.comboPadding;(r||[]).forEach((function(r){var u=[];Mr(r,(function(r){if("node"===r.itemType)return!0;var s=t[r.id];if(s){var c=r.children;c&&c.forEach((function(e){(t[e.id]||n[e.id])&&u.push(e)})),s.minX=1/0,s.minY=1/0,s.maxX=-1/0,s.maxY=-1/0,u.forEach((function(t){if("node"!==t.itemType)return!0;var e=n[t.id];if(!e)return!0;var r=o(e),i=e.x-r,a=e.y-r,u=e.x+r,c=e.y+r;s.minX>i&&(s.minX=i),s.minY>a&&(s.minY=a),s.maxX<u&&(s.maxX=u),s.maxY<c&&(s.maxY=c)}));var f=e.oriComboMap[r.id].size||yr.defaultCombo.size;y(f)&&(f=f[0]);var h=Math.max(s.maxX-s.minX,s.maxY-s.minY,f);return s.r=h/2+i(s)/2+a(s),!0}}))}))},e.prototype.comboNonOverlapping=function(t,e){var r=this.comboTree,n=this.comboCollideStrength,o=this.nodeIdxMap,i=this.nodeMap;Mr(r,(function(r){if(e[r.id]||i[r.id]||"comboTreeRoot"===r.id){var a=r.children;return a&&a.length>1&&a.forEach((function(r,u){if("node"!==r.itemType){var s=e[r.id];s&&a.forEach((function(a,c){if(!(u<=c)&&"node"!==a.itemType){var f=e[a.id];if(f){var h=s.cx-f.cx||.005,l=s.cy-f.cy||.005,d=h*h+l*l,p=s.r,v=f.r,g=p+v,y=v*v,m=p*p;if(d<g*g){var b=r.children;if(!b||0===b.length)return;var w=a.children;if(!w||0===w.length)return;var x=Math.sqrt(d),M=(g-x)/x*n,k=h*M,_=l*M,S=y/(m+y),E=1-S;b.forEach((function(e){if("node"===e.itemType&&i[e.id]){var r=o[e.id];w.forEach((function(e){if("node"===e.itemType&&i[e.id]){var n=o[e.id];t[r].x+=k*S,t[r].y+=_*S,t[n].x-=k*E,t[n].y-=_*E}}))}}))}}}}))}})),!0}}))},e.prototype.calRepulsive=function(t,e){var r=this,n=r.nodes,o=r.width*r.optimizeRangeFactor,i=r.nodeStrength,a=r.alpha,u=r.nodeCollideStrength,s=r.preventNodeOverlap,c=r.nodeSize,f=r.nodeSpacing,h=r.depthRepulsiveForceScale,l=r.center;n.forEach((function(d,p){if(d.x&&d.y){if(l){var v=r.gravity,g=d.x-l[0]||.005,y=d.y-l[1]||.005,m=Math.sqrt(g*g+y*y);t[p].x-=g*v*a/m,t[p].y-=y*v*a/m}n.forEach((function(r,n){if(p!==n&&r.x&&r.y){var l=e[d.id+"-"+r.id],v=l.vl2,g=l.vl;if(!(g>o)){var y=e[d.id+"-"+r.id],m=y.vx,b=y.vy,w=Math.abs(r.depth-d.depth)+1||1;r.comboId!==d.comboId&&w++;var x=w?Math.pow(h,w):1,M=i(r)*a/v*x;if(t[p].x+=m*M,t[p].y+=b*M,p<n&&s){var k=c(d)+f(d),_=c(r)+f(r),S=k+_;if(v<S*S){var E=(S-g)/g*u,j=_*_,A=j/(k*k+j),O=m*E,N=b*E;t[p].x+=O*A,t[p].y+=N*A,A=1-A,t[n].x-=O*A,t[n].y-=N*A}}}}}))}}))},e.prototype.calAttractive=function(t,e){var r=this,n=r.edges,o=r.linkDistance,i=r.alpha,a=r.edgeStrength,u=r.bias,s=r.depthAttractiveForceScale;n.forEach((function(n,c){if(n.source&&n.target&&n.source!==n.target){var f=r.nodeIdxMap[n.source],h=r.nodeIdxMap[n.target],l=r.nodeMap[n.source],d=r.nodeMap[n.target],p=Math.abs(l.depth-d.depth);l.comboId===d.comboId&&(p/=2);var v=p?Math.pow(s,p):1;if(l.comboId!==d.comboId&&1===v?v=s/2:l.comboId===d.comboId&&(v=2),k(d.x)&&k(l.x)&&k(d.y)&&k(l.y)){var g=e[n.target+"-"+n.source],y=g.vl,m=g.vx,b=g.vy,w=(y-o(n))/y*i*a(n)*v,x=m*w,M=b*w,_=u[c];t[h].x-=x*_,t[h].y-=M*_,t[f].x+=x*(1-_),t[f].y+=M*(1-_)}}}))},e}(c),fruchterman:Ht,grid:$t,mds:Qe,radial:er,random:rr};o()(kr,(function(t,e){h.registerLayout(e,{},t)}));var _r=h,Sr=self;Sr.onmessage=function(t){(function(t){return t.data.type===Dt})(t)&&function(t){switch(t.data.type){case Dt:var e=t.data,r=e.nodes,n=e.edges,o=e.layoutCfg,i=void 0===o?{}:o,a=i.type,u=_r[a];if(!u){Sr.postMessage({type:Lt,message:"layout "+a+" not found"});break}var s=new u(i);s.init({nodes:r,edges:n}),s.execute(),Sr.postMessage({type:qt,nodes:r}),s.destroy()}}(t)};e.default=null}]);\n//# sourceMappingURL=g6Layout.worker.js.map',"Worker",void 0,r.p+"g6Layout.worker.js")},vo=function(t){return setTimeout(t,16)},yo=function(t){return clearTimeout(t)},mo=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||vo)(t)},bo=function(t){return(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||yo)(t)},xo=function(){function t(t){this.graph=t,this.layoutCfg=t.get("layout")||{},this.layoutType=this.layoutCfg.type,this.worker=null,this.workerData={},this.initLayout()}return t.prototype.initLayout=function(){},t.prototype.getWorker=function(){return this.worker||("undefined"==typeof Worker?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=new go),this.worker},t.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(bo(t.requestId),t.requestId=null),t.requestId2&&(bo(t.requestId2),t.requestId2=null))},t.prototype.getLayoutType=function(){return this.layoutCfg.type},t.prototype.layout=function(t){var e=this.graph;this.data=this.setDataFromGraph();var r=this.data.nodes;if(!r)return!1;var n=e.get("width"),i=e.get("height"),o={};Object.assign(o,{width:n,height:i,center:[n/2,i/2]},this.layoutCfg),this.layoutCfg=o;var a=!!this.layoutType,s=this.layoutMethod;s&&s.destroy(),e.emit("beforelayout");var u=this.initPositions(o.center,r);if(this.stopWorker(),o.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;if("force"===this.layoutType||"g6force"===this.layoutType){var c=o.onTick,h=function(){c&&c(),e.refreshPositions()};o.tick=h;var f=o.onLayoutEnd;o.onLayoutEnd=function(){f&&f(),e.emit("afterlayout")}}else"comboForce"===this.layoutType&&(o.comboTrees=e.get("comboTrees"));var l=!1;if(void 0!==this.layoutType){try{s=new fo[this.layoutType](o)}catch(t){return console.warn("The layout method: "+this.layoutType+" does not exist! Please specify it first."),!1}if(l=s.enableTick){var d=o.onTick,p=o.onLayoutEnd;h=function(){d&&d(),e.refreshPositions()};s.tick=h;s.onLayoutEnd=function(){p&&p(),e.emit("afterlayout")}}s.init(this.data),a&&s.execute(),this.layoutMethod=s}return!a&&u||"force"===this.layoutType||l||(e.emit("afterlayout"),this.refreshLayout()),!1},t.prototype.layoutWithWorker=function(t,e){var r=this,n=t.nodes,i=t.edges,o=this.layoutCfg,a=(this.graph,this.getWorker()),s=this.workerData;if(!a)return!1;s.requestId=null,s.requestId2=null,s.currentTick=null,s.currentTickData=null;var u=function(t,e){var r={};if(t&&"object"==typeof t)return Object.keys(t).forEach((function(n){t.hasOwnProperty(n)&&e(t[n])&&(r[n]=t[n])})),r;return t}(o,(function(t){return"function"!=typeof t}));return a.postMessage({type:Wn,nodes:n,edges:i,layoutCfg:u}),a.onmessage=function(n){r.handleWorkerMessage(n,t,e)},!0},t.prototype.handleWorkerMessage=function(t,e,r){var n=this.graph,i=this.workerData,o=this.layoutCfg,a=t.data,s=a.type,u=function(){o.onTick&&o.onTick()},c=function(){o.onLayoutEnd&&o.onLayoutEnd(),n.emit("afterlayout")};switch(s){case $n:i.currentTick=a.currentTick,i.currentTickData=a,i.requestId||(i.requestId=mo((function(){wo(e,a),n.refreshPositions(),u(),1===a.currentTick&&r&&r(),a.currentTick===a.totalTicks?c():i.currentTick===a.totalTicks&&(i.requestId2=mo((function(){wo(e,i.currentTickData),n.refreshPositions(),i.requestId2=null,u(),c()}))),i.requestId=null})));break;case Zn:null==i.currentTick&&(wo(e,a),this.refreshLayout(),r&&r(),n.emit("afterlayout"))}},t.prototype.refreshLayout=function(){var t=this.graph;t.get("animate")?t.positionsAnimate():t.refreshPositions()},t.prototype.updateLayoutCfg=function(t){var e=this.graph,r=this.layoutMethod;this.layoutType=t.type,r?(this.data=this.setDataFromGraph(),this.stopWorker(),t.workerEnabled&&this.layoutWithWorker(this.data,null)||(r.init(this.data),r.updateCfg(t),e.emit("beforelayout"),r.execute(),"force"===this.layoutType||r.enableTick||e.emit("afterlayout"),this.refreshLayout())):console.warn("You did not assign any layout type and the graph has no previous layout method!")},t.prototype.changeLayout=function(t){var e=this.graph,r=this.layoutMethod;this.layoutType=t,this.layoutCfg=e.get("layout")||{},this.layoutCfg.type=t,r&&r.destroy(),this.layout()},t.prototype.changeData=function(){var t=this.layoutMethod;t&&t.destroy(),this.layout()},t.prototype.destroyLayout=function(){var t=this.layoutMethod,e=this.graph;t&&t.destroy(),e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethod=void 0},t.prototype.setDataFromGraph=function(){var t=[],e=[],r=[],n=this.graph.getNodes(),i=this.graph.getEdges(),o=this.graph.getCombos();return n.forEach((function(e){if(e.isVisible()){var r=e.getModel();t.push(r)}})),i.forEach((function(t){if(!t.destroyed&&t.isVisible()){var r=t.getModel();r.isComboEdge||e.push(r)}})),o.forEach((function(t){if(!t.destroyed&&t.isVisible()){var e=t.getModel();r.push(e)}})),{nodes:t,edges:e,combos:r}},t.prototype.relayout=function(t){var e=this.graph,r=this.layoutMethod,n=this.layoutCfg;if(t){this.data=this.setDataFromGraph();var i=this.data.nodes;if(!i)return!1;this.initPositions(n.center,i),r.init(this.data)}"force"===this.layoutType&&(r.ticking=!1,r.forceSimulation.stop()),e.emit("beforelayout"),r.execute(t),"force"===this.layoutType||r.enableTick||e.emit("afterlayout"),this.refreshLayout()},t.prototype.layoutAnimate=function(){},t.prototype.moveToZero=function(){var t=this.graph.get("data").nodes;if(void 0!==t[0].x&&null!==t[0].x&&!P(t[0].x)){var e=[0,0];t.forEach((function(t){e[0]+=t.x,e[1]+=t.y})),e[0]/=t.length,e[1]/=t.length,t.forEach((function(t){t.x-=e[0],t.y-=e[1]}))}},t.prototype.initPositions=function(t,e){var r=this.graph;if(!e)return!1;var n=!0,i=.85*r.get("width"),o=.85*r.get("height"),a=e.length,s=Math.ceil(Math.sqrt(a)*(i/o)),u=Math.ceil(a/s),c=i/(s-1),h=o/(u-1);isFinite(c)&&c||(c=0),isFinite(h)&&c||(h=0);var f=t[0]-i/2,l=t[1]-o/2;return e.forEach((function(t,e){P(t.x)&&(n=!1,t.x=e%s*c+f),P(t.y)&&(n=!1,t.y=Math.floor(e/s)*h+l)})),n},t.prototype.destroy=function(){var t=this.layoutMethod;this.graph=null,t&&t.destroy();var e=this.worker;e&&(e.terminate(),this.worker=null),this.destroyed=!0},t}();function wo(t,e){var r=t.nodes,n=e.nodes;r.forEach((function(t,e){t.x=n[e].x,t.y=n[e].y}))}var Mo=null,So=function(){function t(t){this.graph=t,this.cachedStates={enabled:{},disabled:{}},this.destroyed=!1}return t.checkCache=function(t,e,r){if(r[e]){var n=r[e].indexOf(t);n>=0&&r[e].splice(n,1)}},t.cacheState=function(t,e,r){r[e]||(r[e]=[]),r[e].push(t)},t.prototype.updateState=function(e,r,n){var i=this,o=t.checkCache,a=t.cacheState;if(!e.destroyed){var s=this.cachedStates,u=s.enabled,c=s.disabled;n?(o(e,r,c),a(e,r,u)):(o(e,r,u),a(e,r,c)),Mo&&clearTimeout(Mo),Mo=setTimeout((function(){Mo=null,i.updateGraphStates()}),16)}},t.prototype.updateStates=function(t,e,r){var n=this;_()(e)?this.updateState(t,e,r):e.forEach((function(e){n.updateState(t,e,r)}))},t.prototype.updateGraphStates=function(){var t=this.graph.get("states"),e=this.cachedStates;d()(e.disabled,(function(e,r){t[r]&&(t[r]=t[r].filter((function(t){return e.indexOf(t)<0&&!e.destroyed})))})),d()(e.enabled,(function(e,r){if(t[r]){var n={};t[r].forEach((function(t){t.destroyed||(n[t.get("id")]=!0)})),e.forEach((function(e){if(!e.destroyed){var i=e.get("id");n[i]||(n[i]=!0,t[r].push(e))}}))}else t[r]=e})),this.graph.emit("graphstatechange",{states:t}),this.cachedStates={enabled:{},disabled:{}}},t.prototype.destroy=function(){this.graph=null,this.cachedStates=null,Mo&&clearTimeout(Mo),Mo=null,this.destroyed=!0},t}(),_o=null,ko=function(){function t(e){this.graph=e;var r=e.get("groupStyle");this.styles=St()({},t.getDefaultCfg(),r),this.customGroup={},this.delegateInGroup={},this.nodePoint=[],this.destroyed=!1}return t.getDefaultCfg=function(){return{default:{lineWidth:1,stroke:"#A3B1BF",strokeOpacity:.9,fill:"#F3F9FF",fillOpacity:.8,opacity:.8,disCoefficient:.6,minDis:30,maxDis:30},hover:{stroke:"#faad14",fill:"#ffe58f",fillOpacity:.3,opacity:.3,lineWidth:3},collapse:{r:30,width:80,height:40,stroke:"#A3B1BF",lineWidth:3,fill:"#F3F9FF",offsetX:-15,offsetY:5},icon:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg",operatorBtn:{collapse:{img:"https://gw.alipayobjects.com/zos/rmsportal/uZVdwjJGqDooqKLKtvGA.svg",width:16,height:16},expand:{width:16,height:16,img:"https://gw.alipayobjects.com/zos/rmsportal/MXXetJAxlqrbisIuZxDO.svg"}},visible:!1}},t.prototype.create=function(t,e,r,n,i,o){void 0===r&&(r="circle"),void 0===n&&(n=0),void 0===i&&(i=!1),void 0===o&&(o={});var a=this.graph,s=a.get("customGroup");if(s.get("children").map((function(t){return t.get("id")})).indexOf(t)>-1)console.warn("已经存在ID为 "+t+" 的分组，请重新设置分组ID！");else{var u=s.addGroup({id:t,zIndex:n}),c=this.styles.default,h=this.calculationGroupPosition(e),f=h.x,l=h.y,d=h.width,p=h.height,g=h.maxX,v=this.getGroupPadding(t);a.get("groupBBoxs")[t]={x:f,y:l,width:d,height:p,maxX:g};var y=null;if(i){var m=a.get("groups");e.forEach((function(e){var r=a.findById(e).getModel();r.groupId||(r.groupId=t)})),m.find((function(e){return e.id===t}))||(m.push({id:t,title:o}),a.set({groups:m}))}var b=a.get("groups").filter((function(e){return e.id===t}));b&&b.length>0&&(y=b[0].title);var x=0,w=0,M=null;if("circle"===r){var S=(d+2*f)/2,_=(p+2*l)/2,O=(d>p?d/2:p/2)+v;M=u.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},c),{x:S,y:_,r:O}),draggable:!0,capture:!0,zIndex:n,groupId:t,name:"circle-group-shape"}),x=S,w=_-O,this.setDeletageGroupByStyle(t,u,{width:d,height:p,x:S,y:_,r:O})}else{var E=v*c.disCoefficient;M=u.addShape("rect",{attrs:Object(k.__assign)(Object(k.__assign)({},c),{x:f-E,y:l-E,width:d+2*E,height:p+2*E}),draggable:!0,capture:!0,zIndex:n,groupId:t,name:"rect-group-shape"}),x=f-E+15,w=l-E+15,this.setDeletageGroupByStyle(t,u,{x:f-E,y:l-E,width:d+E,height:p+E,btnOffset:g-3})}if(y){var j=y.offsetX,C=void 0===j?0:j,A=y.offsetY,P=void 0===A?0:A,I=y.text,T=void 0===I?y:I,N=Object(k.__rest)(y,["offsetX","offsetY","text"]);u.addShape("text",{attrs:Object(k.__assign)({text:T,stroke:"#444",x:x+C,y:w+P},N),className:"group-title",name:"group-title-shape"}).set("capture",!1)}u.set("keyShape",M),a.get("groupNodes")[t]=e}},t.prototype.setGroupStyle=function(t,e){if(t&&!t.get("destroyed")){var r={},n=this.styles,i=n.hover,o=n.default;_()(e)?"default"===e?r=St()({},o):"hover"===e&&(r=St()({},i)):r=St()({},o,e),Object.keys(r).forEach((function(e){t.attr(e,r[e])}))}},t.prototype.calculationGroupPosition=function(t,e){if(void 0===e&&(e={x:100,y:100}),0===t.length)return{x:e.x,y:e.y,width:100,height:100};var r=this.graph,n=1/0,i=-1/0,o=1/0,a=-1/0;t.forEach((function(t){var e=(_()(t)?r.findById(t):t).getBBox(),s=e.minX,u=e.minY,c=e.maxX,h=e.maxY;s<n&&(n=s),u<o&&(o=u),c>i&&(i=c),h>a&&(a=h)}));var s=Math.floor(n),u=Math.floor(o);return{x:s,y:u,width:Math.ceil(i)-s,height:Math.ceil(a)-u,maxX:Math.ceil(i)}},t.prototype.flatToTree=function(t,e,r){void 0===e&&(e="id"),void 0===r&&(r="parentId");var n=[],i=[];return t.forEach((function(t){n[t[e]]=t})),t.forEach((function(t){var e=n[t[r]];e?(e.children=e.children||[],e.children.push(t)):i.push(t)})),i},t.prototype.getGroupPadding=function(t){var e=this.graph,r=this.styles.default,n=e.get("groups"),i=n.filter((function(e){return e.parentId===t})),o=1;return i.length>0&&(_o||(_o=this.flatToTree(n)),pr(_o[0],(function(e){if(e.parentId===t&&e.children)return o+=e.children.length,!0}))),n.filter((function(e){return e.id===t&&!e.parentId})).length>0&&(o+=1),!!(n.filter((function(e){return e.parentId===t})).length>0)?r.maxDis+30*(o>1?o/2:1):r.minDis},t.prototype.setDeletageGroupByStyle=function(t,e,r){var n=r.width,i=r.height,o=r.x,a=r.y,s=r.r,u=r.btnOffset,c=this.customGroup[t];if(c){var h=c.groupStyle,f=St()({},h,r);this.customGroup[t]={nodeGroup:e,groupStyle:f}}else this.customGroup[t]={nodeGroup:e,groupStyle:{width:n,height:i,x:o,y:a,r:s,btnOffset:u}}},t.prototype.getDeletageGroupById=function(t){return this.customGroup[t]},t.prototype.collapseExpandGroup=function(t){var e=this.getDeletageGroupById(t).nodeGroup;e.get("hasHidden")?(e.set("hasHidden",!1),this.expandGroup(t)):(e.set("hasHidden",!0),this.collapseGroup(t))},t.prototype.setGroupTmpNode=function(t,e){var r=this.graph,n=r.get("groupNodes"),i=r.get("groups");n[t].indexOf(e)<0&&n[t].push(e);var o=i.filter((function(e){return e.id===t})),a=null;o.length>0&&(a=o[0].parentId),a&&this.setGroupTmpNode(a,e)},t.prototype.collapseGroup=function(t){var e=this,r=this.getDeletageGroupById(t).nodeGroup,n=this.styles.collapse,i=this.graph,o=i.get("groupType"),a=i.get("groupNodes")[t],s=r.get("keyShape"),u=n.r,c=n.width,h=n.height,f=n.offsetX,l=n.offsetY,d=Object(k.__rest)(n,["r","width","height","offsetX","offsetY"]);Object.keys(d).forEach((function(t){s.attr(t,d[t])}));var p={groupId:t,id:t+"-custom-node",x:s.attr("x"),y:s.attr("y"),style:{r:u},type:"circle"},g=r.find((function(t){return"group-title"===t.get("className")}));"circle"===o?(s.animate({r:u},{duration:500,easing:"easeCubic"}),g&&g.attr({x:s.attr("x")+f,y:s.attr("y")+l})):"rect"===o&&(s.animate({width:c,height:h},{duration:500,easing:"easeCubic"}),g&&g.attr({x:s.attr("x")+10,y:s.attr("y")+h/2+5}),p={groupId:t,id:t+"-custom-node",x:s.attr("x")+c/2,y:s.attr("y")+h/2,size:[c,h],type:"rect"});var v=i.getEdges(),y=v.filter((function(t){var e=t.getModel();return!a.includes(e.source)&&a.includes(e.target)})),m=v.filter((function(t){var e=t.getModel();return a.includes(e.source)&&!a.includes(e.target)})),b=v.filter((function(t){var e=t.getModel();return a.includes(e.source)&&a.includes(e.target)}));if(a.forEach((function(r){var n=i.findById(r),o=n.getModel().groupId;o&&o!==t&&e.getDeletageGroupById(o).nodeGroup.hide();n.hide()})),b.forEach((function(t){var e=t.getSource(),r=t.getTarget();e.isVisible()&&r.isVisible()?t.show():t.hide()})),y.length>0||m.length>0){var x=i.add("node",p);x.set("capture",!1),x.hide(),this.delegateInGroup[t]={delegateNode:x},this.setGroupTmpNode(t,t+"-custom-node"),this.updateEdgeInGroupLinks(t,y,m)}},t.prototype.updateEdgeInGroupLinks=function(t,e,r){var n=this.graph,i={};e.map((function(e){var r=e.getModel(),o=e.get("id"),a=r.target;return i[o]=a,n.updateItem(e,{target:t+"-custom-node"}),!0}));var o={};r.map((function(e){var r=e.getModel(),i=e.get("id"),a=r.source;return o[i]=a,n.updateItem(e,{source:t+"-custom-node"}),!0})),this.delegateInGroup[t]=St()({sourceOutTargetInEdges:e,sourceInTargetOutEdges:r,edgesOuts:i,edgesIn:o},this.delegateInGroup[t])},t.prototype.expandGroup=function(t){var e=this,r=this.graph,n=r.get("groupType"),i=r.get("groupNodes")[t],o=i.filter((function(t){return-1===t.indexOf("custom-node")})),a=this.calculationGroupPosition(o),s=a.width,u=a.height,c=this.getDeletageGroupById(t).nodeGroup,h=c.get("keyShape"),f=this.styles,l=f.default,d=f.collapse;Object.keys(l).forEach((function(t){h.attr(t,l[t])}));var p=c.find((function(t){return"group-title"===t.get("className")})),g=this.getGroupPadding(t);if("circle"===n){var v=s>u?s/2:u/2;h.animate({r:v+g},{duration:500,easing:"easeCubic"})}else if("rect"===n){var y=d.width,m=d.height;h.animate({width:y+s+g*l.disCoefficient*2,height:m+u+g*l.disCoefficient*2},{duration:500,easing:"easeCubic"})}if(p){var b=null,x=r.get("groups").filter((function(e){return e.id===t}));x&&x.length>0&&(b=x[0].title);var w=b.offsetX,M=void 0===w?0:w,S=b.offsetY,_=void 0===S?0:S;"circle"===n?p.animate({x:h.attr("x")+M,y:h.attr("y")-h.attr("r")+_},{duration:600,easing:"easeCubic"}):"rect"===n&&p.animate({x:h.attr("x")+(15+M),y:h.attr("y")+(15+_)},{duration:600,easing:"easeCubic"})}setTimeout((function(){i.forEach((function(n){var i=r.findById(n),o=i.getModel().groupId;if(o&&o!==t){var a=e.getDeletageGroupById(o).nodeGroup;a.show(),a.get("hasHidden")||i.show()}else i.show()})),r.getEdges().filter((function(t){var e=t.getModel();return i.includes(e.source)||i.includes(e.target)})).forEach((function(t){var e=t.getSource(),r=t.getTarget();e.isVisible()&&r.isVisible()&&t.show()}))}),300);var k=this.delegateInGroup[t];if(k){var O=k.sourceOutTargetInEdges,E=k.sourceInTargetOutEdges,j=k.edgesOuts,C=k.edgesIn,A=k.delegateNode;O.map((function(t){var e=t.get("id"),n=j[e];return r.updateItem(t,{target:n}),!0})),E.map((function(t){var e=t.get("id"),n=C[e];return r.updateItem(t,{source:n}),!0}));var P=A.getModel();this.deleteTmpNode(t,P.id),r.remove(A),delete this.delegateInGroup[t]}},t.prototype.deleteTmpNode=function(t,e){var r=this.graph,n=r.get("groups"),i=r.get("groupNodes")[t],o=i.indexOf(e);i.splice(o,1);var a=n.filter((function(e){return e.id===t})),s=null;a.length>0&&(s=a[0].parentId),s&&this.deleteTmpNode(s,e)},t.prototype.remove=function(t){var e=this.graph,r=this.getDeletageGroupById(t);if(r){var n=r.nodeGroup,i=e.get("groupNodes"),o=i[t];o.forEach((function(r){var n=e.findById(r),i=n.getModel(),o=i.groupId;o&&t===o&&(delete i.groupId,e.updateItem(n,i))})),n.destroy(),delete this.customGroup[t];var a=e.get("groups");if(a.length>0){var s=a.filter((function(e){return e.id!==t}));e.set("groups",s)}for(var u=null,c=null,h=0;h<a.length;h++){var f=a[h];if(t===f.id){u=f.parentId,c=f;break}}c&&delete c.parentId,delete i[t],u&&(i[u]=i[u].filter((function(t){return!o.includes(t)})))}},t.prototype.updateGroup=function(t,e,r){var n=this.graph,i=n.get("groupType");this.updateItemInGroup(t,e,r);for(var o=n.save().groups,a=null,s=null,u=0;u<o.length;u++){var c=o[u];if(t===c.id){a=c.parentId,s=c;break}}if(a){var h=this.getDeletageGroupById(a).nodeGroup,f=h.get("keyShape");this.setGroupStyle(f,"default");var l=f.getBBox(),d=l.minX,p=l.minY,g=l.maxX,v=l.maxY,y=this.getDeletageGroupById(t).nodeGroup.get("keyShape").getBBox(),m=y.x,b=y.y;if(!(m<g&&m>d&&b<v&&b>p)){delete s.parentId;var x=n.get("groupNodes"),w=x[t],M=x[a];x[a]=M.filter((function(t){return-1===w.indexOf(t)}));var S=this.calculationGroupPosition(x[a]),_=S.x,k=S.y,O=S.width,E=S.height,j=this.getGroupPadding(a),C=h.find((function(t){return"group-title"===t.get("className")})),A=0,P=0;if("circle"===i){var I=O>E?O/2:E/2,T=_,N=k;f.attr({r:I+j,x:T,y:N}),A=T,P=N-f.attr("r")}else if("rect"===i){var D=j*this.styles.default.disCoefficient;f.attr({x:_-D,y:k-D}),A=_-D+15,P=k-D+15}if(C){var B=s.title,R=0,L=0;B&&(R=B.offsetX,L=B.offsetY),C.attr({x:A+R,y:P+L})}}}},t.prototype.updateItemInGroup=function(t,e,r){var n=this,i=this.graph,o=i.get("groupType"),a=i.get("groupNodes"),s=a[t],u=this.getDeletageGroupById(t).nodeGroup.getBBox(),c=[];s.forEach((function(t,r){var o=i.findById(t),a=o.getModel(),s=a.groupId;s&&!c.includes(s)&&c.push(s),n.nodePoint[r]||(n.nodePoint[r]={x:a.x,y:a.y});var h=e.x-u.x+n.nodePoint[r].x,f=e.y-u.y+n.nodePoint[r].y;n.nodePoint[r]={x:h,y:f},i.updateItem(o,{x:h,y:f})})),c.includes(t)||c.push(t),c.forEach((function(t){var r=n.getDeletageGroupById(t).nodeGroup,i=r.get("keyShape"),s=a[t].filter((function(t){return-1===t.indexOf("custom-node")})),u=n.calculationGroupPosition(s,e),c=u.x,h=u.y,f=u.width,l=u.height,d=0,p=0;if("circle"===o){var g=(f+2*c)/2,v=(l+2*h)/2;i.attr({x:g,y:v}),d=g,p=v-i.attr("r")}else if("rect"===o){var y=r.get("hasHidden"),m={},b=n.getGroupPadding(t)*n.styles.default.disCoefficient;d=c-b+15,p=h-b+15,y?(m={x:c-b,y:h-b},p+=10):m={x:c-b,y:h-b,width:f+2*b,height:l+2*b},i.attr(m)}n.updateGroupTitle(r,t,d,p)}))},t.prototype.updateGroupTitle=function(t,e,r,n){var i=this.graph,o=t.find((function(t){return"group-title"===t.get("className")}));if(o){var a=null,s=i.get("groups").filter((function(t){return t.id===e}));s&&s.length>0&&(a=s[0].title);var u=0,c=0;a&&(u=a.offsetX||0,c=a.offsetY||0),o.attr({x:r+u,y:n+c})}},t.prototype.dynamicChangeGroupSize=function(t,e,r){var n=t.item.getModel().groupId,i=this.graph,o=i.get("groupType"),a=i.get("groupNodes"),s=a[n];if(0===s.length){delete a[n];var u=i.get("groups");i.set("groups",u.filter((function(t){return t.id!==n}))),e.remove()}else{var c=this.calculationGroupPosition(s),h=c.x,f=c.y,l=c.width,d=c.height,p=this.getGroupPadding(n),g=0,v=0;if("circle"===o){var y=l>d?l/2:d/2,m=(l+2*h)/2,b=(d+2*f)/2;r.attr({r:y+p,x:m,y:b}),g=m,v=b-r.attr("r")}else if("rect"===o){var x=p*this.styles.default.disCoefficient;r.attr({x:h-x,y:f-x,width:l+2*x,height:d+2*x}),g=h-x+15,v=f-x+15}this.updateGroupTitle(e,n,g,v)}this.setGroupStyle(r,"default")},t.prototype.resetNodePoint=function(){this.nodePoint.length=0},t.prototype.destroy=function(){this.graph=null,this.styles={},this.customGroup={},this.delegateInGroup={},this.resetNodePoint(),this.destroyed=!0},t}(),Oo=function(t){var e={};return t.getNodes().forEach((function(t){e[t.getID()]={degree:0,inDegree:0,outDegree:0}})),t.getEdges().forEach((function(t){e[t.getSource().getID()].degree++,e[t.getSource().getID()].outDegree++,e[t.getTarget().getID()].degree++,e[t.getTarget().getID()].inDegree++})),e},Eo=function(){function t(e){this.compare=e||t.defaultCompareFunction}return t.defaultCompareFunction=function(t,e){return t===e?0:t<e?-1:1},t.prototype.equal=function(t,e){return 0===this.compare(t,e)},t.prototype.lessThan=function(t,e){return this.compare(t,e)<0},t.prototype.greaterThan=function(t,e){return this.compare(t,e)>0},t.prototype.lessThanOrEqual=function(t,e){return this.lessThan(t,e)||this.equal(t,e)},t.prototype.greaterThanOrEqual=function(t,e){return this.greaterThan(t,e)||this.equal(t,e)},t.prototype.reverse=function(){var t=this.compare;this.compare=function(e,r){return t(r,e)}},t}(),jo=function(){function t(t,e){void 0===e&&(e=null),this.value=t,this.next=e}return t.prototype.toString=function(t){return t?t(this.value):""+this.value},t}(),Co=function(){function t(t){void 0===t&&(t=null),this.head=null,this.tail=null,this.compare=new Eo(t)}return t.prototype.prepend=function(t){var e=new jo(t,this.head);return this.head=e,this.tail||(this.tail=e),this},t.prototype.append=function(t){var e=new jo(t);return this.head?(this.tail.next=e,this.tail=e,this):(this.head=e,this.tail=e,this)},t.prototype.delete=function(t){if(!this.head)return null;for(var e=null;this.head&&this.compare.equal(this.head.value,t);)e=this.head,this.head=this.head.next;var r=this.head;if(null!==r)for(;r.next;)this.compare.equal(r.next.value,t)?(e=r.next,r.next=r.next.next):r=r.next;return this.compare.equal(this.tail.value,t)&&(this.tail=r),e},t.prototype.find=function(t){var e=t.value,r=void 0===e?void 0:e,n=t.callback,i=void 0===n?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(i&&i(o.value))return o;if(void 0!==r&&this.compare.equal(o.value,r))return o;o=o.next}return null},t.prototype.deleteTail=function(){var t=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,t;for(var e=this.head;e.next;)e.next.next?e=e.next:e.next=null;return this.tail=e,t},t.prototype.deleteHead=function(){if(!this.head)return null;var t=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),t},t.prototype.fromArray=function(t){var e=this;return t.forEach((function(t){return e.append(t)})),this},t.prototype.toArray=function(){for(var t=[],e=this.head;e;)t.push(e),e=e.next;return t},t.prototype.reverse=function(){for(var t=this.head,e=null,r=null;t;)r=t.next,t.next=e,e=t,t=r;this.tail=this.head,this.head=e},t.prototype.toString=function(t){return void 0===t&&(t=void 0),this.toArray().map((function(e){return e.toString(t)})).toString()},t}(),Ao=function(){function t(t){void 0===t&&(t=10),this.linkedList=new Co,this.maxStep=t}return Object.defineProperty(t.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},t.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},t.prototype.push=function(t){this.linkedList.prepend(t),this.length>this.maxStep&&this.linkedList.deleteTail()},t.prototype.pop=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toArray=function(){return this.linkedList.toArray().map((function(t){return t.value}))},t.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},t}(),Po=function(t,e){var r=t.getNodes(),n=t.getEdges(),i=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach((function(t,e){o[t.getID()]=e;i.push([])})),n&&n.forEach((function(t){var r=t.getModel(),n=r.source,a=r.target,s=o[n],u=o[a];i[s][u]=1,e||(i[u][s]=1)})),i},Io=function(t,e){var r=t.get("adjMatrix");r||(r=Po(t,e));for(var n=[],i=r.length,o=0;o<i;o+=1){n[o]=[];for(var a=0;a<i;a+=1)o===a?n[o][a]=0:0!==r[o][a]&&r[o][a]?n[o][a]=r[o][a]:n[o][a]=1/0}for(var s=0;s<i;s+=1)for(o=0;o<i;o+=1)for(a=0;a<i;a+=1)n[o][a]>n[o][s]+n[s][a]&&(n[o][a]=n[o][s]+n[s][a]);return n},To=function(t,e,r){return(t.y-r.y)*(e.x-r.x)-(t.x-r.x)*(e.y-r.y)},No=function(t){var e=t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}}));e.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x}));for(var r=[],n=0;n<e.length;n++){for(;r.length>=2&&To(r[r.length-2],r[r.length-1],e[n])<=0;)r.pop();r.push(e[n])}var i=[];for(n=e.length-1;n>=0;n--){for(;i.length>=2&&To(i[i.length-2],i[i.length-1],e[n])<=0;)i.pop();i.push(e[n])}return i.pop(),r.pop(),r.concat(i)},Do={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Bo(t,e,r){var n=!1,i=function(t,r){return e.cells[t+r*e.width]},o=function(t,e){var n=0;return i(t-1,e-1)>=r&&(n+=1),i(t,e-1)>r&&(n+=2),i(t-1,e)>r&&(n+=4),i(t,e)>r&&(n+=8),n},a=function(r,n){for(var i,a,s=r,u=n,c=0;c<e.width*e.height;c++){if(i=s,a=u,t.findIndex((function(t){return t.x===s&&t.y===u}))>-1){if(t[0].x===s&&t[0].y===u)return!0}else t.push({x:s,y:u});var h=o(s,u);switch(h){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:s++;break;case 12:case 14:case 4:s--;break;case 6:0===i&&(-1===a?s-=1:s+=1);break;case 1:case 13:case 5:u--;break;case 9:1===i&&(0===a?u-=1:u+=1);break;case 10:case 8:case 11:u++;break;default:return console.warn("Marching squares invalid state: "+h),!0}}};this.march=function(){for(var t=0;t<e.width&&!n;t+=1)for(var s=0;s<e.height&&!n;s+=1)i(t,s)>r&&15!==o(t,s)&&(n=a(t,s));return n}}var Ro=function(t,e){var r=Number.POSITIVE_INFINITY,n=null;return t.forEach((function(t){var i=ae(t,e);i>=0&&i<r&&(n=t,r=i)})),n};function Lo(t,e,r,n,i){var o=function(t,e,r){var n=null,i=Number.POSITIVE_INFINITY;return e.forEach((function(e){var o={x:t.getModel().x,y:t.getModel().y},a={x:e.getModel().x,y:e.getModel().y},s=ue(o,a),u=new re(o.x,o.y,a.x,a.y),c=r.reduce((function(t,e){return ae(e,u)>0?t+1:t}),0);s*Math.pow(c+1,2)<i&&(n=e,i=s*Math.pow(c+1,2))})),n}(t,r,e);if(null===o)return[];return function(t){for(var r=[];t.length>0;){var n=t.pop();if(0===t.length){r.push(n);break}var i=t.pop(),o=new re(n.x1,n.y1,i.x2,i.y2);Ro(e,o)?(r.push(n),t.push(i)):t.push(o)}return r}(function(t,e,r,n){var i=[],o=[];o.push(t);for(var a=!0,s=0,u=function(t,e){var r=!1;return e.forEach((function(e){r||(he(t,{x:e.x1,y:e.y1})||he(t,{x:e.x2,y:e.y2}))&&(r=!0)})),r},c=function(t,e){for(var r=0,n=e;r<n.length;r++){var i=n[r].getBBox(),o=[[i.x,i.y],[i.x+i.width,i.y],[i.x,i.y+i.height],[i.x+i.width,i.y+i.height]];if(Jt(o,t.x,t.y))return!0}return!1};a&&s<r;){a=!1;for(var h=function(){var t=o.pop(),r=Ro(e,t);if(r){var h=oe(r,t),f=h[0];if(2===h[1]){var l=function(s){for(var h=n,l=Yo(r,h,f,s),d=u(l,o)||u(l,i),p=c(l,e);!d&&p&&h>=1;)l=Yo(r,h/=1.5,f,s),d=u(l,o)||u(l,i),p=c(l,e);!l||d||s&&p||(o.push(new re(t.x1,t.y1,l.x,l.y)),o.push(new re(l.x,l.y,t.x2,t.y2)),a=!0)};l(!0),a||l(!1)}}a||i.push(t),s+=1};!a&&o.length;)h()}for(;o.length;)i.push(o.pop());return i}(new re(t.getModel().x,t.getModel().y,o.getModel().x,o.getModel().y),e,n,i))}var zo=function(t,e,r){var n=Object.assign(Do,r),i=se(t.map((function(t){return{x:t.getModel().x,y:t.getModel().y}})));t=t.sort((function(t,e){return ue({x:t.getModel().x,y:t.getModel().y},i)-ue({x:e.getModel().x,y:e.getModel().y},i)}));var o=[],a=[];t.forEach((function(t){Lo(t,e,o,n.maxRoutingIterations,n.morphBuffer).forEach((function(t){a.push(t)})),o.push(t)}));for(var s,u,c,h,f,l=function(t,e,r){var n={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},i=[];t.forEach((function(t){i.push(t.getBBox())})),e.forEach((function(t){i.push(t.getBBox())}));for(var o=0,a=i;o<a.length;o++){var s=a[o];n.minX=(s.minX<n.minX?s.minX:n.minX)-r,n.minY=(s.minY<n.minY?s.minY:n.minY)-r,n.maxX=(s.maxX>n.maxX?s.maxX:n.maxX)+r,n.maxY=(s.maxY>n.maxY?s.maxY:n.maxY)+r}return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.x=n.minX,n.y=n.minY,n}(t,a,n.nodeR0),d=(s=l.width,u=l.height,c=n.pixelGroupSize,h=Math.ceil(s/c),f=Math.ceil(u/c),{cells:new Float32Array(Math.max(0,h*f)).fill(0),width:h,height:f}),p=[],g=[],v=0;v<n.maxMarchingIterations;v++)if(Fo(t,e,a,l,d,n),g=[],new Bo(p=[],d,n.threshold).march()){var y=p.map((function(t){return{x:Math.round(t.x*n.pixelGroupSize+l.minX),y:Math.round(t.y*n.pixelGroupSize+l.minY)}}));if(y){var m=y.length;if(n.skip>1)for(m=Math.floor(y.length/n.skip);m<3&&n.skip>1;)n.skip-=1,m=Math.floor(y.length/n.skip);for(var b=0,x=0;x<m;x+=1,b+=n.skip)g.push({x:y[b].x,y:y[b].y})}if(g&&function(){for(var e=0,r=t;e<r.length;e++){var n=r[e],i=g.map((function(t){return[t.x,t.y]}));if(!Jt(i,n.getBBox().centerX,n.getBBox().centerY))return!1}return!0}())return g;if(n.threshold*=.9,v<=.5*n.maxMarchingIterations)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else{if(!(0!==n.nonMemberInfluenceFactor&&e.length>0))break;n.nonMemberInfluenceFactor*=.8}}return g};function Fo(t,e,r,n,i,o){function a(t,e){var r=Math.floor((t-e)/o.pixelGroupSize);return r<0?0:r}function s(t,e){return t*o.pixelGroupSize+e}var u=(o.nodeR0-o.nodeR1)*(o.nodeR0-o.nodeR1),c=(o.edgeR0-o.edgeR1)*(o.edgeR0-o.edgeR1),h=function(t,e){return[Math.min(a(t.minX,e+n.minX),i.width),Math.min(a(t.minY,e+n.minY),i.height),Math.min(a(t.maxX,-e+n.minX),i.width),Math.min(a(t.maxY,-e+n.minY),i.height)]},f=function(t,e){for(var r=t.getBBox(),a=h(r,o.nodeR1),u=a[0],c=a[1],f=a[2],l=a[3],d=c;d<l;d+=1)for(var p=u;p<f;p+=1)if(!(e<0&&i[p+d*i.width]<=0)){var g=s(p,n.minX),v=s(d,n.minY),y=fe({x:g,y:v},{x:r.minX,y:r.minY,width:r.width,height:r.height});if(y<Math.pow(o.nodeR1,2)){var m=Math.sqrt(y)-o.nodeR1;i.cells[p+d*i.width]+=e*m*m}}};o.nodeInfluenceFactor&&t.forEach((function(t){f(t,o.nodeInfluenceFactor/u)})),o.edgeInfluenceFactor&&r.forEach((function(t){!function(t,e){for(var r=t.getBBox(),a=h(r,o.edgeR1),u=a[0],c=a[1],f=a[2],l=a[3],d=c;d<l;d+=1)for(var p=u;p<f;p+=1)if(!(e<0&&i.cells[p+d*i.width]<=0)){var g=s(p,n.minX),v=s(d,n.minY),y=ce({x:g,y:v},t);if(y<Math.pow(o.edgeR1,2)){var m=Math.sqrt(y)-o.edgeR1;i.cells[p+d*i.width]+=e*m*m}}}(t,o.edgeInfluenceFactor/c)})),o.negativeNodeInfluenceFactor&&e.forEach((function(t){f(t,o.negativeNodeInfluenceFactor/u)}))}function Yo(t,e,r,n){var i=t.getBBox(),o=r[0],a=r[1],s=r[2],u=r[3],c={topLeft:{x:i.minX-e,y:i.minY-e},topRight:{x:i.maxX+e,y:i.minY-e},bottomLeft:{x:i.minX-e,y:i.maxY+e},bottomRight:{x:i.maxX+e,y:i.maxY+e}},h=i.height*i.width;function f(t,e){return i.width*(.5*(t.y-i.minY+(e.y-i.minY)))}if(a)return o?n?c.topLeft:c.bottomRight:s?n?c.bottomLeft:c.topRight:f(a,u)<.5*h?a.y>u.y?n?c.topLeft:c.bottomRight:n?c.topRight:c.bottomLeft:a.y<u.y?n?c.bottomLeft:c.topRight:n?c.bottomRight:c.topLeft;if(u){if(o)return n?c.topRight:c.bottomLeft;if(s)return n?c.bottomRight:c.topLeft}return f(o,s)<.5*h?o.x>s.x?n?c.topLeft:c.bottomRight:n?c.bottomLeft:c.topRight:o.x<s.x?n?c.topRight:c.bottomLeft:n?c.bottomRight:c.topLeft}var Go=function(){function t(t,e){this.cfg=Object(ht.deepMix)(this.getDefaultCfg(),e),this.graph=t,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map((function(e){return Object(ht.isString)(e)?t.findById(e):e})),this.nonMembers=this.cfg.nonMembers.map((function(e){return Object(ht.isString)(e)?t.findById(e):e})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return t.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},t.prototype.setPadding=function(){var t=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+t:10+t,this.cfg.bubbleCfg={nodeR0:this.padding-t,nodeR1:this.padding-t,morphBuffer:this.padding-t}},t.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),"round-convex"!==this.type&&"smooth-convex"!==this.type&&"bubble"!==this.type&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},t.prototype.calcPath=function(t,e){var r,n,i;switch(this.type){case"round-convex":n=ve(i=Oe((r=No(t)).map((function(t){return[t.x,t.y]})),this.padding));break;case"smooth-convex":i=Ee((r=No(t)).map((function(t){return[t.x,t.y]})),this.padding),n=r.length>=2&&Me(i);break;case"bubble":n=(r=zo(t,e,this.cfg.bubbleCfg)).length>=2&&Me(r)}return n},t.prototype.render=function(){this.group.addShape("path",{attrs:Object(k.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id}),this.group.toBack()},t.prototype.addMember=function(t){if(t){Object(ht.isString)(t)&&(t=this.graph.findById(t)),this.members.push(t);var e=this.nonMembers.indexOf(t);return e>-1&&this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.addNonMember=function(t){if(t){Object(ht.isString)(t)&&(t=this.graph.findById(t)),this.nonMembers.push(t);var e=this.members.indexOf(t);return e>-1&&this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0}},t.prototype.removeMember=function(t){if(t){Object(ht.isString)(t)&&(t=this.graph.findById(t));var e=this.members.indexOf(t);return e>-1&&(this.members.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.removeNonMember=function(t){if(t){Object(ht.isString)(t)&&(t=this.graph.findById(t));var e=this.nonMembers.indexOf(t);return e>-1&&(this.nonMembers.splice(e,1),this.updateData(this.members,this.nonMembers),!0)}},t.prototype.updateData=function(t,e){var r=this;this.group.findById(this.id).remove(),t&&(this.members=t.map((function(t){return Object(ht.isString)(t)?r.graph.findById(t):t}))),e&&(this.nonMembers=e.map((function(t){return Object(ht.isString)(t)?r.graph.findById(t):t}))),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.updateStyle=function(t){this.group.findById(this.id).attr(Object(k.__assign)({},t))},t.prototype.updateCfg=function(t){var e=this;this.cfg=Object(ht.deepMix)(this.cfg,t),this.id=this.cfg.id,this.group=this.cfg.group,t.members&&(this.members=this.cfg.members.map((function(t){return Object(ht.isString)(t)?e.graph.findById(t):t}))),t.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map((function(t){return Object(ht.isString)(t)?e.graph.findById(t):t}))),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},t.prototype.contain=function(t){var e,r,n=this,i=(e=Object(ht.isString)(t)?this.graph.findById(t):t).getKeyShape();if("path"===e.get("type"))r=we(i.attr("path"));else{var o=i.getCanvasBBox();r=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return r=r.map((function(t){var e=n.graph.getPointByCanvas(t[0],t[1]);return[e.x,e.y]})),ee(r,we(this.path))},t.prototype.destroy=function(){this.group.remove(),this.cfg=null},t}(),qo=function(t){function e(e){var r=t.call(this)||this;return r.cfg=Object(ht.deepMix)(r.getDefaultCfg(),e),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Ao(r.cfg.maxStep),r.redoStack=new Ao(r.cfg.maxStep)),r}return Object(k.__extends)(e,t),e.prototype.init=function(){this.initCanvas();var t=new We(this),e=new qe(this),r=new Ge(this),n=new Fr(this),i=new xo(this),o=new So(this),a=new ko(this);this.set({eventController:t,viewController:e,modeController:r,itemController:n,layoutController:i,stateController:o,customGroupControll:a}),this.initPlugin()},e.prototype.initCanvas=function(){var t=this.get("container");if(Object(ht.isString)(t)&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var e,r=this.get("width"),n=this.get("height");if("svg"===this.get("renderer"))e=new Le.a({container:t,width:r,height:n});else{var i={container:t,width:r,height:n},o=this.get("pixelRatio");o&&(i.pixelRatio=o),e=new Be.a(i)}this.set("canvas",e),this.initGroups()},e.prototype.initPlugin=function(){var t=this;Object(ht.each)(t.get("plugins"),(function(e){!e.destroyed&&e.initPlugin&&e.initPlugin(t)}))},e.prototype.initGroups=function(){var t=this.get("canvas"),e=this.get("canvas").get("el").id,r=t.addGroup({id:e+"-root",className:Q.rootContainerClassName});if(this.get("groupByTypes")){var n=r.addGroup({id:e+"-edge",className:Q.edgeContainerClassName}),i=r.addGroup({id:e+"-node",className:Q.nodeContainerClassName}),o=r.addGroup({id:e+"-combo",className:Q.comboContainerClassName}),a=r.addGroup({id:e+"-group",className:Q.customGroupContainerClassName});a.toBack(),o.toBack(),this.set({nodeGroup:i,edgeGroup:n,customGroup:a,comboGroup:o})}var s=r.addGroup({id:e+"-delegate",className:Q.delegateContainerClassName});this.set({delegateGroup:s}),this.set("group",r)},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.2,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,groupType:"circle",groupBBoxs:{},groupNodes:{},groups:[],groupStyle:{},enabledStack:!1,maxStep:10,tooltips:[]}},e.prototype.set=function(t,e){return Object(ht.isPlainObject)(t)?this.cfg=Object(k.__assign)(Object(k.__assign)({},this.cfg),t):this.cfg[t]=e,this},e.prototype.get=function(t){return this.cfg[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,e){Object(ht.isString)(t)&&(t=this.findById(t));var r=this.get("itemController");e||(e=t.get("states")),r.clearItemStates(t,e),this.get("stateController").updateStates(t,e,!1)},e.prototype.node=function(t){"function"==typeof t&&this.set("nodeMapper",t)},e.prototype.edge=function(t){"function"==typeof t&&this.set("edgeMapper",t)},e.prototype.combo=function(t){"function"==typeof t&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,e){var r,n=this.get(t+"s");return Object(ht.each)(n,(function(t,n){if(e(t,n))return r=t})),r},e.prototype.findAll=function(t,e){var r=[];return Object(ht.each)(this.get(t+"s"),(function(t,n){e(t,n)&&r.push(t)})),r},e.prototype.findAllByState=function(t,e){return this.findAll(t,(function(t){return t.hasState(e)}))},e.prototype.translate=function(t,e){var r=this.get("group"),n=Object(ht.clone)(r.getMatrix());n||(n=[1,0,0,0,1,0,0,0,1]),ze.mat3.translate(n,n,[t,e]),r.setMatrix(n),this.emit("viewportchange",{action:"translate",matrix:r.getMatrix()}),this.autoPaint()},e.prototype.moveTo=function(t,e){var r=this.get("group");Wt(r,{x:t,y:e}),this.emit("viewportchange",{action:"move",matrix:r.getMatrix()})},e.prototype.fitView=function(t){t&&this.set("fitViewPadding",t),this.get("viewController").fitView(),this.autoPaint()},e.prototype.fitCenter=function(){this.get("viewController").fitCenter(),this.autoPaint()},e.prototype.addBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!0),this},e.prototype.removeBehaviors=function(t,e){return this.get("modeController").manipulateBehaviors(t,e,!1),this},e.prototype.zoom=function(t,e){var r=this.get("group"),n=Object(ht.clone)(r.getMatrix()),i=this.get("minZoom"),o=this.get("maxZoom");n||(n=[1,0,0,0,1,0,0,0,1]),e?(ze.mat3.translate(n,n,[-e.x,-e.y]),ze.mat3.scale(n,n,[t,t]),ze.mat3.translate(n,n,[e.x,e.y])):ze.mat3.scale(n,n,[t,t]),i&&n[0]<i||o&&n[0]>o||(r.setMatrix(n),this.emit("viewportchange",{action:"zoom",matrix:n}),this.autoPaint())},e.prototype.zoomTo=function(t,e){var r=t/this.getZoom();this.zoom(r,e)},e.prototype.focusItem=function(t,e,r){var n=this.get("viewController"),i=!1;e?i=!0:void 0===e&&(i=this.get("animate"));var o={};r?o=r:void 0===r&&(o=this.get("animateCfg")),n.focus(t,i,o),this.autoPaint()},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,e){return this.get("viewController").getPointByClient(t,e)},e.prototype.getClientByPoint=function(t,e){return this.get("viewController").getClientByPoint(t,e)},e.prototype.getPointByCanvas=function(t,e){return this.get("viewController").getPointByCanvas(t,e)},e.prototype.getCanvasByPoint=function(t,e){return this.get("viewController").getCanvasByPoint(t,e)},e.prototype.showItem=function(t,e){void 0===e&&(e=!0);var r=this.get("itemController").changeItemVisibility(t,!0);if(e&&this.get("enabledStack")){var n=r.getID(),i={},o={};switch(r.getType()){case"node":i.nodes=[{id:n,visible:!1}],o.nodes=[{id:n,visible:!0}];break;case"edge":i.nodes=[{id:n,visible:!1}],o.edges=[{id:n,visible:!0}];break;case"combo":i.nodes=[{id:n,visible:!1}],o.combos=[{id:n,visible:!0}]}this.pushStack("visible",{before:i,after:o})}},e.prototype.hideItem=function(t,e){void 0===e&&(e=!0);var r=this.get("itemController").changeItemVisibility(t,!1);if(e&&this.get("enabledStack")){var n=r.getID(),i={},o={};switch(r.getType()){case"node":i.nodes=[{id:n,visible:!0}],o.nodes=[{id:n,visible:!1}];break;case"edge":i.nodes=[{id:n,visible:!0}],o.edges=[{id:n,visible:!1}];break;case"combo":i.nodes=[{id:n,visible:!0}],o.combos=[{id:n,visible:!1}]}this.pushStack("visible",{before:i,after:o})}},e.prototype.refreshItem=function(t){this.get("itemController").refreshItem(t)},e.prototype.setAutoPaint=function(t){this.set("autoPaint",t),this.get("canvas").set("autoDraw",t)},e.prototype.remove=function(t,e){void 0===e&&(e=!0),this.removeItem(t,e)},e.prototype.removeItem=function(t,e){void 0===e&&(e=!0);var r=t;if(Object(ht.isString)(t)&&(r=this.findById(t)),!r&&Object(ht.isString)(t))console.warn("The item to be removed does not exist!"),this.get("customGroupControll").remove(t);else if(r){var n="";if(r.getType&&(n=r.getType()),e&&this.get("enabledStack")){var i=Object(k.__assign)(Object(k.__assign)({},r.getModel()),{itemType:n}),o={};switch(n){case"node":o.nodes=[i],o.edges=[];for(var a=r.getEdges(),s=a.length-1;s>=0;s--)o.edges.push(Object(k.__assign)(Object(k.__assign)({},a[s].getModel()),{itemType:"edge"}));break;case"edge":o.edges=[i];break;case"combo":o.combos=[i]}this.pushStack("delete",{before:o,after:{}})}if(this.get("itemController").removeItem(t),"combo"===n){var u=xr(this.get("comboTrees"));this.set("comboTrees",u)}}},e.prototype.addItem=function(t,e,r,n){void 0===r&&(r=!0),void 0===n&&(n=!0);var i=this.get("comboSorted");this.set("comboSorted",i&&!n);var o=this.get("itemController");if("group"===t){var a=e.groupId,s=e.nodes,u=e.type,c=e.zIndex,h=e.title,f=h;return Object(ht.isString)(h)&&(f={text:h}),this.get("customGroupControll").create(a,s,u,c,!0,f)}if(!e.id||!this.findById(e.id)){var l,d=this.get("comboTrees");if(d||(d=[]),"combo"===t){var p=this.get("itemMap"),g=!1;if(d.forEach((function(r){g||gr(r,(function(r){if(e.parentId===r.id){g=!0;var n=Object(k.__assign)({id:e.id,depth:r.depth+2},e);r.children?r.children.push(n):r.children=[n],e.depth=n.depth,l=o.addItem(t,e)}var i=p[r.id];return g&&i&&i.getType&&"combo"===i.getType()&&o.updateCombo(i,r.children),!0}))})),!g){var v=Object(k.__assign)({id:e.id,depth:0},e);e.depth=v.depth,d.push(v),l=o.addItem(t,e)}this.set("comboTrees",d)}else if("node"===t&&Object(ht.isString)(e.comboId)&&d){var y;if((y=this.findById(e.comboId))&&y.getType&&"combo"!==y.getType())return void console.warn("'"+e.comboId+"' is a not id of a combo in the graph, the node will be added without combo.");l=o.addItem(t,e);var m=this.get("itemMap"),b=!1,x=!1;(d||[]).forEach((function(t){x||b||gr(t,(function(t){if(t.id===e.id)return x=!0,!1;if(e.comboId===t.id&&!x){b=!0;var r=Object(ht.clone)(e);r.itemType="node",t.children?t.children.push(r):t.children=[r],e.depth=t.depth+1}return b&&m[t.id].getType&&"combo"===m[t.id].getType()&&o.updateCombo(m[t.id],t.children),!0}))}))}else l=o.addItem(t,e);if("node"===t&&e.comboId||"combo"===t&&e.parentId)(y=this.findById(e.comboId||e.parentId))&&y.addChild(l);var w=this.get("combos");if(w&&w.length>0&&this.sortCombos(),this.autoPaint(),r&&this.get("enabledStack")){var M=Object(k.__assign)(Object(k.__assign)({},l.getModel()),{itemType:t}),S={};switch(t){case"node":S.nodes=[M];break;case"edge":S.edges=[M];break;case"combo":S.combos=[M]}this.pushStack("add",{before:{},after:S})}return l}console.warn("This item exists already. Be sure the id %c"+e.id+"%c is unique.","font-size: 20px; color: red;","")},e.prototype.add=function(t,e,r,n){return void 0===r&&(r=!0),void 0===n&&(n=!0),this.addItem(t,e,r,n)},e.prototype.updateItem=function(t,e,r){var n=this;void 0===r&&(r=!0);var i,o=this.get("itemController");i=Object(ht.isString)(t)?this.findById(t):t;var a=Object(ht.clone)(i.getModel()),s="";i.getType&&(s=i.getType());var u=Object(k.__spreadArrays)(i.getStates());if("combo"===s&&Object(ht.each)(u,(function(t){return n.setItemState(i,t,!1)})),o.updateItem(i,e),"combo"===s&&Object(ht.each)(u,(function(t){return n.setItemState(i,t,!0)})),r&&this.get("enabledStack")){var c={nodes:[],edges:[],combos:[]},h={nodes:[],edges:[],combos:[]},f=Object(k.__assign)({id:a.id},e);switch(s){case"node":c.nodes.push(a),h.nodes.push(f);break;case"edge":c.edges.push(a),h.edges.push(f);break;case"combo":c.combos.push(a),h.combos.push(f)}"node"===s&&c.nodes.push(a),this.pushStack("update",{before:c,after:h})}},e.prototype.update=function(t,e,r){void 0===r&&(r=!0),this.updateItem(t,e,r)},e.prototype.setItemState=function(t,e,r){Object(ht.isString)(t)&&(t=this.findById(t)),this.get("itemController").setItemState(t,e,r);var n=this.get("stateController");Object(ht.isString)(r)?n.updateState(t,e+":"+r,!0):n.updateState(t,e,r)},e.prototype.priorityState=function(t,e){this.get("itemController").priorityState(t,e)},e.prototype.data=function(t){this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var e=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!e)throw new Error("data must be defined first");var r=e.nodes,n=void 0===r?[]:r,i=e.edges,o=void 0===i?[]:i,a=e.combos,s=void 0===a?[]:a;if(this.clear(),this.emit("beforerender"),Object(ht.each)(n,(function(e){t.add("node",e,!1,!1)})),s&&0!==s.length){var u=br(s,n);this.set("comboTrees",u),t.addCombos(s)}Object(ht.each)(o,(function(e){t.add("edge",e,!1,!1)}));var c=t.get("animate");function h(){t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",c)}((t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1),t.get("layoutController").layout(h)||h(),this.get("groupByTypes"))||(s&&0!==s.length?this.sortCombos():e.nodes&&e.edges&&e.nodes.length<e.edges.length?this.getNodes().forEach((function(t){t.toFront()})):this.getEdges().forEach((function(t){t.toBack()})));if(e.nodes&&e.nodes.filter((function(t){return t.groupId})).length>0){var f=t.get("groupType");this.renderCustomGroup(e,f)}this.get("enabledStack")&&this.pushStack("render")},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,e,r){var n,i=this,o=this.get("itemMap");Object(ht.each)(r,(function(r){if(n=o[r.id]){if(i.get("animate")&&"node"===t){var a=n.getContainer().getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]),n.set("originAttrs",{x:a[6],y:a[7]})}i.updateItem(n,r,!1)}else n=i.addItem(t,r,!1);e[t+"s"].push(n)}))},e.prototype.changeData=function(t,e){void 0===e&&(e=!0);var r=this;if(!t)return this;e&&this.get("enabledStack")&&this.pushStack("changedata",{before:r.save(),after:t}),this.set("comboSorted",!1),this.getNodes().map((function(t){return r.clearItemStates(t)})),this.getEdges().map((function(t){return r.clearItemStates(t)}));var n=this.get("canvas"),i=n.get("localRefresh");n.set("localRefresh",!1),r.get("data")||(r.data(t),r.render());var o=this.get("itemMap"),a={nodes:[],edges:[]},s=t.combos;if(s){var u=br(s,t.nodes);this.set("comboTrees",u)}this.diffItems("node",a,t.nodes),Object(ht.each)(o,(function(t,e){o[e].getModel().depth=0,t.getType&&"edge"===t.getType()||(t.getType&&"combo"===t.getType()?(delete o[e],t.destroy()):a.nodes.indexOf(t)<0&&(delete o[e],r.remove(t,!1)))}));for(var c=this.getCombos(),h=c.length-1;h>=0;h--)c[h].destroyed&&c.splice(h,1);s&&(r.addCombos(s),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",a,t.edges),Object(ht.each)(o,(function(t,e){(!t.getType||"node"!==t.getType()&&"combo"!==t.getType())&&a.edges.indexOf(t)<0&&(delete o[e],r.remove(t,!1))})),this.set({nodes:a.nodes,edges:a.edges});var f=this.get("layoutController");return f.changeData(),r.get("animate")&&!f.getLayoutType()?r.positionsAnimate():r.autoPaint(),setTimeout((function(){n.set("localRefresh",i)}),16),this},e.prototype.addCombos=function(t){var e=this.get("comboTrees");this.get("itemController").addCombos(e,t)},e.prototype.createCombo=function(t,e){var r=this;this.set("comboSorted",!1);var n,i="";if(t){if(Object(ht.isString)(t))i=t,n={id:t};else{if(!(i=t.id))return void console.warn("Create combo failed. Please assign a unique string id for the adding combo.");n=t}var o=e.map((function(t){var e=r.findById(t),n="";e.getType&&(n=e.getType());var o={id:e.getID(),itemType:n};return"combo"===n?o.parentId=i:"node"===n&&(o.comboId=i),o}));n.children=o,this.addItem("combo",n,!1),this.set("comboSorted",!1);var a=this.get("comboTrees");(a||[]).forEach((function(t){gr(t,(function(t){return t.id!==i||(t.itemType="combo",t.children=o,!1)}))})),a&&this.sortCombos()}},e.prototype.uncombo=function(t){var e,r=this,n=t;if(Object(ht.isString)(t)&&(n=this.findById(t)),!n||n.getType&&"combo"!==n.getType())console.warn("The item is not a combo!");else{var i=n.getModel().parentId,o=this.get("comboTrees");o||(o=[]);var a,s=this.get("itemMap"),u=n.get("id"),c=[],h=this.get("combos"),f=this.findById(i);if(o.forEach((function(e){a||gr(e,(function(e){var o;if(e.id===u){a=e,n.getEdges().forEach((function(t){r.removeItem(t,!1)}));var l=h.indexOf(t);h.splice(l,1),delete s[u],n.destroy()}return!i||!a||e.id!==i||(f.removeCombo(n),-1!==(l=(c=e.children).indexOf(a))&&c.splice(l,1),null===(o=a.children)||void 0===o||o.forEach((function(t){var e=r.findById(t.id),n=e.getModel();e.getType&&"combo"===e.getType()?(t.parentId=i,delete t.comboId,n.parentId=i,delete n.comboId):e.getType&&"node"===e.getType()&&(t.comboId=i,n.comboId=i),f.addChild(e),c.push(t)})),!1)}))})),!i&&a){var l=o.indexOf(a);o.splice(l,1),null===(e=a.children)||void 0===e||e.forEach((function(t){t.parentId=void 0,r.findById(t.id).getModel().parentId=void 0,"node"!==t.itemType&&o.push(t)}))}}},e.prototype.updateCombos=function(){var t=this,e=this.get("comboTrees"),r=this.get("itemController"),n=this.get("itemMap");(e||[]).forEach((function(e){gr(e,(function(e){if(!e)return!0;var i=n[e.id];if(i&&i.getType&&"combo"===i.getType()){var o=Object(k.__spreadArrays)(i.getStates());Object(ht.each)(o,(function(e){return t.setItemState(i,e,!1)})),r.updateCombo(i,e.children),Object(ht.each)(o,(function(e){return t.setItemState(i,e,!0)}))}return!0}))})),this.sortCombos()},e.prototype.updateCombo=function(t){var e,r=this,n=t;if(Object(ht.isString)(t)&&(n=this.findById(t)),!n||n.getType&&"combo"!==n.getType())console.warn("The item to be updated is not a combo!");else{e=n.get("id");var i=this.get("comboTrees"),o=this.get("itemController"),a=this.get("itemMap");(i||[]).forEach((function(t){gr(t,(function(t){if(!t)return!0;var n=a[t.id];if(e===t.id&&n&&n.getType&&"combo"===n.getType()){var i=Object(k.__spreadArrays)(n.getStates());Object(ht.each)(i,(function(t){n.getStateStyle(t)&&r.setItemState(n,t,!1)})),o.updateCombo(n,t.children),Object(ht.each)(i,(function(t){n.getStateStyle(t)&&r.setItemState(n,t,!0)})),e&&(e=t.parentId)}return!0}))}))}},e.prototype.updateComboTree=function(t,e){var r;this.set("comboSorted",!1);var n=(r=Object(ht.isString)(t)?this.findById(t):t).getModel(),i=n.comboId||n.parentId;if(e&&r.getType&&"combo"===r.getType()){var o,a=this.get("comboTrees"),s=!0;if((a||[]).forEach((function(t){o||pr(t,(function(t){if(!o)return t.id===r.getID()&&(o=t),!0}))})),pr(o,(function(t){return t.id!==e||(s=!1,!1)})),!s)return void console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!")}if(n.parentId||n.comboId){var u=this.findById(n.parentId||n.comboId);u&&u.removeChild(r)}var c,h="";(r.getType&&(h=r.getType()),"combo"===h?n.parentId=e:"node"===h&&(n.comboId=e),e)&&((c=this.findById(e))&&c.addChild(r));i&&((c=this.findById(i))&&c.removeChild(r));var f=xr(this.get("comboTrees"),n.id,e);this.set("comboTrees",f),this.updateCombos()},e.prototype.renderCustomGroup=function(t,e){var r=this,n=t.groups,i=t.nodes,o=void 0===i?[]:i,a=10;if(n){this.set({groups:n});var s=function(t){var e=Ye()(t.groups,"id"),r=Ye()(t.groups,"parentId"),n={};for(var i in r)if(i){var o=r[i],a=e[i];if(a&&o){var s=Object(k.__spreadArrays)(o,a);n[i]=s}else o&&(n[i]=o)}var u=Object(k.__assign)(Object(k.__assign)({},e),n),c={};for(var h in u)if(h&&"undefined"!==h){o=u[h].map((function(t){return t.id}));c[h]=o}var f={},l=function(e){if(!e||"undefined"===e)return"continue";for(var r=c[e],n=[],i=0,o=r;i<o.length;i++){var a=o[i],s=u[a].map((function(t){return t.id}));n.push.apply(n,s)}var h=t.nodes?t.nodes.filter((function(t){return n.indexOf(t.groupId)>-1||n.indexOf(t.parentId)>-1})).map((function(t){return t.id})):[];f[e]=h};for(var h in c)l(h);return f}(t);Object.keys(s).forEach((function(t){var n=s[t];r.get("customGroupControll").create(t,n,e,a),a--})),this.get("customGroup").sort()}else{var u=o.filter((function(t){return t.groupId})),c=[],h=Object(ht.groupBy)(u,"groupId");Object.keys(h).forEach((function(t){var n=h[t].map((function(t){return t.id}));r.get("customGroupControll").create(t,n,e,a),a--,c.find((function(e){return e.id===t}))||c.push({id:t})})),this.set({groups:c})}},e.prototype.save=function(){var t=[],e=[],r=[];return Object(ht.each)(this.get("nodes"),(function(e){t.push(e.getModel())})),Object(ht.each)(this.get("edges"),(function(t){e.push(t.getModel())})),Object(ht.each)(this.get("combos"),(function(t){r.push(t.getModel())})),{nodes:t,edges:e,combos:r,groups:this.get("groups")}},e.prototype.changeSize=function(t,e){return this.get("viewController").changeSize(t,e),this},e.prototype.refresh=function(){if(this.emit("beforegraphrefresh"),this.get("animate"))this.positionsAnimate();else{var t=this.get("nodes"),e=this.get("edges"),r=this.get("edges");Object(ht.each)(t,(function(t){t.refresh()})),Object(ht.each)(e,(function(t){t.refresh()})),Object(ht.each)(r,(function(t){t.refresh()}))}this.emit("aftergraphrefresh"),this.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if(Object(ht.isString)(t)&&(t=this.findById(t)),t&&(!t.getType||"combo"===t.getType()))return t.getChildren();console.warn("The combo does not exist!")},e.prototype.positionsAnimate=function(){var t=this;t.emit("beforeanimate");var e=t.get("animateCfg"),r=e.onFrame,n=t.getNodes(),i=n.map((function(t){var e=t.getModel();return{id:e.id,x:e.x,y:e.y}}));t.isAnimating()&&t.stopAnimate(),t.get("canvas").animate((function(e){Object(ht.each)(i,(function(n){var i=t.findById(n.id);if(i&&!i.destroyed){var o=i.get("originAttrs"),a=i.get("model");if(!o){var s=i.getContainer().getMatrix();s||(s=[1,0,0,0,1,0,0,0,1]),o={x:s[6],y:s[7]},i.set("originAttrs",o)}if(r){var u=r(i,e,n,o);i.set("model",Object.assign(a,u))}else a.x=o.x+(n.x-o.x)*e,a.y=o.y+(n.y-o.y)*e}})),t.refreshPositions()}),{duration:e.duration,easing:e.easing,callback:function(){Object(ht.each)(n,(function(t){t.set("originAttrs",null)})),e.callback&&e.callback(),t.emit("afteranimate"),t.animating=!1}})},e.prototype.refreshPositions=function(){this.emit("beforegraphrefreshposition");var t,e=this.get("nodes"),r=this.get("edges"),n=this.get("vedges"),i=this.get("combos"),o={};Object(ht.each)(e,(function(e){t=e.getModel();var r=e.get("originAttrs");r&&t.x===r.x&&t.y===r.y||(e.updatePosition({x:t.x,y:t.y}),o[t.id]=!0,t.comboId&&(o[t.comboId]=!0))})),i&&0!==i.length&&this.updateCombos(),Object(ht.each)(r,(function(t){var e=t.getSource().getModel(),r=t.getTarget().getModel();(o[e.id]||o[r.id]||t.getModel().isComboEdge)&&t.refresh()})),Object(ht.each)(n,(function(t){t.refresh()})),this.emit("aftergraphrefreshposition"),this.autoPaint()},e.prototype.stopAnimate=function(){this.get("canvas").stopAnimate()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){return this.get("modeController").getMode()},e.prototype.setMode=function(t){return this.get("modeController").setMode(t),this},e.prototype.clear=function(){return this.get("canvas").clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],groups:[],combos:[],comboTrees:[]}),this.emit("afterrender"),this},e.prototype.toDataURL=function(t,e){var r=this.get("canvas"),n=r.getRenderer(),i=r.get("el");t||(t="image/png");var o="";if("svg"===n){var a=i.cloneNode(!0),s=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),u=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",s);u.replaceChild(a,u.documentElement);var c=(new XMLSerializer).serializeToString(u);o="data:image/svg+xml;charset=utf8,"+encodeURIComponent(c)}else{var h=void 0,f=i.getContext("2d"),l=this.get("width"),d=this.get("height"),p=void 0;if(e){var g=window.devicePixelRatio;h=f.getImageData(0,0,l*g,d*g),p=f.globalCompositeOperation,f.globalCompositeOperation="destination-over",f.fillStyle=e,f.fillRect(0,0,l,d)}o=i.toDataURL(t),e&&(f.clearRect(0,0,l,d),f.putImageData(h,0,0),f.globalCompositeOperation=p)}return o},e.prototype.toFullDataURL=function(t,e,r){var n=this.get("group").getCanvasBBox(),i=n.height,o=n.width,a=this.get("renderer"),s=mt()('<id="virtual-image"></div>'),u=r?r.backgroundColor:void 0,c=r?r.padding:void 0;c?Object(ht.isNumber)(c)&&(c=[c,c,c,c]):c=[0,0,0,0];var h=i+c[0]+c[2],f=o+c[1]+c[3],l={container:s,height:h,width:f,quickHit:!0},d="svg"===a?new Le.a(l):new Be.a(l),p=this.get("group").clone(),g=Object(ht.clone)(p.getMatrix());g||(g=[1,0,0,0,1,0,0,0,1]);var v=(n.maxX+n.minX)/2,y=(n.maxY+n.minY)/2;ze.mat3.translate(g,g,[-v,-y]),ze.mat3.translate(g,g,[o/2+c[3],i/2+c[0]]),p.resetMatrix(),p.setMatrix(g),d.add(p);var m=d.get("el"),b="";e||(e="image/png"),setTimeout((function(){if("svg"===a){var r=m.cloneNode(!0),n=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),i=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",n);i.replaceChild(r,i.documentElement);var o=(new XMLSerializer).serializeToString(i);b="data:image/svg+xml;charset=utf8,"+encodeURIComponent(o)}else{var s=void 0,c=m.getContext("2d"),l=void 0;if(u){var d=window.devicePixelRatio;s=c.getImageData(0,0,f*d,h*d),l=c.globalCompositeOperation,c.globalCompositeOperation="destination-over",c.fillStyle=u,c.fillRect(0,0,f,h)}b=m.toDataURL(e),u&&(c.clearRect(0,0,f,h),c.putImageData(s,0,0),c.globalCompositeOperation=l)}null==t||t(b)}),16)},e.prototype.downloadFullImage=function(t,e,r){var n=this,i=this.get("group").getCanvasBBox(),o=i.height,a=i.width,s=this.get("renderer"),u=mt()('<id="virtual-image"></div>'),c=r?r.backgroundColor:void 0,h=r?r.padding:void 0;h?Object(ht.isNumber)(h)&&(h=[h,h,h,h]):h=[0,0,0,0];var f=o+h[0]+h[2],l=a+h[1]+h[3],d={container:u,height:f,width:l},p="svg"===s?new Le.a(d):new Be.a(d),g=this.get("group").clone(),v=Object(ht.clone)(g.getMatrix());v||(v=[1,0,0,0,1,0,0,0,1]);var y=(i.maxX+i.minX)/2,m=(i.maxY+i.minY)/2;ze.mat3.translate(v,v,[-y,-m]),ze.mat3.translate(v,v,[a/2+h[3],o/2+h[0]]),g.resetMatrix(),g.setMatrix(v),p.add(g);var b=p.get("el");e||(e="image/png"),setTimeout((function(){var r="";if("svg"===s){var i=b.cloneNode(!0),o=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),a=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",o);a.replaceChild(i,a.documentElement);var u=(new XMLSerializer).serializeToString(a);r="data:image/svg+xml;charset=utf8,"+encodeURIComponent(u)}else{var h=void 0,d=b.getContext("2d"),p=void 0;if(c){var g=window.devicePixelRatio;h=d.getImageData(0,0,l*g,f*g),p=d.globalCompositeOperation,d.globalCompositeOperation="destination-over",d.fillStyle=c,d.fillRect(0,0,l,f)}r=b.toDataURL(e),c&&(d.clearRect(0,0,l,f),d.putImageData(h,0,0),d.globalCompositeOperation=p)}var v=document.createElement("a"),y=(t||"graph")+("svg"===s?".svg":"."+e.split("/")[1]);n.dataURLToImage(r,s,v,y);var m=document.createEvent("MouseEvents");m.initEvent("click",!1,!1),v.dispatchEvent(m)}),16)},e.prototype.downloadImage=function(t,e,r){var n=this,i=this;i.isAnimating()&&i.stopAnimate();var o=i.get("canvas").getRenderer();e||(e="image/png");var a=(t||"graph")+("svg"===o?".svg":e.split("/")[1]),s=document.createElement("a");setTimeout((function(){var t=i.toDataURL(e,r);n.dataURLToImage(t,o,s,a);var u=document.createEvent("MouseEvents");u.initEvent("click",!1,!1),s.dispatchEvent(u)}),16)},e.prototype.dataURLToImage=function(t,e,r,n){if("undefined"!=typeof window)if(window.Blob&&window.URL&&"svg"!==e){var i=t.split(","),o="";if(i&&i.length>0){var a=i[0].match(/:(.*?);/);a&&a.length>=2&&(o=a[1])}for(var s=atob(i[1]),u=s.length,c=new Uint8Array(u);u--;)c[u]=s.charCodeAt(u);var h=new Blob([c],{type:o});window.navigator.msSaveBlob?window.navigator.msSaveBlob(h,n):r.addEventListener("click",(function(){r.download=n,r.href=window.URL.createObjectURL(h)}))}else r.addEventListener("click",(function(){r.download=n,r.href=t}))},e.prototype.updateLayout=function(t){var e,r=this.get("layoutController");Object(ht.isString)(t)?t={type:e=t}:e=t.type;var n=this.get("layout"),i=n?n.type:void 0;if(e&&i!==e)this.set("layout",t),r.changeLayout(e);else{var o={};Object.assign(o,n,t),o.type=i||"random",this.set("layout",o),r.updateLayoutCfg(o)}},e.prototype.destroyLayout=function(){this.get("layoutController").destroyLayout()},e.prototype.layout=function(){var t=this.get("layoutController"),e=this.get("layout");e&&(e.workerEnabled?t.layout():t.layoutMethod?t.relayout(!0):t.layout())},e.prototype.collapseCombo=function(t){var e=this;if(Object(ht.isString)(t)&&(t=this.findById(t)),t){var r=t.getModel();this.get("itemController").collapseCombo(t),r.collapsed=!0;var n=this.getEdges().concat(this.get("vedges")),i=[],o=[],a=this.get("comboTrees"),s=!1,u={};(a||[]).forEach((function(t){u[t.id]=t})),(a||[]).forEach((function(t){s||pr(t,(function(t){if(s&&u[t.id])return!1;if(r.parentId===t.id?(u={},t.children.forEach((function(t){u[t.id]=t}))):r.id===t.id&&(s=!0),s){var n=e.findById(t.id);n&&n.getType&&"combo"===n.getType()&&(i=i.concat(n.getNodes()),o=o.concat(n.getCombos()))}return!0}))}));var c={},h=[];n.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var n=t.getSource(),a=t.getTarget();if((i.includes(n)||o.includes(n))&&!i.includes(a)&&!o.includes(a)||n.getModel().id===r.id){if((l=t.getModel()).isVEdge)return void e.removeItem(t,!1);for(var s=a.getModel();!a.isVisible();){if(!(a=e.findById(s.parentId||s.comboId))||!s.parentId&&!s.comboId)return;s=a.getModel()}var u=s.id;if(c[r.id+"-"+u])return void(c[r.id+"-"+u]+=l.size||1);var f=e.addItem("vedge",{source:r.id,target:u,isVEdge:!0},!1);c[r.id+"-"+u]=l.size||1,h.push(f)}else if(!i.includes(n)&&!o.includes(n)&&(i.includes(a)||o.includes(a))||a.getModel().id===r.id){var l;if((l=t.getModel()).isVEdge)return void e.removeItem(t,!1);for(var d=n.getModel();!n.isVisible();){if(!(n=e.findById(d.parentId||d.comboId))||!d.parentId&&!d.comboId)return;d=n.getModel()}var p=d.id;if(c[p+"-"+r.id])return void(c[p+"-"+r.id]+=l.size||1);f=e.addItem("vedge",{target:r.id,source:p,isVEdge:!0},!1);c[p+"-"+r.id]=l.size||1,h.push(f)}}})),h.forEach((function(t){var r=t.getModel();e.updateItem(t,{size:c[r.source+"-"+r.target]},!1)}))}else console.warn("The combo to be collapsed does not exist!")},e.prototype.expandCombo=function(t){var e=this;if(Object(ht.isString)(t)&&(t=this.findById(t)),!t||t.getType&&"combo"!==t.getType())console.warn("The combo to be collapsed does not exist!");else{var r=t.getModel();this.get("itemController").expandCombo(t),r.collapsed=!1;var n=this.getEdges().concat(this.get("vedges")),i=[],o=[],a=this.get("comboTrees"),s=!1,u={};(a||[]).forEach((function(t){u[t.id]=t})),(a||[]).forEach((function(t){s||pr(t,(function(t){if(s&&u[t.id])return!1;if(r.parentId===t.id?(u={},t.children.forEach((function(t){u[t.id]=t}))):r.id===t.id&&(s=!0),s){var n=e.findById(t.id);n&&n.getType&&"combo"===n.getType()&&(i=i.concat(n.getNodes()),o=o.concat(n.getCombos()))}return!0}))}));var c={},h={};n.forEach((function(t){if(!t.isVisible()||t.getModel().isVEdge){var n=t.getSource(),a=t.getTarget(),s=n.get("id"),u=a.get("id");if((i.includes(n)||o.includes(n))&&!i.includes(a)&&!o.includes(a)||s===r.id){if(t.getModel().isVEdge)return void e.removeItem(t,!1);for(var f=a.getModel();!a.isVisible();){if(!(a=e.findById(f.comboId||f.parentId))||!f.parentId&&!f.comboId)return;f=a.getModel()}u=f.id;for(var l=n.getModel();!n.isVisible();){if(!(n=e.findById(l.comboId||l.parentId))||!l.parentId&&!l.comboId)return;if(l.comboId===r.id||l.parentId===r.id)break;l=n.getModel()}if(s=l.id,u){if(c[p=s+"-"+u])return c[p]+=t.getModel().size||1,void e.updateItem(h[p],{size:c[p]},!1);var d=e.addItem("vedge",{source:s,target:u,isVEdge:!0},!1);c[p]=t.getModel().size||1,h[p]=d}}else if(!i.includes(n)&&!o.includes(n)&&(i.includes(a)||o.includes(a))||u===r.id){if(t.getModel().isVEdge)return void e.removeItem(t,!1);for(l=n.getModel();!n.isVisible();){if(!(n=e.findById(l.comboId||l.parentId))||!l.parentId&&!l.comboId)return;l=n.getModel()}s=l.id;for(f=a.getModel();!a.isVisible();){if(!(a=e.findById(f.comboId||f.parentId))||!f.parentId&&!f.comboId)return;if(f.comboId===r.id||f.parentId===r.id)break;f=a.getModel()}if(u=f.id,s){var p;if(c[p=s+"-"+u])return c[p]+=t.getModel().size||1,void e.updateItem(h[p],{size:c[p]},!1);d=e.addItem("vedge",{target:u,source:s,isVEdge:!0},!1);c[p]=t.getModel().size||1,h[p]=d}}else(i.includes(n)||o.includes(n))&&(i.includes(a)||o.includes(a))&&n.isVisible()&&a.isVisible()&&t.show()}}))}},e.prototype.collapseExpandCombo=function(t){if(Object(ht.isString)(t)&&(t=this.findById(t)),!t.getType||"combo"===t.getType()){for(var e=t.getModel(),r=this.findById(e.parentId);r;){var n=r.getModel();if(n.collapsed)return console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),void(r=void 0);r=this.findById(n.parentId)}e.collapsed?this.expandCombo(t):this.collapseCombo(t),this.updateCombo(t)}},e.prototype.collapseGroup=function(t){this.get("customGroupControll").collapseGroup(t)},e.prototype.expandGroup=function(t){this.get("customGroupControll").expandGroup(t)},e.prototype.addPlugin=function(t){t.destroyed||(this.get("plugins").push(t),t.initPlugin(this))},e.prototype.removePlugin=function(t){var e=this.get("plugins"),r=e.indexOf(t);r>=0&&(t.destroyPlugin(),e.splice(r,1))},e.prototype.sortCombos=function(){var t=this;if(!this.get("comboSorted")){this.set("comboSorted",!0);var e=[],r={};(this.get("comboTrees")||[]).forEach((function(t){pr(t,(function(t){return e[t.depth]?e[t.depth].push(t.id):e[t.depth]=[t.id],r[t.id]=t.depth,!0}))})),(this.getEdges().concat(this.get("vedges"))||[]).forEach((function(t){var n=t.getModel(),i=r[n.source]||0,o=r[n.target]||0,a=Math.max(i,o);e[a]?e[a].push(n.id):e[a]=[n.id]})),e.forEach((function(e){if(e&&e.length)for(var r=e.length-1;r>=0;r--){var n=t.findById(e[r]);null==n||n.toFront()}}))}},e.prototype.getNeighbors=function(t,e){var r=t;return Object(ht.isString)(t)&&(r=this.findById(t)),r.getNeighbors(e)},e.prototype.getNodeDegree=function(t,e){void 0===e&&(e=void 0);var r=t;Object(ht.isString)(t)&&(r=this.findById(t));var n=this.get("degrees");n||(n=Oo(this)),this.set("degees",n);var i,o=n[r.getID()];switch(e){case"in":i=o.inDegree;break;case"out":i=o.outDegree;break;case"all":i=o;break;default:i=o.degree}return i},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear())},e.prototype.pushStack=function(t,e,r){if(void 0===t&&(t="update"),void 0===r&&(r="undo"),this.get("enabledStack")){var n=e?Object(ht.clone)(e):{before:{},after:Object(ht.clone)(this.save())};"redo"===r?this.redoStack.push({action:t,data:n}):this.undoStack.push({action:t,data:n}),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack})}else console.warn("请先启用 undo & redo 功能，在实例化 Graph 时候配置 enabledStack: true !")},e.prototype.getAdjMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var r=this.get("adjMatrix");return r&&t||(r=Po(this,e),this.set("adjMatrix",r)),r},e.prototype.getShortestPathMatrix=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=this.get("directed"));var r=this.get("adjMatrix"),n=this.get("shortestPathMatrix");return r&&t||(r=Po(this,e),this.set("adjMatrix",r)),n&&t||(n=Io(this,e),this.set("shortestPathMatrix",n)),n},e.prototype.destroy=function(){this.clear(),this.clearStack(),Object(ht.each)(this.get("plugins"),(function(t){t.destroyPlugin()}));var t=this.get("tooltips");if(t)for(var e=0;e<t.length;e++){var r=t[e];if(r){var n=r.parentElement;n&&n.removeChild(r)}}this.get("eventController").destroy(),this.get("itemController").destroy(),this.get("modeController").destroy(),this.get("viewController").destroy(),this.get("stateController").destroy(),this.get("layoutController").destroy(),this.get("customGroupControll").destroy(),this.get("canvas").destroy(),this.get("graphWaterMarker")&&this.get("graphWaterMarker").destroy(),document.querySelector(".g6-graph-watermarker")&&document.querySelector(".g6-graph-watermarker").remove(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){var e=this.get("hullGroup"),r=this.get("hullMap");if(r||(r={},this.set("hullMap",r)),e||((e=this.get("group").addGroup({id:"hullGroup"})).toBack(),this.set("hullGroup",e)),r[t.id])return console.warn("Existed hull id."),r[t.id];var n=e.addGroup({id:t.id+"-container"}),i=new Go(this,Object(k.__assign)(Object(k.__assign)({},t),{group:n}));return r[i.id]=i,i},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var e;e=Object(ht.isString)(t)?this.getHullById(t):t,delete this.get("hullMap")[e.id],e.destroy()},e.prototype.setImageWaterMarker=function(t,e){void 0===t&&(t=Q.waterMarkerImage);var r=this.get("container");Object(ht.isString)(r)&&(r=document.getElementById(r)),r.style.position||(r.style.position="relative");var n=this.get("graphWaterMarker"),i=Object(ht.deepMix)({},Q.imageWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,u=i.image;if(!n){var c={container:r,width:o,height:a,capture:!1},h=this.get("pixelRatio");h&&(c.pixelRatio=h),n=new Be.a(c),this.set("graphWaterMarker",n)}n.get("el").style.display="none";var f=n.get("context"),l=u.rotate,d=u.x,p=u.y;f.rotate(-l*Math.PI/180);var g=new Image;g.crossOrigin="anonymous",g.src=t,g.onload=function(){if(f.drawImage(g,d,p,u.width,u.height),f.rotate(l*Math.PI/180),s)r.style.cssText="background-image: url("+n.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var t=document.querySelector(".g6-graph-watermarker");t||((t=document.createElement("div")).className="g6-graph-watermarker"),t.className="g6-graph-watermarker",n.destroyed||(t.style.cssText="background-image: url("+n.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;",r.appendChild(t))}}},e.prototype.setTextWaterMarker=function(t,e){var r=this.get("container");Object(ht.isString)(r)&&(r=document.getElementById(r)),r.style.position||(r.style.position="relative");var n=this.get("graphWaterMarker"),i=Object(ht.deepMix)({},Q.textWaterMarkerConfig,e),o=i.width,a=i.height,s=i.compatible,u=i.text;if(!n){var c={container:r,width:o,height:a,capture:!1},h=this.get("pixelRatio");h&&(c.pixelRatio=h),n=new Be.a(c),this.set("graphWaterMarker",n)}n.get("el").style.display="none";var f=n.get("context"),l=u.rotate,d=u.fill,p=u.fontFamily,g=u.fontSize,v=u.baseline,y=u.x,m=u.y,b=u.lineHeight;f.rotate(-l*Math.PI/180),f.font=g+"px "+p,f.fillStyle=d,f.textBaseline=v;for(var x=t.length-1;x>=0;x--)f.fillText(t[x],y,m+x*b);if(f.rotate(l*Math.PI/180),s)r.style.cssText="background-image: url("+n.get("el").toDataURL("image/png")+");background-repeat:repeat;";else{var w=document.querySelector(".g6-graph-watermarker");w||((w=document.createElement("div")).className="g6-graph-watermarker"),w.style.cssText="background-image: url("+n.get("el").toDataURL("image/png")+");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;",r.appendChild(w)}},e}(Ne.a),Xo=r(135),Vo=r.n(Xo),Ho=function(t){function e(e){var r=t.call(this,e)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return Object(k.__extends)(e,t),e.prototype.getLayout=function(){var t=this.get("layout");return t?"function"==typeof t?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction="TB"),t.radial?function(e){var r=Vo.a[t.type](e,t);return vr(r),r}:function(e){return Vo.a[t.type](e,t)}):null},e.indexOfChild=function(t,e){var r=-1;return Object(p.each)(t,(function(t,n){if(e===t.id)return r=n,!1})),r},e.prototype.getDefaultCfg=function(){var e=t.prototype.getDefaultCfg.call(this);return e.animate=!0,e},e.prototype.innerAddChild=function(t,e,r){var n=this,i=t.data;i&&(i.x=t.x,i.y=t.y,i.depth=t.depth);var o=n.addItem("node",i,!1);if(e){if(o.set("parent",e),r){var a=e.get("originAttrs");if(a)o.set("originAttrs",a);else{var s=e.getModel();o.set("originAttrs",{x:s.x,y:s.y})}}var u=e.get("children");u?u.push(o):e.set("children",[o]),n.addItem("edge",{source:e,target:o,id:e.get("id")+":"+o.get("id")},!1)}return Object(p.each)(t.children||[],(function(t){n.innerAddChild(t,o,r)})),n.emit("afteraddchild",{item:o,parent:e}),o},e.prototype.innerUpdateChild=function(t,r,n){var i=this,o=i.findById(t.id);if(o){Object(p.each)(t.children||[],(function(t){i.innerUpdateChild(t,o,n)}));var a,s,u=o.get("children");if(u)if(u.length>0)for(var c=u.length-1;c>=0;c--){var h=u[c].getModel();-1===e.indexOfChild(t.children||[],h.id)&&(i.innerRemoveChild(h.id,{x:t.x,y:t.y},n),u.splice(c,1))}o.get("originAttrs")&&(a=o.get("originAttrs").x,s=o.get("originAttrs").y);var f=o.getModel();n&&o.set("originAttrs",{x:f.x,y:f.y}),o.set("model",t.data),a===t.x&&s===t.y||o.updatePosition({x:t.x,y:t.y})}else i.innerAddChild(t,r,n)},e.prototype.innerRemoveChild=function(t,e,r){var n=this,i=n.findById(t);if(i)if(Object(p.each)(i.get("children"),(function(t){n.innerRemoveChild(t.getModel().id,e,r)})),r){var o=i.getModel();i.set("to",e),i.set("originAttrs",{x:o.x,y:o.y}),n.get("removeList").push(i)}else n.removeItem(i)},e.prototype.changeData=function(t){var e=this;this.getNodes().map((function(t){return e.clearItemStates(t)})),this.getEdges().map((function(t){return e.clearItemStates(t)})),t?(e.data(t),e.render()):e.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");this.updateLayout(t)},e.prototype.updateLayout=function(t){t?(this.set("layout",t),this.set("layoutMethod",this.getLayout()),this.layout()):console.warn("layout cannot be null")},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");this.layout(t)},e.prototype.layout=function(t){var e=this.get("data"),r=this.get("layoutMethod")(e,this.get("layout")),n=this.get("animate");(this.emit("beforerefreshlayout",{data:e,layoutData:r}),this.emit("beforelayout"),this.innerUpdateChild(r,void 0,n),t)&&this.get("viewController").fitView();n?this.layoutAnimate(r):(this.refresh(),this.paint()),this.emit("afterrefreshlayout",{data:e,layoutData:r}),this.emit("afterlayout")},e.prototype.addChild=function(t,e){this.emit("beforeaddchild",{model:t,parent:e}),Object(p.isString)(e)||(e=e.get("id"));var r=this.findDataById(e);r&&(r.children||(r.children=[]),r.children.push(t),this.changeData())},e.prototype.updateChild=function(t,r){if(r&&this.findById(r)){var n=this.findById(r).getModel(),i=this.findById(t.id);if(n.children||(n.children=[]),i){var o=e.indexOfChild(n.children,t.id);n.children[o]=t}else n.children.push(t);this.changeData()}else this.changeData(t)},e.prototype.removeChild=function(t){var r=this.findById(t);if(r){var n=r.get("parent");if(n&&!n.destroyed){var i=this.findDataById(n.get("id")),o=i&&i.children||[],a=r.getModel(),s=e.indexOfChild(o,a.id);o.splice(s,1)}this.changeData()}},e.prototype.findDataById=function(t,e){var r=this;if(e||(e=r.get("data")),t===e.id)return e;var n=null;return Object(p.each)(e.children||[],(function(e){return e.id===t?(n=e,!1):!(n=r.findDataById(t,e))&&void 0})),n},e.prototype.layoutAnimate=function(t,e){var r=this,n=this.get("animateCfg");r.emit("beforeanimate",{data:t}),r.getEdges().forEach((function(t){var e=t.get("model");e.sourceAnchor||(e.sourceAnchor=t.get("sourceAnchorIndex"))})),this.get("canvas").animate((function(n){pr(t,(function(i){var o=r.findById(i.id);if(o){var a=o.get("originAttrs"),s=o.get("model");if(a||(a={x:s.x,y:s.y},o.set("originAttrs",a)),e){var u=e(o,n,a,t);o.set("model",Object.assign(s,u))}else s.x=a.x+(i.x-a.x)*n,s.y=a.y+(i.y-a.y)*n}return!0})),Object(p.each)(r.get("removeList"),(function(t){var e=t.getModel(),r=t.get("originAttrs"),i=t.get("to");e.x=r.x+(i.x-r.x)*n,e.y=r.y+(i.y-r.y)*n})),r.refreshPositions()}),{duration:n.duration,easing:n.ease,callback:function(){Object(p.each)(r.getNodes(),(function(t){t.set("originAttrs",null)})),Object(p.each)(r.get("removeList"),(function(t){r.removeItem(t)})),r.set("removeList",[]),n.callback&&n.callback(),r.emit("afteranimate",{data:t})},delay:n.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(){if(!this.get("data"))throw new Error("data must be defined first");this.clear(),this.emit("beforerender"),this.layout(this.get("fitView")),this.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e}(qo),Uo=["startArrow","endArrow"],Wo={options:{},itemType:"",type:"",getCustomConfig:function(t){return{}},getOptions:function(t){return Object(ht.deepMix)({labelCfg:{style:{fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}},descriptionCfg:{style:{fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"}}},this.options,this.getCustomConfig(t)||{},t)},draw:function(t,e){var r=this.drawShape(t,e);(r.set("className",this.itemType+"-shape"),t.label)&&this.drawLabel(t,e).set("className",this.itemType+"-label");return r},afterDraw:function(t,e,r){},drawShape:function(t,e){return null},drawLabel:function(t,e){var r=this.getOptions(t).labelCfg||{},n=this.getLabelStyle(t,r,e),i=n.rotate;delete n.rotate;var o=e.addShape("text",{attrs:n,draggable:!0,className:"text-shape",name:"text-shape"});if(i){var a=o.getBBox(),s=o.getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),n.rotateCenter)switch(n.rotateCenter){case"center":s=dt(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]]);break;case"lefttop":s=dt(s,[["t",-n.x,-n.y],["r",i],["t",n.x,n.y]]);break;case"leftcenter":s=dt(s,[["t",-n.x,-n.y-a.height/2],["r",i],["t",n.x,n.y+a.height/2]]);break;default:s=dt(s,[["t",-a.width/2,-a.height/2],["r",i],["t",a.width/2,a.height/2]])}else s=dt(s,[["t",-n.x,-n.y-a.height/2],["r",i],["t",n.x,n.y+a.height/2]]);o.setMatrix(s)}if(n.background){var u=this.drawLabelBg(t,e,o),c=this.itemType+"-label-bg";u.set("classname",c),o.toFront()}return o},drawLabelBg:function(t,e,r){var n=this.options.labelCfg,i=Object(ht.mix)({},n,t.labelCfg),o=this.getLabelBgStyleByPosition(r,t,i,e);return e.addShape("rect",{name:"text-bg-shape",attrs:o})},getLabelStyleByPosition:function(t,e,r){return{text:t.label}},getLabelBgStyleByPosition:function(t,e,r,n){return{}},getLabelStyle:function(t,e,r){var n=this.getLabelStyleByPosition(t,e,r),i=this.itemType+"Label",o=Q[i]?Q[i].style:null;return Object(k.__assign)(Object(k.__assign)(Object(k.__assign)({},o),n),e.style)},getShapeStyle:function(t){return t.style},update:function(t,e){this.updateShapeStyle(t,e),this.updateLabel(t,e)},updateShapeStyle:function(t,e){var r=e.getContainer(),n=e.getKeyShape(),i=Object(ht.mix)({},n.attr(),t.style),o=function(t){var e,o=i[t];if(Object(ht.isPlainObject)(o)){var a=r.find((function(e){return e.get("name")===t}));a&&a.attr(o)}else n.attr(((e={})[t]=o,e))};for(var a in i)o(a)},updateLabel:function(t,e){var r=e.getContainer(),n=this.getOptions({}).labelCfg,i=this.itemType+"-label",o=r.find((function(t){return t.get("className")===i})),a=this.itemType+"-label-bg",s=r.find((function(t){return t.get("classname")===a}));if(t.label||""===t.label)if(o){var u={};e.getModel&&(u=e.getModel().labelCfg);var c=Object(ht.deepMix)({},n,u,t.labelCfg),h=this.getLabelStyleByPosition(t,c,r),f=t.labelCfg?t.labelCfg.style:void 0,l=c.style&&c.style.background,d=Object(k.__assign)(Object(k.__assign)(Object(k.__assign)({},o.attr()),h),f),p=d.rotate;if(delete d.rotate,p){var g=[1,0,0,0,1,0,0,0,1];g=dt(g,[["t",-d.x,-d.y],["r",p],["t",d.x,d.y]]),o.resetMatrix(),o.attr(Object(k.__assign)(Object(k.__assign)({},d),{matrix:g}))}else o.resetMatrix(),o.attr(d);if(s)if(d.background){var v=this.getLabelBgStyleByPosition(o,t,c,r),y=Object(k.__assign)(Object(k.__assign)({},v),l);s.resetMatrix(),p&&s.rotateAtStart(p),s.attr(y)}else r.removeChild(s);else d.background&&((s=this.drawLabelBg(t,r,o)).set("classname",a),o.toFront())}else{this.drawLabel(t,r).set("className",i)}},afterUpdate:function(t,e){},setState:function(t,e,r){var n,i,o=r.get("keyShape");if(o){var a=r.getType(),s=Object(ht.isBoolean)(e)?t:t+":"+e,u=this.getStateStyle(s,r),c=r.getStateStyle(s);if(c||u){var h=Object(ht.mix)({},c||u),f=r.getContainer();if(e){var l=function(t){var e,r=h[t];if(Object(ht.isPlainObject)(r)&&!Uo.includes(t)){var n=f.find((function(e){return e.get("name")===t}));n&&n.attr(r)}else o.attr(((e={})[t]=r,e))};for(var d in h)l(d)}else{var p=Object(ht.clone)(r.getCurrentStatesStyle()),g=r.getModel(),v=Object(ht.mix)({},g.style,Object(ht.clone)(r.getOriginStyle())),y=o.get("name"),m=o.attr(),b={},x=function(t){var e=h[t];if(Object(ht.isPlainObject)(e)&&!Uo.includes(t)){var r=f.find((function(e){return e.get("name")===t}));if(r){var n=r.attr();Object(ht.each)(e,(function(t,e){(n[e]||0===n[e])&&delete n[e]})),b[t]=n}}else{m[t]&&!{x:1,y:1,cx:1,cy:1}[t]&&delete m[t]}};for(var w in h)x(w);for(var d in y?b[y]=m:Object(ht.mix)(b,m),p){var M=p[d];Object(ht.isPlainObject)(M)&&!Uo.includes(d)||(y?(Object(ht.mix)(v[y],((i={})[d]=M,i)),delete v[d]):Object(ht.mix)(v,((n={})[d]=M,n)),delete p[d])}var S={};Object(ht.deepMix)(S,v,b,p);var _=function(t){var e,r,n=S[t];if(Object(ht.isPlainObject)(n)&&!Uo.includes(t)){var i=f.find((function(e){return e.get("name")===t}));i&&i.attr(n)}else"combo"===a?y||o.attr(((e={})[t]=n,e)):o.attr(((r={})[t]=n,r))};for(var k in S)_(k)}}}},getStateStyle:function(t,e){var r=e.getModel(),n=e.getType(),i=this.getOptions(r),o=i.stateStyles,a=i.style,s=void 0===a?{}:a,u=r.stateStyles?r.stateStyles[t]:o&&o[t];return"combo"===n?Object(ht.clone)(u):Object(ht.mix)({},s,u)},getControlPoints:function(t){return t.controlPoints},getAnchorPoints:function(t){return this.getOptions(t).anchorPoints}},Zo={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Q.nodeLabel.offset,getSize:function(t){var e=t.size||this.getOptions({}).size||Q.defaultNode.size;return Object(ht.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),Object(ht.isArray)(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var r=e.position||this.labelPosition;if("center"===r)return{x:0,y:0,text:t.label};var n=e.offset;Object(ht.isNil)(n)&&(n=this.offset);var i,o=this.getSize(t),a=o[0],s=o[1];switch(r){case"top":i={x:0,y:0-s/2-n,textBaseline:"bottom"};break;case"bottom":i={x:0,y:s/2+n,textBaseline:"top"};break;case"left":i={x:0-a/2-n,y:0,textAlign:"right"};break;default:i={x:a/2+n,y:0,textAlign:"left"}}return i.text=t.label,i},getLabelBgStyleByPosition:function(t,e,r,n){if(!t)return{};var i=t.getBBox(),o=r.style&&r.style.background;if(!o)return{};var a,s=j(o.padding),u=i.width+s[1]+s[3],c=i.height+s[0]+s[2],h=r.offset;return Object(ht.isNil)(h)&&(h=this.offset),a={x:i.minX-s[3],y:i.minY-s[0]},a=Object(k.__assign)(Object(k.__assign)(Object(k.__assign)({},a),o),{width:u,height:c})},drawShape:function(t,e){var r=this.shapeType,n=this.getShapeStyle(t);return e.addShape(r,{attrs:n,draggable:!0,name:"node-shape"})},updateLinkPoints:function(t,e){var r,n=this.getOptions(t).linkPoints,i=e.find((function(t){return"link-point-left"===t.get("className")})),o=e.find((function(t){return"link-point-right"===t.get("className")})),a=e.find((function(t){return"link-point-top"===t.get("className")})),s=e.find((function(t){return"link-point-bottom"===t.get("className")}));i&&(r=i.attr()),o&&!r&&(r=o.attr()),a&&!r&&(r=a.attr()),s&&!r&&(r=s.attr()),r||(r=n);var u=Object(ht.mix)({},r,t.linkPoints),c=u.fill,h=u.stroke,f=u.lineWidth,l=u.size/2;l||(l=u.r);var d=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},p=d.left,g=d.right,v=d.top,y=d.bottom,m=this.getSize(t),b=m[0],x=m[1],w={r:l,fill:c,stroke:h,lineWidth:f};i?p||void 0===p?i.attr(Object(k.__assign)(Object(k.__assign)({},w),{x:-b/2,y:0})):i.remove():p&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},w),{x:-b/2,y:0}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),o?(g||void 0===g||o.remove(),o.attr(Object(k.__assign)(Object(k.__assign)({},w),{x:b/2,y:0}))):g&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},w),{x:b/2,y:0}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),a?(v||void 0===v||a.remove(),a.attr(Object(k.__assign)(Object(k.__assign)({},w),{x:0,y:-x/2}))):v&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},w),{x:0,y:-x/2}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s?y||void 0===y?s.attr(Object(k.__assign)(Object(k.__assign)({},w),{x:0,y:x/2})):s.remove():y&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},w),{x:0,y:x/2}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},updateShape:function(t,e,r,n){e.get("keyShape").attr(Object(k.__assign)({},r)),this.updateLabel(t,e),n&&this.updateIcon(t,e)},updateIcon:function(t,e){var r=this,n=e.getContainer(),i=this.getOptions(t).icon,o=(t.icon?t.icon:{show:void 0}).show,a=n.find((function(t){return t.get("className")===r.type+"-icon"}));if(a)if(o||void 0===o){var s=Object(ht.mix)({},a.attr(),i),u=s.width,c=s.height;a.attr(Object(k.__assign)(Object(k.__assign)({},s),{x:-u/2,y:-c/2}))}else a.remove();else if(o){u=i.width,c=i.height;n.addShape("image",{attrs:Object(k.__assign)(Object(k.__assign)({},i),{x:-u/2,y:-c/2}),className:this.type+"-icon",name:this.type+"-icon"});var h=n.find((function(t){return"node-label"===t.get("className")}));h&&h.toFront()}}},$o=Object(k.__assign)(Object(k.__assign)({},Wo),Zo);Pr.registerNode("single-node",$o);var Ko={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Q.defaultEdge.size,style:{x:0,y:0,stroke:Q.defaultEdge.style.stroke,lineAppendWidth:Q.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Q.edgeLabel.style.fill,fontSize:Q.edgeLabel.style.fontSize}},stateStyles:Object(k.__assign)({},Q.edgeStateStyles)},getPath:function(t){var e=[];return Object(ht.each)(t,(function(t,r){0===r?e.push(["M",t.x,t.y]):e.push(["L",t.x,t.y])})),e},getShapeStyle:function(t){var e=this.options.style,r={stroke:t.color},n=Object(ht.mix)({},e,r,t.style),i=t.size||Q.defaultEdge.size,o=(t=this.getPathPoints(t)).startPoint,a=t.endPoint,s=this.getControlPoints(t),u=[o];s&&(u=u.concat(s)),u.push(a);var c=this.getPath(u);return Object(ht.mix)({},Q.defaultEdge.style,{stroke:Q.defaultEdge.color,lineWidth:i,path:c},n)},updateShapeStyle:function(t,e){var r=e.getContainer(),n={stroke:t.color},i=r.find((function(t){return"edge-shape"===t.get("className")}))||e.getKeyShape(),o=t.size,a=(t=this.getPathPoints(t)).startPoint,s=t.endPoint,u=this.getControlPoints(t),c=[a];u&&(c=c.concat(u)),c.push(s);var h=Object(ht.mix)({},n,i.attr(),t.style),f=t.sourceNode,l=t.targetNode,d={radius:h.radius};u||(d={source:f,target:l,offset:h.offset,radius:h.radius});var p=this.getPath(c,d),g=Object(ht.mix)(n,i.attr(),{lineWidth:o,path:p},t.style);i&&i.attr(g)},getLabelStyleByPosition:function(t,e,r){var n,i=e.position||this.labelPosition,o={},a=r&&r.find((function(t){return"edge-shape"===t.get("className")}));n="start"===i?0:"end"===i?1:.5;var s=e.refX||this.refX,u=e.refY||this.refY;if(t.startPoint.x===t.endPoint.x&&t.startPoint.y===t.endPoint.y)return o.x=t.startPoint.x+s,o.y=t.startPoint.y+u,o.text=t.label,o;var c=Object(ht.isNil)(e.autoRotate)?this.labelAutoRotate:e.autoRotate,h=fr(a,n,s,u,c);return o.x=h.x,o.y=h.y,o.rotate=h.rotate,o.textAlign=this._getTextAlign(i,h.angle),o.text=t.label,o},getLabelBgStyleByPosition:function(t,e,r,n){if(!t)return{};var i=t.getBBox(),o=r.style&&r.style.background;if(!o)return{};var a,s=o.padding,u=i.width+s[1]+s[3],c=i.height+s[0]+s[2],h=r.position||this.labelPosition,f=Object(k.__assign)(Object(k.__assign)({},o),{width:u,height:c,x:i.minX-s[2],y:i.minY-s[0],rotate:0}),l=Object(ht.isNil)(r.autoRotate)?this.labelAutoRotate:r.autoRotate,d=n&&n.find((function(t){return"edge-shape"===t.get("className")}));a="start"===h?0:"end"===h?1:.5;var p=r.refX||this.refX,g=r.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return f.x=e.startPoint.x+p,f.y=e.startPoint.y+g,f;var v=fr(d,a,p-u/2,g+c/2,l),y=v.angle;return y>.5*Math.PI&&y<1.5*Math.PI&&(v=fr(d,a,p+u/2,g+c/2,l)),l&&(f.x=v.x,f.y=v.y),f.rotate=v.rotate,f},_getTextAlign:function(t,e){var r="center";return e?(e%=2*Math.PI,"center"!==t&&(r=e>=0&&e<=Math.PI/2||e>=1.5*Math.PI&&e<2*Math.PI?t:function(t){var e=t;return"start"===t?e="end":"end"===t&&(e="start"),e}(t)),r):t},getControlPoints:function(t){return t.controlPoints},getPathPoints:function(t){return t},drawShape:function(t,e){var r=this.getShapeStyle(t);return e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r})},drawLabel:function(t,e){var r=this.options.labelCfg,n=Object(ht.deepMix)({fontFamily:"undefined"!=typeof window&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},r,t.labelCfg),i=this.getLabelStyle(t,n,e),o=i.rotate;delete i.rotate;var a=e.addShape("text",{attrs:i,name:"text-shape"});if(o&&a.rotateAtStart(o),i.background){var s=this.drawLabelBg(t,e,a),u=this.itemType+"-label-bg";s.set("classname",u),a.toFront()}return a},drawLabelBg:function(t,e,r){var n=this.options.labelCfg,i=Object(ht.deepMix)({},n,t.labelCfg),o=this.getLabelStyle(t,i,e).rotate,a=this.getLabelBgStyleByPosition(r,t,i,e);delete a.rotate;var s=e.addShape("rect",{name:"text-bg-shape",attrs:a});return o&&s.rotateAtStart(o),s}},Qo=Object(k.__assign)(Object(k.__assign)({},Wo),Ko);Pr.registerEdge("single-edge",Qo),Pr.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Pr.registerEdge("spline",{getPath:function(t){return me(t)}},"single-edge"),Pr.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(t){var e,r,n=t.startPoint,i=t.endPoint,o=(n.x+i.x)/2,a=(n.y+i.y)/2;if(void 0!==t.controlPoints){if(r=t.controlPoints[0],e=Gt(n,r,i),n.x<=i.x&&n.y>i.y?this.clockwise=e.x>r.x?0:1:n.x<=i.x&&n.y<i.y?this.clockwise=e.x>r.x?1:0:n.x>i.x&&n.y<=i.y?this.clockwise=e.y<r.y?0:1:this.clockwise=e.y<r.y?1:0,(r.x-n.x)/(r.y-n.y)==(i.x-n.x)/(i.y-n.y))return[]}else{void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),m()(t.curveOffset)&&(t.curveOffset=t.curveOffset[0]),t.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:i.x-n.x,y:i.y-n.y},u=Math.atan2(s.y,s.x);r={x:t.curveOffset*Math.cos(-Math.PI/2+u)+o,y:t.curveOffset*Math.sin(-Math.PI/2+u)+a},e=Gt(n,r,i)}var c=qt(n,e);return[{x:c,y:c}]},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),2===t.length?e.push(["L",t[1].x,t[1].y]):e.push(["A",t[1].x,t[1].y,0,0,this.clockwise,t[2].x,t[2].y]),e}},"single-edge"),Pr.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(t){var e=t.controlPoints;if(!e||!e.length){var r=t.startPoint,n=t.endPoint;void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),m()(this.curveOffset)&&(t.curveOffset=t.curveOffset[0]),m()(this.curvePosition)&&(t.curvePosition=t.curveOffset[0]),e=[be(r,n,t.curvePosition,t.curveOffset)]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["Q",t[1].x,t[1].y,t[2].x,t[2].y]),e}},"single-edge"),Pr.registerEdge("cubic",{curvePosition:[.5,.5],curveOffset:[-20,20],getControlPoints:function(t){var e=t.controlPoints;if(void 0===t.curveOffset&&(t.curveOffset=this.curveOffset),void 0===t.curvePosition&&(t.curvePosition=this.curvePosition),M()(t.curveOffset)&&(t.curveOffset=[t.curveOffset,-t.curveOffset]),M()(t.curvePosition)&&(t.curvePosition=[t.curvePosition,1-t.curvePosition]),!e||!e.length||e.length<2){var r=t.startPoint,n=t.endPoint;e=[be(r,n,t.curvePosition[0],t.curveOffset[0]),be(r,n,t.curvePosition[1],t.curveOffset[1])]}return e},getPath:function(t){var e=[];return e.push(["M",t[0].x,t[0].y]),e.push(["C",t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y]),e}},"single-edge"),Pr.registerEdge("cubic-vertical",{curvePosition:[.5,.5],getControlPoints:function(t){var e=t.startPoint,r=t.endPoint;return void 0!==t.curvePosition&&(this.curvePosition=t.curvePosition),M()(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:e.x,y:(r.y-e.y)*this.curvePosition[0]+e.y},{x:r.x,y:(r.y-e.y)*this.curvePosition[1]+e.y}]}},"cubic"),Pr.registerEdge("cubic-horizontal",{curvePosition:[.5,.5],getControlPoints:function(t){var e=t.startPoint,r=t.endPoint;return void 0!==t.curvePosition&&(this.curvePosition=t.curvePosition),M()(this.curvePosition)&&(this.curvePosition=[this.curvePosition,1-this.curvePosition]),[{x:(r.x-e.x)*this.curvePosition[0]+e.x,y:e.y},{x:(r.x-e.x)*this.curvePosition[1]+e.x,y:r.y}]}},"cubic"),Pr.registerEdge("loop",{getPathPoints:function(t){return hr(t)},getControlPoints:function(t){return t.controlPoints},afterDraw:function(t){t.controlPoints=void 0},afterUpdate:function(t){t.controlPoints=void 0}},"cubic");var Jo={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Q.comboLabel.refX,refY:Q.comboLabel.refY,options:{style:{stroke:Q.defaultCombo.style.stroke,fill:Q.defaultCombo.style.fill,lineWidth:Q.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Q.comboLabel.style.fill,fontSize:Q.comboLabel.style.fontSize}},stateStyles:Object(k.__assign)({},Q.comboStateStyles)},getSize:function(t){var e=Object(ht.clone)(t.size||this.options.size||Q.defaultCombo.size);return Object(ht.isArray)(e)&&1===e.length&&(e=[e[0],e[0]]),Object(ht.isArray)(e)||(e=[e,e]),e},getLabelStyleByPosition:function(t,e){var r=e.position||this.labelPosition,n=t.style,i=t.padding||this.options.padding;Object(ht.isArray)(i)&&(i=i[0]);var o=e.refX,a=e.refY;Object(ht.isNil)(o)&&(o=this.refX),Object(ht.isNil)(a)&&(a=this.refY);var s,u=this.getSize(t),c=(Math.max(n.r,u[0]/2)||u[0]/2)+i;switch(r){case"top":s={x:0,y:-c-a,textBaseline:"bottom",textAlign:"center"};break;case"bottom":s={x:0,y:c+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:-c+o,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:c+o,y:0,textAlign:"right"}}return s.text=t.label,s},drawShape:function(t,e){var r=this.shapeType,n=this.getShapeStyle(t);return e.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"})},updateShape:function(t,e,r){var n=e.get("keyShape");(void 0===t.animate?this.options.animate:t.animate)&&n.animate?n.animate(r,{duration:200,easing:"easeLinear"}):n.attr(Object(k.__assign)({},r)),this.updateLabel(t,e)}},ta=Object(k.__assign)(Object(k.__assign)({},Wo),Jo);Pr.registerCombo("single-combo",ta),Pr.registerCombo("circle",{options:{size:[Q.defaultCombo.size[0],Q.defaultCombo.size[0]],padding:Q.defaultCombo.padding[0],animate:!0,style:{stroke:Q.defaultCombo.style.stroke,fill:Q.defaultCombo.style.fill,lineWidth:Q.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Q.comboLabel.style.fill,fontSize:Q.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:Object(k.__assign)({},Q.comboStateStyles)},shapeType:"circle",labelPosition:"top",drawShape:function(t,e){var r=this.getShapeStyle(t);return delete r.height,delete r.width,e.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0})},getShapeStyle:function(t){var e=this.options.style,r=t.padding||this.options.padding;Object(ht.isArray)(r)&&(r=r[0]);var n,i={stroke:t.color},o=Object(ht.mix)({},e,i,t.style),a=this.getSize(t);n=!Object(ht.isNumber)(o.r)||isNaN(o.r)?a[0]/2||Q.defaultCombo.style.r:Math.max(o.r,a[0]/2)||a[0]/2,o.r=n+r;var s=Object(k.__assign)({x:0,y:0},o);return t.style?t.style.r=n:t.style={r:n},s},update:function(t,e){var r=this.getSize(t),n=t.padding||this.options.padding;Object(ht.isArray)(n)&&(n=n[0]);var i=Object(ht.clone)(t.style),o=Math.max(i.r,r[0]/2)||r[0]/2;i.r=o+n;var a=e.get("sizeCache");a&&(a.r=i.r);var s={stroke:t.color},u=e.get("keyShape"),c=Object(ht.mix)({},u.attr(),s,i);t.style?t.style.r=o:t.style={r:o},this.updateShape(t,e,c,!0)}},"single-combo"),Pr.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Q.defaultCombo.style.stroke,fill:Q.defaultCombo.style.fill,lineWidth:Q.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Q.comboLabel.style.fill,fontSize:Q.comboLabel.style.fontSize}},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(k.__assign)({},Q.comboStateStyles)},shapeType:"rect",labelPosition:"top",drawShape:function(t,e){var r=this.getShapeStyle(t);return e.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0})},getLabelStyleByPosition:function(t,e){var r=e.position||this.labelPosition,n=t.style,i=t.padding||this.options.padding;Object(ht.isNumber)(i)&&(i=[i,i,i,i]);var o=e.refX,a=e.refY;Object(ht.isNil)(o)&&(o=this.refX),Object(ht.isNil)(a)&&(a=this.refY);var s,u=n.width/2+i[3],c=n.height/2+i[0];switch(r){case"top":s={x:0-u+o,y:0-c+a,textBaseline:"top",textAlign:"left"};break;case"bottom":s={x:0,y:c+a,textBaseline:"bottom",textAlign:"center"};break;case"left":s={x:0-u+a,y:0,textAlign:"left"};break;case"center":s={x:0,y:0,text:t.label,textAlign:"center"};break;default:s={x:u+o,y:0,textAlign:"right"}}return s.text=t.label,s},getShapeStyle:function(t){var e=this.options.style,r=t.padding||this.options.padding;Object(ht.isNumber)(r)&&(r=[r,r,r,r]);var n,i,o={stroke:t.color},a=Object(ht.mix)({},e,o,t.style),s=this.getSize(t);n=!Object(ht.isNumber)(a.width)||isNaN(a.width)?s[0]||Q.defaultCombo.style.width:Math.max(a.width,s[0])||s[0],i=!Object(ht.isNumber)(a.height)||isNaN(a.height)?s[1]||Q.defaultCombo.style.height:Math.max(a.height,s[1])||s[1];var u=-n/2-r[3],c=-i/2-r[0];a.width=n+r[1]+r[3],a.height=i+r[0]+r[2];var h=Object(k.__assign)({x:u,y:c},a);return t.style?(t.style.width=n,t.style.height=i):t.style={width:n,height:i},h},update:function(t,e){var r=this.getSize(t),n=t.padding||this.options.padding;Object(ht.isNumber)(n)&&(n=[n,n,n,n]);var i=Object(ht.clone)(t.style),o=Math.max(i.width,r[0])||r[0],a=Math.max(i.height,r[1])||r[1];i.width=o+n[1]+n[3],i.height=a+n[0]+n[2];var s=e.get("sizeCache");s&&(s.width=i.width,s.height=i.height),i.x=-o/2-n[3],i.y=-a/2-n[0];var u={stroke:t.color},c=e.get("keyShape"),h=Object(ht.mix)({},c.attr(),u,i);t.style?(t.style.width=o,t.style.height=a):t.style={width:o,height:a},this.updateShape(t,e,h,!1)},updateShape:function(t,e,r){var n=e.get("keyShape");(void 0===t.animate?this.options.animate:t.animate)&&n.animate?n.animate(r,{duration:200,easing:"easeLinear"}):n.attr(Object(k.__assign)({},r)),this.updateLabel(t,e)}},"single-combo"),Pr.registerNode("circle",{options:{size:Q.defaultNode.size,style:{x:0,y:0,stroke:Q.defaultNode.style.stroke,fill:Q.defaultNode.style.fill,lineWidth:Q.defaultNode.style.lineWidth},labelCfg:{style:{fill:Q.nodeLabel.style.fill,fontSize:Q.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Q.defaultNode.linkPoints.size,lineWidth:Q.defaultNode.linkPoints.lineWidth,fill:Q.defaultNode.linkPoints.fill,stroke:Q.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(k.__assign)({},Q.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(t,e){var r=this.getOptions(t).icon,n=void 0===r?{}:r,i=this.getShapeStyle(t),o=St()({},n,t.icon),a=e.addShape("circle",{attrs:i,className:this.type+"-keyShape",draggable:!0}),s=o.width,u=o.height;return o.show&&e.addShape("image",{attrs:Object(k.__assign)({x:-s/2,y:-u/2},o),className:this.type+"-icon",name:this.type+"-icon",draggable:!0}),this.drawLinkPoints(t,e),a},drawLinkPoints:function(t,e){var r=this.getOptions(t).linkPoints,n=void 0===r?{}:r,i=n.top,o=n.left,a=n.right,s=n.bottom,u=n.size,c=n.r,h=Object(k.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t)[0]/2;o&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:-f,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:f,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:-f,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:f,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,r={stroke:t.color},n=St()({},e,r),i=this.getSize(t)[0]/2;return Object(k.__assign)({x:0,y:0,r:i},n)},update:function(t,e){var r=e.getContainer(),n=this.getSize(t),i={stroke:t.color,r:n[0]/2},o=e.get("keyShape"),a=St()({},o.attr(),i,t.style);this.updateShape(t,e,a,!0),this.updateLinkPoints(t,r)}},"single-node"),Pr.registerNode("rect",{options:{size:[100,30],style:{radius:0,stroke:Q.defaultNode.style.stroke,fill:Q.defaultNode.style.fill,lineWidth:Q.defaultNode.style.lineWidth},labelCfg:{style:{fill:Q.nodeLabel.style.fill,fontSize:Q.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Q.defaultNode.linkPoints.size,lineWidth:Q.defaultNode.linkPoints.lineWidth,fill:Q.defaultNode.linkPoints.fill,stroke:Q.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:Object(k.__assign)({},Q.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(t,e){var r=this.getShapeStyle(t),n=e.addShape("rect",{attrs:r,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawLinkPoints(t,e),n},drawLinkPoints:function(t,e){var r=this.getOptions(t).linkPoints,n=void 0===r?{}:r,i=n.top,o=n.left,a=n.right,s=n.bottom,u=n.size,c=n.r,h=Object(k.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t),l=f[0],d=f[1];o&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:-l/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:l/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:-d/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:d/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,r={stroke:t.color},n=Object(ht.mix)({},e,r),i=this.getSize(t),o=n.width||i[0],a=n.height||i[1];return Object(k.__assign)({x:-o/2,y:-a/2,width:o,height:a},n)},update:function(t,e){var r=e.getContainer(),n=this.getOptions({}).style,i=this.getSize(t),o=e.get("keyShape");t.size||(i[0]=o.attr("width")||n.width,i[1]=o.attr("height")||n.height);var a={stroke:t.color,x:-i[0]/2,y:-i[1]/2,width:i[0],height:i[1]},s=Object(ht.mix)({},n,o.attr(),a);s=Object(ht.mix)(s,t.style),this.updateShape(t,e,s,!1),this.updateLinkPoints(t,r)}},"single-node"),Pr.registerNode("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Q.defaultNode.style.stroke,fill:Q.defaultNode.style.fill,lineWidth:Q.defaultNode.style.lineWidth},labelCfg:{style:{fill:Q.nodeLabel.style.fill,fontSize:Q.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Q.defaultNode.linkPoints.size,lineWidth:Q.defaultNode.linkPoints.lineWidth,fill:Q.defaultNode.linkPoints.fill,stroke:Q.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(k.__assign)({},Q.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(t,e){var r=this.getOptions(t).icon,n=void 0===r?{}:r,i=this.getShapeStyle(t),o=e.addShape("ellipse",{attrs:i,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0}),a=n.width,s=n.height;if(n.show)e.addShape("image",{attrs:Object(k.__assign)({x:-a/2,y:-s/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var r=this.getOptions(t).linkPoints,n=void 0===r?{}:r,i=n.top,o=n.left,a=n.right,s=n.bottom,u=n.size,c=n.r,h=Object(k.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t),l=f[0]/2,d=f[1]/2;o&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:-l,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:l,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:-d,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:d,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getShapeStyle:function(t){var e=this.getOptions(t).style,r={stroke:t.color},n=Object(ht.mix)({},e,r),i=this.getSize(t),o=i[0]/2,a=i[1]/2;return Object(k.__assign)({x:0,y:0,rx:o,ry:a},n)},update:function(t,e){var r=e.getContainer(),n=this.getOptions({}).style,i=this.getSize(t),o={stroke:t.color,rx:i[0]/2,ry:i[1]/2},a=e.get("keyShape"),s=Object(ht.mix)({},n,a.attr(),o);s=Object(ht.mix)(s,t.style),this.updateShape(t,e,s,!0),this.updateLinkPoints(t,r)}},"single-node"),Pr.registerNode("diamond",{options:{size:[80,80],style:{stroke:Q.defaultNode.style.stroke,fill:Q.defaultNode.style.fill,lineWidth:Q.defaultNode.style.lineWidth},labelCfg:{style:{fill:Q.nodeLabel.style.fill,fontSize:Q.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Q.defaultNode.linkPoints.size,lineWidth:Q.defaultNode.linkPoints.lineWidth,fill:Q.defaultNode.linkPoints.fill,stroke:Q.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(k.__assign)({},Q.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(t,e){var r=this.getOptions(t).icon,n=void 0===r?{}:r,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),a=n.width,s=n.height;if(n.show)e.addShape("image",{attrs:Object(k.__assign)({x:-a/2,y:-s/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var r=this.getOptions(t).linkPoints,n=void 0===r?{}:r,i=n.top,o=n.left,a=n.right,s=n.bottom,u=n.size,c=n.r,h=Object(k.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t),l=f[0],d=f[1];o&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:-l/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:l/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:-d/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:d/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},getPath:function(t){var e=this.getSize(t),r=e[0],n=e[1];return[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]]},getShapeStyle:function(t){var e=this.getOptions(t).style,r={stroke:t.color},n=Object(ht.mix)({},e,r),i=this.getPath(t);return Object(k.__assign)({path:i},n)},update:function(t,e){var r=e.getContainer(),n=this.getOptions({}).style,i=this.getPath(t),o={stroke:t.color,path:i},a=e.get("keyShape"),s=Object(ht.mix)({},n,a.attr(),o);s=Object(ht.mix)(s,t.style),this.updateShape(t,e,s,!0),this.updateLinkPoints(t,r)}},"single-node"),Pr.registerNode("triangle",{options:{size:40,direction:"up",style:{stroke:Q.defaultNode.style.stroke,fill:Q.defaultNode.style.fill,lineWidth:Q.defaultNode.style.lineWidth},labelCfg:{style:{fill:Q.nodeLabel.style.fill,fontSize:Q.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Q.defaultNode.linkPoints.size,lineWidth:Q.defaultNode.linkPoints.lineWidth,fill:Q.defaultNode.linkPoints.fill,stroke:Q.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:Object(k.__assign)({},Q.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(t,e){var r=this.getOptions(t),n=r.icon,i=void 0===n?{}:n,o=r.direction,a=this.getShapeStyle(t),s=t.direction||o,u=e.addShape("path",{attrs:a,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),c=i.width,h=i.height,f=i.show,l=i.offset;if(f){var d=-c/2,p=-h/2;"up"!==s&&"down"!==s||(p+=l),"left"!==s&&"right"!==s||(d+=l),e.addShape("image",{attrs:Object(k.__assign)({x:d,y:p},i),className:this.type+"-icon",name:this.type+"-icon",draggable:!0})}return this.drawLinkPoints(t,e),u},drawLinkPoints:function(t,e){var r=this.getOptions(t),n=r.linkPoints,i=void 0===n?{}:n,o=r.direction,a=t.direction||o,s=i.top,u=i.left,c=i.right,h=i.bottom,f=i.size,l=i.r,d=Object(k.__rest)(i,["top","left","right","bottom","size","r"]),p=this.getSize(t)[0];if(u){var g=null,v=p*Math.sin(1/3*Math.PI),y=p*Math.sin(1/3*Math.PI);"up"===a?g=[-y,v]:"down"===a?g=[-y,-v]:"left"===a&&(g=[-y,y-v]),g&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},d),{x:g[0],y:g[1],r:f/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(c){var m=null;v=p*Math.sin(1/3*Math.PI),y=p*Math.sin(1/3*Math.PI);"up"===a?m=[y,v]:"down"===a?m=[y,-v]:"right"===a&&(m=[y,y-v]),m&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},d),{x:m[0],y:m[1],r:f/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(s){var b=null;v=p*Math.sin(1/3*Math.PI),y=p*Math.sin(1/3*Math.PI);"up"===a?b=[y-v,-v]:"left"===a?b=[y,-v]:"right"===a&&(b=[-y,-v]),b&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},d),{x:b[0],y:b[1],r:f/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(h){var x=null;v=p*Math.sin(1/3*Math.PI),y=p*Math.sin(1/3*Math.PI);"down"===a?x=[-y+v,v]:"left"===a?x=[y,v]:"right"===a&&(x=[-y,v]),x&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},d),{x:x[0],y:x[1],r:f/2||l||5}),className:"link-point-bottom",name:"link-point-bottom"})}},getPath:function(t){var e=this.getOptions(t).direction,r=t.direction||e,n=this.getSize(t)[0],i=n*Math.sin(1/3*Math.PI),o=n*Math.sin(1/3*Math.PI),a=[["M",-o,i],["L",0,-i],["L",o,i],["Z"]];return"down"===r?a=[["M",-o,-i],["L",o,-i],["L",0,i],["Z"]]:"left"===r?a=[["M",-o,o-i],["L",o,-o],["L",o,o],["Z"]]:"right"===r&&(a=[["M",o,o-i],["L",-o,o],["L",-o,-o],["Z"]]),a},getShapeStyle:function(t){var e=this.getOptions(t).style,r={stroke:t.color},n=Object(ht.mix)({},e,r),i=this.getPath(t);return Object(k.__assign)({path:i},n)},update:function(t,e){var r=e.getContainer(),n=this.getOptions({}).style,i=this.getPath(t),o={stroke:t.color,path:i},a=e.get("keyShape"),s=Object(ht.mix)({},n,a.attr(),o);s=Object(ht.mix)(s,t.style),this.updateShape(t,e,s,!0),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var r=this.getOptions({}),n=r.linkPoints,i=r.direction,o=t.direction||i,a=e.find((function(t){return"link-point-left"===t.get("className")})),s=e.find((function(t){return"link-point-right"===t.get("className")})),u=e.find((function(t){return"link-point-top"===t.get("className")})),c=e.find((function(t){return"link-point-bottom"===t.get("className")})),h=n,f=a||s||u||c;f&&(h=f.attr());var l=Object(ht.mix)({},h,t.linkPoints),d=l.fill,p=l.stroke,g=l.lineWidth,v=l.size/2;v||(v=l.r);var y=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},m=y.left,b=y.right,x=y.top,w=y.bottom,M=this.getSize(t)[0],S={r:v,fill:d,stroke:p,lineWidth:g},_=null,O=M*Math.sin(1/3*Math.PI),E=M*Math.sin(1/3*Math.PI);"up"===o?_=[-E,O]:"down"===o?_=[-E,-O]:"left"===o&&(_=[-E,E-O]),_&&(a?m||void 0===m?a.attr(Object(k.__assign)(Object(k.__assign)({},S),{x:_[0],y:_[1]})):a.remove():m&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},S),{x:_[0],y:_[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}));var j=null;"up"===o?j=[E,O]:"down"===o?j=[E,-O]:"right"===o&&(j=[E,E-O]),j&&(s?b||void 0===b?s.attr(Object(k.__assign)(Object(k.__assign)({},S),{x:j[0],y:j[1]})):s.remove():b&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},S),{x:j[0],y:j[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}));var C=null;"up"===o?C=[E-O,-O]:"left"===o?C=[E,-O]:"right"===o&&(C=[-E,-O]),C&&(u?x||void 0===x?u.attr(Object(k.__assign)(Object(k.__assign)({},S),{x:C[0],y:C[1]})):u.remove():x&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},S),{x:C[0],y:C[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}));var A=null;"down"===o?A=[-E+O,O]:"left"===o?A=[E,O]:"right"===o&&(A=[-E,O]),A&&(c?w||void 0===w?c.attr(Object(k.__assign)(Object(k.__assign)({},S),{x:A[0],y:A[1]})):c.remove():w&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},S),{x:A[0],y:A[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))}},"single-node"),Pr.registerNode("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Q.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf"},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(t,e){var r=this.getOptions(t).preRect,n=void 0===r?{}:r,i=this.getShapeStyle(t),o=this.getSize(t),a=o[0],s=o[1],u=e.addShape("rect",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),c=n.show,h=Object(k.__rest)(n,["show"]);return c&&e.addShape("rect",{attrs:Object(k.__assign)({x:-a/2,y:-s/2,height:s},h),className:"pre-rect",name:"pre-rect",draggable:!0}),this.drawLogoIcon(t,e),this.drawStateIcon(t,e),this.drawLinkPoints(t,e),u},drawLogoIcon:function(t,e){var r=this.getOptions(t).logoIcon,n=void 0===r?{}:r,i=this.getSize(t)[0];if(n.show){var o=n.width,a=n.height,s=n.x,u=n.y,c=n.offset,h=Object(k.__rest)(n,["width","height","x","y","offset"]);e.addShape("image",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:s||-i/2+o+c,y:u||-a/2,width:o,height:a}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(t,e){var r=this.getOptions(t).stateIcon,n=void 0===r?{}:r,i=this.getSize(t)[0];if(n.show){var o=n.width,a=n.height,s=n.x,u=n.y,c=n.offset,h=Object(k.__rest)(n,["width","height","x","y","offset"]);e.addShape("image",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:s||i/2-o+c,y:u||-a/2,width:o,height:a}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(t,e){var r=this.getOptions(t).linkPoints,n=void 0===r?{}:r,i=n.top,o=n.left,a=n.right,s=n.bottom,u=n.size,c=n.r,h=Object(k.__rest)(n,["top","left","right","bottom","size","r"]),f=this.getSize(t),l=f[0],d=f[1];o&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:-l/2,y:0,r:u/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),a&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:l/2,y:0,r:u/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),i&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:-d/2,r:u/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),s&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},h),{x:0,y:d/2,r:u/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})},drawLabel:function(t,e){var r=this.getOptions(t),n=r.labelCfg,i=void 0===n?{}:n,o=r.logoIcon,a=void 0===o?{}:o,s=r.descriptionCfg,u=void 0===s?{}:s,c=this.getSize(t)[0],h=null,f=a.show,l=a.width,d=-c/2+i.offset;f&&(d=-c/2+l+i.offset);var p=i.style,g=u.style,v=u.paddingTop;return Object(ht.isString)(t.description)?(h=e.addShape("text",{attrs:Object(k.__assign)(Object(k.__assign)({},p),{x:d,y:-5,text:t.label}),className:"text-shape",name:"text-shape",draggable:!0}),e.addShape("text",{attrs:Object(k.__assign)(Object(k.__assign)({},g),{x:d,y:17+(v||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0})):h=e.addShape("text",{attrs:Object(k.__assign)(Object(k.__assign)({},p),{x:d,y:7,text:t.label}),draggable:!0}),h},getShapeStyle:function(t){var e=this.getOptions(t).style,r={stroke:t.color},n=Object(ht.mix)({},e,r),i=this.getSize(t),o=n.width||i[0],a=n.height||i[1];return Object(k.__assign)({x:-o/2,y:-a/2,width:o,height:a},n)},update:function(t,e){var r=this.getOptions(t),n=r.style,i=void 0===n?{}:n,o=r.labelCfg,a=void 0===o?{}:o,s=r.descriptionCfg,u=void 0===s?{}:s,c=this.getSize(t),h=c[0],f=c[1];e.get("keyShape").attr(Object(k.__assign)(Object(k.__assign)({},i),{x:-h/2,y:-f/2,width:h,height:f}));var l=e.getContainer(),d=l.find((function(t){return"rect-logo-icon"===t.get("className")})),p=d?d.attr():{},g=Object(ht.mix)({},p,t.logoIcon),v=g.width;void 0===v&&(v=this.options.logoIcon.width);var y=t.logoIcon?t.logoIcon.show:void 0,m=a.offset,b=-h/2+v+m;y||void 0===y||(b=-h/2+m);var x=l.find((function(t){return"node-label"===t.get("className")})),w=l.find((function(t){return"rect-description"===t.get("className")}));if(t.label)if(x){var M=t.labelCfg?t.labelCfg.style:{},S=Object(ht.mix)({},x.attr(),M);t.label&&(S.text=t.label),S.x=b,Object(ht.isString)(t.description)&&(S.y=-5),w&&(w.resetMatrix(),w.attr({x:b})),x.resetMatrix(),x.attr(S)}else l.addShape("text",{attrs:Object(k.__assign)(Object(k.__assign)({},a.style),{x:b,y:t.description?-5:7,text:t.label}),className:"node-label",name:"node-label",draggable:!0});if(Object(ht.isString)(t.description)){var _=u.paddingTop;if(w){M=t.descriptionCfg?t.descriptionCfg.style:{};var O=Object(ht.mix)({},w.attr(),M);Object(ht.isString)(t.description)&&(O.text=t.description),O.x=b,w.resetMatrix(),w.attr(Object(k.__assign)(Object(k.__assign)({},O),{y:17+(_||0)}))}else l.addShape("text",{attrs:Object(k.__assign)(Object(k.__assign)({},u.style),{x:b,y:17+(_||0),text:t.description}),className:"rect-description",name:"rect-description",draggable:!0})}var E=l.find((function(t){return"pre-rect"===t.get("className")}));if(E){var j=Object(ht.mix)({},E.attr(),t.preRect);E.attr(Object(k.__assign)(Object(k.__assign)({},j),{x:-h/2,y:-f/2,height:f}))}if(d)if(y||void 0===y){var C=g.width,A=g.height,P=g.x,I=g.y,T=g.offset,N=Object(k.__rest)(g,["width","height","x","y","offset"]);d.attr(Object(k.__assign)(Object(k.__assign)({},N),{x:P||-h/2+C+T,y:I||-A/2,width:C,height:A}))}else d.remove();else y&&this.drawLogoIcon(t,l);var D=l.find((function(t){return"rect-state-icon"===t.get("className")})),B=D?D.attr():{},R=Object(ht.mix)({},B,t.stateIcon);if(D){R.show||void 0===R.show||D.remove();var L=R.width,z=(A=R.height,P=R.x,I=R.y,R.offset),F=Object(k.__rest)(R,["width","height","x","y","offset"]);D.attr(Object(k.__assign)(Object(k.__assign)({},F),{x:P||h/2-L+z,y:I||-A/2,width:L,height:A}))}else R.show&&this.drawStateIcon(t,l);this.updateLinkPoints(t,l)}},"single-node"),Pr.registerNode("star",{options:{size:60,style:{stroke:Q.defaultNode.style.stroke,fill:Q.defaultNode.style.fill,lineWidth:Q.defaultNode.style.lineWidth},labelCfg:{style:{fill:Q.nodeLabel.style.fill,fontSize:Q.nodeLabel.style.fontSize}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Q.defaultNode.linkPoints.size,lineWidth:Q.defaultNode.linkPoints.lineWidth,fill:Q.defaultNode.linkPoints.fill,stroke:Q.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:Object(k.__assign)({},Q.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(t,e){var r=this.getOptions(t).icon,n=void 0===r?{}:r,i=this.getShapeStyle(t),o=e.addShape("path",{attrs:i,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0}),a=n.width,s=n.height;if(n.show)e.addShape("image",{attrs:Object(k.__assign)({x:-a/2,y:-s/2},n),className:this.type+"-icon",name:this.type+"-icon",draggable:!0});return this.drawLinkPoints(t,e),o},drawLinkPoints:function(t,e){var r=this.getOptions(t).linkPoints,n=void 0===r?{}:r,i=n.top,o=n.left,a=n.right,s=n.leftBottom,u=n.rightBottom,c=n.size,h=n.r,f=Object(k.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),l=this.getSize(t)[0];if(a){var d=Math.cos(.1*Math.PI)*l,p=Math.sin(.1*Math.PI)*l;e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},f),{x:d,y:-p,r:c/2||h||5}),className:"link-point-right",name:"link-point-right"})}if(i){d=Math.cos(.5*Math.PI)*l,p=Math.sin(.5*Math.PI)*l;e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},f),{x:d,y:-p,r:c/2||h||5}),className:"link-point-top",name:"link-point-top"})}if(o){d=Math.cos(.9*Math.PI)*l,p=Math.sin(.9*Math.PI)*l;e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},f),{x:d,y:-p,r:c/2||h||5}),className:"link-point-left",name:"link-point-left"})}if(s){d=Math.cos(1.3*Math.PI)*l,p=Math.sin(1.3*Math.PI)*l;e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},f),{x:d,y:-p,r:c/2||h||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(u){d=Math.cos(1.7*Math.PI)*l,p=Math.sin(1.7*Math.PI)*l;e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},f),{x:d,y:-p,r:c/2||h||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(t){for(var e=this.getSize(t)[0],r=3*e/8,n=t.innerR||r,i=[],o=0;o<5;o++){var a=Math.cos((18+72*o)/180*Math.PI)*e,s=Math.sin((18+72*o)/180*Math.PI)*e,u=Math.cos((54+72*o)/180*Math.PI)*n,c=Math.sin((54+72*o)/180*Math.PI)*n;0===o?i.push(["M",a,-s]):i.push(["L",a,-s]),i.push(["L",u,-c])}return i.push(["Z"]),i},getShapeStyle:function(t){var e=this.getOptions(t).style,r={stroke:t.color},n=Object(ht.mix)({},e,r),i=this.getPath(t);return Object(k.__assign)({path:i},n)},update:function(t,e){var r=e.getContainer(),n=this.getOptions({}).style,i=this.getPath(t),o={stroke:t.color,path:i},a=e.get("keyShape"),s=Object(ht.mix)({},n,a.attr(),o);s=Object(ht.mix)(s,t.style),this.updateShape(t,e,s,!0),this.updateLinkPoints(t,r)},updateLinkPoints:function(t,e){var r=this.getOptions({}).linkPoints,n=e.find((function(t){return"link-point-left"===t.get("className")})),i=e.find((function(t){return"link-point-right"===t.get("className")})),o=e.find((function(t){return"link-point-top"===t.get("className")})),a=e.find((function(t){return"link-point-left-bottom"===t.get("className")})),s=e.find((function(t){return"link-point-right-bottom"===t.get("className")})),u=r,c=n||i||o||a||s;c&&(u=c.attr());var h=Object(ht.mix)({},u,t.linkPoints),f=h.fill,l=h.stroke,d=h.lineWidth,p=h.size/2;p||(p=h.r);var g=t.linkPoints?t.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},v=g.left,y=g.right,m=g.top,b=g.leftBottom,x=g.rightBottom,w=this.getSize(t)[0],M={r:p,fill:f,stroke:l,lineWidth:d},S=Math.cos(.1*Math.PI)*w,_=Math.sin(.1*Math.PI)*w;i?y||void 0===y?i.attr(Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_})):i.remove():y&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0}),S=Math.cos(.5*Math.PI)*w,_=Math.sin(.5*Math.PI)*w,o?m||void 0===m?o.attr(Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_})):o.remove():m&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0}),S=Math.cos(.9*Math.PI)*w,_=Math.sin(.9*Math.PI)*w,n?v||void 0===v?n.attr(Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_})):n.remove():v&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0}),S=Math.cos(1.3*Math.PI)*w,_=Math.sin(1.3*Math.PI)*w,a?b||void 0===b?a.attr(Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_})):a.remove():b&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0}),S=Math.cos(1.7*Math.PI)*w,_=Math.sin(1.7*Math.PI)*w,s?x||void 0===x?s.attr(Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_})):a.remove():x&&e.addShape("circle",{attrs:Object(k.__assign)(Object(k.__assign)({},M),{x:S,y:-_}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0})}},"single-node"),Pr.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(t,e){var r=this.shapeType,n=this.getShapeStyle(t);delete n.fill;var i=e.addShape(r,{attrs:n,className:this.type+"-keyShape",name:this.type+"-keyShape",draggable:!0});return this.drawClip(t,i),i},drawClip:function(t,e){var r=this.getOptions(t).clipCfg;if(r.show){var n=r.type,i=r.x,o=r.y,a=r.style;if("circle"===n){var s=r.r;e.setClip({type:"circle",attrs:Object(k.__assign)({r:s,x:i,y:o},a)})}else if("rect"===n){var u=r.width,c=r.height,h=i-u/2,f=o-c/2;e.setClip({type:"rect",attrs:Object(k.__assign)({x:h,y:f,width:u,height:c},a)})}else if("ellipse"===n){var l=r.rx,d=r.ry;e.setClip({type:"ellipse",attrs:Object(k.__assign)({x:i,y:o,rx:l,ry:d},a)})}else if("polygon"===n){var p=r.points;e.setClip({type:"polygon",attrs:Object(k.__assign)({points:p},a)})}else if("path"===n){var g=r.path;e.setClip({type:"path",attrs:Object(k.__assign)({path:g},a)})}}},getShapeStyle:function(t){var e=this.getOptions(t).style,r=this.getSize(t),n=this.getOptions(t).img,i=r[0],o=r[1];return e&&(i=e.width||r[0],o=e.height||r[1]),Object(k.__assign)({x:-i/2,y:-o/2,width:i,height:o,img:n},e)},updateShapeStyle:function(t,e){var r=e.getContainer(),n=this.itemType+"-shape",i=r.find((function(t){return t.get("className")===n}))||e.getKeyShape(),o=this.getShapeStyle(t);i&&i.attr(o)}},"single-node");var ea=function(t){var e=t.x,r=t.y;return{x:e,y:r,centerX:e,centerY:r,minX:e,minY:r,maxX:e,maxY:r,height:0,width:0}},ra=function(t,e){return 2*Math.abs(t.centerX-e.centerX)<t.width+e.width&&2*Math.abs(t.centerY-e.centerY)<t.height+e.height},na=function(t){var e=[],r={};return t.forEach((function(t){var e=t.x+"-"+t.y;t.id=e,r[e]=t})),Object(ht.each)(r,(function(t){e.push(t)})),e},ia=function(t){return t=na(t)},oa=function(t,e){return[t,{x:t.x,y:e.y},e]},aa=function(t,e){return 0===t.width&&0===t.height?t:{centerX:t.centerX,centerY:t.centerY,minX:t.minX-e,minY:t.minY-e,maxX:t.maxX+e,maxY:t.maxY+e,height:t.height+2*e,width:t.width+2*e}},sa=function(t,e){return function(t,e){var r=Math.abs(t.x-e.centerX),n=Math.abs(t.y-e.centerY);return r/e.width>n/e.height}(e,t)?{x:e.x>t.centerX?t.maxX:t.minX,y:e.y}:{x:e.x,y:e.y>t.centerY?t.maxY:t.minY}},ua=function(t,e){var r=Math.min(t.minX,e.minX),n=Math.min(t.minY,e.minY),i=Math.max(t.maxX,e.maxX),o=Math.max(t.maxY,e.maxY);return{centerX:(r+i)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:i,maxY:o,height:o-n,width:i-r}},ca=function(t){var e=t.minX,r=t.minY,n=t.maxX,i=t.maxY;return[{x:e,y:r},{x:n,y:r},{x:n,y:i},{x:e,y:i}]},ha=function(t,e){var r=t.x,n=t.y;return r<e.minX||r>e.maxX||n<e.minY||n>e.maxY},fa=function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},la=function(t,e,r,n,i){return fa(t,e)+fa(t,r)+function(t,e){var r=0;return e.forEach((function(e){e&&(t.x===e.x&&(r+=-2),t.y===e.y&&(r+=-2))})),r}(t,[e,r,n,i])},da=function(t,e,r,n,i){void 0===i&&(i=0),t.unshift(e[n]),r[n]&&r[n]!==n&&i<=100&&da(t,e,r,r[n],i+1)},pa=function(t,e,r,n){var i=e.x-t.x,o=e.y-t.y,a=n.x-r.x,s=n.y-r.y,u=(-o*(t.x-r.x)+i*(t.y-r.y))/(-a*o+i*s),c=(a*(t.y-r.y)-s*(t.x-r.x))/(-a*o+i*s);return u>=0&&u<=1&&c>=0&&c<=1},ga=function(t,e,r){if(0===r.width&&0===r.height)return!1;var n=ca(r),i=n[0],o=n[1],a=n[2],s=n[3];return pa(t,e,i,o)||pa(t,e,i,s)||pa(t,e,o,a)||pa(t,e,a,s)},va=function(t,e,r,n,i,o,a){var s=[],u=[e],c={},h={},f={};h[e.id]=0,f[e.id]=la(e,r,e);var l={};t.forEach((function(t){l[t.id]=t}));for(var d=function(){var d,p,g,v,y=1/0;if(u.forEach((function(t){f[t.id]<y&&(y=f[t.id],d=t)})),d===r){var m=[];return da(m,l,c,r.id),{value:m}}g=d,(v=(p=u).indexOf(g))>-1&&p.splice(v,1),s.push(d),function(t,e,r,n){var i=[];return t.forEach((function(t){t!==e&&(t.x!==e.x&&t.y!==e.y||ga(t,e,r)||ga(t,e,n)||i.push(t))})),na(i)}(t,d,n,i).forEach((function(t){if(-1===s.indexOf(t)){-1===u.indexOf(t)&&u.push(t);var n=f[d.id]+fa(d,t);h[t.id]&&n>=h[t.id]||(c[t.id]=d.id,h[t.id]=n,f[t.id]=h[t.id]+la(t,r,e,o,a))}}))};u.length;){var p=d();if("object"==typeof p)return p.value}return[e,r]},ya=function(t,e){var r=[],n=t[0];return r.push("M"+n.x+" "+n.y),t.forEach((function(n,i){var o=t[i+1],a=t[i+2];if(o&&a)if(function(t,e,r){return!(t.x===e.x&&e.x===r.x||t.y===e.y&&e.y===r.y)}(n,o,a)){var s=function(t,e,r,n){var i=fa(t,e),o=fa(r,e);return i<n&&(n=i),o<n&&(n=o),[{x:e.x-n/i*(e.x-t.x),y:e.y-n/i*(e.y-t.y)},{x:e.x-n/o*(e.x-r.x),y:e.y-n/o*(e.y-r.y)}]}(n,o,a,e),u=s[0],c=s[1];r.push("L"+u.x+" "+u.y),r.push("Q"+o.x+" "+o.y+" "+c.x+" "+c.y),r.push("L"+c.x+" "+c.y)}else r.push("L"+o.x+" "+o.y);else o&&r.push("L"+o.x+" "+o.y)})),r.join("")},ma=function(t,e,r,n,i){var o,a;if(r&&r.getType())if("combo"===r.getType()){(o=r.getKeyShape().getCanvasBBox()||ea(t)).centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=r.getBBox();else o=ea(t);if(n&&n.getType())if("combo"===n.getType()){(a=n.getKeyShape().getCanvasBBox()||ea(e)).centerX=(a.minX+a.maxX)/2,a.centerY=(a.minY+a.maxY)/2}else a=n&&n.getBBox();else a=ea(e);if(ra(o,a))return ia(oa(t,e));var s=aa(o,i),u=aa(a,i);if(ra(s,u))return ia(oa(t,e));var c=sa(s,t),h=sa(u,e),f=function(t){void 0===t&&(t=[]);var e=[],r=[];t.forEach((function(t){e.push(t.x),r.push(t.y)}));var n=Math.min.apply(Math,e),i=Math.max.apply(Math,e),o=Math.min.apply(Math,r),a=Math.max.apply(Math,r);return{centerX:(n+i)/2,centerY:(o+a)/2,maxX:i,maxY:a,minX:n,minY:o,height:a-o,width:i-n}}([c,h]),l=(ua(s,u),ua(s,f)),d=ua(u,f),p=[];p=(p=p.concat(ca(l))).concat(ca(d));var g={x:(t.x+e.x)/2,y:(t.y+e.y)/2};[f,l,d].forEach((function(t){p=p.concat(function(t,e){return function(t,e){return e<t.minX||e>t.maxX?[]:[{x:e,y:t.minY},{x:e,y:t.maxY}]}(t,e.x).concat(function(t,e){return e<t.minY||e>t.maxY?[]:[{x:t.minX,y:e},{x:t.maxX,y:e}]}(t,e.y))}(t,g).filter((function(t){return ha(t,s)&&ha(t,u)})))})),[{x:c.x,y:h.y},{x:h.x,y:c.y}].forEach((function(t){ha(t,s)&&ha(t,u)&&p.push(t)})),p.unshift(c),p.push(h),p=na(p);var v=va(p,c,h,o,a,t,e);return v.unshift(t),v.push(e),ia(v)},ba={offset:20,maxAllowedDirectionChange:90,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:function(t,e){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},fallbackRoute:function(t,e,r,n,i){return ia(ma(t,e,r,n,i.offset))}},xa=function(t,e){var r=Math.floor(t/e);return r<0?0:r},wa=function(t,e){var r=e.x-t.x,n=e.y-t.y;return r||n?(360+180*Math.atan2(n,r)/Math.PI)%360:0},Ma=function(t,e){var r=Math.abs(t-e);return r>180?360-r:r},Sa=function(t,e,r){for(var n=1/0,i=0,o=e.length;i<o;i++){var a=r(t,e[i]);a<n&&(n=a)}return n},_a=function(t,e,r){var n=[];if(!e)return n;var i=r.directions,o=r.offset,a=e.getBBox(),s=aa(e.getBBox(),o);for(var u in s)s[u]=xa(s[u],r.gridSize);if(t.x>xa(a.minX,r.gridSize)&&t.x<xa(a.maxX,r.gridSize)&&t.y>xa(a.minY,r.gridSize)&&t.y<xa(a.maxY,r.gridSize))for(var c=0,h=i;c<h.length;c++){var f=h[c],l=[[{x:s.minX,y:s.minY},{x:s.maxX,y:s.minY}],[{x:s.minX,y:s.minY},{x:s.minX,y:s.maxY}],[{x:s.maxX,y:s.minY},{x:s.maxX,y:s.maxY}],[{x:s.minX,y:s.maxY},{x:s.maxX,y:s.maxY}]];for(u=0;u<4;u++){var d,p=l[u];(d=Bt(t,{x:t.x+f.stepX*s.width,y:t.y+f.stepY*s.height},p[0],p[1]))&&!ga(t,d,e.getBBox())&&(d.id=d.x+"-"+d.y,n.push(d))}}else(d=sa(s,t)).id=d.x+"-"+d.y,n.push(d);return n},ka=function(t,e,r,n,i){var o=St()(ba,i);o.obstacles=o.obstacles||[];var a=function(t,e,r){var n={};return t.forEach((function(t){if(t)for(var i=aa(t.getBBox(),r),o=xa(i.minX,e);o<=xa(i.maxX,e);o+=1)for(var a=xa(i.minY,e);a<=xa(i.maxY,e);a+=1){n[o+"-"+a]=!0}})),n}(o.obstacles.concat([r,n]),o.gridSize,o.offset),s={x:xa(t.x,o.gridSize),y:xa(t.y,o.gridSize)},u={x:xa(e.x,o.gridSize),y:xa(e.y,o.gridSize)};t.id=s.x+"-"+s.y,e.id=u.x+"-"+u.y;var c=_a(s,r,o),h=_a(u,n,o);c.forEach((function(t){delete a[t.id]})),h.forEach((function(t){delete a[t.id]}));for(var f={},l={},d={},p={},g={},v=0;v<c.length;v++){var y=c[v];f[y.id]=y,p[y.id]=0,g[y.id]=Sa(y,h,o.distFunc)}for(var m=function(t,e){var r,n=wa(t,e);if(d[t.id]){var i=wa({x:parseFloat(d[t.id].split("-")[0]),y:parseFloat(d[t.id].split("-")[1])},t);r=Ma(i,n)}else{var o=wa(s,t);r=Ma(o,n)}return r},b=o.maximumLoops,x=function(){var r,n=1/0;for(var i in f)g[i]<=n&&(n=g[i],r=f[i]);if(!r)return"break";if(h.findIndex((function(t){return t.x===r.x&&t.y===r.y}))>-1)return{value:function(r){var n=[e],i={x:parseFloat(r.split("-")[0]),y:parseFloat(r.split("-")[1]),id:r};for(m(i,u)&&n.unshift({x:i.x===u.x?e.x:i.x*o.gridSize,y:i.y===u.y?e.y:i.y*o.gridSize});d[r]&&d[r]!==r;){var a={x:parseFloat(r.split("-")[0]),y:parseFloat(r.split("-")[1]),id:r},c=d[r],h={x:parseFloat(c.split("-")[0]),y:parseFloat(c.split("-")[1]),id:c};m(h,a)&&n.unshift({x:h.x===a.x?n[0].x:h.x*o.gridSize,y:h.y===a.y?n[0].y:h.y*o.gridSize}),r=c}var f=parseFloat(r.split("-")[0]),l=parseFloat(r.split("-")[1]);return n[0].x=f===s.x?t.x:n[0].x,n[0].y=l===s.y?t.y:n[0].y,n.unshift(t),n}(r.id)};delete f[r.id],l[r.id]=!0;for(var c=0;c<o.directions.length;c++){var v=o.directions[c],y={x:r.x+v.stepX,y:r.y+v.stepY,id:r.x+v.stepX+"-"+(r.y+v.stepY)};if(!l[y.id]){var x=m(r,y);if(!(x>o.maxAllowedDirectionChange||a[y.id])){f[y.id]||(f[y.id]=y);var w=o.distFunc(r,y)+(isNaN(o.penalties[x])?o.gridSize:o.penalties[x]),M=p[r.id]+w;p[y.id]&&M>=p[y.id]||(d[y.id]=r.id,p[y.id]=M,g[y.id]=M+Sa(y,h,o.distFunc))}}}b-=1};Object.keys(f).length>0&&b>0;){var w=x();if("object"==typeof w)return w.value;if("break"===w)break}return o.fallbackRoute(t,e,r,n,o)};Pr.registerEdge("polyline",{options:{color:Q.defaultEdge.color,size:Q.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Q.defaultEdge.style.stroke,lineAppendWidth:Q.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Q.edgeLabel.style.fill,fontSize:Q.edgeLabel.style.fontSize}},routeCfg:{obstacles:[],maxAllowedDirectionChange:90,maximumLoops:1e3,gridSize:10},stateStyles:Object(k.__assign)({},Q.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(t,e){var r=this.getShapeStyle(t);return 0===r.radius&&delete r.radius,e.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r})},getShapeStyle:function(t){var e=this.options.style,r={stroke:t.color},n=Object(ht.mix)({},e,r,t.style);t=this.getPathPoints(t),this.radius=n.radius,this.offset=n.offset;var i=t.startPoint,o=t.endPoint,a=this.getControlPoints(t),s=[i];a&&(s=s.concat(a)),s.push(o);var u=t.sourceNode,c=t.targetNode,h=n.radius,f=this.options.routeCfg;f.offset=n.offset;var l=this.getPath(s,u,c,h,f);return(Object(ht.isArray)(l)&&l.length<=1||Object(ht.isString)(l)&&-1===l.indexOf("L"))&&(l="M0 0, L0 0"),(isNaN(i.x)||isNaN(i.y)||isNaN(o.x)||isNaN(o.y))&&(l="M0 0, L0 0"),Object(ht.mix)({},Q.defaultEdge.style,n,{lineWidth:t.size,path:l})},updateShapeStyle:function(t,e){var r=e.getContainer(),n={stroke:t.color},i=r.find((function(t){return"edge-shape"===t.get("className")}))||e.getKeyShape(),o=t.size,a=(t=this.getPathPoints(t)).startPoint,s=t.endPoint,u=this.getControlPoints(t),c=[a];u&&(c=c.concat(u)),c.push(s);var h=Object(ht.mix)({},n,i.attr(),t.style),f=t.sourceNode,l=t.targetNode,d=h.radius,p=this.options.routeCfg;p.offset=h.offset;var g=this.getPath(c,f,l,d,p);(Object(ht.isArray)(g)&&g.length<=1||Object(ht.isString)(g)&&-1===g.indexOf("L"))&&(g="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(s.x)||isNaN(s.y))&&(g="M0 0, L0 0");var v=Object(ht.mix)(n,i.attr(),{lineWidth:o,path:g},t.style);i&&i.attr(v)},getPath:function(t,e,r,n,i){var o;if(!i.offset||t.length>2){if(n)return ya(t,n);var a=[];return Object(ht.each)(t,(function(t,e){0===e?a.push(["M",t.x,t.y]):a.push(["L",t.x,t.y])})),a}return n?(o=ka(t[0],t[t.length-1],e,r,i),ya(o,n)):(o=ka(t[0],t[t.length-1],e,r,i),xe(o))}},"single-edge");var Oa={collapse:function(t,e,r){return[["M",t-r,e],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0],["M",t-r+4,e],["L",t+r-4,e]]},expand:function(t,e,r){return[["M",t-r,e],["a",r,r,0,1,0,2*r,0],["a",r,r,0,1,0,2*-r,0],["M",t-r+4,e],["L",t-r+2*r-4,e],["M",t-r+r,e-r+4],["L",t,e+r-4]]},upTriangle:function(t,e,r){var n=r*Math.cos(Math.PI/6),i=r*Math.sin(Math.PI/6);return[["M",t-n,e+i],["L",t+n,e+i],["L",t,e-r],["Z"]]},downTriangle:function(t,e,r){var n=r*Math.cos(Math.PI/6),i=r*Math.sin(Math.PI/6);return[["M",t-n,e-i],["L",t+n,e-i],["L",t,e+r],["Z"]]}},Ea=Pr,ja={mat3:ze.mat3,mix:Br.a,deepMix:St.a,transform:ze.transform},Ca=Object(k.__assign)(Object(k.__assign)(Object(k.__assign)(Object(k.__assign)(Object(k.__assign)(Object(k.__assign)({},ja),n),s),a),o),i),Aa=function(){function t(t){this._cfgs=St()(this.getDefaultCfgs(),t),this._events={},this.destroyed=!1}return t.prototype.getDefaultCfgs=function(){return{}},t.prototype.initPlugin=function(t){var e=this;e.set("graph",t);var r=e.getEvents(),n={};d()(r,(function(r,i){var o=Ue()(e,r);n[i]=o,t.on(i,o)})),this._events=n,this.init()},t.prototype.init=function(){},t.prototype.getEvents=function(){return{}},t.prototype.get=function(t){return this._cfgs[t]},t.prototype.set=function(t,e){this._cfgs[t]=e},t.prototype.destroy=function(){},t.prototype.destroyPlugin=function(){this.destroy();var t=this.get("graph"),e=this._events;d()(e,(function(e,r){t.off(r,e)})),this._events=null,this._cfgs=null,this.destroyed=!0},t}(),Pa="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",Ia=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{img:Pa}},e.prototype.init=function(){var t=this.get("graph"),e=t.get("minZoom"),r=t.get("container"),n=t.get("canvas").get("el"),i=t.get("width"),o=t.get("height"),a=this.get("img")||Pa,s=mt()("<div class='g6-grid-container' style=\"position: absolute; left:0;top:0;right:0;bottom:0;overflow: hidden;z-index: -1;\"></div>"),u=mt()("<div \n        class='g6-grid' \n        style='position:absolute;\n        transform-origin: 0% 0% 0px;\n        background-image: "+a+";\n        user-select: none\n        '></div>");s.appendChild(u),vt()(s,{width:i+"px",height:o+"px",left:r.offsetLeft+"px",top:r.offsetTop+"px"}),vt()(u,{width:i/e+"px",height:o/e+"px",left:"0px",top:"0px"}),r.insertBefore(s,n),this.set("container",s),this.set("gridContainer",u)},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var e=this.get("gridContainer"),r=t.matrix;r||(r=[1,0,0,0,1,0,0,0,1]);var n="matrix("+r[0]+", "+r[1]+", "+r[3]+", "+r[4]+", 0, 0)";vt()(e,{transform:n})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph").get("container"),e=this.get("container");t.removeChild(e)},e}(Aa),Ta=r(56),Na=r.n(Ta);Na()("\n  .g6-component-contextmenu {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .g6-contextmenu-ul {\n    padding: 0;\n    margin: 0;\n    list-style: none;\n  }\n\n");var Da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(t){return"\n          <ul class='g6-contextmenu-ul'>\n            <li>菜单项1</li>\n            <li>菜单项2</li>\n          </ul>\n        "},shouldBegin:function(t){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"]}},e.prototype.getEvents=function(){return{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),e=mt()("<div class="+(t||"g6-component-contextmenu")+"></div>");vt()(e,{top:"0px",position:"absolute",visibility:"hidden"});var r=this.get("container");r||(r=this.get("graph").get("container")),r.appendChild(e),this.set("menu",e)},e.prototype.onMenuShow=function(t){var e=this;if((t.preventDefault(),t.stopPropagation(),t.item)&&this.get("shouldBegin")(t)){var r=this.get("itemTypes");if(t.item&&t.item.getType&&-1===r.indexOf(t.item.getType()))e.onMenuHide();else if(t.item){var n=this.get("menu"),i=this.get("getContent"),o=this.get("graph"),a=i(t,o);_()(a)?n.innerHTML=a:n.innerHTML=a.outerHTML,this.removeMenuEventListener();var s=this.get("handleMenuClick");if(s){var u=function(e){s(e.target,t.item,o)};this.set("handleMenuClickWrapper",u),n.addEventListener("click",u)}var c=o.get("width"),h=o.get("height"),f=n.getBoundingClientRect(),l=this.get("offsetX")||0,d=this.get("offsetY")||0,p=o.getContainer().offsetTop,g=o.getContainer().offsetLeft,v=t.canvasX+g+l,y=t.canvasY+p+d;v+f.width>c&&(v=t.canvasX-f.width-l+g),y+f.height>h&&(y=t.canvasY-f.height-d+p),vt()(n,{top:y+"px",left:v+"px",visibility:"visible"});var m=function(t){e.onMenuHide()};document.body.addEventListener("click",m),this.set("handler",m)}}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),e=this.get("handler");t&&(this.get("menu").removeEventListener("click",t),this.set("handleMenuClickWrapper",null));e&&document.body.removeEventListener("click",e)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&vt()(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},e}(Aa),Ba=Math.max,Ra=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handleUpdateCanvas=Object(ht.debounce)((function(t){var r=e;r.destroyed||r.updateCanvas()}),100,!1),e}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,r=e.size,n=e.graph;if(!this.destroyed){var i=this.get("canvas").get("container"),o=mt()("\n      <div\n        class="+e.viewportClassName+"\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          border: 2px solid #1980ff'\n        draggable=true>\n      </div>"),a=0,s=0,u=!1,c=0,h=0,f=0,l=0,d=0,p=0;o.addEventListener("dragstart",(function(i){if(i.dataTransfer){var g=new Image;g.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",i.dataTransfer.setDragImage(g,0,0),i.dataTransfer.setData("text","view-port-minimap")}if(e.refresh=!1,i.target===o){var v=o.style;c=parseInt(v.left,10),h=parseInt(v.top,10),f=parseInt(v.width,10),l=parseInt(v.height,10),f>r[0]||l>r[1]||(p=n.getZoom(),d=t.get("ratio"),u=!0,a=i.clientX,s=i.clientY)}}),!1),o.addEventListener("drag",(function(t){if(u&&!x()(t.clientX)&&!x()(t.clientY)){var e=a-t.clientX,i=s-t.clientY;(c-e<0||c-e+f>=r[0])&&(e=0),(h-i<0||h-i+l>=r[1])&&(i=0),c-=e,h-=i,vt()(o,{left:c+"px",top:h+"px"}),n.translate(e*p/d,i*p/d),a=t.clientX,s=t.clientY}}),!1),o.addEventListener("dragend",(function(){u=!1,e.refresh=!0}),!1),this.set("viewport",o),i.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=(this.get("dx"),this.get("dy"),this.get("totaldx")),r=this.get("totaldy"),n=this.get("graph"),i=this.get("size"),o=n.get("width"),a=n.get("height"),s=n.getPointByCanvas(0,0),u=n.getPointByCanvas(o,a),c=this.get("viewport");c||this.initViewport();n.getZoom();var h=(u.x-s.x)*t,f=(u.y-s.y)*t,l=s.x*t+e,d=s.y*t+r,p=l+h,g=d+f;l<0&&(h+=l,l=0),p>i[0]&&(h-=p-i[0]),d<0&&(f+=d,d=0),g>i[1]&&(f-=g-i[1]),this.set("ratio",t);var v=l+"px",y=d+"px";vt()(c,{left:v,top:y,width:h+"px",height:f+"px"})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,e=this.get("canvas"),r=t.get("group");if(!r.destroyed){var n=r.clone();n.resetMatrix(),e.clear(),e.add(n),"svg"===t.get("renderer")&&this.updateVisible(n)}},e.prototype.updateVisible=function(t){var e=this;if(t.isGroup()||t.get("visible")){var r=t.get("children");if(!r||!r.length)return;r.forEach((function(t){t.get("visible")||t.hide(),e.updateVisible(t)}))}else t.hide()},e.prototype.updateKeyShapes=function(){var t=this,e=this._cfgs.graph;d()(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e)})),d()(e.getNodes(),(function(e){t.updateOneNodeKeyShape(e)})),this.clearDestroyedShapes()},e.prototype.updateOneNodeKeyShape=function(t){var e=this.get("canvas"),r=e.get("children")[0]||e.addGroup(),n=this.get("itemMap")||{},i=n[t.get("id")],o=t.getBBox(),a=t.get("keyShape").clone(),s=a.attr(),u={x:o.centerX,y:o.centerY};i?u=Object.assign(s,u):(i=a,r.add(i));var c=i.get("type");"rect"!==c&&"image"!==c||(u.x=o.minX,u.y=o.minY),i.attr(u),t.isVisible()||i.hide(),i.exist=!0,n[t.get("id")]=i,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,e=this._cfgs.graph;d()(e.getEdges(),(function(e){t.updateOneEdgeKeyShape(e)})),d()(e.getNodes(),(function(e){t.updateOneNodeDelegateShape(e)})),this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},e=Object.keys(t);if(e&&0!==e.length)for(var r=e.length-1;r>=0;r--){var n=t[e[r]],i=n.exist;n.exist=!1,i||(n.remove(),delete t[e[r]])}},e.prototype.updateOneEdgeKeyShape=function(t){var e=this.get("canvas"),r=e.get("children")[0]||e.addGroup(),n=this.get("itemMap")||{},i=n[t.get("id")];if(i){var o=t.get("keyShape").attr("path");i.attr("path",o)}else i=t.get("keyShape").clone(),r.add(i),i.toBack();t.isVisible()||i.hide(),i.exist=!0,n[t.get("id")]=i,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t){var e=this.get("canvas"),r=e.get("children")[0]||e.addGroup(),n=this.get("delegateStyle"),i=this.get("itemMap")||{},o=i[t.get("id")],a=t.getBBox();if(o){var s={x:a.minX,y:a.minY,width:a.width,height:a.height};o.attr(s)}else o=r.addShape("rect",{attrs:Object(k.__assign)({x:a.minX,y:a.minY,width:a.width,height:a.height},n),name:"minimap-node-shape"});t.isVisible()||o.hide(),o.exist=!0,i[t.get("id")]=o,this.set("itemMap",i)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this.get("graph"),e=this.get("size"),r=this.get("className"),n=this.get("container"),i=mt()("<div class='"+r+"' style='width: "+e[0]+"px; height: "+e[1]+"px; overflow: hidden'></div>");_()(n)&&(n=document.getElementById(n)),n?n.appendChild(i):t.get("container").appendChild(i),this.set("container",i);var o,a=mt()('<div class="g6-minimap-container" style="position: relative;"></div>');i.appendChild(a),o="svg"===t.get("renderer")?new Le.a({container:a,width:e[0],height:e[1]}):new Be.a({container:a,width:e[0],height:e[1]}),this.set("canvas",o),this.updateCanvas()},e.prototype.updateCanvas=function(){if(this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("size"),r=this.get("canvas"),n=this.get("type"),i=this.get("padding");if(!r.destroyed){switch(n){case"default":this.updateGraphShapes();break;case"keyShape":this.updateKeyShapes();break;case"delegate":this.updateDelegateShapes()}var o=r.get("children")[0];if(o){o.resetMatrix();var a=o.getCanvasBBox(),s=t.get("canvas").getBBox(),u=s.width,c=s.height;Number.isFinite(a.width)&&(u=Ba(a.width,u),c=Ba(a.height,c)),u+=2*i,c+=2*i;var h=Math.min(e[0]/u,e[1]/c),f=[1,0,0,0,1,0,0,0,1],l=0,d=0;Number.isFinite(a.minX)&&(l=-a.minX),Number.isFinite(a.minY)&&(d=-a.minY);var p=(e[0]-(u-2*i)*h)/2,g=(e[1]-(c-2*i)*h)/2;f=dt(f,[["t",l,d],["s",h,h],["t",p,g]]),o.setMatrix(f),this.set("ratio",h),this.set("totaldx",p+l*h),this.set("totaldy",g+d*h),this.set("dx",p),this.set("dy",g),this.updateViewport()}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){this.get("canvas").destroy();var t=this.get("container");t.parentNode.removeChild(t)},e}(Aa);function La(t,e,r){var n=t.x-e.x,i=t.y-e.y;return!r||Math.abs(n)>r||Math.abs(i)>r?Math.sqrt(n*n+i*i):r}function za(t,e){var r=(e.source.y-e.target.y)/(e.source.x-e.target.x),n=(r*r*e.source.x+r*(t.y-e.source.y)+t.x)/(r*r+1);return{x:n,y:r*(n-e.source.x)+e.source.y}}var Fa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),e=this.get("onTick");this.set("tick",(function(){e&&e(),t.refreshPositions()}))},e.prototype.bundling=function(t){var e=this;if(e.set("data",t),!e.isTicking()){var r=t.edges||[],n=t.nodes||[],i={},o=!1;if(n.forEach((function(t){null!==t.x&&null!==!t.y&&void 0!==t.x&&void 0!==!t.y||(o=!0),i[t.id]=t})),o)throw new Error("please layout the graph or assign x and y for nodes first");e.set("nodeIdMap",i);var a=e.get("divisions"),s=e.get("divRate"),u=e.divideEdges(a);e.set("edgePoints",u);var c=e.getEdgeBundles();e.set("edgeBundles",c);for(var h=e.get("cycles"),f=e.get("iterations"),l=e.get("iterRate"),d=e.get("lambda"),p=0;p<h;p++){for(var g=function(t){var n=[];r.forEach((function(t,r){if(t.source!==t.target){var o=i[t.source],s=i[t.target];n[r]=e.getEdgeForces({source:o,target:s},r,a,d);for(var c=0;c<a+1;c++)u[r][c].x+=n[r][c].x,u[r][c].y+=n[r][c].y}}))},v=0;v<f;v++)g();d/=2,a*=s,f*=l,u=e.divideEdges(a),e.set("edgePoints",u)}r.forEach((function(t,e){t.source!==t.target&&(t.shape="polyline",t.type="polyline",t.controlPoints=u[e].slice(1,u[e].length-1))})),e.get("graph").refresh()}},e.prototype.updateBundling=function(t){var e=this,r=t.data;if(r&&e.set("data",r),e.get("ticking")&&e.set("ticking",!1),Object.keys(t).forEach((function(r){e.set(r,t[r])})),t.onTick){var n=this.get("graph");e.set("tick",(function(){t.onTick(),n.refresh()}))}e.bundling(r)},e.prototype.divideEdges=function(t){var e=this,r=e.get("data").edges,n=e.get("nodeIdMap"),i=e.get("edgePoints");return i&&void 0!==i||(i=[]),r.forEach((function(r,o){i[o]&&void 0!==i[o]||(i[o]=[]);var a=n[r.source],s=n[r.target];if(1===t)i[o].push({x:a.x,y:a.y}),i[o].push({x:.5*(a.x+s.x),y:.5*(a.y+s.y)}),i[o].push({x:s.x,y:s.y});else{var u=(i[o]&&i[o]!==[]?e.getEdgeLength(i[o]):La({x:a.x,y:a.y},{x:s.x,y:s.y}))/(t+1),c=u,h=[{x:a.x,y:a.y}];i[o].forEach((function(t,e){if(0!==e){for(var r=La(t,i[o][e-1]);r>c;){var n=c/r,a={x:i[o][e-1].x,y:i[o][e-1].y};a.x+=n*(t.x-i[o][e-1].x),a.y+=n*(t.y-i[o][e-1].y),h.push(a),r-=c,c=u}c-=r}})),h.push({x:s.x,y:s.y}),i[o]=h}})),i},e.prototype.getEdgeLength=function(t){var e=0;return t.forEach((function(r,n){0!==n&&(e+=La(r,t[n-1]))})),e},e.prototype.getEdgeBundles=function(){var t=this,e=t.get("data").edges||[],r=t.get("bundleThreshold"),n=t.get("nodeIdMap"),i=t.get("edgeBundles");return i||(i=[]),e.forEach((function(t,e){i[e]&&void 0!==i[e]||(i[e]=[])})),e.forEach((function(o,a){var s=n[o.source],u=n[o.target];e.forEach((function(e,o){if(!(o<=a)){var c=n[e.source],h=n[e.target];t.getBundleScore({source:s,target:u},{source:c,target:h})>=r&&(i[a].push(o),i[o].push(a))}}))})),i},e.prototype.getBundleScore=function(t,e){return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=La({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=La({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),this.getAngleScore(t,e)*this.getScaleScore(t,e)*this.getPositionScore(t,e)*this.getVisibilityScore(t,e)},e.prototype.getAngleScore=function(t,e){return function(t,e){return t.x*e.x+t.y*e.y}({x:t.vx,y:t.vy},{x:e.vx,y:e.vy})/(t.length*e.length)},e.prototype.getScaleScore=function(t,e){var r=(t.length+e.length)/2;return 2/(r/Math.min(t.length,e.length)+Math.max(t.length,e.length)/r)},e.prototype.getPositionScore=function(t,e){var r=(t.length+e.length)/2;return r/(r+La({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2}))},e.prototype.getVisibilityScore=function(t,e){var r=this.getEdgeVisibility(t,e),n=this.getEdgeVisibility(e,t);return r<n?r:n},e.prototype.getEdgeVisibility=function(t,e){var r=za(e.source,t),n=za(e.target,t),i={x:(r.x+n.x)/2,y:(r.y+n.y)/2},o={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*La(i,o)/La(r,n))},e.prototype.getEdgeForces=function(t,e,r,n){for(var i=this.get("edgePoints"),o=this.get("K")/(La(t.source,t.target)*(r+1)),a=[{x:0,y:0}],s=1;s<r;s++){var u={x:0,y:0},c=this.getSpringForce({pre:i[e][s-1],cur:i[e][s],next:i[e][s+1]},o),h=this.getElectrostaticForce(s,e);u.x=n*(c.x+h.x),u.y=n*(c.y+h.y),a.push(u)}return a.push({x:0,y:0}),a},e.prototype.getSpringForce=function(t,e){var r=t.pre.x+t.next.x-2*t.cur.x,n=t.pre.y+t.next.y-2*t.cur.y;return{x:r*=e,y:n*=e}},e.prototype.getElectrostaticForce=function(t,e){var r=this.get("eps"),n=this.get("edgeBundles"),i=this.get("edgePoints"),o=n[e],a={x:0,y:0};return o.forEach((function(n){var o={x:i[n][t].x-i[e][t].x,y:i[n][t].y-i[e][t].y};if(Math.abs(o.x)>r||Math.abs(o.y)>r){var s=1/La(i[n][t],i[e][t]);a.x+=o.x*s,a.y+=o.y*s}})),a},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),t.prototype.destroy.call(this)},e}(Aa),Ya={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Ga=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:Object(p.clone)(Ya),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"}}return t},e.prototype.init=function(){var t=this.get("r");this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{}),this.set("r2",t*t);var e=this.get("d");this.set("molecularParam",(e+1)*t)},e.prototype.createDelegate=function(t){var e=this,r=this,n=r.get("delegate");n&&!n.destroyed||(r.magnify(t),(n=r.get("delegate")).on("dragstart",(function(t){r.set("delegateCenterDiff",{x:n.attr("x")-t.x,y:n.attr("y")-t.y})})),n.on("drag",(function(t){r.magnify(t)})),"wheel"===this.get("scaleDBy")&&n.on("mousewheel",(function(t){e.scaleDByWheel(t)})),"wheel"===this.get("scaleRBy")&&n.on("mousewheel",(function(t){r.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var e,r=this.get("graph"),n=this.get("delegate"),i=(n?{x:n.attr("x"),y:n.attr("y")}:void 0)||r.getPointByClient(t.clientX,t.clientY);e=t.originalEvent.wheelDelta<0?.95:1/.95;var o=this.get("maxR"),a=this.get("minR"),s=this.get("r");(s>(o||r.get("height"))&&e>1||s<(a||.05*r.get("height"))&&e<1)&&(e=1),s*=e,this.set("r",s),this.set("r2",s*s);var u=this.get("d");this.set("molecularParam",(u+1)*s),this.set("delegateCenterDiff",void 0),this.magnify(t,i)}},e.prototype.scaleRByDrag=function(t){if(t){var e,r=this.get("dragPrePos"),n=this.get("graph"),i=n.getPointByClient(t.clientX,t.clientY);e=t.x-r.x<0?.95:1/.95;var o=this.get("maxR"),a=this.get("minR"),s=this.get("r");(s>(o||n.get("height"))&&e>1||s<(a||.05*n.get("height"))&&e<1)&&(e=1),s*=e,this.set("r",s),this.set("r2",s*s);var u=this.get("d");this.set("molecularParam",(u+1)*s),this.magnify(t,i),this.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){if(t||t.originalEvent){t.preventDefault&&t.preventDefault();var e=0;e=t.originalEvent.wheelDelta<0?-.1:.1;var r=this.get("d")+e,n=this.get("maxD"),i=this.get("minD");if(r<n&&r>i){this.set("d",r);var o=this.get("r");this.set("molecularParam",(r+1)*o);var a=this.get("delegate"),s=a?{x:a.attr("x"),y:a.attr("y")}:void 0;this.set("delegateCenterDiff",void 0),this.magnify(t,s)}}},e.prototype.scaleDByDrag=function(t){var e=this.get("dragPrePos"),r=t.x-e.x>0?.1:-.1,n=this.get("d")+r,i=this.get("maxD"),o=this.get("minD");if(n<i&&n>o){this.set("d",n);var a=this.get("r");this.set("molecularParam",(n+1)*a),this.magnify(t)}this.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,e){this.restoreCache();var r=this.get("graph"),n=this.get("cachedMagnifiedModels"),i=this.get("cachedOriginPositions"),o=this.get("showLabel"),a=this.get("r"),s=this.get("r2"),u=this.get("d"),c=this.get("molecularParam"),h=r.getNodes(),f=h.length,l=e?{x:e.x,y:e.y}:{x:t.x,y:t.y};!this.get("dragging")||"mousemove"!==this.get("trigger")&&"click"!==this.get("trigger")||(l=this.get("cacheCenter"));var d=this.get("delegateCenterDiff");d&&(l.x+=d.x,l.y+=d.y),this.updateDelegate(l,a);for(var p=0;p<f;p++){var g=h[p].getModel(),v=g.x,y=g.y;if(!isNaN(v)&&!isNaN(y)){var m=(v-l.x)*(v-l.x)+(y-l.y)*(y-l.y);if(!isNaN(m)&&m<s&&0!==m){var b=Math.sqrt(m),x=c*b/(u*b+a),w=(v-l.x)/b,M=(y-l.y)/b;if(g.x=w*x+l.x,g.y=M*x+l.y,i[g.id]||(i[g.id]={x:v,y:y,texts:[]}),n.push(g),o&&2*b<a)for(var S=h[p].getContainer().getChildren(),_=S.length,k=0;k<_;k++){var O=S[k];"text"===O.get("type")&&(i[g.id].texts.push({visible:O.get("visible"),shape:O}),O.set("visible",!0))}}}}r.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this.get("cachedMagnifiedModels"),e=this.get("cachedOriginPositions"),r=t.length,n=0;n<r;n++){var i=t[n],o=e[i.id];i.x=o.x,i.y=o.y;for(var a=o.texts.length,s=0;s<a;s++){var u=o.texts[s];u.shape.set("visible",u.visible)}}this.set("cachedMagnifiedModels",[]),this.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var e=t.r,r=t.d,n=t.trigger,i=t.minD,o=t.maxD,a=t.minR,s=t.maxR,u=t.scaleDBy,c=t.scaleRBy;isNaN(t.r)||(this.set("r",e),this.set("r2",e*e)),isNaN(r)||this.set("d",r),isNaN(o)||this.set("maxD",o),isNaN(i)||this.set("minD",i),isNaN(s)||this.set("maxR",s),isNaN(a)||this.set("minR",a);var h,f=this.get("d"),l=this.get("r");(this.set("molecularParam",(f+1)*l),"mousemove"!==n&&"click"!==n&&"drag"!==n||this.set("trigger",n),"drag"===u||"wheel"===u||"unset"===u)&&(this.set("scaleDBy",u),this.get("delegate").remove(),this.get("delegate").destroy(),(h=this.get("dPercentText"))&&(h.remove(),h.destroy()));"drag"!==c&&"wheel"!==c&&"unset"!==c||(this.set("scaleRBy",c),this.get("delegate").remove(),this.get("delegate").destroy(),(h=this.get("dPercentText"))&&(h.remove(),h.destroy()))},e.prototype.updateDelegate=function(t,e){var r=this,n=this,i=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var a=i.get("group"),s=n.get("delegateStyle")||Ya;o=a.addShape("circle",{attrs:Object(k.__assign)({r:e/1.5,x:t.x,y:t.y},s),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&("wheel"===this.get("scaleRBy")?o.on("mousewheel",(function(t){n.scaleRByWheel(t)})):"drag"===this.get("scaleRBy")&&(o.on("dragstart",(function(t){n.set("dragging",!0),n.set("cacheCenter",{x:t.x,y:t.y}),n.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){n.scaleRByDrag(t)})),o.on("dragend",(function(t){n.set("dragging",!1)}))),"wheel"===this.get("scaleDBy")?o.on("mousewheel",(function(t){r.scaleDByWheel(t)})):"drag"===this.get("scaleDBy")&&(o.on("dragstart",(function(t){n.set("dragging",!0),n.set("cacheCenter",{x:t.x,y:t.y}),n.set("dragPrePos",{x:t.x,y:t.y})})),o.on("drag",(function(t){r.scaleDByDrag(t)})),o.on("dragend",(function(t){n.set("dragging",!1)}))))}else o.attr({x:t.x,y:t.y,r:e/1.5});if(n.get("showDPercent")){var u=Math.round((n.get("d")-n.get("minD"))/(n.get("maxD")-n.get("minD"))*100),c=n.get("dPercentText"),h=t.y+e/1.5+16;if(!c||c.destroyed)c=(a=i.get("group")).addShape("text",{attrs:{text:u+"%",x:t.x,y:h,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),n.set("dPercentText",c);else c.attr({text:u+"%",x:t.x,y:h})}n.set("delegate",o)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy());var r=this.get("dPercentText");r&&!r.destroyed&&(r.remove(),r.destroy())},e.prototype.destroy=function(){this.clear()},e}(Aa);Na()("\n  .g6-component-toolbar {\n    position: absolute;\n    list-style-type: none;\n    padding: 6px;\n    left: 0px;\n    top: 0px;\n    background-color: rgba(255, 255, 255, 0.9);\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    margin: 0;\n  }\n  .g6-component-toolbar li {\n    float: left;\n    text-align: center;\n    width: 35px;\n    height: 24px;\n    cursor: pointer;\n\t\tlist-style-type:none;\n    list-style: none;\n    margin-left: 0px;\n  }\n  .g6-component-toolbar li .icon {\n    opacity: 0.7;\n  }\n  .g6-component-toolbar li .icon:hover {\n    opacity: 1;\n  }\n");var qa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(t){return'\n          <ul class=\'g6-component-toolbar\'>\n            <li code=\'redo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>\n              </svg>\n            </li>\n            <li code=\'undo\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>\n              </svg>\n            </li>\n            <li  code=\'zoomOut\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>\n              </svg>\n            </li>\n            <li code=\'zoomIn\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">\n                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>\n              </svg>\n            </li>\n            <li code=\'realZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>\n              </svg>\n            </li>\n            <li code=\'autoZoom\'>\n              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">\n                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>\n              </svg>\n            </li>\n          </ul>\n        '}}},e.prototype.init=function(){var t=this,e=this.get("graph"),r=this.get("getContent")(e),n=r;Object(p.isString)(r)&&(n=mt()(r));var i=this.get("className");n.setAttribute("class",i||"g6-component-toolbar");var o=this.get("container");o||(o=this.get("graph").get("container")),o.appendChild(n),this.set("toolBar",n);var a=this.get("handleClick");n.addEventListener("click",(function(r){var n=r.path.filter((function(t){return"LI"===t.nodeName}));if(0!==n.length){var i=n[0].getAttribute("code");i&&(a?a(i,e):t.handleDefaultOperator(i,e))}}));var s=this.get("position");s&&vt()(n,{top:s.y+"px",left:s.x+"px"}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),e=document.querySelector('.g6-component-toolbar li[code="undo"]'),r=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),n=document.querySelector('.g6-component-toolbar li[code="redo"]'),i=document.querySelector('.g6-component-toolbar li[code="redo"] svg');e&&r&&n&&i&&t.on("stackchange",(function(t){var o=t.undoStack,a=t.redoStack,s=o.length,u=a.length;1===s?(e.setAttribute("style","cursor: not-allowed"),r.setAttribute("style","opacity: 0.4")):(e.removeAttribute("style"),r.removeAttribute("style")),0===u?(n.setAttribute("style","cursor: not-allowed"),i.setAttribute("style","opacity: 0.4")):(n.removeAttribute("style"),i.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),e=t.getUndoStack();if(e&&0!==e.length){var r=e.pop();if(r){var n=r.action;t.pushStack(n,Object(p.clone)(r.data),"redo");var i=r.data.before;if("add"===n&&(i=r.data.after),!i)return;switch(n){case"visible":Object.keys(i).forEach((function(e){var r=i[e];r&&r.forEach((function(e){var r=t.findById(e.id);e.visible?t.showItem(r,!1):t.hideItem(r,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var r=i[e];r&&r.forEach((function(e){t.updateItem(e.id,e,!1)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":Object.keys(i).forEach((function(e){var r=i[e];r&&r.forEach((function(e){var r=e.itemType;delete e.itemType,t.addItem(r,e,!1)}))}));break;case"add":Object.keys(i).forEach((function(e){var r=i[e];r&&r.forEach((function(e){t.removeItem(e.id,!1)}))}))}}}},e.prototype.redo=function(){var t=this.get("graph"),e=t.getRedoStack();if(e&&0!==e.length){var r=e.pop();if(r){var n=r.action,i=r.data.after;if(t.pushStack(n,Object(p.clone)(r.data)),"delete"===n&&(i=r.data.before),!i)return;switch(n){case"visible":Object.keys(i).forEach((function(e){var r=i[e];r&&r.forEach((function(e){var r=t.findById(e.id);e.visible?t.showItem(r,!1):t.hideItem(r,!1)}))}));break;case"render":case"update":Object.keys(i).forEach((function(e){var r=i[e];r&&r.forEach((function(e){t.updateItem(e.id,e,!1)}))}));break;case"changedata":t.changeData(i,!1);break;case"delete":i.edges&&i.edges.forEach((function(e){t.removeItem(e.id,!1)})),i.nodes&&i.nodes.forEach((function(e){t.removeItem(e.id,!1)})),i.combos&&i.combos.forEach((function(e){t.removeItem(e.id,!1)}));break;case"add":Object.keys(i).forEach((function(e){var r=i[e];r&&r.forEach((function(e){var r=e.itemType;delete e.itemType,t.addItem(r,e,!1)}))}))}}}},e.prototype.handleDefaultOperator=function(t,e){var r=e.getZoom();switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":if(1.25*r>5)return;e.zoomTo(1.1*r);break;case"zoomIn":if(.75*r<.3)return;e.zoomTo(.9*r);break;case"realZoom":e.zoomTo(1);break;case"autoZoom":e.fitView([20,20])}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}var r=this.get("handleClick");r&&t.removeEventListener("click",r)},e}(Aa);Na()("\n  .g6-component-tooltip {\n    border: 1px solid #e2e2e2;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #545454;\n    background-color: rgba(255, 255, 255, 0.9);\n    padding: 10px 8px;\n    box-shadow: rgb(174, 174, 174) 0px 0px 10px;\n  }\n  .tooltip-type {\n    padding: 0;\n    margin: 0;\n  }\n  .tooltip-id {\n    color: #531dab;\n  }\n");var Xa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(t){return"\n          <h4 class='tooltip-type'>类型："+t.item.getType()+"</h4>\n          <span class='tooltip-id'>ID："+t.item.getID()+"</span>\n        "},shouldBegin:function(t){return!0},itemTypes:["node","edge","combo"]}},e.prototype.getEvents=function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this.get("className")||"g6-component-tooltip",e=mt()("<div class="+t+"></div>"),r=this.get("container");r||(r=this.get("graph").get("container")),vt()(e,{position:"absolute",visibility:"hidden"}),r.appendChild(e),this.set("tooltip",e)},e.prototype.onMouseEnter=function(t){var e=this.get("itemTypes");if(!t.item||!t.item.getType||-1!==e.indexOf(t.item.getType())){var r=t.item,n=this.get("graph");this.currentTarget=r,this.showTooltip(t),n.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var e=this.get("itemTypes");t.item&&t.item.getType&&-1===e.indexOf(t.item.getType())||this.currentTarget&&t.item===this.currentTarget&&this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip(),this.get("graph").emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.showTooltip=function(t){if(t.item){var e=this.get("itemTypes");if(!t.item.getType||-1!==e.indexOf(t.item.getType())){var r=this.get("tooltip"),n=this.get("getContent")(t);_()(n)?r.innerHTML=n:r.innerHTML=n.outerHTML,this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&vt()(t,{visibility:"hidden"})},e.prototype.updatePosition=function(t){var e=this.get("shouldBegin"),r=this.get("tooltip");if(e(t)){var n=this.get("graph"),i=n.get("width"),o=n.get("height"),a=this.get("offsetX")||0,s=this.get("offsetY")||0,u=n.getPointByClient(t.clientX,t.clientY),c=n.getCanvasByPoint(u.x,u.y),h=c.x,f=c.y;h+=a,f+=s;var l=r.getBoundingClientRect();h+l.width>i&&(h=h-l.width-a),f+l.height>o&&(f=f-l.height-s),vt()(r,{left:h+"px",top:f+"px",visibility:"visible"})}else vt()(r,{visibility:"hidden"})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var e=this.get("container");e||(e=this.get("graph").get("container")),e.removeChild(t)}},e}(Aa),Va={};function Ha(t,e){Va[t]=e}var Ua=function(){function t(t){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=t,this.initCfg(),this.init()}return t.prototype.translate=function(t){return t},t.prototype.change=function(t){Object(ht.assign)(this.__cfg__,t),this.init()},t.prototype.clone=function(){return this.constructor(this.__cfg__)},t.prototype.getTicks=function(){var t=this;return Object(ht.map)(this.ticks,(function(e,r){return Object(ht.isObject)(e)?e:{text:t.getText(e,r),tickValue:e,value:t.scale(e)}}))},t.prototype.getText=function(t,e){var r=this.formatter,n=r?r(t,e):t;return Object(ht.isNil)(n)||!Object(ht.isFunction)(n.toString)?"":n.toString()},t.prototype.getConfig=function(t){return this.__cfg__[t]},t.prototype.init=function(){Object(ht.assign)(this,this.__cfg__),this.setDomain(),Object(ht.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},t.prototype.initCfg=function(){},t.prototype.setDomain=function(){},t.prototype.calculateTicks=function(){var t=this.tickMethod,e=[];if(Object(ht.isString)(t)){var r=Va[t];if(!r)throw new Error("There is no method to to calculate ticks!");e=r(this)}else Object(ht.isFunction)(t)&&(e=t(this));return e},t.prototype.rangeMin=function(){return Object(ht.head)(this.range)},t.prototype.rangeMax=function(){return Object(ht.last)(this.range)},t.prototype.calcPercent=function(t,e,r){return Object(ht.isNumber)(t)?(t-e)/(r-e):NaN},t.prototype.calcValue=function(t,e,r){return e+t*(r-e)},t}(),Wa=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cat",e.isCategory=!0,e}return Object(k.__extends)(e,t),e.prototype.translate=function(t){var e=Object(ht.indexOf)(this.values,t);return-1===e?Object(ht.isNumber)(t)?t:NaN:e},e.prototype.scale=function(t){var e=this.translate(t),r=this.calcPercent(e,this.min,this.max);return this.calcValue(r,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var e=this.max-this.min,r=this.calcPercent(t,this.rangeMin(),this.rangeMax()),n=Math.round(e*r)+this.min;return n<this.min||n>this.max?NaN:this.values[n]},e.prototype.getText=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e;return Object(ht.isNumber)(e)&&!this.values.includes(e)&&(i=this.values[i]),t.prototype.getText.apply(this,Object(k.__spreadArrays)([i],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if(Object(ht.isNil)(this.getConfig("min"))&&(this.min=0),Object(ht.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}},e}(Ua),Za=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,$a="[^\\s]+",Ka=/\[([^]*?)\]/gm;function Qa(t,e){for(var r=[],n=0,i=t.length;n<i;n++)r.push(t[n].substr(0,e));return r}var Ja=function(t){return function(e,r){var n=r[t].map((function(t){return t.toLowerCase()})).indexOf(e.toLowerCase());return n>-1?n:null}};function ts(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=0,i=e;n<i.length;n++){var o=i[n];for(var a in o)t[a]=o[a]}return t}var es=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],rs=["January","February","March","April","May","June","July","August","September","October","November","December"],ns=Qa(rs,3),is={dayNamesShort:Qa(es,3),dayNames:es,monthNamesShort:ns,monthNames:rs,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!=10?1:0)*t%10]}},os=ts({},is),as=function(t){return os=ts(os,t)},ss=function(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},us=function(t,e){for(void 0===e&&(e=2),t=String(t);t.length<e;)t="0"+t;return t},cs={D:function(t){return String(t.getDate())},DD:function(t){return us(t.getDate())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return String(t.getDay())},dd:function(t){return us(t.getDay())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return String(t.getMonth()+1)},MM:function(t){return us(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},YY:function(t){return us(String(t.getFullYear()),4).substr(2)},YYYY:function(t){return us(t.getFullYear(),4)},h:function(t){return String(t.getHours()%12||12)},hh:function(t){return us(t.getHours()%12||12)},H:function(t){return String(t.getHours())},HH:function(t){return us(t.getHours())},m:function(t){return String(t.getMinutes())},mm:function(t){return us(t.getMinutes())},s:function(t){return String(t.getSeconds())},ss:function(t){return us(t.getSeconds())},S:function(t){return String(Math.round(t.getMilliseconds()/100))},SS:function(t){return us(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return us(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+us(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)},Z:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+us(Math.floor(Math.abs(e)/60),2)+":"+us(Math.abs(e)%60,2)}},hs=function(t){return+t-1},fs=[null,"[1-9]\\d?"],ls=[null,$a],ds=["isPm",$a,function(t,e){var r=t.toLowerCase();return r===e.amPm[0]?0:r===e.amPm[1]?1:null}],ps=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(t){var e=(t+"").match(/([+-]|\d\d)/gi);if(e){var r=60*+e[1]+parseInt(e[2],10);return"+"===e[0]?r:-r}return 0}],gs={D:["day","[1-9]\\d?"],DD:["day","\\d\\d"],Do:["day","[1-9]\\d?"+$a,function(t){return parseInt(t,10)}],M:["month","[1-9]\\d?",hs],MM:["month","\\d\\d",hs],YY:["year","\\d\\d",function(t){var e=+(""+(new Date).getFullYear()).substr(0,2);return+(""+(+t>68?e-1:e)+t)}],h:["hour","[1-9]\\d?",void 0,"isPm"],hh:["hour","\\d\\d",void 0,"isPm"],H:["hour","[1-9]\\d?"],HH:["hour","\\d\\d"],m:["minute","[1-9]\\d?"],mm:["minute","\\d\\d"],s:["second","[1-9]\\d?"],ss:["second","\\d\\d"],YYYY:["year","\\d{4}"],S:["millisecond","\\d",function(t){return 100*+t}],SS:["millisecond","\\d\\d",function(t){return 10*+t}],SSS:["millisecond","\\d{3}"],d:fs,dd:fs,ddd:ls,dddd:ls,MMM:["month",$a,Ja("monthNamesShort")],MMMM:["month",$a,Ja("monthNames")],a:ds,A:ds,ZZ:ps,Z:ps},vs={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},ys=function(t){return ts(vs,t)},ms=function(t,e,r){if(void 0===e&&(e=vs.default),void 0===r&&(r={}),"number"==typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date pass to format");var n=[];e=(e=vs[e]||e).replace(Ka,(function(t,e){return n.push(e),"@@@"}));var i=ts(ts({},os),r);return(e=e.replace(Za,(function(e){return cs[e](t,i)}))).replace(/@@@/g,(function(){return n.shift()}))};function bs(t,e,r){if(void 0===r&&(r={}),"string"!=typeof e)throw new Error("Invalid format in fecha parse");if(e=vs[e]||e,t.length>1e3)return null;var n={year:(new Date).getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},i=[],o=[],a=e.replace(Ka,(function(t,e){return o.push(ss(e)),"@@@"})),s={},u={};a=ss(a).replace(Za,(function(t){var e=gs[t],r=e[0],n=e[1],o=e[3];if(s[r])throw new Error("Invalid format. "+r+" specified twice in format");return s[r]=!0,o&&(u[o]=!0),i.push(e),"("+n+")"})),Object.keys(u).forEach((function(t){if(!s[t])throw new Error("Invalid format. "+t+" is required in specified format")})),a=a.replace(/@@@/g,(function(){return o.shift()}));var c=t.match(new RegExp(a,"i"));if(!c)return null;for(var h=ts(ts({},os),r),f=1;f<c.length;f++){var l=i[f-1],d=l[0],p=l[2],g=p?p(c[f],h):+c[f];if(null==g)return null;n[d]=g}1===n.isPm&&null!=n.hour&&12!=+n.hour?n.hour=+n.hour+12:0===n.isPm&&12==+n.hour&&(n.hour=0);for(var v=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond),y=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],m=(f=0,y.length);f<m;f++)if(s[y[f][0]]&&n[y[f][0]]!==v[y[f][1]]())return null;return null==n.timezoneOffset?v:new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond))}var xs={format:ms,parse:bs,defaultI18n:is,setGlobalDateI18n:as,setGlobalDateMasks:ys};function ws(t,e){return(u.format||xs.format)(t,e)}function Ms(t){return Object(ht.isString)(t)&&(t=t.indexOf("T")>0?new Date(t).getTime():new Date(t.replace(/-/gi,"/")).getTime()),Object(ht.isDate)(t)&&(t=t.getTime()),t}var Ss=36e5,_s=24*Ss,ks=31*_s,Os=[["HH:mm:ss",1e3],["HH:mm:ss",1e4],["HH:mm:ss",3e4],["HH:mm",6e4],["HH:mm",6e5],["HH:mm",18e5],["HH",Ss],["HH",6*Ss],["HH",12*Ss],["YYYY-MM-DD",_s],["YYYY-MM-DD",4*_s],["YYYY-WW",7*_s],["YYYY-MM",ks],["YYYY-MM",4*ks],["YYYY-MM",6*ks],["YYYY",380*_s]];function Es(t,e,r){var n,i=(n=function(t){return t[1]},function(t,e,r,i){for(var o=Object(ht.isNil)(r)?0:r,a=Object(ht.isNil)(i)?t.length:i;o<a;){var s=o+a>>>1;n(t[s])>e?a=s:o=s+1}return o})(Os,(e-t)/r)-1,o=Os[i];return i<0?o=Os[0]:i>=Os.length&&(o=Object(ht.last)(Os)),o}var js=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="timeCat",e}return Object(k.__extends)(e,t),e.prototype.translate=function(t){t=Ms(t);var e=this.values.indexOf(t);return-1===e&&(e=Object(ht.isNumber)(t)&&t<this.values.length?t:NaN),e},e.prototype.getText=function(t,e){var r=this.translate(t);if(r>-1){var n=this.values[r],i=this.formatter;return n=i?i(n,e):ws(n,this.mask)}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var e=this.values;Object(ht.each)(e,(function(t,r){e[r]=Ms(t)})),e.sort((function(t,e){return t-e})),t.prototype.setDomain.call(this)},e}(Wa),Cs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isContinuous=!0,e}return Object(k.__extends)(e,t),e.prototype.scale=function(t){if(Object(ht.isNil)(t))return NaN;var e=this.rangeMin(),r=this.rangeMax();return this.max===this.min?e:e+this.getScalePercent(t)*(r-e)},e.prototype.init=function(){t.prototype.init.call(this);var e=this.ticks,r=Object(ht.head)(e),n=Object(ht.last)(e);r<this.min&&(this.min=r),n>this.max&&(this.max=n),Object(ht.isNil)(this.minLimit)||(this.min=r),Object(ht.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=Object(ht.getRange)(this.values),e=t.min,r=t.max;Object(ht.isNil)(this.min)&&(this.min=e),Object(ht.isNil)(this.max)&&(this.max=r),this.min>this.max&&(this.min=e,this.max=r)},e.prototype.calculateTicks=function(){var e=this,r=t.prototype.calculateTicks.call(this);return this.nice||(r=Object(ht.filter)(r,(function(t){return t>=e.min&&t<=e.max}))),r},e.prototype.getScalePercent=function(t){var e=this.max,r=this.min;return(t-r)/(e-r)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Ua),As=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="linear",e.isLinear=!0,e}return Object(k.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t);return this.min+e*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(Cs);function Ps(t,e){var r=Math.E;return e>=0?Math.pow(r,Math.log(e)/t):-1*Math.pow(r,Math.log(-e)/t)}function Is(t,e){return 1===t?1:Math.log(e)/Math.log(t)}function Ts(t,e,r){Object(ht.isNil)(r)&&(r=Math.max.apply(null,t));var n=r;return Object(ht.each)(t,(function(t){t>0&&t<n&&(n=t)})),n===r&&(n=r/e),n>1&&(n=1),n}var Ns=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e}return Object(k.__extends)(e,t),e.prototype.invert=function(t){var e,r=this.base,n=Is(r,this.max),i=this.rangeMin(),o=this.rangeMax()-i,a=this.positiveMin;if(a){if(0===t)return 0;var s=1/(n-(e=Is(r,a/r)))*o;if(t<s)return t/s*a}else e=Is(r,this.min);var u=(t-i)/o*(n-e)+e;return Math.pow(r,u)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){t.prototype.setDomain.call(this);var e=this.min;if(e<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");0===e&&(this.positiveMin=Ts(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var e=this.max,r=this.min;if(e===r)return 0;if(t<=0)return 0;var n=this.base,i=this.positiveMin;return i&&(r=1*i/n),t<i?t/i/(Is(n,e)-Is(n,r)):(Is(n,t)-Is(n,r))/(Is(n,e)-Is(n,r))},e}(Cs),Ds=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="pow",e}return Object(k.__extends)(e,t),e.prototype.invert=function(t){var e=this.getInvertPercent(t),r=this.exponent,n=Ps(r,this.max),i=Ps(r,this.min),o=e*(n-i)+i,a=o>=0?1:-1;return Math.pow(o,r)*a},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var e=this.max,r=this.min;if(e===r)return 0;var n=this.exponent;return(Ps(n,t)-Ps(n,r))/(Ps(n,e)-Ps(n,r))},e}(Cs),Bs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="time",e}return Object(k.__extends)(e,t),e.prototype.getText=function(t,e){var r=this.translate(t),n=this.formatter;return n?n(r,e):ws(r,this.mask)},e.prototype.scale=function(e){var r=e;return(Object(ht.isString)(r)||Object(ht.isDate)(r))&&(r=this.translate(r)),t.prototype.scale.call(this,r)},e.prototype.translate=function(t){return Ms(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,e=this.getConfig("min"),r=this.getConfig("max");if(Object(ht.isNil)(e)&&Object(ht.isNumber)(e)||(this.min=this.translate(this.min)),Object(ht.isNil)(r)&&Object(ht.isNumber)(r)||(this.max=this.translate(this.max)),t&&t.length){var n=[],i=1/0,o=i,a=0;Object(ht.each)(t,(function(t){var e=Ms(t);if(isNaN(e))throw new TypeError("Invalid Time: "+t+" in time scale!");i>e?(o=i,i=e):o>e&&(o=e),a<e&&(a=e),n.push(e)})),t.length>1&&(this.minTickInterval=o-i),Object(ht.isNil)(e)&&(this.min=i),Object(ht.isNil)(r)&&(this.max=a)}},e}(As),Rs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantize",e}return Object(k.__extends)(e,t),e.prototype.invert=function(t){var e=this.ticks,r=e.length,n=this.getInvertPercent(t),i=Math.floor(n*(r-1));if(i>=r-1)return Object(ht.last)(e);if(i<0)return Object(ht.head)(e);var o=e[i],a=i/(r-1);return o+(n-a)/((i+1)/(r-1)-a)*(e[i+1]-o)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var e=t.prototype.calculateTicks.call(this);return this.nice||(Object(ht.last)(e)!==this.max&&e.push(this.max),Object(ht.head)(e)!==this.min&&e.unshift(this.min)),e},e.prototype.getScalePercent=function(t){var e=this.ticks;if(t<Object(ht.head)(e))return 0;if(t>Object(ht.last)(e))return 1;var r=0;return Object(ht.each)(e,(function(e,n){if(!(t>=e))return!1;r=n})),r/(e.length-1)},e}(Cs),Ls=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="quantile",e}return Object(k.__extends)(e,t),e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Rs),zs={};function Fs(t,e){if(function(t){return zs[t]}(t))throw new Error("type '"+t+"' existed.");zs[t]=e}var Ys=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="identity",e.isIdentity=!0,e}return Object(k.__extends)(e,t),e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&Object(ht.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var e=this.range;return t<e[0]||t>e[1]?NaN:this.values[0]},e}(Ua),Gs=[1,5,2,2.5,4,3],qs=100*Number.EPSILON;function Xs(t,e,r,n,i,o){var a=Object(ht.size)(e),s=Object(ht.indexOf)(e,t),u=0,c=function(t,e){return(t%e+e)%e}(n,o);return(c<qs||o-c<qs)&&n<=0&&i>=0&&(u=1),1-s/(a-1)-r+u}function Vs(t,e,r){var n=Object(ht.size)(e);return 1-Object(ht.indexOf)(e,t)/(n-1)-r+1}function Hs(t,e,r,n,i,o){var a=(t-1)/(o-i),s=(e-1)/(Math.max(o,n)-Math.min(r,i));return 2-Math.max(a/s,s/a)}function Us(t,e){return t>=e?2-(t-1)/(e-1):1}function Ws(t,e,r,n){var i=e-t;return 1-.5*(Math.pow(e-n,2)+Math.pow(t-r,2))/Math.pow(.1*i,2)}function Zs(t,e,r){var n=e-t;if(r>n){var i=(r-n)/2;return 1-Math.pow(i,2)/Math.pow(.1*n,2)}return 1}function $s(t,e,r,n,i,o){if(void 0===r&&(r=5),void 0===n&&(n=!0),void 0===i&&(i=Gs),void 0===o&&(o=[.25,.2,.5,.05]),"number"!=typeof t||"number"!=typeof e)return{min:0,max:0,ticks:[]};if(t===e||1===r)return{min:t,max:e,ticks:[t]};for(var a={score:-2,lmin:0,lmax:0,lstep:0},s=1;s<1/0;){for(var u=0,c=i;u<c.length;u++){var h=c[u],f=Vs(h,i,s);if(Number.isNaN(f))throw new Error("NaN");if(o[0]*f+o[1]+o[2]+o[3]<a.score){s=1/0;break}for(var l=2;l<1/0;){var d=Us(l,r);if(o[0]*f+o[1]+o[2]*d+o[3]<a.score)break;for(var p=(e-t)/(l+1)/s/h,g=Math.ceil(Math.log10(p));g<1/0;){var v=s*h*Math.pow(10,g),y=Zs(t,e,v*(l-1));if(o[0]*f+o[1]*y+o[2]*d+o[3]<a.score)break;var m=Math.floor(e/v)*s-(l-1)*s,b=Math.ceil(t/v)*s;if(m>b)g+=1;else{for(var x=m;x<=b;x+=1){var w=x*(v/s),M=w+v*(l-1),S=v,_=Xs(h,i,s,w,M,S),k=Ws(t,e,w,M),O=Hs(l,r,t,e,w,M),E=o[0]*_+o[1]*k+o[2]*O+1*o[3];E>a.score&&(!n||w<=t&&M>=e)&&(a.lmin=w,a.lmax=M,a.lstep=S,a.score=E)}g+=1}}l+=1}}s+=1}for(var j=Number.isInteger(a.lstep)?0:Math.ceil(Math.abs(Math.log10(a.lstep))),C=[],A=a.lmin;A<=a.lmax;A+=a.lstep)C.push(A);var P=j?Object(ht.map)(C,(function(t){return Number.parseFloat(t.toFixed(j))})):C;return{min:Math.min(t,Object(ht.head)(P)),max:Math.max(e,Object(ht.last)(P)),ticks:P}}function Ks(t){var e=t.values,r=t.tickInterval,n=t.tickCount,i=e;if(Object(ht.isNumber)(r))return Object(ht.filter)(i,(function(t,e){return e%r==0}));var o=t.min,a=t.max;if(Object(ht.isNil)(o)&&(o=0),Object(ht.isNil)(a)&&(a=e.length-1),Object(ht.isNumber)(n)&&n<a-o){var s=$s(o,a,n,!1,[1,2,5,3,4,7,6,8,9]).ticks;return Object(ht.filter)(s,(function(t){return t>=o&&t<=a})).map((function(t){return e[t]}))}return e.slice(o,a+1)}var Qs=Math.sqrt(50),Js=Math.sqrt(10),tu=Math.sqrt(2),eu=function(){function t(){this._domain=[0,1]}return t.prototype.domain=function(t){return t?(this._domain=Array.from(t,Number),this):this._domain.slice()},t.prototype.nice=function(t){var e,r;void 0===t&&(t=5);var n,i=this._domain.slice(),o=0,a=this._domain.length-1,s=this._domain[o],u=this._domain[a];return u<s&&(s=(e=[u,s])[0],u=e[1],o=(r=[a,o])[0],a=r[1]),(n=ru(s,u,t))>0?n=ru(s=Math.floor(s/n)*n,u=Math.ceil(u/n)*n,t):n<0&&(n=ru(s=Math.ceil(s*n)/n,u=Math.floor(u*n)/n,t)),n>0?(i[o]=Math.floor(s/n)*n,i[a]=Math.ceil(u/n)*n,this.domain(i)):n<0&&(i[o]=Math.ceil(s*n)/n,i[a]=Math.floor(u*n)/n,this.domain(i)),this},t.prototype.ticks=function(t){return void 0===t&&(t=5),function(t,e,r){var n,i,o,a,s=-1;if(r=+r,(t=+t)===(e=+e)&&r>0)return[t];(n=e<t)&&(i=t,t=e,e=i);if(0===(a=ru(t,e,r))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),o=new Array(i=Math.ceil(e-t+1));++s<i;)o[s]=(t+s)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),o=new Array(i=Math.ceil(t-e+1));++s<i;)o[s]=(t-s)/a;n&&o.reverse();return o}(this._domain[0],this._domain[this._domain.length-1],t||5)},t}();function ru(t,e,r){var n=(e-t)/Math.max(0,r),i=Math.floor(Math.log(n)/Math.LN10),o=n/Math.pow(10,i);return i>=0?(o>=Qs?10:o>=Js?5:o>=tu?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Qs?10:o>=Js?5:o>=tu?2:1)}function nu(t,e,r){return("ceil"===r?Math.ceil(t/e):"floor"===r?Math.floor(t/e):Math.round(t/e))*e}function iu(t,e,r){var n=nu(t,r,"floor"),i=nu(e,r,"ceil");n=Object(ht.fixedBase)(n,r),i=Object(ht.fixedBase)(i,r);for(var o=[],a=n;a<=i;a+=r){var s=Object(ht.fixedBase)(a,r);o.push(s)}return{min:n,max:i,ticks:o}}function ou(t,e,r){var n,i=t.minLimit,o=t.maxLimit,a=t.min,s=t.max,u=t.tickCount,c=void 0===u?5:u,h=Object(ht.isNil)(i)?Object(ht.isNil)(e)?a:e:i,f=Object(ht.isNil)(o)?Object(ht.isNil)(r)?s:r:o;if(h>f&&(f=(n=[h,f])[0],h=n[1]),c<=2)return[h,f];for(var l=(f-h)/(c-1),d=[],p=0;p<c;p++)d.push(h+l*p);return d}function au(t,e,r){void 0===r&&(r=5);var n={max:0,min:0,ticks:[]};if(t===e)return{max:e,min:t,ticks:[t]};var i=(e-t)/r,o=Math.pow(10,Math.floor(Math.log10(i))),a=o<1?Math.ceil(Math.abs(Math.log10(o))):0,s=o;2*o-i<1.5*(i-s)&&5*o-i<2.75*(i-(s=2*o))&&10*o-i<1.5*(i-(s=5*o))&&(s=10*o);var u=Math.ceil(e/s),c=Math.floor(t/s);n.max=Math.max(u*s,e),n.min=Math.min(c*s,t);for(var h=Number.parseFloat((c*s).toFixed(a));h<e;)n.ticks.push(h),h+=s,a&&(h=Number.parseFloat(h.toFixed(a)));return n.ticks.push(h),n}function su(t,e){var r=t.length*e;return 1===e?t[t.length-1]:0===e?t[0]:r%1!=0?t[Math.ceil(r)-1]:t.length%2==0?(t[r-1]+t[r])/2:t[r]}function uu(t){return new Date(t).getFullYear()}function cu(t){return new Date(t,0,1).getTime()}function hu(t){return new Date(t).getMonth()}function fu(t,e){return new Date(t,e,1).getTime()}Ha("cat",Ks),Ha("time-cat",(function(t){var e=Ks(t),r=Object(ht.last)(t.values);return r!==Object(ht.last)(e)&&e.push(r),e})),Ha("wilkinson-extended",(function(t){var e=t.min,r=t.max,n=t.tickCount,i=t.nice,o=t.tickInterval,a=t.minLimit,s=t.maxLimit,u=$s(e,r,n,i).ticks;return Object(ht.isNil)(a)&&Object(ht.isNil)(s)?o?iu(e,r,o).ticks:u:ou(t,Object(ht.head)(u),Object(ht.last)(u))})),Ha("r-pretty",(function(t){var e=t.min,r=t.max,n=t.tickCount,i=t.tickInterval,o=t.minLimit,a=t.maxLimit,s=au(e,r,n).ticks;return Object(ht.isNil)(o)&&Object(ht.isNil)(a)?i?iu(e,r,i).ticks:s:ou(t,Object(ht.head)(s),Object(ht.last)(s))})),Ha("time",(function(t){var e=t.min,r=t.max,n=t.minTickInterval,i=t.tickInterval,o=t.tickCount;if(i)o=Math.ceil((r-e)/i);else{var a=(r-e)/(i=Es(e,r,o)[1])/o;a>1&&(i*=Math.ceil(a)),n&&i<n&&(i=n)}for(var s=[],u=e;u<r+i;u+=i)s.push(u);return s})),Ha("time-pretty",(function(t){var e=t.min,r=t.max,n=t.minTickInterval,i=t.tickCount,o=t.tickInterval,a=[];o||(o=(r-e)/i,n&&o<n&&(o=n));var s=uu(e);if(o>31536e6)for(var u=uu(r),c=Math.ceil(o/31536e6),h=s;h<=u+c;h+=c)a.push(cu(h));else if(o>ks){var f=Math.ceil(o/ks),l=hu(e),d=function(t,e){var r=uu(t),n=uu(e),i=hu(t);return 12*(n-r)+(hu(e)-i)%12}(e,r);for(h=0;h<=d+f;h+=f)a.push(fu(s,h+l))}else if(o>_s){var p=(b=new Date(e)).getFullYear(),g=b.getMonth(),v=b.getDate(),y=Math.ceil(o/_s),m=function(t,e){return Math.ceil((e-t)/_s)}(e,r);for(h=0;h<m+y;h+=y)a.push(new Date(p,g,v+h).getTime())}else if(o>Ss){p=(b=new Date(e)).getFullYear(),g=b.getMonth(),y=b.getDate();var b,x=b.getHours(),w=Math.ceil(o/Ss),M=function(t,e){return Math.ceil((e-t)/Ss)}(e,r);for(h=0;h<=M+w;h+=w)a.push(new Date(p,g,y,x+h).getTime())}else if(o>6e4){var S=function(t,e){return Math.ceil((e-t)/6e4)}(e,r),_=Math.ceil(o/6e4);for(h=0;h<=S+_;h+=_)a.push(e+6e4*h)}else{var k=o;k<1e3&&(k=1e3);var O=1e3*Math.floor(e/1e3),E=Math.ceil((r-e)/1e3),j=Math.ceil(k/1e3);for(h=0;h<E+j;h+=j)a.push(O+1e3*h)}return a.length>=512&&console.warn("Notice: current ticks length("+a.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+o+") is too small, increase the value to solve the problem!"),a})),Ha("log",(function(t){var e,r=t.base,n=t.tickCount,i=t.min,o=t.max,a=t.values,s=Is(r,o);if(i>0)e=Math.floor(Is(r,i));else{var u=Ts(a,r,o);e=Math.floor(Is(r,u))}for(var c=s-e,h=Math.ceil(c/n),f=[],l=e;l<s+h;l+=h)f.push(Math.pow(r,l));return i<=0&&f.unshift(0),f})),Ha("pow",(function(t){var e=t.exponent,r=t.tickCount,n=Math.ceil(Ps(e,t.max));return au(Math.floor(Ps(e,t.min)),n,r).ticks.map((function(t){var r=t>=0?1:-1;return Math.pow(t,e)*r}))})),Ha("quantile",(function(t){var e=t.tickCount,r=t.values;if(!r||!r.length)return[];for(var n=r.slice().sort((function(t,e){return t-e})),i=[],o=0;o<e;o++){var a=o/(e-1);i.push(su(n,a))}return i})),Ha("d3-linear",(function(t){var e=t.min,r=t.max,n=t.tickInterval,i=t.minLimit,o=t.maxLimit,a=function(t){var e=t.min,r=t.max,n=t.nice,i=t.tickCount,o=new eu;return o.domain([e,r]),n&&o.nice(i),o.ticks(i)}(t);return Object(ht.isNil)(i)&&Object(ht.isNil)(o)?n?iu(e,r,n).ticks:a:ou(t,Object(ht.head)(a),Object(ht.last)(a))})),Fs("cat",Wa),Fs("category",Wa),Fs("identity",Ys),Fs("linear",As),Fs("log",Ns),Fs("pow",Ds),Fs("time",Bs),Fs("timeCat",js),Fs("quantize",Rs),Fs("quantile",Ls);var lu=r(136);function du(t){return function(t){return Object(ht.map)(t,(function(t,e){return[0===e?"M":"L",t[0],t[1]]}))}(t)}function pu(t,e,r,n){void 0===n&&(n=!0);var i=new As({values:t}),o=new Wa({values:Object(ht.map)(t,(function(t,e){return e}))}),a=Object(ht.map)(t,(function(t,n){return[o.scale(n)*e,r-i.scale(t)*r]}));return n?function(t){if(t.length<=2)return du(t);var e=[];Object(ht.each)(t,(function(t){Object(ht.isEqual)(t,e.slice(e.length-2))||e.push(t[0],t[1])}));var r=le(e,!1),n=Object(ht.head)(t),i=n[0],o=n[1];return r.unshift(["M",i,o]),r}(a):du(a)}function gu(t,e,r){for(var n=new As({values:t}),i=new Wa({values:Object(ht.map)(t,(function(t,e){return e}))}),o=Object(ht.map)(t,(function(t,o){return[i.scale(o)*e,r-n.scale(t)*r]})),a=[],s=0;s<o.length;s++){var u=o[s],c=yu({x:u[0],y:u[1],y0:r,size:5});a.push.apply(a,c)}return function(t,e){void 0===e&&(e=!0);var r=[],n=t[0];r.push(["M",n.x,n.y]);for(var i=1,o=t.length;i<o;i++)r.push(["L",t[i].x,t[i].y]);e&&(r.push(["L",n.x,n.y]),r.push(["z"]));return r}(a)}function vu(t,e,r,n){var i=Object(k.__spreadArrays)(t),o=function(t,e){var r=new As({values:t}),n=Math.max(0,r.min);return e-r.scale(n)*e}(n,r);return i.push(["L",e,o]),i.push(["L",0,o]),i.push(["Z"]),i}function yu(t){var e,r,n,i,o=t.x,a=t.y,s=t.y0,u=t.size;Object(lu.isArray)(a)?(e=a[0],r=a[1]):(e=s,r=a),Object(lu.isArray)(o)?(n=o[0],i=o[1]):(n=o-u/2,i=o+u/2);var c=[{x:n,y:e},{x:n,y:r}];return c.push({x:i,y:r},{x:i,y:e}),c}var mu={stroke:"#C5C5C5",strokeOpacity:.85},bu={fill:"#CACED4",opacity:.85},xu=function(){function t(t){var e=t.x,r=void 0===e?0:e,n=t.y,i=void 0===n?0:n,o=t.width,a=void 0===o?200:o,s=t.height,u=void 0===s?26:s,c=t.smooth,h=void 0===c||c,f=t.isArea,l=void 0!==f&&f,d=t.data,p=void 0===d?[]:d,g=t.lineStyle,v=t.areaStyle,y=t.group,m=t.interval,b=void 0===m?null:m;this.group=y,this.x=r,this.y=i,this.width=a,this.height=u,this.data=p,this.smooth=h,this.isArea=l,this.lineStyle=Object.assign({},mu,g),this.areaStyle=Object.assign({},bu,v),this.intervalConfig=b,this.renderLine()}return t.prototype.renderLine=function(){var t=this,e=t.x,r=t.y,n=t.width,i=t.height,o=t.data,a=t.smooth,s=t.isArea,u=(t.backgroundStyle,t.lineStyle),c=t.areaStyle,h=this.group.addGroup({name:"trend-group"});if(o){var f=pu(o,n,i,a);if(h.addShape("path",{attrs:Object(k.__assign)({path:f},u)}),s){var l=vu(f,n,i,o);h.addShape("path",{attrs:Object(k.__assign)({path:l},c)})}}this.intervalConfig&&h.addShape("path",{attrs:Object(k.__assign)({path:gu(this.intervalConfig.data,n,i)},this.intervalConfig.style)}),h.move(e,r)},t.prototype.destory=function(){this.group.destroy()},t}(),wu={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},Mu={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},Su=function(){function t(t){var e=t.group,r=t.name,n=t.type,i=t.x,o=void 0===i?0:i,a=t.y,s=void 0===a?0:a,u=t.width,c=void 0===u?2:u,h=t.height,f=void 0===h?24:h,l=t.style,d=void 0===l?{}:l;this.group=e,this.name=r,this.handleType=n,this.x=o,this.y=s,this.width=c,this.height=f,"trend"===n?this.style=Object(k.__assign)(Object(k.__assign)({},wu),d):"simple"===n&&(this.style=Object(k.__assign)(Object(k.__assign)({},Mu),d)),this.renderHandle()}return t.prototype.setX=function(t){this.setXY(t,void 0)},t.prototype.setY=function(t){this.setXY(void 0,t)},t.prototype.setXY=function(t,e){Object(ht.isNumber)(t)&&(this.x=t),Object(ht.isNumber)(e)&&(this.y=e),this.updateXY()},t.prototype.renderHandle=function(){var t=this.width,e=this.height,r=this.style,n=this.name,i=r.fill,o=r.stroke,a=r.radius,s=r.opacity,u=r.cursor;this.handleGroup=this.group.addGroup(),"trend"===this.handleType?(this.background=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:e,fill:i,stroke:o,radius:a,opacity:s,cursor:u},name:n+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:i,stroke:o,radius:a,opacity:s,cursor:u},name:n+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e,r:2*t,fill:i,stroke:o,radius:a,opacity:s,cursor:u},name:n+"-handler"})):"simple"===this.handleType&&(this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:i,stroke:o,radius:a,opacity:s,cursor:u},name:n+"-handler"}),this.handleGroup.addShape("circle",{attrs:{x:t/2,y:e/2,r:2*t,fill:i,stroke:o,radius:a,opacity:s,cursor:u},name:n+"-handler"})),this.updateXY(),"trend"===this.handleType&&this.bindEvents()},t.prototype.bindEvents=function(){var t=this,e=this.name;this.handleGroup.on(e+"-handler:mouseenter",(function(){var e=t.style.highLightFill;t.background.attr("fill",e)})),this.handleGroup.on(e+"-handler:mouseleave",(function(){var e=t.style.fill;t.background.attr("fill",e)}))},t.prototype.show=function(){this.handleGroup.show()},t.prototype.hide=function(){this.handleGroup.hide()},t.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},t}(),_u=function(){function t(t){this.config=Object(ht.deepMix)({},t),this.init()}return t.prototype.update=function(t){this.config=Object(ht.deepMix)({},this.config,t),this.updateElement(),this.renderMarker()},t.prototype.init=function(){this.initElement(),this.renderMarker()},t.prototype.initElement=function(){var t=this.config,e=t.group,r=t.style;this.circle=e.addShape("circle",{attrs:Object(k.__assign)({x:this.config.x,y:this.config.y,r:this.config.r},r)}),this.startMarker=e.addShape("path",{attrs:{path:this.getStartMarkerPath(),fill:"#ccc"},name:"playPauseBtn"}),this.pauseGroupMarker=e.addGroup();var n=1/4*this.config.r,i=.5*this.config.r*Math.sqrt(3);this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-i/2,width:2.5*n,height:i,fill:"#fff"},name:"playPauseBtn"}),this.pauseLeftMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x-.375*this.config.r,y:this.config.y-i/2,width:n,height:i,fill:"#ccc"},name:"playPauseBtn"}),this.pauseRightMarker=this.pauseGroupMarker.addShape("rect",{attrs:{x:this.config.x+1/8*this.config.r,y:this.config.y-i/2,width:n,height:i,fill:"#ccc"},name:"playPauseBtn"})},t.prototype.updateElement=function(){this.circle.attr("x",this.config.x),this.circle.attr("y",this.config.y),this.circle.attr("r",this.config.r),this.startMarker.attr("path",this.getStartMarkerPath());var t=1/4*this.config.r,e=.5*this.config.r*Math.sqrt(3);this.pauseLeftMarker.attr("x",this.config.x-.375*this.config.r),this.pauseLeftMarker.attr("y",this.config.y-e/2),this.pauseLeftMarker.attr("width",t),this.pauseLeftMarker.attr("height",e),this.pauseRightMarker.attr("x",this.config.x+1/8*this.config.r),this.pauseRightMarker.attr("y",this.config.y-e/2),this.pauseRightMarker.attr("width",t),this.pauseRightMarker.attr("height",e)},t.prototype.renderMarker=function(){this.config.isPlay?(this.startMarker.hide(),this.pauseGroupMarker.show()):(this.startMarker.show(),this.pauseGroupMarker.hide())},t.prototype.getStartMarkerPath=function(){var t=.5*this.config.r*Math.sqrt(3);return[["M",this.config.x-t/Math.sqrt(3)/2,this.config.y-t/2],["L",this.config.x+t/Math.sqrt(3),this.config.y],["L",this.config.x-t/Math.sqrt(3)/2,this.config.y+t/2]]},t}(),ku={fill:"#607889",stroke:"#607889"},Ou={fill:"#fff"},Eu={fill:"green"},ju={speed:2,loop:!1,fill:"#fff",stroke:"#fff",hiddleToggle:!1,preBtnStyle:{fill:"#ccc",stroke:"#ccc"},nextBtnStyle:{fill:"#ccc",stroke:"#ccc"},playBtnStyle:{fill:"#fff",stroke:"#ccc"}},Cu=function(){function t(t){this.controllerCfg=Object(ht.deepMix)({},ju,t),this.group=t.group,this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType="range",this.init()}return t.prototype.init=function(){this.renderPlayButton()},t.prototype.getNextMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t+r,e],["L",t,e+r]]},t.prototype.getPreMarkerPath=function(t,e,r){return[["M",t,e-r],["L",t-r,e],["L",t,e+r]]},t.prototype.renderPlayButton=function(){var t=this.controllerCfg,e=t.width,r=t.height,n=t.x,i=t.y,o=t.hiddleToggle,a=t.fill,s=void 0===a?"#ccc":a,u=t.stroke,c=void 0===u?"green":u,h=t.playBtnStyle,f=void 0===h?ku:h,l=t.preBtnStyle,d=void 0===l?Ou:l,p=t.nextBtnStyle,g=void 0===p?Eu:p,v=r/2-5,y=i+10,m=this.group.addShape("rect",{attrs:{x:n,y:y,width:e,height:r,stroke:c,fill:s},name:"container-rect"});this.playButton?this.playButton.update({x:e/2,y:y,r:v}):this.playButton=new _u({group:this.group,x:e/2,y:y+v+5,r:v,isPlay:this.isPlay,style:f}),this.group.addShape("path",{attrs:Object(k.__assign)({path:this.getPreMarkerPath(e/2-5*v,y+v+5,.5*v)},d),name:"preStepBtn"}),this.group.addShape("path",{attrs:Object(k.__assign)({path:this.getPreMarkerPath(e/2-4.5*v,y+v+5,.5*v)},d),name:"preStepBtn"}),this.group.addShape("path",{attrs:Object(k.__assign)({path:this.getNextMarkerPath(e/2+5*v,y+v+5,.5*v)},g),name:"nextStepBtn"}),this.group.addShape("path",{attrs:Object(k.__assign)({path:this.getNextMarkerPath(e/2+4.5*v,y+v+5,.5*v)},g),name:"nextStepBtn"}),m.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent()},t.prototype.renderSpeedBtn=function(){var t=this.controllerCfg,e=t.y,r=t.width,n=t.hiddleToggle,i=this.group.addGroup({name:"speed-group"});this.speedGroup=i;for(var o=1,a=[],s=9,u=0;u<5;u++){var c=e+15+u*(u+1)+o;i.addShape("rect",{attrs:{x:r-(n?50:110),y:c,width:15,height:2,fill:"#ccc"},speed:s,name:"speed-rect"}),this.speedAxisY.push(c),a.push(s),s-=2,o++}for(u=0;u<4;u++)i.addShape("rect",{attrs:{x:r-(n?50:110),y:this.speedAxisY[u]+2,width:15,height:2*u+1,fill:"#fff",opacity:.3},speed:a[u]-1,name:"speed-rect"});this.speedText=i.addShape("text",{attrs:{x:r-(n?50:110)+20,y:this.speedAxisY[1]+15,text:"1.0X",fill:"#ccc"}}),this.speedPoint=i.addShape("path",{attrs:{path:this.getPath(r-(n?50:110),this.speedAxisY[4]),fill:"#ccc"}})},t.prototype.getPath=function(t,e){return[["M",t,e],["L",t-12,e-6],["L",t-12,e+6],["Z"]]},t.prototype.renderToggleTime=function(){var t=this.controllerCfg.width;this.toggleGroup=this.group.addGroup({name:"toggle-group"}),this.toggleGroup.addShape("rect",{attrs:{width:14,height:14,x:t-50,y:this.speedAxisY[1],fill:"#fff",stroke:"#ccc",lineWidth:2,radius:3},isChecked:!1,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:{path:[["M",t-50+3,this.speedAxisY[1]+6],["L",t-50+7,this.speedAxisY[1]+10],["L",t-50+12,this.speedAxisY[1]+4]],stroke:"green",lineWidth:3},capture:!1}),this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:{text:"单一时间",x:t-50+20,y:this.speedAxisY[1]+15,fill:"#ccc"}})},t.prototype.bindEvent=function(){var t=this,e=this.controllerCfg,r=e.width,n=e.hiddleToggle;this.speedGroup.on("speed-rect:click",(function(e){t.speedPoint.attr("path",t.getPath(r-(n?50:110),e.y)),t.currentSpeed=e.target.get("speed"),t.speedText.attr("text",t.currentSpeed+".0X"),t.group.emit("timebarConfigChanged",{speed:t.currentSpeed,type:t.currentType})})),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",(function(e){var r=e.target.get("isChecked");r?(t.checkedIcon.hide(),t.checkedText.attr("text","单一时间"),t.currentType="range"):(t.checkedIcon.show(),t.checkedText.attr("text","时间范围"),t.currentType="single"),e.target.set("isChecked",!r),t.group.emit("timebarConfigChanged",{type:t.currentType,speed:t.currentSpeed})}))},t.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},t}(),Au={fill:"#416180",opacity:.05},Pu={fill:"#416180",opacity:.15,radius:5},Iu={fill:"#5B8FF9",opacity:.3,cursor:"move"},Tu={width:2,height:24},Nu={textBaseline:"middle",fill:"#000",opacity:.45},Du=function(){function t(t){var e=this;this.prevX=0,this.onMouseDown=function(t){return function(r){e.currentHandler=t;var n=r.originalEvent;n.stopPropagation(),n.preventDefault(),e.prevX=Object(ht.get)(n,"touches.0.pageX",n.pageX);var i=e.canvas.get("container");i.addEventListener("mousemove",e.onMouseMove),i.addEventListener("mouseup",e.onMouseUp),i.addEventListener("mouseleave",e.onMouseUp),i.addEventListener("touchmove",e.onMouseMove),i.addEventListener("touchend",e.onMouseUp),i.addEventListener("touchcancel",e.onMouseUp)}},this.onMouseMove=function(t){t.stopPropagation(),t.preventDefault();var r=Object(ht.get)(t,"touches.0.pageX",t.pageX),n=r-e.prevX,i=e.adjustOffsetRange(n/e.width);e.updateStartEnd(i),e.updateUI(),e.prevX=r},this.onMouseUp=function(){e.currentHandler&&(e.currentHandler=void 0);var t=e.canvas.get("container");t&&(t.removeEventListener("mousemove",e.onMouseMove),t.removeEventListener("mouseup",e.onMouseUp),t.removeEventListener("mouseleave",e.onMouseUp),t.removeEventListener("touchmove",e.onMouseMove),t.removeEventListener("touchend",e.onMouseUp),t.removeEventListener("touchcancel",e.onMouseUp))};var r=t.x,n=void 0===r?0:r,i=t.y,o=void 0===i?0:i,a=t.width,s=void 0===a?100:a,u=t.height,c=t.padding,h=void 0===c?10:c,f=t.trendCfg,l=t.controllerCfg,d=void 0===l?{speed:1}:l,p=t.backgroundStyle,g=void 0===p?{}:p,v=t.foregroundStyle,y=void 0===v?{}:v,m=t.handlerStyle,b=void 0===m?{}:m,x=t.textStyle,w=void 0===x?{}:x,M=t.start,S=void 0===M?0:M,_=t.end,O=void 0===_?1:_,E=t.minText,j=void 0===E?"":E,C=t.maxText,A=void 0===C?"":C,P=t.group,I=t.graph,T=t.canvas,N=t.ticks,D=t.type;this.graph=I,this.canvas=T,this.group=P,this.timeBarType=D,this.x=n,this.y=o,this.width=s,this.height=u,this.padding=h,this.ticks=N,this.trendCfg=f,this.controllerCfg=d,this.currentSpeed=d.speed,"trend"===D?this.backgroundStyle=Object(k.__assign)(Object(k.__assign)({},Au),g):"simple"===D&&(this.backgroundStyle=Object(k.__assign)(Object(k.__assign)({},Pu),g)),this.foregroundStyle=Object(k.__assign)(Object(k.__assign)({},Iu),y),this.handlerStyle=Object(k.__assign)(Object(k.__assign)({},Tu),b),this.textStyle=Object(k.__assign)(Object(k.__assign)({},Nu),w),this.currentMode="range",this.start=S,this.end=O,this.minText=j,this.maxText=A,this.renderSlider()}return t.prototype.update=function(t){var e=t.x,r=t.y,n=t.width,i=t.height,o=t.minText,a=t.maxText,s=t.start,u=t.end;this.start=Math.min(1,Math.max(s,0)),this.end=Math.min(1,Math.max(u,0)),Object(ht.assign)(this,{x:e,y:r,width:n,height:i,minText:o,maxText:a}),this.updateUI()},t.prototype.setText=function(t,e){this.minTextShape.attr("text",t),this.maxTextShape.attr("text",e)},t.prototype.renderSlider=function(){var t=this,e=this.width,r=this.height,n=this.timeBarType;if("trend"===n&&Object(ht.size)(Object(ht.get)(this.trendCfg,"data"))){var i=new xu(Object(k.__assign)(Object(k.__assign)({x:this.x,y:this.y,width:e,height:r},this.trendCfg),{group:this.group}));this.trendComponent=i}var o=this.group.addGroup({name:"slider-group"});o.addShape("rect",{attrs:Object(k.__assign)({x:0,y:0,width:e,height:r},this.backgroundStyle)});var a=this.group.addGroup();"trend"===n?(this.minTextShape=a.addShape("text",{attrs:Object(k.__assign)({x:0,y:r/2+this.y,textAlign:"right",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=a.addShape("text",{attrs:Object(k.__assign)({y:r/2+this.y,textAlign:"left",text:this.maxText,silent:!1},this.textStyle),capture:!1})):(this.minTextShape=a.addShape("text",{attrs:Object(k.__assign)({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1},this.textStyle),capture:!1}),this.maxTextShape=a.addShape("text",{attrs:Object(k.__assign)({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1},this.textStyle),capture:!1})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Object(k.__assign)({x:0,y:this.y,height:r},this.foregroundStyle)});var s=Object(ht.get)(this.handlerStyle,"width",2),u=Object(ht.get)(this.handlerStyle,"height",24),c=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Su(Object(k.__assign)({name:"minHandlerShape",group:c,type:n,x:this.x,y:this.y,width:s,height:u,cursor:"ew-resize"},this.handlerStyle));var h=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Su(Object(k.__assign)({name:"maxHandlerShape",group:h,type:n,x:this.x,y:this.y,width:s,height:u,cursor:"ew-resize"},this.handlerStyle));var f=this.ticks,l=e/(f.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach((function(t){t.destroy()}));var d=-1/0;this.textList=f.map((function(e,n){t.tickPosList.push(t.x+n*l);var i=t.group.addShape("text",{attrs:{x:t.x+n*l,y:t.y+r+5,text:e,textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35}}),o=t.group.addShape("line",{attrs:{x1:t.x+n*l,y1:t.y+r+2,x2:t.x+n*l,y2:t.y+r+6,lineWidth:1,stroke:"#ccc"}}),a=i.getBBox();return a.minX>d?(i.show(),o.show(),d=a.minX+a.width+10):(i.hide(),o.hide()),i})),this.controllerBtnGroup=new Cu({group:this.group,x:this.x,y:this.y+r+25,width:e,height:40}),this.updateUI(),o.move(this.x,this.y),this.bindEvents()},t.prototype.bindEvents=function(){var t=this,e=this.group.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),e.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find((function(t){return"maxHandlerShape"===t.get("name")}));r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("playPauseBtn:click",(function(){t.isPlay=!t.isPlay,t.currentHandler=t.maxHandlerShape,t.changePlayStatus()})),this.group.on("nextStepBtn:click",(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(.01),t.updateUI()})),this.group.on("preStepBtn:click",(function(){t.currentHandler=t.maxHandlerShape,t.updateStartEnd(-.01),t.updateUI()})),this.group.on("timebarConfigChanged",(function(e){var r=e.type,n=e.speed;t.currentSpeed=n,t.currentMode=r,"single"===r?(t.minHandlerShape.hide(),t.foregroundShape.hide(),t.minTextShape.hide()):"range"===r&&(t.minHandlerShape.show(),t.foregroundShape.show(),t.minTextShape.show())}))},t.prototype.adjustTickIndex=function(t){for(var e=0;e<this.tickPosList.length-1;e++)if(this.tickPosList[e]<=t&&t<=this.tickPosList[e+1])return Math.abs(this.tickPosList[e]-t)<Math.abs(t-this.tickPosList[e+1])?e:e+1},t.prototype.adjustOffsetRange=function(t){switch(this.currentHandler){case this.minHandlerShape:var e=0-this.start,r=1-this.start;return Math.min(r,Math.max(e,t));case this.maxHandlerShape:e=0-this.end,r=1-this.end;return Math.min(r,Math.max(e,t));case this.foregroundShape:e=0-this.start,r=1-this.end;return Math.min(r,Math.max(e,t));default:return 0}},t.prototype.updateStartEnd=function(t){switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=t,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)];break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=t,this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)];break;case this.foregroundShape:this.start+=t,this.end+=t,this.minText=this.ticks[this.adjustTickIndex(this.start*this.width)],this.maxText=this.ticks[this.adjustTickIndex(this.end*this.width)]}},t.prototype.updateUI=function(){var t=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var e=this.start*this.width,r=this.end*this.width;this.foregroundShape.attr("x",e),this.foregroundShape.attr("width",r-e);var n=Object(ht.get)(this.handlerStyle,"width",2);this.setText(this.minText,this.maxText);var i=this.dodgeText([e,r]),o=i[0],a=i[1];this.minHandlerShape.setX(e-n/2),Object(ht.each)(o,(function(e,r){return t.minTextShape.attr(r,e)})),this.maxHandlerShape.setX(r-n/2),Object(ht.each)(a,(function(e,r){return t.maxTextShape.attr(r,e)})),"range"===this.currentMode?this.graph.emit("valueChange",{value:[this.start,this.end].sort()}):"single"===this.currentMode&&this.graph.emit("valueChange",{value:[this.end,this.end]})},t.prototype.dodgeText=function(t){var e,r,n=Object(ht.get)(this.handlerStyle,"width",2),i=this.minTextShape,o=this.maxTextShape,a=t[0],s=t[1],u=!1;a>s&&(a=(e=[s,a])[0],s=e[1],i=(r=[o,i])[0],o=r[1],u=!0);var c=i.getBBox(),h=o.getBBox(),f=null,l=null;return"trend"===this.timeBarType?(f=c.width>a-2?{x:a+n/2+2,textAlign:"left"}:{x:a-n/2-2,textAlign:"right"},l=h.width>this.width-s-2?{x:s-n/2-2,textAlign:"right"}:{x:s+n/2+2,textAlign:"left"}):"simple"===this.timeBarType&&(f=c.width>a-2?{x:a+n/2+2,textAlign:"center"}:{x:a-n/2-2,textAlign:"center"},l=h.width>this.width-s-2?{x:s-n/2-2,textAlign:"center"}:{x:s+n/2+2,textAlign:"center"}),u?[l,f]:[f,l]},t.prototype.startPlay=function(){var t=this;return window.requestAnimationFrame((function(){var e=t,r=e.ticks,n=e.width,i=t.currentSpeed,o=n/r.length/(1e3*(10-i)/60),a=t.adjustOffsetRange(o/t.width);t.updateStartEnd(a),t.updateUI(),t.isPlay&&(t.playHandler=t.startPlay())}))},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timelineend",null))},t.prototype.destory=function(){this.graph.off("valueChange");var t=this.group,e=t.find((function(t){return"minHandlerShape"===t.get("name")}));e&&(e.off("minHandlerShape-handler:mousedown"),e.off("minHandlerShape-handler:touchstart"),e.destroy());var r=t.find((function(t){return"maxHandlerShape"===t.get("name")}));r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off("timebarConfigChanged"),t.destroy(),this.trendComponent&&this.trendComponent.destory()},t}(),Bu=function(){function t(t){var e=t.x,r=void 0===e?0:e,n=t.y,i=void 0===n?0:n,o=t.container,a=t.text,s=t.padding,u=void 0===s?[4,4,4,4]:s,c=t.className,h=void 0===c?"g6-component-timebar-tooltip":c,f=t.backgroundColor,l=void 0===f?"#000":f,d=t.textColor,p=void 0===d?"#fff":d,g=t.opacity,v=void 0===g?.8:g,y=t.fontSize,m=void 0===y?12:y;this.container=o,this.className=h,this.backgroundColor=l,this.textColor=p,this.x=r,this.y=i,this.text=a,this.padding=u,this.opacity=v,this.fontSize=m,this.render()}return t.prototype.render=function(){var t=this.className,e=(this.x,this.y,this.backgroundColor),r=this.textColor,n=this.text,i=this.padding,o=this.opacity,a=this.fontSize,s=this.container,u=mt()("<div class='"+t+"' style=\"position: absolute; width: fit-content; height: fit-content; opacity: "+o+'"></div>');Object(ht.isString)(s)&&(s=document.getElementById(s)),s.appendChild(u),this.parentHeight=s.offsetHeight,this.parentWidth=s.offsetWidth,vt()(u,{visibility:"hidden",top:0,left:0});var c=mt()("\n      <div style='position: absolute; white-space:nowrap; background-color: "+e+"; font-size: "+a+"px; border-radius: 4px; width: fit-content; height: fit-content; color: "+r+"; padding: "+i[0]+"px "+i[1]+"px "+i[2]+"px "+i[3]+"px'></div>");c.innerHTML=n,u.appendChild(c),this.backgroundDOM=c;var h=mt()("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid "+e+"'></div>");u.appendChild(h),this.arrowDOM=h,this.container=u},t.prototype.show=function(t){var e=t.text,r=t.x;t.y,t.clientX,t.clientY;this.backgroundDOM.innerHTML=e;var n=this.backgroundDOM.offsetWidth,i=this.backgroundDOM.offsetHeight,o=this.arrowDOM.offsetWidth,a=this.arrowDOM.offsetHeight;vt()(this.container,{top:-i-a+"px",left:r+"px",visibility:"visible"}),vt()(this.backgroundDOM,{marginLeft:-n/2+"px"}),vt()(this.arrowDOM,{marginLeft:-o/2+"px",top:i+"px"});var s=r-n/2,u=r+n/2;s<0?vt()(this.backgroundDOM,{marginLeft:-n/2-s+"px"}):u>this.parentWidth&&vt()(this.backgroundDOM,{marginLeft:-n/2-u+this.parentWidth+12+"px"})},t.prototype.hide=function(){vt()(this.container,{top:0,left:0,visibility:"hidden"})},t}(),Ru={fill:"#5B8FF9"},Lu={fill:"#e6e8e9"},zu=function(){function t(t){this.frameCount=0;var e=t.graph,r=t.canvas,n=t.group,i=t.width,o=t.height,a=t.padding,s=t.data,u=t.start,c=t.end,h=t.x,f=void 0===h?0:h,l=t.y,d=void 0===l?0:l,p=t.tickLabelFormatter,g=t.selectedTickStyle,v=void 0===g?Ru:g,y=t.unselectedTickStyle,m=void 0===y?Lu:y,b=t.tooltipBackgroundColor,x=t.tooltipFomatter;this.graph=e,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=i,this.height=o,this.padding=a,this.data=s,this.start=u,this.end=c,this.tickLabelFormatter=p,this.selectedTickStyle=v,this.unselectedTickStyle=m,this.x=f,this.y=d,this.tooltipBackgroundColor=b,this.tooltipFomatter=x,this.renderSlices(),this.initEvent()}return t.prototype.renderSlices=function(){var t=this,e=t.width,r=t.height,n=t.padding,i=t.data,o=t.start,a=t.end,s=t.tickLabelFormatter,u=t.selectedTickStyle,c=t.unselectedTickStyle,h=e-2*n,f=r-(3*n+4+10)-2*n,l=i.length,d=(h-2*(l-1))/l;this.tickWidth=d;var p=this.sliceGroup,g=[],v=[],y=Math.round(l*o),m=Math.round(l*a);this.startTickRectId=y,this.endTickRectId=m,i.forEach((function(t,r){var i=r>=y&&r<=m?u:c,o=p.addShape("rect",{attrs:Object(k.__assign)({x:n+r*(d+2),y:n,width:d,height:f},i),draggable:!0,name:"tick-rect-"+r}),a=p.addShape("rect",{attrs:{x:n+r*d+2*(2*r-1)/2,y:n,width:0===r||r===l-1?d+1:d+2,height:f,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-"+r});a.toFront();var h,b=o.getBBox(),x=(b.minX+b.maxX)/2;if(g.push({rect:o,pickRect:a,value:t.date,x:x,y:b.minY}),s?(h=s(t),!Object(ht.isString)(h)&&h&&(h=t.date)):r%Math.round(l/10)==0&&(h=t.date),h){v.push(h);var w=b.maxY+2*n;p.addShape("line",{attrs:{stroke:"#BFBFBF",x1:x,y1:w,x2:x,y2:w+4}});var M=w+4+n,S=p.addShape("text",{attrs:{fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:x,y:M,textAlign:"center",text:h,textBaseline:"top",fontSize:10},capture:!1}),_=S.getBBox();_.maxX>e?S.attr("textAlign","right"):_.minX<0&&S.attr("textAlign","left")}})),this.tickRects=g;var b=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Cu({group:b,x:this.x,y:this.y+r+5,width:e,height:40,hiddleToggle:!0,speed:this.currentSpeed})},t.prototype.initEvent=function(){var t=this,e=this.sliceGroup;e.on("click",(function(e){var r=e.target;if("rect"===r.get("type")&&r.get("name")){var n=parseInt(r.get("name").split("-")[2],10);if(!isNaN(n)){var i=t.tickRects,o=t.unselectedTickStyle;i.forEach((function(t){t.rect.attr(o)}));var a=t.selectedTickStyle;i[n].rect.attr(a),t.startTickRectId=n,t.endTickRectId=n;var s=n/i.length;t.graph.emit("valueChange",{value:[s,s]})}}})),e.on("dragstart",(function(e){var r=t.tickRects,n=t.unselectedTickStyle;r.forEach((function(t){t.rect.attr(n)}));var i=e.target,o=parseInt(i.get("name").split("-")[2],10),a=t.selectedTickStyle;r[o].rect.attr(a),t.startTickRectId=o;var s=o/r.length;t.graph.emit("valueChange",{value:[s,s]}),t.dragging=!0})),e.on("dragover",(function(e){if(t.dragging&&"rect"===e.target.get("type")){for(var r=parseInt(e.target.get("name").split("-")[2],10),n=t.startTickRectId,i=t.tickRects,o=t.selectedTickStyle,a=t.unselectedTickStyle,s=0;s<i.length;s++){var u=s>=n&&s<=r?o:a;i[s].rect.attr(u)}var c=i.length;t.endTickRectId=r;var h=n/c,f=r/c;t.graph.emit("valueChange",{value:[h,f]})}})),e.on("drop",(function(e){if(t.dragging&&(t.dragging=!1,"rect"===e.target.get("type"))){var r=t.startTickRectId,n=parseInt(e.target.get("name").split("-")[2],10);if(!(n<r)){var i=t.selectedTickStyle,o=t.tickRects;o[n].rect.attr(i),t.endTickRectId=n;var a=o.length,s=r/a,u=n/a;t.graph.emit("valueChange",{value:[s,u]})}}}));var r=this.tooltipBackgroundColor,n=this.tooltipFomatter,i=this.canvas,o=new Bu({container:i.get("container"),backgroundColor:r}),a=this.tickRects;a.forEach((function(t){var e=t.pickRect;e.on("mouseenter",(function(t){var e=t.target;if("rect"===e.get("type")){var r=parseInt(e.get("name").split("-")[2],10),s=i.getClientByPoint(a[r].x,a[r].y);o.show({x:a[r].x,y:a[r].y,clientX:s.x,clientY:s.y,text:n?n(a[r].value):a[r].value})}})),e.on("mouseleave",(function(t){o.hide()}))}));var s=this.group;s.on("playPauseBtn:click",(function(){t.isPlay=!t.isPlay,t.changePlayStatus()})),s.on("nextStepBtn:click",(function(){t.updateStartEnd(1)})),s.on("preStepBtn:click",(function(){t.updateStartEnd(-1)})),s.on("timebarConfigChanged",(function(e){e.type;var r=e.speed;t.currentSpeed=r}))},t.prototype.changePlayStatus=function(t){void 0===t&&(t=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit("timelinestart",null)):this.playHandler&&(window.cancelAnimationFrame(this.playHandler),t&&this.graph.emit("timelineend",null))},t.prototype.startPlay=function(){var t=this;return window.requestAnimationFrame((function(){var e=t.currentSpeed;t.frameCount%(60/e)==0&&(t.frameCount=0,t.updateStartEnd(1)),t.frameCount++,t.isPlay&&(t.playHandler=t.startPlay())}))},t.prototype.updateStartEnd=function(t){var e=this.tickRects,r=e.length,n=this.unselectedTickStyle,i=this.selectedTickStyle,o=this.endTickRectId;if(t>0?this.endTickRectId++:(e[this.endTickRectId].rect.attr(n),this.endTickRectId--),o!==this.startTickRectId)this.endTickRectId<this.startTickRectId&&(this.startTickRectId=this.endTickRectId);else{for(var a=this.startTickRectId;a<=this.endTickRectId-1;a++)e[a].rect.attr(n);this.startTickRectId=this.endTickRectId}if(e[this.endTickRectId]){e[this.endTickRectId].rect.attr(i);var s=this.startTickRectId/r,u=this.endTickRectId/r;this.graph.emit("valueChange",{value:[s,u]})}},t.prototype.destory=function(){this.graph.off("valueChange");var t=this.sliceGroup;t.off("click"),t.off("dragstart"),t.off("dragover"),t.off("drop"),this.tickRects.forEach((function(t){var e=t.pickRect;e.off("mouseenter"),e.off("mouseleave")})),this.tickRects.length=0,t.off("playPauseBtn:click"),t.off("nextStepBtn:click"),t.off("preStepBtn:click"),t.off("timebarConfigChanged"),this.sliceGroup.destroy()},t}(),Fu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:2,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]}}},e.prototype.initContainer=function(){var t,e,r=this.get("graph"),n=this._cfgs,i=n.width,o=n.height,a=this.get("className")||"g6-component-timebar",s=this.get("container"),u=this.get("graph").get("container");s?t=s:(t=mt()("<div class='"+a+"'></div>"),vt()(t,{position:"relative"})),u.appendChild(t),this.set("timeBarContainer",t),e="SVG"===r.get("renderer")?new Le.a({container:t,width:i,height:o}):new Be.a({container:t,width:i,height:o}),this.set("canvas",e)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas").addGroup({name:"timebar-group"});this.set("timeBarGroup",t),this.renderTrend(),this.initEvent()},e.prototype.renderTrend=function(){var t=this._cfgs,e=t.width,r=t.x,n=t.y,i=t.padding,o=t.type,a=t.trend,s=t.slider,u=t.controllerCfg,c=a.data,h=Object(k.__rest)(a,["data"]),f=e-2*i,l="trend"===o?26:8,d=this.get("graph"),p=this.get("timeBarGroup"),g=this.get("canvas"),v=null;if("trend"===o||"simple"===o)v=new Du(Object(k.__assign)(Object(k.__assign)({graph:d,canvas:g,group:p,type:o,x:r+i,y:"trend"===o?n+i:n+i+15,width:f,height:l,padding:i,trendCfg:Object(k.__assign)(Object(k.__assign)({},h),{data:c.map((function(t){return t.value}))})},s),{ticks:c.map((function(t){return t.date})),handlerStyle:Object(k.__assign)(Object(k.__assign)({},s.handlerStyle),{height:s.height||l}),controllerCfg:u}));else if("tick"===o){var y=this._cfgs.tick;v=new zu(Object(k.__assign)({graph:d,canvas:g,group:p,x:r+i,y:n+i},y))}this.set("timebar",v)},e.prototype.filterData=function(t){var e=t.value,r=null,n=this._cfgs.type;if("trend"===n||"simple"===n?r=this._cfgs.trend.data:"tick"===n&&(r=this._cfgs.tick.data),r&&0!==r.length){var i=this.get("rangeChange"),o=this.get("graph"),a=Math.round(r.length*e[0]),s=Math.round(r.length*e[1]);s=s>=r.length?r.length-1:s;var u=r[a].date,c=r[s].date;if("tick"!==n)this.get("timebar").setText(u,c);if(i)i(o,u,c);else{var h=o.save();(!this.cacheGraphData||this.cacheGraphData.nodes&&0===this.cacheGraphData.nodes.length)&&(this.cacheGraphData=h);var f=this.cacheGraphData.nodes.filter((function(t){return t.date>=u&&t.date<=c})),l=f.map((function(t){return t.id})),d=this.cacheGraphData.edges.filter((function(t){return l.includes(t.source)&&l.includes(t.target)}));o.changeData({nodes:f,edges:d})}}else console.warn("请配置 TimeBar 组件的数据")},e.prototype.initEvent=function(){var t=this,e=0,r=0,n=this._cfgs.type;n&&"trend"!==n&&"simple"!==n?"tick"===n&&(e=this._cfgs.tick.start,r=this._cfgs.tick.end):(e=this._cfgs.slider.start,r=this._cfgs.slider.end);var i=this.get("graph");i.on("afterrender",(function(){t.filterData({value:[e,r]})})),i.on("valueChange",(function(e){t.filterData(e)}))},e.prototype.destroy=function(){var e=this.get("timebar");e&&e.destory&&e.destory(),t.prototype.destroy.call(this);var r=this.get("timeBarContainer");if(r){var n=this.get("container");n||(n=this.get("graph").get("container")),n.removeChild(r)}},e}(Aa);var Yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,e=this._cfgs,r=e.graph;if(!this.destroyed){var n=this.get("container"),i=mt()("<div class="+e.viewportClassName+"\n      style='position:absolute;\n        left:0;\n        top:0;\n        box-sizing:border-box;\n        border: 2px solid #1980ff'>\n      </div>"),o=0,a=0,s=!1,u=0,c=0,h=0,f=0,l=0,d=0;n.addEventListener("mousedown",(function(n){if(e.refresh=!1,n.target===i){var u=i.style;h=parseInt(u.width,10),f=parseInt(u.height,10);var c=t.get("width"),p=t.get("height");h>c||f>p||(d=r.getZoom(),l=t.get("ratio"),s=!0,o=n.clientX,a=n.clientY)}}),!1),n.addEventListener("mousemove",(function(e){if(s&&!x()(e.clientX)&&!x()(e.clientY)){var n=t.get("width"),p=t.get("height"),g=i.style;u=parseInt(g.left,10),c=parseInt(g.top,10),h=parseInt(g.width,10),f=parseInt(g.height,10);var v=o-e.clientX,y=a-e.clientY;u-v<0?v=u:u-v+h>=n&&(v=0),c-y<0?y=c:c-y+f>=p&&(y=0),u-=v,c-=y,vt()(i,{left:u+"px",top:c+"px"}),r.translate(v*d/l,y*d/l),o=e.clientX,a=e.clientY}}),!1),n.addEventListener("mouseleave",(function(){s=!1,e.refresh=!0}),!1),n.addEventListener("mouseup",(function(){s=!1,e.refresh=!0}),!1),this.set("viewport",i),n.appendChild(i)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),e=this.get("width"),r=this.get("height"),n=this.get("graph"),i=n.get("width"),o=i/n.get("height"),a=n.getGroup(),s=a.getCanvasBBox(),u=[(s.minX+s.maxX)/2,(s.minY+s.maxY)/2],c=[s.maxX-s.minX,s.maxY-s.minY],h={centerX:u[0],centerY:u[1],width:0,height:0,minX:0,minY:0};s[0]/s[1]>o?(h.width=c[0],h.height=h.width/o):(h.height=c[1],h.width=h.height*o),h.minX=u[0]-h.width/2,h.minY=u[1]-h.height/2;var f=a.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]);var l=ut.invert([],f),d=Ft({x:h.minX,y:h.minY},l),p=n.getCanvasByPoint(d.x,d.y),g=this.get("viewport");g||this.initViewport();var v=i/h.width,y=v*e,m=v*r,b=e*-p.x/h.width,x=r*-p.y/h.height,w=b+y,M=x+m;b<0&&(y+=b,b=0),w>e&&(y-=w-e),x<0&&(m+=x,x=0),M>r&&(m-=M-r),this.set("ratio",t);var S=b+"px",_=x+"px";vt()(g,{left:S,top:_,width:y+"px",height:m+"px"})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this.get("graph"),e=t.get("width"),r=t.get("height")/e,n=this.get("className"),i=this.get("container"),o=this.get("width"),a=this.get("height");o||a||(o=200),o?(a=r*o,this.set("height",a)):(o=1/r*a,this.set("width",o));var s=mt()("<div class='"+n+"' style='width: "+o+"px; height: "+a+"px; overflow: hidden; position: relative;'></div>");_()(i)&&(i=document.getElementById(i)),i?i.appendChild(s):t.get("container").appendChild(s),this.set("container",s);var u=mt()('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');s.appendChild(u);var c=mt()('<span style="display: table-cell; vertical-align: middle; "></span>');u.appendChild(c),this.set("containerDOM",u),this.set("containerSpan",c);var h=mt()('<img alt="" src="'+this.get("graphImg")+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",h),this.updateImgSize(),c.appendChild(h),this.updateCanvas()},e.prototype.updateImgSize=function(){var t=this.get("imgDOM"),e=this.get("width"),r=this.get("height");t.onload=function(){var n=function(t,e){var r,n;if(t.naturalWidth)r=t.naturalWidth,n=t.naturalHeight;else{var i=new Image;i.src=t.src,i.onload=function(){null==e||e(i.width,i.height)}}return[r,n]}(t);n[0]>n[1]?t.width=e:t.height=r}},e.prototype.updateCanvas=function(){if(this.get("refresh")){var t=this.get("graph");if(!t.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var e=this.get("width")/t.get("canvas").getCanvasBBox().width;this.set("ratio",e),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){this.get("imgDOM").remove(),this.set("graphImg",t);var e=mt()('<img alt="" src="'+t+'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>');this.set("imgDOM",e),e.src=t,this.updateImgSize(),this.get("containerSpan").appendChild(e),this.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(Aa),Gu={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},qu={Menu:Da,Grid:Ia,Minimap:Ra,Bundling:Fa,ToolBar:qa,Tooltip:Xa,Fisheye:Ga,TimeBar:Fu,ImageMinimap:Yu,EdgeFilterLens:function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(k.__extends)(e,t),e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:Object(p.clone)(Gu),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"}}return t},e.prototype.init=function(){var t=this.get("showLabel"),e="node"===t||"both"===t,r="edge"===t||"both"===t;this.set("showNodeLabel",e),this.set("showEdgeLabel",r),this.get("shouldShow")||this.set("shouldShow",(function(){return!0}))},e.prototype.createDelegate=function(t){var e=this,r=e.get("delegate");r&&!r.destroyed||(e.filter(t),(r=e.get("delegate")).on("dragstart",(function(t){})),r.on("drag",(function(t){e.filter(t)})),"wheel"===this.get("scaleRBy")&&r.on("mousewheel",(function(t){e.scaleRByWheel(t)})))},e.prototype.scaleRByWheel=function(t){if(t&&t.originalEvent){t.preventDefault&&t.preventDefault();var e,r=this.get("graph"),n=this.get("delegate");(n?{x:n.attr("x"),y:n.attr("y")}:void 0)||r.getPointByClient(t.clientX,t.clientY);e=t.originalEvent.wheelDelta<0?.95:1/.95;var i=this.get("maxR"),o=this.get("minR"),a=this.get("r");(a>(i||r.get("height"))&&e>1||a<(o||.05*r.get("height"))&&e<1)&&(e=1),a*=e,this.set("r",a),this.filter(t)}},e.prototype.filter=function(t){var e=this.get("graph"),r=e.getNodes(),n={},i=this.get("r"),o=this.get("type"),a={x:t.x,y:t.y};this.updateDelegate(a,i);var s=this.get("shouldShow"),u=this.get("vShapes");u&&u.forEach((function(t){t.remove(),t.destroy()})),u=[],r.forEach((function(t){var e=t.getModel(),r=e.x,o=e.y;qt({x:r,y:o},a)<i&&(n[e.id]=t)}));var c=e.getEdges(),h=[];c.forEach((function(t){var e=t.getModel(),r=e.source,i=e.target;s(e)&&("only-source"===o||"one"===o?n[r]&&!n[i]&&h.push(t):"only-target"===o||"one"===o?n[i]&&!n[r]&&h.push(t):"both"===o&&n[r]&&n[i]&&h.push(t))}));var f=this.get("showNodeLabel"),l=this.get("showEdgelabel"),d=e.get("group");h.forEach((function(t){t.get("group").get("children").forEach((function(t){var e=t.get("type"),r=d.addShape(e,{attrs:t.attr()});u.push(r),f&&"text"===e&&r.set("visible",!0)}))})),Object.keys(n).forEach((function(t){var e=n[t].get("group").clone();if(d.add(e),u.push(e),l)for(var r=e.get("children"),i=0;i<r.length;i++){var o=r[i];"text"===o.get("type")&&o.set("visible",!0)}})),this.set("vShapes",u)},e.prototype.updateParams=function(t){var e=t.r,r=t.trigger,n=t.minR,i=t.maxR,o=t.scaleRBy,a=t.showLabel,s=t.shouldShow;if(isNaN(t.r)||this.set("r",e),isNaN(i)||this.set("maxR",i),isNaN(n)||this.set("minR",n),"mousemove"!==r&&"click"!==r||this.set("trigger",r),"wheel"===o||"unset"===o){this.set("scaleRBy",o),this.get("delegate").remove(),this.get("delegate").destroy();var u=this.get("dPercentText");u&&(u.remove(),u.destroy())}"node"!==a&&"both"!==a||this.set("showNodeLabel",!0),"edge"!==a&&"both"!==a||this.set("showEdgeLabel",!0),s&&this.set("shouldShow",s)},e.prototype.updateDelegate=function(t,e){var r=this,n=r.get("graph"),i=r.get("delegate");if(!i||i.destroyed){var o=n.get("group"),a=r.get("delegateStyle")||Gu;i=o.addShape("circle",{attrs:Object(k.__assign)({r:e,x:t.x,y:t.y},a),name:"lens-shape",draggable:!0}),"drag"!==this.get("trigger")&&"wheel"===this.get("scaleRBy")&&i.on("mousewheel",(function(t){r.scaleRByWheel(t)}))}else i.attr({x:t.x,y:t.y,r:e});r.set("delegate",i)},e.prototype.clear=function(){var t=this.get("vShapes");t&&t.forEach((function(t){t.remove(),t.destroy()})),t=[],this.set("vShapes",t);var e=this.get("delegate");e&&!e.destroyed&&(e.remove(),e.destroy())},e.prototype.destroy=function(){this.clear()},e}(Aa)};function Xu(t,e,r){var n=t.findById(e);!function t(e,r,n,i){i.enter({current:r,previous:n}),e.getNeighbors(r,"target").forEach((function(o){i.allowTraversal({previous:n,current:r,next:o})&&t(e,o,r,i)})),i.leave({current:r,previous:n})}(t,n,null,function(t){void 0===t&&(t={});var e,r=t,n=function(){},i=(e={},function(t){var r=t.next;return!e[r.get("id")]&&(e[r.get("id")]=!0,!0)});return r.allowTraversal=t.allowTraversal||i,r.enter=t.enter||n,r.leave=t.leave||n,r}(r))}var Vu=function(){function t(){this.linkedList=new Co}return t.prototype.isEmpty=function(){return!this.linkedList.head},t.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},t.prototype.enqueue=function(t){this.linkedList.append(t)},t.prototype.dequeue=function(){var t=this.linkedList.deleteHead();return t?t.value:null},t.prototype.toString=function(t){return this.linkedList.toString(t)},t}();var Hu=function(t,e,r){var n=function(t){void 0===t&&(t={});var e,r=t,n=function(){},i=(e={},function(t){var r=t.next.get("id");return!e[r]&&(e[r]=!0,!0)});return r.allowTraversal=t.allowTraversal||i,r.enter=t.enter||n,r.leave=t.leave||n,r}(r),i=new Vu,o=t.findById(e);i.enqueue(o);for(var a=null,s=function(){var e=i.dequeue();n.enter({current:e,previous:a}),t.getNeighbors(e,"target").forEach((function(t){n.allowTraversal({previous:a,current:e,next:t})&&i.enqueue(t)})),n.leave({current:e,previous:a}),a=e};!i.isEmpty();)s()};function Uu(t){for(var e=[],r={},n={},i={},o=[],a=0,s=function(u){n[u.get("id")]=a,i[u.get("id")]=a,a+=1,e.push(u),r[u.get("id")]=!0;for(var c=u.getNeighbors("target").filter((function(e){return t.indexOf(e)>-1})),h=0;h<c.length;h++){var f=c[h];n[f.get("id")]||0===n[f.get("id")]?r[f.get("id")]&&(i[u.get("id")]=Math.min(i[u.get("id")],n[f.get("id")])):(s(f),i[u.get("id")]=Math.min(i[u.get("id")],i[f.get("id")]))}if(i[u.get("id")]===n[u.get("id")]){for(var l=[];e.length>0;){var d=e.pop();if(r[d.get("id")]=!1,l.push(d),d===u)break}l.length>0&&o.push(l)}},u=0,c=t;u<c.length;u++){var h=c[u];n[h.get("id")]||0===n[h.get("id")]||s(h)}return o}function Wu(t,e){var r=void 0===e?t.get("directed"):e,n=t.getNodes();return r?Uu(n):function(t){for(var e=[],r={},n=[],i=function(t){n.push(t),r[t.get("id")]=!0;for(var e=t.getNeighbors(),o=0;o<e.length;++o){var a=e[o];r[a.get("id")]||i(a)}},o=0;o<t.length;o++){var a=t[o];if(!r[a.get("id")]){i(a);for(var s=[];n.length>0;)s.push(n.pop());e.push(s)}}return e}(n)}var Zu=function(t,e,r){var n,i,o;void 0===r&&(r=!0);for(var a=[],s=0,u=Wu(t,!1);s<u.length;s++){var c=u[s];if(c.length)for(var h=c[0],f=h.get("id"),l=[h],d=((n={})[f]=h,n),p=((i={})[f]=new Set,i);l.length>0;)for(var g=l.pop(),v=g.get("id"),y=g.getNeighbors(),m=0;m<y.length;m+=1){var b=y[m],x=b.get("id");if(x===v)a.push(((o={})[b.getID()]=g,o));else if(x in p){if(!p[v].has(b)){for(var w=!0,M=[b,g],S=d[v];p[x].size&&!p[x].has(S)&&(M.push(S),S!==d[S.getID()]);)S=d[S.getID()];if(M.push(S),e&&r?(w=!1,M.findIndex((function(t){return e.indexOf(t.get("id"))>-1}))>-1&&(w=!0)):e&&!r&&M.findIndex((function(t){return e.indexOf(t.get("id"))>-1}))>-1&&(w=!1),w){for(var _={},k=1;k<M.length;k+=1)_[M[k-1].getID()]=M[k];M.length&&(_[M[M.length-1].getID()]=M[0]),a.push(_)}p[x].add(g)}}else d[x]=g,l.push(b),p[x]=new Set([g])}}return a},$u=function(t,e,r){void 0===r&&(r=!0);for(var n=[],i=new Set,o=[],a=[],s={},u={},c=function(t,u,h){var f=!1;if(e&&!1===r&&e.indexOf(t.get("id"))>-1)return f;n.push(t),i.add(t);for(var l=h[t.getID()],d=0;d<l.length;d+=1){if((v=s[l[d]])===u){for(var p={},g=1;g<n.length;g+=1)p[n[g-1].getID()]=n[g];n.length&&(p[n[n.length-1].getID()]=n[0]),a.push(p),f=!0}else i.has(v)||c(v,u,h)&&(f=!0)}if(f)!function(t){for(var e=[t];e.length>0;){var r=e.pop();i.has(r)&&(i.delete(r),o[r.get("id")].forEach((function(t){e.push(t)})),o[r.get("id")].clear())}}(t);else for(d=0;d<l.length;d+=1){var v=s[l[d]];o[v.get("id")].has(t)||o[v.get("id")].add(t)}return n.pop(),f},h=t.getNodes(),f=0;f<h.length;f+=1){var l=h[f],d=l.getID();u[d]=f,s[f]=l}if(e&&r)for(f=0;f<e.length;f++){d=e[f];u[h[f].getID()]=u[d],u[d]=0,s[0]=t.findById(d),s[u[h[f].getID()]]=h[f]}for(var p=function(t){for(var n,i,o=1/0,s=0;s<t.length;s+=1)for(var c=t[s],h=0;h<c.length;h++){var f=u[c[h].getID()];f<o&&(o=f,i=s)}var l=t[i],d=[];for(s=0;s<l.length;s+=1){var p=l[s];d[p.getID()]=[];for(var g=0,v=p.getNeighbors("target").filter((function(t){return l.indexOf(t)>-1}));g<v.length;g++){var y=v[g];y!==p||!1===r&&e.indexOf(p.getId())>-1?d[p.getID()].push(u[y.getID()]):a.push(((n={})[p.getID()]=p,n))}}return{component:l,adjList:d,minIdx:o}},g=0;g<h.length;){var v=Uu(h.filter((function(t){return u[t.getID()]>=g}))).filter((function(t){return t.length>1}));if(0===v.length)break;var y=p(v),m=y.minIdx,b=y.adjList,x=y.component;if(!(x.length>1))break;x.forEach((function(t){o[t.get("id")]=new Set}));var w=s[m];if(e&&r&&-1===e.indexOf(w.get("id")))return a;c(w,w,b),g=m+1}return a},Ku=function(t,e,r,n){return void 0===n&&(n=!0),void 0===e&&(e=t.get("directed")),e?$u(t,r,n):Zu(t,r,n)},Qu=function(t){var e=null,r={},n={},i={},o={};t.getNodes().forEach((function(t){n[t.getID()]=t}));for(var a={enter:function(t){var o=t.current,a=t.previous;if(i[o.getID()]){e={};for(var s=o,u=a;u.getID()!==o.getID();)e[s.getID()]=u,s=u,u=r[u.getID()];e[s.getID()]=u}else i[o.getID()]=o,delete n[o.getID()],r[o.getID()]=a},leave:function(t){var e=t.current;o[e.getID()]=e,delete i[e.getID()]},allowTraversal:function(t){var r=t.next;return!e&&!o[r.getID()]}};Object.keys(n).length;){Xu(t,Object.keys(n)[0],a)}return e};var Ju=function(t,e,r,n){var i=t.getNodes(),o=[],a={},s={},u={};i.forEach((function(t,r){var n=t.getID();o.push(n),s[n]=1/0,n===e&&(s[n]=0)}));for(var c=i.length,h=function(t){var e=function(t,e,r){for(var n,i=1/0,o=0;o<e.length;o++){var a=e[o].get("id");!r[a]&&t[a]<=i&&(i=t[a],n=e[o])}return n}(s,i,a),o=e.get("id");if(a[o]=!0,s[o]===1/0)return"continue";(r?e.getOutEdges():e.getEdges()).forEach((function(t){var r=t.getTarget().getID(),i=t.getSource().getID(),a=r===o?i:r,c=n&&t.getModel()[n]?t.getModel()[n]:1;s[a]>s[e.get("id")]+c&&(s[a]=s[e.get("id")]+c,u[a]=e.get("id"))}))},f=0;f<c;f++)h();var l={};for(var d in s){l[d]=[d];for(var p=u[d];void 0!==p;)l[d].unshift(p),p=u[p]}return{length:s,path:l}},tc=function(t,e,r,n,i){Object(ht.isString)(e)&&(e=t.findById(e)),Object(ht.isString)(r)&&(r=t.findById(r));var o=Ju(t,e.get("id"),n,i),a=o.length,s=o.path;return{length:a[r.get("id")],path:s[r.get("id")]}},ec=function(t,e,r,n){var i;if(Object(ht.isString)(e)&&(e=t.findById(e)),Object(ht.isString)(r)&&(r=t.findById(r)),void 0===n&&(n=t.get("directed")),e===r)return[[e.get("id")]];var o=[e],a=((i={})[e.get("id")]=!0,i),s=[],u=[],c=n?e.getNeighbors("target"):e.getNeighbors();for(s.push(c);o.length>0&&s.length>0;){var h=s[s.length-1];if(h.length){var f=h.shift();if(f&&(o.push(f),a[f.get("id")]=!0,c=n?f.getNeighbors("target"):f.getNeighbors(),s.push(c.filter((function(t){return!a[t.get("id")]})))),o[o.length-1]===r){var l=o.map((function(t){return t.get("id")}));u.push(l);d=o.pop();a[d.get("id")]=!1,s.pop()}}else{var d=o.pop();a[d.get("id")]=!1,s.pop()}}return u},rc=function(){function t(t){this.count=t.length,this.parent={};for(var e=0,r=t;e<r.length;e++){var n=r[e];this.parent[n]=n}}return t.prototype.find=function(t){for(;this.parent[t]!==t;)t=this.parent[t];return t},t.prototype.union=function(t,e){var r=this.find(t),n=this.find(e);r!==n&&(r<n?(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]):(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]))},t.prototype.connected=function(t,e){return this.find(t)===this.find(e)},t}(),nc=function(t,e){return t-e},ic=function(){function t(t){void 0===t&&(t=nc),this.compareFn=t,this.list=[]}return t.prototype.getLeft=function(t){return 2*t+1},t.prototype.getRight=function(t){return 2*t+2},t.prototype.getParent=function(t){return 0===t?null:Math.floor((t-1)/2)},t.prototype.isEmpty=function(){return this.list.length<=0},t.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},t.prototype.delMin=function(){var t=this.top(),e=this.list.pop();return this.list.length>0&&(this.list[0]=e,this.moveDown(0)),t},t.prototype.insert=function(t){if(null!==t){this.list.push(t);var e=this.list.length-1;return this.moveUp(e),!0}return!1},t.prototype.moveUp=function(t){for(var e=this.getParent(t);t&&t>0&&this.compareFn(this.list[e],this.list[t])>0;){var r=this.list[e];this.list[e]=this.list[t],this.list[t]=r,t=e,e=this.getParent(t)}},t.prototype.moveDown=function(t){var e,r=t,n=this.getLeft(t),i=this.getRight(t),o=this.list.length;null!==n&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:null!==i&&i<o&&this.compareFn(this.list[r],this.list[i])>0&&(r=i),t!==r&&(e=[this.list[r],this.list[t]],this.list[t]=e[0],this.list[r]=e[1],this.moveDown(r))},t}(),oc=function(t,e){var r=[],n=t.getNodes();if(0===n.length)return r;var i=n[0],o=new Set;o.add(i);var a=new ic((function(t,r){return e?t.getModel()[e]-r.getModel()[e]:0}));for(i.getEdges().forEach((function(t){a.insert(t)}));!a.isEmpty();){var s=a.delMin(),u=s.getSource(),c=s.getTarget();o.has(u)&&o.has(c)||(r.push(s),o.has(u)||(o.add(u),u.getEdges().forEach((function(t){a.insert(t)}))),o.has(c)||(o.add(c),c.getEdges().forEach((function(t){a.insert(t)}))))}return r},ac=function(t,e){var r=[];if(0===t.getNodes().length)return r;var n=t.getEdges().map((function(t){return t}));e&&n.sort((function(t,r){return t.getModel()[e]-r.getModel()[e]}));for(var i=new rc(t.getNodes().map((function(t){return t.get("id")})));n.length>0;){var o=n.shift(),a=o.getSource().get("id"),s=o.getTarget().get("id");i.connected(a,s)||(r.push(o),i.union(a,s))}return r};function sc(t,e,r){return r?{prim:oc,kruskal:ac}[r](t,e):ac(t,e)}var uc=function(t,e,r){"number"!=typeof e&&(e=1e-6),"number"!=typeof r&&(r=.85);for(var n,i=1,o=0,a=1e3,s=t.getNodes(),u=s.length,c={},h={},f=0;f<u;++f){c[l=(y=s[f]).get("id")]=1/u,h[l]=1/u}for(;a>0&&i>e;){o=0;for(f=0;f<u;++f){var l=(y=s[f]).get("id");if(n=0,0===t.getNodeDegree(y,"in"))c[l]=0;else{for(var d=y.getNeighbors("source"),p=0;p<d.length;++p){var g=d[p],v=t.getNodeDegree(g,"out");v>0&&(n+=h[g.get("id")]/v)}c[l]=r*n,o+=c[l]}}o=(1-o)/u,i=0;for(f=0;f<u;++f){var y;n=c[l=(y=s[f]).get("id")]+o,i+=Math.abs(n-h[l]),h[l]=n}a-=1}return h},cc=Ea.registerNode,hc=Ea.registerEdge,fc=Ea.registerCombo,lc=Te.registerBehavior,dc=fo.registerLayout,pc=qu.Minimap,gc=qu.Grid,vc=qu.Bundling,yc=qu.Menu,mc=qu.Fisheye,bc=qu.ToolBar,xc=qu.Tooltip,wc=qu.TimeBar,Mc=qu.ImageMinimap,Sc=qu.EdgeFilterLens;e.default={version:f.a,Graph:qo,TreeGraph:Ho,Util:Ca,registerNode:Ea.registerNode,registerEdge:Ea.registerEdge,registerCombo:Ea.registerCombo,registerBehavior:Te.registerBehavior,registerLayout:fo.registerLayout,Layout:fo,Global:Q,Minimap:qu.Minimap,Grid:qu.Grid,Bundling:qu.Bundling,Menu:qu.Menu,ToolBar:qu.ToolBar,Tooltip:qu.Tooltip,TimeBar:wc,Fisheye:mc,ImageMinimap:Mc,EdgeFilterLens:Sc,Algorithm:c,Arrow:{triangle:function(t,e,r){void 0===t&&(t=10),void 0===e&&(e=15),void 0===r&&(r=0);var n=2*r;return"M "+n+",0 L "+(n+e)+",-"+t/2+" L "+(n+e)+","+t/2+" Z"},vee:function(t,e,r){void 0===t&&(t=15),void 0===e&&(e=20),void 0===r&&(r=0);var n=2*r;return"M "+n+",0 L "+(n+e)+",-"+t/2+"\n        L "+(n+2*e/3)+",0 L "+(n+e)+","+t/2+" Z"},circle:function(t,e){return void 0===t&&(t=5),void 0===e&&(e=0),"M "+2*e+", 0\n            a "+t+","+t+" 0 1,0 "+2*t+",0\n            a "+t+","+t+" 0 1,0 "+2*-t+",0"},rect:function(t,e,r){void 0===t&&(t=10),void 0===e&&(e=10),void 0===r&&(r=0);var n=2*r;return"M "+n+","+-t/2+" \n        L "+(n+e)+","+-t/2+" \n        L "+(n+e)+","+t/2+" \n        L "+n+","+t/2+" Z"},diamond:function(t,e,r){void 0===t&&(t=15),void 0===e&&(e=15),void 0===r&&(r=0);var n=2*r;return"M "+n+",0 \n        L "+(n+e/2)+","+-t/2+" \n        L "+(n+e)+",0 \n        L "+(n+e/2)+","+t/2+" Z"},triangleRect:function(t,e,r,n,i,o){void 0===t&&(t=15),void 0===e&&(e=15),void 0===r&&(r=15),void 0===n&&(n=3),void 0===i&&(i=5),void 0===o&&(o=0);var a=2*o,s=a+e+i;return"M "+a+",0 L "+(a+e)+",-"+t/2+" L "+(a+e)+","+t/2+" Z\n            M "+s+", -"+r/2+"\n            L "+(s+n)+" -"+r/2+"\n            L "+(s+n)+" "+r/2+"\n            L "+s+" "+r/2+"\n            Z"}},Marker:Oa}}]).default}));
//# sourceMappingURL=g6.min.js.map

/***/ }),

/***/ "3231":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__("1e49");
// 向量长度
function vMag(v) {
    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);
}
// u.v/|u||v|，计算夹角的余弦值
function vRatio(u, v) {
    // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1
    return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;
}
// 向量角度
function vAngle(u, v) {
    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));
}
// A 0:rx 1:ry 2:x-axis-rotation 3:large-arc-flag 4:sweep-flag 5: x 6: y
function getArcParams(startPoint, params) {
    var rx = params[1];
    var ry = params[2];
    var xRotation = util_1.mod(util_1.toRadian(params[3]), Math.PI * 2);
    var arcFlag = params[4];
    var sweepFlag = params[5];
    // 弧形起点坐标
    var x1 = startPoint[0];
    var y1 = startPoint[1];
    // 弧形终点坐标
    var x2 = params[6];
    var y2 = params[7];
    var xp = (Math.cos(xRotation) * (x1 - x2)) / 2.0 + (Math.sin(xRotation) * (y1 - y2)) / 2.0;
    var yp = (-1 * Math.sin(xRotation) * (x1 - x2)) / 2.0 + (Math.cos(xRotation) * (y1 - y2)) / 2.0;
    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);
    if (lambda > 1) {
        rx *= Math.sqrt(lambda);
        ry *= Math.sqrt(lambda);
    }
    var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);
    var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;
    if (arcFlag === sweepFlag) {
        f *= -1;
    }
    if (isNaN(f)) {
        f = 0;
    }
    // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理
    var cxp = ry ? (f * rx * yp) / ry : 0;
    var cyp = rx ? (f * -ry * xp) / rx : 0;
    // 椭圆圆心坐标
    var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;
    var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;
    // 起始点的单位向量
    var u = [(xp - cxp) / rx, (yp - cyp) / ry];
    // 终止点的单位向量
    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];
    // 计算起始点和圆心的连线，与 x 轴正方向的夹角
    var theta = vAngle([1, 0], u);
    // 计算圆弧起始点和终止点与椭圆圆心连线的夹角
    var dTheta = vAngle(u, v);
    if (vRatio(u, v) <= -1) {
        dTheta = Math.PI;
    }
    if (vRatio(u, v) >= 1) {
        dTheta = 0;
    }
    if (sweepFlag === 0 && dTheta > 0) {
        dTheta = dTheta - 2 * Math.PI;
    }
    if (sweepFlag === 1 && dTheta < 0) {
        dTheta = dTheta + 2 * Math.PI;
    }
    return {
        cx: cx,
        cy: cy,
        // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理
        rx: util_1.isSamePoint(startPoint, [x2, y2]) ? 0 : rx,
        ry: util_1.isSamePoint(startPoint, [x2, y2]) ? 0 : ry,
        startAngle: theta,
        endAngle: theta + dTheta,
        xRotation: xRotation,
        arcFlag: arcFlag,
        sweepFlag: sweepFlag,
    };
}
exports.default = getArcParams;
//# sourceMappingURL=arc-params.js.map

/***/ }),

/***/ "32a8":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ceil = Math.ceil;
var floor = Math.floor;

// `Math.trunc` method
// https://tc39.es/ecma262/#sec-math.trunc
// eslint-disable-next-line es/no-math-trunc -- safe
module.exports = Math.trunc || function trunc(x) {
  var n = +x;
  return (n > 0 ? floor : ceil)(n);
};


/***/ }),

/***/ "32c7":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var DOMIterables = __webpack_require__("93e4");
var DOMTokenListPrototype = __webpack_require__("9672");
var forEach = __webpack_require__("8848");
var createNonEnumerableProperty = __webpack_require__("80b9");

var handlePrototype = function (CollectionPrototype) {
  // some Chrome versions have non-configurable methods on DOMTokenList
  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {
    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);
  } catch (error) {
    CollectionPrototype.forEach = forEach;
  }
};

for (var COLLECTION_NAME in DOMIterables) {
  if (DOMIterables[COLLECTION_NAME]) {
    handlePrototype(globalThis[COLLECTION_NAME] && globalThis[COLLECTION_NAME].prototype);
  }
}

handlePrototype(DOMTokenListPrototype);


/***/ }),

/***/ "33ac":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
/**
 * @fileoverview path 的一些工具
 * @author dxq613@gmail.com
 */
var g_base_1 = __webpack_require__("ae4c");
var g_math_1 = __webpack_require__("4502");
var g_math_2 = __webpack_require__("4502");
var matrix_util_1 = __webpack_require__("d729");
var vec3 = __webpack_require__("8480");
var util_1 = __webpack_require__("1e49");
var line_1 = __webpack_require__("5ad5");
var arc_1 = __webpack_require__("5c8f");
var transform = matrix_util_1.ext.transform;
function hasArc(path) {
    var hasArc = false;
    var count = path.length;
    for (var i = 0; i < count; i++) {
        var params = path[i];
        var cmd = params[0];
        if (cmd === 'C' || cmd === 'A' || cmd === 'Q') {
            hasArc = true;
            break;
        }
    }
    return hasArc;
}
function isPointInStroke(segments, lineWidth, x, y, length) {
    var isHit = false;
    var halfWidth = lineWidth / 2;
    for (var i = 0; i < segments.length; i++) {
        var segment = segments[i];
        var currentPoint = segment.currentPoint, params = segment.params, prePoint = segment.prePoint, box = segment.box;
        // 如果在前面已经生成过包围盒，直接按照包围盒计算
        if (box && !util_1.inBox(box.x - halfWidth, box.y - halfWidth, box.width + lineWidth, box.height + lineWidth, x, y)) {
            continue;
        }
        switch (segment.command) {
            // L 和 Z 都是直线， M 不进行拾取
            case 'L':
            case 'Z':
                isHit = line_1.default(prePoint[0], prePoint[1], currentPoint[0], currentPoint[1], lineWidth, x, y);
                break;
            case 'Q':
                var qDistance = g_math_1.Quad.pointDistance(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], x, y);
                isHit = qDistance <= lineWidth / 2;
                break;
            case 'C':
                var cDistance = g_math_2.Cubic.pointDistance(prePoint[0], // 上一段结束位置, 即 C 的起始点
                prePoint[1], params[1], // 'C' 的参数，1、2 为第一个控制点，3、4 为第二个控制点，5、6 为结束点
                params[2], params[3], params[4], params[5], params[6], x, y, length);
                isHit = cDistance <= lineWidth / 2;
                break;
            case 'A':
                // 计算点到椭圆圆弧的距离，暂时使用近似算法，后面可以改成切割法求最近距离
                var arcParams = segment.arcParams;
                var cx = arcParams.cx, cy = arcParams.cy, rx = arcParams.rx, ry = arcParams.ry, startAngle = arcParams.startAngle, endAngle = arcParams.endAngle, xRotation = arcParams.xRotation;
                var p = [x, y, 1];
                var r = rx > ry ? rx : ry;
                var scaleX = rx > ry ? 1 : rx / ry;
                var scaleY = rx > ry ? ry / rx : 1;
                var m = transform(null, [
                    ['t', -cx, -cy],
                    ['r', -xRotation],
                    ['s', 1 / scaleX, 1 / scaleY],
                ]);
                vec3.transformMat3(p, p, m);
                isHit = arc_1.default(0, 0, r, startAngle, endAngle, lineWidth, p[0], p[1]);
                break;
            default:
                break;
        }
        if (isHit) {
            break;
        }
    }
    return isHit;
}
/**
 * 提取出内部的闭合多边形和非闭合的多边形，假设 path 不存在圆弧
 * @param {Array} path 路径
 * @returns {Array} 点的集合
 */
function extractPolygons(path) {
    var count = path.length;
    var polygons = [];
    var polylines = [];
    var points = []; // 防止第一个命令不是 'M'
    for (var i = 0; i < count; i++) {
        var params = path[i];
        var cmd = params[0];
        if (cmd === 'M') {
            // 遇到 'M' 判定是否是新数组，新数组中没有点
            if (points.length) {
                // 如果存在点，则说明没有遇到 'Z'，开始了一个新的多边形
                polylines.push(points);
                points = []; // 创建新的点
            }
            points.push([params[1], params[2]]);
        }
        else if (cmd === 'Z') {
            if (points.length) {
                // 存在点
                polygons.push(points);
                points = []; // 开始新的点集合
            }
            // 如果不存在点，同时 'Z'，则说明是错误，不处理
        }
        else {
            points.push([params[1], params[2]]);
        }
    }
    // 说明 points 未放入 polygons 或者 polyline
    // 仅当只有一个 M，没有 Z 时会发生这种情况
    if (points.length > 0) {
        polylines.push(points);
    }
    return {
        polygons: polygons,
        polylines: polylines,
    };
}
exports.default = tslib_1.__assign({ hasArc: hasArc,
    extractPolygons: extractPolygons,
    isPointInStroke: isPointInStroke }, g_base_1.PathUtil);
//# sourceMappingURL=path.js.map

/***/ }),

/***/ "33f2":
/***/ (function(module, exports, __webpack_require__) {

var getMapData = __webpack_require__("7a83");

/**
 * Gets the map value for `key`.
 *
 * @private
 * @name get
 * @memberOf MapCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function mapCacheGet(key) {
  return getMapData(this, key).get(key);
}

module.exports = mapCacheGet;


/***/ }),

/***/ "34b0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var aCallable = __webpack_require__("d0d3");

var $TypeError = TypeError;

var PromiseCapability = function (C) {
  var resolve, reject;
  this.promise = new C(function ($$resolve, $$reject) {
    if (resolve !== undefined || reject !== undefined) throw new $TypeError('Bad Promise constructor');
    resolve = $$resolve;
    reject = $$reject;
  });
  this.resolve = aCallable(resolve);
  this.reject = aCallable(reject);
};

// `NewPromiseCapability` abstract operation
// https://tc39.es/ecma262/#sec-newpromisecapability
module.exports.f = function (C) {
  return new PromiseCapability(C);
};


/***/ }),

/***/ "3697":
/***/ (function(module, exports, __webpack_require__) {

var assignMergeValue = __webpack_require__("dc5a"),
    cloneBuffer = __webpack_require__("654d"),
    cloneTypedArray = __webpack_require__("b022"),
    copyArray = __webpack_require__("a97a"),
    initCloneObject = __webpack_require__("cdfb"),
    isArguments = __webpack_require__("54bf"),
    isArray = __webpack_require__("f868"),
    isArrayLikeObject = __webpack_require__("c2f4"),
    isBuffer = __webpack_require__("943c"),
    isFunction = __webpack_require__("c26a"),
    isObject = __webpack_require__("139b"),
    isPlainObject = __webpack_require__("2ed2"),
    isTypedArray = __webpack_require__("94ea"),
    safeGet = __webpack_require__("4ca9"),
    toPlainObject = __webpack_require__("93b3");

/**
 * A specialized version of `baseMerge` for arrays and objects which performs
 * deep merges and tracks traversed objects enabling objects with circular
 * references to be merged.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {string} key The key of the value to merge.
 * @param {number} srcIndex The index of `source`.
 * @param {Function} mergeFunc The function to merge values.
 * @param {Function} [customizer] The function to customize assigned values.
 * @param {Object} [stack] Tracks traversed source values and their merged
 *  counterparts.
 */
function baseMergeDeep(object, source, key, srcIndex, mergeFunc, customizer, stack) {
  var objValue = safeGet(object, key),
      srcValue = safeGet(source, key),
      stacked = stack.get(srcValue);

  if (stacked) {
    assignMergeValue(object, key, stacked);
    return;
  }
  var newValue = customizer
    ? customizer(objValue, srcValue, (key + ''), object, source, stack)
    : undefined;

  var isCommon = newValue === undefined;

  if (isCommon) {
    var isArr = isArray(srcValue),
        isBuff = !isArr && isBuffer(srcValue),
        isTyped = !isArr && !isBuff && isTypedArray(srcValue);

    newValue = srcValue;
    if (isArr || isBuff || isTyped) {
      if (isArray(objValue)) {
        newValue = objValue;
      }
      else if (isArrayLikeObject(objValue)) {
        newValue = copyArray(objValue);
      }
      else if (isBuff) {
        isCommon = false;
        newValue = cloneBuffer(srcValue, true);
      }
      else if (isTyped) {
        isCommon = false;
        newValue = cloneTypedArray(srcValue, true);
      }
      else {
        newValue = [];
      }
    }
    else if (isPlainObject(srcValue) || isArguments(srcValue)) {
      newValue = objValue;
      if (isArguments(objValue)) {
        newValue = toPlainObject(objValue);
      }
      else if (!isObject(objValue) || isFunction(objValue)) {
        newValue = initCloneObject(srcValue);
      }
    }
    else {
      isCommon = false;
    }
  }
  if (isCommon) {
    // Recursively merge objects and arrays (susceptible to call stack limits).
    stack.set(srcValue, newValue);
    mergeFunc(newValue, srcValue, srcIndex, customizer, stack);
    stack['delete'](srcValue);
  }
  assignMergeValue(object, key, newValue);
}

module.exports = baseMergeDeep;


/***/ }),

/***/ "38d8":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
var GraphEvent = /** @class */ (function () {
    function GraphEvent(type, event) {
        /**
         * 是否允许冒泡
         * @type {boolean}
         */
        this.bubbles = true;
        /**
         * 触发对象
         * @type {object}
         */
        this.target = null;
        /**
         * 监听对象
         * @type {object}
         */
        this.currentTarget = null;
        /**
         * 委托对象
         * @type {object}
         */
        this.delegateTarget = null;
        /**
         * 委托事件监听对象的代理对象，即 ev.delegateObject = ev.currentTarget.get('delegateObject')
         * @type {object}
         */
        this.delegateObject = null;
        /**
         * 是否阻止了原生事件
         * @type {boolean}
         */
        this.defaultPrevented = false;
        /**
         * 是否阻止传播（向上冒泡）
         * @type {boolean}
         */
        this.propagationStopped = false;
        /**
         * 触发事件的图形
         * @type {IShape}
         */
        this.shape = null;
        /**
         * 开始触发事件的图形
         * @type {IShape}
         */
        this.fromShape = null;
        /**
         * 事件结束时的触发图形
         * @type {IShape}
         */
        this.toShape = null;
        // 触发事件的路径
        this.propagationPath = [];
        this.type = type;
        this.name = type;
        this.originalEvent = event;
        this.timeStamp = event.timeStamp;
    }
    /**
     * 阻止浏览器默认的行为
     */
    GraphEvent.prototype.preventDefault = function () {
        this.defaultPrevented = true;
        if (this.originalEvent.preventDefault) {
            this.originalEvent.preventDefault();
        }
    };
    /**
     * 阻止冒泡
     */
    GraphEvent.prototype.stopPropagation = function () {
        this.propagationStopped = true;
    };
    GraphEvent.prototype.toString = function () {
        var type = this.type;
        return "[Event (type=" + type + ")]";
    };
    GraphEvent.prototype.save = function () { };
    GraphEvent.prototype.restore = function () { };
    return GraphEvent;
}());
/* harmony default export */ __webpack_exports__["a"] = (GraphEvent);
//# sourceMappingURL=graph-event.js.map

/***/ }),

/***/ "397c":
/***/ (function(module, exports, __webpack_require__) {

var nativeCreate = __webpack_require__("cce9");

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED = '__lodash_hash_undefined__';

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Gets the hash value for `key`.
 *
 * @private
 * @name get
 * @memberOf Hash
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function hashGet(key) {
  var data = this.__data__;
  if (nativeCreate) {
    var result = data[key];
    return result === HASH_UNDEFINED ? undefined : result;
  }
  return hasOwnProperty.call(data, key) ? data[key] : undefined;
}

module.exports = hashGet;


/***/ }),

/***/ "3b27":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var g_base_1 = __webpack_require__("ae4c");
var hit_1 = __webpack_require__("f234");
var Shape = __webpack_require__("595a");
var group_1 = __webpack_require__("4d59");
var util_1 = __webpack_require__("1e49");
var draw_1 = __webpack_require__("a394");
var Canvas = /** @class */ (function (_super) {
    tslib_1.__extends(Canvas, _super);
    function Canvas() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Canvas.prototype.getDefaultCfg = function () {
        var cfg = _super.prototype.getDefaultCfg.call(this);
        // 设置渲染引擎为 canvas，只读属性
        cfg['renderer'] = 'canvas';
        // 是否自动绘制，不需要用户调用 draw 方法
        cfg['autoDraw'] = true;
        // 是否允许局部刷新图表
        cfg['localRefresh'] = true;
        cfg['refreshElements'] = [];
        // 是否在视图内自动裁剪
        cfg['clipView'] = true;
        // 是否使用快速拾取的方案，默认为 false，上层可以打开
        cfg['quickHit'] = false;
        return cfg;
    };
    /**
     * 一些方法调用会引起画布变化
     * @param {ChangeType} changeType 改变的类型
     */
    Canvas.prototype.onCanvasChange = function (changeType) {
        /**
         * 触发画布更新的三种 changeType
         * 1. attr: 修改画布的绘图属性
         * 2. sort: 画布排序，图形的层次会发生变化
         * 3. changeSize: 改变画布大小
         */
        if (changeType === 'attr' || changeType === 'sort' || changeType === 'changeSize') {
            this.set('refreshElements', [this]);
            this.draw();
        }
    };
    Canvas.prototype.getShapeBase = function () {
        return Shape;
    };
    Canvas.prototype.getGroupBase = function () {
        return group_1.default;
    };
    /**
     * 获取屏幕像素比
     */
    Canvas.prototype.getPixelRatio = function () {
        var pixelRatio = this.get('pixelRatio') || util_1.getPixelRatio();
        // 不足 1 的取 1，超出 1 的取整
        return pixelRatio >= 1 ? Math.ceil(pixelRatio) : 1;
    };
    Canvas.prototype.getViewRange = function () {
        return {
            minX: 0,
            minY: 0,
            maxX: this.cfg.width,
            maxY: this.cfg.height,
        };
    };
    // 复写基类的方法生成标签
    Canvas.prototype.createDom = function () {
        var element = document.createElement('canvas');
        var context = element.getContext('2d');
        // 缓存 context 对象
        this.set('context', context);
        return element;
    };
    Canvas.prototype.setDOMSize = function (width, height) {
        _super.prototype.setDOMSize.call(this, width, height);
        var context = this.get('context');
        var el = this.get('el');
        var pixelRatio = this.getPixelRatio();
        el.width = pixelRatio * width;
        el.height = pixelRatio * height;
        // 设置 canvas 元素的宽度和高度，会重置缩放，因此 context.scale 需要在每次设置宽、高后调用
        if (pixelRatio > 1) {
            context.scale(pixelRatio, pixelRatio);
        }
    };
    // 复写基类方法
    Canvas.prototype.clear = function () {
        _super.prototype.clear.call(this);
        this._clearFrame(); // 需要清理掉延迟绘制的帧
        var context = this.get('context');
        var element = this.get('el');
        context.clearRect(0, 0, element.width, element.height);
    };
    Canvas.prototype.getShape = function (x, y) {
        var shape;
        if (this.get('quickHit')) {
            shape = hit_1.getShape(this, x, y);
        }
        else {
            shape = _super.prototype.getShape.call(this, x, y, null);
        }
        return shape;
    };
    // 对绘制区域边缘取整，避免浮点数问题
    Canvas.prototype._getRefreshRegion = function () {
        var elements = this.get('refreshElements');
        var viewRegion = this.getViewRange();
        var region;
        // 如果是当前画布整体发生了变化，则直接重绘整个画布
        if (elements.length && elements[0] === this) {
            region = viewRegion;
        }
        else {
            region = draw_1.getMergedRegion(elements);
            if (region) {
                region.minX = Math.floor(region.minX);
                region.minY = Math.floor(region.minY);
                region.maxX = Math.ceil(region.maxX);
                region.maxY = Math.ceil(region.maxY);
                region.maxY += 1; // 在很多环境下字体的高低会不一致，附加一像素，避免残影
                var clipView = this.get('clipView');
                // 自动裁剪不在 view 内的区域
                if (clipView) {
                    region = draw_1.mergeView(region, viewRegion);
                }
            }
        }
        return region;
    };
    /**
     * 刷新图形元素，这里仅仅是放入队列，下次绘制时进行绘制
     * @param {IElement} element 图形元素
     */
    Canvas.prototype.refreshElement = function (element) {
        var refreshElements = this.get('refreshElements');
        refreshElements.push(element);
        // if (this.get('autoDraw')) {
        //   this._startDraw();
        // }
    };
    // 清理还在进行的绘制
    Canvas.prototype._clearFrame = function () {
        var drawFrame = this.get('drawFrame');
        if (drawFrame) {
            // 如果全部渲染时，存在局部渲染，则抛弃掉局部渲染
            util_1.clearAnimationFrame(drawFrame);
            this.set('drawFrame', null);
            this.set('refreshElements', []);
        }
    };
    // 手工调用绘制接口
    Canvas.prototype.draw = function () {
        var drawFrame = this.get('drawFrame');
        if (this.get('autoDraw') && drawFrame) {
            return;
        }
        this._startDraw();
    };
    // 绘制所有图形
    Canvas.prototype._drawAll = function () {
        var context = this.get('context');
        var element = this.get('el');
        var children = this.getChildren();
        context.clearRect(0, 0, element.width, element.height);
        draw_1.applyAttrsToContext(context, this);
        draw_1.drawChildren(context, children);
        // 对于 https://github.com/antvis/g/issues/422 的场景，全局渲染的模式下也会记录更新的元素队列，因此全局渲染完后也需要置空
        this.set('refreshElements', []);
    };
    // 绘制局部
    Canvas.prototype._drawRegion = function () {
        var context = this.get('context');
        var refreshElements = this.get('refreshElements');
        var children = this.getChildren();
        var region = this._getRefreshRegion();
        // 需要注意可能没有 region 的场景
        // 一般发生在设置了 localRefresh ,在没有图形发生变化的情况下，用户调用了 draw
        if (region) {
            // 清理指定区域
            context.clearRect(region.minX, region.minY, region.maxX - region.minX, region.maxY - region.minY);
            // 保存上下文，设置 clip
            context.save();
            context.beginPath();
            context.rect(region.minX, region.minY, region.maxX - region.minX, region.maxY - region.minY);
            context.clip();
            draw_1.applyAttrsToContext(context, this);
            // 确认更新的元素，这个优化可以提升 10 倍左右的性能，10W 个带有 group 的节点，局部渲染会从 90ms 下降到 5-6 ms
            draw_1.checkRefresh(this, children, region);
            // 绘制子元素
            draw_1.drawChildren(context, children, region);
            context.restore();
        }
        else if (refreshElements.length) {
            // 防止发生改变的 elements 没有 region 的场景，这会发生在多个情况下
            // 1. 空的 group
            // 2. 所有 elements 没有在绘图区域
            // 3. group 下面的 elements 隐藏掉
            // 如果不进行清理 hasChanged 的状态会不正确
            draw_1.clearChanged(refreshElements);
        }
        util_1.each(refreshElements, function (element) {
            if (element.get('hasChanged')) {
                // 在视窗外的 Group 元素会加入到更新队列里，但实际却没有执行 draw() 逻辑，也就没有清除 hasChanged 标记
                // 即已经重绘完、但 hasChanged 标记没有清除的元素，需要统一清除掉。主要是 Group 存在问题，具体原因待排查
                element.set('hasChanged', false);
            }
        });
        this.set('refreshElements', []);
    };
    // 触发绘制
    Canvas.prototype._startDraw = function () {
        var _this = this;
        var drawFrame = this.get('drawFrame');
        var drawFrameCallback = this.get('drawFrameCallback');
        if (!drawFrame) {
            drawFrame = util_1.requestAnimationFrame(function () {
                if (_this.get('localRefresh')) {
                    _this._drawRegion();
                }
                else {
                    _this._drawAll();
                }
                _this.set('drawFrame', null);
                if (drawFrameCallback) {
                    drawFrameCallback();
                }
            });
            this.set('drawFrame', drawFrame);
        }
    };
    Canvas.prototype.skipDraw = function () { };
    Canvas.prototype.removeDom = function () {
        var el = this.get('el');
        // 需要清理 canvas 画布内容，否则ios下 创建的canvas垃圾未回收，导致Total canvas memory use exceeds问题
        // 相关问题列表
        // https://stackoverflow.com/questions/52532614/total-canvas-memory-use-exceeds-the-maximum-limit-safari-12
        // https://github.com/openlayers/openlayers/issues/9291
        el.width = 0;
        el.height = 0;
        el.parentNode.removeChild(el);
    };
    return Canvas;
}(g_base_1.AbstractCanvas));
exports.default = Canvas;
//# sourceMappingURL=canvas.js.map

/***/ }),

/***/ "3e27":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var IS_PURE = __webpack_require__("6e09");
var DESCRIPTORS = __webpack_require__("98c8");
var globalThis = __webpack_require__("92e2");
var path = __webpack_require__("f9fa");
var uncurryThis = __webpack_require__("1043");
var isForced = __webpack_require__("cc6e");
var hasOwn = __webpack_require__("85ed");
var inheritIfRequired = __webpack_require__("fe68");
var isPrototypeOf = __webpack_require__("d519");
var isSymbol = __webpack_require__("ef41");
var toPrimitive = __webpack_require__("6393");
var fails = __webpack_require__("e835");
var getOwnPropertyNames = __webpack_require__("8c7b").f;
var getOwnPropertyDescriptor = __webpack_require__("1c2b").f;
var defineProperty = __webpack_require__("80ea").f;
var thisNumberValue = __webpack_require__("30b5");
var trim = __webpack_require__("f60d").trim;

var NUMBER = 'Number';
var NativeNumber = globalThis[NUMBER];
var PureNumberNamespace = path[NUMBER];
var NumberPrototype = NativeNumber.prototype;
var TypeError = globalThis.TypeError;
var stringSlice = uncurryThis(''.slice);
var charCodeAt = uncurryThis(''.charCodeAt);

// `ToNumeric` abstract operation
// https://tc39.es/ecma262/#sec-tonumeric
var toNumeric = function (value) {
  var primValue = toPrimitive(value, 'number');
  return typeof primValue == 'bigint' ? primValue : toNumber(primValue);
};

// `ToNumber` abstract operation
// https://tc39.es/ecma262/#sec-tonumber
var toNumber = function (argument) {
  var it = toPrimitive(argument, 'number');
  var first, third, radix, maxCode, digits, length, index, code;
  if (isSymbol(it)) throw new TypeError('Cannot convert a Symbol value to a number');
  if (typeof it == 'string' && it.length > 2) {
    it = trim(it);
    first = charCodeAt(it, 0);
    if (first === 43 || first === 45) {
      third = charCodeAt(it, 2);
      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix
    } else if (first === 48) {
      switch (charCodeAt(it, 1)) {
        // fast equal of /^0b[01]+$/i
        case 66:
        case 98:
          radix = 2;
          maxCode = 49;
          break;
        // fast equal of /^0o[0-7]+$/i
        case 79:
        case 111:
          radix = 8;
          maxCode = 55;
          break;
        default:
          return +it;
      }
      digits = stringSlice(it, 2);
      length = digits.length;
      for (index = 0; index < length; index++) {
        code = charCodeAt(digits, index);
        // parseInt parses a string to a first unavailable symbol
        // but ToNumber should return NaN if a string contains unavailable symbols
        if (code < 48 || code > maxCode) return NaN;
      } return parseInt(digits, radix);
    }
  } return +it;
};

var FORCED = isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'));

var calledWithNew = function (dummy) {
  // includes check on 1..constructor(foo) case
  return isPrototypeOf(NumberPrototype, dummy) && fails(function () { thisNumberValue(dummy); });
};

// `Number` constructor
// https://tc39.es/ecma262/#sec-number-constructor
var NumberWrapper = function Number(value) {
  var n = arguments.length < 1 ? 0 : NativeNumber(toNumeric(value));
  return calledWithNew(this) ? inheritIfRequired(Object(n), this, NumberWrapper) : n;
};

NumberWrapper.prototype = NumberPrototype;
if (FORCED && !IS_PURE) NumberPrototype.constructor = NumberWrapper;

$({ global: true, constructor: true, wrap: true, forced: FORCED }, {
  Number: NumberWrapper
});

// Use `internal/copy-constructor-properties` helper in `core-js@4`
var copyConstructorProperties = function (target, source) {
  for (var keys = DESCRIPTORS ? getOwnPropertyNames(source) : (
    // ES3:
    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +
    // ES2015 (in case, if modules with ES2015 Number statics required before):
    'EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,' +
    // ESNext
    'fromString,range'
  ).split(','), j = 0, key; keys.length > j; j++) {
    if (hasOwn(source, key = keys[j]) && !hasOwn(target, key)) {
      defineProperty(target, key, getOwnPropertyDescriptor(source, key));
    }
  }
};

if (IS_PURE && PureNumberNamespace) copyConstructorProperties(path[NUMBER], PureNumberNamespace);
if (FORCED || IS_PURE) copyConstructorProperties(path[NUMBER], NativeNumber);


/***/ }),

/***/ "3e93":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var g_base_1 = __webpack_require__("ae4c");
var constant_1 = __webpack_require__("7a93");
var draw_1 = __webpack_require__("8237");
var svg_1 = __webpack_require__("6865");
var dom_1 = __webpack_require__("7431");
var Shape = __webpack_require__("ddd9");
var group_1 = __webpack_require__("de9a");
var defs_1 = __webpack_require__("db26");
var Canvas = /** @class */ (function (_super) {
    tslib_1.__extends(Canvas, _super);
    function Canvas(cfg) {
        return _super.call(this, tslib_1.__assign(tslib_1.__assign({}, cfg), { autoDraw: true, 
            // 设置渲染引擎为 canvas，只读属性
            renderer: 'svg' })) || this;
    }
    Canvas.prototype.getShapeBase = function () {
        return Shape;
    };
    Canvas.prototype.getGroupBase = function () {
        return group_1.default;
    };
    // 覆盖 Container 中通过遍历的方式获取 shape 对象的逻辑，直接走 SVG 的 dom 拾取即可
    Canvas.prototype.getShape = function (x, y, ev) {
        var target = ev.target || ev.srcElement;
        if (!constant_1.SHAPE_TO_TAGS[target.tagName]) {
            var parent_1 = target.parentNode;
            while (parent_1 && !constant_1.SHAPE_TO_TAGS[parent_1.tagName]) {
                parent_1 = parent_1.parentNode;
            }
            target = parent_1;
        }
        return this.find(function (child) { return child.get('el') === target; });
    };
    // 复写基类的方法生成标签
    Canvas.prototype.createDom = function () {
        var element = dom_1.createSVGElement('svg');
        var context = new defs_1.default(element);
        element.setAttribute('width', "" + this.get('width'));
        element.setAttribute('height', "" + this.get('height'));
        // 缓存 context 对象
        this.set('context', context);
        return element;
    };
    /**
     * 一些方法调用会引起画布变化
     * @param {ChangeType} changeType 改变的类型
     */
    Canvas.prototype.onCanvasChange = function (changeType) {
        var context = this.get('context');
        var el = this.get('el');
        if (changeType === 'sort') {
            var children_1 = this.get('children');
            if (children_1 && children_1.length) {
                dom_1.sortDom(this, function (a, b) {
                    return children_1.indexOf(a) - children_1.indexOf(b) ? 1 : 0;
                });
            }
        }
        else if (changeType === 'clear') {
            // el maybe null for canvas
            if (el) {
                // 清空 SVG 元素
                el.innerHTML = '';
                var defsEl = context.el;
                // 清空 defs 元素
                defsEl.innerHTML = '';
                // 将清空后的 defs 元素挂载到 el 下
                el.appendChild(defsEl);
            }
        }
        else if (changeType === 'matrix') {
            svg_1.setTransform(this);
        }
        else if (changeType === 'clip') {
            svg_1.setClip(this, context);
        }
        else if (changeType === 'changeSize') {
            el.setAttribute('width', "" + this.get('width'));
            el.setAttribute('height', "" + this.get('height'));
        }
    };
    // 复写基类的 draw 方法
    Canvas.prototype.draw = function () {
        var context = this.get('context');
        var children = this.getChildren();
        svg_1.setClip(this, context);
        if (children.length) {
            draw_1.drawChildren(context, children);
        }
    };
    return Canvas;
}(g_base_1.AbstractCanvas));
exports.default = Canvas;
//# sourceMappingURL=canvas.js.map

/***/ }),

/***/ "3ed7":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview shadow
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__("6d77");
var dom_1 = __webpack_require__("7431");
var ATTR_MAP = {
    shadowColor: 'color',
    shadowOpacity: 'opacity',
    shadowBlur: 'blur',
    shadowOffsetX: 'dx',
    shadowOffsetY: 'dy',
};
var SHADOW_DIMENSION = {
    x: '-40%',
    y: '-40%',
    width: '200%',
    height: '200%',
};
var Shadow = /** @class */ (function () {
    function Shadow(cfg) {
        this.type = 'filter';
        this.cfg = {};
        this.type = 'filter';
        var el = dom_1.createSVGElement('filter');
        // expand the filter region to fill in shadows
        util_1.each(SHADOW_DIMENSION, function (v, k) {
            el.setAttribute(k, v);
        });
        this.el = el;
        this.id = util_1.uniqueId('filter_');
        this.el.id = this.id;
        this.cfg = cfg;
        this._parseShadow(cfg, el);
        return this;
    }
    Shadow.prototype.match = function (type, cfg) {
        if (this.type !== type) {
            return false;
        }
        var flag = true;
        var config = this.cfg;
        util_1.each(Object.keys(config), function (attr) {
            if (config[attr] !== cfg[attr]) {
                flag = false;
                return false;
            }
        });
        return flag;
    };
    Shadow.prototype.update = function (name, value) {
        var config = this.cfg;
        config[ATTR_MAP[name]] = value;
        this._parseShadow(config, this.el);
        return this;
    };
    Shadow.prototype._parseShadow = function (config, el) {
        var child = "<feDropShadow\n      dx=\"" + (config.dx || 0) + "\"\n      dy=\"" + (config.dy || 0) + "\"\n      stdDeviation=\"" + (config.blur ? config.blur / 10 : 0) + "\"\n      flood-color=\"" + (config.color ? config.color : '#000') + "\"\n      flood-opacity=\"" + (config.opacity ? config.opacity : 1) + "\"\n      />";
        el.innerHTML = child;
    };
    return Shadow;
}());
exports.default = Shadow;
//# sourceMappingURL=shadow.js.map

/***/ }),

/***/ "3f75":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BrowserInfo", function() { return BrowserInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "NodeInfo", function() { return NodeInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SearchBotDeviceInfo", function() { return SearchBotDeviceInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BotInfo", function() { return BotInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ReactNativeInfo", function() { return ReactNativeInfo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "detect", function() { return detect; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "browserName", function() { return browserName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parseUserAgent", function() { return parseUserAgent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "detectOS", function() { return detectOS; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getNodeVersion", function() { return getNodeVersion; });
var __spreadArray = (undefined && undefined.__spreadArray) || function (to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
};
var BrowserInfo = /** @class */ (function () {
    function BrowserInfo(name, version, os) {
        this.name = name;
        this.version = version;
        this.os = os;
        this.type = 'browser';
    }
    return BrowserInfo;
}());

var NodeInfo = /** @class */ (function () {
    function NodeInfo(version) {
        this.version = version;
        this.type = 'node';
        this.name = 'node';
        this.os = process.platform;
    }
    return NodeInfo;
}());

var SearchBotDeviceInfo = /** @class */ (function () {
    function SearchBotDeviceInfo(name, version, os, bot) {
        this.name = name;
        this.version = version;
        this.os = os;
        this.bot = bot;
        this.type = 'bot-device';
    }
    return SearchBotDeviceInfo;
}());

var BotInfo = /** @class */ (function () {
    function BotInfo() {
        this.type = 'bot';
        this.bot = true; // NOTE: deprecated test name instead
        this.name = 'bot';
        this.version = null;
        this.os = null;
    }
    return BotInfo;
}());

var ReactNativeInfo = /** @class */ (function () {
    function ReactNativeInfo() {
        this.type = 'react-native';
        this.name = 'react-native';
        this.version = null;
        this.os = null;
    }
    return ReactNativeInfo;
}());

// tslint:disable-next-line:max-line-length
var SEARCHBOX_UA_REGEX = /alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/;
var SEARCHBOT_OS_REGEX = /(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/;
var REQUIRED_VERSION_PARTS = 3;
var userAgentRules = [
    ['aol', /AOLShield\/([0-9\._]+)/],
    ['edge', /Edge\/([0-9\._]+)/],
    ['edge-ios', /EdgiOS\/([0-9\._]+)/],
    ['yandexbrowser', /YaBrowser\/([0-9\._]+)/],
    ['kakaotalk', /KAKAOTALK\s([0-9\.]+)/],
    ['samsung', /SamsungBrowser\/([0-9\.]+)/],
    ['silk', /\bSilk\/([0-9._-]+)\b/],
    ['miui', /MiuiBrowser\/([0-9\.]+)$/],
    ['beaker', /BeakerBrowser\/([0-9\.]+)/],
    ['edge-chromium', /EdgA?\/([0-9\.]+)/],
    [
        'chromium-webview',
        /(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/,
    ],
    ['chrome', /(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],
    ['phantomjs', /PhantomJS\/([0-9\.]+)(:?\s|$)/],
    ['crios', /CriOS\/([0-9\.]+)(:?\s|$)/],
    ['firefox', /Firefox\/([0-9\.]+)(?:\s|$)/],
    ['fxios', /FxiOS\/([0-9\.]+)/],
    ['opera-mini', /Opera Mini.*Version\/([0-9\.]+)/],
    ['opera', /Opera\/([0-9\.]+)(?:\s|$)/],
    ['opera', /OPR\/([0-9\.]+)(:?\s|$)/],
    ['pie', /^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],
    ['pie', /^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],
    ['netfront', /^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],
    ['ie', /Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],
    ['ie', /MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],
    ['ie', /MSIE\s(7\.0)/],
    ['bb10', /BB10;\sTouch.*Version\/([0-9\.]+)/],
    ['android', /Android\s([0-9\.]+)/],
    ['ios', /Version\/([0-9\._]+).*Mobile.*Safari.*/],
    ['safari', /Version\/([0-9\._]+).*Safari/],
    ['facebook', /FB[AS]V\/([0-9\.]+)/],
    ['instagram', /Instagram\s([0-9\.]+)/],
    ['ios-webview', /AppleWebKit\/([0-9\.]+).*Mobile/],
    ['ios-webview', /AppleWebKit\/([0-9\.]+).*Gecko\)$/],
    ['curl', /^curl\/([0-9\.]+)$/],
    ['searchbot', SEARCHBOX_UA_REGEX],
];
var operatingSystemRules = [
    ['iOS', /iP(hone|od|ad)/],
    ['Android OS', /Android/],
    ['BlackBerry OS', /BlackBerry|BB10/],
    ['Windows Mobile', /IEMobile/],
    ['Amazon OS', /Kindle/],
    ['Windows 3.11', /Win16/],
    ['Windows 95', /(Windows 95)|(Win95)|(Windows_95)/],
    ['Windows 98', /(Windows 98)|(Win98)/],
    ['Windows 2000', /(Windows NT 5.0)|(Windows 2000)/],
    ['Windows XP', /(Windows NT 5.1)|(Windows XP)/],
    ['Windows Server 2003', /(Windows NT 5.2)/],
    ['Windows Vista', /(Windows NT 6.0)/],
    ['Windows 7', /(Windows NT 6.1)/],
    ['Windows 8', /(Windows NT 6.2)/],
    ['Windows 8.1', /(Windows NT 6.3)/],
    ['Windows 10', /(Windows NT 10.0)/],
    ['Windows ME', /Windows ME/],
    ['Windows CE', /Windows CE|WinCE|Microsoft Pocket Internet Explorer/],
    ['Open BSD', /OpenBSD/],
    ['Sun OS', /SunOS/],
    ['Chrome OS', /CrOS/],
    ['Linux', /(Linux)|(X11)/],
    ['Mac OS', /(Mac_PowerPC)|(Macintosh)/],
    ['QNX', /QNX/],
    ['BeOS', /BeOS/],
    ['OS/2', /OS\/2/],
];
function detect(userAgent) {
    if (!!userAgent) {
        return parseUserAgent(userAgent);
    }
    if (typeof document === 'undefined' &&
        typeof navigator !== 'undefined' &&
        navigator.product === 'ReactNative') {
        return new ReactNativeInfo();
    }
    if (typeof navigator !== 'undefined') {
        return parseUserAgent(navigator.userAgent);
    }
    return getNodeVersion();
}
function matchUserAgent(ua) {
    // opted for using reduce here rather than Array#first with a regex.test call
    // this is primarily because using the reduce we only perform the regex
    // execution once rather than once for the test and for the exec again below
    // probably something that needs to be benchmarked though
    return (ua !== '' &&
        userAgentRules.reduce(function (matched, _a) {
            var browser = _a[0], regex = _a[1];
            if (matched) {
                return matched;
            }
            var uaMatch = regex.exec(ua);
            return !!uaMatch && [browser, uaMatch];
        }, false));
}
function browserName(ua) {
    var data = matchUserAgent(ua);
    return data ? data[0] : null;
}
function parseUserAgent(ua) {
    var matchedRule = matchUserAgent(ua);
    if (!matchedRule) {
        return null;
    }
    var name = matchedRule[0], match = matchedRule[1];
    if (name === 'searchbot') {
        return new BotInfo();
    }
    // Do not use RegExp for split operation as some browser do not support it (See: http://blog.stevenlevithan.com/archives/cross-browser-split)
    var versionParts = match[1] && match[1].split('.').join('_').split('_').slice(0, 3);
    if (versionParts) {
        if (versionParts.length < REQUIRED_VERSION_PARTS) {
            versionParts = __spreadArray(__spreadArray([], versionParts, true), createVersionParts(REQUIRED_VERSION_PARTS - versionParts.length), true);
        }
    }
    else {
        versionParts = [];
    }
    var version = versionParts.join('.');
    var os = detectOS(ua);
    var searchBotMatch = SEARCHBOT_OS_REGEX.exec(ua);
    if (searchBotMatch && searchBotMatch[1]) {
        return new SearchBotDeviceInfo(name, version, os, searchBotMatch[1]);
    }
    return new BrowserInfo(name, version, os);
}
function detectOS(ua) {
    for (var ii = 0, count = operatingSystemRules.length; ii < count; ii++) {
        var _a = operatingSystemRules[ii], os = _a[0], regex = _a[1];
        var match = regex.exec(ua);
        if (match) {
            return os;
        }
    }
    return null;
}
function getNodeVersion() {
    var isNode = typeof process !== 'undefined' && process.version;
    return isNode ? new NodeInfo(process.version.slice(1)) : null;
}
function createVersionParts(count) {
    var output = [];
    for (var ii = 0; ii < count; ii++) {
        output.push('0');
    }
    return output;
}

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("eef6")))

/***/ }),

/***/ "4035":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview 矩形
 * @author dxq613@gmail.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var base_1 = __webpack_require__("98ae");
var parse_1 = __webpack_require__("c2c4");
var util_1 = __webpack_require__("1e49");
var rect_1 = __webpack_require__("8522");
var rect_radius_1 = __webpack_require__("d387");
var point_in_path_1 = __webpack_require__("6248");
var Rect = /** @class */ (function (_super) {
    tslib_1.__extends(Rect, _super);
    function Rect() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Rect.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0, radius: 0 });
    };
    Rect.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {
        var attrs = this.attr();
        var minX = attrs.x;
        var minY = attrs.y;
        var width = attrs.width;
        var height = attrs.height;
        var radius = attrs.radius;
        // 无圆角时的策略
        if (!radius) {
            var halfWidth = lineWidth / 2;
            // 同时填充和带有边框
            if (isFill && isStroke) {
                return util_1.inBox(minX - halfWidth, minY - halfWidth, width + halfWidth, height + halfWidth, x, y);
            }
            // 仅填充
            if (isFill) {
                return util_1.inBox(minX, minY, width, height, x, y);
            }
            if (isStroke) {
                return rect_1.default(minX, minY, width, height, lineWidth, x, y);
            }
        }
        else {
            var isHit = false;
            if (isStroke) {
                isHit = rect_radius_1.default(minX, minY, width, height, radius, lineWidth, x, y);
            }
            // 仅填充时带有圆角的矩形直接通过图形拾取
            // 以后可以改成纯数学的近似拾取，将圆弧切割成多边形
            if (!isHit && isFill) {
                isHit = point_in_path_1.default(this, x, y);
            }
            return isHit;
        }
    };
    Rect.prototype.createPath = function (context) {
        var attrs = this.attr();
        var x = attrs.x;
        var y = attrs.y;
        var width = attrs.width;
        var height = attrs.height;
        var radius = attrs.radius;
        context.beginPath();
        if (radius === 0) {
            // 改成原生的rect方法
            context.rect(x, y, width, height);
        }
        else {
            var _a = parse_1.parseRadius(radius), r1 = _a[0], r2 = _a[1], r3 = _a[2], r4 = _a[3];
            context.moveTo(x + r1, y);
            context.lineTo(x + width - r2, y);
            r2 !== 0 && context.arc(x + width - r2, y + r2, r2, -Math.PI / 2, 0);
            context.lineTo(x + width, y + height - r3);
            r3 !== 0 && context.arc(x + width - r3, y + height - r3, r3, 0, Math.PI / 2);
            context.lineTo(x + r4, y + height);
            r4 !== 0 && context.arc(x + r4, y + height - r4, r4, Math.PI / 2, Math.PI);
            context.lineTo(x, y + r1);
            r1 !== 0 && context.arc(x + r1, y + r1, r1, Math.PI, Math.PI * 1.5);
            context.closePath();
        }
    };
    return Rect;
}(base_1.default));
exports.default = Rect;
//# sourceMappingURL=rect.js.map

/***/ }),

/***/ "4086":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");
var wellKnownSymbol = __webpack_require__("9a0b");
var V8_VERSION = __webpack_require__("8423");

var SPECIES = wellKnownSymbol('species');

module.exports = function (METHOD_NAME) {
  // We can't use this feature detection in V8 since it causes
  // deoptimization and serious performance degradation
  // https://github.com/zloirock/core-js/issues/677
  return V8_VERSION >= 51 || !fails(function () {
    var array = [];
    var constructor = array.constructor = {};
    constructor[SPECIES] = function () {
      return { foo: 1 };
    };
    return array[METHOD_NAME](Boolean).foo !== 1;
  });
};


/***/ }),

/***/ "40cb":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var fails = __webpack_require__("e835");
var isCallable = __webpack_require__("fe72");
var hasOwn = __webpack_require__("85ed");
var DESCRIPTORS = __webpack_require__("98c8");
var CONFIGURABLE_FUNCTION_NAME = __webpack_require__("5efb").CONFIGURABLE;
var inspectSource = __webpack_require__("c89e");
var InternalStateModule = __webpack_require__("d987");

var enforceInternalState = InternalStateModule.enforce;
var getInternalState = InternalStateModule.get;
var $String = String;
// eslint-disable-next-line es/no-object-defineproperty -- safe
var defineProperty = Object.defineProperty;
var stringSlice = uncurryThis(''.slice);
var replace = uncurryThis(''.replace);
var join = uncurryThis([].join);

var CONFIGURABLE_LENGTH = DESCRIPTORS && !fails(function () {
  return defineProperty(function () { /* empty */ }, 'length', { value: 8 }).length !== 8;
});

var TEMPLATE = String(String).split('String');

var makeBuiltIn = module.exports = function (value, name, options) {
  if (stringSlice($String(name), 0, 7) === 'Symbol(') {
    name = '[' + replace($String(name), /^Symbol\(([^)]*)\).*$/, '$1') + ']';
  }
  if (options && options.getter) name = 'get ' + name;
  if (options && options.setter) name = 'set ' + name;
  if (!hasOwn(value, 'name') || (CONFIGURABLE_FUNCTION_NAME && value.name !== name)) {
    if (DESCRIPTORS) defineProperty(value, 'name', { value: name, configurable: true });
    else value.name = name;
  }
  if (CONFIGURABLE_LENGTH && options && hasOwn(options, 'arity') && value.length !== options.arity) {
    defineProperty(value, 'length', { value: options.arity });
  }
  try {
    if (options && hasOwn(options, 'constructor') && options.constructor) {
      if (DESCRIPTORS) defineProperty(value, 'prototype', { writable: false });
    // in V8 ~ Chrome 53, prototypes of some methods, like `Array.prototype.values`, are non-writable
    } else if (value.prototype) value.prototype = undefined;
  } catch (error) { /* empty */ }
  var state = enforceInternalState(value);
  if (!hasOwn(state, 'source')) {
    state.source = join(TEMPLATE, typeof name == 'string' ? name : '');
  } return value;
};

// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative
// eslint-disable-next-line no-extend-native -- required
Function.prototype.toString = makeBuiltIn(function toString() {
  return isCallable(this) && getInternalState(this).source || inspectSource(this);
}, 'toString');


/***/ }),

/***/ "4127":
/***/ (function(module, exports, __webpack_require__) {

var listCacheClear = __webpack_require__("7bd5"),
    listCacheDelete = __webpack_require__("cd2a"),
    listCacheGet = __webpack_require__("5193"),
    listCacheHas = __webpack_require__("0515"),
    listCacheSet = __webpack_require__("7ea4");

/**
 * Creates an list cache object.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function ListCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `ListCache`.
ListCache.prototype.clear = listCacheClear;
ListCache.prototype['delete'] = listCacheDelete;
ListCache.prototype.get = listCacheGet;
ListCache.prototype.has = listCacheHas;
ListCache.prototype.set = listCacheSet;

module.exports = ListCache;


/***/ }),

/***/ "4276":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NativePromiseConstructor = __webpack_require__("b885");
var checkCorrectnessOfIteration = __webpack_require__("7795");
var FORCED_PROMISE_CONSTRUCTOR = __webpack_require__("7cb3").CONSTRUCTOR;

module.exports = FORCED_PROMISE_CONSTRUCTOR || !checkCorrectnessOfIteration(function (iterable) {
  NativePromiseConstructor.all(iterable).then(undefined, function () { /* empty */ });
});


/***/ }),

/***/ "42b8":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var call = __webpack_require__("ded0");
var IS_PURE = __webpack_require__("6e09");
var FunctionName = __webpack_require__("5efb");
var isCallable = __webpack_require__("fe72");
var createIteratorConstructor = __webpack_require__("622b");
var getPrototypeOf = __webpack_require__("4b29");
var setPrototypeOf = __webpack_require__("6628");
var setToStringTag = __webpack_require__("5836");
var createNonEnumerableProperty = __webpack_require__("80b9");
var defineBuiltIn = __webpack_require__("f303");
var wellKnownSymbol = __webpack_require__("9a0b");
var Iterators = __webpack_require__("b462");
var IteratorsCore = __webpack_require__("82b1");

var PROPER_FUNCTION_NAME = FunctionName.PROPER;
var CONFIGURABLE_FUNCTION_NAME = FunctionName.CONFIGURABLE;
var IteratorPrototype = IteratorsCore.IteratorPrototype;
var BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;
var ITERATOR = wellKnownSymbol('iterator');
var KEYS = 'keys';
var VALUES = 'values';
var ENTRIES = 'entries';

var returnThis = function () { return this; };

module.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {
  createIteratorConstructor(IteratorConstructor, NAME, next);

  var getIterationMethod = function (KIND) {
    if (KIND === DEFAULT && defaultIterator) return defaultIterator;
    if (!BUGGY_SAFARI_ITERATORS && KIND && KIND in IterablePrototype) return IterablePrototype[KIND];

    switch (KIND) {
      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };
      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };
      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };
    }

    return function () { return new IteratorConstructor(this); };
  };

  var TO_STRING_TAG = NAME + ' Iterator';
  var INCORRECT_VALUES_NAME = false;
  var IterablePrototype = Iterable.prototype;
  var nativeIterator = IterablePrototype[ITERATOR]
    || IterablePrototype['@@iterator']
    || DEFAULT && IterablePrototype[DEFAULT];
  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);
  var anyNativeIterator = NAME === 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;
  var CurrentIteratorPrototype, methods, KEY;

  // fix native
  if (anyNativeIterator) {
    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));
    if (CurrentIteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {
      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {
        if (setPrototypeOf) {
          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);
        } else if (!isCallable(CurrentIteratorPrototype[ITERATOR])) {
          defineBuiltIn(CurrentIteratorPrototype, ITERATOR, returnThis);
        }
      }
      // Set @@toStringTag to native iterators
      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);
      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;
    }
  }

  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF
  if (PROPER_FUNCTION_NAME && DEFAULT === VALUES && nativeIterator && nativeIterator.name !== VALUES) {
    if (!IS_PURE && CONFIGURABLE_FUNCTION_NAME) {
      createNonEnumerableProperty(IterablePrototype, 'name', VALUES);
    } else {
      INCORRECT_VALUES_NAME = true;
      defaultIterator = function values() { return call(nativeIterator, this); };
    }
  }

  // export additional methods
  if (DEFAULT) {
    methods = {
      values: getIterationMethod(VALUES),
      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),
      entries: getIterationMethod(ENTRIES)
    };
    if (FORCED) for (KEY in methods) {
      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {
        defineBuiltIn(IterablePrototype, KEY, methods[KEY]);
      }
    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);
  }

  // define iterator
  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {
    defineBuiltIn(IterablePrototype, ITERATOR, defaultIterator, { name: DEFAULT });
  }
  Iterators[NAME] = defaultIterator;

  return methods;
};


/***/ }),

/***/ "4303":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var from = __webpack_require__("d26d");
var checkCorrectnessOfIteration = __webpack_require__("7795");

var INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {
  // eslint-disable-next-line es/no-array-from -- required for testing
  Array.from(iterable);
});

// `Array.from` method
// https://tc39.es/ecma262/#sec-array.from
$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {
  from: from
});


/***/ }),

/***/ "4431":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var classof = __webpack_require__("e013");
var getMethod = __webpack_require__("f1a6");
var isNullOrUndefined = __webpack_require__("2e64");
var Iterators = __webpack_require__("b462");
var wellKnownSymbol = __webpack_require__("9a0b");

var ITERATOR = wellKnownSymbol('iterator');

module.exports = function (it) {
  if (!isNullOrUndefined(it)) return getMethod(it, ITERATOR)
    || getMethod(it, '@@iterator')
    || Iterators[classof(it)];
};


/***/ }),

/***/ "4502":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, "Quad", function() { return /* reexport */ quadratic; });
__webpack_require__.d(__webpack_exports__, "Cubic", function() { return /* reexport */ cubic; });
__webpack_require__.d(__webpack_exports__, "Arc", function() { return /* reexport */ arc; });
__webpack_require__.d(__webpack_exports__, "Line", function() { return /* reexport */ line; });
__webpack_require__.d(__webpack_exports__, "Polygon", function() { return /* reexport */ polygon; });
__webpack_require__.d(__webpack_exports__, "Polyline", function() { return /* reexport */ polyline; });
__webpack_require__.d(__webpack_exports__, "Util", function() { return /* reexport */ util_namespaceObject; });

// NAMESPACE OBJECT: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/util.js
var util_namespaceObject = {};
__webpack_require__.r(util_namespaceObject);
__webpack_require__.d(util_namespaceObject, "distance", function() { return distance; });
__webpack_require__.d(util_namespaceObject, "isNumberEqual", function() { return isNumberEqual; });
__webpack_require__.d(util_namespaceObject, "getBBoxByArray", function() { return getBBoxByArray; });
__webpack_require__.d(util_namespaceObject, "getBBoxRange", function() { return getBBoxRange; });
__webpack_require__.d(util_namespaceObject, "piMod", function() { return piMod; });

// EXTERNAL MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/index.js + 110 modules
var esm = __webpack_require__("6d77");

// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/util.js

/**
 * 两点之间的距离
 * @param {number} x1 起始点 x
 * @param {number} y1 起始点 y
 * @param {number} x2 结束点 x
 * @param {number} y2 结束点 y
 * @return {number} 距离
 */
function distance(x1, y1, x2, y2) {
    var dx = x1 - x2;
    var dy = y1 - y2;
    return Math.sqrt(dx * dx + dy * dy);
}
function isNumberEqual(v1, v2) {
    return Math.abs(v1 - v2) < 0.001;
}
function getBBoxByArray(xArr, yArr) {
    var minX = Object(esm["min"])(xArr);
    var minY = Object(esm["min"])(yArr);
    var maxX = Object(esm["max"])(xArr);
    var maxY = Object(esm["max"])(yArr);
    return {
        x: minX,
        y: minY,
        width: maxX - minX,
        height: maxY - minY,
    };
}
function getBBoxRange(x1, y1, x2, y2) {
    return {
        minX: Object(esm["min"])([x1, x2]),
        maxX: Object(esm["max"])([x1, x2]),
        minY: Object(esm["min"])([y1, y2]),
        maxY: Object(esm["max"])([y1, y2]),
    };
}
function piMod(angle) {
    return (angle + Math.PI * 2) % (Math.PI * 2);
}
//# sourceMappingURL=util.js.map
// EXTERNAL MODULE: ./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/vec2.js
var vec2 = __webpack_require__("4f07");

// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/line.js


/* harmony default export */ var line = ({
    /**
     * 计算线段的包围盒
     * @param {number} x1 起始点 x
     * @param {number} y1 起始点 y
     * @param {number} x2 结束点 x
     * @param {number} y2 结束点 y
     * @return {object} 包围盒对象
     */
    box: function (x1, y1, x2, y2) {
        return getBBoxByArray([x1, x2], [y1, y2]);
    },
    /**
     * 线段的长度
     * @param {number} x1 起始点 x
     * @param {number} y1 起始点 y
     * @param {number} x2 结束点 x
     * @param {number} y2 结束点 y
     * @return {number} 距离
     */
    length: function (x1, y1, x2, y2) {
        return distance(x1, y1, x2, y2);
    },
    /**
     * 根据比例获取点
     * @param {number} x1 起始点 x
     * @param {number} y1 起始点 y
     * @param {number} x2 结束点 x
     * @param {number} y2 结束点 y
     * @param {number} t 指定比例
     * @return {object} 包含 x, y 的点
     */
    pointAt: function (x1, y1, x2, y2, t) {
        return {
            x: (1 - t) * x1 + t * x2,
            y: (1 - t) * y1 + t * y2,
        };
    },
    /**
     * 点到线段的距离
     * @param {number} x1 起始点 x
     * @param {number} y1 起始点 y
     * @param {number} x2 结束点 x
     * @param {number} y2 结束点 y
     * @param {number} x  测试点 x
     * @param {number} y  测试点 y
     * @return {number} 距离
     */
    pointDistance: function (x1, y1, x2, y2, x, y) {
        // 投影距离 x1, y1 的向量，假设 p, p1, p2 三个点，投影点为 a
        // p1a = p1p.p1p2/|p1p2| * (p1p 的单位向量)
        var cross = (x2 - x1) * (x - x1) + (y2 - y1) * (y - y1);
        if (cross < 0) {
            return distance(x1, y1, x, y);
        }
        var lengthSquare = (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1);
        if (cross > lengthSquare) {
            return distance(x2, y2, x, y);
        }
        return this.pointToLine(x1, y1, x2, y2, x, y);
    },
    /**
     * 点到直线的距离，而不是点到线段的距离
     * @param {number} x1 起始点 x
     * @param {number} y1 起始点 y
     * @param {number} x2 结束点 x
     * @param {number} y2 结束点 y
     * @param {number} x  测试点 x
     * @param {number} y  测试点 y
     * @return {number} 距离
     */
    pointToLine: function (x1, y1, x2, y2, x, y) {
        var d = [x2 - x1, y2 - y1];
        // 如果端点相等，则判定点到点的距离
        if (vec2["exactEquals"](d, [0, 0])) {
            return Math.sqrt((x - x1) * (x - x1) + (y - y1) * (y - y1));
        }
        var u = [-d[1], d[0]];
        vec2["normalize"](u, u);
        var a = [x - x1, y - y1];
        return Math.abs(vec2["dot"](a, u));
    },
    /**
     * 线段的角度
     * @param {number} x1 起始点 x
     * @param {number} y1 起始点 y
     * @param {number} x2 结束点 x
     * @param {number} y2 结束点 y
     * @return {number} 导数
     */
    tangentAngle: function (x1, y1, x2, y2) {
        return Math.atan2(y2 - y1, x2 - x1);
    },
});
//# sourceMappingURL=line.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/bezier.js

var EPSILON = 0.0001;
/**
 * 使用牛顿切割法求最近的点
 * @param {number[]} xArr      点的 x 数组
 * @param {number[]} yArr      点的 y 数组
 * @param {number}   x         指定的点 x
 * @param {number}   y         指定的点 y
 * @param {Function} tCallback 差值函数
 */
function bezier_nearestPoint(xArr, yArr, x, y, tCallback, length) {
    var t;
    var d = Infinity;
    var v0 = [x, y];
    var segNum = 20;
    if (length && length > 200) {
        segNum = length / 10;
    }
    var increaseRate = 1 / segNum;
    var interval = increaseRate / 10;
    for (var i = 0; i <= segNum; i++) {
        var _t = i * increaseRate;
        var v1 = [tCallback.apply(null, xArr.concat([_t])), tCallback.apply(null, yArr.concat([_t]))];
        var d1 = distance(v0[0], v0[1], v1[0], v1[1]);
        if (d1 < d) {
            t = _t;
            d = d1;
        }
    }
    // 提前终止
    if (t === 0) {
        return {
            x: xArr[0],
            y: yArr[0],
        };
    }
    if (t === 1) {
        var count = xArr.length;
        return {
            x: xArr[count - 1],
            y: yArr[count - 1],
        };
    }
    d = Infinity;
    for (var i = 0; i < 32; i++) {
        if (interval < EPSILON) {
            break;
        }
        var prev = t - interval;
        var next = t + interval;
        var v1 = [tCallback.apply(null, xArr.concat([prev])), tCallback.apply(null, yArr.concat([prev]))];
        var d1 = distance(v0[0], v0[1], v1[0], v1[1]);
        if (prev >= 0 && d1 < d) {
            t = prev;
            d = d1;
        }
        else {
            var v2 = [tCallback.apply(null, xArr.concat([next])), tCallback.apply(null, yArr.concat([next]))];
            var d2 = distance(v0[0], v0[1], v2[0], v2[1]);
            if (next <= 1 && d2 < d) {
                t = next;
                d = d2;
            }
            else {
                interval *= 0.5;
            }
        }
    }
    return {
        x: tCallback.apply(null, xArr.concat([t])),
        y: tCallback.apply(null, yArr.concat([t])),
    };
}
// 近似求解 https://community.khronos.org/t/3d-cubic-bezier-segment-length/62363/2
function snapLength(xArr, yArr) {
    var totalLength = 0;
    var count = xArr.length;
    for (var i = 0; i < count; i++) {
        var x = xArr[i];
        var y = yArr[i];
        var nextX = xArr[(i + 1) % count];
        var nextY = yArr[(i + 1) % count];
        totalLength += distance(x, y, nextX, nextY);
    }
    return totalLength / 2;
}
//# sourceMappingURL=bezier.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/quadratic.js



// 差值公式
function quadraticAt(p0, p1, p2, t) {
    var onet = 1 - t;
    return onet * onet * p0 + 2 * t * onet * p1 + t * t * p2;
}
// 求极值
function extrema(p0, p1, p2) {
    var a = p0 + p2 - 2 * p1;
    if (isNumberEqual(a, 0)) {
        return [0.5];
    }
    var rst = (p0 - p1) / a;
    if (rst <= 1 && rst >= 0) {
        return [rst];
    }
    return [];
}
function derivativeAt(p0, p1, p2, t) {
    return 2 * (1 - t) * (p1 - p0) + 2 * t * (p2 - p1);
}
// 分割贝塞尔曲线
function divideQuadratic(x1, y1, x2, y2, x3, y3, t) {
    // 划分点
    var xt = quadraticAt(x1, x2, x3, t);
    var yt = quadraticAt(y1, y2, y3, t);
    // 分割的第一条曲线的控制点
    var controlPoint1 = line.pointAt(x1, y1, x2, y2, t);
    // 分割的第二条曲线的控制点
    var controlPoint2 = line.pointAt(x2, y2, x3, y3, t);
    return [
        [x1, y1, controlPoint1.x, controlPoint1.y, xt, yt],
        [xt, yt, controlPoint2.x, controlPoint2.y, x3, y3],
    ];
}
// 使用迭代法取贝塞尔曲线的长度
function quadraticLength(x1, y1, x2, y2, x3, y3, iterationCount) {
    if (iterationCount === 0) {
        return (distance(x1, y1, x2, y2) + distance(x2, y2, x3, y3) + distance(x1, y1, x3, y3)) / 2;
    }
    var quadratics = divideQuadratic(x1, y1, x2, y2, x3, y3, 0.5);
    var left = quadratics[0];
    var right = quadratics[1];
    left.push(iterationCount - 1);
    right.push(iterationCount - 1);
    return quadraticLength.apply(null, left) + quadraticLength.apply(null, right);
}
/* harmony default export */ var quadratic = ({
    box: function (x1, y1, x2, y2, x3, y3) {
        var xExtrema = extrema(x1, x2, x3)[0];
        var yExtrema = extrema(y1, y2, y3)[0];
        // 控制点不加入 box 的计算
        var xArr = [x1, x3];
        var yArr = [y1, y3];
        if (xExtrema !== undefined) {
            xArr.push(quadraticAt(x1, x2, x3, xExtrema));
        }
        if (yExtrema !== undefined) {
            yArr.push(quadraticAt(y1, y2, y3, yExtrema));
        }
        return getBBoxByArray(xArr, yArr);
    },
    length: function (x1, y1, x2, y2, x3, y3) {
        return quadraticLength(x1, y1, x2, y2, x3, y3, 3);
    },
    nearestPoint: function (x1, y1, x2, y2, x3, y3, x0, y0) {
        return bezier_nearestPoint([x1, x2, x3], [y1, y2, y3], x0, y0, quadraticAt);
    },
    pointDistance: function (x1, y1, x2, y2, x3, y3, x0, y0) {
        var point = this.nearestPoint(x1, y1, x2, y2, x3, y3, x0, y0);
        return distance(point.x, point.y, x0, y0);
    },
    interpolationAt: quadraticAt,
    pointAt: function (x1, y1, x2, y2, x3, y3, t) {
        return {
            x: quadraticAt(x1, x2, x3, t),
            y: quadraticAt(y1, y2, y3, t),
        };
    },
    divide: function (x1, y1, x2, y2, x3, y3, t) {
        return divideQuadratic(x1, y1, x2, y2, x3, y3, t);
    },
    tangentAngle: function (x1, y1, x2, y2, x3, y3, t) {
        var dx = derivativeAt(x1, x2, x3, t);
        var dy = derivativeAt(y1, y2, y3, t);
        var angle = Math.atan2(dy, dx);
        return piMod(angle);
    },
});
//# sourceMappingURL=quadratic.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/cubic.js



function cubicAt(p0, p1, p2, p3, t) {
    var onet = 1 - t; // t * t * t 的性能大概是 Math.pow(t, 3) 的三倍
    return onet * onet * onet * p0 + 3 * p1 * t * onet * onet + 3 * p2 * t * t * onet + p3 * t * t * t;
}
function cubic_derivativeAt(p0, p1, p2, p3, t) {
    var onet = 1 - t;
    return 3 * (onet * onet * (p1 - p0) + 2 * onet * t * (p2 - p1) + t * t * (p3 - p2));
}
function cubic_extrema(p0, p1, p2, p3) {
    var a = -3 * p0 + 9 * p1 - 9 * p2 + 3 * p3;
    var b = 6 * p0 - 12 * p1 + 6 * p2;
    var c = 3 * p1 - 3 * p0;
    var extremas = [];
    var t1;
    var t2;
    var discSqrt;
    if (isNumberEqual(a, 0)) {
        if (!isNumberEqual(b, 0)) {
            t1 = -c / b;
            if (t1 >= 0 && t1 <= 1) {
                extremas.push(t1);
            }
        }
    }
    else {
        var disc = b * b - 4 * a * c;
        if (isNumberEqual(disc, 0)) {
            extremas.push(-b / (2 * a));
        }
        else if (disc > 0) {
            discSqrt = Math.sqrt(disc);
            t1 = (-b + discSqrt) / (2 * a);
            t2 = (-b - discSqrt) / (2 * a);
            if (t1 >= 0 && t1 <= 1) {
                extremas.push(t1);
            }
            if (t2 >= 0 && t2 <= 1) {
                extremas.push(t2);
            }
        }
    }
    return extremas;
}
// 分割贝塞尔曲线
function divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, t) {
    // 划分点
    var xt = cubicAt(x1, x2, x3, x4, t);
    var yt = cubicAt(y1, y2, y3, y4, t);
    // 计算两点之间的差值点
    var c1 = line.pointAt(x1, y1, x2, y2, t);
    var c2 = line.pointAt(x2, y2, x3, y3, t);
    var c3 = line.pointAt(x3, y3, x4, y4, t);
    var c12 = line.pointAt(c1.x, c1.y, c2.x, c2.y, t);
    var c23 = line.pointAt(c2.x, c2.y, c3.x, c3.y, t);
    return [
        [x1, y1, c1.x, c1.y, c12.x, c12.y, xt, yt],
        [xt, yt, c23.x, c23.y, c3.x, c3.y, x4, y4],
    ];
}
// 使用迭代法取贝塞尔曲线的长度，二阶和三阶分开写，更清晰和便于调试
function cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, iterationCount) {
    if (iterationCount === 0) {
        return snapLength([x1, x2, x3, x4], [y1, y2, y3, y4]);
    }
    var cubics = divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, 0.5);
    var left = cubics[0];
    var right = cubics[1];
    left.push(iterationCount - 1);
    right.push(iterationCount - 1);
    return cubicLength.apply(null, left) + cubicLength.apply(null, right);
}
/* harmony default export */ var cubic = ({
    extrema: cubic_extrema,
    box: function (x1, y1, x2, y2, x3, y3, x4, y4) {
        var xArr = [x1, x4];
        var yArr = [y1, y4];
        var xExtrema = cubic_extrema(x1, x2, x3, x4);
        var yExtrema = cubic_extrema(y1, y2, y3, y4);
        for (var i = 0; i < xExtrema.length; i++) {
            xArr.push(cubicAt(x1, x2, x3, x4, xExtrema[i]));
        }
        for (var i = 0; i < yExtrema.length; i++) {
            yArr.push(cubicAt(y1, y2, y3, y4, yExtrema[i]));
        }
        return getBBoxByArray(xArr, yArr);
    },
    length: function (x1, y1, x2, y2, x3, y3, x4, y4) {
        // 迭代三次，划分成 8 段求长度
        return cubicLength(x1, y1, x2, y2, x3, y3, x4, y4, 3);
    },
    nearestPoint: function (x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length) {
        return bezier_nearestPoint([x1, x2, x3, x4], [y1, y2, y3, y4], x0, y0, cubicAt, length);
    },
    pointDistance: function (x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length) {
        var point = this.nearestPoint(x1, y1, x2, y2, x3, y3, x4, y4, x0, y0, length);
        return distance(point.x, point.y, x0, y0);
    },
    interpolationAt: cubicAt,
    pointAt: function (x1, y1, x2, y2, x3, y3, x4, y4, t) {
        return {
            x: cubicAt(x1, x2, x3, x4, t),
            y: cubicAt(y1, y2, y3, y4, t),
        };
    },
    divide: function (x1, y1, x2, y2, x3, y3, x4, y4, t) {
        return divideCubic(x1, y1, x2, y2, x3, y3, x4, y4, t);
    },
    tangentAngle: function (x1, y1, x2, y2, x3, y3, x4, y4, t) {
        var dx = cubic_derivativeAt(x1, x2, x3, x4, t);
        var dy = cubic_derivativeAt(y1, y2, y3, y4, t);
        return piMod(Math.atan2(dy, dx));
    },
});
//# sourceMappingURL=cubic.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/ellipse.js
/**
 * @fileoverview 椭圆的一些计算，
 *  - 周长计算参考：https://www.mathsisfun.com/geometry/ellipse-perimeter.html
 *  - 距离计算参考：https://wet-robots.ghost.io/simple-method-for-distance-to-ellipse/
 * @author dxq613@gmail.com
 */

function copysign(v1, v2) {
    var absv = Math.abs(v1);
    return v2 > 0 ? absv : absv * -1;
}
/* harmony default export */ var ellipse = ({
    /**
     * 包围盒计算
     * @param {number} x  椭圆中心 x
     * @param {number} y  椭圆中心 y
     * @param {number} rx 椭圆 x 方向半径
     * @param {number} ry 椭圆 y 方向半径
     * @return {object} 包围盒
     */
    box: function (x, y, rx, ry) {
        return {
            x: x - rx,
            y: y - ry,
            width: rx * 2,
            height: ry * 2,
        };
    },
    /**
     * 计算周长，使用近似法
     * @param {number} x  椭圆中心 x
     * @param {number} y  椭圆中心 y
     * @param {number} rx 椭圆 x 方向半径
     * @param {number} ry 椭圆 y 方向半径
     * @return {number} 椭圆周长
     */
    length: function (x, y, rx, ry) {
        return Math.PI * (3 * (rx + ry) - Math.sqrt((3 * rx + ry) * (rx + 3 * ry)));
    },
    /**
     * 距离椭圆最近的点
     * @param {number} x  椭圆中心 x
     * @param {number} y  椭圆中心 y
     * @param {number} rx 椭圆 x 方向半径
     * @param {number} ry 椭圆 y 方向半径
     * @param {number} x0  指定的点 x
     * @param {number} y0  指定的点 y
     * @return {object} 椭圆上距离指定点最近的点
     */
    nearestPoint: function (x, y, rx, ry, x0, y0) {
        var a = rx;
        var b = ry;
        // 假如椭圆半径为0则返回圆心
        if (a === 0 || b === 0) {
            return {
                x: x,
                y: y,
            };
        }
        // 转换成 0， 0 为中心的椭圆计算
        var relativeX = x0 - x;
        var relativeY = y0 - y;
        var px = Math.abs(relativeX);
        var py = Math.abs(relativeY);
        var squareA = a * a;
        var squareB = b * b;
        // const angle0 = Math.atan2(relativeY, relativeX);
        var t = Math.PI / 4;
        var nearestX; // 椭圆上的任一点
        var nearestY;
        // 迭代 4 次
        for (var i = 0; i < 4; i++) {
            nearestX = a * Math.cos(t);
            nearestY = b * Math.sin(t);
            var ex = ((squareA - squareB) * Math.pow(Math.cos(t), 3)) / a;
            var ey = ((squareB - squareA) * Math.pow(Math.sin(t), 3)) / b;
            var rx1 = nearestX - ex;
            var ry1 = nearestY - ey;
            var qx = px - ex;
            var qy = py - ey;
            var r = Math.hypot(ry1, rx1);
            var q = Math.hypot(qy, qx);
            var delta_c = r * Math.asin((rx1 * qy - ry1 * qx) / (r * q));
            var delta_t = delta_c / Math.sqrt(squareA + squareB - nearestX * nearestX - nearestY * nearestY);
            t += delta_t;
            t = Math.min(Math.PI / 2, Math.max(0, t));
        }
        return {
            x: x + copysign(nearestX, relativeX),
            y: y + copysign(nearestY, relativeY),
        };
    },
    /**
     * 点到椭圆最近的距离
     * @param {number} x  椭圆中心 x
     * @param {number} y  椭圆中心 y
     * @param {number} rx 椭圆 x 方向半径
     * @param {number} ry 椭圆 y 方向半径
     * @param {number} x0  指定的点 x
     * @param {number} y0  指定的点 y
     * @return {number} 点到椭圆的距离
     */
    pointDistance: function (x, y, rx, ry, x0, y0) {
        var nearestPoint = this.nearestPoint(x, y, rx, ry, x0, y0);
        return distance(nearestPoint.x, nearestPoint.y, x0, y0);
    },
    /**
     * 根据比例获取点
     * @param {number} x 椭圆中心 x
     * @param {number} y 椭圆中心 y
     * @param {number} rx 椭圆 x 方向半径
     * @param {number} ry 椭圆 y 方向半径
     * @param {number} t 指定比例，x轴方向为 0
     * @return {object} 点
     */
    pointAt: function (x, y, rx, ry, t) {
        var angle = 2 * Math.PI * t; // 按照角度进行计算，而不按照周长计算
        return {
            x: x + rx * Math.cos(angle),
            y: y + ry * Math.sin(angle),
        };
    },
    /**
     * 根据比例计算切线角度
     * @param {number} x 椭圆中心 x
     * @param {number} y 椭圆中心 y
     * @param {number} rx 椭圆 x 方向半径
     * @param {number} ry 椭圆 y 方向半径
     * @param {number} t 指定比例 0 - 1 之间，x轴方向为 0。在 0-1 范围之外是循环还是返回 null，还需要调整
     * @return {number} 角度，在 0 - 2PI 之间
     */
    tangentAngle: function (x, y, rx, ry, t) {
        var angle = 2 * Math.PI * t; // 按照角度进行计算，而不按照周长计算
        // 直接使用 x,y 的导数计算， x' = -rx * sin(t); y' = ry * cos(t);
        var tangentAngle = Math.atan2(ry * Math.cos(angle), -rx * Math.sin(angle));
        // 也可以使用指定点的切线方程计算，成本有些高
        // const point = this.pointAt(0, 0, rx, ry, t); // 椭圆的切线同椭圆的中心不相关
        // let tangentAngle = -1 * Math.atan((ry * ry * point.x) / (rx * rx * point.y));
        // if (angle >= 0 && angle <= Math.PI) {
        //   tangentAngle += Math.PI;
        // }
        return piMod(tangentAngle);
    },
});
//# sourceMappingURL=ellipse.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/arc.js


// 偏导数 x
function derivativeXAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle) {
    return -1 * rx * Math.cos(xRotation) * Math.sin(angle) - ry * Math.sin(xRotation) * Math.cos(angle);
}
// 偏导数 y
function derivativeYAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle) {
    return -1 * rx * Math.sin(xRotation) * Math.sin(angle) + ry * Math.cos(xRotation) * Math.cos(angle);
}
// x 的极值
function arc_xExtrema(rx, ry, xRotation) {
    return Math.atan((-ry / rx) * Math.tan(xRotation));
}
// y 的极值
function arc_yExtrema(rx, ry, xRotation) {
    return Math.atan(ry / (rx * Math.tan(xRotation)));
}
// 根据角度求 x 坐标
function xAt(cx, cy, rx, ry, xRotation, angle) {
    return rx * Math.cos(xRotation) * Math.cos(angle) - ry * Math.sin(xRotation) * Math.sin(angle) + cx;
}
// 根据角度求 y 坐标
function yAt(cx, cy, rx, ry, xRotation, angle) {
    return rx * Math.sin(xRotation) * Math.cos(angle) + ry * Math.cos(xRotation) * Math.sin(angle) + cy;
}
// 获取点在椭圆上的角度
function getAngle(rx, ry, x0, y0) {
    var angle = Math.atan2(y0 * rx, x0 * ry);
    // 转换到 0 - 2PI 内
    return (angle + Math.PI * 2) % (Math.PI * 2);
}
// 根据角度获取，x,y
function getPoint(rx, ry, angle) {
    return {
        x: rx * Math.cos(angle),
        y: ry * Math.sin(angle),
    };
}
// 旋转
function rotate(x, y, angle) {
    var cos = Math.cos(angle);
    var sin = Math.sin(angle);
    return [x * cos - y * sin, x * sin + y * cos];
}
/* harmony default export */ var arc = ({
    /**
     * 计算包围盒
     * @param {number} cx         圆心 x
     * @param {number} cy         圆心 y
     * @param {number} rx         x 轴方向的半径
     * @param {number} ry         y 轴方向的半径
     * @param {number} xRotation  旋转角度
     * @param {number} startAngle 起始角度
     * @param {number} endAngle   结束角度
     * @return {object} 包围盒对象
     */
    box: function (cx, cy, rx, ry, xRotation, startAngle, endAngle) {
        var xDim = arc_xExtrema(rx, ry, xRotation);
        var minX = Infinity;
        var maxX = -Infinity;
        var xs = [startAngle, endAngle];
        for (var i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {
            var xAngle = xDim + i;
            if (startAngle < endAngle) {
                if (startAngle < xAngle && xAngle < endAngle) {
                    xs.push(xAngle);
                }
            }
            else {
                if (endAngle < xAngle && xAngle < startAngle) {
                    xs.push(xAngle);
                }
            }
        }
        for (var i = 0; i < xs.length; i++) {
            var x = xAt(cx, cy, rx, ry, xRotation, xs[i]);
            if (x < minX) {
                minX = x;
            }
            if (x > maxX) {
                maxX = x;
            }
        }
        var yDim = arc_yExtrema(rx, ry, xRotation);
        var minY = Infinity;
        var maxY = -Infinity;
        var ys = [startAngle, endAngle];
        for (var i = -Math.PI * 2; i <= Math.PI * 2; i += Math.PI) {
            var yAngle = yDim + i;
            if (startAngle < endAngle) {
                if (startAngle < yAngle && yAngle < endAngle) {
                    ys.push(yAngle);
                }
            }
            else {
                if (endAngle < yAngle && yAngle < startAngle) {
                    ys.push(yAngle);
                }
            }
        }
        for (var i = 0; i < ys.length; i++) {
            var y = yAt(cx, cy, rx, ry, xRotation, ys[i]);
            if (y < minY) {
                minY = y;
            }
            if (y > maxY) {
                maxY = y;
            }
        }
        return {
            x: minX,
            y: minY,
            width: maxX - minX,
            height: maxY - minY,
        };
    },
    /**
     * 获取圆弧的长度，计算圆弧长度时不考虑旋转角度，
     * 仅跟 rx, ry, startAngle, endAngle 相关
     * @param {number} cx         圆心 x
     * @param {number} cy         圆心 y
     * @param {number} rx         x 轴方向的半径
     * @param {number} ry         y 轴方向的半径
     * @param {number} xRotation  旋转角度
     * @param {number} startAngle 起始角度
     * @param {number} endAngle   结束角度
     */
    length: function (cx, cy, rx, ry, xRotation, startAngle, endAngle) { },
    /**
     * 获取指定点到圆弧的最近距离的点
     * @param {number} cx         圆心 x
     * @param {number} cy         圆心 y
     * @param {number} rx         x 轴方向的半径
     * @param {number} ry         y 轴方向的半径
     * @param {number} xRotation  旋转角度
     * @param {number} startAngle 起始角度
     * @param {number} endAngle   结束角度
     * @param {number} x0         指定点的 x
     * @param {number} y0         指定点的 y
     * @return {object} 到指定点最近距离的点
     */
    nearestPoint: function (cx, cy, rx, ry, xRotation, startAngle, endAngle, x0, y0) {
        // 将最近距离问题转换成到椭圆中心 0,0 没有旋转的椭圆问题
        var relativeVector = rotate(x0 - cx, y0 - cy, -xRotation);
        var x1 = relativeVector[0], y1 = relativeVector[1];
        // 计算点到椭圆的最近的点
        var relativePoint = ellipse.nearestPoint(0, 0, rx, ry, x1, y1);
        // 获取点在椭圆上的角度
        var angle = getAngle(rx, ry, relativePoint.x, relativePoint.y);
        // 点没有在圆弧上
        if (angle < startAngle) {
            // 小于起始圆弧
            relativePoint = getPoint(rx, ry, startAngle);
        }
        else if (angle > endAngle) {
            // 大于结束圆弧
            relativePoint = getPoint(rx, ry, endAngle);
        }
        // 旋转到 xRotation 的角度
        var vector = rotate(relativePoint.x, relativePoint.y, xRotation);
        return {
            x: vector[0] + cx,
            y: vector[1] + cy,
        };
    },
    pointDistance: function (cx, cy, rx, ry, xRotation, startAngle, endAngle, x0, y0) {
        var nearestPoint = this.nearestPoint(cx, cy, rx, ry, x0, y0);
        return distance(nearestPoint.x, nearestPoint.y, x0, y0);
    },
    pointAt: function (cx, cy, rx, ry, xRotation, startAngle, endAngle, t) {
        var angle = (endAngle - startAngle) * t + startAngle;
        return {
            x: xAt(cx, cy, rx, ry, xRotation, angle),
            y: yAt(cx, cy, rx, ry, xRotation, angle),
        };
    },
    tangentAngle: function (cx, cy, rx, ry, xRotation, startAngle, endAngle, t) {
        var angle = (endAngle - startAngle) * t + startAngle;
        var dx = derivativeXAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle);
        var dy = derivativeYAt(cx, cy, rx, ry, xRotation, startAngle, endAngle, angle);
        return piMod(Math.atan2(dy, dx));
    },
});
//# sourceMappingURL=arc.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/segments.js


function analyzePoints(points) {
    // 计算每段的长度和总的长度
    var totalLength = 0;
    var segments = [];
    for (var i = 0; i < points.length - 1; i++) {
        var from = points[i];
        var to = points[i + 1];
        var length_1 = distance(from[0], from[1], to[0], to[1]);
        var seg = {
            from: from,
            to: to,
            length: length_1,
        };
        segments.push(seg);
        totalLength += length_1;
    }
    return { segments: segments, totalLength: totalLength };
}
function lengthOfSegment(points) {
    if (points.length < 2) {
        return 0;
    }
    var totalLength = 0;
    for (var i = 0; i < points.length - 1; i++) {
        var from = points[i];
        var to = points[i + 1];
        totalLength += distance(from[0], from[1], to[0], to[1]);
    }
    return totalLength;
}
/**
 * 按照比例在数据片段中获取点
 * @param {array} points 点的集合
 * @param {number} t 百分比 0-1
 * @return {object} 点的坐标
 */
function pointAtSegments(points, t) {
    // 边界判断
    if (t > 1 || t < 0 || points.length < 2) {
        return null;
    }
    var _a = analyzePoints(points), segments = _a.segments, totalLength = _a.totalLength;
    // 多个点有可能重合
    if (totalLength === 0) {
        return {
            x: points[0][0],
            y: points[0][1],
        };
    }
    // 计算比例
    var startRatio = 0;
    var point = null;
    for (var i = 0; i < segments.length; i++) {
        var seg = segments[i];
        var from = seg.from, to = seg.to;
        var currentRatio = seg.length / totalLength;
        if (t >= startRatio && t <= startRatio + currentRatio) {
            var localRatio = (t - startRatio) / currentRatio;
            point = line.pointAt(from[0], from[1], to[0], to[1], localRatio);
            break;
        }
        startRatio += currentRatio;
    }
    return point;
}
/**
 * 按照比例在数据片段中获取切线的角度
 * @param {array} points 点的集合
 * @param {number} t 百分比 0-1
 */
function angleAtSegments(points, t) {
    // 边界判断
    if (t > 1 || t < 0 || points.length < 2) {
        return 0;
    }
    var _a = analyzePoints(points), segments = _a.segments, totalLength = _a.totalLength;
    // 计算比例
    var startRatio = 0;
    var angle = 0;
    for (var i = 0; i < segments.length; i++) {
        var seg = segments[i];
        var from = seg.from, to = seg.to;
        var currentRatio = seg.length / totalLength;
        if (t >= startRatio && t <= startRatio + currentRatio) {
            angle = Math.atan2(to[1] - from[1], to[0] - from[0]);
            break;
        }
        startRatio += currentRatio;
    }
    return angle;
}
function distanceAtSegment(points, x, y) {
    var minDistance = Infinity;
    for (var i = 0; i < points.length - 1; i++) {
        var point = points[i];
        var nextPoint = points[i + 1];
        var distance_1 = line.pointDistance(point[0], point[1], nextPoint[0], nextPoint[1], x, y);
        if (distance_1 < minDistance) {
            minDistance = distance_1;
        }
    }
    return minDistance;
}
//# sourceMappingURL=segments.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/polyline.js


/* harmony default export */ var polyline = ({
    /**
     * 计算多折线的包围盒
     * @param {array} points 点的集合 [x,y] 的形式
     * @return {object} 包围盒
     */
    box: function (points) {
        var xArr = [];
        var yArr = [];
        for (var i = 0; i < points.length; i++) {
            var point = points[i];
            xArr.push(point[0]);
            yArr.push(point[1]);
        }
        return getBBoxByArray(xArr, yArr);
    },
    /**
     * 计算多折线的长度
     * @param {array} points 点的集合 [x,y] 的形式
     * @return {object} 多条边的长度
     */
    length: function (points) {
        return lengthOfSegment(points);
    },
    /**
     * 根据比例获取多折线的点
     * @param {array} points 点的集合 [x,y] 的形式
     * @param {number} t 在多折线的长度上的比例
     * @return {object} 根据比例值计算出来的点
     */
    pointAt: function (points, t) {
        return pointAtSegments(points, t);
    },
    /**
     * 指定点到多折线的距离
     * @param {array} points 点的集合 [x,y] 的形式
     * @param {number} x 指定点的 x
     * @param {number} y 指定点的 y
     * @return {number} 点到多折线的距离
     */
    pointDistance: function (points, x, y) {
        return distanceAtSegment(points, x, y);
    },
    /**
     * 根据比例获取多折线的切线角度
     * @param {array} points 点的集合 [x,y] 的形式
     * @param {number} t 在多折线的长度上的比例
     * @return {object} 根据比例值计算出来的角度
     */
    tangentAngle: function (points, t) {
        return angleAtSegments(points, t);
    },
});
//# sourceMappingURL=polyline.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/polygon.js


function getAllPoints(points) {
    var tmp = points.slice(0);
    if (points.length) {
        tmp.push(points[0]);
    }
    return tmp;
}
/* harmony default export */ var polygon = ({
    /**
     * 计算多边形的包围盒
     * @param {array} points 点的集合 [x,y] 的形式
     * @return {object} 包围盒
     */
    box: function (points) {
        return polyline.box(points);
    },
    /**
     * 计算多边形的长度
     * @param {array} points 点的集合 [x,y] 的形式
     * @return {object} 多边形边的长度
     */
    length: function (points) {
        return lengthOfSegment(getAllPoints(points));
    },
    /**
     * 根据比例获取多边形的点
     * @param {array} points 点的集合 [x,y] 的形式
     * @param {number} t 在多边形的长度上的比例
     * @return {object} 根据比例值计算出来的点
     */
    pointAt: function (points, t) {
        return pointAtSegments(getAllPoints(points), t);
    },
    /**
     * 指定点到多边形的距离
     * @param {array} points 点的集合 [x,y] 的形式
     * @param {number} x 指定点的 x
     * @param {number} y 指定点的 y
     * @return {number} 点到多边形的距离
     */
    pointDistance: function (points, x, y) {
        return distanceAtSegment(getAllPoints(points), x, y);
    },
    /**
     * 根据比例获取多边形的切线角度
     * @param {array} points 点的集合 [x,y] 的形式
     * @param {number} t 在多边形的长度上的比例
     * @return {object} 根据比例值计算出来的角度
     */
    tangentAngle: function (points, t) {
        return angleAtSegments(getAllPoints(points), t);
    },
});
//# sourceMappingURL=polygon.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/index.js








//# sourceMappingURL=index.js.map

/***/ }),

/***/ "4539":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isObject = __webpack_require__("d2cb");
var createNonEnumerableProperty = __webpack_require__("80b9");

// `InstallErrorCause` abstract operation
// https://tc39.es/proposal-error-cause/#sec-errorobjects-install-error-cause
module.exports = function (O, options) {
  if (isObject(options) && 'cause' in options) {
    createNonEnumerableProperty(O, 'cause', options.cause);
  }
};


/***/ }),

/***/ "454d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__("ded0");
var anObject = __webpack_require__("9774");
var getMethod = __webpack_require__("f1a6");

module.exports = function (iterator, kind, value) {
  var innerResult, innerError;
  anObject(iterator);
  try {
    innerResult = getMethod(iterator, 'return');
    if (!innerResult) {
      if (kind === 'throw') throw value;
      return value;
    }
    innerResult = call(innerResult, iterator);
  } catch (error) {
    innerError = true;
    innerResult = error;
  }
  if (kind === 'throw') throw value;
  if (innerError) throw innerResult;
  anObject(innerResult);
  return value;
};


/***/ }),

/***/ "456a":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return multiplyMatrix; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return multiplyVec2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return invert; });
/**
 * @fileoverview 矩阵运算，本来是要引入 gl-matrix, 但是考虑到 g-mobile 对大小有限制，同时 g-webgl 使用的 matrix 不一致
 * 所以，这里仅实现 2D 几个运算，上层自己引入 gl-matrix
 * @author dxq613@gmail.com
 */
/**
 * 3阶矩阵相乘
 * @param {number[]} a 矩阵1
 * @param {number[]} b 矩阵2
 */
function multiplyMatrix(a, b) {
    var out = [];
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a10 = a[3];
    var a11 = a[4];
    var a12 = a[5];
    var a20 = a[6];
    var a21 = a[7];
    var a22 = a[8];
    var b00 = b[0];
    var b01 = b[1];
    var b02 = b[2];
    var b10 = b[3];
    var b11 = b[4];
    var b12 = b[5];
    var b20 = b[6];
    var b21 = b[7];
    var b22 = b[8];
    out[0] = b00 * a00 + b01 * a10 + b02 * a20;
    out[1] = b00 * a01 + b01 * a11 + b02 * a21;
    out[2] = b00 * a02 + b01 * a12 + b02 * a22;
    out[3] = b10 * a00 + b11 * a10 + b12 * a20;
    out[4] = b10 * a01 + b11 * a11 + b12 * a21;
    out[5] = b10 * a02 + b11 * a12 + b12 * a22;
    out[6] = b20 * a00 + b21 * a10 + b22 * a20;
    out[7] = b20 * a01 + b21 * a11 + b22 * a21;
    out[8] = b20 * a02 + b21 * a12 + b22 * a22;
    return out;
}
/**
 * 3阶矩阵同2阶向量相乘
 * @param {number[]} m 矩阵
 * @param {number[]} v 二阶向量
 */
function multiplyVec2(m, v) {
    var out = [];
    var x = v[0];
    var y = v[1];
    out[0] = m[0] * x + m[3] * y + m[6];
    out[1] = m[1] * x + m[4] * y + m[7];
    return out;
}
/**
 * 矩阵的逆
 * @param {number[]} a 矩阵
 */
function invert(a) {
    var out = [];
    var a00 = a[0];
    var a01 = a[1];
    var a02 = a[2];
    var a10 = a[3];
    var a11 = a[4];
    var a12 = a[5];
    var a20 = a[6];
    var a21 = a[7];
    var a22 = a[8];
    var b01 = a22 * a11 - a12 * a21;
    var b11 = -a22 * a10 + a12 * a20;
    var b21 = a21 * a10 - a11 * a20;
    // Calculate the determinant
    var det = a00 * b01 + a01 * b11 + a02 * b21;
    if (!det) {
        return null;
    }
    det = 1.0 / det;
    out[0] = b01 * det;
    out[1] = (-a22 * a01 + a02 * a21) * det;
    out[2] = (a12 * a01 - a02 * a11) * det;
    out[3] = b11 * det;
    out[4] = (a22 * a00 - a02 * a20) * det;
    out[5] = (-a12 * a00 + a02 * a10) * det;
    out[6] = b21 * det;
    out[7] = (-a21 * a00 + a01 * a20) * det;
    out[8] = (a11 * a00 - a01 * a10) * det;
    return out;
}
//# sourceMappingURL=matrix.js.map

/***/ }),

/***/ "469b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// this method was added to unscopables after implementation
// in popular engines, so it's moved to a separate module
var addToUnscopables = __webpack_require__("b6ee");

// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
addToUnscopables('flat');


/***/ }),

/***/ "48d3":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");

module.exports = !fails(function () {
  // eslint-disable-next-line es/no-function-prototype-bind -- safe
  var test = (function () { /* empty */ }).bind();
  // eslint-disable-next-line no-prototype-builtins -- safe
  return typeof test != 'function' || test.hasOwnProperty('prototype');
});


/***/ }),

/***/ "48e1":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var IS_PURE = __webpack_require__("6e09");
var IS_NODE = __webpack_require__("d27e");
var globalThis = __webpack_require__("92e2");
var call = __webpack_require__("ded0");
var defineBuiltIn = __webpack_require__("f303");
var setPrototypeOf = __webpack_require__("6628");
var setToStringTag = __webpack_require__("5836");
var setSpecies = __webpack_require__("f018");
var aCallable = __webpack_require__("d0d3");
var isCallable = __webpack_require__("fe72");
var isObject = __webpack_require__("d2cb");
var anInstance = __webpack_require__("f082");
var speciesConstructor = __webpack_require__("4e7a");
var task = __webpack_require__("d152").set;
var microtask = __webpack_require__("29ba");
var hostReportErrors = __webpack_require__("d693");
var perform = __webpack_require__("9b5e");
var Queue = __webpack_require__("8d55");
var InternalStateModule = __webpack_require__("d987");
var NativePromiseConstructor = __webpack_require__("b885");
var PromiseConstructorDetection = __webpack_require__("7cb3");
var newPromiseCapabilityModule = __webpack_require__("34b0");

var PROMISE = 'Promise';
var FORCED_PROMISE_CONSTRUCTOR = PromiseConstructorDetection.CONSTRUCTOR;
var NATIVE_PROMISE_REJECTION_EVENT = PromiseConstructorDetection.REJECTION_EVENT;
var NATIVE_PROMISE_SUBCLASSING = PromiseConstructorDetection.SUBCLASSING;
var getInternalPromiseState = InternalStateModule.getterFor(PROMISE);
var setInternalState = InternalStateModule.set;
var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var PromiseConstructor = NativePromiseConstructor;
var PromisePrototype = NativePromisePrototype;
var TypeError = globalThis.TypeError;
var document = globalThis.document;
var process = globalThis.process;
var newPromiseCapability = newPromiseCapabilityModule.f;
var newGenericPromiseCapability = newPromiseCapability;

var DISPATCH_EVENT = !!(document && document.createEvent && globalThis.dispatchEvent);
var UNHANDLED_REJECTION = 'unhandledrejection';
var REJECTION_HANDLED = 'rejectionhandled';
var PENDING = 0;
var FULFILLED = 1;
var REJECTED = 2;
var HANDLED = 1;
var UNHANDLED = 2;

var Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;

// helpers
var isThenable = function (it) {
  var then;
  return isObject(it) && isCallable(then = it.then) ? then : false;
};

var callReaction = function (reaction, state) {
  var value = state.value;
  var ok = state.state === FULFILLED;
  var handler = ok ? reaction.ok : reaction.fail;
  var resolve = reaction.resolve;
  var reject = reaction.reject;
  var domain = reaction.domain;
  var result, then, exited;
  try {
    if (handler) {
      if (!ok) {
        if (state.rejection === UNHANDLED) onHandleUnhandled(state);
        state.rejection = HANDLED;
      }
      if (handler === true) result = value;
      else {
        if (domain) domain.enter();
        result = handler(value); // can throw
        if (domain) {
          domain.exit();
          exited = true;
        }
      }
      if (result === reaction.promise) {
        reject(new TypeError('Promise-chain cycle'));
      } else if (then = isThenable(result)) {
        call(then, result, resolve, reject);
      } else resolve(result);
    } else reject(value);
  } catch (error) {
    if (domain && !exited) domain.exit();
    reject(error);
  }
};

var notify = function (state, isReject) {
  if (state.notified) return;
  state.notified = true;
  microtask(function () {
    var reactions = state.reactions;
    var reaction;
    while (reaction = reactions.get()) {
      callReaction(reaction, state);
    }
    state.notified = false;
    if (isReject && !state.rejection) onUnhandled(state);
  });
};

var dispatchEvent = function (name, promise, reason) {
  var event, handler;
  if (DISPATCH_EVENT) {
    event = document.createEvent('Event');
    event.promise = promise;
    event.reason = reason;
    event.initEvent(name, false, true);
    globalThis.dispatchEvent(event);
  } else event = { promise: promise, reason: reason };
  if (!NATIVE_PROMISE_REJECTION_EVENT && (handler = globalThis['on' + name])) handler(event);
  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);
};

var onUnhandled = function (state) {
  call(task, globalThis, function () {
    var promise = state.facade;
    var value = state.value;
    var IS_UNHANDLED = isUnhandled(state);
    var result;
    if (IS_UNHANDLED) {
      result = perform(function () {
        if (IS_NODE) {
          process.emit('unhandledRejection', value, promise);
        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);
      });
      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should
      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;
      if (result.error) throw result.value;
    }
  });
};

var isUnhandled = function (state) {
  return state.rejection !== HANDLED && !state.parent;
};

var onHandleUnhandled = function (state) {
  call(task, globalThis, function () {
    var promise = state.facade;
    if (IS_NODE) {
      process.emit('rejectionHandled', promise);
    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);
  });
};

var bind = function (fn, state, unwrap) {
  return function (value) {
    fn(state, value, unwrap);
  };
};

var internalReject = function (state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;
  state.value = value;
  state.state = REJECTED;
  notify(state, true);
};

var internalResolve = function (state, value, unwrap) {
  if (state.done) return;
  state.done = true;
  if (unwrap) state = unwrap;
  try {
    if (state.facade === value) throw new TypeError("Promise can't be resolved itself");
    var then = isThenable(value);
    if (then) {
      microtask(function () {
        var wrapper = { done: false };
        try {
          call(then, value,
            bind(internalResolve, wrapper, state),
            bind(internalReject, wrapper, state)
          );
        } catch (error) {
          internalReject(wrapper, error, state);
        }
      });
    } else {
      state.value = value;
      state.state = FULFILLED;
      notify(state, false);
    }
  } catch (error) {
    internalReject({ done: false }, error, state);
  }
};

// constructor polyfill
if (FORCED_PROMISE_CONSTRUCTOR) {
  // 25.4.3.1 Promise(executor)
  PromiseConstructor = function Promise(executor) {
    anInstance(this, PromisePrototype);
    aCallable(executor);
    call(Internal, this);
    var state = getInternalPromiseState(this);
    try {
      executor(bind(internalResolve, state), bind(internalReject, state));
    } catch (error) {
      internalReject(state, error);
    }
  };

  PromisePrototype = PromiseConstructor.prototype;

  // eslint-disable-next-line no-unused-vars -- required for `.length`
  Internal = function Promise(executor) {
    setInternalState(this, {
      type: PROMISE,
      done: false,
      notified: false,
      parent: false,
      reactions: new Queue(),
      rejection: false,
      state: PENDING,
      value: undefined
    });
  };

  // `Promise.prototype.then` method
  // https://tc39.es/ecma262/#sec-promise.prototype.then
  Internal.prototype = defineBuiltIn(PromisePrototype, 'then', function then(onFulfilled, onRejected) {
    var state = getInternalPromiseState(this);
    var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));
    state.parent = true;
    reaction.ok = isCallable(onFulfilled) ? onFulfilled : true;
    reaction.fail = isCallable(onRejected) && onRejected;
    reaction.domain = IS_NODE ? process.domain : undefined;
    if (state.state === PENDING) state.reactions.add(reaction);
    else microtask(function () {
      callReaction(reaction, state);
    });
    return reaction.promise;
  });

  OwnPromiseCapability = function () {
    var promise = new Internal();
    var state = getInternalPromiseState(promise);
    this.promise = promise;
    this.resolve = bind(internalResolve, state);
    this.reject = bind(internalReject, state);
  };

  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {
    return C === PromiseConstructor || C === PromiseWrapper
      ? new OwnPromiseCapability(C)
      : newGenericPromiseCapability(C);
  };

  if (!IS_PURE && isCallable(NativePromiseConstructor) && NativePromisePrototype !== Object.prototype) {
    nativeThen = NativePromisePrototype.then;

    if (!NATIVE_PROMISE_SUBCLASSING) {
      // make `Promise#then` return a polyfilled `Promise` for native promise-based APIs
      defineBuiltIn(NativePromisePrototype, 'then', function then(onFulfilled, onRejected) {
        var that = this;
        return new PromiseConstructor(function (resolve, reject) {
          call(nativeThen, that, resolve, reject);
        }).then(onFulfilled, onRejected);
      // https://github.com/zloirock/core-js/issues/640
      }, { unsafe: true });
    }

    // make `.constructor === Promise` work for native promise-based APIs
    try {
      delete NativePromisePrototype.constructor;
    } catch (error) { /* empty */ }

    // make `instanceof Promise` work for native promise-based APIs
    if (setPrototypeOf) {
      setPrototypeOf(NativePromisePrototype, PromisePrototype);
    }
  }
}

$({ global: true, constructor: true, wrap: true, forced: FORCED_PROMISE_CONSTRUCTOR }, {
  Promise: PromiseConstructor
});

setToStringTag(PromiseConstructor, PROMISE, false, true);
setSpecies(PROMISE);


/***/ }),

/***/ "4ac6":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview 判断点是否在多边形内
 * @author dxq613@gmail.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
// 多边形的射线检测，参考：https://blog.csdn.net/WilliamSun0122/article/details/77994526
var tolerance = 1e-6;
// 三态函数，判断两个double在eps精度下的大小关系
function dcmp(x) {
    if (Math.abs(x) < tolerance) {
        return 0;
    }
    return x < 0 ? -1 : 1;
}
// 判断点Q是否在p1和p2的线段上
function onSegment(p1, p2, q) {
    if ((q[0] - p1[0]) * (p2[1] - p1[1]) === (p2[0] - p1[0]) * (q[1] - p1[1]) &&
        Math.min(p1[0], p2[0]) <= q[0] &&
        q[0] <= Math.max(p1[0], p2[0]) &&
        Math.min(p1[1], p2[1]) <= q[1] &&
        q[1] <= Math.max(p1[1], p2[1])) {
        return true;
    }
    return false;
}
// 判断点P在多边形内-射线法
function isInPolygon(points, x, y) {
    var isHit = false;
    var n = points.length;
    if (n <= 2) {
        // svg 中点小于 3 个时，不显示，也无法被拾取
        return false;
    }
    for (var i = 0; i < n; i++) {
        var p1 = points[i];
        var p2 = points[(i + 1) % n];
        if (onSegment(p1, p2, [x, y])) {
            // 点在多边形一条边上
            return true;
        }
        // 前一个判断min(p1[1],p2[1])<P.y<=max(p1[1],p2[1])
        // 后一个判断被测点 在 射线与边交点 的左边
        if (dcmp(p1[1] - y) > 0 !== dcmp(p2[1] - y) > 0 &&
            dcmp(x - ((y - p1[1]) * (p1[0] - p2[0])) / (p1[1] - p2[1]) - p1[0]) < 0) {
            isHit = !isHit;
        }
    }
    return isHit;
}
exports.default = isInPolygon;
//# sourceMappingURL=polygon.js.map

/***/ }),

/***/ "4b29":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var hasOwn = __webpack_require__("85ed");
var isCallable = __webpack_require__("fe72");
var toObject = __webpack_require__("8ec0");
var sharedKey = __webpack_require__("e152");
var CORRECT_PROTOTYPE_GETTER = __webpack_require__("9d6b");

var IE_PROTO = sharedKey('IE_PROTO');
var $Object = Object;
var ObjectPrototype = $Object.prototype;

// `Object.getPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.getprototypeof
// eslint-disable-next-line es/no-object-getprototypeof -- safe
module.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {
  var object = toObject(O);
  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];
  var constructor = object.constructor;
  if (isCallable(constructor) && object instanceof constructor) {
    return constructor.prototype;
  } return object instanceof $Object ? ObjectPrototype : null;
};


/***/ }),

/***/ "4c8a":
/***/ (function(module, exports, __webpack_require__) {

var isFunction = __webpack_require__("c26a"),
    isLength = __webpack_require__("9a38");

/**
 * Checks if `value` is array-like. A value is considered array-like if it's
 * not a function and has a `value.length` that's an integer greater than or
 * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is array-like, else `false`.
 * @example
 *
 * _.isArrayLike([1, 2, 3]);
 * // => true
 *
 * _.isArrayLike(document.body.children);
 * // => true
 *
 * _.isArrayLike('abc');
 * // => true
 *
 * _.isArrayLike(_.noop);
 * // => false
 */
function isArrayLike(value) {
  return value != null && isLength(value.length) && !isFunction(value);
}

module.exports = isArrayLike;


/***/ }),

/***/ "4c93":
/***/ (function(module, exports, __webpack_require__) {

var defineProperty = __webpack_require__("b48b");

/**
 * The base implementation of `assignValue` and `assignMergeValue` without
 * value checks.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function baseAssignValue(object, key, value) {
  if (key == '__proto__' && defineProperty) {
    defineProperty(object, key, {
      'configurable': true,
      'enumerable': true,
      'value': value,
      'writable': true
    });
  } else {
    object[key] = value;
  }
}

module.exports = baseAssignValue;


/***/ }),

/***/ "4ca9":
/***/ (function(module, exports) {

/**
 * Gets the value at `key`, unless `key` is "__proto__" or "constructor".
 *
 * @private
 * @param {Object} object The object to query.
 * @param {string} key The key of the property to get.
 * @returns {*} Returns the property value.
 */
function safeGet(object, key) {
  if (key === 'constructor' && typeof object[key] === 'function') {
    return;
  }

  if (key == '__proto__') {
    return;
  }

  return object[key];
}

module.exports = safeGet;


/***/ }),

/***/ "4d59":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var g_base_1 = __webpack_require__("ae4c");
var Shape = __webpack_require__("595a");
var draw_1 = __webpack_require__("a394");
var util_1 = __webpack_require__("6d77");
var util_2 = __webpack_require__("1e49");
var Group = /** @class */ (function (_super) {
    tslib_1.__extends(Group, _super);
    function Group() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    /**
     * 一些方法调用会引起画布变化
     * @param {ChangeType} changeType 改变的类型
     */
    Group.prototype.onCanvasChange = function (changeType) {
        draw_1.refreshElement(this, changeType);
    };
    Group.prototype.getShapeBase = function () {
        return Shape;
    };
    Group.prototype.getGroupBase = function () {
        return Group;
    };
    // 同 shape 中的方法重复了
    Group.prototype._applyClip = function (context, clip) {
        if (clip) {
            context.save();
            // 将 clip 的属性挂载到 context 上
            draw_1.applyAttrsToContext(context, clip);
            // 绘制 clip 路径
            clip.createPath(context);
            context.restore();
            // 裁剪
            context.clip();
            clip._afterDraw();
        }
    };
    // 这个方法以前直接使用的 getCanvasBBox，由于 group 上没有缓存，所以每次重新计算，导致性能开销比较大
    // 大概能够节省全局渲染 15-20% 的性能，如果不在这里加缓存优化后 10W 个节点无法达到 5-6 ms，大概能够 30-40ms
    Group.prototype.cacheCanvasBBox = function () {
        var children = this.cfg.children;
        var xArr = [];
        var yArr = [];
        util_1.each(children, function (child) {
            var bbox = child.cfg.cacheCanvasBBox;
            // isInview 的判定是一旦图形或者分组渲染就要计算是否在视图内，
            // 这个判定 10W 个图形下差不多能够节省 5-6 ms 的开销
            if (bbox && child.cfg.isInView) {
                xArr.push(bbox.minX, bbox.maxX);
                yArr.push(bbox.minY, bbox.maxY);
            }
        });
        var bbox = null;
        if (xArr.length) {
            var minX = util_1.min(xArr);
            var maxX = util_1.max(xArr);
            var minY = util_1.min(yArr);
            var maxY = util_1.max(yArr);
            bbox = {
                minX: minX,
                minY: minY,
                x: minX,
                y: minY,
                maxX: maxX,
                maxY: maxY,
                width: maxX - minX,
                height: maxY - minY,
            };
            var canvas = this.cfg.canvas;
            if (canvas) {
                var viewRange = canvas.getViewRange();
                // 如果这个地方判定 isInView == false 设置 bbox 为 false 的话，拾取的性能会更高
                // 但是目前 10W 图形的拾取在 2-5ms 内，这个优化意义不大，可以后期观察再看
                this.set('isInView', util_2.intersectRect(bbox, viewRange));
            }
        }
        else {
            this.set('isInView', false);
        }
        this.set('cacheCanvasBBox', bbox);
    };
    Group.prototype.draw = function (context, region) {
        var children = this.cfg.children;
        var allowDraw = region ? this.cfg.refresh : true; // 局部刷新需要判定
        // 这个地方需要判定，在 G6 的场景每个 group 都有 transform 的场景下性能会开销非常大
        // 通过 refresh 的判定，可以不刷新没有发生过变化的分组，不在视窗内的分组等等
        // 如果想进一步提升局部渲染性能，可以进一步优化 refresh 的判定，依然有潜力
        if (children.length && allowDraw) {
            context.save();
            // group 上的矩阵和属性也会应用到上下文上
            // 先将 attrs 应用到上下文中，再设置 clip。因为 clip 应该被当前元素的 matrix 所影响
            draw_1.applyAttrsToContext(context, this);
            this._applyClip(context, this.getClip());
            draw_1.drawChildren(context, children, region);
            context.restore();
            this.cacheCanvasBBox();
        }
        // 这里的成本比较大，如果不绘制则不再
        // this.set('cacheCanvasBBox', this.getCanvasBBox());
        this.cfg.refresh = null;
        // 绘制后，消除更新标记
        this.set('hasChanged', false);
    };
    // 绘制时被跳过，一般发生在分组隐藏时
    Group.prototype.skipDraw = function () {
        this.set('cacheCanvasBBox', null);
        this.set('hasChanged', false);
    };
    return Group;
}(g_base_1.AbstractGroup));
exports.default = Group;
//# sourceMappingURL=group.js.map

/***/ }),

/***/ "4d79":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toString = __webpack_require__("502b");

module.exports = function (argument, $default) {
  return argument === undefined ? arguments.length < 2 ? '' : $default : toString(argument);
};


/***/ }),

/***/ "4dd3":
/***/ (function(module, exports, __webpack_require__) {

var eq = __webpack_require__("4e90"),
    isArrayLike = __webpack_require__("4c8a"),
    isIndex = __webpack_require__("4de3"),
    isObject = __webpack_require__("139b");

/**
 * Checks if the given arguments are from an iteratee call.
 *
 * @private
 * @param {*} value The potential iteratee value argument.
 * @param {*} index The potential iteratee index or key argument.
 * @param {*} object The potential iteratee object argument.
 * @returns {boolean} Returns `true` if the arguments are from an iteratee call,
 *  else `false`.
 */
function isIterateeCall(value, index, object) {
  if (!isObject(object)) {
    return false;
  }
  var type = typeof index;
  if (type == 'number'
        ? (isArrayLike(object) && isIndex(index, object.length))
        : (type == 'string' && index in object)
      ) {
    return eq(object[index], value);
  }
  return false;
}

module.exports = isIterateeCall;


/***/ }),

/***/ "4de3":
/***/ (function(module, exports) {

/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER = 9007199254740991;

/** Used to detect unsigned integer values. */
var reIsUint = /^(?:0|[1-9]\d*)$/;

/**
 * Checks if `value` is a valid array-like index.
 *
 * @private
 * @param {*} value The value to check.
 * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.
 * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.
 */
function isIndex(value, length) {
  var type = typeof value;
  length = length == null ? MAX_SAFE_INTEGER : length;

  return !!length &&
    (type == 'number' ||
      (type != 'symbol' && reIsUint.test(value))) &&
        (value > -1 && value % 1 == 0 && value < length);
}

module.exports = isIndex;


/***/ }),

/***/ "4e13":
/***/ (function(module, exports, __webpack_require__) {

var baseGet = __webpack_require__("c577"),
    baseSet = __webpack_require__("7d025"),
    castPath = __webpack_require__("6a1d");

/**
 * The base implementation of  `_.pickBy` without support for iteratee shorthands.
 *
 * @private
 * @param {Object} object The source object.
 * @param {string[]} paths The property paths to pick.
 * @param {Function} predicate The function invoked per property.
 * @returns {Object} Returns the new object.
 */
function basePickBy(object, paths, predicate) {
  var index = -1,
      length = paths.length,
      result = {};

  while (++index < length) {
    var path = paths[index],
        value = baseGet(object, path);

    if (predicate(value, path)) {
      baseSet(result, castPath(path, object), value);
    }
  }
  return result;
}

module.exports = basePickBy;


/***/ }),

/***/ "4e7a":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__("9774");
var aConstructor = __webpack_require__("802c");
var isNullOrUndefined = __webpack_require__("2e64");
var wellKnownSymbol = __webpack_require__("9a0b");

var SPECIES = wellKnownSymbol('species');

// `SpeciesConstructor` abstract operation
// https://tc39.es/ecma262/#sec-speciesconstructor
module.exports = function (O, defaultConstructor) {
  var C = anObject(O).constructor;
  var S;
  return C === undefined || isNullOrUndefined(S = anObject(C)[SPECIES]) ? defaultConstructor : aConstructor(S);
};


/***/ }),

/***/ "4e90":
/***/ (function(module, exports) {

/**
 * Performs a
 * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * comparison between two values to determine if they are equivalent.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * var object = { 'a': 1 };
 * var other = { 'a': 1 };
 *
 * _.eq(object, object);
 * // => true
 *
 * _.eq(object, other);
 * // => false
 *
 * _.eq('a', 'a');
 * // => true
 *
 * _.eq('a', Object('a'));
 * // => false
 *
 * _.eq(NaN, NaN);
 * // => true
 */
function eq(value, other) {
  return value === other || (value !== value && other !== other);
}

module.exports = eq;


/***/ }),

/***/ "4f07":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subtract", function() { return subtract; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "divide", function() { return divide; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ceil", function() { return ceil; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "floor", function() { return floor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "min", function() { return min; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "max", function() { return max; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "round", function() { return round; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scaleAndAdd", function() { return scaleAndAdd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distance", function() { return distance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredDistance", function() { return squaredDistance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "length", function() { return length; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredLength", function() { return squaredLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "negate", function() { return negate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "inverse", function() { return inverse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalize", function() { return normalize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dot", function() { return dot; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cross", function() { return cross; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lerp", function() { return lerp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "random", function() { return random; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat2", function() { return transformMat2; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat2d", function() { return transformMat2d; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat3", function() { return transformMat3; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat4", function() { return transformMat4; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return rotate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "angle", function() { return angle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "zero", function() { return zero; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "len", function() { return len; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "div", function() { return div; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dist", function() { return dist; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrDist", function() { return sqrDist; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrLen", function() { return sqrLen; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "forEach", function() { return forEach; });
/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("b98d");

/**
 * 2 Dimensional Vector
 * @module vec2
 */

/**
 * Creates a new, empty vec2
 *
 * @returns {vec2} a new 2D vector
 */

function create() {
  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__[/* ARRAY_TYPE */ "a"](2);

  if (_common_js__WEBPACK_IMPORTED_MODULE_0__[/* ARRAY_TYPE */ "a"] != Float32Array) {
    out[0] = 0;
    out[1] = 0;
  }

  return out;
}
/**
 * Creates a new vec2 initialized with values from an existing vector
 *
 * @param {ReadonlyVec2} a vector to clone
 * @returns {vec2} a new 2D vector
 */

function clone(a) {
  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__[/* ARRAY_TYPE */ "a"](2);
  out[0] = a[0];
  out[1] = a[1];
  return out;
}
/**
 * Creates a new vec2 initialized with the given values
 *
 * @param {Number} x X component
 * @param {Number} y Y component
 * @returns {vec2} a new 2D vector
 */

function fromValues(x, y) {
  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__[/* ARRAY_TYPE */ "a"](2);
  out[0] = x;
  out[1] = y;
  return out;
}
/**
 * Copy the values from one vec2 to another
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the source vector
 * @returns {vec2} out
 */

function copy(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  return out;
}
/**
 * Set the components of a vec2 to the given values
 *
 * @param {vec2} out the receiving vector
 * @param {Number} x X component
 * @param {Number} y Y component
 * @returns {vec2} out
 */

function set(out, x, y) {
  out[0] = x;
  out[1] = y;
  return out;
}
/**
 * Adds two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {vec2} out
 */

function add(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  return out;
}
/**
 * Subtracts vector b from vector a
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {vec2} out
 */

function subtract(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  return out;
}
/**
 * Multiplies two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {vec2} out
 */

function multiply(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  return out;
}
/**
 * Divides two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {vec2} out
 */

function divide(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  return out;
}
/**
 * Math.ceil the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a vector to ceil
 * @returns {vec2} out
 */

function ceil(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  return out;
}
/**
 * Math.floor the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a vector to floor
 * @returns {vec2} out
 */

function floor(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  return out;
}
/**
 * Returns the minimum of two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {vec2} out
 */

function min(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  return out;
}
/**
 * Returns the maximum of two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {vec2} out
 */

function max(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  return out;
}
/**
 * Math.round the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a vector to round
 * @returns {vec2} out
 */

function round(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  return out;
}
/**
 * Scales a vec2 by a scalar number
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the vector to scale
 * @param {Number} b amount to scale the vector by
 * @returns {vec2} out
 */

function scale(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  return out;
}
/**
 * Adds two vec2's after scaling the second operand by a scalar value
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @param {Number} scale the amount to scale b by before adding
 * @returns {vec2} out
 */

function scaleAndAdd(out, a, b, scale) {
  out[0] = a[0] + b[0] * scale;
  out[1] = a[1] + b[1] * scale;
  return out;
}
/**
 * Calculates the euclidian distance between two vec2's
 *
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {Number} distance between a and b
 */

function distance(a, b) {
  var x = b[0] - a[0],
      y = b[1] - a[1];
  return Math.hypot(x, y);
}
/**
 * Calculates the squared euclidian distance between two vec2's
 *
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {Number} squared distance between a and b
 */

function squaredDistance(a, b) {
  var x = b[0] - a[0],
      y = b[1] - a[1];
  return x * x + y * y;
}
/**
 * Calculates the length of a vec2
 *
 * @param {ReadonlyVec2} a vector to calculate length of
 * @returns {Number} length of a
 */

function length(a) {
  var x = a[0],
      y = a[1];
  return Math.hypot(x, y);
}
/**
 * Calculates the squared length of a vec2
 *
 * @param {ReadonlyVec2} a vector to calculate squared length of
 * @returns {Number} squared length of a
 */

function squaredLength(a) {
  var x = a[0],
      y = a[1];
  return x * x + y * y;
}
/**
 * Negates the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a vector to negate
 * @returns {vec2} out
 */

function negate(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  return out;
}
/**
 * Returns the inverse of the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a vector to invert
 * @returns {vec2} out
 */

function inverse(out, a) {
  out[0] = 1.0 / a[0];
  out[1] = 1.0 / a[1];
  return out;
}
/**
 * Normalize a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a vector to normalize
 * @returns {vec2} out
 */

function normalize(out, a) {
  var x = a[0],
      y = a[1];
  var len = x * x + y * y;

  if (len > 0) {
    //TODO: evaluate use of glm_invsqrt here?
    len = 1 / Math.sqrt(len);
  }

  out[0] = a[0] * len;
  out[1] = a[1] * len;
  return out;
}
/**
 * Calculates the dot product of two vec2's
 *
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {Number} dot product of a and b
 */

function dot(a, b) {
  return a[0] * b[0] + a[1] * b[1];
}
/**
 * Computes the cross product of two vec2's
 * Note that the cross product must by definition produce a 3D vector
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @returns {vec3} out
 */

function cross(out, a, b) {
  var z = a[0] * b[1] - a[1] * b[0];
  out[0] = out[1] = 0;
  out[2] = z;
  return out;
}
/**
 * Performs a linear interpolation between two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the first operand
 * @param {ReadonlyVec2} b the second operand
 * @param {Number} t interpolation amount, in the range [0-1], between the two inputs
 * @returns {vec2} out
 */

function lerp(out, a, b, t) {
  var ax = a[0],
      ay = a[1];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  return out;
}
/**
 * Generates a random vector with the given scale
 *
 * @param {vec2} out the receiving vector
 * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned
 * @returns {vec2} out
 */

function random(out, scale) {
  scale = scale || 1.0;
  var r = _common_js__WEBPACK_IMPORTED_MODULE_0__[/* RANDOM */ "c"]() * 2.0 * Math.PI;
  out[0] = Math.cos(r) * scale;
  out[1] = Math.sin(r) * scale;
  return out;
}
/**
 * Transforms the vec2 with a mat2
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the vector to transform
 * @param {ReadonlyMat2} m matrix to transform with
 * @returns {vec2} out
 */

function transformMat2(out, a, m) {
  var x = a[0],
      y = a[1];
  out[0] = m[0] * x + m[2] * y;
  out[1] = m[1] * x + m[3] * y;
  return out;
}
/**
 * Transforms the vec2 with a mat2d
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the vector to transform
 * @param {ReadonlyMat2d} m matrix to transform with
 * @returns {vec2} out
 */

function transformMat2d(out, a, m) {
  var x = a[0],
      y = a[1];
  out[0] = m[0] * x + m[2] * y + m[4];
  out[1] = m[1] * x + m[3] * y + m[5];
  return out;
}
/**
 * Transforms the vec2 with a mat3
 * 3rd vector component is implicitly '1'
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the vector to transform
 * @param {ReadonlyMat3} m matrix to transform with
 * @returns {vec2} out
 */

function transformMat3(out, a, m) {
  var x = a[0],
      y = a[1];
  out[0] = m[0] * x + m[3] * y + m[6];
  out[1] = m[1] * x + m[4] * y + m[7];
  return out;
}
/**
 * Transforms the vec2 with a mat4
 * 3rd vector component is implicitly '0'
 * 4th vector component is implicitly '1'
 *
 * @param {vec2} out the receiving vector
 * @param {ReadonlyVec2} a the vector to transform
 * @param {ReadonlyMat4} m matrix to transform with
 * @returns {vec2} out
 */

function transformMat4(out, a, m) {
  var x = a[0];
  var y = a[1];
  out[0] = m[0] * x + m[4] * y + m[12];
  out[1] = m[1] * x + m[5] * y + m[13];
  return out;
}
/**
 * Rotate a 2D vector
 * @param {vec2} out The receiving vec2
 * @param {ReadonlyVec2} a The vec2 point to rotate
 * @param {ReadonlyVec2} b The origin of the rotation
 * @param {Number} rad The angle of rotation in radians
 * @returns {vec2} out
 */

function rotate(out, a, b, rad) {
  //Translate point to the origin
  var p0 = a[0] - b[0],
      p1 = a[1] - b[1],
      sinC = Math.sin(rad),
      cosC = Math.cos(rad); //perform rotation and translate to correct position

  out[0] = p0 * cosC - p1 * sinC + b[0];
  out[1] = p0 * sinC + p1 * cosC + b[1];
  return out;
}
/**
 * Get the angle between two 2D vectors
 * @param {ReadonlyVec2} a The first operand
 * @param {ReadonlyVec2} b The second operand
 * @returns {Number} The angle in radians
 */

function angle(a, b) {
  var x1 = a[0],
      y1 = a[1],
      x2 = b[0],
      y2 = b[1],
      // mag is the product of the magnitudes of a and b
  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),
      // mag &&.. short circuits if mag == 0
  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1

  return Math.acos(Math.min(Math.max(cosine, -1), 1));
}
/**
 * Set the components of a vec2 to zero
 *
 * @param {vec2} out the receiving vector
 * @returns {vec2} out
 */

function zero(out) {
  out[0] = 0.0;
  out[1] = 0.0;
  return out;
}
/**
 * Returns a string representation of a vector
 *
 * @param {ReadonlyVec2} a vector to represent as a string
 * @returns {String} string representation of the vector
 */

function str(a) {
  return "vec2(" + a[0] + ", " + a[1] + ")";
}
/**
 * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)
 *
 * @param {ReadonlyVec2} a The first vector.
 * @param {ReadonlyVec2} b The second vector.
 * @returns {Boolean} True if the vectors are equal, false otherwise.
 */

function exactEquals(a, b) {
  return a[0] === b[0] && a[1] === b[1];
}
/**
 * Returns whether or not the vectors have approximately the same elements in the same position.
 *
 * @param {ReadonlyVec2} a The first vector.
 * @param {ReadonlyVec2} b The second vector.
 * @returns {Boolean} True if the vectors are equal, false otherwise.
 */

function equals(a, b) {
  var a0 = a[0],
      a1 = a[1];
  var b0 = b[0],
      b1 = b[1];
  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__[/* EPSILON */ "b"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__[/* EPSILON */ "b"] * Math.max(1.0, Math.abs(a1), Math.abs(b1));
}
/**
 * Alias for {@link vec2.length}
 * @function
 */

var len = length;
/**
 * Alias for {@link vec2.subtract}
 * @function
 */

var sub = subtract;
/**
 * Alias for {@link vec2.multiply}
 * @function
 */

var mul = multiply;
/**
 * Alias for {@link vec2.divide}
 * @function
 */

var div = divide;
/**
 * Alias for {@link vec2.distance}
 * @function
 */

var dist = distance;
/**
 * Alias for {@link vec2.squaredDistance}
 * @function
 */

var sqrDist = squaredDistance;
/**
 * Alias for {@link vec2.squaredLength}
 * @function
 */

var sqrLen = squaredLength;
/**
 * Perform some operation over an array of vec2s.
 *
 * @param {Array} a the array of vectors to iterate over
 * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed
 * @param {Number} offset Number of elements to skip at the beginning of the array
 * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array
 * @param {Function} fn Function to call for each vector in the array
 * @param {Object} [arg] additional argument to pass to fn
 * @returns {Array} a
 * @function
 */

var forEach = function () {
  var vec = create();
  return function (a, stride, offset, count, fn, arg) {
    var i, l;

    if (!stride) {
      stride = 2;
    }

    if (!offset) {
      offset = 0;
    }

    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }

    for (i = offset; i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
    }

    return a;
  };
}();

/***/ }),

/***/ "4fed":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var isCallable = __webpack_require__("fe72");

var aFunction = function (argument) {
  return isCallable(argument) ? argument : undefined;
};

module.exports = function (namespace, method) {
  return arguments.length < 2 ? aFunction(globalThis[namespace]) : globalThis[namespace] && globalThis[namespace][method];
};


/***/ }),

/***/ "502b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var classof = __webpack_require__("e013");

var $String = String;

module.exports = function (argument) {
  if (classof(argument) === 'Symbol') throw new TypeError('Cannot convert a Symbol value to a string');
  return $String(argument);
};


/***/ }),

/***/ "50c7":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IS_PURE = __webpack_require__("6e09");
var globalThis = __webpack_require__("92e2");
var defineGlobalProperty = __webpack_require__("c1b9");

var SHARED = '__core-js_shared__';
var store = module.exports = globalThis[SHARED] || defineGlobalProperty(SHARED, {});

(store.versions || (store.versions = [])).push({
  version: '3.38.0',
  mode: IS_PURE ? 'pure' : 'global',
  copyright: '© 2014-2024 Denis Pushkarev (zloirock.ru)',
  license: 'https://github.com/zloirock/core-js/blob/v3.38.0/LICENSE',
  source: 'https://github.com/zloirock/core-js'
});


/***/ }),

/***/ "5155":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var fails = __webpack_require__("e835");
var classof = __webpack_require__("51d7");

var $Object = Object;
var split = uncurryThis(''.split);

// fallback for non-array-like ES3 and non-enumerable old V8 strings
module.exports = fails(function () {
  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346
  // eslint-disable-next-line no-prototype-builtins -- safe
  return !$Object('z').propertyIsEnumerable(0);
}) ? function (it) {
  return classof(it) === 'String' ? split(it, '') : $Object(it);
} : $Object;


/***/ }),

/***/ "5193":
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf = __webpack_require__("1a8d");

/**
 * Gets the list cache value for `key`.
 *
 * @private
 * @name get
 * @memberOf ListCache
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function listCacheGet(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  return index < 0 ? undefined : data[index][1];
}

module.exports = listCacheGet;


/***/ }),

/***/ "51cb":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var wellKnownSymbol = __webpack_require__("9a0b");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var test = {};

test[TO_STRING_TAG] = 'z';

module.exports = String(test) === '[object z]';


/***/ }),

/***/ "51d7":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");

var toString = uncurryThis({}.toString);
var stringSlice = uncurryThis(''.slice);

module.exports = function (it) {
  return stringSlice(toString(it), 8, -1);
};


/***/ }),

/***/ "54bf":
/***/ (function(module, exports, __webpack_require__) {

var baseIsArguments = __webpack_require__("b0cb"),
    isObjectLike = __webpack_require__("d92c");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Built-in value references. */
var propertyIsEnumerable = objectProto.propertyIsEnumerable;

/**
 * Checks if `value` is likely an `arguments` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 *  else `false`.
 * @example
 *
 * _.isArguments(function() { return arguments; }());
 * // => true
 *
 * _.isArguments([1, 2, 3]);
 * // => false
 */
var isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {
  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&
    !propertyIsEnumerable.call(value, 'callee');
};

module.exports = isArguments;


/***/ }),

/***/ "559c":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
/**
 * @fileoverview line
 * @author dengfuping_develop@163.com
 */
var g_math_1 = __webpack_require__("4502");
var util_1 = __webpack_require__("6d77");
var constant_1 = __webpack_require__("7a93");
var base_1 = __webpack_require__("6cb2");
var Line = /** @class */ (function (_super) {
    tslib_1.__extends(Line, _super);
    function Line() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'line';
        _this.canFill = false;
        _this.canStroke = true;
        return _this;
    }
    Line.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x1: 0, y1: 0, x2: 0, y2: 0, startArrow: false, endArrow: false });
    };
    Line.prototype.createPath = function (context, targetAttrs) {
        var attrs = this.attr();
        var el = this.get('el');
        util_1.each(targetAttrs || attrs, function (value, attr) {
            if (attr === 'startArrow' || attr === 'endArrow') {
                if (value) {
                    var id = util_1.isObject(value)
                        ? context.addArrow(attrs, constant_1.SVG_ATTR_MAP[attr])
                        : context.getDefaultArrow(attrs, constant_1.SVG_ATTR_MAP[attr]);
                    el.setAttribute(constant_1.SVG_ATTR_MAP[attr], "url(#" + id + ")");
                }
                else {
                    el.removeAttribute(constant_1.SVG_ATTR_MAP[attr]);
                }
            }
            else if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
    };
    /**
     * Use math calculation to get length of line
     * @return {number} length
     */
    Line.prototype.getTotalLength = function () {
        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;
        return g_math_1.Line.length(x1, y1, x2, y2);
    };
    /**
     * Use math calculation to get point according to ratio as same sa Canvas version
     * @param {number} ratio
     * @return {Point} point
     */
    Line.prototype.getPoint = function (ratio) {
        var _a = this.attr(), x1 = _a.x1, y1 = _a.y1, x2 = _a.x2, y2 = _a.y2;
        return g_math_1.Line.pointAt(x1, y1, x2, y2, ratio);
    };
    return Line;
}(base_1.default));
exports.default = Line;
//# sourceMappingURL=line.js.map

/***/ }),

/***/ "5607":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var call = __webpack_require__("ded0");
var aCallable = __webpack_require__("d0d3");
var newPromiseCapabilityModule = __webpack_require__("34b0");
var perform = __webpack_require__("9b5e");
var iterate = __webpack_require__("6e62");
var PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__("4276");

// `Promise.all` method
// https://tc39.es/ecma262/#sec-promise.all
$({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {
  all: function all(iterable) {
    var C = this;
    var capability = newPromiseCapabilityModule.f(C);
    var resolve = capability.resolve;
    var reject = capability.reject;
    var result = perform(function () {
      var $promiseResolve = aCallable(C.resolve);
      var values = [];
      var counter = 0;
      var remaining = 1;
      iterate(iterable, function (promise) {
        var index = counter++;
        var alreadyCalled = false;
        remaining++;
        call($promiseResolve, C, promise).then(function (value) {
          if (alreadyCalled) return;
          alreadyCalled = true;
          values[index] = value;
          --remaining || resolve(values);
        }, reject);
      });
      --remaining || resolve(values);
    });
    if (result.error) reject(result.value);
    return capability.promise;
  }
});


/***/ }),

/***/ "5695":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, "mat3", function() { return /* reexport */ esm_mat3; });
__webpack_require__.d(__webpack_exports__, "vec2", function() { return /* reexport */ esm_vec2; });
__webpack_require__.d(__webpack_exports__, "vec3", function() { return /* reexport */ esm_vec3; });
__webpack_require__.d(__webpack_exports__, "transform", function() { return /* reexport */ transform; });

// EXTERNAL MODULE: ./node_modules/_@antv_gl-matrix@2.7.1@@antv/gl-matrix/lib/gl-matrix/mat3.js
var mat3 = __webpack_require__("20d3");

// CONCATENATED MODULE: ./node_modules/_@antv_matrix-util@2.0.7@@antv/matrix-util/esm/mat3.js

mat3["translate"] = function (out, a, v) {
    var transMat = new Array(9);
    mat3["fromTranslation"](transMat, v);
    return mat3["multiply"](out, transMat, a);
};
mat3["rotate"] = function (out, a, rad) {
    var rotateMat = new Array(9);
    mat3["fromRotation"](rotateMat, rad);
    return mat3["multiply"](out, rotateMat, a);
};
mat3["scale"] = function (out, a, v) {
    var scaleMat = new Array(9);
    mat3["fromScaling"](scaleMat, v);
    return mat3["multiply"](out, scaleMat, a);
};
mat3["transform"] = function (m, actions) {
    var out = [].concat(m);
    for (var i = 0, len = actions.length; i < len; i++) {
        var action = actions[i];
        switch (action[0]) {
            case 't':
                mat3["translate"](out, out, [action[1], action[2]]);
                break;
            case 's':
                mat3["scale"](out, out, [action[1], action[2]]);
                break;
            case 'r':
                mat3["rotate"](out, out, action[1]);
                break;
            default:
                break;
        }
    }
    return out;
};
/* harmony default export */ var esm_mat3 = (mat3);
//# sourceMappingURL=mat3.js.map
// EXTERNAL MODULE: ./node_modules/_@antv_gl-matrix@2.7.1@@antv/gl-matrix/lib/gl-matrix/vec2.js
var vec2 = __webpack_require__("fea3");

// EXTERNAL MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/index.js + 110 modules
var esm = __webpack_require__("6d77");

// CONCATENATED MODULE: ./node_modules/_@antv_matrix-util@2.0.7@@antv/matrix-util/esm/vec2.js


vec2["angle"] = function (v1, v2) {
    var theta = vec2["dot"](v1, v2) / (vec2["length"](v1) * vec2["length"](v2));
    return Math.acos(Object(esm["clamp"])(theta, -1, 1));
};
/**
 * 向量 v1 到 向量 v2 夹角的方向
 * @param  {Array} v1 向量
 * @param  {Array} v2 向量
 * @return {Boolean} >= 0 顺时针 < 0 逆时针
 */
vec2["direction"] = function (v1, v2) {
    return v1[0] * v2[1] - v2[0] * v1[1];
};
vec2["angleTo"] = function (v1, v2, direct) {
    var angle = vec2["angle"](v1, v2);
    var angleLargeThanPI = vec2["direction"](v1, v2) >= 0;
    if (direct) {
        if (angleLargeThanPI) {
            return Math.PI * 2 - angle;
        }
        return angle;
    }
    if (angleLargeThanPI) {
        return angle;
    }
    return Math.PI * 2 - angle;
};
vec2["vertical"] = function (out, v, flag) {
    if (flag) {
        out[0] = v[1];
        out[1] = -1 * v[0];
    }
    else {
        out[0] = -1 * v[1];
        out[1] = v[0];
    }
    return out;
};
/* harmony default export */ var esm_vec2 = (vec2);
//# sourceMappingURL=vec2.js.map
// EXTERNAL MODULE: ./node_modules/_@antv_gl-matrix@2.7.1@@antv/gl-matrix/lib/gl-matrix/vec3.js
var vec3 = __webpack_require__("e5cc");

// CONCATENATED MODULE: ./node_modules/_@antv_matrix-util@2.0.7@@antv/matrix-util/esm/vec3.js

/* harmony default export */ var esm_vec3 = (vec3);
//# sourceMappingURL=vec3.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_matrix-util@2.0.7@@antv/matrix-util/esm/transform.js


/* harmony default export */ var transform = (function (m, ts) {
    // 上层使用时会传入为 null 的 matrix，此时按照单位矩阵处理
    var matrix = m ? Object(esm["clone"])(m) : [1, 0, 0, 0, 1, 0, 0, 0, 1];
    Object(esm["each"])(ts, function (t) {
        switch (t[0]) {
            case 't':
                esm_mat3.translate(matrix, matrix, [t[1], t[2]]);
                break;
            case 's':
                esm_mat3.scale(matrix, matrix, [t[1], t[2]]);
                break;
            case 'r':
                esm_mat3.rotate(matrix, matrix, t[1]);
                break;
            case 'm':
                esm_mat3.multiply(matrix, matrix, t[1]);
                break;
            default:
                return false;
        }
    });
    return matrix;
});
//# sourceMappingURL=transform.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_matrix-util@2.0.7@@antv/matrix-util/esm/index.js
// matrix




//# sourceMappingURL=index.js.map

/***/ }),

/***/ "5836":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var defineProperty = __webpack_require__("80ea").f;
var hasOwn = __webpack_require__("85ed");
var wellKnownSymbol = __webpack_require__("9a0b");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');

module.exports = function (target, TAG, STATIC) {
  if (target && !STATIC) target = target.prototype;
  if (target && !hasOwn(target, TO_STRING_TAG)) {
    defineProperty(target, TO_STRING_TAG, { configurable: true, value: TAG });
  }
};


/***/ }),

/***/ "5849":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview circle
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var util_1 = __webpack_require__("6d77");
var constant_1 = __webpack_require__("7a93");
var base_1 = __webpack_require__("6cb2");
var Circle = /** @class */ (function (_super) {
    tslib_1.__extends(Circle, _super);
    function Circle() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'circle';
        _this.canFill = true;
        _this.canStroke = true;
        return _this;
    }
    Circle.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, r: 0 });
    };
    Circle.prototype.createPath = function (context, targetAttrs) {
        var attrs = this.attr();
        var el = this.get('el');
        util_1.each(targetAttrs || attrs, function (value, attr) {
            // 圆和椭圆的点坐标属性不是 x, y，而是 cx, cy
            if (attr === 'x' || attr === 'y') {
                el.setAttribute("c" + attr, value);
            }
            else if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
    };
    return Circle;
}(base_1.default));
exports.default = Circle;
//# sourceMappingURL=circle.js.map

/***/ }),

/***/ "595a":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var base_1 = __webpack_require__("98ae");
Object.defineProperty(exports, "Base", { enumerable: true, get: function () { return base_1.default; } });
var circle_1 = __webpack_require__("c2ab");
Object.defineProperty(exports, "Circle", { enumerable: true, get: function () { return circle_1.default; } });
var ellipse_1 = __webpack_require__("cd73");
Object.defineProperty(exports, "Ellipse", { enumerable: true, get: function () { return ellipse_1.default; } });
var image_1 = __webpack_require__("fcce");
Object.defineProperty(exports, "Image", { enumerable: true, get: function () { return image_1.default; } });
var line_1 = __webpack_require__("02a9");
Object.defineProperty(exports, "Line", { enumerable: true, get: function () { return line_1.default; } });
var marker_1 = __webpack_require__("1bde");
Object.defineProperty(exports, "Marker", { enumerable: true, get: function () { return marker_1.default; } });
var path_1 = __webpack_require__("c17e");
Object.defineProperty(exports, "Path", { enumerable: true, get: function () { return path_1.default; } });
var polygon_1 = __webpack_require__("c875");
Object.defineProperty(exports, "Polygon", { enumerable: true, get: function () { return polygon_1.default; } });
var polyline_1 = __webpack_require__("8bf9");
Object.defineProperty(exports, "Polyline", { enumerable: true, get: function () { return polyline_1.default; } });
var rect_1 = __webpack_require__("4035");
Object.defineProperty(exports, "Rect", { enumerable: true, get: function () { return rect_1.default; } });
var text_1 = __webpack_require__("f951");
Object.defineProperty(exports, "Text", { enumerable: true, get: function () { return text_1.default; } });
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "59a3":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("2c5a");
var aCallable = __webpack_require__("d0d3");
var NATIVE_BIND = __webpack_require__("48d3");

var bind = uncurryThis(uncurryThis.bind);

// optional / simple context binding
module.exports = function (fn, that) {
  aCallable(fn);
  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {
    return fn.apply(that, arguments);
  };
};


/***/ }),

/***/ "59e3":
/***/ (function(module, exports) {

/**
 * This method returns the first argument it receives.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Util
 * @param {*} value Any value.
 * @returns {*} Returns `value`.
 * @example
 *
 * var object = { 'a': 1 };
 *
 * console.log(_.identity(object) === object);
 * // => true
 */
function identity(value) {
  return value;
}

module.exports = identity;


/***/ }),

/***/ "5aa5":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var hasOwn = __webpack_require__("85ed");
var ownKeys = __webpack_require__("fc6f");
var getOwnPropertyDescriptorModule = __webpack_require__("1c2b");
var definePropertyModule = __webpack_require__("80ea");

module.exports = function (target, source, exceptions) {
  var keys = ownKeys(source);
  var defineProperty = definePropertyModule.f;
  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
  for (var i = 0; i < keys.length; i++) {
    var key = keys[i];
    if (!hasOwn(target, key) && !(exceptions && hasOwn(exceptions, key))) {
      defineProperty(target, key, getOwnPropertyDescriptor(source, key));
    }
  }
};


/***/ }),

/***/ "5ad5":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var g_math_1 = __webpack_require__("4502");
function inLine(x1, y1, x2, y2, lineWidth, x, y) {
    var minX = Math.min(x1, x2);
    var maxX = Math.max(x1, x2);
    var minY = Math.min(y1, y2);
    var maxY = Math.max(y1, y2);
    var halfWidth = lineWidth / 2;
    // 因为目前的方案是计算点到直线的距离，而有可能会在延长线上，所以要先判断是否在包围盒内
    // 这种方案会在水平或者竖直的情况下载线的延长线上有半 lineWidth 的误差
    if (!(x >= minX - halfWidth && x <= maxX + halfWidth && y >= minY - halfWidth && y <= maxY + halfWidth)) {
        return false;
    }
    // 因为已经计算了包围盒，所以仅需要计算到直线的距离即可，可以显著提升性能
    return g_math_1.Line.pointToLine(x1, y1, x2, y2, x, y) <= lineWidth / 2;
}
exports.default = inLine;
//# sourceMappingURL=line.js.map

/***/ }),

/***/ "5c8f":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__("1e49");
function arc(cx, cy, r, startAngle, endAngle, lineWidth, x, y) {
    var angle = (Math.atan2(y - cy, x - cx) + Math.PI * 2) % (Math.PI * 2); // 转换到 0 - 2 * Math.PI 之间
    if (angle < startAngle || angle > endAngle) {
        return false;
    }
    var point = {
        x: cx + r * Math.cos(angle),
        y: cy + r * Math.sin(angle),
    };
    return util_1.distance(point.x, point.y, x, y) <= lineWidth / 2;
}
exports.default = arc;
//# sourceMappingURL=arc.js.map

/***/ }),

/***/ "5cd5":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIndexedObject = __webpack_require__("a330");
var toAbsoluteIndex = __webpack_require__("79f3");
var lengthOfArrayLike = __webpack_require__("8269");

// `Array.prototype.{ indexOf, includes }` methods implementation
var createMethod = function (IS_INCLUDES) {
  return function ($this, el, fromIndex) {
    var O = toIndexedObject($this);
    var length = lengthOfArrayLike(O);
    if (length === 0) return !IS_INCLUDES && -1;
    var index = toAbsoluteIndex(fromIndex, length);
    var value;
    // Array#includes uses SameValueZero equality algorithm
    // eslint-disable-next-line no-self-compare -- NaN check
    if (IS_INCLUDES && el !== el) while (length > index) {
      value = O[index++];
      // eslint-disable-next-line no-self-compare -- NaN check
      if (value !== value) return true;
    // Array#indexOf ignores holes, Array#includes - not
    } else for (;length > index; index++) {
      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;
    } return !IS_INCLUDES && -1;
  };
};

module.exports = {
  // `Array.prototype.includes` method
  // https://tc39.es/ecma262/#sec-array.prototype.includes
  includes: createMethod(true),
  // `Array.prototype.indexOf` method
  // https://tc39.es/ecma262/#sec-array.prototype.indexof
  indexOf: createMethod(false)
};


/***/ }),

/***/ "5e8a":
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__("dc9b"),
    isLength = __webpack_require__("9a38"),
    isObjectLike = __webpack_require__("d92c");

/** `Object#toString` result references. */
var argsTag = '[object Arguments]',
    arrayTag = '[object Array]',
    boolTag = '[object Boolean]',
    dateTag = '[object Date]',
    errorTag = '[object Error]',
    funcTag = '[object Function]',
    mapTag = '[object Map]',
    numberTag = '[object Number]',
    objectTag = '[object Object]',
    regexpTag = '[object RegExp]',
    setTag = '[object Set]',
    stringTag = '[object String]',
    weakMapTag = '[object WeakMap]';

var arrayBufferTag = '[object ArrayBuffer]',
    dataViewTag = '[object DataView]',
    float32Tag = '[object Float32Array]',
    float64Tag = '[object Float64Array]',
    int8Tag = '[object Int8Array]',
    int16Tag = '[object Int16Array]',
    int32Tag = '[object Int32Array]',
    uint8Tag = '[object Uint8Array]',
    uint8ClampedTag = '[object Uint8ClampedArray]',
    uint16Tag = '[object Uint16Array]',
    uint32Tag = '[object Uint32Array]';

/** Used to identify `toStringTag` values of typed arrays. */
var typedArrayTags = {};
typedArrayTags[float32Tag] = typedArrayTags[float64Tag] =
typedArrayTags[int8Tag] = typedArrayTags[int16Tag] =
typedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =
typedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =
typedArrayTags[uint32Tag] = true;
typedArrayTags[argsTag] = typedArrayTags[arrayTag] =
typedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =
typedArrayTags[dataViewTag] = typedArrayTags[dateTag] =
typedArrayTags[errorTag] = typedArrayTags[funcTag] =
typedArrayTags[mapTag] = typedArrayTags[numberTag] =
typedArrayTags[objectTag] = typedArrayTags[regexpTag] =
typedArrayTags[setTag] = typedArrayTags[stringTag] =
typedArrayTags[weakMapTag] = false;

/**
 * The base implementation of `_.isTypedArray` without Node.js optimizations.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 */
function baseIsTypedArray(value) {
  return isObjectLike(value) &&
    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];
}

module.exports = baseIsTypedArray;


/***/ }),

/***/ "5efb":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var hasOwn = __webpack_require__("85ed");

var FunctionPrototype = Function.prototype;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getDescriptor = DESCRIPTORS && Object.getOwnPropertyDescriptor;

var EXISTS = hasOwn(FunctionPrototype, 'name');
// additional protection from minified / mangled / dropped function names
var PROPER = EXISTS && (function something() { /* empty */ }).name === 'something';
var CONFIGURABLE = EXISTS && (!DESCRIPTORS || (DESCRIPTORS && getDescriptor(FunctionPrototype, 'name').configurable));

module.exports = {
  EXISTS: EXISTS,
  PROPER: PROPER,
  CONFIGURABLE: CONFIGURABLE
};


/***/ }),

/***/ "5eff":
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__("b155"),
    arrayMap = __webpack_require__("c62f"),
    isArray = __webpack_require__("f868"),
    isSymbol = __webpack_require__("d19b");

/** Used as references for various `Number` constants. */
var INFINITY = 1 / 0;

/** Used to convert symbols to primitives and strings. */
var symbolProto = Symbol ? Symbol.prototype : undefined,
    symbolToString = symbolProto ? symbolProto.toString : undefined;

/**
 * The base implementation of `_.toString` which doesn't convert nullish
 * values to empty strings.
 *
 * @private
 * @param {*} value The value to process.
 * @returns {string} Returns the string.
 */
function baseToString(value) {
  // Exit early for strings to avoid a performance hit in some environments.
  if (typeof value == 'string') {
    return value;
  }
  if (isArray(value)) {
    // Recursively convert values (susceptible to call stack limits).
    return arrayMap(value, baseToString) + '';
  }
  if (isSymbol(value)) {
    return symbolToString ? symbolToString.call(value) : '';
  }
  var result = (value + '');
  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
}

module.exports = baseToString;


/***/ }),

/***/ "5f1c":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIntegerOrInfinity = __webpack_require__("1fba");

var min = Math.min;

// `ToLength` abstract operation
// https://tc39.es/ecma262/#sec-tolength
module.exports = function (argument) {
  var len = toIntegerOrInfinity(argument);
  return len > 0 ? min(len, 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991
};


/***/ }),

/***/ "6041":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * 创建DOM 节点
 * @param  {String} str Dom 字符串
 * @return {HTMLElement}  DOM 节点
 */
Object.defineProperty(exports, "__esModule", { value: true });
var TABLE;
var TABLE_TR;
var FRAGMENT_REG;
var CONTAINERS;
function initConstants() {
    TABLE = document.createElement('table');
    TABLE_TR = document.createElement('tr');
    FRAGMENT_REG = /^\s*<(\w+|!)[^>]*>/;
    CONTAINERS = {
        tr: document.createElement('tbody'),
        tbody: TABLE,
        thead: TABLE,
        tfoot: TABLE,
        td: TABLE_TR,
        th: TABLE_TR,
        '*': document.createElement('div'),
    };
}
function createDom(str) {
    if (!TABLE) {
        initConstants();
    }
    var name = FRAGMENT_REG.test(str) && RegExp.$1;
    if (!name || !(name in CONTAINERS)) {
        name = '*';
    }
    var container = CONTAINERS[name];
    str = typeof str === 'string' ? str.replace(/(^\s*)|(\s*$)/g, '') : str;
    container.innerHTML = '' + str;
    var dom = container.childNodes[0];
    if (dom && container.contains(dom)) {
        container.removeChild(dom);
    }
    return dom;
}
exports.default = createDom;
//# sourceMappingURL=create-dom.js.map

/***/ }),

/***/ "60c0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__("ded0");
var hasOwn = __webpack_require__("85ed");
var isPrototypeOf = __webpack_require__("d519");
var regExpFlags = __webpack_require__("2bc1");

var RegExpPrototype = RegExp.prototype;

module.exports = function (R) {
  var flags = R.flags;
  return flags === undefined && !('flags' in RegExpPrototype) && !hasOwn(R, 'flags') && isPrototypeOf(RegExpPrototype, R)
    ? call(regExpFlags, R) : flags;
};


/***/ }),

/***/ "6136":
/***/ (function(module, exports, __webpack_require__) {

var isFunction = __webpack_require__("c26a"),
    isMasked = __webpack_require__("aae6"),
    isObject = __webpack_require__("139b"),
    toSource = __webpack_require__("071d");

/**
 * Used to match `RegExp`
 * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).
 */
var reRegExpChar = /[\\^$.*+?()[\]{}|]/g;

/** Used to detect host constructors (Safari). */
var reIsHostCtor = /^\[object .+?Constructor\]$/;

/** Used for built-in method references. */
var funcProto = Function.prototype,
    objectProto = Object.prototype;

/** Used to resolve the decompiled source of functions. */
var funcToString = funcProto.toString;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/** Used to detect if a method is native. */
var reIsNative = RegExp('^' +
  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\$&')
  .replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g, '$1.*?') + '$'
);

/**
 * The base implementation of `_.isNative` without bad shim checks.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a native function,
 *  else `false`.
 */
function baseIsNative(value) {
  if (!isObject(value) || isMasked(value)) {
    return false;
  }
  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;
  return pattern.test(toSource(value));
}

module.exports = baseIsNative;


/***/ }),

/***/ "622b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var IteratorPrototype = __webpack_require__("82b1").IteratorPrototype;
var create = __webpack_require__("6943");
var createPropertyDescriptor = __webpack_require__("6638");
var setToStringTag = __webpack_require__("5836");
var Iterators = __webpack_require__("b462");

var returnThis = function () { return this; };

module.exports = function (IteratorConstructor, NAME, next, ENUMERABLE_NEXT) {
  var TO_STRING_TAG = NAME + ' Iterator';
  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(+!ENUMERABLE_NEXT, next) });
  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);
  Iterators[TO_STRING_TAG] = returnThis;
  return IteratorConstructor;
};


/***/ }),

/***/ "6248":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var g_base_1 = __webpack_require__("ae4c");
function isPointInPath(shape, x, y) {
    var ctx = g_base_1.getOffScreenContext();
    shape.createPath(ctx);
    return ctx.isPointInPath(x, y);
}
exports.default = isPointInPath;
//# sourceMappingURL=point-in-path.js.map

/***/ }),

/***/ "6266":
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(process) {// .dirname, .basename, and .extname methods are extracted from Node.js v8.11.1,
// backported and transplited with Babel, with backwards-compat fixes

// Copyright Joyent, Inc. and other Node contributors.
//
// Permission is hereby granted, free of charge, to any person obtaining a
// copy of this software and associated documentation files (the
// "Software"), to deal in the Software without restriction, including
// without limitation the rights to use, copy, modify, merge, publish,
// distribute, sublicense, and/or sell copies of the Software, and to permit
// persons to whom the Software is furnished to do so, subject to the
// following conditions:
//
// The above copyright notice and this permission notice shall be included
// in all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN
// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE
// USE OR OTHER DEALINGS IN THE SOFTWARE.

// resolves . and .. elements in a path array with directory names there
// must be no slashes, empty elements, or device names (c:\) in the array
// (so also no leading and trailing slashes - it does not distinguish
// relative and absolute paths)
function normalizeArray(parts, allowAboveRoot) {
  // if the path tries to go above the root, `up` ends up > 0
  var up = 0;
  for (var i = parts.length - 1; i >= 0; i--) {
    var last = parts[i];
    if (last === '.') {
      parts.splice(i, 1);
    } else if (last === '..') {
      parts.splice(i, 1);
      up++;
    } else if (up) {
      parts.splice(i, 1);
      up--;
    }
  }

  // if the path is allowed to go above the root, restore leading ..s
  if (allowAboveRoot) {
    for (; up--; up) {
      parts.unshift('..');
    }
  }

  return parts;
}

// path.resolve([from ...], to)
// posix version
exports.resolve = function() {
  var resolvedPath = '',
      resolvedAbsolute = false;

  for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {
    var path = (i >= 0) ? arguments[i] : process.cwd();

    // Skip empty and invalid entries
    if (typeof path !== 'string') {
      throw new TypeError('Arguments to path.resolve must be strings');
    } else if (!path) {
      continue;
    }

    resolvedPath = path + '/' + resolvedPath;
    resolvedAbsolute = path.charAt(0) === '/';
  }

  // At this point the path should be resolved to a full absolute path, but
  // handle relative paths to be safe (might happen when process.cwd() fails)

  // Normalize the path
  resolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {
    return !!p;
  }), !resolvedAbsolute).join('/');

  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';
};

// path.normalize(path)
// posix version
exports.normalize = function(path) {
  var isAbsolute = exports.isAbsolute(path),
      trailingSlash = substr(path, -1) === '/';

  // Normalize the path
  path = normalizeArray(filter(path.split('/'), function(p) {
    return !!p;
  }), !isAbsolute).join('/');

  if (!path && !isAbsolute) {
    path = '.';
  }
  if (path && trailingSlash) {
    path += '/';
  }

  return (isAbsolute ? '/' : '') + path;
};

// posix version
exports.isAbsolute = function(path) {
  return path.charAt(0) === '/';
};

// posix version
exports.join = function() {
  var paths = Array.prototype.slice.call(arguments, 0);
  return exports.normalize(filter(paths, function(p, index) {
    if (typeof p !== 'string') {
      throw new TypeError('Arguments to path.join must be strings');
    }
    return p;
  }).join('/'));
};


// path.relative(from, to)
// posix version
exports.relative = function(from, to) {
  from = exports.resolve(from).substr(1);
  to = exports.resolve(to).substr(1);

  function trim(arr) {
    var start = 0;
    for (; start < arr.length; start++) {
      if (arr[start] !== '') break;
    }

    var end = arr.length - 1;
    for (; end >= 0; end--) {
      if (arr[end] !== '') break;
    }

    if (start > end) return [];
    return arr.slice(start, end - start + 1);
  }

  var fromParts = trim(from.split('/'));
  var toParts = trim(to.split('/'));

  var length = Math.min(fromParts.length, toParts.length);
  var samePartsLength = length;
  for (var i = 0; i < length; i++) {
    if (fromParts[i] !== toParts[i]) {
      samePartsLength = i;
      break;
    }
  }

  var outputParts = [];
  for (var i = samePartsLength; i < fromParts.length; i++) {
    outputParts.push('..');
  }

  outputParts = outputParts.concat(toParts.slice(samePartsLength));

  return outputParts.join('/');
};

exports.sep = '/';
exports.delimiter = ':';

exports.dirname = function (path) {
  if (typeof path !== 'string') path = path + '';
  if (path.length === 0) return '.';
  var code = path.charCodeAt(0);
  var hasRoot = code === 47 /*/*/;
  var end = -1;
  var matchedSlash = true;
  for (var i = path.length - 1; i >= 1; --i) {
    code = path.charCodeAt(i);
    if (code === 47 /*/*/) {
        if (!matchedSlash) {
          end = i;
          break;
        }
      } else {
      // We saw the first non-path separator
      matchedSlash = false;
    }
  }

  if (end === -1) return hasRoot ? '/' : '.';
  if (hasRoot && end === 1) {
    // return '//';
    // Backwards-compat fix:
    return '/';
  }
  return path.slice(0, end);
};

function basename(path) {
  if (typeof path !== 'string') path = path + '';

  var start = 0;
  var end = -1;
  var matchedSlash = true;
  var i;

  for (i = path.length - 1; i >= 0; --i) {
    if (path.charCodeAt(i) === 47 /*/*/) {
        // If we reached a path separator that was not part of a set of path
        // separators at the end of the string, stop now
        if (!matchedSlash) {
          start = i + 1;
          break;
        }
      } else if (end === -1) {
      // We saw the first non-path separator, mark this as the end of our
      // path component
      matchedSlash = false;
      end = i + 1;
    }
  }

  if (end === -1) return '';
  return path.slice(start, end);
}

// Uses a mixed approach for backwards-compatibility, as ext behavior changed
// in new Node.js versions, so only basename() above is backported here
exports.basename = function (path, ext) {
  var f = basename(path);
  if (ext && f.substr(-1 * ext.length) === ext) {
    f = f.substr(0, f.length - ext.length);
  }
  return f;
};

exports.extname = function (path) {
  if (typeof path !== 'string') path = path + '';
  var startDot = -1;
  var startPart = 0;
  var end = -1;
  var matchedSlash = true;
  // Track the state of characters (if any) we see before our first dot and
  // after any path separator we find
  var preDotState = 0;
  for (var i = path.length - 1; i >= 0; --i) {
    var code = path.charCodeAt(i);
    if (code === 47 /*/*/) {
        // If we reached a path separator that was not part of a set of path
        // separators at the end of the string, stop now
        if (!matchedSlash) {
          startPart = i + 1;
          break;
        }
        continue;
      }
    if (end === -1) {
      // We saw the first non-path separator, mark this as the end of our
      // extension
      matchedSlash = false;
      end = i + 1;
    }
    if (code === 46 /*.*/) {
        // If this is our first dot, mark it as the start of our extension
        if (startDot === -1)
          startDot = i;
        else if (preDotState !== 1)
          preDotState = 1;
    } else if (startDot !== -1) {
      // We saw a non-dot and non-path separator before our dot, so we should
      // have a good chance at having a non-empty extension
      preDotState = -1;
    }
  }

  if (startDot === -1 || end === -1 ||
      // We saw a non-dot character immediately before the dot
      preDotState === 0 ||
      // The (right-most) trimmed path component is exactly '..'
      preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {
    return '';
  }
  return path.slice(startDot, end);
};

function filter (xs, f) {
    if (xs.filter) return xs.filter(f);
    var res = [];
    for (var i = 0; i < xs.length; i++) {
        if (f(xs[i], i, xs)) res.push(xs[i]);
    }
    return res;
}

// String.prototype.substr - negative index don't work in IE8
var substr = 'ab'.substr(-1) === 'b'
    ? function (str, start, len) { return str.substr(start, len) }
    : function (str, start, len) {
        if (start < 0) start = str.length + start;
        return str.substr(start, len);
    }
;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("eef6")))

/***/ }),

/***/ "62a0":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("9a80");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("7a2d");
/* harmony import */ var _util_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("7533");



var SHAPE_MAP = {};
var INDEX = '_INDEX';
/**
 * 设置 canvas
 * @param {IElement} element 元素
 * @param {ICanvas}  canvas  画布
 */
function setCanvas(element, canvas) {
    element.set('canvas', canvas);
    if (element.isGroup()) {
        var children = element.get('children');
        if (children.length) {
            children.forEach(function (child) {
                setCanvas(child, canvas);
            });
        }
    }
}
/**
 * 设置 timeline
 * @param {IElement} element  元素
 * @param {Timeline} timeline 时间轴
 */
function setTimeline(element, timeline) {
    element.set('timeline', timeline);
    if (element.isGroup()) {
        var children = element.get('children');
        if (children.length) {
            children.forEach(function (child) {
                setTimeline(child, timeline);
            });
        }
    }
}
function contains(container, element) {
    var children = container.getChildren();
    return children.indexOf(element) >= 0;
}
function removeChild(container, element, destroy) {
    if (destroy === void 0) { destroy = true; }
    // 不再调用 element.remove() 方法，会出现循环调用
    if (destroy) {
        element.destroy();
    }
    else {
        element.set('parent', null);
        element.set('canvas', null);
    }
    Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* removeFromArray */ "j"])(container.getChildren(), element);
}
function getComparer(compare) {
    return function (left, right) {
        var result = compare(left, right);
        return result === 0 ? left[INDEX] - right[INDEX] : result;
    };
}
var Container = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Container, _super);
    function Container() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Container.prototype.isCanvas = function () {
        return false;
    };
    // 根据子节点确定 BBox
    Container.prototype.getBBox = function () {
        // 所有的值可能在画布的可视区外
        var minX = Infinity;
        var maxX = -Infinity;
        var minY = Infinity;
        var maxY = -Infinity;
        // 将可见元素、图形以及不为空的图形分组筛选出来，用于包围盒合并
        var children = this.getChildren().filter(function (child) {
            return child.get('visible') && (!child.isGroup() || (child.isGroup() && child.getChildren().length > 0));
        });
        if (children.length > 0) {
            Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* each */ "a"])(children, function (child) {
                var _a = child.getBBox(), childMinX = _a.minX, childMaxX = _a.maxX, childMinY = _a.minY, childMaxY = _a.maxY;
                if (childMinX < minX) {
                    minX = childMinX;
                }
                if (childMaxX > maxX) {
                    maxX = childMaxX;
                }
                if (childMinY < minY) {
                    minY = childMinY;
                }
                if (childMaxY > maxY) {
                    maxY = childMaxY;
                }
            });
        }
        else {
            minX = 0;
            maxX = 0;
            minY = 0;
            maxY = 0;
        }
        var box = {
            x: minX,
            y: minY,
            minX: minX,
            minY: minY,
            maxX: maxX,
            maxY: maxY,
            width: maxX - minX,
            height: maxY - minY,
        };
        return box;
    };
    // 获取画布的包围盒
    Container.prototype.getCanvasBBox = function () {
        var minX = Infinity;
        var maxX = -Infinity;
        var minY = Infinity;
        var maxY = -Infinity;
        // 将可见元素、图形以及不为空的图形分组筛选出来，用于包围盒合并
        var children = this.getChildren().filter(function (child) {
            return child.get('visible') && (!child.isGroup() || (child.isGroup() && child.getChildren().length > 0));
        });
        if (children.length > 0) {
            Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* each */ "a"])(children, function (child) {
                var _a = child.getCanvasBBox(), childMinX = _a.minX, childMaxX = _a.maxX, childMinY = _a.minY, childMaxY = _a.maxY;
                if (childMinX < minX) {
                    minX = childMinX;
                }
                if (childMaxX > maxX) {
                    maxX = childMaxX;
                }
                if (childMinY < minY) {
                    minY = childMinY;
                }
                if (childMaxY > maxY) {
                    maxY = childMaxY;
                }
            });
        }
        else {
            minX = 0;
            maxX = 0;
            minY = 0;
            maxY = 0;
        }
        var box = {
            x: minX,
            y: minY,
            minX: minX,
            minY: minY,
            maxX: maxX,
            maxY: maxY,
            width: maxX - minX,
            height: maxY - minY,
        };
        return box;
    };
    Container.prototype.getDefaultCfg = function () {
        var cfg = _super.prototype.getDefaultCfg.call(this);
        cfg['children'] = [];
        return cfg;
    };
    Container.prototype.onAttrChange = function (name, value, originValue) {
        _super.prototype.onAttrChange.call(this, name, value, originValue);
        if (name === 'matrix') {
            var totalMatrix = this.getTotalMatrix();
            this._applyChildrenMarix(totalMatrix);
        }
    };
    // 不但应用到自己身上还要应用于子元素
    Container.prototype.applyMatrix = function (matrix) {
        var preTotalMatrix = this.getTotalMatrix();
        _super.prototype.applyMatrix.call(this, matrix);
        var totalMatrix = this.getTotalMatrix();
        // totalMatrix 没有发生变化时，这里仅考虑两者都为 null 时
        // 不继续向下传递矩阵
        if (totalMatrix === preTotalMatrix) {
            return;
        }
        this._applyChildrenMarix(totalMatrix);
    };
    // 在子元素上设置矩阵
    Container.prototype._applyChildrenMarix = function (totalMatrix) {
        var children = this.getChildren();
        Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* each */ "a"])(children, function (child) {
            child.applyMatrix(totalMatrix);
        });
    };
    // 兼容老版本的接口
    Container.prototype.addShape = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var type = args[0];
        var cfg = args[1];
        if (Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* isObject */ "f"])(type)) {
            cfg = type;
        }
        else {
            cfg['type'] = type;
        }
        var shapeType = SHAPE_MAP[cfg.type];
        if (!shapeType) {
            shapeType = Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* upperFirst */ "k"])(cfg.type);
            SHAPE_MAP[cfg.type] = shapeType;
        }
        var ShapeBase = this.getShapeBase();
        var shape = new ShapeBase[shapeType](cfg);
        this.add(shape);
        return shape;
    };
    Container.prototype.addGroup = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var groupClass = args[0], cfg = args[1];
        var group;
        if (Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* isFunction */ "d"])(groupClass)) {
            if (cfg) {
                group = new groupClass(cfg);
            }
            else {
                group = new groupClass({
                    // canvas,
                    parent: this,
                });
            }
        }
        else {
            var tmpCfg = groupClass || {};
            var TmpGroupClass = this.getGroupBase();
            group = new TmpGroupClass(tmpCfg);
        }
        this.add(group);
        return group;
    };
    Container.prototype.getCanvas = function () {
        var canvas;
        if (this.isCanvas()) {
            canvas = this;
        }
        else {
            canvas = this.get('canvas');
        }
        return canvas;
    };
    Container.prototype.getShape = function (x, y, ev) {
        // 如果不支持拾取，则直接返回
        if (!Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* isAllowCapture */ "b"])(this)) {
            return null;
        }
        var children = this.getChildren();
        var shape;
        // 如果容器是 group
        if (!this.isCanvas()) {
            var v = [x, y, 1];
            // 将 x, y 转换成对应于 group 的局部坐标
            v = this.invertFromMatrix(v);
            if (!this.isClipped(v[0], v[1])) {
                shape = this._findShape(children, v[0], v[1], ev);
            }
        }
        else {
            shape = this._findShape(children, x, y, ev);
        }
        return shape;
    };
    Container.prototype._findShape = function (children, x, y, ev) {
        var shape = null;
        for (var i = children.length - 1; i >= 0; i--) {
            var child = children[i];
            if (Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* isAllowCapture */ "b"])(child)) {
                if (child.isGroup()) {
                    shape = child.getShape(x, y, ev);
                }
                else if (child.isHit(x, y)) {
                    shape = child;
                }
            }
            if (shape) {
                break;
            }
        }
        return shape;
    };
    Container.prototype.add = function (element) {
        var canvas = this.getCanvas();
        var children = this.getChildren();
        var timeline = this.get('timeline');
        var preParent = element.getParent();
        if (preParent) {
            removeChild(preParent, element, false);
        }
        element.set('parent', this);
        if (canvas) {
            setCanvas(element, canvas);
        }
        if (timeline) {
            setTimeline(element, timeline);
        }
        children.push(element);
        element.onCanvasChange('add');
        this._applyElementMatrix(element);
    };
    // 将当前容器的矩阵应用到子元素
    Container.prototype._applyElementMatrix = function (element) {
        var totalMatrix = this.getTotalMatrix();
        // 添加图形或者分组时，需要把当前图元的矩阵设置进去
        if (totalMatrix) {
            element.applyMatrix(totalMatrix);
        }
    };
    Container.prototype.getChildren = function () {
        return (this.get('children') || []);
    };
    Container.prototype.sort = function () {
        var children = this.getChildren();
        // 稳定排序
        Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* each */ "a"])(children, function (child, index) {
            child[INDEX] = index;
            return child;
        });
        children.sort(getComparer(function (obj1, obj2) {
            return obj1.get('zIndex') - obj2.get('zIndex');
        }));
        this.onCanvasChange('sort');
    };
    Container.prototype.clear = function () {
        this.set('clearing', true);
        if (this.destroyed) {
            return;
        }
        var children = this.getChildren();
        for (var i = children.length - 1; i >= 0; i--) {
            children[i].destroy(); // 销毁子元素
        }
        this.set('children', []);
        this.onCanvasChange('clear');
        this.set('clearing', false);
    };
    Container.prototype.destroy = function () {
        if (this.get('destroyed')) {
            return;
        }
        this.clear();
        _super.prototype.destroy.call(this);
    };
    /**
     * 获取第一个子元素
     * @return {IElement} 第一个元素
     */
    Container.prototype.getFirst = function () {
        return this.getChildByIndex(0);
    };
    /**
     * 获取最后一个子元素
     * @return {IElement} 元素
     */
    Container.prototype.getLast = function () {
        var children = this.getChildren();
        return this.getChildByIndex(children.length - 1);
    };
    /**
     * 根据索引获取子元素
     * @return {IElement} 第一个元素
     */
    Container.prototype.getChildByIndex = function (index) {
        var children = this.getChildren();
        return children[index];
    };
    /**
     * 子元素的数量
     * @return {number} 子元素数量
     */
    Container.prototype.getCount = function () {
        var children = this.getChildren();
        return children.length;
    };
    /**
     * 是否包含对应元素
     * @param {IElement} element 元素
     * @return {boolean}
     */
    Container.prototype.contain = function (element) {
        var children = this.getChildren();
        return children.indexOf(element) > -1;
    };
    /**
     * 移除对应子元素
     * @param {IElement} element 子元素
     * @param {boolean} destroy 是否销毁子元素，默认为 true
     */
    Container.prototype.removeChild = function (element, destroy) {
        if (destroy === void 0) { destroy = true; }
        if (this.contain(element)) {
            element.remove(destroy);
        }
    };
    /**
     * 查找所有匹配的元素
     * @param  {ElementFilterFn}   fn  匹配函数
     * @return {IElement[]} 元素数组
     */
    Container.prototype.findAll = function (fn) {
        var rst = [];
        var children = this.getChildren();
        Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* each */ "a"])(children, function (element) {
            if (fn(element)) {
                rst.push(element);
            }
            if (element.isGroup()) {
                rst = rst.concat(element.findAll(fn));
            }
        });
        return rst;
    };
    /**
     * 查找元素，找到第一个返回
     * @param  {ElementFilterFn} fn    匹配函数
     * @return {IElement|null} 元素，可以为空
     */
    Container.prototype.find = function (fn) {
        var rst = null;
        var children = this.getChildren();
        Object(_util_util__WEBPACK_IMPORTED_MODULE_2__[/* each */ "a"])(children, function (element) {
            if (fn(element)) {
                rst = element;
            }
            else if (element.isGroup()) {
                rst = element.find(fn);
            }
            if (rst) {
                return false;
            }
        });
        return rst;
    };
    /**
     * 根据 ID 查找元素
     * @param {string} id 元素 id
     * @return {IElement|null} 元素
     */
    Container.prototype.findById = function (id) {
        return this.find(function (element) {
            return element.get('id') === id;
        });
    };
    /**
     * 该方法即将废弃，不建议使用
     * 根据 className 查找元素
     * TODO: 该方式定义暂时只给 G6 3.3 以后的版本使用，待 G6 中的 findByClassName 方法移除后，G 也需要同步移除
     * @param {string} className 元素 className
     * @return {IElement | null} 元素
     */
    Container.prototype.findByClassName = function (className) {
        return this.find(function (element) {
            return element.get('className') === className;
        });
    };
    /**
     * 根据 name 查找元素列表
     * @param {string}      name 元素名称
     * @return {IElement[]} 元素
     */
    Container.prototype.findAllByName = function (name) {
        return this.findAll(function (element) {
            return element.get('name') === name;
        });
    };
    return Container;
}(_element__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"]));
/* harmony default export */ __webpack_exports__["a"] = (Container);
//# sourceMappingURL=container.js.map

/***/ }),

/***/ "630e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var isArray = __webpack_require__("c806");
var isConstructor = __webpack_require__("c185");
var isObject = __webpack_require__("d2cb");
var toAbsoluteIndex = __webpack_require__("79f3");
var lengthOfArrayLike = __webpack_require__("8269");
var toIndexedObject = __webpack_require__("a330");
var createProperty = __webpack_require__("99e5");
var wellKnownSymbol = __webpack_require__("9a0b");
var arrayMethodHasSpeciesSupport = __webpack_require__("4086");
var nativeSlice = __webpack_require__("f600");

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');

var SPECIES = wellKnownSymbol('species');
var $Array = Array;
var max = Math.max;

// `Array.prototype.slice` method
// https://tc39.es/ecma262/#sec-array.prototype.slice
// fallback for not array-like ES3 strings and DOM objects
$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {
  slice: function slice(start, end) {
    var O = toIndexedObject(this);
    var length = lengthOfArrayLike(O);
    var k = toAbsoluteIndex(start, length);
    var fin = toAbsoluteIndex(end === undefined ? length : end, length);
    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible
    var Constructor, result, n;
    if (isArray(O)) {
      Constructor = O.constructor;
      // cross-realm fallback
      if (isConstructor(Constructor) && (Constructor === $Array || isArray(Constructor.prototype))) {
        Constructor = undefined;
      } else if (isObject(Constructor)) {
        Constructor = Constructor[SPECIES];
        if (Constructor === null) Constructor = undefined;
      }
      if (Constructor === $Array || Constructor === undefined) {
        return nativeSlice(O, k, fin);
      }
    }
    result = new (Constructor === undefined ? $Array : Constructor)(max(fin - k, 0));
    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);
    result.length = n;
    return result;
  }
});


/***/ }),

/***/ "6393":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__("ded0");
var isObject = __webpack_require__("d2cb");
var isSymbol = __webpack_require__("ef41");
var getMethod = __webpack_require__("f1a6");
var ordinaryToPrimitive = __webpack_require__("d95c");
var wellKnownSymbol = __webpack_require__("9a0b");

var $TypeError = TypeError;
var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');

// `ToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-toprimitive
module.exports = function (input, pref) {
  if (!isObject(input) || isSymbol(input)) return input;
  var exoticToPrim = getMethod(input, TO_PRIMITIVE);
  var result;
  if (exoticToPrim) {
    if (pref === undefined) pref = 'default';
    result = call(exoticToPrim, input, pref);
    if (!isObject(result) || isSymbol(result)) return result;
    throw new $TypeError("Can't convert object to primitive value");
  }
  if (pref === undefined) pref = 'number';
  return ordinaryToPrimitive(input, pref);
};


/***/ }),

/***/ "654d":
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var root = __webpack_require__("82c6");

/** Detect free variable `exports`. */
var freeExports =  true && exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Built-in value references. */
var Buffer = moduleExports ? root.Buffer : undefined,
    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;

/**
 * Creates a clone of  `buffer`.
 *
 * @private
 * @param {Buffer} buffer The buffer to clone.
 * @param {boolean} [isDeep] Specify a deep clone.
 * @returns {Buffer} Returns the cloned buffer.
 */
function cloneBuffer(buffer, isDeep) {
  if (isDeep) {
    return buffer.slice();
  }
  var length = buffer.length,
      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);

  buffer.copy(result);
  return result;
}

module.exports = cloneBuffer;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("6765")(module)))

/***/ }),

/***/ "65a5":
/***/ (function(module, exports) {

//# sourceMappingURL=interfaces.js.map

/***/ }),

/***/ "65a57":
/***/ (function(module, exports, __webpack_require__) {

var MapCache = __webpack_require__("f6cb");

/** Error message constants. */
var FUNC_ERROR_TEXT = 'Expected a function';

/**
 * Creates a function that memoizes the result of `func`. If `resolver` is
 * provided, it determines the cache key for storing the result based on the
 * arguments provided to the memoized function. By default, the first argument
 * provided to the memoized function is used as the map cache key. The `func`
 * is invoked with the `this` binding of the memoized function.
 *
 * **Note:** The cache is exposed as the `cache` property on the memoized
 * function. Its creation may be customized by replacing the `_.memoize.Cache`
 * constructor with one whose instances implement the
 * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)
 * method interface of `clear`, `delete`, `get`, `has`, and `set`.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Function
 * @param {Function} func The function to have its output memoized.
 * @param {Function} [resolver] The function to resolve the cache key.
 * @returns {Function} Returns the new memoized function.
 * @example
 *
 * var object = { 'a': 1, 'b': 2 };
 * var other = { 'c': 3, 'd': 4 };
 *
 * var values = _.memoize(_.values);
 * values(object);
 * // => [1, 2]
 *
 * values(other);
 * // => [3, 4]
 *
 * object.a = 2;
 * values(object);
 * // => [1, 2]
 *
 * // Modify the result cache.
 * values.cache.set(object, ['a', 'b']);
 * values(object);
 * // => ['a', 'b']
 *
 * // Replace `_.memoize.Cache`.
 * _.memoize.Cache = WeakMap;
 */
function memoize(func, resolver) {
  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {
    throw new TypeError(FUNC_ERROR_TEXT);
  }
  var memoized = function() {
    var args = arguments,
        key = resolver ? resolver.apply(this, args) : args[0],
        cache = memoized.cache;

    if (cache.has(key)) {
      return cache.get(key);
    }
    var result = func.apply(this, args);
    memoized.cache = cache.set(key, result) || cache;
    return result;
  };
  memoized.cache = new (memoize.Cache || MapCache);
  return memoized;
}

// Expose `MapCache`.
memoize.Cache = MapCache;

module.exports = memoize;


/***/ }),

/***/ "6621":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var fails = __webpack_require__("e835");
var createElement = __webpack_require__("6c25");

// Thanks to IE8 for its funny defineProperty
module.exports = !DESCRIPTORS && !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty(createElement('div'), 'a', {
    get: function () { return 7; }
  }).a !== 7;
});


/***/ }),

/***/ "6627":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var toString = {}.toString;
var isType = function (value, type) { return toString.call(value) === '[object ' + type + ']'; };
exports.default = isType;
//# sourceMappingURL=is-type.js.map

/***/ }),

/***/ "6628":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable no-proto -- safe */
var uncurryThisAccessor = __webpack_require__("10d0");
var isObject = __webpack_require__("d2cb");
var requireObjectCoercible = __webpack_require__("deed");
var aPossiblePrototype = __webpack_require__("983e");

// `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
// Works with __proto__ only. Old v8 can't work with null proto objects.
// eslint-disable-next-line es/no-object-setprototypeof -- safe
module.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {
  var CORRECT_SETTER = false;
  var test = {};
  var setter;
  try {
    setter = uncurryThisAccessor(Object.prototype, '__proto__', 'set');
    setter(test, []);
    CORRECT_SETTER = test instanceof Array;
  } catch (error) { /* empty */ }
  return function setPrototypeOf(O, proto) {
    requireObjectCoercible(O);
    aPossiblePrototype(proto);
    if (!isObject(O)) return O;
    if (CORRECT_SETTER) setter(O, proto);
    else O.__proto__ = proto;
    return O;
  };
}() : undefined);


/***/ }),

/***/ "6638":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function (bitmap, value) {
  return {
    enumerable: !(bitmap & 1),
    configurable: !(bitmap & 2),
    writable: !(bitmap & 4),
    value: value
  };
};


/***/ }),

/***/ "6765":
/***/ (function(module, exports) {

module.exports = function(module) {
	if (!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if (!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),

/***/ "6865":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.setClip = exports.setTransform = exports.setShadow = void 0;
var dom_1 = __webpack_require__("7431");
function setShadow(model, context) {
    var el = model.cfg.el;
    var attrs = model.attr();
    var cfg = {
        dx: attrs.shadowOffsetX,
        dy: attrs.shadowOffsetY,
        blur: attrs.shadowBlur,
        color: attrs.shadowColor,
    };
    if (!cfg.dx && !cfg.dy && !cfg.blur && !cfg.color) {
        el.removeAttribute('filter');
    }
    else {
        var id = context.find('filter', cfg);
        if (!id) {
            id = context.addShadow(cfg);
        }
        el.setAttribute('filter', "url(#" + id + ")");
    }
}
exports.setShadow = setShadow;
function setTransform(model) {
    var matrix = model.attr().matrix;
    if (matrix) {
        var el = model.cfg.el;
        var transform = [];
        for (var i = 0; i < 9; i += 3) {
            transform.push(matrix[i] + "," + matrix[i + 1]);
        }
        transform = transform.join(',');
        if (transform.indexOf('NaN') === -1) {
            el.setAttribute('transform', "matrix(" + transform + ")");
        }
        else {
            console.warn('invalid matrix:', matrix);
        }
    }
}
exports.setTransform = setTransform;
function setClip(model, context) {
    var clip = model.getClip();
    var el = model.get('el');
    if (!clip) {
        el.removeAttribute('clip-path');
    }
    else if (clip && !el.hasAttribute('clip-path')) {
        dom_1.createDom(clip);
        clip.createPath(context);
        var id = context.addClip(clip);
        el.setAttribute('clip-path', "url(#" + id + ")");
    }
}
exports.setClip = setClip;
//# sourceMappingURL=svg.js.map

/***/ }),

/***/ "6943":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global ActiveXObject -- old IE, WSH */
var anObject = __webpack_require__("9774");
var definePropertiesModule = __webpack_require__("c56d");
var enumBugKeys = __webpack_require__("7c1c");
var hiddenKeys = __webpack_require__("b920");
var html = __webpack_require__("b825");
var documentCreateElement = __webpack_require__("6c25");
var sharedKey = __webpack_require__("e152");

var GT = '>';
var LT = '<';
var PROTOTYPE = 'prototype';
var SCRIPT = 'script';
var IE_PROTO = sharedKey('IE_PROTO');

var EmptyConstructor = function () { /* empty */ };

var scriptTag = function (content) {
  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;
};

// Create object with fake `null` prototype: use ActiveX Object with cleared prototype
var NullProtoObjectViaActiveX = function (activeXDocument) {
  activeXDocument.write(scriptTag(''));
  activeXDocument.close();
  var temp = activeXDocument.parentWindow.Object;
  // eslint-disable-next-line no-useless-assignment -- avoid memory leak
  activeXDocument = null;
  return temp;
};

// Create object with fake `null` prototype: use iframe Object with cleared prototype
var NullProtoObjectViaIFrame = function () {
  // Thrash, waste and sodomy: IE GC bug
  var iframe = documentCreateElement('iframe');
  var JS = 'java' + SCRIPT + ':';
  var iframeDocument;
  iframe.style.display = 'none';
  html.appendChild(iframe);
  // https://github.com/zloirock/core-js/issues/475
  iframe.src = String(JS);
  iframeDocument = iframe.contentWindow.document;
  iframeDocument.open();
  iframeDocument.write(scriptTag('document.F=Object'));
  iframeDocument.close();
  return iframeDocument.F;
};

// Check for document.domain and active x support
// No need to use active x approach when document.domain is not set
// see https://github.com/es-shims/es5-shim/issues/150
// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346
// avoid IE GC bug
var activeXDocument;
var NullProtoObject = function () {
  try {
    activeXDocument = new ActiveXObject('htmlfile');
  } catch (error) { /* ignore */ }
  NullProtoObject = typeof document != 'undefined'
    ? document.domain && activeXDocument
      ? NullProtoObjectViaActiveX(activeXDocument) // old IE
      : NullProtoObjectViaIFrame()
    : NullProtoObjectViaActiveX(activeXDocument); // WSH
  var length = enumBugKeys.length;
  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];
  return NullProtoObject();
};

hiddenKeys[IE_PROTO] = true;

// `Object.create` method
// https://tc39.es/ecma262/#sec-object.create
// eslint-disable-next-line es/no-object-create -- safe
module.exports = Object.create || function create(O, Properties) {
  var result;
  if (O !== null) {
    EmptyConstructor[PROTOTYPE] = anObject(O);
    result = new EmptyConstructor();
    EmptyConstructor[PROTOTYPE] = null;
    // add "__proto__" for Object.getPrototypeOf polyfill
    result[IE_PROTO] = O;
  } else result = NullProtoObject();
  return Properties === undefined ? result : definePropertiesModule.f(result, Properties);
};


/***/ }),

/***/ "69e6":
/***/ (function(module, exports, __webpack_require__) {

!function(e,t){ true?module.exports=t(__webpack_require__("eb48")):undefined}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=25)}([function(e,t,n){"use strict";function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t,n){return e.addShape("path",{attrs:r({},n,{path:t})})}function a(e){return[{x:e.centerX,y:e.minY},{x:e.maxX,y:e.centerY},{x:e.centerX,y:e.maxY},{x:e.minX,y:e.centerY}]}function c(e,t){var n,r,o=a(t),i=1/0;return o.forEach(function(t,o){var a,c,u=(a=e,c=t,Math.sqrt(Math.pow(a.x-c.x,2)+Math.pow(a.y-c.y,2)));u<i&&(n=t,i=u,r=o)}),{point:n,index:r}}function u(e,t){return{x:(e[t].x+e[t+1].x)/2,y:(e[t].y+e[t+1].y)/2}}function s(e,t){var n=e.point,r=e.index,o=t.point,i=t.index;return n.x===o.x||n.y===o.y?[n,o]:2===r&&0===i||0===r&&2===i?[n,{x:n.x,y:(n.y+o.y)/2},{x:o.x,y:(n.y+o.y)/2},o]:2!==r&&0!==r||3!==i&&1!==i?1!==r&&3!==r||2!==i&&0!==i?[n,{x:(n.x+o.x)/2,y:n.y},{x:(n.x+o.x)/2,y:o.y},o]:[n,{x:o.x,y:n.y},o]:[n,{x:n.x,y:o.y},o]}function l(e,t){return e[t].x===e[t+1].x}function d(e,t,n){return l(t,n)?e.x===t[n].x&&(e.y-t[n].y)*(e.y-t[n+1].y)<=0:e.y===t[n].y&&(e.x-t[n].x)*(e.x-t[n+1].x)<=0}function f(e,t){for(var n,r,o,i,a,c=1/0,u=0;u<t.length-1;u++){var s=l(t,u),f=void 0;if(d(f=s?{x:t[u].x,y:e.y}:{x:e.x,y:t[u].y},t,u)){var h=(i=e,a=f,Math.pow(i.x-a.x,2)+Math.pow(i.y-a.y,2));c>h&&(c=h,n=u,r=f,o=s)}}return{verticalPoint:r,index:n,vertical:o}}function h(e,t,n){var r,o,i,u=function(e){if(!e)return{x:void 0,y:void 0};var t=e.getBBox();return{x:t.centerX,y:t.centerY}}(t),s=e.getLinkPoints(u)[0];if(n){var l=a(e.getBBox())[n];r=e.getBBox(),o=l,i={x:t.getBBox().centerX,y:t.getBBox().centerY},((r.centerX-o.x)*(r.centerX-i.x)>0||(r.centerY-o.y)*(r.centerY-i.y)>0)&&(s=l)}s=c(s,e.getBBox());var d=t.getLinkPoints(s.point)[0];return{sourcePoint:s,targetPoint:d=c(d,t.getBBox())}}function g(e,t,n){return l(t,n)?e.minX>t[n].x?1:e.maxX<t[n].x?-1:0:e.minY>t[n].y?1:e.maxY<t.y?-1:0}function p(e,t,n){return l(t,n)?{x:t[n].x,y:e.y}:{x:e.x,y:t[n].y}}function m(e){var t;switch(e){case 0:t=2;break;case 1:t=3;break;case 3:t=1;break;default:t=0}return t}n.d(t,"b",function(){return i}),n.d(t,"c",function(){return a}),n.d(t,"f",function(){return c}),n.d(t,"j",function(){return u}),n.d(t,"h",function(){return s}),n.d(t,"i",function(){return l}),n.d(t,"l",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"d",function(){return h}),n.d(t,"a",function(){return g}),n.d(t,"g",function(){return p}),n.d(t,"k",function(){return m})},function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(7),a=n(3),c=n(4),u={getActivedStyle:function(){},getSelectedStyle:function(){},getStyle:function(){},getPath:function(){}};function s(e,t,n){var r=[];return c.isString(e)?r=[t,e]:c.isArray(e)?(e.unshift(t),r=e):r=[t],n&&r.unshift(n+"-base"),r}i.registerNode("page-base",r({},u)),i.registerEdge("page-base",r({},u)),i.registerGroup("page-base",r({},u)),i.registerGuide("page-base",r({},u)),a.setRegister=function(e,t,n){e.registerNode=function(e,r,o){i.registerNode(e,r,s(o,t+"-base",n))},e.registerEdge=function(e,r,o){i.registerEdge(e,r,s(o,t+"-base",n))},e.registerGroup=function(e,r,o){i.registerGroup(e,r,s(o,t+"-base",n))},e.registerGuide=function(e,r,o){i.registerGuide(e,r,s(o,t+"-base",n))},e.registerBehaviour=function(e,t,n){i.registerBehaviour(e,function(e){var n=e.get("page");n.set("_graph",e),t(n)},n)}},a.setRegister(a,"page"),n(44),e.exports=a},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(7),i=n(22),a=n(63),c=n(64),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},o.Util,i,a,c);e.exports=u},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=n(21),d=n(4),f=n(14),h=n(34),g=n(35),p=n(37),m=[h,n(38),n(39),g,p,n(40),n(42),n(43)],y=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r={defaultData:null,shortcut:{redo:!0,undo:!0,delete:!0,resetZoom:!0,autoZoom:!0,zoomIn:!0,zoomOut:!0},_controllers:{},_signals:{}};return d.each(m,function(e){d.mix(r,e.CFG)}),d.mix(!0,r,e),(n=c(this,u(t).call(this,r))).isPage=!0,n.type="page",n._init(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l),n=t,(r=[{key:"getDelegation",value:function(e,t){var n;t||(t=this.getGraph().getRootGroup());if(1!==e.length||e[0].isNode||e[0].isGroup){var r=d.getTotalBBox(e.map(function(e){return e.getBBox()}));(n=d.getRectByBox(r,t,f.nodeDelegationStyle)).set("capture",!1)}else e[0].isEdge?n=t.addShape("path",{attrs:o({path:"M0 0L 1 1"},f.edgeDelegationStyle),capture:!1}):(n=d.getRectByBox(e[0],t,f.nodeDelegationStyle)).set("capture",!1);return n}},{key:"focusGraphWrapper",value:function(){this.getGraph().getKeyboardEventWrapper().focus()}},{key:"saveImage",value:function(e){var t,n,r=this,i=this.getGraph(),a=i.getBBox(),c=i.getFitViewPadding();return i.saveImage(o({width:a.width+c[1]+c[3],height:a.height+c[0]+c[2],beforeTransform:function(){t=r.getSelected().map(function(e){return e.id}),n=r.getSelected().map(function(e){return e.id}),r.clearSelected(),r.clearActived()},afterTransform:function(){r.setSelected(t,!0),r.setActived(n,!0)}},e))}},{key:"_init",value:function(){var e=this;d.each(m,function(t){t.INIT&&e[t.INIT]()}),this.bindEvent(),this._cacheBBox()}},{key:"executeCommand",value:function(e,t){var n=this.editor;n?n.executeCommand(e,t):e()}},{key:"_cacheBBox",value:function(){var e=this.getGraph();this.set("bboxCache",e.getBBox())}},{key:"bindEvent",value:function(){var e=this;this.getGraph().on("afterchange",function(){e._cacheBBox()})}},{key:"translateLimt",value:function(e){var t=this.getGraph(),n=this.get("bboxCache"),r=t.getWidth(),o=t.getHeight(),i=[n.minX,n.minY,1],a=[n.maxX,n.maxY,1];return d.vec3.transformMat3(i,i,e),d.vec3.transformMat3(a,a,e),a[0]<100&&d.mat3.translate(e,e,[100-a[0],0]),a[1]<100&&d.mat3.translate(e,e,[0,100-a[1]]),i[1]>o-100&&d.mat3.translate(e,e,[0,o-100-i[1]]),i[0]>r-100&&d.mat3.translate(e,e,[r-100-i[0],0]),!0}},{key:"setSignal",value:function(e,t){this.get("_signals")[e]=t}},{key:"getSignal",value:function(e){return this.get("_signals")[e]}},{key:"setController",value:function(e,t){this.get("_controllers")[e]=t}},{key:"getController",value:function(e){return this.get("_controllers")[e]}},{key:"destroy",value:function(){var e=this.get("_graph"),t=this.get("_controllers");d.each(t,function(e){e.destroy()}),e.destroy()}}])&&a(n.prototype,r),i&&a(n,i),t}();d.each(m,function(e){d.mix(y.prototype,e.AUGMENT)}),e.exports=y},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(6),i=n(14),a=o.createDOM("<canvas>").getContext("2d");e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},o,{getPanCanvasBehaviour:function(e){return function(t){var n,r,a=t.getGraph();a.behaviourOn("canvas:mouseenter",function(){t.css({cursor:i.cursor.beforePanCanvas})}),a.behaviourOn("mouseleave",function(e){e.toShape||t.css({cursor:i.cursor.beforePanCanvas})}),a.behaviourOn("mousedown",function(o){(2!==o.button&&!e||!o.shape||o.item&&!1===o.item.dragable&&"mind-root"!==o.item.shapeObj.type&&!t.getSignal("dragEdge"))&&(n={x:o.domX,y:o.domY},t.css({cursor:i.cursor.panningCanvas}),r=a.getMatrix(),t.setCapture(!1))}),a.behaviourOn("drag",function(e){if(n){var i=e.domX-n.x,c=e.domY-n.y,u=[];o.mat3.translate(u,r,[i,c]),t.translateLimt(u)&&(a.updateMatrix(u),a.draw())}}),a.behaviourOn("mouseup",function(){n&&(n=void 0,r=void 0,t.setCapture(!0),t.css({cursor:i.cursor.beforePanCanvas}))})}},getLabelTextByTextLineWidth:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:320;a.font=t;var r=a.measureText(e).width;if(r>n){r=0;for(var o=1;o<e.length;o++)(r+=a.measureText(e[o]).width)>=n&&(e=e.substring(0,o)+"\n"+e.substring(o,e.length),o+=1,r=0)}return e}})},function(e,t){e.exports={orbitGap:10,nodeDefaultShape:"flow-node",edgeDefaultShape:"flow-smooth",groupDefaultShape:"flow-group",nodeActivedOutterStyle:{lineWidth:0},groupSelectedOutterStyle:{stroke:"#E0F0FF",lineWidth:2},nodeSelectedOutterStyle:{stroke:"#E0F0FF",lineWidth:2},edgeActivedStyle:{stroke:"#1890FF",strokeOpacity:.92},nodeActivedStyle:{fill:"#F3F9FF",stroke:"#1890FF"},groupActivedStyle:{stroke:"#1890FF"},edgeSelectedStyle:{lineWidth:2,strokeOpacity:.92,stroke:"#A3B1BF"},nodeSelectedStyle:{fill:"#F3F9FF",stroke:"#1890FF"},groupSelectedStyle:{stroke:"#1890FF",fillOpacity:.92},nodeStyle:{stroke:"#CED4D9",fill:"#FFFFFF",shadowOffsetX:0,shadowOffsetY:4,shadowBlur:10,shadowColor:"rgba(13, 26, 38, 0.08)",lineWidth:1,radius:4,fillOpacity:.92},edgeStyle:{stroke:"#A3B1BF",strokeOpacity:.92,lineWidth:1,lineAppendWidth:8,endArrow:!0},groupBackgroundPadding:[40,10,10,10],groupLabelOffsetX:10,groupLabelOffsetY:10,edgeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},edgeLabelRectPadding:4,edgeLabelRectStyle:{fill:"white"},nodeLabelStyle:{fill:"#666",textAlign:"center",textBaseline:"middle"},groupStyle:{stroke:"#CED4D9",radius:4},groupLabelStyle:{fill:"#666",textAlign:"left",textBaseline:"top"},multiSelectRectStyle:{fill:"#1890FF",fillOpacity:.08,stroke:"#1890FF",opacity:.1},dragNodeHoverToGroupStyle:{stroke:"#1890FF",lineWidth:2},dragNodeLeaveFromGroupStyle:{stroke:"#BAE7FF",lineWidth:2},anchorPointStyle:{radius:3.5,fill:"#fff",stroke:"#1890FF",lineAppendWidth:12},anchorHotsoptStyle:{radius:12,fill:"#1890FF",fillOpacity:.25},anchorHotsoptActivedStyle:{radius:14},anchorPointHoverStyle:{radius:4,fill:"#1890FF",fillOpacity:1,stroke:"#1890FF"},nodeControlPointStyle:{radius:4,fill:"#fff",shadowBlur:4,shadowColor:"#666"},edgeControlPointStyle:{radius:6,symbol:"square",lineAppendWidth:6,fillOpacity:0,strokeOpacity:0},nodeSelectedBoxStyle:{stroke:"#C2C2C2"},cursor:{panningCanvas:"-webkit-grabbing",beforePanCanvas:"-webkit-grab",hoverNode:"move",hoverEffectiveAnchor:"crosshair",hoverEdge:"default",hoverGroup:"move",hoverUnEffectiveAnchor:"default",hoverEdgeControllPoint:"crosshair",multiSelect:"crosshair"},zIndex:{anchorPoint:3,anchorHotsopt:2,selectedBox:1,controlPoint:4},polylineEdgeStyle:{offset:10,borderRadius:5},addToGroupDelayTime:400,outFromGroupDelayTime:400}},function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(7),a=n(28),c=n(29),u={whitespace:{9:"Tab",13:"Enter",32:"Space"},fn:{112:"f1 ",113:"f2 ",114:"f3 ",115:"f4 ",116:"f5 ",117:"f6 ",118:"f7 ",119:"f8 ",120:"f9 ",121:"f10",122:"f11",123:"f12"},letter:{65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z"},number:{48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9"},navigation:{37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown"},symbol:{110:"decimal point",186:"semi-colon",187:"=",188:"comma",189:"-",190:"period ",191:"/",192:"grave accent",219:"open bracket ",220:"back slash ",221:"close bracket ",222:"single quote "},smallNumberKey:{96:"numpad 0 ",97:"numpad 1 ",98:"numpad 2 ",99:"numpad 3 ",100:"numpad 4 ",101:"numpad 5 ",102:"numpad 6 ",103:"numpad 7 ",104:"numpad 8 ",105:"numpad 9 "},modifierKey:{16:"Shift",17:"Ctrl ",18:"Alt",20:"caps lock"},escKey:{8:"Backspace",46:"Delete",27:"Escape"},homeKey:{91:"Windows Key / Left command",92:"right window key ",93:"Windows Menu"},computeKey:{106:"multiply ",107:"add",109:"subtract ",111:"divide "}},s=r({},i.Util,a,{getNodeSize:function(e){if(e){if(i.Util.isNumber(e))return[e,e];if(i.Util.isString(e)){if(-1===e.indexOf("*")){var t=Number(e);return[t,t]}return e.split("*")}return e}return[96,48]},getTypeAndChar:function(e){var t;for(var n in e=""+e,u)for(var r in t=n,u[n])if(r===e)return{type:t,character:u[n][r]};return{}},getKeyboradKey:function(e){return e.key||s.getTypeAndChar(e.keyCode).character},getIndex:function(e){return e.getParent().get("children").indexOf(e)},setId:function(e){e.id||(e.id=i.Util.guid())},pointLineDistance:function(e,t,n,r,o,a){var c=[n-e,r-t];if(i.Util.vec2.exactEquals(c,[0,0]))return NaN;var u=[-c[1],c[0]];i.Util.vec2.normalize(u,u);var s=[o-e,a-t];return Math.abs(i.Util.vec2.dot(s,u))},getRectByBox:function(e,t,n){return t.addShape("rect",{attrs:r({},n,{x:e.minX,y:e.minY,width:e.maxX-e.minX,height:e.maxY-e.minY})})},objectToValues:function(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(e[t]);return n},getValue:function(e){return i.Util.isFunction(e)?e():e},getContrast:function(e,t){var n={};return i.Util.each(t,function(t,r){n[r]=e[r]}),n},arrowTo:function(e,t,n,r,o,a,c){var u=[a-r,c-o],s=i.Util.vec2.angleTo(u,[1,0],!0);return e.transform([["r",s],["t",t,n]]),e},setEndOfContenteditable:function(e){var t,n;document.createRange?((t=document.createRange()).selectNodeContents(e),t.collapse(!1),(n=window.getSelection()).removeAllRanges(),n.addRange(t)):document.selection&&((t=document.body.createTextRange()).moveToElementText(e),t.collapse(!1),t.select())},matches:function(e,t){return(Element.prototype.matches||Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t.item(n)!==this;);return n>-1}).call(e,t)},delegateEvent:function(e,t,n,r){return s.addEventListener(e,t,function(t){for(var o=t.target||t.srcElement;o!==e;)s.matches(o,n)&&r.call(o,Array.prototype.slice.call(arguments)),o=o.parentNode})},Palettes:c});e.exports=s},function(t,n){t.exports=e},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(7),f=n(1),h=n(10),g=[],p=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r={showHotArea:!1,defaultData:{roots:[{label:"思维导图",children:[{label:"新建节点"},{label:"新建节点"},{label:"新建节点"}]}]},shortcut:{append:!0,appendChild:!0,collapseExpand:!0,selectAll:!0},labelEditable:!0,graph:{modes:{default:["clickNodeSelected","keydownMoveSelection","clickCanvasSelected","keydownEditLabel","panBlank","wheelChangeViewport","panMindNode","clickCollapsedButton","clickExpandedButton","hoverButton","hoverNodeActived","dblclickItemEditLabel"],readOnly:["clickNodeSelected","wheelChangeViewport","keydownMoveSelection","hoverNodeActived","panCanvas","clickExpandedButton","hoverButton","clickCanvasSelected"]},layout:new d.Layouts.Mindmap({direction:"H",getSubTreeSep:function(e){return e.children&&e.children.length>0?e.hierarchy<=2?8:2:0},getHGap:function(e){return 1===e.hierarchy?8:2===e.hierarchy?24:18},getVGap:function(e){return 1===e.hierarchy?24:2===e.hierarchy?24:2},getSide:function(e){return e.data.side?e.data.side:"right"}}),mode:"default",defaultIntersectBox:"rect",nodeDefaultShape:"mind-base",edgeDefaultShape:"mind-edge",minZoom:.2,maxZoom:2},align:{item:!1},rootShape:"mind-root",firstSubShape:"mind-first-sub",secondSubShape:"mind-second-sub",subShape:"mind-base",nodeDefaultShape:"mind-base",graphConstructor:d.Tree,defaultSide:"right"},o={};return h.each(g,function(e){h.mix(o,e.CFG)}),h.mix(!0,r,o,e),(n=c(this,s(t).call(this,r))).isMind=!0,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(t,f),n=t,(r=[{key:"_init",value:function(){var e=this;u(s(t.prototype),"_init",this).call(this),h.each(g,function(t){t.INIT&&e[t.INIT]()});var n=this.getGraph(),r=this.get("defaultData"),o=n.get("mode"),i=n.getRootGroup().addGroup();if(this.set("hotAreaGroup",i),n.edge().shape(function(e){if(n.find(e.target).getModel().isPlaceholder)return"mind-placeholder-edge"}),r&&this.read(r),"default"===o){if(r){var a=this.getRoot(),c=n.find(a.id);this.setSelected(c,!0)}}else if("readOnly"===o){var l=this.get("shortcut");l.append=!1,l.appendChild=!1,l.selectAll=!1,l.delete=!1}if(r){var d=this.getRoot();this.focus(d.id)}}},{key:"bindEvent",value:function(){var e=this;u(s(t.prototype),"bindEvent",this).call(this);var n=this.get("_graph");n.on("keydown",function(e){e.domEvent.preventDefault()}),n.on("beforechange",function(t){"add"===t.action?e._beforeAdd(t):"changeData"===t.action&&e._beforeChangeData(t)}),n.on("aftersource",function(){e._setHierarchy()}),n.on("afterchange",function(){e._setHotArea()}),n.on("afteritemdraw",function(e){var t=e.item,n=t.getModel();if(t.isEdge){var r=t.getGraphicGroup();h.toBack(r,r.getParent()),r.setSilent("capture",!1)}n.parent||(t.isRoot=!0,t.deleteable=!1,t.collapseExpand=!1,t.appendable=!1,t.dragable=!1)}),this.on("beforedelete",function(t){var n=t.items[0],r=e._getBrothers(n),o=e._getNth(n);r[o-1]?e.setSelected(r[o-1].id,!0):r[o+1]?e.setSelected(r[o+1].id,!0):e.setSelected(n.getParent(),!0)}),this.on("afteritemselected",function(t){e._tryAdjustViewport(t.item)})}},{key:"getRoot",value:function(){return this.getGraph().getSource().roots[0]}},{key:"_setHierarchy",value:function(e){var t=this.getGraph(),n=this.get("firstSubShape"),r=this.get("secondSubShape"),o=this.get("defaultSide");if(e){var i=t.find(e.parent);if(i){var a=i.getModel();e.hierarchy=a.hierarchy+1,"mind-placeholder"!==e.shape&&(2===e.hierarchy&&(e.shape=n,e.side||(e.side=o)),3===e.hierarchy&&(e.shape=r))}}else(e=this.getRoot()).hierarchy=1;h.traverseTree(e,function(e,t){e.hierarchy=t.hierarchy+1,e.side||(e.side=o),t.side&&(e.side=t.side),2===e.hierarchy?e.shape=n:3===e.hierarchy&&(e.shape=r)},function(e){return e.children})}},{key:"getFirstChildrenBySide",value:function(e){var t=this.getRoot(),n=[];return t.children.forEach(function(t){t.side===e&&n.push(t)}),n}},{key:"_getNth",value:function(e){return this.getGraph().getNth(e)}},{key:"_getBrothers",value:function(e){return e.getParent().getModel().children}},{key:"_getMoveChildModel",value:function(e){if(e&&e.length>0){var t=e.length;return e[parseInt(t/2)]}}},{key:"_getVerticalMoveItem",value:function(e,t,n){for(var r,o=this.getGraph().getNodes(),i=e.getBBox(),a=[i.minX,i.maxX],c=[],u=0;u<a.length;u++)for(var s=a[u],l=0;l<o.length;l++){var d=o[l],f=d.getBBox();t(f,i,s)&&c.push({long:n(f,i),node:d})}return c.length>0&&(c.sort(function(e,t){return e.long-t.long}),r=c[0].node),r}},{key:"_arrowTopItem",value:function(e){var t=this._getBrothers(e),n=this._getNth(e);return t[n-1]?t[n-1]:this._getVerticalMoveItem(e,function(e,t,n){return e.centerY<t.centerY&&n<=e.maxX&&n>=e.minX},function(e,t){return t.centerY-e.centerY})}},{key:"_arrowBottomItem",value:function(e){var t=this._getBrothers(e),n=this._getNth(e);return t[n+1]?t[n+1]:this._getVerticalMoveItem(e,function(e,t,n){return e.centerY>t.centerY&&n<=e.maxX&&n>=e.minX},function(e,t){return e.centerY-t.centerY})}},{key:"_arrowLeftItem",value:function(e){var t=h.getMindNodeSide(e);if(e.isRoot){var n=this.getFirstChildrenBySide("left");return this._getMoveChildModel(n)}if("left"===t){var r=e.getModel().children;return this._getMoveChildModel(r)}return e.getParent()}},{key:"_arrowRightItem",value:function(e){var t=h.getMindNodeSide(e);if(e.isRoot){var n=this.getFirstChildrenBySide("right");return this._getMoveChildModel(n)}if("right"===t){var r=e.getModel().children;return this._getMoveChildModel(r)}return e.getParent()}},{key:"_moveItemSelection",value:function(e){var t=this.getGraph(),n=this.getSelected()[0];if(n){var r,o=e.domEvent,i=h.getKeyboradKey(o);"ArrowUp"!==i||n.isRoot?"ArrowDown"!==i||n.isRoot?"ArrowLeft"===i?r=this._arrowLeftItem(n):"ArrowRight"===i&&(r=this._arrowRightItem(n)):r=this._arrowBottomItem(n):r=this._arrowTopItem(n),r&&(r=t.find(r.id)).isVisible()&&(this.clearSelected(),this.setSelected(r,!0))}}},{key:"showLabelEditor",value:function(e){var t=e.domEvent,n=this.getSelected()[0],r=h.getKeyboradKey(t);if(n&&1===r.length&&!t.metaKey&&!t.ctrlKey){var o=this.get("labelTextArea");n&&(this.beginEditLabel(n),o.innerHTML=r,h.setEndOfContenteditable(o))}}},{key:"_tryAdjustViewport",value:function(e){var t=this.get("_graph"),n=e.getBBox(),r={x:n.minX,y:n.minY},o={x:n.maxX,y:n.maxY},i=t.getDomPoint(r),a=t.getDomPoint(o),c=t.getWidth(),u=t.getHeight();i.x<0&&t.translate(16-i.x,0),i.y<0&&t.translate(0,16-i.y),a.x>c&&t.translate(c-a.x-16,0),a.y>u&&t.translate(0,u-a.y-16)}},{key:"_beforeChangeData",value:function(e){var t=e.data.roots[0],n=this.get("rootShape");t.shape=n,this._setHierarchy(t)}},{key:"_beforeAdd",value:function(e){var t=this.get("_graph"),n=e.model,r=t.find(n.parent);r.getModel().collapsed&&t.update(r,{collapsed:!1}),this._setHierarchy(n)}},{key:"_drawHotAreaShape",value:function(){var e=this.get("_graph"),t=this.get("hotAreaGroup"),n=this.get("hotAreas");t.clear(),n.forEach(function(e){t.addShape("rect",{attrs:{x:e.minX,y:e.minY,width:e.maxX-e.minX,height:e.maxY-e.minY,fill:e.color,fillOpacity:.4},capture:!1})}),e.draw()}},{key:"_setHotArea",value:function(){var e=[],t=this.get("_graph"),n=this.getRoot(),r="placeholder",i=this.get("showHotArea"),a=t.find(n.id).getBBox();e.push({minX:a.minX-90,minY:a.minY-60,maxX:(a.minX+a.maxX)/2,maxY:a.maxY+60,parent:n,current:n,id:n.id+"left"+r,nth:n.children.length,side:"left",color:"orange"}),e.push({minX:(a.minX+a.maxX)/2,minY:a.minY-60,maxX:a.maxX+90,maxY:a.maxY+60,parent:n,current:n,id:n.id+"right"+r,nth:n.children.length,side:"right",color:"pink"}),h.traverseTree(n,function(n,i,a){var c=t.find(n.id);if(!n.isPlaceholder&&c&&c.isVisible()){var u=function(e,t,n){var r=n.children,o=e;if(!n.parent)for(;r[o]&&r[o].side!==t.side;)o++;for(;r[o]&&r[o].isPlaceholder;)o++;if(r[o]&&r[o].side===t.side)return r[o]}(a+1,n,i),s=function(e,t,n){var r=n.children,o=e;if(!n.parent)for(;r[o]&&r[o].side!==t.side;)o--;for(;r[o]&&r[o].isPlaceholder;)o--;if(r[o]&&r[o].side===t.side)return r[o]}(a-1,n,i),l=t.find(n.id).getBBox(),d=i.children,f=2===n.hierarchy&&"right"===n.side,h=2===n.hierarchy&&"left"===n.side;if(s||e.push({minX:f?l.minX-90:l.minX,minY:function(){var e=s?l.minY:l.minY-16;d[a-1]&&d[a-1].isPlaceholder&&d[a-1].side===n.side&&(e=t.find(d[a-1].id).getBBox().minY);return e}(),maxX:h?l.maxX+90:l.maxX,maxY:(l.minY+l.maxY)/2,parent:i,id:(s?s.id:void 0)+n.id+i.id+r,side:n.side,color:"yellow",nth:a}),u){var g=t.find(u.id).getBBox();e.push({minX:"left"===n.side?Math.max(l.minX,g.minX):f?l.minX-90:l.minX,minY:(l.minY+l.maxY)/2,maxX:"right"===n.side?Math.min(l.maxX,g.maxX):h?l.maxX+90:l.maxX,maxY:(g.minY+g.maxY)/2,parent:i,id:n.id+(u?u.id:void 0)+i.id+r,side:n.side,color:"blue",nth:a+1})}else e.push({minX:f?l.minX-90:l.minX,minY:(l.minY+l.maxY)/2,maxX:h?l.maxX+90:l.maxX,maxY:function(){var e=l.maxY+16;d[a+1]&&d[a+1].isPlaceholder&&d[a+1].side===n.side&&(e=t.find(d[a+1].id).getBBox().maxY);return e}(),parent:i,id:n.id+void 0+i.id+r,color:"red",nth:a+1,addOrder:"push",side:n.side});if(!n.children||0===n.children.length||1===n.children.length&&n.children[0].isPlaceholder){var p;p=n.x>i.x?{minX:l.maxX,minY:l.minY-0,maxX:l.maxX+100,maxY:l.maxY+0}:{minX:l.minX-100,minY:l.minY-0,maxX:l.minX,maxY:l.maxY+0},e.push(o({},p,{parent:n,id:NaN+n.id+r,nth:0,color:"green",side:n.side,addOrder:"push"}))}}},function(e){return e.children}),this.set("hotAreas",e),i&&this._drawHotAreaShape()}},{key:"hideHotArea",value:function(){var e=this.get("_graph");this.get("hotAreaGroup").clear(),e.draw(),this.set("showHotArea",!1)}},{key:"showHotArea",value:function(){this._drawHotAreaShape(),this.set("showHotArea",!0)}},{key:"getHotArea",value:function(e){var t;return this.get("hotAreas").forEach(function(n){if(e.x>n.minX&&e.x<n.maxX&&e.y>n.minY&&e.y<n.maxY)return t=n,!1}),t}},{key:"saveExpandImage",value:function(e){var t,n,r,i=this,a=this.getGraph(),c=a.getBBox(),u=a.getFitViewPadding();return a.saveImage(o({width:c.width+u[1]+u[3],height:c.height+u[0]+u[2],beforeTransform:function(){var e=a.getNodes();(t=e.filter(function(e){return e.getModel().collapsed}).map(function(e){return e.getModel().id})).forEach(function(e){a.update(e,{collapsed:!1})}),a.layout(),n=i.getSelected().map(function(e){return e.id}),r=i.getSelected().map(function(e){return e.id}),i.clearSelected(),i.clearActived()},afterTransform:function(){t.forEach(function(e){a.update(e,{collapsed:!0})}),i.setSelected(n,!0),i.setActived(r,!0)}},e))}},{key:"save",value:function(){var e=this.get("_graph").save();return e.roots.forEach(function(e){h.traverseTree(e,function(e){delete e.x,delete e.y,delete e.width,delete e.height,delete e.parent,delete e.nth,delete e.hierarchy,delete e.index,delete e.shape},function(e){return e.children},!0)}),e}}])&&a(n.prototype,r),i&&a(n,i),t}();h.each(g,function(e){h.mix(p.prototype,e.AUGMENT)}),f.setRegister(p,"mind","page"),e.exports=p},function(e,t,n){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}var i=n(7).Util,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this.getDefaultCfg();i.mix(!0,this,n,t),this.init()}return o(e,[{key:"getDefaultCfg",value:function(){return{}}}]),o(e,[{key:"init",value:function(){}},{key:"destroy",value:function(){}}]),e}();e.exports=a},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},n(4),{getMindNodeSide:function(e){var t=e.getModel();if(t.side)return t.side;var n=e.getParent();return n?n.getModel().side?n.getModel().side:o.getMindNodeSide(n):void 0}});e.exports=o},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var c=n(1),u=n(16),s=n(19),l=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r={graph:{modes:{default:["panBlank","hoverGroupActived","keydownCmdWheelZoom","clickEdgeSelected","clickNodeSelected","clickCanvasSelected","clickGroupSelected","hoverNodeActived","hoverEdgeActived","hoverButton","clickCollapsedButton","clickExpandedButton","wheelChangeViewport","keydownShiftMultiSelected","dragNodeAddToGroup","dragOutFromGroup","panItem","hoverEdgeControlPoint","dragEdgeControlPoint"],add:["dragPanelItemAddNode"],readOnly:["panCanvas"],move:["panCanvas"],multiSelect:["dragMultiSelect"]},mode:"default",defaultIntersectBox:"rect",nodeDefaultShape:"flow-base",edgeDefaultShape:"flow-smooth",groupDefaultShape:"flow-base"},linkNode:!1};return s.mix(!0,r,{},e),(n=o(this,i(t).call(this,r))).isFlow=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,u),t}();c.setRegister(l,"flow","diagram"),e.exports=l},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=n(16),l=n(1),d=n(6),f=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r={graph:{modes:{default:["panBlank","keydownCmdWheelZoom","clickEdgeSelected","clickNodeSelected","clickCanvasSelected","hoverNodeActived","hoverEdgeActived","hoverButton","wheelChangeViewport","keydownShiftMultiSelected","panItem","hoverNodeShowArrowController","hoverEdgeControlPoint","dragEdgeControlPoint","bpmnMoveEdgeController"],add:["dragPanelItemAddNode","processAddEdge"],readOnly:["panCanvas"],move:["panCanvas"],multiSelect:["dragMultiSelect"]},mode:"default",defaultIntersectBox:"rect",nodeDefaultShape:"bpmn-base",edgeDefaultShape:"bpmn-base"},arrowController:{thickness:32,long:32,controllers:[]}};return d.mix(!0,r,{},e),(n=i(this,c(t).call(this,r))).isBPMN=!0,n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,s),n=t,(r=[{key:"_init",value:function(){a(c(t.prototype),"_init",this).call(this),this._initArrowController()}},{key:"_createArrowController",value:function(e,t){var n=this,r=this.get("arrowController").controllers,o=d.createDOM('<div class="g6-bpmn-arrow"><svg t="1543840367375" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1061" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32"><defs><style type="text/css"></style></defs><path d="M906.77248 512c0 4.77184-2.21184 9.2672-5.9904 12.17536l-376.5248 289.4848c-2.7648 2.11968-6.06208 3.18464-9.3696 3.18464-3.25632 0-6.5024-1.03424-9.24672-3.09248-5.50912-4.15744-7.5776-11.48928-5.03808-17.90976l75.71456-191.67232L132.58752 604.17024c-8.48896 0-15.36-6.88128-15.36-15.36l0-153.6c0-8.48896 6.87104-15.36 15.36-15.36l443.72992 0-75.71456-191.68256c-2.53952-6.42048-0.47104-13.75232 5.04832-17.90976 5.50912-4.15744 13.12768-4.13696 18.60608 0.09216l376.5248 289.4848C904.56064 502.7328 906.77248 507.22816 906.77248 512z" p-id="1062" fill="#34B7EF"></path></svg></div>',{visibility:"hidden",width:e+"px",height:t+"px",position:"absolute"});return o.setAttribute("draggable","true"),d.addEventListener(o,"dragstart",function(){var e=o.hoverNode,t={shape:"bpmn-base",source:e.id,anchorIndex:o.getAttribute("anchorIndex")},r=e.getBBox(),i=n.getDelegation([{isEdge:!0}]);n.setSignal("dragEdge",!0),n.beginAdd("edge",t),n.set("addEdgeConfig",{addModel:t,delegation:i,startPoint:{x:r.centerX,y:r.centerY},sourceItem:e}),n.hideArrowController()}),r.push(o),o}},{key:"showArrowController",value:function(e){this.get("arrowController").controllers.forEach(function(t){t.show(),t.hoverNode=e})}},{key:"hideArrowController",value:function(){this.get("arrowController").controllers.forEach(function(e){e.hide()})}},{key:"_initArrowController",value:function(){var e=this.getGraph().getGraphContainer(),t=this.get("arrowController"),n=t.thickness,r=t.long,o=this._createArrowController(n,r),i=this._createArrowController(n,r),a=this._createArrowController(r,n),c=this._createArrowController(r,n);e.appendChild(o),e.appendChild(i),e.appendChild(a),e.appendChild(c),t.topArrow=o,t.bottomArrow=i,t.leftArrow=a,t.rightArrow=c}},{key:"bindEvent",value:function(){var e=this;a(c(t.prototype),"bindEvent",this).call(this);var n=this.getGraph();n.on("beforepanitem",function(){e.hideArrowController()}),n.on("afterviewportchange",function(){e.hideArrowController()})}}])&&o(n.prototype,r),l&&o(n,l),t}();l.setRegister(f,"bpmn","diagram"),e.exports=f},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=n(7),l=n(1),d=n(2),f=n(65),h=n(66),g=n(68),p=n(72),m=[f,n(73),p,h,g,n(74)],y=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r={shortcut:{copy:!0,paste:!0,selectAll:!0,addGroup:!0,unGroup:!0},graph:{minZoom:.2,maxZoom:2},graphConstructor:s.Graph,noEndEdge:!0},o={};return d.each(m,function(e){d.mix(o,e.CFG)}),d.mix(!0,r,o,e),(n=i(this,c(t).call(this,r))).isFlow=!0,n}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,l),n=t,(r=[{key:"_init",value:function(){var e=this;a(c(t.prototype),"_init",this).call(this),d.each(m,function(t){t.INIT&&e[t.INIT]()})}},{key:"bindEvent",value:function(){var e=this;a(c(t.prototype),"bindEvent",this).call(this),this.on("beforeitemactived",function(t){var n=t.item,r=e.get("_graph").getShapeObj(n).getActivedOutterStyle(n);n.isNode&&e.addOutterShape(n,r)}),this.on("beforeitemunactived",function(t){var n=t.item;(n.isNode||n.isGroup)&&e.clearOutterShape(n)}),this.on("beforeitemselected",function(t){var n=t.item,r=e.get("_graph").getShapeObj(n).getSelectedOutterStyle(n);n.isNode?e.addOutterShape(n,r):n.isGroup&&e.addOutterShape(n,r)}),this.on("beforeitemunselected",function(t){var n=t.item;(n.isNode||n.isGroup)&&e.clearOutterShape(n)})}}])&&o(n.prototype,r),f&&o(n,f),t}();d.each(m,function(e){d.mix(y.prototype,e.AUGMENT)}),l.setRegister(y,"diagram","page"),e.exports=y},function(e,t){e.exports={gridStyle:{stroke:"#A3B1BF",lineWidth:.5},cursor:{panningCanvas:"-webkit-grabbing",beforePanCanvas:"-webkit-grab"},wheelPanRatio:.3,alignLineStyle:{stroke:"#FA8C16",lineWidth:1},nodeDelegationStyle:{stroke:"#1890FF",fill:"#1890FF",fillOpacity:.08,lineDash:[4,4],radius:4,lineWidth:1},edgeDelegationStyle:{stroke:"#1890FF",lineDash:[4,4],lineWidth:1}}},function(e,t,n){var r=n(18);n(32),n(33),e.exports=r},function(e,t,n){var r=n(13);n(75),n(80),e.exports=r},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=n(1),l=n(16),d=n(24),f=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r={graph:{modes:{default:["panBlank","hoverGroupActived","keydownCmdWheelZoom","clickEdgeSelected","clickNodeSelected","clickCanvasSelected","clickGroupSelected","hoverNodeActived","hoverEdgeActived","hoverButton","clickCollapsedButton","clickExpandedButton","wheelChangeViewport","keydownShiftMultiSelected","dragNodeAddToGroup","dragOutFromGroup","panItem","hoverEdgeControlPoint","dragEdgeControlPoint"],add:["dragPanelItemAddNode","processAddEdge"],readOnly:["panCanvas"],move:["panCanvas"],multiSelect:["dragMultiSelect"]},mode:"default",defaultIntersectBox:"circle",nodeDefaultShape:"koni-base",edgeDefaultShape:"koni-base",groupDefaultShape:"koni-base",minZoom:.5,maxZoom:2},orbit:{satellite:["forkAndLink"]},anchorLink:!1,noEndEdge:!1};return d.mix(!0,r,{},e),(n=i(this,c(t).call(this,r))).isKoni=!0,n}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,l),n=t,(r=[{key:"bindEvent",value:function(){a(c(t.prototype),"bindEvent",this).call(this);var e=this.getGraph();e.on("afterchange",function(t){var n=t.item,r=t.action,o=t.originModel,i=t.updateModel;if(n&&n.isEdge)if("add"===r||"remove"===r){var a=n.getSource(),c=n.getTarget();d.getParallelEdges(a,c,!0).forEach(function(e){e.update()})}else if("update"===r){var u=e.find(o.source),s=e.find(o.target),l=[];if(d.getParallelEdges(u,s,!0).forEach(function(e){e.update()}),d.isNil(i.target)&&!d.isNil(i.source)){var f=e.find(i.source);l=d.getParallelEdges(f,s,!0)}else if(!d.isNil(i.target)&&d.isNil(i.source)){var h=e.find(i.target);l=d.getParallelEdges(u,h,!0)}else if(!d.isNil(i.target)&&!d.isNil(i.source)){var g=e.find(i.source),p=e.find(i.target);l=d.getParallelEdges(g,p,!0)}l.forEach(function(e){e.update()})}"changeData"===r&&e.getEdges().forEach(function(e){e.update()}),e.draw()})}}])&&o(n.prototype,r),s&&o(n,s),t}();s.setRegister(f,"koni","diagram"),e.exports=f},function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(6),a={};function c(e){return e.getCurrentPage().getSelected().length>0}function u(e){var t=e.getCurrentPage();this.snapShot=t.save(),this.selectedItems=t.getSelected().map(function(e){return e.id}),this.method&&(i.isString(this.method)?t[this.method]():this.method(e))}function s(e){var t=e.getCurrentPage();t.read(this.snapShot),t.setSelected(this.selectedItems,!0)}function l(e){return e.getCurrentPage().getMode()!==this.toMode}function d(e){var t=e.getCurrentPage();this.fromMode=t.getMode(),t.changeMode(this.toMode)}function f(e){e.getCurrentPage().changeMode(this.fromMode)}function h(e){var t={},n=[];return e.forEach(function(e){var o=e.model,a=i.mix(!0,{},r({},o,{id:i.guid()}));t[o.id]=a.id,n.push(r({},e,{model:a}))}),n.forEach(function(e){var n=e.model;if(n.parent){var r=t[n.parent];r?n.parent=r:delete n.parent}}),n.sort(function(e,t){return e.index-t.index}),n}a.list=[],a.registerCommand=function(e,t,n){if(a[e])i.mix(a[e],t);else{var o=r({enable:function(){return!0},init:function(){},execute:u,back:s,shortcutCodes:void 0,executeTimes:1,name:e,queue:!0},t);n&&a[n]&&(o=i.mix({},a[n],t)),a[e]=o,a.list.push(o)}},a.execute=function(e,t,n){var r=i.mix(!0,{},a[e],n),o=t.get("_command");return r.enable(t)&&(r.init(),r.queue&&(o.queue.splice(o.current,o.queue.length-o.current,r),o.current+=1),t.emit("beforecommandexecute",{command:r}),r.execute(t),t.emit("aftercommandexecute",{command:r}),t.setCommandDOMenable()),r},a.enable=function(e,t){return a[e].enable(t)},a.registerCommand("common",{back:s}),a.registerCommand("copyAdjacent",{enable:function(){return this.copyNode&&this.copyNode.isNode&&this.x&&this.y},execute:function(e){var t=this.copyNode,n=e.getCurrentPage(),r=n.getGraph(),o=t.getModel(),a=i.clone(o);a.id=i.guid(),a.x=this.x,a.y=this.y;var c=r.add("node",a),u=r.add("edge",{source:o.id,target:a.id});1===this.executeTimes&&(this.addIds=[c.id,u.id],this.page=n)},back:function(){var e=this.page.getGraph();this.addIds.forEach(function(t){e.remove(t)})}}),a.registerCommand("add",{enable:function(){return this.type&&this.addModel},execute:function(e){var t=e.getCurrentPage(),n=t.getGraph().add(this.type,this.addModel);1===this.executeTimes&&(this.addId=n.id,this.page=t)},back:function(){this.page.getGraph().remove(this.addId)}}),a.registerCommand("update",{enable:function(){return this.itemId&&this.updateModel},execute:function(e){var t=e.getCurrentPage(),n=t.getGraph(),r=n.find(this.itemId);1===this.executeTimes&&(this.originModel=i.getContrast(r.getModel(),this.updateModel),this.page=t),n.update(r,this.updateModel)},back:function(){var e=this.page.getGraph(),t=e.find(this.itemId);e.update(t,this.originModel)}}),a.registerCommand("redo",{queue:!1,enable:function(e){var t=e.get("_command"),n=t.queue;return t.current<n.length},execute:function(e){var t=e.get("_command");t.queue[t.current].execute(e),t.current+=1},shortcutCodes:[["metaKey","shiftKey","z"],["ctrlKey","shiftKey","z"]]}),a.registerCommand("undo",{queue:!1,enable:function(e){return e.get("_command").current>0},execute:function(e){var t=e.get("_command"),n=t.queue[t.current-1];n.executeTimes++,n.back(e),t.current-=1},shortcutCodes:[["metaKey","z"],["ctrlKey","z"]]}),a.registerCommand("copy",{queue:!1,enable:c,method:function(e){var t=e.getCurrentPage().getSelected(),n=e.get("_command"),o=t.map(function(e){return e.getGraphicGroup()}),a=i.getChildrenBBox(o);n.clipboard=[],t.forEach(function(e){i.traverseTree(e,function(e){var t=e.getModel(),r=e.getGraphicGroup();n.clipboard.push({type:e.type,index:i.getIndex(r),model:t})},function(e){return e.getChildren&&e.getChildren()},!0)}),e.set("copyCenterBox",r({},a))}}),a.registerCommand("pasteHere",{enable:function(e){return e.get("_command").clipboard.length>0},method:function(e){var t=e.getCurrentPage(),n=e.get("_command"),r=this.pasteData?this.pasteData:h(n.clipboard),o=this.copyCenterBox?this.copyCenterBox:e.get("copyCenterBox"),a=this.contextmenuPoint?this.contextmenuPoint:e.get("contextmenuPoint");t.clearSelected(),this.copyCenterBox=i.clone(o),this.pasteData=i.clone(r),this.contextmenuPoint=i.clone(a),r.forEach(function(e){var n=e.model;n.x&&(n.x+=a.x-o.minX),n.y&&(n.y+=a.y-o.minY),t.add(e.type,n)})},back:s}),a.registerCommand("paste",{enable:function(e){return e.get("_command").clipboard.length>0},method:function(e){var t=e.getCurrentPage(),n=e.get("_command"),r=this.pasteData?this.pasteData:h(n.clipboard);t.clearSelected(),this.pasteData=i.clone(r),r.forEach(function(e){var n=e.model;n.x&&(n.x+=10),n.y&&(n.y+=10),t.add(e.type,n)})},back:s}),a.registerCommand("addGroup",{init:function(){this.addGroupId=i.guid()},enable:function(e){return e.getCurrentPage().getSelected().length>1},method:function(e){e.getCurrentPage().addGroup({id:this.addGroupId})},back:s}),a.registerCommand("unGroup",{enable:function(e){var t=e.getCurrentPage().getSelected();return 1===t.length&&t[0].isGroup},method:"unGroup",back:s}),a.registerCommand("delete",{getDeleteItems:function(e){var t=e.getCurrentPage(),n=t.getGraph(),r=this.itemIds?this.itemIds.map(function(e){return n.find(e)}):t.getSelected();return r=r.filter(function(e){return!1!==e.deleteable})},enable:function(e){return this.getDeleteItems(e).length>0},method:function(e){var t=e.getCurrentPage(),n=this.getDeleteItems(e),r=t.getGraph();t.emit("beforedelete",{items:n}),i.each(n,function(e){r.remove(e)}),t.emit("afterdelete",{items:n}),this.itemIds=n.map(function(e){return e.getModel().id})},back:s,shortcutCodes:["Delete","Backspace"]}),a.registerCommand("selectAll",{method:function(e){var t=e.getCurrentPage();t.getGraph().getItems().forEach(function(e){t.setSelected(e,!0)})},back:s,shortcutCodes:[["metaKey","a"]]}),a.registerCommand("toBack",{enable:c,method:"toBack",back:s}),a.registerCommand("toFront",{enable:c,method:"toFront",back:s}),a.registerCommand("clear",{enable:function(e){return e.getCurrentPage().getItems().length>0},method:"clear",back:s}),a.registerCommand("multiSelect",{enable:l,toMode:"multiSelect",execute:d,back:f}),a.registerCommand("move",{enable:l,toMode:"move",execute:d,back:f}),e.exports=a},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";n.r(t),n.d(t,"mouseEnterEdge",function(){return o}),n.d(t,"mouseLeaveEdge",function(){return i}),n.d(t,"startMove",function(){return a}),n.d(t,"endMove",function(){return c}),n.d(t,"mouseMoveEdge",function(){return u}),n.d(t,"mergeLine",function(){return s});var r=n(0);function o(e){var t=e.graph,n=e.bpmn,o=e.ev,i=e.backUpCursor,a=o.item,c=a.model.controlPoints,u=Object(r.e)({x:o.x,y:o.y},c),s=u.index,l=u.vertical;null!=s&&(i&&(a._cursor=n.getGraph().getMouseEventWrapper().style.cursor),t.update(a,{hold:{index:s,vertical:l}}),l?n.css({cursor:"col-resize"}):n.css({cursor:"row-resize"}))}function i(e){var t=e.graph,n=e.bpmn,r=e.item;r._cursor&&n.css({cursor:r._cursor}),delete r._cursor,t.update(r,{hold:void 0})}function a(e,t){var n=t.item;e.update(n,{lastMouse:{x:t.x,y:t.y}})}function c(e){var t=e.graph,n=e.item;t.update(n,{lastMouse:void 0,moveDelta:void 0})}function u(e,t,n){var r;r=t.model&&t.model.hold&&t.model.hold.vertical?{x:n.x-t.model.lastMouse.x,y:0}:{x:0,y:n.y-t.model.lastMouse.y},e.update(t,{edgeMoved:r,modifiedByMouse:!0})}function s(e,t,n){var r,o=e.model,i=t||o.hold.index,a=o.controlPoints;null===n&&(n=o.hold.vertical);var c=[];return i>=2&&(n?Math.abs(a[i-2].x-a[i].x)<=3&&(r=[{x:a[i-2].x,y:a[i-2].y},{x:a[i-2].x,y:a[i+1].y}],c.push(i-1,i),o.hold.index=i-2,o.controlPoints[i+1].x=a[i-2].x):Math.abs(a[i-2].y-a[i].y)<=3&&(r=[{x:a[i-2].x,y:a[i-2].y},{x:a[i+1].x,y:a[i-2].y}],c.push(i-1,i),o.hold.index=i-2,o.controlPoints[i+1].y=a[i-2].y)),i<=a.length-4&&(n?Math.abs(a[i].x-a[i+2].x)<=3&&(r?(r[1]={x:a[i-2].x,y:a[i+3].y},o.controlPoints[i+3].x=a[i-2].x):(r=[{x:a[i+3].x,y:a[i].y},{x:a[i+3].x,y:a[i+3].y}],o.controlPoints[i].x=a[i+3].x),c.push(i+1,i+2)):Math.abs(a[i].y-a[i+2].y)<=3&&(r?(r[1]={x:a[i+3].x,y:a[i-2].y},o.controlPoints[i+3].y=a[i-2].y):(r=[{x:a[i].x,y:a[i+3].y},{x:a[i+3].x,y:a[i+3].y}],o.controlPoints[i].y=a[i+3].y),c.push(i+1,i+2))),c&&c.length&&a.splice(c[0],c.length),r}},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=n(27),l=n(6),d=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(n=o(this,i(t).call(this))).getDefaultCfg();return n._cfg=l.mix(!0,{},n._cfg,r,e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,s),c(t,[{key:"getDefaultCfg",value:function(){return{}}}]),c(t,[{key:"get",value:function(e){return this._cfg[e]}},{key:"set",value:function(e,t){this._cfg[e]=t}},{key:"destroy",value:function(){this._cfg={},this.destroyed=!0}}]),t}();e.exports=d},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(4);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},o,{getParallelEdges:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.getEdges().filter(function(e){var r=e.getModel();return r.target===t.id||n&&r.source===t.id})},object2array:function(e){var t=[];return o.each(e,function(e){t.push(e)}),t}})},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(9),s=n(2),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).apply(this,arguments))}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,u),n=t,(r=[{key:"getDefaultCfg",value:function(){return{name:"",render:function(){return"<button>satellite</button>"},bindEvent:function(){return[]}}}},{key:"_renderDOM",value:function(){var e=s.createDOM(this.render(this.diagram));return this.dom=e,e.isSatellite=!0,e}},{key:"getDOM",value:function(){return this.dom||this._renderDOM()}},{key:"init",value:function(){var e=this.getDOM(),t=this.diagram.getGraph().getGraphContainer();e&&(e.css({position:"absolute",visibility:"hidden"}),t.appendChild(e),e&&this.bindEvent(e,this.diagram))}},{key:"enable",value:function(){return!0}},{key:"show",value:function(){this.getDOM().show()}},{key:"hide",value:function(){this.getDOM().hide()}},{key:"isVisible",value:function(){return"hidden"!==this.getDOM().style.visibility}},{key:"destroy",value:function(){var e=this.events;e&&e.forEach(function(e){e.remove()})}}])&&o(n.prototype,r),l&&o(n,l),t}();e.exports=l},function(e,t,n){e.exports=n(2)},function(e,t,n){var r=n(26),o=n(6),i=n(15);n(7);r.Editor=r,r.Util=o,r.Diagram=n(16),r.Page=n(1),r.Flow=n(95),r.Koni=n(102),r.Mind=n(107),r.Toolbar=n(121),r.Contextmenu=n(122),r.Command=n(15),r.BPMN=n(123),r.registerBehaviour=r.Page.registerBehaviour,r.registerNode=r.Page.registerNode,r.registerEdge=r.Page.registerEdge,r.registerGroup=r.Page.registerGroup,r.registerGuide=r.Page.registerGuide,r.registerCommand=i.registerCommand,e.exports=r},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(21),s=n(6),l=n(15),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).apply(this,arguments))}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,u),n=t,(r=[{key:"getDefaultCfg",value:function(){return{_components:[],_command:{zoomDelta:.1,queue:[],current:0,clipboard:[]}}}},{key:"_getComponentsBy",value:function(e){return this.get("_components").filter(e)}},{key:"_bindCommands",value:function(e){var t=this;s.each(e,function(e){var n=e.dataset,r=n.command;l[r]?s.addEventListener(e,"click",function(){t.getCurrentPage().focusGraphWrapper(),t.executeCommand(r,n)}):console.warn("请设置有效的命令！")})}},{key:"getCommands",value:function(){return this.get("_command").queue}},{key:"getCurrentCommand",value:function(){var e=this.get("_command");return e.queue[e.current-1]}},{key:"executeCommand",value:function(e,t){s.isString(e)?l.execute(e,this,t):l.execute("common",this,{method:e},t)}},{key:"commandEnable",value:function(e){return l.enable(e,this)}},{key:"setCommandDOMenable",value:function(){var e=this,t=this.getComponentsByType("toolbar"),n=this.getComponentsByType("contextmenu"),r=[];t.forEach(function(e){s.each(e.getCommandDoms(),function(e){r.push(e)})}),n.forEach(function(e){s.each(e.getCommandDoms(),function(e){r.push(e)})}),s.each(r,function(t){var n=t.dataset.command;l.enable(n,e)?t.classList.remove("disable"):t.classList.add("disable")})}},{key:"_onPageStatusChange",value:function(){this.setCommandDOMenable()}},{key:"_afterAddContextmenu",value:function(){this.getCurrentPage()&&this.setCommandDOMenable()}},{key:"_afterAddPage",value:function(e){var t=this;this.setCommandDOMenable(),e.on("statuschange",function(e){t._onPageStatusChange(e)}),e.on("mousedown",function(){t.getComponentsByType("contextmenu").forEach(function(e){e.hide()})}),e.on("contextmenu",function(n){var r=t.getComponentsByType("contextmenu"),o=e.getGraph().getCanvas().get("el"),i=s.getBoundingClientRect(o),a={x:n.x,y:n.y},c=n.item;c&&!c.isSelected&&(e.clearSelected(),e.setSelected(n.item,!0)),t.set("contextmenuPoint",a),n.domEvent.preventDefault(),r.forEach(function(e){e.show(),e.contextmenuPoint=a,e.move(i.left+n.domX,i.top+n.domY)})}),e.on("statuschange",function(e){t.getComponentsByType("contextmenu").forEach(function(t){t.switch(e.status)})}),this._bindShortcut(e)}},{key:"_beforeAddToolbar",value:function(e){var t=e.getCommandDoms();this._bindCommands(t)}},{key:"_beforeAddContextmenu",value:function(e){var t=e.getCommandDoms();e.bindEvent(),this._bindCommands(t)}},{key:"getComponentsByType",value:function(e){return this._getComponentsBy(function(t){return t.type===e})}},{key:"getCurrentPage",value:function(){var e,t=this.getComponentsByType("page");return t.every(function(t){return!t.isActived||(e=t,!1)}),e||(e=t[0]),e}},{key:"getComponents",value:function(){return this.get("_components")}},{key:"_shortcutEnable",value:function(e,t){for(var n=e.shortcutCodes,r=s.getKeyboradKey(t),o=!1,i=0;i<n.length;i++){var a=n[i];if(s.isArray(a)){for(var c=a.length,u=!0,l=0;l<c-1;l++)if(!t[a[l]]){u=!1;break}a[c-1]!==r&&a[c-1]!==s.lowerFirst(r)||!u||(o=!0)}else a===r&&(o=!0);if(o)break}return o}},{key:"_bindShortcut",value:function(e){var t=this,n=e.get("shortcut");e.getGraph().on("keydown",function(e){var r=t.getComponentsByType("contextmenu"),o=e.domEvent;r.forEach(function(e){e.hide()}),o.preventDefault();for(var i=l.list.filter(function(e){return e.shortcutCodes&&n[e.name]}),a=0;a<i.length;a++){var c=i[a];if(t._shortcutEnable(c,o))return t.executeCommand(c.name),!1}})}},{key:"add",value:function(e){var t=this.get("_components"),n=s.upperFirst(e.type);e.editor=this,this["_beforeAdd"+n]&&this["_beforeAdd"+n](e),t.push(e),this["_afterAdd"+n]&&this["_afterAdd"+n](e)}},{key:"destroy",value:function(){this.get("_components").forEach(function(e){e.destroy()})}}])&&o(n.prototype,r),d&&o(n,d),t}();e.exports=d},function(e,t,n){var r;
/*!
 * EventEmitter v5.2.6 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */!function(t){"use strict";function o(){}var i=o.prototype,a=t.EventEmitter;function c(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function u(e){return function(){return this[e].apply(this,arguments)}}i.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp)for(n in t={},r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n]);else t=r[e]||(r[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},i.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(e),o="object"==typeof t;for(n in r)r.hasOwnProperty(n)&&-1===c(r[n],t)&&r[n].push(o?t:{listener:t,once:!1});return this},i.on=u("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=u("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,t){var n,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&-1!==(n=c(o[r],t))&&o[r].splice(n,1);return this},i.off=u("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var r,o,i=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)i.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(o=t[r])&&("function"==typeof o?i.call(this,r,o):a.call(this,r,o));return this},i.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},i.removeAllListeners=u("removeEvent"),i.emitEvent=function(e,t){var n,r,o,i,a=this.getListenersAsObject(e);for(i in a)if(a.hasOwnProperty(i))for(n=a[i].slice(0),o=0;o<n.length;o++)!0===(r=n[o]).once&&this.removeListener(e,r.listener),r.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},i.trigger=u("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=a,o},void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}("undefined"!=typeof window?window:this||{})},function(e,t,n){var r=n(7).Util;e.exports={getGroupIconPath:function(){return"M9.75,9.60000014 L3.75,9.60000014 C3.33578644,9.60000014 3,9.2865995 3,8.90000022 C3,8.51340093 3.33578644,8.20000029 3.75,8.20000029 L9.75,8.20000029 C10.1642136,8.20000029 10.5,8.51340093 10.5,8.90000022 C10.5,9.2865995 10.1642136,9.60000014 9.75,9.60000014 M3,11.6999999 C3,11.3134006 3.33578644,11 3.75,11 L6.75,11 C7.16421356,11 7.5,11.3134006 7.5,11.6999999 C7.5,12.0865992 7.16421356,12.3999999 6.75,12.3999999 L3.75,12.3999999 C3.33578644,12.3999999 3,12.0865992 3,11.6999999 M3.75,13.7999997 L6.75,13.7999997 C7.16421356,13.7999997 7.5,14.1134004 7.5,14.4999996 C7.5,14.8865989 7.16421356,15.1999996 6.75,15.1999996 L3.75,15.1999996 C3.33578644,15.1999996 3,14.8865989 3,14.4999996 C3,14.1134004 3.33578644,13.7999997 3.75,13.7999997 M16.4985,4.00000072 L1.5015,4.00000072 C0.674533504,3.99922416 0.00289396564,4.6232696 0,5.39510058 L0,16.6048994 C0.00289396564,17.3767304 0.674533504,18.0007758 1.5015,17.9999993 L16.4985,17.9999993 C17.3254665,18.0007758 17.997106,17.3767304 18,16.6048994 L18,5.39510058 C17.997106,4.6232696 17.3254665,3.99922416 16.4985,4.00000072M19,13.9999993 L19,3 L5,3 L5,1.39510058 C5.00289397,0.623269599 5.6745335,-0.00077583787 6.5015,7.23978642e-07 L21.4985,7.23978642e-07 C22.3254665,-0.00077583787 22.997106,0.623269599 23,1.39510058 L23,12.6048994 C22.997106,13.3767304 22.3254665,14.0007758 21.4985,13.9999993 L19,13.9999993 Z"},getCollapsedButtonPath:function(){return r.getRectPath(0,0,14,14,2)+"M3,7L11,7"},getExpandedButtonPath:function(){return r.getRectPath(0,0,14,14,2)+"M3,7L11,7M7,3L7,11"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.presetPrimaryColors=t.presetPalettes=t.generate=void 0;var r,o=n(30),i=(r=o)&&r.__esModule?r:{default:r};var a={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},c={};Object.keys(a).forEach(function(e){c[e]=(0,i.default)(a[e])}),t.generate=i.default,t.presetPalettes=c,t.presetPrimaryColors=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],n=(0,i.default)(e),r=d;r>0;r-=1){var o=n.toHsv(),a=(0,i.default)({h:h(o,r,!0),s:g(o,r,!0),v:p(o,r,!0)}).toHexString();t.push(a)}t.push(n.toHexString());for(var c=1;c<=f;c+=1){var u=n.toHsv(),s=(0,i.default)({h:h(u,c),s:g(u,c),v:p(u,c)}).toHexString();t.push(s)}return t};var r,o=n(31),i=(r=o)&&r.__esModule?r:{default:r};var a=2,c=16,u=5,s=5,l=15,d=5,f=4;function h(e,t,n){var r=void 0;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-a*t:Math.round(e.h)+a*t:n?Math.round(e.h)+a*t:Math.round(e.h)-a*t)<0?r+=360:r>=360&&(r-=360),r}function g(e,t,n){if(0===e.h&&0===e.s)return e.s;var r=void 0;return(r=n?Math.round(100*e.s)-c*t:t===f?Math.round(100*e.s)+c:Math.round(100*e.s)+u*t)>100&&(r=100),n&&t===d&&r>10&&(r=10),r<6&&(r=6),r}function p(e,t,n){return n?Math.round(100*e.v)+s*t:Math.round(100*e.v)-l*t}},function(e,t,n){var r;!function(o){var i=/^\s+/,a=/\s+$/,c=0,u=o.round,s=o.min,l=o.max,d=o.random;function f(e,t){if(t=t||{},(e=e||"")instanceof f)return e;if(!(this instanceof f))return new f(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,c=null,u=null,d=!1,f=!1;"string"==typeof e&&(e=function(e){e=e.replace(i,"").replace(a,"").toLowerCase();var t,n=!1;if(M[e])e=M[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=z.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=z.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=z.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=z.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=z.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=z.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=z.hex8.exec(e))return{r:Y(t[1]),g:Y(t[2]),b:Y(t[3]),a:T(t[4]),format:n?"name":"hex8"};if(t=z.hex6.exec(e))return{r:Y(t[1]),g:Y(t[2]),b:Y(t[3]),format:n?"name":"hex"};if(t=z.hex4.exec(e))return{r:Y(t[1]+""+t[1]),g:Y(t[2]+""+t[2]),b:Y(t[3]+""+t[3]),a:T(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=z.hex3.exec(e))return{r:Y(t[1]+""+t[1]),g:Y(t[2]+""+t[2]),b:Y(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(H(e.r)&&H(e.g)&&H(e.b)?(h=e.r,g=e.g,p=e.b,t={r:255*X(h,255),g:255*X(g,255),b:255*X(p,255)},d=!0,f="%"===String(e.r).substr(-1)?"prgb":"rgb"):H(e.h)&&H(e.s)&&H(e.v)?(r=D(e.s),c=D(e.v),t=function(e,t,n){e=6*X(e,360),t=X(t,100),n=X(n,100);var r=o.floor(e),i=e-r,a=n*(1-t),c=n*(1-i*t),u=n*(1-(1-i)*t),s=r%6;return{r:255*[n,c,a,a,u,n][s],g:255*[u,n,n,c,a,a][s],b:255*[a,a,u,n,n,c][s]}}(e.h,r,c),d=!0,f="hsv"):H(e.h)&&H(e.s)&&H(e.l)&&(r=D(e.s),u=D(e.l),t=function(e,t,n){var r,o,i;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=X(e,360),t=X(t,100),n=X(n,100),0===t)r=o=i=n;else{var c=n<.5?n*(1+t):n+t-n*t,u=2*n-c;r=a(u,c,e+1/3),o=a(u,c,e),i=a(u,c,e-1/3)}return{r:255*r,g:255*o,b:255*i}}(e.h,r,u),d=!0,f="hsl"),e.hasOwnProperty("a")&&(n=e.a));var h,g,p;return n=j(n),{ok:d,format:e.format||f,r:s(255,l(t.r,0)),g:s(255,l(t.g,0)),b:s(255,l(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=c++}function h(e,t,n){e=X(e,255),t=X(t,255),n=X(n,255);var r,o,i=l(e,t,n),a=s(e,t,n),c=(i+a)/2;if(i==a)r=o=0;else{var u=i-a;switch(o=c>.5?u/(2-i-a):u/(i+a),i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,l:c}}function g(e,t,n){e=X(e,255),t=X(t,255),n=X(n,255);var r,o,i=l(e,t,n),a=s(e,t,n),c=i,u=i-a;if(o=0===i?0:u/i,i==a)r=0;else{switch(i){case e:r=(t-n)/u+(t<n?6:0);break;case t:r=(n-e)/u+2;break;case n:r=(e-t)/u+4}r/=6}return{h:r,s:o,v:c}}function p(e,t,n,r){var o=[G(u(e).toString(16)),G(u(t).toString(16)),G(u(n).toString(16))];return r&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function m(e,t,n,r){return[G(L(r)),G(u(e).toString(16)),G(u(t).toString(16)),G(u(n).toString(16))].join("")}function y(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.s-=t/100,n.s=I(n.s),f(n)}function v(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.s+=t/100,n.s=I(n.s),f(n)}function b(e){return f(e).desaturate(100)}function x(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.l+=t/100,n.l=I(n.l),f(n)}function S(e,t){t=0===t?0:t||10;var n=f(e).toRgb();return n.r=l(0,s(255,n.r-u(-t/100*255))),n.g=l(0,s(255,n.g-u(-t/100*255))),n.b=l(0,s(255,n.b-u(-t/100*255))),f(n)}function w(e,t){t=0===t?0:t||10;var n=f(e).toHsl();return n.l-=t/100,n.l=I(n.l),f(n)}function O(e,t){var n=f(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,f(n)}function P(e){var t=f(e).toHsl();return t.h=(t.h+180)%360,f(t)}function _(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+120)%360,s:t.s,l:t.l}),f({h:(n+240)%360,s:t.s,l:t.l})]}function C(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+90)%360,s:t.s,l:t.l}),f({h:(n+180)%360,s:t.s,l:t.l}),f({h:(n+270)%360,s:t.s,l:t.l})]}function E(e){var t=f(e).toHsl(),n=t.h;return[f(e),f({h:(n+72)%360,s:t.s,l:t.l}),f({h:(n+216)%360,s:t.s,l:t.l})]}function k(e,t,n){t=t||6,n=n||30;var r=f(e).toHsl(),o=360/n,i=[f(e)];for(r.h=(r.h-(o*t>>1)+720)%360;--t;)r.h=(r.h+o)%360,i.push(f(r));return i}function A(e,t){t=t||6;for(var n=f(e).toHsv(),r=n.h,o=n.s,i=n.v,a=[],c=1/t;t--;)a.push(f({h:r,s:o,v:i})),i=(i+c)%1;return a}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:o.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:o.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:o.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=j(e),this._roundA=u(100*this._a)/100,this},toHsv:function(){var e=g(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=g(this._r,this._g,this._b),t=u(360*e.h),n=u(100*e.s),r=u(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=h(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=h(this._r,this._g,this._b),t=u(360*e.h),n=u(100*e.s),r=u(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return p(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,o){var i=[G(u(e).toString(16)),G(u(t).toString(16)),G(u(n).toString(16)),G(L(r))];if(o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1))return i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0);return i.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*X(this._r,255))+"%",g:u(100*X(this._g,255))+"%",b:u(100*X(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*X(this._r,255))+"%, "+u(100*X(this._g,255))+"%, "+u(100*X(this._b,255))+"%)":"rgba("+u(100*X(this._r,255))+"%, "+u(100*X(this._g,255))+"%, "+u(100*X(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(B[p(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var o=f(e);n="#"+m(o._r,o._g,o._b,o._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(x,arguments)},brighten:function(){return this._applyModification(S,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(v,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(O,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(P,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},f.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:D(e[r]));e=n}return f(e,t)},f.equals=function(e,t){return!(!e||!t)&&f(e).toRgbString()==f(t).toRgbString()},f.random=function(){return f.fromRatio({r:d(),g:d(),b:d()})},f.mix=function(e,t,n){n=0===n?0:n||50;var r=f(e).toRgb(),o=f(t).toRgb(),i=n/100;return f({r:(o.r-r.r)*i+r.r,g:(o.g-r.g)*i+r.g,b:(o.b-r.b)*i+r.b,a:(o.a-r.a)*i+r.a})},f.readability=function(e,t){var n=f(e),r=f(t);return(o.max(n.getLuminance(),r.getLuminance())+.05)/(o.min(n.getLuminance(),r.getLuminance())+.05)},f.isReadable=function(e,t,n){var r,o,i=f.readability(e,t);switch(o=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":o=i>=4.5;break;case"AAlarge":o=i>=3;break;case"AAAsmall":o=i>=7}return o},f.mostReadable=function(e,t,n){var r,o,i,a,c=null,u=0;o=(n=n||{}).includeFallbackColors,i=n.level,a=n.size;for(var s=0;s<t.length;s++)(r=f.readability(e,t[s]))>u&&(u=r,c=f(t[s]));return f.isReadable(e,c,{level:i,size:a})||!o?c:(n.includeFallbackColors=!1,f.mostReadable(e,["#fff","#000"],n))};var M=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},B=f.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(M);function j(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function X(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=s(t,l(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),o.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function I(e){return s(1,l(0,e))}function Y(e){return parseInt(e,16)}function G(e){return 1==e.length?"0"+e:""+e}function D(e){return e<=1&&(e=100*e+"%"),e}function L(e){return o.round(255*parseFloat(e)).toString(16)}function T(e){return Y(e)/255}var N,F,R,z=(F="[\\s|\\(]+("+(N="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",R="[\\s|\\(]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")[,|\\s]+("+N+")\\s*\\)?",{CSS_UNIT:new RegExp(N),rgb:new RegExp("rgb"+F),rgba:new RegExp("rgba"+R),hsl:new RegExp("hsl"+F),hsla:new RegExp("hsla"+R),hsv:new RegExp("hsv"+F),hsva:new RegExp("hsva"+R),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function H(e){return!!z.CSS_UNIT.exec(e)}e.exports?e.exports=f:void 0===(r=function(){return f}.call(t,n,t,e))||(e.exports=r)}(Math)},function(e,t,n){var r=n(18);function o(e){var t=e.getCurrentPage();this.matrixCache=t.getMatrix().slice(0),this._zoom(e),t.updateStatus()}function i(e){e.getCurrentPage().updateMatrix(this.matrixCache)}r.registerCommand("zoomTo",{_zoom:function(e){e.getCurrentPage().zoom(Number(this.zoom))},queue:!1,execute:o,back:i}),r.registerCommand("zoomIn",{enable:function(e){var t=e.getCurrentPage(),n=t.getMaxZoom(),r=t.getMinZoom(),o=t.getZoom();return o<n||o===r},_zoom:function(e){var t=e.getCurrentPage(),n=e.get("_command"),r=t.getZoom(),o=t.getMaxZoom(),i=r+n.zoomDelta;i>=o&&(i=o),t.zoom(i)},queue:!1,execute:o,back:i,shortcutCodes:[["metaKey","="],["ctrlKey","="]]}),r.registerCommand("zoomOut",{enable:function(e){var t=e.getCurrentPage(),n=t.getMaxZoom(),r=t.getMinZoom(),o=t.getZoom();return o>r||o===n},_zoom:function(e){var t=e.getCurrentPage(),n=t.getZoom(),r=t.getMinZoom(),o=n-e.get("_command").zoomDelta;o<=r&&(o=r),t.zoom(o)},queue:!1,execute:o,back:i,shortcutCodes:[["metaKey","-"],["ctrlKey","-"]]}),r.registerCommand("autoZoom",{enable:function(){return!0},_zoom:function(e){e.getCurrentPage().autoZoom()},queue:!1,execute:o,back:i}),r.registerCommand("resetZoom",{enable:function(){return!0},_zoom:function(e){e.getCurrentPage().resetZoom()},queue:!1,execute:o,back:i,shortcutCodes:[["metaKey","0"],["ctrlKey","0"]]})},function(e,t,n){var r=n(18);r.registerCommand("collapseExpand",{getItem:function(e){var t=e.getCurrentPage(),n=t.getGraph();return this.itemId?n.find(this.itemId):t.getSelected()[0]},enable:function(e){var t=this.getItem(e);return t&&!1!==t.collapseExpand&&t.getChildren().length>0},execute:function(e){var t=e.getCurrentPage(),n=t.getGraph(),r=this.getItem(e);r.getModel().collapsed?(n.update(r,{collapsed:!1}),r.getInnerEdges&&r.getInnerEdges().forEach(function(e){e.update()}),this.toCollapsed=!1):(n.update(r,{collapsed:!0}),this.toCollapsed=!0),t.clearSelected(),t.setSelected(r,!0),1===this.executeTimes&&(this.itemId=r.id)},back:function(e){var t=e.getCurrentPage(),n=t.getGraph(),r=this.getItem(e);this.toCollapsed?n.update(r,{collapsed:!1}):n.update(r,{collapsed:!0}),t.clearSelected(),t.setSelected(r,!0)},shortcutCodes:[["metaKey","/"],["ctrlKey","/"]]}),r.registerCommand("collapse",{enable:function(e){var t=this.getItem(e);return t&&!1!==t.collapseExpand&&t.getChildren().length>0&&!t.getModel().collapsed}},"collapseExpand"),r.registerCommand("expand",{enable:function(e){var t=this.getItem(e);return t&&!1!==t.collapseExpand&&t.getChildren().length>0&&t.getModel().collapsed}},"collapseExpand")},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(4),i={INIT:"_initGraph"};i.AUGMENT={_initGraph:function(){var e=this.get("graph"),t=new(this.get("graphConstructor"))(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({page:this},e));t.draw(),this.set("_graph",t)},changeMode:function(e){this.get("_graph").changeMode(e)},updateMatrix:function(e){this.get("_graph").updateMatrix(e)},getMode:function(){return this.get("_graph").get("mode")},getMatrix:function(){return this.get("_graph").getMatrix()},getZoom:function(){return this.get("_graph").getMatrix()[0]},getMaxZoom:function(){return this.get("_graph").get("maxZoom")},getMinZoom:function(){return this.get("_graph").get("minZoom")},getGraph:function(){return this.get("_graph")},getItems:function(){return this.get("_graph").getItems()},getNodes:function(){return this.get("_graph").getNodes()},translate:function(e,t){return this.get("_graph").translate(e,t)},getEdges:function(){return this.get("_graph").getEdges()},getGroups:function(){return this.get("_graph").getGroups()},render:function(){return this.get("_graph").render(),this},add:function(e,t){return this.get("_graph").add(e,t),this},focusPointByDom:function(e){return this.get("_graph").focusPointByDom(e),this},focusPoint:function(e){return this.get("_graph").focusPoint(e),this},find:function(e){return this.get("_graph").find(e)},focus:function(e){var t=this.get("_graph"),n=t.find(e);if(n){var r=n.getCenter();t.focusPoint(r)}return this},save:function(){return this.get("_graph").save()},read:function(e){this.get("_graph").read(e)},clear:function(){this.get("_graph").clear()},remove:function(e){return this.get("_graph").remove(e),this},update:function(e,t){return this.get("_graph").update(e,t),this},zoom:function(e,t){return this.get("_graph").zoom(e,t),this},getDomPoint:function(e){return this.get("_graph").getDomPoint(e)},getPoint:function(e){return this.get("_graph").getPoint(e)},zoomByDom:function(e,t){var n=this.get("_graph"),r=n.getPoint(e);return n.zoom(r,t),this},autoZoom:function(){return this.get("_graph").autoZoom(),this},resetZoom:function(){var e=this.get("_graph"),t=e.getWidth(),n=e.getHeight();return e.zoomByDom({x:t/2,y:n/2},1),this},css:function(e){var t=this.get("_graph").getMouseEventWrapper();o.modifyCSS(t,e)},setCapture:function(e){this.get("_graph").getRootGroup().set("capture",e)},destroy:function(){this.get("_graph").destroy()},delete:function(){var e=this.getSelected(),t=this.get("_graph");o.each(e,function(e){t.remove(e)})}},e.exports=i},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(36),i=n(4),a={CFG:{grid:void 0},INIT:"_initGrid"};a.AUGMENT={_initGrid:function(){var e=this.get("grid"),t=this.get("_graph");if(e){var n=new o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({page:this,graph:t},e));this.setController("grid",n)}},showGrid:function(e){var t=this.get("_graph"),n=this.getController("grid");n||(e?i.isObject(e)&&this.set("grid",e):this.set("grid",!0),this._initGrid()),(n=this.getController("grid")).show(),t.draw()},hideGrid:function(){var e=this.get("_graph"),t=this.getController("grid");t&&t.hide(),e.draw()},getGridCell:function(){return this.getController("grid").getCell()}},e.exports=a},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(9),s=n(14),l=n(4),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).apply(this,arguments))}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,u),n=t,(r=[{key:"getDefaultCfg",value:function(){return{cell:16,line:s.gridStyle,type:"point",visible:!0}}},{key:"init",value:function(){this._draw(),this._onViewPortChange(),!this.visible&&this.hide()}},{key:"_onViewPortChange",value:function(){var e=this,t=this.graph;t.on("afterviewportchange",function(){e.update()}),t.on("beforechangesize",function(){e.update()})}},{key:"_draw",value:function(){var e=this.graph,t=this._getPath(),n=e.getRootGroup(),r=l.mix({},this.line),o=e.getMatrix(),i=this.type,a="line"===i?1/o[0]:2/o[0];"point"===i&&(r.lineDash=null),r.lineWidth=a,r.path=t;var c=n.addShape("path",{attrs:r,capture:!1,zIndex:0});l.toBack(c,n),this.gridEl=c}},{key:"show",value:function(){this.gridEl.show(),this.visible=!0}},{key:"hide",value:function(){this.gridEl.hide(),this.visible=!1}},{key:"_getLinePath",value:function(){for(var e=this.graph,t=e.get("width"),n=e.get("height"),r=e.getPoint({x:0,y:0}),o=e.getPoint({x:t,y:n}),i=this.cell,a=Math.ceil(r.x/i)*i,c=Math.ceil(r.y/i)*i,u=[],s=0;s<=o.x-r.x;s+=i){var l=a+s;u.push(["M",l,r.y]),u.push(["L",l,o.y])}for(var d=0;d<=o.y-r.y;d+=i){var f=c+d;u.push(["M",r.x,f]),u.push(["L",o.x,f])}return u}},{key:"_getPointPath",value:function(){for(var e=this.graph,t=e.get("width"),n=e.get("height"),r=e.getPoint({x:0,y:0}),o=2/e.getMatrix()[0],i=e.getPoint({x:t,y:n}),a=this.getCell(),c=Math.ceil(r.x/a)*a,u=Math.ceil(r.y/a)*a,s=[],l=0;l<=i.x-r.x;l+=a)for(var d=c+l,f=0;f<=i.y-r.y;f+=a){var h=u+f;s.push(["M",d,h]),s.push(["L",d+o,h])}return s}},{key:"getCell",value:function(){var e=this.cell,t=this.graph.getMatrix()[0];return e*t<9.6?9.6/t:e}},{key:"_getPath",value:function(){var e=this.type;return this["_get"+l.upperFirst(e)+"Path"]()}},{key:"update",value:function(e){l.mix(this,e);var t=this._getPath(),n=this.gridEl,r=this.graph.getMatrix(),o="line"===this.type?1/r[0]:2/r[0];n.attr("lineWidth",o),n.attr("path",t)}},{key:"destroy",value:function(){var e=this.gridEl;e&&e.remove()}}])&&o(n.prototype,r),d&&o(n,d),t}();e.exports=d},function(e,t){var n={};function r(e,t,n){e.on(n,function(e){t.emit(n,e)}),e.on("node:"+n,function(e){t.emit("node:"+n,e)}),e.on("edge:"+n,function(e){t.emit("edge:"+n,e)}),e.on("group:"+n,function(e){t.emit("group:"+n,e)}),e.on("anchor:"+n,function(e){t.emit("anchor:"+n,e)})}n.INIT="_initEvent",n.AUGMENT={_initEvent:function(){var e=this,t=this.get("_graph");r(t,this,"click"),r(t,this,"dblclick"),r(t,this,"mouseenter"),r(t,this,"mouseleave"),r(t,this,"mousedown"),r(t,this,"mouseup"),r(t,this,"contextmenu"),t.on("keydown",function(t){e.emit("keydown",t)}),t.on("keyup",function(t){e.emit("keyup",t)}),t.on("beforechange",function(t){e.emit("beforechange",t)}),t.on("afterchange",function(t){e.emit("afterchange",t)}),t.on("afterviewportchange",function(t){e.emit("afterviewportchange",t),t.updateMatrix[0]!==t.originMatrix[0]&&e.emit("afterzoom",t)}),t.on("beforeviewportchange",function(t){e.emit("beforeviewportchange",t),t.updateMatrix[0]!==t.originMatrix[0]&&e.emit("beforezoom",t)})}},e.exports=n},function(e,t,n){var r=n(4),o={CFG:{selectable:!0,multiSelectable:!0,_selectedCache:{}},INIT:"_initSelected"};o.AUGMENT={_initSelected:function(){var e=this,t=this.get("_graph");t.on("afteritemdraw",function(t){var n=t.item;n.isSelected&&e.setItemSelected(n)}),t.on("beforeitemdestroy",function(t){e.clearItemSelected(t.item)})},setItemSelected:function(e){var t=this.get("_graph").getShapeObj(e).getSelectedStyle(e),n=e.getKeyShape();this.get("_selectedCache")[e.id]=e,t&&n.attr(t),e.isEdge&&(e.startArrow&&e.startArrow.attr({fill:t.stroke}),e.endArrow&&e.endArrow.attr({fill:t.stroke}))},clearItemSelected:function(e){var t=this.get("_graph"),n=e.getKeyShape(),o=t.getShapeObj(e),i=o.getStyle(e),a=o.getSelectedStyle(e),c=this.get("_selectedCache"),u=r.getContrast(i,a);n.attr(u),e.isEdge&&(e.startArrow&&e.startArrow.attr({fill:u.stroke}),e.endArrow&&e.endArrow.attr({fill:u.stroke})),delete c[e.id]},setSelected:function(e,t){var n,o=this,i=this.get("selectable"),a=this.get("_graph");i&&(n=r.isArray(e)?e:[e],r.each(n,function(e){r.isString(e)&&(e=a.find(e)),e&&!e.destroyed&&(t?(o.emit("beforeitemselected",{item:e}),o.setItemSelected(e),o.emit("afteritemselected",{item:e})):(o.emit("beforeitemunselected",{item:e}),o.clearItemSelected(e),o.emit("afteritemunselected",{item:e})),e.isSelected=t,o.updateStatus(),a.draw())}))},getSelected:function(){var e=this.get("_selectedCache");return r.objectToValues(e)},clearSelected:function(){var e=this,t=this.get("_graph"),n=this.get("_selectedCache");r.each(n,function(t){t.isSelected&&e.setSelected(t,!1)}),t.draw()}},e.exports=o},function(e,t,n){var r=n(4),o={CFG:{activeable:!0,_activedCache:{}},INIT:"_initActived"};o.AUGMENT={_initActived:function(){var e=this,t=this.get("_graph");t.on("afteritemdraw",function(t){var n=t.item;n.isActived&&e.setItemActived(n)}),t.on("beforeitemdestroy",function(t){e.clearItemActived(t.item)})},setItemActived:function(e){var t=this.get("_graph").getShapeObj(e),n=this.get("_activedCache"),r=t.getActivedStyle(e),o=e.getKeyShape();n[e.id]=e,r&&o.attr(r),e.isEdge&&(e.startArrow&&e.startArrow.attr({fill:r.stroke}),e.endArrow&&e.endArrow.attr({fill:r.stroke}))},clearItemActived:function(e){var t=this.get("_graph"),n=e.getKeyShape(),o=t.getShapeObj(e),i=o.getStyle(e),a=this.get("_activedCache"),c=o.getActivedStyle(e),u=r.getContrast(i,c);n.attr(u),e.isEdge&&(e.startArrow&&e.startArrow.attr({fill:u.stroke}),e.endArrow&&e.endArrow.attr({fill:u.stroke})),delete a[e.id]},setActived:function(e,t){var n,o=this,i=this.get("activeable"),a=this.get("_graph");i&&(n=r.isArray(e)?e:[e],r.each(n,function(e){r.isString(e)&&(e=a.find(e)),e&&!e.destroyed&&(t?(o.emit("beforeitemactived",{item:e}),o.setItemActived(e),o.emit("afteritemactived",{item:e})):(o.emit("beforeitemunactived",{item:e}),o.clearItemActived(e),o.emit("afteritemunactived",{item:e})),e.isActived=t)}),a.draw())},getActived:function(){var e=this.get("_activedCache");return r.objectToValues(e)},clearActived:function(){var e=this,t=this.get("_graph"),n=this.get("_activedCache");r.each(n,function(t){t.isActived&&e.setActived(t,!1)}),t.draw()}},e.exports=o},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(41),i={CFG:{align:{}},INIT:"_initAlign"};i.AUGMENT={_initAlign:function(){var e=this.get("align"),t=this.get("_graph"),n=new o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({flow:this,graph:t},e));this.setController("align",n)},align:function(e,t,n){return this.getController("align").align(e,t,n)},clearAlignLine:function(){return this.getController("align").clearAlignLine()}},e.exports=i},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(9),s=n(14),l=n(4);function d(e,t){return{line:e,point:t,dis:l.pointLineDistance(e[0],e[1],e[2],e[3],t.x,t.y)}}var f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).apply(this,arguments))}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,u),n=t,(r=[{key:"getDefaultCfg",value:function(){return{line:s.alignLineStyle,item:!0,grid:!1,tolerance:5,_horizontalLines:{},_verticalLines:{},_alignLines:[]}}},{key:"init",value:function(){this.item&&this._cacheBoxLine()}},{key:"_cacheBoxLine",value:function(){var e=this.graph,t=this._horizontalLines,n=this._verticalLines,r=this.item;e.on("afteritemdraw",function(e){var o=e.item;if(!l.isEdge(o)){var i=o.getBBox();!0===r||"horizontal"===r?(t[o.id+"tltr"]=[i.minX,i.minY,i.maxX,i.minY,o],t[o.id+"lcrc"]=[i.minX,i.centerY,i.maxX,i.centerY,o],t[o.id+"blbr"]=[i.minX,i.maxY,i.maxX,i.maxY,o]):"center"===r&&(t[o.id+"lcrc"]=[i.minX,i.centerY,i.maxX,i.centerY,o]),!0===r||"vertical"===r?(n[o.id+"tlbl"]=[i.minX,i.minY,i.minX,i.maxY,o],n[o.id+"tcbc"]=[i.centerX,i.minY,i.centerX,i.maxY,o],n[o.id+"trbr"]=[i.maxX,i.minY,i.maxX,i.maxY,o]):"center"===r&&(n[o.id+"tcbc"]=[i.centerX,i.minY,i.centerX,i.maxY,o])}}),e.on("beforeitemdestroy",function(e){var r=e.item;delete t[r.id+"tltr"],delete t[r.id+"lcrc"],delete t[r.id+"blbr"],delete n[r.id+"tlbl"],delete n[r.id+"tcbc"],delete n[r.id+"trbr"]})}},{key:"align",value:function(e,t){var n=l.mix({},e),r=this.flow.getController("grid");return this.grid&&r&&r.visible&&this._gridAlign(e,t),this.item&&this._itemAlign(e,t,n),e}},{key:"_gridAlign",value:function(e,t){var n=this.flow,r=this.grid,o=n.getGridCell();if("cc"===r){var i=Math.round((e.x+t.width/2)/o)*o,a=Math.round((e.y+t.height/2)/o)*o;e.x=i-t.width/2,e.y=a-t.height/2}else e.x=Math.round(e.x/o)*o,e.y=Math.round(e.y/o)*o}},{key:"_itemAlign",value:function(e,t,n){var r=this._horizontalLines,o=this._verticalLines,i=this.tolerance,a={x:n.x+t.width/2,y:n.y},c={x:n.x+t.width/2,y:n.y+t.height/2},u={x:n.x+t.width/2,y:n.y+t.height},s={x:n.x,y:n.y+t.height/2},f={x:n.x+t.width,y:n.y+t.height/2},h=[],g=[],p=null;if(this.clearAlignLine(),l.each(r,function(e){e[4].isVisible()&&(h.push(d(e,a)),h.push(d(e,c)),h.push(d(e,u)))}),l.each(o,function(e){e[4].isVisible()&&(g.push(d(e,s)),g.push(d(e,c)),g.push(d(e,f)))}),h.sort(function(e,t){return e.dis-t.dis}),g.sort(function(e,t){return e.dis-t.dis}),0!==h.length&&h[0].dis<i){e.y=h[0].line[1]-h[0].point.y+n.y,p={type:"item",horizontals:[h[0]]};for(var m=1;m<3;m++)h[0].dis===h[m].dis&&p.horizontals.push(h[m])}if(0!==g.length&&g[0].dis<i){e.x=g[0].line[0]-g[0].point.x+n.x,p?p.verticals=[g[0]]:p={type:"item",verticals:[g[0]]};for(var y=1;y<3;y++)g[0].dis===g[y].dis&&p.verticals.push(g[y])}p&&(p.bbox=t,this._addAlignLine(p))}},{key:"clearAlignLine",value:function(){var e=this._alignLines;l.each(e,function(e){e.remove()}),this._alignLines=[]}},{key:"_addAlignLine",value:function(e){var t=e.bbox,n=this.graph.getRootGroup(),r=this.line,o=this._alignLines;"item"===e.type&&(e.horizontals&&l.each(e.horizontals,function(e){var i,a,c=e.line,u=e.point,s=(c[0]+c[2])/2;u.x<s?(i=u.x-t.width/2,a=Math.max(c[0],c[2])):(i=u.x+t.width/2,a=Math.min(c[0],c[2]));var d=n.addShape("line",{attrs:l.mix({x1:i,y1:c[1],x2:a,y2:c[1]},r),capture:!1});o.push(d)}),e.verticals&&l.each(e.verticals,function(e){var i,a,c=e.line,u=e.point,s=(c[1]+c[3])/2;u.y<s?(i=u.y-t.height/2,a=Math.max(c[1],c[3])):(i=u.y+t.height/2,a=Math.min(c[1],c[3]));var d=n.addShape("line",{attrs:l.mix({x1:c[0],y1:i,x2:c[0],y2:a},r),capture:!1});o.push(d)}))}}])&&o(n.prototype,r),f&&o(n,f),t}();e.exports=f},function(e,t,n){var r=n(4),o={CFG:{labelEditable:!1},INIT:"_initLabelEditor"};o.AUGMENT={_initLabelEditor:function(){var e=this;if(this.get("labelEditable")){var t=this.getGraph(),n=r.createDOM('<div contenteditable="true" role="textbox" tabindex="1" class="g6-label-editor"></div>',{position:"absolute",visibility:"hidden","z-index":"2",padding:"0px 2px 0px 0px",resize:"none",width:"auto",height:"auto",outline:"none",border:"1px solid #1890FF","transform-origin":"left top","max-width":"320px",background:"white","box-sizing":"content-box"});t.getGraphContainer().appendChild(n),n.on("blur",function(n){n.stopPropagation(),!t.destroyed&&e.endEditLabel()}),n.on("keydown",function(t){t.stopPropagation();var n=r.getKeyboradKey(t);(t.metaKey&&"s"===n||t.ctrlKey&&"s"===n)&&t.preventDefault(),"Enter"!==n&&"Escape"!==n||e.endEditLabel()}),this.set("labelTextArea",n),t.on("beforeviewportchange",function(){n.focusItem&&e.setLabelEditorBeginPosition(n.focusItem)})}},_getLabelTextAreaBox:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0];t&&e.attr("text",t);var o=this.getGraph().getRootGroup(),i=r.getBBox(e,o);return{minX:i.minX-n[1],minY:i.minY-n[0],maxX:i.maxX+n[1],maxY:i.maxY+n[0]}},setLabelEditorBeginPosition:function(e){var t=this.get("labelTextArea"),n=e.getLabel();if(n){var o=this._getLabelTextAreaBox(n),i=n.attr("lineHeight"),a=n.attr("fontSize"),c={x:o.minX,y:o.minY-i/4+a/4-1,width:o.maxX-o.minX,height:o.maxY-o.minY};t.css({top:c.y+"px",left:c.x+"px"}),t.labelPoint=c}else{var u=this.getGraph().getRootGroup(),s=e.getKeyShape(),l=r.getBBox(s,u),d={x:l.minY+(l.maxY-l.minY-t.height())/2,y:(l.minX+l.maxX)/2};t.css({top:d.x+"px",left:d.y+"px"}),t.labelPoint=d}},beginEditLabel:function(e){var t=this.get("labelTextArea"),n=this.getGraph();if(r.isString(e)&&(e=n.find(e)),e&&!e.destroyed&&t){this.setSignal("preventWheelPan",!0);var o=e.getModel(),i=e.getLabel(),a=n.getZoom();if(t.focusItem=e,i){var c=i.attr("lineHeight"),u=this._getLabelTextAreaBox(i),s=(u.maxX-u.minX)/a,l=(u.maxY-u.minY+c/4)/a;t.innerHTML=o.label,t.innerHTML=o.label,t.css({"min-width":s+"px","min-height":l+"px",visibility:"visible","font-family":i.attr("fontFamily"),"line-height":c+"px","font-size":i.attr("fontSize")+"px",transform:"scale("+a+")"})}else t.innerHTML="",t.css({"min-width":"auto","min-height":"auto"});this.setLabelEditorBeginPosition(e),t.css({visibility:"visible"}),t.focus(),document.execCommand("selectAll",!1,null)}},endEditLabel:function(){var e=this.get("labelTextArea");if(this.setSignal("preventWheelPan",!1),e){var t=e.focusItem;if(t){var n=t.getModel(),r=this.editor;n.label!==e.textContent&&r.executeCommand("update",{action:"updateLabel",itemId:t.id,updateModel:{label:e.textContent}}),e.hide(),e.focusItem=void 0,this.focusGraphWrapper()}}}},e.exports=o},function(e,t){var n={AUGMENT:{updateStatus:function(){var e,t=this.getSelected();0===t.length?e="canvas-selected":1===t.length?t[0].isNode?e="node-selected":t[0].isEdge?e="edge-selected":t[0].isGroup&&(e="group-selected"):e="multi-selected",this.emit("statuschange",{status:e})}}};e.exports=n},function(e,t,n){n(45),n(46),n(47),n(48),n(49),n(50),n(51),n(52),n(53),n(54),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62)},function(e,t,n){var r=n(3),o=n(4);r.registerBehaviour("panBlank",o.getPanCanvasBehaviour(!0))},function(e,t,n){n(3).registerBehaviour("hoverButton",function(e){e.getGraph().behaviourOn("mouseenter",function(t){e.getSignal("panningItem")||t.shape&&t.shape.isButton&&e.css({cursor:"pointer"})})})},function(e,t,n){var r=n(3),o=n(4);r.registerBehaviour("panCanvas",o.getPanCanvasBehaviour())},function(e,t,n){var r=n(3),o=n(14),i=n(4);r.registerBehaviour("wheelChangeViewport",function(e){var t,n=e.getGraph();n.behaviourOn("wheel",function(e){e.domEvent.preventDefault()}),n.behaviourOn("wheel",i.throttle(function(r){if(e.getSignal("preventWheelPan"))return;var a=r.domEvent,c=e.getSignal("wheelZoom");t||e.setCapture(!1);if(c){var u=a.wheelDelta;if(Math.abs(u)>10){var s=n.getMatrix()[0];u>0?n.zoom({x:r.x,y:r.y},1.05*s):n.zoom({x:r.x,y:r.y},s*(1/1.05))}}else{var l=[],d=n.getMatrix();i.mat3.translate(l,d,[a.wheelDeltaX*o.wheelPanRatio,a.wheelDeltaY*o.wheelPanRatio]),e.translateLimt(l)&&n.updateMatrix(l)}t&&clearTimeout(t),t=setTimeout(function(){e.setCapture(!0),t=void 0},50)},16))})},function(e,t,n){n(3).registerBehaviour("processPanItem",function(e){var t=e.getGraph();t.behaviourOn("mousemove",function(n){var r=e.get("panItemDelegation");if(r){var o=e.get("panItemStartPoint"),i=e.get("panItemStartBox"),a=n.x-o.x,c=n.y-o.y,u=e.align({x:i.minX+a,y:i.minY+c},{width:i.width,height:i.height});r.attr({x:u.x,y:u.y}),t.emit("itempanning",n),t.draw()}})})},function(e,t,n){n(3).registerBehaviour("startPanItem",function(e){var t=e.getGraph(),n=t.getRootGroup();t.behaviourOn("dragstart",function(r){if(2!==r.button&&r.item&&(r.item.isNode||r.item.isGroup)){var o,i=r.item;if((o=(o=i.isSelected?e.getSelected():[i]).filter(function(e){return e.isNode||e.isGroup}))[0]&&!1!==o[0].dragable){t.emit("beforepanitem",{items:o}),t.emit("beforeshowdelegation",{items:o});var a=e.getDelegation(o,n),c=a.getBBox();e.setSignal("panningItem",!0),e.set("panItems",o),e.set("panItemDelegation",a),e.set("panItemStartBox",c),e.set("panItemStartPoint",{x:r.x,y:r.y}),t.draw()}}})})},function(e,t,n){n(3).registerBehaviour("endPanItem",function(e){var t=e.getGraph();t.behaviourOn("panitemend",function(){var n=e.get("panItemDelegation");n&&(n.remove(),t.draw()),e.setSignal("panningItem",!1),e.set("panItemDelegation",void 0),e.set("panItemStartPoint",void 0),e.set("panItemStartBox",void 0),e.set("panItems",void 0)}),t.behaviourOn("canvas:mouseleave",function(){e.get("panItems")&&(e.clearAlignLine(),t.emit("panitemend"))})})},function(e,t,n){n(3).registerBehaviour("dblclickItemEditLabel",function(e){e.getGraph().behaviourOn("node:dblclick",function(t){t.shape&&!t.shape.isButton&&e.beginEditLabel(t.item)})})},function(e,t,n){n(3).registerBehaviour("clickCanvasSelected",function(e){var t=e.getGraph();t.behaviourOn("click",function(t){t.shape||(e.clearSelected(),e.clearActived(),e.updateStatus())}),t.behaviourOn("contextmenu",function(t){t.shape||(e.clearSelected(),e.clearActived(),e.updateStatus())})})},function(e,t,n){n(3).registerBehaviour("clickCollapsedButton",function(e){var t=e.getGraph();t.behaviourOn("click",function(n){var r=n.item,o=n.shape;if(r&&o&&o.isCollapsedButton){var i=e.editor;i?i.executeCommand("collapseExpand",{itemId:r.id}):t.update(r,{collapsed:!0})}})})},function(e,t,n){n(3).registerBehaviour("clickEdgeSelected",function(e){e.getGraph().behaviourOn("edge:click",function(t){e.get("multiSelectable")&&!0===e.getSignal("shiftKeyDown")?e.setSelected(t.item.id,!0):(e.clearActived(),e.clearSelected(),e.setSelected(t.item.id,!0))})})},function(e,t,n){n(3).registerBehaviour("clickExpandedButton",function(e){var t=e.getGraph();t.behaviourOn("click",function(n){var r=n.item,o=n.shape;if(r&&o&&o.isExpandedButton){var i=e.editor;i?i.executeCommand("collapseExpand",{itemId:r.id}):t.update(r,{collapsed:!1})}})})},function(e,t,n){n(3).registerBehaviour("clickGroupSelected",function(e){e.getGraph().behaviourOn("group:click",function(t){e.get("multiSelectable")&&!0===e.getSignal("shiftKeyDown")?e.setSelected(t.item.id,!0):(e.clearActived(),e.clearSelected(),e.setSelected(t.item.id,!0))})})},function(e,t,n){n(3).registerBehaviour("clickNodeSelected",function(e){e.getGraph().behaviourOn("node:click",function(t){e.get("multiSelectable")&&!0===e.getSignal("shiftKeyDown")?e.setSelected(t.item.id,!0):(e.clearActived(),e.clearSelected(),e.setSelected(t.item.id,!0))})})},function(e,t,n){n(3).registerBehaviour("hoverNodeActived",function(e){var t,n=e.getGraph();n.behaviourOn("node:mouseenter",function(n){!1!==n.item.getShapeObj().panAble&&e.css({cursor:"move"}),e.getSignal("panningItem")||e.getSignal("dragEdge")||n.item&&n.item.isSelected||(t=n.item,e.setActived(t,!0))}),n.behaviourOn("node:mouseleave",function(n){var r=n.toShape;t&&(r&&r.isAnchor&&r.getItem()===t||e.getSignal("dragEdge")||(t.isSelected||e.setActived(t,!1),t=void 0))})})},function(e,t,n){n(3).registerBehaviour("hoverGroupActived",function(e){var t=e.getGraph();t.behaviourOn("mouseenter",function(t){e.getSignal("panningItem")||t.item&&t.item.isSelected||e.getSignal("dragEdge")||t.shape&&t.shape.isGroupKeyShape&&(e.css({cursor:"move"}),e.setActived(t.item,!0))}),t.behaviourOn("group:mouseleave",function(t){t.item.isActived&&!t.item.isSelected&&e.setActived(t.item,!1)})})},function(e,t,n){n(3).registerBehaviour("hoverEdgeActived",function(e){var t=e.getGraph();t.behaviourOn("edge:mouseenter",function(t){e.getSignal("panningItem")||t.item&&t.item.isSelected||e.getSignal("dragEdge")||e.setActived(t.item,!0)}),t.behaviourOn("edge:mouseleave",function(t){e.setActived(t.item,!1)})})},function(e,t,n){n(3).registerBehaviour("keydownCmdWheelZoom",function(e){var t=e.getGraph();t.behaviourOn("keydown",function(t){91===t.domEvent.keyCode&&e.setSignal("wheelZoom",!0)}),t.behaviourOn("keyup",function(t){91===t.domEvent.keyCode&&e.setSignal("wheelZoom",!1)})})},function(e,t,n){var r=n(22);e.exports={dragingEdgeEndPoint:function(e){var t=e.endPointType,n=e.edgeModel,r=e.graph,o=e.delegation,i=e.startPoint,a=e.ev,c=e.source,u=e.target,s=a.item,l="source"===t?[a,i]:[i,a];s&&("source"===t?u=s:c=s);var d=r.getShapeObj("edge",n).getPathByPoints({points:l,source:c,target:u});o.attr("path",d),r.draw()},panGroup:function(e,t,n,o){var i=e.getModel();r.traverseTree(e,function(r){if("node"===r.type){var i=r.getModel();o.update(r,{x:i.x+t,y:i.y+n})}e.getCrossEdges&&e.getCrossEdges().forEach(function(e){e.update()})},function(e){return"group"===e.type?e.getChildren():[]}),o.update(e,{x:i.x+t,y:i.y+n})},dropUpdateEdge:function(e){var t=e.ev,n=e.endPointType,r=e.model,o=e.diagram,i=o.get("noEndEdge"),a=o.get("linkAnchor"),c=o.get("linkNode"),u=t.item,s=t.shape,l=t.x,d=t.y;if(o.getGraph().emit("beforedropedge"),s){if(a&&s.isAnchor&&s.hasHotspot){var f=s,h=f.getItem();return"target"===n?(r.target=h.id,r.targetAnchor=f.getIndex(),!0):(r.source=h.id,r.sourceAnchor=f.getIndex(),!0)}if(c&&u&&u.isNode)return"target"===n?(r.target=u.id,!0):(r.source=u.id,!0)}else if(i)return"target"===n?(r.target={x:l,y:d},!0):(r.source={x:l,y:d},!0);return!1}}},function(e,t){e.exports={rectRectCrossAlgorithm:function(e,t){var n=Math.max(e.minX,t.minX),r=Math.max(e.minY,t.minY),o=Math.min(e.maxX,t.maxX),i=Math.min(e.maxY,t.maxY);return n>o||r>i},euclideanDistance:{pointPoint:function(e,t){var n=Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2);return Math.sqrt(n)}}}},function(e,t,n){var r={},o=n(2);r.AUGMENT={changeAddEdgeModel:function(e){this.set("addEdgeModel",e)},cancelAdd:function(){this.set("addType",void 0),this.set("addModel",void 0),this.changeMode("default")},beginAdd:function(e,t){this.set("addType",e),this.set("addModel",t),this.changeMode("add")},endAdd:function(){this.set("addType",void 0),this.set("addModel",void 0),this.changeMode("default")},delete:function(){var e=this.getSelected(),t=this.get("_graph");o.each(e,function(e){t.remove(e)})},toBack:function(){var e=this.getSelected(),t=this.get("_graph");e.sort(function(e,t){var n=e.getGraphicGroup(),r=t.getGraphicGroup();return o.getIndex(r)-o.getIndex(n)}),e.forEach(function(e){t.toBack(e)})},toFront:function(){var e=this.getSelected(),t=this.get("_graph");e.sort(function(e,t){var n=e.getGraphicGroup(),r=t.getGraphicGroup();return o.getIndex(n)-o.getIndex(r)}),e.forEach(function(e){t.toFront(e)})},addGroup:function(e){var t,n=this.get("_graph"),r=this.getSelected(),i=!0;if(0!==r.length){e||(e={label:"新建分组"}),o.setId(e),n.add("group",e),n.toFront(e.id);var a=n.find(e.id);if(r.forEach(function(e){var n=e.getParent();n&&(t?t!==n&&(i=!1):t=n)}),i){t&&(e.parent=t.getModel().id),r.forEach(function(t){n.update(t,{parent:e.id})});var c=a.getInnerEdges();a.deepEach(function(e){n.toFront(e)}),c.forEach(function(e){n.toFront(e)})}else console.warn("add group elements must have the same parent")}},unGroup:function(){var e=this.get("_graph"),t=this.getSelected(),n=t[0];1===t.length&&o.isGroup(n)&&(n.getChildren().forEach(function(t){e.update(t,{parent:void 0}),t.collapsedParent||t.show(),t.isGroup&&t.deepEach(function(e){e.collapsedParent||e.show()})}),e.remove(n))},newGroup:function(e){this.addGroup(e)}},e.exports=r},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(67),i=n(2),a={CFG:{anchor:{}},INIT:"_initAnchor"};a.AUGMENT={_initAnchor:function(){var e=this.get("anchor"),t=this.get("_graph");if(e){var n=new o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({diagram:this,graph:t},e));this.setController("anchor",n)}},showAnchor:function(e,t,n){this.getController("anchor").showAnchor(e,t,n)},clearAnchor:function(e){this.getController("anchor").clearAnchor(e)},setHotspotActived:function(e,t){this.getController("anchor").setHotspotActived(e,t)},hoverShowAnchor:function(e){var t=this,n=e.getAnchorPoints(),r=[];n.forEach(function(n,o){var i={anchor:n,item:e};t.emit("hovernode:beforeshowanchor",i),i.cancel||r.push(o)}),this.showAnchor(e,r)},anchorHasBeenLinked:function(e,t){var n=e.getEdges(),r=[];return n.forEach(function(t){var n=t.getModel();n.source!==e.id||i.isNil(n.sourceAnchor)||r.push(n.sourceAnchor),n.target!==e.id||i.isNil(n.targetAnchor)||r.push(n.targetAnchor)}),i.isObject(t)?-1!==r.indexOf(t.index):-1!==r.indexOf(t)},dragEdgeBeforeShowAnchor:function(e,t,n){var r=this;this.getGraph().getNodes().forEach(function(o){var i,a=[],c=o.getAnchorPoints();if(e.isNode){var u=e.getAnchorPoints();c.forEach(function(c,s){i="target"===n?{source:e,sourceAnchor:u[t],target:o,targetAnchor:c,dragEndPointType:n}:{target:e,targetAnchor:u[t],source:o,sourceAnchor:c,dragEndPointType:n},r.emit("dragedge:beforeshowanchor",i),i.cancel||a.push(s)})}else c.forEach(function(e,t){a.push(t)});o===e&&o.isAnchorShow?a.forEach(function(e){var n=o.getAnchor(e);t!==e&&n&&n.showHotspot()}):r.showAnchor(o,a,!0)})}},e.exports=a},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var l=n(9),d=n(5),f=n(2),h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),c(this,u(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,l),n=t,(r=[{key:"getDefaultCfg",value:function(){return{_anchorItemCache:{}}}},{key:"init",value:function(){var e=this,t=this.graph;t.on("afteritemdraw",function(t){t.item.isAnchorShow&&e.showAnchor(t.item)}),t.on("beforeitemdestroy",function(t){e._clearAnchor(t.item)}),t.on("afteritemhide",function(t){t.item.isNode&&e._clearAnchor(t.item)})}},{key:"_updateAnchor",value:function(e){var t=this.graph;e.anchorShapes.forEach(function(e){e.updatePosition()}),t.draw()}},{key:"_drawAnchor",value:function(e,t,n,r){var i=e.getAnchorPoints();this._clearAnchor(e),f.each(i,function(i,a){if(!n||-1!==n.indexOf(a)){var c,u=t.addShape("marker",{attrs:o({symbol:"circle"},d.anchorPointStyle,{x:i.x,y:i.y}),freezePoint:i,item:e,index:a,eventPreFix:"anchor",isItemChange:function(){},zIndex:d.zIndex.anchorPoint});u.toFront(),u.eventPreFix="anchor",u.showHotspot=function(){c=t.addShape("marker",{attrs:o({symbol:"circle"},d.anchorHotsoptStyle,{x:i.x,y:i.y}),freezePoint:i,capture:!1,zIndex:d.zIndex.anchorHotsopt}),e.anchorShapes.push(c),u.hasHotspot=!0,c.toFront(),u.toFront()},u.getIndex=function(){return a},u.getItem=function(){return e},u.getPoint=function(){return i},u.updatePosition=function(){var t=e.getAnchorPoints()[a];u.attr(t)},u.setActived=function(){u.attr(d.anchorPointHoverStyle)},u.clearActived=function(){u.attr(d.anchorPointStyle)},u.isAnchor=!0,u.setHotspotActived=function(e){c&&(e?c.attr(d.anchorHotsoptActivedStyle):c.attr(d.anchorHotsoptStyle))},r&&u.showHotspot(),e.anchorShapes.push(u),e.getAllAnchors=function(){return e.anchorShapes.filter(function(e){return e.isAnchor})},e.getAnchor=function(t){return e.anchorShapes.find(function(e){return e.get("index")===t})}}})}},{key:"_clearAnchor",value:function(e){e.anchorShapes&&e.anchorShapes.forEach(function(e){e.remove()}),e.anchorShapes=[]}},{key:"setHotspotActived",value:function(e,t){var n=this.diagram.getGraph();e.setHotspotActived(t),n.draw()}},{key:"showAnchor",value:function(e,t,n){if(e.isVisible()){var r=this.graph,o=this._anchorItemCache,i=r.getRootGroup();this._drawAnchor(e,i,t,n),e.isAnchorShow=!0,o[e.id]=e}}},{key:"clearAnchor",value:function(e){var t=this,n=this.graph,r=n.get("itemCache"),o=this._anchorItemCache,i=e;i=f.isObject(e)?[e]:f.isString(e)?[r[e]]:o,f.each(i,function(e){t._clearAnchor(e),e.isAnchorShow=!1,delete o[e.id]}),n.draw()}}])&&a(n.prototype,r),i&&a(n,i),t}();e.exports=h},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(69),i={CFG:{orbit:null},INIT:"_initOrbit"};i.AUGMENT={_initOrbit:function(){var e=this.get("orbit");if(e){var t=new o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({diagram:this},e));this.setController("orbit",t)}},showOrbit:function(e){this.getController("orbit").show(e)},hideOrbit:function(){this.getController("orbit").hide()},layoutOrbit:function(e,t){this.getController("orbit").layout(e,t)}},e.exports=i},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=n(9),l=n(5),d=n(70),f=n(2),h=f.vec2,g=f.isString,p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,c(t).apply(this,arguments))}var n,r,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,s),n=t,(r=[{key:"getDefaultCfg",value:function(){return{satellite:[],satelliteCache:[]}}},{key:"init",value:function(){var e=this,t=this.satellite,n=this.diagram,r={diagram:n};n.getGraph().addBehaviour("orbit"),t.forEach(function(t){g(t)?e.satelliteCache.push(new d[t](r)):e.satelliteCache.push(new d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({},r,t)))})}},{key:"layout",value:function(e,t){var n=this.diagram,r=n.getGraph(),o=this.satelliteCache,i=e.getBBox(),a=i.centerX,c=i.centerY,u=n.getZoom(),s=l.orbitGap/u,d=o.filter(function(e){return e.isVisible()}),f=[t.x-a,t.y-c],g=h.length(f),p=i.width/2+s,m=h.scale([],f,p/g);d.forEach(function(e){var t=e.getDOM(),n=t.width()/2,o=r.getDomPoint({x:m[0]+a,y:m[1]+c});t.css({top:o.y-n+"px",left:o.x-n+"px"})})}},{key:"show",value:function(e){this.satelliteCache.forEach(function(t){t.enable()&&(t.item=e,t.show())})}},{key:"hide",value:function(){this.satelliteCache.forEach(function(e){e.hide()})}}])&&i(n.prototype,r),f&&i(n,f),t}();e.exports=p},function(e,t,n){var r=n(23);r.forkAndLink=n(71),e.exports=r},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var s=n(23),l=n(2),d=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a(this,c(t).apply(this,arguments))}var n,r,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,s),n=t,(r=[{key:"getDefaultCfg",value:function(){return{name:"forkAndLink",render:function(){return'\n          <div style="\n            width: 11px;\n            height: 11px;\n            cursor: copy;\n            background-image: url(https://gw.alipayobjects.com/zos/rmsportal/yWAiQOmucbYMCpwkvTBP.svg)\n          "></div>\n        '},bindEvent:function(e,t){var n=this,r=t.getGraph(),i=r.getRootGroup();return e.setAttribute("draggable","true"),[l.addEventListener(e,"dragstart",function(){var r=n.item,a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({},t.get("addEdgeModel"),{source:r.id}),c=r.getBBox(),u=t.getDelegation([{isEdge:!0}],i);t.setSignal("dragEdge",!0),t.beginAdd("edge",a),t.set("addEdgeConfig",{addModel:a,delegation:u,startPoint:{x:c.centerX,y:c.centerY},sourceItem:r}),e.hide()}),l.addEventListener(e,"click",function(e){var o=e.clientX,i=e.clientY,a=t.editor,c=n.item,u=r.getPointByClient({x:o,y:i}),s=c.getBBox(),d=c.getModel(),f=[u.x-s.centerX,u.y-s.centerY],h=l.vec2.length(f);if(l.vec2.scale(f,f,160/h),a)a.executeCommand("copyAdjacent",{copyNode:c,x:u.x+f[0],y:u.y+f[1]});else{var g=l.clone(d);g.x=u.x+f[0],g.y=u.y+f[1],r.add(c.type,g)}})]}}}}])&&i(n.prototype,r),d&&i(n,d),t}();e.exports=d},function(e,t,n){var r=n(2),o=n(5),i={};function a(e){e.controlPointShapes&&r.each(e.controlPointShapes,function(e){e.remove()}),e.controlPointShapes=[],e.isControlPointShow=!1}i.INIT="_initResize",i.CFG={nodeResizeable:!1,edgeResizeable:!0},i.AUGMENT={_initResize:function(){var e=this,t=this.get("_graph"),n=this.get("nodeResizeable"),o=this.get("edgeResizeable");n&&t.on("afteritemdraw",function(t){"node"===t.item.type&&t.item.isVisible()&&e.drawControlPoints(t.item)}),o&&t.on("afteritemdraw",function(t){"edge"===t.item.type&&t.item.isVisible()&&e.drawControlPoints(t.item)}),t.on("afteritemhide",function(e){var t;e.item.isControlPointShow&&((t=e.item).controlPointShapes&&r.each(t.controlPointShapes,function(e){e.hide()}),t.isControlPointShow=!1)}),t.on("afteritemshow",function(e){var t;!e.item.isControlPointShow&&((t=e.item).controlPointShapes&&r.each(t.controlPointShapes,function(e){e.show()}),t.isControlPointShow=!0)}),t.on("beforeitemdestroy",function(e){e.item.isControlPointShow&&a(e.item)})},drawControlPoints:function(e){var t,n,i,c,u,s,l,d,f,h=this.get("_graph").getRootGroup(),g=this.get("nodeResizeable"),p=this.get("edgeResizeable");"node"===e.type?g&&function(e,t){var n=e.getBBox(),i=[{x:n.minX,y:n.minY},{x:n.maxX,y:n.minY},{x:n.minX,y:n.maxY},{x:n.maxX,y:n.maxY}];a(e);var c=t.addShape("rect",{attrs:r.mix({},o.nodeSelectedBoxStyle,{symbol:"square",x:n.minX,y:n.minY,width:n.maxX-n.minX,height:n.maxY-n.minY})});e.controlPointShapes.push(c),r.each(i,function(n){var i=t.addShape("marker",{attrs:r.mix({},o.nodeControlPointStyle,{symbol:"square",x:n.x,y:n.y}),freezePoint:{x:n.x,y:n.y},item:e});e.controlPointShapes.push(i)})}(e,h):"edge"===e.type&&p&&(n=h,i=(t=e).getKeyShape().attr("path"),c=i[0],u=c.length,s=i[i.length-1],l=s.length,d=[{x:c[u-2],y:c[u-1]},{x:s[l-2],y:s[l-1]}],f=t.getModel(),a(t),r.each(d,function(e,i){var a=n.addShape("marker",{attrs:r.mix({},o.edgeControlPointStyle,{x:e.x,y:e.y}),freezePoint:{x:e.x,y:e.y},item:t});a.eventPreFix="edgeControlPoint",a.getSourcePoint=function(){return d[0]},a.getTargetPoint=function(){return d[d.length-1]},a.getItem=function(){return t},a.isSourceEndPoint=function(){return f.source&&0===i},a.isTargetEndPoint=function(){return f.target&&i===d.length-1},t.controlPointShapes.push(a)})),e.isControlPointShow=!0}},e.exports=i},function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(2),a={};a.AUGMENT={addOutterShape:function(e,t){this.clearOutterShape(e);var n=t.lineWidth,o=e.getKeyShape(),a=e.getGraphicGroup(),c=o.attr(),u=o.get("type"),s=o.attr("lineWidth"),l=i.clone(c);delete l.fillStyle,delete l.strokeStyle,delete l.matrix;var d=a.addShape(u,{attrs:r({},l,{fill:null},t)});i.toBack(d,a);var f=d.getBBox(),h=f.maxX-f.minX,g=f.maxY-f.minY,p=(f.minX+f.maxX)/2,m=(f.minY+f.maxY)/2;d.transform([["t",-p,-m],["s",(n+h+s)/h,(n+g+s)/g],["t",p,m]]),d.isOutter=!0,e.outterShape=d},clearOutterShape:function(e){e.outterShape&&e.outterShape.remove()}},e.exports=a},function(e,t){var n={CFG:{linkNode:!0,linkAnchor:!0},INIT:"_initLink",AUGMENT:{_initLink:function(){var e=this,t=this.getGraph(),n=this.get("linkAnchor"),r=this.get("linkNode"),o=t.get("mode");n&&(this.on("beforeitemactived",function(t){var n=t.item;n.isNode&&e.hoverShowAnchor(n)}),this.on("beforeitemunactived",function(t){var n=t.item;(n.isNode||n.isGroup)&&e.clearAnchor(n)}),this.on("beforeitemselected",function(t){var n=t.item;n.isNode?e.hoverShowAnchor(n):n.isGroup&&e.hoverShowAnchor(n)}),this.on("beforeitemunselected",function(t){var n=t.item;(n.isNode||n.isGroup)&&e.clearAnchor(n)}),t.addBehaviour("dragAnchorAddEdge","add"),t.addBehaviour("hoverAnchorActived","default"),t.changeMode(o)),r&&(t.addBehaviour("hoverNodeAddOutter","add"),t.addBehaviour("hoverNodeAddOutter","default"),t.changeMode(o))}}};e.exports=n},function(e,t,n){n(76),n(77),n(78),n(79)},function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(13),a=n(2),c=n(5);i.registerNode("diagram-base",{getSize:function(e){var t=e.getModel();return a.getNodeSize(t.size)},defaultFillPalette:0,defaultStrokePalette:3,activedFillPalette:0,activedStrokePalette:5,selectedFillPalette:2,selectedStrokePalette:5,getDefaulStyle:function(){return c.nodeStyle},getDefaulActivedStyle:function(){return c.nodeActivedStyle},getDefaulSelectedtyle:function(){return c.nodeSelectedStyle},getStyle:function(e){var t,n,r=e.getModel(),o=r.color;if(o){var i=a.Palettes.generate(o);t=i[this.defaultFillPalette],n=i[this.defaultStrokePalette]}return a.mix(!0,{},this.getDefaulStyle(),{fill:t,stroke:n},r.style)},getPath:function(e){var t=this.getSize(e),n=this.getStyle(e);return a.getRectPath(-t[0]/2,-t[1]/2,t[0],t[1],n.radius)},getActivedOutterStyle:function(){return c.nodeActivedOutterStyle},getActivedStyle:function(e){var t=e.getModel(),n=this.getDefaulActivedStyle(e),o=t.color;if(o){var i=a.Palettes.generate(o);return r({},n,{fill:i[this.activedFillPalette],stroke:i[this.activedStrokePalette]})}return n},getSelectedStyle:function(e){var t=e.getModel(),n=this.getDefaulSelectedtyle(e),o=t.color;if(o){var i=a.Palettes.generate(o);return r({},n,{fill:i[this.selectedFillPalette],stroke:i[this.selectedStrokePalette]})}return n},getSelectedOutterStyle:function(e){var t=e.getModel().color;if(t){var n=a.Palettes.generate(t);return r({},c.nodeSelectedOutterStyle,{stroke:n[1],fill:n[1]})}return c.nodeSelectedOutterStyle},anchor:[[.5,0],[1,.5],[.5,1],[0,.5]]}),i.registerNode("capsule",{getPath:function(e){var t=this.getSize(e);return a.getRectPath(-t[0]/2,-t[1]/2,t[0],t[1],t[1]/2)}}),i.registerNode("circle",{getPath:function(e){var t=this.getSize(e),n=t[0],r=t[1];return a.getEllipsePath(0,0,n/2,r/2)}}),i.registerNode("rhombus",{getPath:function(e){var t=this.getSize(e),n=t[0],r=t[1],o=[{x:0,y:0-r/2},{x:0+n/2,y:0},{x:0,y:0+r/2},{x:0-n/2,y:0},{x:0,y:0-r/2}];return a.pointsToPolygon(o)}})},function(e,t,n){var r=n(13),o=n(2),i=n(5);r.registerEdge("diagram-base",{getPath:function(e){var t=e.getPoints(),n=e.getSource(),r=e.getTarget();return this.getPathByPoints({points:t,source:n,target:r,item:e})},getPathByPoints:function(e){var t=e.points;return o.pointsToPolygon(t)},getStyle:function(e){var t=e.getModel();return o.mix(!0,{},i.edgeStyle,{stroke:t.color},t.style)},getActivedStyle:function(){return i.edgeActivedStyle},getSelectedStyle:function(){return i.edgeSelectedStyle},getActivedOutterStyle:function(){},getSelectedOutterStyle:function(){}})},function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(13),a=n(5),c=n(2),u=c.getGroupIconPath(),s=c.getCollapsedButtonPath(),l=c.getExpandedButtonPath(),d={fill:"#CED4D9"},f={stroke:"#697B8C",fill:"#fff",fillOpacity:0},h={stroke:"#697B8C",fill:"#fff",fillOpacity:0},g={fill:"#000000",textBaseline:"top",textAlign:"left"},p={stroke:"#CED4D9",fill:"#F2F4F5",radius:4},m=a.groupBackgroundPadding,y=40,v=13,b=12,x=12,S=8,w=12,O=184-m[1]-m[3],P=40-m[0]-m[2];i.registerGroup("diagram-base",{draw:function(e){var t=e.getModel(),n=e.getGraphicGroup(),o=e.getChildrenBBox(),i=this.getStyle(e),a=t.collapsed,p=t.padding?t.padding:m;if(o.minX===1/0&&(o.minX=t.x,o.maxX=t.x+O,o.minY=t.y,o.maxY=t.y+P),a&&(o.minX=o.maxX-O,o.maxY=o.minY+P),o.maxX-o.minX<O){var _=O-o.maxX+o.minX;o.minX-=_/2,o.maxX+=_/2}var C=function(e,t){return e.minX-t[3]}(o,p),E=function(e,t){return e.minY-t[0]}(o,p),k=function(e,t){return e.maxX-e.minX+t[3]+t[1]}(o,p),A=function(e,t){return e.maxY-e.minY+t[0]+t[2]}(o,p),M=function(e,t,n,o){var i=t.addShape("path",{attrs:r({},o,{path:n})});return i.isGroupKeyShape=!0,i}(0,n,c.getRectPath(C,E,k,A,i.radius),i);return function(e,t,n,r){var o=c.mix(!0,{},g,{x:n+y,y:r+v});c.isString(e)?o.text=e:c.mix(o,e),t.addShape("text",{attrs:o})}(c.isNil(t.label)?"新建分组":t.label,n,C,E),function(e,t,n,o){var i=t.addShape("path",{attrs:r({path:e},d)}),a=i.getBBox();i.translate(n-a.minX+S,o-a.minY+w)}(c.isNil(t.icon)?u:t.icon,n,C,E),(function(e,t,n,o,i){var a;if(e){var c=(a=t.addShape("path",{attrs:r({path:l},h)})).getBBox(),u=c.maxX-c.minX;a.isExpandedButton=!0,a.translate(n+i-c.minX-u-x,o-c.minY+b)}else{var d=(a=t.addShape("path",{attrs:r({path:s},f)})).getBBox(),g=d.maxX-d.minX;a.isCollapsedButton=!0,a.translate(n+i-d.minX-g-x,o-d.minY+b)}return a.isButton=!0,a}(a,n,C,E,k)).item=e,t.x=o.minX,t.y=o.minY,M},getStyle:function(e){var t=e.getModel();return c.mix(!0,{},p,{fill:t.color,stroke:t.color},t.style)},getActivedStyle:function(){return a.groupActivedStyle},getSelectedStyle:function(){return a.groupSelectedStyle},getSelectedOutterStyle:function(){return a.groupSelectedOutterStyle},getActivedOutterStyle:function(){},intersectBox:"rect"})},function(e,t,n){n(13).registerGuide("diagram-base")},function(e,t,n){n(81),n(82),n(83),n(84),n(85),n(86),n(87),n(88),n(89),n(90),n(91),n(92),n(93),n(94)},function(e,t,n){var r=n(1),o=n(2);r.registerBehaviour("panItem",function(e){var t=e.getGraph();t.behaviourOn("drop",function(){var n=e.get("panItems");if(n){var r=n[0],i=n.map(function(e){return e.id}),a=e.get("panItemDelegation"),c=e.get("panItemStartBox"),u=r.id,s=a.attr("x")-c.minX,l=a.attr("y")-c.minY;t.emit("afterpanitemdrop",{panItems:n}),e.clearAlignLine();var d=e.editor;t.emit("panitemend"),!d||e.getSignal("dragaddnodetogroup")?f():d.executeCommand(f)}function f(){i.forEach(function(e){var n=t.find(e),r=n.getModel();n.isGroup?o.panGroup(n,s,l,t):(t.update(n,{x:r.x+s,y:r.y+l}),t.toFront(n))}),1===i.length&&(e.clearSelected(),e.setSelected(u,!0))}})},["startPanItem","processPanItem","endPanItem"])},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(1),i=n(5);o.registerBehaviour("hoverAnchorActived",function(e){var t=e.getGraph();t.behaviourOn("anchor:mouseenter",function(n){if(!e.getSignal("panningItem")&&!e.getSignal("dragEdge")){var o=n.shape,a=o.getItem(),c=a.getModel(),u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},e.get("addEdgeModel"),{source:c.id}),s={anchor:o.getPoint(),item:a};e.emit("hoveranchor:beforeaddedge",s),s.cancel?e.css({cursor:i.cursor.hoverUnEffectiveAnchor}):(e.css({cursor:i.cursor.hoverEffectiveAnchor}),!o.get("destroyed")&&o.setActived(),e.beginAdd("edge",u),t.draw())}}),t.behaviourOn("anchor:mouseleave",function(n){if(!e.getSignal("dragEdge")&&!e.getSignal("panningItem")){var r=n.shape,o=r.getItem();e.css({cursor:i.cursor.beforePanCanvas}),o.isSelected||(e.clearAnchor(o),e.setActived(o,!1)),!r.get("destroyed")&&r.clearActived(),e.cancelAdd(),t.draw()}})})},function(e,t,n){var r=n(1),o=n(5);r.registerBehaviour("hoverEdgeControlPoint",function(e){e.getGraph().behaviourOn("edgeControlPoint:mouseenter",function(t){if(!e.getSignal("dragEdge")&&!e.getSignal("panningItem")){var n=t.shape;(n.isTargetEndPoint()||n.isSourceEndPoint())&&e.css({cursor:o.cursor.hoverEdgeControllPoint})}})})},function(e,t,n){var r=n(1),o=n(5),i=n(2);r.registerBehaviour("dragEdgeControlPoint",function(e){var t,n,r,a,c,u,s,l,d,f,h=e.getGraph(),g=h.getRootGroup();function p(g){if(r){var p={};h.getNodes().forEach(function(t){e.clearAnchor(t)}),e.css({cursor:o.cursor.beforePanCanvas}),r.remove();var m=i.dropUpdateEdge({ev:g,endPointType:t?"target":"source",model:p,diagram:e});h.show(d);var y=d.id;if(m){var v=e.editor;v?v.executeCommand("update",{itemId:y,updateModel:p}):h.update(y,p)}e.setSignal("dragEdge",!1),t=void 0,n=void 0,r=void 0,a=void 0,c=void 0,u=void 0,s=void 0,l=void 0,d=void 0,f=void 0}}h.behaviourOn("edgeControlPoint:mousedown",function(o){if(2!==o.button){var i=o.shape;i.isTargetEndPoint()?(d=i.getItem(),f=d.getModel(),t=i,a=i.getSourcePoint(),c=d.getSource(),s=f.sourceAnchor):i.isSourceEndPoint()&&(d=i.getItem(),f=d.getModel(),n=i,a=i.getTargetPoint(),u=d.getTarget(),l=f.targetAnchor),d&&(r=e.getDelegation([d],g),c?e.dragEdgeBeforeShowAnchor(c,s,"target"):u&&e.dragEdgeBeforeShowAnchor(u,l,"source"),h.hide(d),e.setSignal("dragEdge",!0))}}),h.behaviourOn("mousemove",function(e){r&&i.dragingEdgeEndPoint({endPointType:c?"target":"source",edgeModel:f,graph:h,delegation:r,startPoint:a,ev:e,originSource:c,originTarget:u})}),h.behaviourOn("edgeControlPoint:mouseleave",function(r){t||n||r.toShape||e.css({cursor:o.cursor.beforePanCanvas})}),h.behaviourOn("mouseup",p),h.behaviourOn("canvas:mouseleave",p)},["dragHoverAnchorHotspot"])},function(e,t,n){var r=n(1),o=n(2);r.registerBehaviour("dragPanelItemAddNode",function(e){var t,n,r,i,a,c=e.getGraph(),u=c.getRootGroup();function s(){e.setSignal("panningItem",!1),e.set("panItemDelegation",void 0),e.set("panItemStartBox",void 0),e.set("panItemStartPoint",void 0),n=void 0,r=void 0,i=void 0,a=void 0}c.behaviourOn("canvas:mouseenter",function(c){if(!n&&(i=e.get("addType"),a=e.get("addModel"),a=o.clone(a),"node"===i)){var s=(r=o.getNodeSize(a.size))[0]/2,l=r[1]/2;t={minX:c.x-s,minY:c.y-l,maxX:c.x+s,maxY:c.y+l,width:r[0],height:r[1]},n=e.getDelegation([t],u),e.setSignal("panningItem",!0),e.set("panItemDelegation",n),e.set("panItemStartBox",t),e.set("panItemStartPoint",{x:c.x,y:c.y})}}),c.behaviourOn("mouseup",function(t){if(n){a.x=t.x,a.y=t.y;var r=i;o.setId(a);var u=e.editor;n.remove(),e.endAdd(),e.clearAlignLine(),e.clearSelected(),e.focusGraphWrapper(),u?u.executeCommand("add",{type:"node",addModel:a}):c.add(r,a),e.setSelected(c.find(a.id),!0),s()}}),c.behaviourOn("canvas:mouseleave",function(){n&&(e.clearAlignLine(),n.remove(),c.draw(),e.cancelAdd(),s())})},["processPanItem"])},function(e,t,n){n(1).registerBehaviour("dragHoverAnchorHotspot",function(e){var t=e.getGraph();t.behaviourOn("anchor:dragenter",function(t){if(e.getSignal("dragEdge")){var n=t.shape;e.setHotspotActived(n,!0)}}),t.behaviourOn("anchor:dragleave",function(t){if(e.getSignal("dragEdge")){var n=t.shape;e.setHotspotActived(n,!1)}})})},function(e,t,n){var r=n(1),o=n(2);r.registerBehaviour("dragAnchorAddEdge",function(e){var t=e.getGraph(),n=t.getRootGroup();t.behaviourOn("anchor:dragstart",function(t){if(2!==t.button){var r=t.shape,i=r.get("freezePoint"),a=r.getItem(),c=o.clone(e.get("addModel")),u=r.getIndex();c.source=a.id,c.sourceAnchor=u;var s={x:i.x,y:i.y},l=e.getDelegation([{isEdge:!0}],n);e.setSignal("dragEdge",!0),e.dragEdgeBeforeShowAnchor(a,u,"target"),e.set("addEdgeConfig",{addModel:c,delegation:l,startPoint:s,sourceItem:a})}})},["processAddEdge","dragHoverAnchorHotspot","hoverAnchorActived"])},function(e,t,n){var r=n(1),o=n(5);r.registerBehaviour("dragMultiSelect",function(e){var t,n,r=e.getGraph(),i=r.getRootGroup();function a(){e.css({cursor:o.cursor.beforePanCanvas}),t=void 0,n=void 0}e.css({cursor:o.cursor.multiSelect}),r.behaviourOn("dragstart",function(e){2!==e.button&&(t={x:e.x,y:e.y},n=i.addShape("rect",{attrs:o.multiSelectRectStyle}))}),r.behaviourOn("drag",function(e){n&&(n.attr({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),width:Math.abs(e.x-t.x),height:Math.abs(e.y-t.y)}),r.draw())}),r.behaviourOn("dragend",function(){if(n){var t=r.getNodes().map(function(e){return e.id}),o=n.getBBox(),i=e.editor;i?i.executeCommand(c):c(),n.remove(),e.changeMode("default"),e.updateStatus(),r.draw(),a()}function c(){e.clearSelected(),t.forEach(function(t){var n=r.find(t),i=n.getBBox();i.minX>o.minX&&i.minY>o.minY&&i.maxX<o.maxX&&i.maxY<o.maxY&&e.setSelected(n,!0)})}}),r.behaviourOn("canvas:mouseleave",function(){n&&(n.remove(),r.draw(),a())})})},function(e,t,n){n(1).registerBehaviour("keydownShiftMultiSelected",function(e){var t=e.getGraph();t.behaviourOn("keydown",function(t){t.domEvent.shiftKey&&e.setSignal("shiftKeyDown",!0)}),t.behaviourOn("keyup",function(t){t.domEvent.shiftKey||e.setSignal("shiftKeyDown",!1)})})},function(e,t,n){var r=n(1),o=n(5);r.registerBehaviour("dragNodeAddToGroup",function(e){var t,n,r=e.getGraph();function i(){e.setSignal("dragaddnodetogroup",!1),t=void 0,n=void 0}r.behaviourOn("dragenter",function(i){if(e.getSignal("panningItem")){var a=e.get("panItems");a[0]&&a[0].isNode&&1===a.length&&i.item&&i.item.isGroup&&a[0].getParent()!==i.item&&(t=a[0],n=i.item,r.update(n,{padding:o.groupBackgroundPadding.map(function(e){return e+4}),style:o.dragNodeHoverToGroupStyle}))}}),r.behaviourOn("dragleave",function(){n&&t&&r.update(n,{padding:void 0,style:void 0})}),r.behaviourOn("drop",function(o){if(n&&t&&n===o.item){e.setSignal("dragaddnodetogroup",!0);var i=t.id,a=n.id;r.update(a,{padding:void 0,style:void 0,collapsed:!1});var c=e.editor;c?c.executeCommand(u):u()}function u(){r.update(i,{parent:a})}}),r.behaviourOn("dragend",function(){i()}),r.behaviourOn("canvas:mouseleave",function(){n&&(r.update(n,{padding:void 0,style:void 0}),i())})})},function(e,t,n){var r=n(1),o=n(5),i=n(2);r.registerBehaviour("dragOutFromGroup",function(e){var t,n,r,a=e.getGraph(),c=!1;function u(){clearTimeout(r),n&&a.update(n,{padding:void 0,style:void 0}),c=!1,t=void 0,n=void 0}a.behaviourOn("drag",function(u){e.getSignal("panningItem")&&!c&&(clearTimeout(r),r=setTimeout(function(){var r=e.get("panItems");if(r){if(t=r[0],n=r[0].getParent(),t&&1===r.length&&n&&!u.shape){var s=e.get("panItemDelegation").getBBox(),l=n.getBBox();i.rectRectCrossAlgorithm(s,l)&&(a.update(n,{padding:o.groupBackgroundPadding.map(function(e){return e-8}),style:o.dragNodeLeaveFromGroupStyle}),c=!0)}c||(t=void 0,n=void 0)}},o.outFromGroupDelayTime))}),a.behaviourOn("dragenter",function(e){t&&n&&(n===e.item&&a.update(n,{padding:o.groupBackgroundPadding.map(function(e){return e+4}),style:o.dragNodeHoverToGroupStyle}),c=!1)}),a.on("drop",function(e){n&&t&&!e.shape&&(a.update(t,{parent:void 0}),a.update(n,{style:void 0}),u())}),a.on("dragend",function(){u()}),a.behaviourOn("canvas:mouseleave",function(){u()})})},function(e,t,n){var r=n(1),o=n(2),i=n(5);r.registerBehaviour("processAddEdge",function(e){var t=e.getGraph();function n(){e.setSignal("dragEdge",!1),e.set("addEdgeConfig",{addModel:void 0,delegation:void 0,startPoint:void 0,sourceItem:void 0})}t.behaviourOn("mousemove",function(n){var r=e.get("addEdgeConfig");if(r){var i=r.addModel,a=r.delegation,c=r.startPoint,u=r.sourceItem;a&&o.dragingEdgeEndPoint({endPointType:"target",edgeModel:i,graph:t,delegation:a,startPoint:c,ev:n,sourceItem:u})}}),t.behaviourOn("mouseup",function(r){var a=e.get("addEdgeConfig");if(a){var c=a.addModel,u=a.delegation,s=a.sourceItem,l=e.editor;if(u)t.getNodes().forEach(function(t){e.clearAnchor(t)}),e.clearAnchor(s),e.setActived(s,!1),e.setSelected(s,!1),e.css({cursor:i.cursor.beforePanCanvas}),u.remove(),o.dropUpdateEdge({ev:r,endPointType:"target",model:c,diagram:e})&&(l?l.executeCommand("add",{type:"edge",addModel:c}):t.add("edge",c)),t.draw(),e.endAdd(),n();else n()}}),t.behaviourOn("canvas:mouseleave",function(){var r=e.get("addEdgeConfig");if(r){var o=r.delegation,i=r.sourceItem;if(o)t.getNodes().forEach(function(t){e.clearAnchor(t)}),e.setActived(i,!1),e.clearAnchor(i),o.remove(),e.cancelAdd(),t.draw(),n();else n()}})})},function(e,t,n){n(1).registerBehaviour("hoverNodeAddOutter",function(e){var t,n=e.getGraph();n.behaviourOn("node:mouseenter",function(n){var r=n.item;e.getSignal("dragEdge")&&(t=r,e.addOutterShape(r,{stroke:"#52C41A",strokeOpacity:.45,lineWidth:4}))}),n.behaviourOn("node:mouseleave",function(){t&&e.clearOutterShape(t)}),n.behaviourOn("beforedropedge",function(){t&&e.clearOutterShape(t)})})},function(e,t,n){var r=n(1),o=n(5),i=n(2);r.registerBehaviour("orbit",function(e){var t,n=e.getGraph();n.behaviourOn("beforepanitem",function(){e.hideOrbit()}),n.behaviourOn("node:mouseenter",function(n){var r=n.item;e.getSignal("panningItem")||e.getSignal("dragEdge")||(t=r,e.showOrbit(r))}),n.on("beforeviewportchange",function(){e.hideOrbit()}),n.behaviourOn("mousemove",function(r){var a=r.item,c=r.x,u=r.y;if(t){var s=t.getBBox(),l=i.euclideanDistance.pointPoint({x:s.centerX,y:s.centerY},{x:c,y:u}),d=n.getMatrix()[0];a!==t&&l>s.width/2+o.orbitGap/d&&(e.hideOrbit(),t=void 0),t&&e.layoutOrbit(t,{x:c,y:u})}})})},function(e,t,n){var r=n(11);n(96),e.exports=r},function(e,t,n){n(97),n(98),n(99),n(100),n(101)},function(e,t,n){var r=n(11);r.registerNode("flow-base",{}),r.registerNode("flow-html",{},["html"]),r.registerNode("flow-rect",{},"flow-base"),r.registerNode("flow-capsule",{},"capsule"),r.registerNode("flow-circle",{},"circle"),r.registerNode("flow-rhombus",{},"rhombus")},function(e,t,n){n(11).registerEdge("flow-base",{})},function(e,t,n){var r=n(19),o=n(11);function i(e,t,n,r){var o=r?r/2:30,i=r;if(e<=t&&t<=n||e>=t&&t>=n){var a=(n-t)/2,c=Math.abs(a);if(0===a)return e===t?0:(t-e)/Math.abs(t-e)*o;if(c>i){var u=a/c*i;return Math.abs(u)<o?a/c*o:u}return c<o?a/c*o:a}var s=o;return(s=Math.abs(t-n)<2*Math.abs(t-e)?r*Math.abs(t-n)/(2*Math.abs(t-e)):r)>i&&(s=i),s<o&&(s=o),t>e?s:-s}function a(e,t,n,r){var o,a,c=e.bbox,u=function(e,t){var n=Math.abs(e.x-t.centerX),r=Math.abs(e.y-t.centerY);return n/t.width>r/t.height}(t,c);o=a=0;var s=Math.min(c.height,c.width);return r&&r.bbox&&(s=Math.min(s,r.bbox.height,r.bbox.width)),u?o=i(c.centerX,t.x,n.x,s):a=i(c.centerY,t.y,n.y,s),{x:t.x+o,y:t.y+a}}var c=.1;function u(e,t){var n=e.x,r=e.y,o=t.x,i=t.y;return{x:n+(o-n)*c,y:r+(i-r)*c}}function s(e,t,n){var o=e[0],i=e[e.length-1],c=["M",o.x,o.y],s=function(e,t,n,r){return[n&&n.bbox?a(n,e,t,r):u(e,t),r&&r.bbox?a(r,t,e,n):u(t,e)]}(o,i,t,n),l=["C"],d=[c];return r.each(s,function(e){l.push(e.x,e.y)}),l.push(i.x,i.y),d.push(l),d}o.registerEdge("flow-smooth",{getPathByPoints:function(e){return s(e.points,e.source,e.target)}},"flow-edge")},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=n(19),a=n(11),c=16,u=5;function s(e,t){var n=Math.min(e.minX,t.minX),r=Math.min(e.minY,t.minY),o=Math.max(e.maxX,t.maxX),i=Math.max(e.maxY,t.maxY);return{centerX:(n+o)/2,centerY:(r+i)/2,minX:n,minY:r,maxX:o,maxY:i,height:i-r,width:o-n}}function l(e,t){return 2*Math.abs(e.centerX-t.centerX)<e.width+t.width&&2*Math.abs(e.centerY-t.centerY)<e.height+t.height}function d(e){var t=e.x,n=e.y;return{centerX:t,centerY:n,minX:t,minY:n,maxX:t,maxY:n,height:0,width:0}}function f(e,t){return 0===e.width&&0===e.height?e:{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}}function h(e,t){return function(e,t){var n=Math.abs(e.x-t.centerX),r=Math.abs(e.y-t.centerY);return n/t.width>r/t.height}(t,e)?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}}function g(e){var t=e.minX,n=e.minY,r=e.maxX,o=e.maxY;return[{x:t,y:n},{x:r,y:n},{x:r,y:o},{x:t,y:o}]}function p(e,t){var n=e.x,r=e.y;return n<t.minX||n>t.maxX||r<t.minY||r>t.maxY}function m(e,t,n,r){var o=t.x-e.x,i=t.y-e.y,a=r.x-n.x,c=r.y-n.y,u=(-i*(e.x-n.x)+o*(e.y-n.y))/(-a*i+o*c),s=(a*(e.y-n.y)-c*(e.x-n.x))/(-a*i+o*c);return u>=0&&u<=1&&s>=0&&s<=1}function y(e,t,n){if(n.width===n.height===0)return!1;var r=o(g(n),4),i=r[0],a=r[1],c=r[2],u=r[3];return m(e,t,i,a)||m(e,t,i,u)||m(e,t,a,c)||m(e,t,c,u)}function v(e){return e=x(e)}function b(e,t){return[e,{x:e.x,y:t.y},t]}function x(e){var t=[],n={};return e.forEach(function(e){var t=e.id="".concat(e.x,"-").concat(e.y);n[t]=e}),i.each(n,function(e){t.push(e)}),t}function S(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function w(e,t,n,r,o){return S(e,t)+S(e,n)+function(e,t){var n=0;return t.forEach(function(t){t&&(e.x===t.x&&(n+=-2),e.y===t.y&&(n+=-2))}),n}(e,[t,n,r,o])}function O(e,t,n,o,i,a,c){var u=[],s=[t],l={},d={},f={};d[t.id]=0,f[t.id]=w(t,n,t);var h={};e.forEach(function(e){h[e.id]=e});for(var g=function(){var r,g,p,m=void 0,v=1/0;if(s.forEach(function(e){f[e.id]<v&&(v=f[e.id],m=e)}),m===n){var b=[];return function e(t,n,r,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;t.unshift(n[o]),r[o]&&r[o]!==o&&i<=100&&e(t,n,r,r[o],i+1)}(b,h,l,n.id),{v:b}}g=m,(p=(r=s).indexOf(g))>-1&&r.splice(p,1),u.push(m),function(e,t,n,r){var o=[];return e.forEach(function(e){e!==t&&(e.x!==t.x&&e.y!==t.y||y(e,t,n)||y(e,t,r)||o.push(e))}),x(o)}(e,m,o,i).forEach(function(e){if(-1===u.indexOf(e)){-1===s.indexOf(e)&&s.push(e);var r=f[m.id]+S(m,e);d[e.id]&&r>=d[e.id]||(l[e.id]=m.id,d[e.id]=r,f[e.id]=d[e.id]+w(e,n,t,a,c))}})};s.length;){var p=g();if("object"===r(p))return p.v}return console.error("cannot find path: ",e,t,n),[t,n]}function P(e,t,n,r,o){var i=n&&n.bbox?n.bbox:d(e),a=r&&r.bbox?r.bbox:d(t);if(l(i,a))return v(b(e,t));var c=f(i,o),u=f(a,o);if(l(c,u))return v(b(e,t));var m=h(c,e),y=h(u,t),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],n=[];e.forEach(function(e){t.push(e.x),n.push(e.y)});var r=Math.min.apply(Math,t),o=Math.max.apply(Math,t),i=Math.min.apply(Math,n),a=Math.max.apply(Math,n);return{centerX:(r+o)/2,centerY:(i+a)/2,maxX:o,maxY:a,minX:r,minY:i,height:a-i,width:o-r}}([m,y]),w=(s(c,u),s(c,S)),P=s(u,S),_=[];_=(_=_.concat(g(w))).concat(g(P));var C={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[S,w,P].forEach(function(e){_=_.concat(function(e,t){return function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]}(e,t.x).concat(function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]}(e,t.y))}(e,C).filter(function(e){return p(e,c)&&p(e,u)}))}),[{x:m.x,y:y.y},{x:y.x,y:m.y}].forEach(function(e){p(e,c)&&p(e,u)&&_.push(e)}),_.unshift(m),_.push(y);var E=O(_=x(_),m,y,i,a,e,t);return E.unshift(e),E.push(t),v(E)}function _(e,t){var n=[],r=e[0];return n.push("M".concat(r.x," ").concat(r.y)),e.forEach(function(r,i){var a=e[i+1],c=e[i+2];if(a&&c)if(function(e,t,n){return!(e.x===t.x===n.x||e.y===t.y===n.y)}(r,a,c)){var u=o(function(e,t,n,r){var o=S(e,t),i=S(n,t);return o<r&&(r=o),i<r&&(r=i),[{x:t.x-r/o*(t.x-e.x),y:t.y-r/o*(t.y-e.y)},{x:t.x-r/i*(t.x-n.x),y:t.y-r/i*(t.y-n.y)}]}(r,a,c,t),2),s=u[0],l=u[1];n.push("L".concat(s.x," ").concat(s.y)),n.push("Q".concat(a.x," ").concat(a.y," ").concat(l.x," ").concat(l.y)),n.push("L".concat(l.x," ").concat(l.y))}else n.push("L".concat(a.x," ").concat(a.y));else a&&n.push("L".concat(a.x," ").concat(a.y))}),n.join("")}a.registerEdge("flow-polyline",{getPathByPoints:function(e){var t=e.points,n=e.source,r=e.target,o=c,a=P(t[0],t[t.length-1],n,r,o);return i.pointsToPolygon(a)}}),a.registerEdge("flow-polyline-round",{getPathByPoints:function(e){var t=e.points,n=e.source,r=e.target,o=c,i=u;return _(v(P(t[0],t[t.length-1],n,r,o)),i)}})},function(e,t,n){n(11).registerGroup("flow-base",{})},function(e,t,n){var r=n(17);n(103),e.exports=r},function(e,t,n){n(104),n(105),n(106)},function(e,t,n){n(17).registerNode("koni-base",{defaultFillPalette:5,defaultStrokePalette:5,activedFillPalette:4,activedStrokePalette:6,selectedFillPalette:5,selectedStrokePalette:6,anchor:null},"circle")},function(e,t,n){var r=n(17),o=n(24),i=o.vec2;r.registerEdge("koni-base",{getDefaultLabelRectPadding:function(){return o.toAllPadding([0,2])},getPathByPoints:function(e){var t=e.points,n=e.source,r=e.target,a=e.item;if(n&&r){var c=o.getParallelEdges(r,n),u=o.getParallelEdges(n,r),s=u.indexOf(a);return n===r?(s=(u=u.filter(function(e){var t=e.getModel();return t.source===n.id&&t.target===r.id})).indexOf(a),function(e,t){var n=e.getBBox(),r=[n.centerX,n.centerY],o=n.width/2,a=50*(t+1)+50,c=[r[0]-o/2,r[1]-Math.sqrt(3)/2*o],u=[c[0]-r[0],c[1]-r[1]],s=i.scale([],u,(o+a)/o),l=[r[0]+s[0],r[1]+s[1]],d=[r[0]+o/2,r[1]-Math.sqrt(3)/2*o],f=[d[0]-r[0],d[1]-r[1]],h=i.scale([],f,(o+a)/o),g=[r[0]+h[0],r[1]+h[1]];return[["M",c[0],c[1]],["C",l[0],l[1],g[0],g[1],d[0],d[1]]]}(n,s)):(0===c.length&&s--,function(e,t,n){var r=e.getBBox(),o=t.getBBox(),a=r.centerX,c=r.centerY,u=20*(n+1),s=[.5*(o.centerX+a)-a,.5*(o.centerY+c)-c],l=[-s[1],s[0]],d=i.length(l);i.scale(l,l,u/d);var f={x:s[0]+l[0]+a,y:s[1]+l[1]+c},h=e.getLinkPoints(f)[0],g=t.getLinkPoints(f)[0];return[["M",h.x,h.y],["Q",f.x,f.y,g.x,g.y]]}(n,r,s))}return o.pointsToPolygon(t)}})},function(e,t,n){n(17).registerGroup("koni-base",{})},function(e,t,n){var r=n(8);r.Util=n(10),n(108),n(112),n(120),e.exports=r},function(e,t,n){n(109),n(110),n(111)},function(e,t,n){var r=n(1),o=n(10);r.registerBehaviour("panMindNode",function(e){var t,n,r,i=e.getGraph();function a(){t.nth=n;var o=i.add("node",t);e.setSelected(o,!0),r&&i.remove(r.id)}function c(){i.emit("panitemend"),t=void 0,r=void 0,n=void 0}i.behaviourOn("beforeshowdelegation",function(){e.clearSelected(),e.clearActived()}),i.behaviourOn("node:dragstart",function(e){if(2!==e.button){var r=e.item;!(t=r.getModel()).parent||e.shape.isCollapsedButton||e.shape.isExpandedButton?c():(n=i.getNth(r),i.remove(r))}}),i.behaviourOn("itempanning",function(t){if(!t.shape||!t.shape.isPlaceholder){var n=e.getHotArea(t),o=e.getRoot();if(r&&(n?r.id!==n.id&&i.remove(i.find(r.id)):i.remove(i.find(r.id))),r=n,n){var a=n.parent;if(!i.find(n.id)){var c={id:n.id,parent:a.id,isPlaceholder:!0,parentModel:a,baseline:r.parent.id===o.id?"center":void 0,shape:"mind-placeholder",nth:n.nth};n.side&&(c.side=n.side),i.add("node",c)}}}}),i.behaviourOn("drop",function(){if(t)if(r){var u=o.clone(t);i.remove(r.id),e.executeCommand("moveMindNode",{model:u,newParentId:r.parent.id,newNth:r.nth,newSide:r.side,originParentId:t.parent,originNth:n,originSide:t.side})}else a();c()}),i.behaviourOn("canvas:mouseleave",function(){t&&(a(),c())})},["startPanItem","processPanItem","endPanItem"])},function(e,t,n){n(1).registerBehaviour("keydownMoveSelection",function(e){e.getGraph().on("keydown",function(t){e._moveItemSelection(t)})})},function(e,t,n){n(1).registerBehaviour("keydownEditLabel",function(e){e.getGraph().behaviourOn("keydown",function(t){e.showLabelEditor(t)})})},function(e,t,n){n(113),n(114),n(115),n(116),n(117),n(118),n(119)},function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(8),a=n(10),c={fill:"#000",textAlign:"left",textBaseline:"top"},u={stroke:"#959EA6",strokeOpacity:0,fill:"#959EA6",cursor:"pointer"},s={stroke:"#434B54",fill:"#fff",cursor:"pointer"};i.registerNode("mind-base",{dy:4,afterDraw:function(e){var t=e.getModel();t.children&&t.children.length>0&&t.collapsed&&this.drawExpandedButton(e)},debugDrawLayoutPoint:function(e){var t=e.getModel();e.getGraphicGroup().addShape("circle",{attrs:{x:t.x,y:t.y,r:5,fill:"red"}})},drawExpandedButton:function(e){var t=e.getKeyShape().getBBox(),n=e.getGraphicGroup().addGroup(),o=n.addShape("path",{attrs:r({path:a.getRectPath(0,0,16,7,3)},u)}),i=o.getBBox(),c=a.getMindNodeSide(e),s=this.getButtonPositon(t,i,c),l={fill:"white",r:1};n.addShape("circle",{attrs:r({},l,{x:4,y:3.5}),capture:!1}),n.addShape("circle",{attrs:r({},l,{x:8,y:3.5}),capture:!1}),n.addShape("circle",{attrs:r({},l,{x:12,y:3.5}),capture:!1}),o.attr("lineAppendWidth",20),n.translate(s.x,s.y),o.isExpandedButton=!0,o.isButton=!0},drawCollapsedButton:function(e){var t=e.getKeyShape().getBBox(),n=e.getGraphicGroup().addShape("path",{attrs:r({path:a.getCollapsedButtonPath()},s)}),o=n.getBBox(),i=a.getMindNodeSide(e),c=this.getButtonPositon(t,o,i);n.translate(c.x,c.y),n.isCollapsedButton=!0,n.isButton=!0},getButtonPositon:function(e,t,n){return"right"===n?{x:e.maxX+2,y:e.maxY-(t.maxY-t.minY)/2}:{x:e.minX-(t.maxX-t.minX)-2,y:e.maxY-(t.maxY-t.minY)/2}},getLabel:function(e){return e.getModel().label},getPadding:function(){return[4,8,4,8]},getSize:function(e){var t=e.getModel(),n=e.getGraphicGroup(),r=t.size;if(t.size){if(a.isArray(r))return r;if(a.isNumber(r))return[r,r]}var o=n.findByClass("label")[0],i=this.getPadding(e),c=o.getBBox();return[c.width+i[1]+i[3],c.height+i[0]+i[2]]},getPath:function(e){var t=this.getSize(e),n=this.getStyle(e);return a.getRectPath(-t[0]/2,-t[1]/2+this.dy,t[0],t[1],n.radius)},drawLabel:function(e){var t=e.getGraphicGroup(),n=this.getLabel(e),r=this.getLabelStyle(e);n||(n=" ");var o=a.mix(!0,{},c,r,{x:0,y:0});a.isObject(n)?a.mix(o,n):o.text=n;var i=t.addShape("text",{class:"label",attrs:o});return this.adjustLabelText(i),this.adjustLabelPosition(e,i),i},adjustLabelText:function(e){var t=e.attr("text"),n=e.getBBox();if(n.maxX-n.minX>400){var r=e.attr("font");t=a.getLabelTextByTextLineWidth(t,r),e.attr("text",t)}},adjustLabelPosition:function(e,t){var n=this.getSize(e),r=this.getPadding(),o=n[0],i=t.getBBox();t.attr({x:-o/2+r[3],y:-i.height/2+this.dy})},getLabelStyle:function(){return{fill:"rgba(38,38,38,0.85)",lineHeight:18,fontSize:12}},getStyle:function(){return{fill:"#ccc",fillOpacity:0,radius:4,lineWidth:2}},getActivedStyle:function(){return{stroke:"#44C0FF",lineWidth:2}},getSelectedStyle:function(){return{stroke:"#1AA7EE",lineWidth:2}},anchor:[[0,1],[1,1]]})},function(e,t,n){n(8).registerNode("mind-first-sub",{dy:0,getPadding:function(){return[6,12,8,12]},getLabelStyle:function(){return{fill:"rgba(38,38,38,0.85)",fontWeight:500,fontSize:14,lineHeight:20}}})},function(e,t,n){n(8).registerNode("mind-second-sub",{dy:0,getPadding:function(){return[8,4,8,4]},getLabelStyle:function(){return{fill:"rgba(38,38,38,0.85)",fontSize:12,lineHeight:20}}})},function(e,t,n){var r=n(8),o=n(10);r.registerNode("mind-root",{adjustLabelPosition:function(e,t){var n=t.getBBox();t.attr({x:-n.width/2,y:-n.height/2-1})},getPath:function(e){var t=this.getSize(e),n=this.getStyle(e);return o.getRectPath(-t[0]/2,-t[1]/2,t[0],t[1],n.radius)},getButtonPositon:function(e,t,n){return"right"===n?{x:e.maxX+2,y:(e.maxY+e.minY)/2-(t.maxY-t.minY)/2}:{x:e.minX-(t.maxX-t.minX)-2,y:(e.maxY+e.minY)/2-(t.maxY-t.minY)/2}},getPadding:function(){return o.toAllPadding([12,24])},getStyle:function(){return{fill:"#587EF7",stroke:"#587EF7",fillOpacity:1,radius:4}},getLabelStyle:function(){return{fontSize:20,fill:"white",lineHeight:28}},drawExpandedButton:function(){},drawCollapsedButton:function(){},panAble:!1,anchor:[[.45,.5],[.55,.5]]},"mind-first-sub")},function(e,t,n){var r=n(8),o=n(10);r.registerNode("mind-placeholder",{afterDraw:function(e){e.getKeyShape().isPlaceholder=!0},getPath:function(e){var t,n=e.getModel().parentModel,r=this.getStyle(e),i=0;return n.hierarchy<=2?t=28:(t=20,i=4),o.getRectPath(-27.5,-t/2+i,55,t,r.radius)},getStyle:function(){return{fill:"#91D5FF",radius:4,lineWidth:3}},drawExpandedButton:function(){},drawCollapsedButton:function(){},anchor:function(){return[[0,1],[1,1]]}})},function(e,t,n){n(8).registerEdge("mind-edge",{getEdetal:function(e){return e.children&&e.children.length>0&&!e.collapsed?2===e.hierarchy?24:18:0},getPath:function(e){var t=e.getPoints(),n=e.getSource(),r=e.getTarget(),o=n.getBBox(),i=r.getBBox(),a=r.getModel(),c=14,u=4;if(2===a.hierarchy&&(c=66,u=30),t[0].y===t[1].y){var s=3===a.hierarchy?24:18,l=this.getEdetal(a);return o.centerX<i.centerX?[["M",t[0].x+s,t[0].y],["L",i.maxX+l,i.maxY]]:[["M",t[0].x+2,t[0].y],["L",i.minX-l,i.maxY]]}if(a.hierarchy>=3){var d=3===a.hierarchy?24:18,f=this.getEdetal(a);if(o.centerX<i.centerX){var h=t[0].x+d;return[["M",t[0].x,t[0].y],["M",h,t[0].y],["C",h+u,t[0].y,i.minX-c,i.maxY,i.minX,i.maxY],["L",i.maxX+f,i.maxY]]}var g=t[0].x-d;return[["M",t[0].x,t[0].y],["M",g,t[0].y],["C",g-u,t[0].y,i.maxX+c,i.maxY,i.maxX,i.maxY],["L",i.minX-f,i.maxY]]}var p=this.getEdetal(a);return o.centerX<i.centerX?[["M",t[0].x,t[0].y],["C",t[0].x+u,t[0].y,i.minX-c,i.maxY,i.minX,i.maxY],["L",i.maxX+p,i.maxY]]:[["M",t[0].x,t[0].y],["C",t[0].x-u,t[0].y,i.maxX+c,i.maxY,i.maxX,i.maxY],["L",i.minX-p,i.maxY]]},getStyle:function(e){var t=e.getTarget(),n=1;if(t){var r=t.getModel();n=r.hierarchy<=3?3:r.hierarchy<=5?2:1}return{stroke:"#959EA6",lineWidth:n}}})},function(e,t,n){function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(8).registerEdge("mind-placeholder-edge",{getOriginShapeObject:function(e){return e.getGraph().getShapeObj("edge",{shape:"mind-edge"})},getPath:function(e){return this.getOriginShapeObject(e).getPath(e)},getStyle:function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({},this.getOriginShapeObject(e).getStyle(e),{stroke:"#91D5FF"})}})},function(e,t,n){var r=n(15),o=n(10);function i(e,t,n){var r=e.getGraph(),o=t.getModel(),i=e.getFirstChildrenBySide("left"),a=i[0]&&r.find(i[0].id);return r.add("node",{id:n,parent:t.id,label:"新建节点",side:o.children.length>2?"left":"right",nth:a?r.getNth(a):void 0})}r.registerCommand("append",{enable:function(e){var t=e.getCurrentPage(),n=t.getSelected();return t.isMind&&1===n.length},getItem:function(e){var t=e.getCurrentPage(),n=t.getGraph();return this.selectedItemId?n.find(this.selectedItemId):t.getSelected()[0]},execute:function(e){var t,n=e.getCurrentPage(),r=n.getGraph(),o=n.getRoot(),a=this.getItem(e),c=a.getModel(),u=c.hierarchy,s=a.getParent();if(a.isRoot)t=i(n,a,this.addItemId);else{var l=r.getNth(a);t=r.add("node",{id:this.addItemId,parent:s.id,side:2===u&&3===o.children.length?"left":c.side,label:"新建节点",nth:"left"===c.side&&2===u?l:l+1})}n.clearSelected(),n.clearActived(),n.setSelected(t,!0),1===this.executeTimes&&(this.selectedItemId=a.id,this.addItemId=t.id,n.beginEditLabel(t))},back:function(e){var t=e.getCurrentPage();t.getGraph().remove(this.addItemId),t.clearSelected(),t.clearActived(),t.setSelected(this.selectedItemId,!0)},shortcutCodes:["Enter"]}),r.registerCommand("appendChild",{enable:function(e){var t=e.getCurrentPage(),n=t.getSelected();return t.isMind&&n.length>0},getItem:function(e){var t=e.getCurrentPage(),n=t.getGraph();return this.selectedItemId?n.find(this.selectedItemId):t.getSelected()[0]},execute:function(e){var t,n=e.getCurrentPage(),r=n.getGraph(),o=this.getItem(e);t=o.isRoot?i(n,o,this.addItemId):r.add("node",{id:this.addItemId,parent:o.id,label:"新建节点"}),n.clearSelected(),n.clearActived(),n.setSelected(t,!0),1===this.executeTimes&&(this.selectedItemId=o.id,this.addItemId=t.id,n.beginEditLabel(t))},back:function(e){var t=e.getCurrentPage();t.getGraph().remove(this.addItemId),t.clearSelected(),t.clearActived(),t.setSelected(this.selectedItemId,!0)},shortcutCodes:["Tab"]}),r.registerCommand("moveMindNode",{enable:function(e){var t=e.getCurrentPage(),n=t.get("panItems");return t.isMind&&n&&n.length>0},execute:function(e){var t=e.getCurrentPage(),n=t.getGraph(),r=this.newParentId,i=this.newNth,a=this.newSide,c=o.clone(this.model);delete c.shape,delete c.side,n.remove(c.id),o.mix(c,{parent:r,nth:i,side:a});var u=n.add("node",c);t.clearSelected(),t.setSelected(u,!0)},back:function(e){var t=e.getCurrentPage(),n=t.getGraph(),r=this.originParentId,i=this.originNth,a=this.originSide,c=o.clone(this.model);delete c.shape,delete c.side,n.remove(c.id),o.mix(c,{parent:r,nth:i,side:a});var u=n.add("node",c);t.clearSelected(),t.setSelected(u,!0)}})},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(6),s=n(9),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).apply(this,arguments))}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,s),n=t,(r=[{key:"getDefaultCfg",value:function(){return{type:"toolbar",container:null}}},{key:"init",value:function(){this._initContainer()}},{key:"_initContainer",value:function(){var e=this.container;if(!e)throw new Error("please set the container for the toolbar !");u.isString(e)&&(e=document.getElementById(e));var t=e.getElementsByClassName("command");this.commands=t}},{key:"getCommandDoms",value:function(){return this.commands}}])&&o(n.prototype,r),l&&o(n,l),t}();e.exports=l},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=n(6),s=n(9),l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i(this,a(t).apply(this,arguments))}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,s),n=t,(r=[{key:"getDefaultCfg",value:function(){return{type:"contextmenu",container:null}}},{key:"init",value:function(){this._initContainer()}},{key:"_initContainer",value:function(){var e=this.container;if(!e)throw new Error("please set the container for the tontextmenu !");u.isString(e)&&(e=document.getElementById(e));var t=e.getElementsByClassName("command");e.style.position="absolute",e.style["z-index"]=2,e.style.top="0px",e.style.left="0px",this.commands=t,this.containerDom=e}},{key:"bindEvent",value:function(){var e=this,t=this.commands;u.each(t,function(t){u.addEventListener(t,"click",function(){-1===t.className.indexOf("disable")&&e.hide()})})}},{key:"switch",value:function(e){var t=this.containerDom.getElementsByClassName("menu");u.each(t,function(t){t.dataset.status===e?t.style.display="block":t.style.display="none"})}},{key:"getCommandDoms",value:function(){return this.commands}},{key:"show",value:function(){var e=this.containerDom;this.editor.getCurrentPage().setSignal("preventWheelPan",!0),e.style.display="block"}},{key:"hide",value:function(){var e=this.containerDom;this.editor.getCurrentPage().setSignal("preventWheelPan",!1),e.style.display="none"}},{key:"move",value:function(e,t){var n=this.containerDom,r=u.getBoundingClientRect(n),o=parseFloat(u.getStyle(n,"top")),i=parseFloat(u.getStyle(n,"left"));n.style.left=i+(e-r.left)+"px",n.style.top=o+(t-r.top)+"px"}}])&&o(n.prototype,r),l&&o(n,l),t}();e.exports=l},function(e,t,n){var r=n(12);n(124),n(127),e.exports=r},function(e,t,n){n(125),n(126)},function(e,t,n){function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i,a,c=n(20),u=c.mouseEnterEdge,s=c.startMove,l=c.mouseLeaveEdge,d=c.mouseMoveEdge,f=c.endMove;n(12).registerBehaviour("bpmnMoveEdgeController",function(e){var t,n=e.getGraph(),o=n.getRootGroup();function c(){e.set("panItemDelegation",void 0),e.set("panItemStartBox",void 0),e.set("panItemStartPoint",void 0),t=void 0}n.behaviourOn("edge:mouseenter",function(t){!i&&t.item&&(a=t.item,u({graph:n,bpmn:e,ev:t,backUpCursor:!0}))}),n.behaviourOn("edge:mousedown",function(e){var t=e.item;s(n,e),i=t}),n.behaviourOn("mouseup",function(){i&&(f({graph:n,item:i}),i=void 0)}),n.behaviourOn("mousemove",function(t){i?d(n,i,t):a&&u({graph:n,bpmn:e,ev:r({},t,{item:a}),backUpCursor:!1})}),n.behaviourOn("edge:mouseleave",function(){i||a&&(l({graph:n,bpmn:e,item:a}),a=void 0)}),n.behaviourOn("node:dragstart",function(n){var r=n.item.getBBox();t=e.getDelegation([r],o),e.set("bpmnNodePanDelegation",t),e.set("bpmnNodePanStartBox",r),e.set("bpmnNodePanStartPoint",{x:n.x,y:n.y}),e.set("bpmnNodePanStartItem",n.item)}),n.behaviourOn("node:dragend",function(t){var r=e.get("bpmnNodePanDelegation"),o=e.get("bpmnNodePanStartPoint"),i=e.get("bpmnNodePanStartItem");i&&i.getEdges().forEach(function(e){n.update(e,{nodeMoved:{item:i.id,start:o,delta:{x:t.x-o.x,y:t.y-o.y}}})}),r.remove(),c()})},["startPanItem","processPanItem","endPanItem"])},function(e,t,n){n(12).registerBehaviour("hoverNodeShowArrowController",function(e){var t,n=e.getGraph(),r=e.get("arrowController"),o=r.long,i=r.thickness;n.on("node:mouseenter",function(a){if(!e.getSignal("panningItem")&&!e.getSignal("dragEdge")){var c=r.topArrow,u=r.bottomArrow,s=r.leftArrow,l=r.rightArrow,d=(t=a.item).getBBox(),f=n.getDomPoint({x:d.centerX,y:d.minY}),h=n.getDomPoint({x:d.minX,y:d.centerY}),g=n.getDomPoint({x:d.centerX,y:d.maxY}),p=n.getDomPoint({x:d.maxX,y:d.centerY});c.css({top:f.y-(o+10)+"px",left:f.x-i/2+"px",transform:"rotate(-90deg)"}),u.css({top:g.y+10+"px",left:g.x-i/2+"px",transform:"rotate(90deg)"}),s.css({top:h.y-i/2+"px",left:h.x-(o+10)+"px",transform:"rotate(180deg)"}),l.css({top:p.y-i/2+"px",left:p.x+10+"px"}),c.setAttribute("anchorIndex",0),u.setAttribute("anchorIndex",2),s.setAttribute("anchorIndex",3),l.setAttribute("anchorIndex",1),e.showArrowController(t)}}),n.behaviourOn("mousemove",function(n){var r=n.x,i=n.y;if(t){var a=t.getBBox(),c=o+10,u=a.minX-c,s=a.minY-c,l=a.maxX+c,d=a.maxY+c;(r<u||i<s||r>l||i>d)&&(e.hideArrowController(),t=void 0)}})})},function(e,t,n){n(128),n(12).registerNode("bpmn-base",{anchor:null})},function(e,t,n){"use strict";n.r(t);var r=n(12),o=n.n(r),i=n(0);function a(e){var t=e.bbox,n=e.shape,r=void 0===n?"ROUNDED_RECT":n,o=e.point,i=e.vertical;i=!!i;var a={true:"x",false:"y"},c={true:"minX",false:"minY"},u={true:"maxX",false:"maxY"};switch(r){case"ROUNDED_RECT":if(o[a[i]]>=t[c[i]]+4&&o[a[i]]<=t[u[i]]-4)return{added:void 0,joint:{x:i?o.x:o.x>t.centerX?t.maxX:t.minX,y:i?o.y>t.centerY?t.maxY:t.minY:o.y}};if(o[a[i]]>=t[c[i]]&&o[a[i]]<t[c[i]]+4)return{added:void 0,joint:{x:i?o.x:o.x>t.centerX?t.maxX-4+Math.sqrt(16-Math.pow(t.minY+4-o.y,2)):t.minX+4-Math.sqrt(16-Math.pow(t.minY+4-o.y,2)),y:i?o.y>t.centerY?t.maxY-4+Math.sqrt(16-Math.pow(t.minX+4-o.x,2)):t.minY+4-Math.sqrt(16-Math.pow(t.minX+4-o.x,2)):o.y}};if(o[a[i]]>=t[u[i]]-4&&o[a[i]]<=t[u[i]])return{added:void 0,joint:{x:i?o.x:o.x>t.centerX?t.maxX-4+Math.sqrt(16-Math.pow(o.y-t.maxY+4,2)):t.minX+4-Math.sqrt(16-Math.pow(o.y-t.maxY+4,2)),y:i?o.y>t.centerY?t.maxY-4+Math.sqrt(16-Math.pow(o.x-t.maxX+4,2)):t.minY+4-Math.sqrt(16-Math.pow(o.x-t.maxX+4,2)):o.y}};break;case"CIRCLE":if(o[a[i]]>=t[c[i]]&&o[a[i]]<=t[u[i]])return{added:void 0,joint:{x:i?o.x:o.x>t.centerX?t.centerX+Math.sqrt(16-Math.pow(t.centerY-o.y)):t.centerX-Math.sqrt(16-Math.pow(t.centerY-o.y)),y:i?o.y>t.centerY?t.centerY+Math.sqrt(16-Math.pow(t.centerX-o.x)):t.centerY-Math.sqrt(16-Math.pow(t.centerX-o.x)):o.y}};break;case"RHOMEBUS":if(o[a[i]]>=t[c[i]]&&o[a[i]]<=t[u[i]])return{added:void 0,joint:{x:i?o.x:o.x>t.centerX?o.y<t.centerY?(o.y-t.minY)*(t.maxX-t.centerX)/(t.centerY-t.minY)+t.centerX:(t.maxY-o.y)*(t.maxX-t.centerX)/(t.maxY-t.centerY)+t.centerX:o.y<t.centerY?t.centerX-(o.y-t.minY)*(t.centerX-t.minX)/(t.centerY-t.minY):t.centerX-(t.maxY-o.y)*(t.centerX-t.minX)/(t.maxY-t.centerY),y:i?o.y>t.centerY?o.x<t.centerX?(o.x-t.minX)*(t.maxY-t.centerY)/(t.centerX-t.minX)+t.centerY:(t.maxX-o.x)*(t.maxY-t.centerY)/(t.maxX-t.centerX)+t.centerY:o.x<t.centerX?t.centerY-(o.x-t.minX)*(t.centerY-t.minY)/(t.centerX-t.minX):t.centerY-(t.maxX-o.x)*(t.centerY-t.minY)/(t.maxX-t.centerX):o.y}};break;case"RECT":default:if(o[a[i]]>=t[c[i]]&&o[a[i]]<=t[u[i]])return{added:void 0,joint:{x:i?o.x:o.x>t.centerX?t.maxX:t.minX,y:i?o.y>t.centerY?t.maxY:t.minY:o.y}}}return i?o.x<t.centerX?{added:{x:o.x,y:t.centerY},joint:{x:t.minX,y:t.centerY}}:{added:{x:o.x,y:t.centerY},joint:{x:t.maxX,y:t.centerY}}:o.y<t.centerY?{added:{x:t.centerX,y:o.y},joint:{x:t.centerX,y:t.minY}}:{added:{x:t.centerX,y:o.y},joint:{x:t.centerX,y:t.maxY}}}var c=n(20);o.a.registerEdge("bpmn-base",{getPath:function(e){var t,n=e.getSource(),r=e.getTarget(),o=e.model;if(o.edgeMoved&&o.lastMouse){var u,s,l,d,f,h=o.controlPoints,g=o.hold.index,p=[{x:h[g].x+o.edgeMoved.x,y:h[g].y+o.edgeMoved.y},{x:h[g+1].x+o.edgeMoved.x,y:h[g+1].y+o.edgeMoved.y}],m=Object(i.j)(p,0);if(n){var y=a({bbox:n.getBBox(),point:m,vertical:o.hold.vertical,shape:n.model.shape});s=y.added,l=y.joint}if(0===g&&n&&(p[0]=l,s&&(p.splice(1,0,s),e.model.hold.index+=1)),r){var v=a({bbox:r.getBBox(),point:m,vertical:o.hold.vertical,shape:r.model.shape});d=v.added,f=v.joint}g===h.length-2&&r&&(s&&0===g?(p[2]=f,d&&p.splice(2,0,d)):(p[1]=f,d&&p.splice(1,0,d))),(u=o.controlPoints).splice.apply(u,[g,2].concat(p)),n&&Object(i.l)(l,h,o.hold.index)&&(h.splice(0,o.hold.index),o.hold.index=0,h[0]=l),r&&Object(i.l)(f,h,o.hold.index)&&(o.controlPoints.splice(o.hold.index+1),h[o.hold.index+1]=f),t=Object(c.mergeLine)(e,g),function(e,t,n){var r=e.controlPoints;if(t){var o=Object(i.f)(r[0],t.getBBox()),a=o.point,c=o.index;e.sourceJoint={index:c,delta:{x:r[0].x-a.x,y:r[0].y-a.y}}}if(n){var u=Object(i.f)(r[r.length-1],n.getBBox()),s=u.point,l=u.index;e.targetJoint={index:l,delta:{x:r[r.length-1].x-s.x,y:r[r.length-1].y-s.y}}}}(o,n,r),o.lastMouse={x:o.lastMouse.x+o.edgeMoved.x,y:o.lastMouse.y+o.edgeMoved.y}}else if(o.modifiedByMouse&&o.nodeMoved)!function(e,t,n){if(e.nodeMoved){var r=e.nodeMoved.item===t.id,o=e.nodeMoved.item===n.id,a=r?t.getBBox():n.getBBox(),c=e.nodeMoved.delta,u={minX:a.minX-c.x,maxX:a.maxX-c.x,centerX:a.centerX-c.x,minY:a.minY-c.y,maxY:a.maxY-c.y,centerY:a.centerY+c.y,height:a.height,width:a.width},s=e.controlPoints;if(2===s.length){var l=Object(i.d)(t,n),d=l.sourcePoint,f=l.targetPoint;e.sourceJoint&&d.index===e.sourceJoint.index&&(d.point=Object(i.c)(t.getBBox())[d.index],d.point.x+=e.sourceJoint.delta.x,d.point.y+=e.sourceJoint.delta.y),e.targetJoint&&f.index===e.targetJoint.index&&(f.point=Object(i.c)(n.getBBox())[f.index],f.point.x+=e.targetJoint.delta.x,f.point.y+=e.targetJoint.delta.y);var h=Object(i.h)(d,f);e.controlPoints=h}else{var g;g=r?1:s.length-3;var p=Object(i.i)(s,g),m=Object(i.a)(u,s,g),y=Object(i.a)(a,s,g),v=r?e.sourceJoint:e.targetJoint;if(m===y){var b=Object(i.c)(a)[v.index],x={x:b.x+v.delta.x,y:b.y+v.delta.y},S=Object(i.g)(x,s,g);r?e.controlPoints.splice(0,2,x,S):o&&e.controlPoints.splice(g+1,2,S,x)}else if(0===y)if(3===s.length){var w=Object(i.d)(t,n),O=w.sourcePoint,P=w.targetPoint,_=Object(i.h)(O,P);e.controlPoints=_}else{var C,E=Object(i.j)(s,g);C=p?E.y<a.centerY?0:2:E.x<a.centerX?3:1;var k=Object(i.c)(a)[C];if(r){var A=Object(i.g)(k,s,g+1);e.controlPoints.splice(0,3,k,A),e.sourceJoint={index:C,delta:{x:0,y:0}}}else if(o){var M=Object(i.g)(k,s,g-1);e.controlPoints.splice(g,3,M,k),e.targetJoint={index:C,delta:{x:0,y:0}}}}else{var B=Object(i.k)(v.index),j=Object(i.c)(a)[B],X=Object(i.g)(j,s,g);r?(e.controlPoints.splice(0,2,j,X),e.sourceJoint={index:B,delta:{x:0,y:0}}):o&&(e.controlPoints.splice(g+1,2,X,j),e.targetJoint={index:B,delta:{x:0,y:0}})}}}}(o,n,r);else if(!o.modifiedByMouse){var b=o.anchorIndex,x=Object(i.d)(n,r,!o.initialed&&b),S=x.sourcePoint,w=x.targetPoint,O=Object(i.h)(S,w);e.model.controlPoints=O}return o.nodeMoved=void 0,{path:this.getPathByPoints({points:o.controlPoints}),helpLine:t}},draw:function(e){var t=e.getGraphicGroup(),n=e.model,r=this.getPath(e),o=r.path,a=r.helpLine,c=this.getStyle(e),u=Object(i.b)(t,o,c);if(null!=n.hold){var s=Object(i.j)(n.controlPoints,n.hold.index);t.addShape("circle",{attrs:{x:s.x,y:s.y,r:3,fill:"rgb(0,182,239)"}})}return a&&(n.helpLine=a,n.helpLineTime=(new Date).getTime()),!a&&(new Date).getTime()-n.helpLineTime>=150&&(n.helpLine=void 0,n.helpLineTime=void 0),n.helpLine&&t.addShape("path",{attrs:{path:[["M",n.helpLine[0].x,n.helpLine[0].y],["L",n.helpLine[1].x,n.helpLine[1].y]],lineAppendWidth:8,lineWidth:1,strokeOpacity:.92,stroke:"rgba(255,139,48)"}}),u}})}])});

/***/ }),

/***/ "6a1d":
/***/ (function(module, exports, __webpack_require__) {

var isArray = __webpack_require__("f868"),
    isKey = __webpack_require__("83ba"),
    stringToPath = __webpack_require__("91c2"),
    toString = __webpack_require__("700f");

/**
 * Casts `value` to a path array if it's not one.
 *
 * @private
 * @param {*} value The value to inspect.
 * @param {Object} [object] The object to query keys on.
 * @returns {Array} Returns the cast property path array.
 */
function castPath(value, object) {
  if (isArray(value)) {
    return value;
  }
  return isKey(value, object) ? [value] : stringToPath(toString(value));
}

module.exports = castPath;


/***/ }),

/***/ "6adc":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var $map = __webpack_require__("308c").map;
var arrayMethodHasSpeciesSupport = __webpack_require__("4086");

var HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');

// `Array.prototype.map` method
// https://tc39.es/ecma262/#sec-array.prototype.map
// with adding support of @@species
$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {
  map: function map(callbackfn /* , thisArg */) {
    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
  }
});


/***/ }),

/***/ "6b1d":
/***/ (function(module, exports, __webpack_require__) {

var toString = __webpack_require__("700f");

/** Used to generate unique IDs. */
var idCounter = 0;

/**
 * Generates a unique ID. If `prefix` is given, the ID is appended to it.
 *
 * @static
 * @since 0.1.0
 * @memberOf _
 * @category Util
 * @param {string} [prefix=''] The value to prefix the ID with.
 * @returns {string} Returns the unique ID.
 * @example
 *
 * _.uniqueId('contact_');
 * // => 'contact_104'
 *
 * _.uniqueId();
 * // => '105'
 */
function uniqueId(prefix) {
  var id = ++idCounter;
  return toString(prefix) + id;
}

module.exports = uniqueId;


/***/ }),

/***/ "6c25":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var isObject = __webpack_require__("d2cb");

var document = globalThis.document;
// typeof document.createElement is 'object' in old IE
var EXISTS = isObject(document) && isObject(document.createElement);

module.exports = function (it) {
  return EXISTS ? document.createElement(it) : {};
};


/***/ }),

/***/ "6cb2":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var g_base_1 = __webpack_require__("ae4c");
var svg_1 = __webpack_require__("6865");
var dom_1 = __webpack_require__("7431");
var draw_1 = __webpack_require__("8237");
var constant_1 = __webpack_require__("7a93");
var Shape = __webpack_require__("ddd9");
var group_1 = __webpack_require__("de9a");
var g_base_2 = __webpack_require__("ae4c");
var ShapeBase = /** @class */ (function (_super) {
    tslib_1.__extends(ShapeBase, _super);
    function ShapeBase() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'svg';
        _this.canFill = false;
        _this.canStroke = false;
        return _this;
    }
    ShapeBase.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        // 设置默认值
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 });
    };
    // 覆盖基类的 afterAttrsChange 方法
    ShapeBase.prototype.afterAttrsChange = function (targetAttrs) {
        _super.prototype.afterAttrsChange.call(this, targetAttrs);
        var canvas = this.get('canvas');
        // 只有挂载到画布下，才对元素进行实际渲染
        if (canvas && canvas.get('autoDraw')) {
            var context = canvas.get('context');
            this.draw(context, targetAttrs);
        }
    };
    ShapeBase.prototype.getShapeBase = function () {
        return Shape;
    };
    ShapeBase.prototype.getGroupBase = function () {
        return group_1.default;
    };
    /**
     * 一些方法调用会引起画布变化
     * @param {ChangeType} changeType 改变的类型
     */
    ShapeBase.prototype.onCanvasChange = function (changeType) {
        draw_1.refreshElement(this, changeType);
    };
    ShapeBase.prototype.calculateBBox = function () {
        var el = this.get('el');
        var bbox = null;
        // 包围盒计算依赖于绘制，如果还没有生成对应的 Dom 元素，则包围盒的长宽均为 0
        if (el) {
            bbox = el.getBBox();
        }
        else {
            var bboxMethod = g_base_2.getBBoxMethod(this.get('type'));
            if (bboxMethod) {
                bbox = bboxMethod(this);
            }
        }
        if (bbox) {
            var x = bbox.x, y = bbox.y, width = bbox.width, height = bbox.height;
            var lineWidth = this.getHitLineWidth();
            var halfWidth = lineWidth / 2;
            var minX = x - halfWidth;
            var minY = y - halfWidth;
            var maxX = x + width + halfWidth;
            var maxY = y + height + halfWidth;
            return {
                x: minX,
                y: minY,
                minX: minX,
                minY: minY,
                maxX: maxX,
                maxY: maxY,
                width: width + lineWidth,
                height: height + lineWidth,
            };
        }
        return {
            x: 0,
            y: 0,
            minX: 0,
            minY: 0,
            maxX: 0,
            maxY: 0,
            width: 0,
            height: 0,
        };
    };
    ShapeBase.prototype.isFill = function () {
        var _a = this.attr(), fill = _a.fill, fillStyle = _a.fillStyle;
        return (fill || fillStyle || this.isClipShape()) && this.canFill;
    };
    ShapeBase.prototype.isStroke = function () {
        var _a = this.attr(), stroke = _a.stroke, strokeStyle = _a.strokeStyle;
        return (stroke || strokeStyle) && this.canStroke;
    };
    ShapeBase.prototype.draw = function (context, targetAttrs) {
        var el = this.get('el');
        if (this.get('destroyed')) {
            if (el) {
                el.parentNode.removeChild(el);
            }
        }
        else {
            if (!el) {
                dom_1.createDom(this);
            }
            svg_1.setClip(this, context);
            this.createPath(context, targetAttrs);
            this.shadow(context, targetAttrs);
            this.strokeAndFill(context, targetAttrs);
            this.transform(targetAttrs);
        }
    };
    /**
     * @protected
     * 绘制图形的路径
     * @param {Defs} context 上下文
     * @param {ShapeAttrs} targetAttrs 渲染的目标属性
     */
    ShapeBase.prototype.createPath = function (context, targetAttrs) { };
    // stroke and fill
    ShapeBase.prototype.strokeAndFill = function (context, targetAttrs) {
        var attrs = targetAttrs || this.attr();
        var fill = attrs.fill, fillStyle = attrs.fillStyle, stroke = attrs.stroke, strokeStyle = attrs.strokeStyle, fillOpacity = attrs.fillOpacity, strokeOpacity = attrs.strokeOpacity, lineWidth = attrs.lineWidth;
        var el = this.get('el');
        if (this.canFill) {
            // 初次渲染和更新渲染的逻辑有所不同: 初次渲染值为空时，需要设置为 none，否则就会是黑色，而更新渲染则不需要
            if (!targetAttrs) {
                this._setColor(context, 'fill', fill || fillStyle);
            }
            else if ('fill' in attrs) {
                this._setColor(context, 'fill', fill);
            }
            else if ('fillStyle' in attrs) {
                // compatible with fillStyle
                this._setColor(context, 'fill', fillStyle);
            }
            if (fillOpacity) {
                el.setAttribute(constant_1.SVG_ATTR_MAP['fillOpacity'], fillOpacity);
            }
        }
        if (this.canStroke && lineWidth > 0) {
            if (!targetAttrs) {
                this._setColor(context, 'stroke', stroke || strokeStyle);
            }
            else if ('stroke' in attrs) {
                this._setColor(context, 'stroke', stroke);
            }
            else if ('strokeStyle' in attrs) {
                // compatible with strokeStyle
                this._setColor(context, 'stroke', strokeStyle);
            }
            if (strokeOpacity) {
                el.setAttribute(constant_1.SVG_ATTR_MAP['strokeOpacity'], strokeOpacity);
            }
            if (lineWidth) {
                el.setAttribute(constant_1.SVG_ATTR_MAP['lineWidth'], lineWidth);
            }
        }
    };
    ShapeBase.prototype._setColor = function (context, attr, value) {
        var el = this.get('el');
        if (!value) {
            // need to set `none` to avoid default value
            el.setAttribute(constant_1.SVG_ATTR_MAP[attr], 'none');
            return;
        }
        value = value.trim();
        if (/^[r,R,L,l]{1}[\s]*\(/.test(value)) {
            var id = context.find('gradient', value);
            if (!id) {
                id = context.addGradient(value);
            }
            el.setAttribute(constant_1.SVG_ATTR_MAP[attr], "url(#" + id + ")");
        }
        else if (/^[p,P]{1}[\s]*\(/.test(value)) {
            var id = context.find('pattern', value);
            if (!id) {
                id = context.addPattern(value);
            }
            el.setAttribute(constant_1.SVG_ATTR_MAP[attr], "url(#" + id + ")");
        }
        else {
            el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
        }
    };
    ShapeBase.prototype.shadow = function (context, targetAttrs) {
        var attrs = this.attr();
        var _a = targetAttrs || attrs, shadowOffsetX = _a.shadowOffsetX, shadowOffsetY = _a.shadowOffsetY, shadowBlur = _a.shadowBlur, shadowColor = _a.shadowColor;
        if (shadowOffsetX || shadowOffsetY || shadowBlur || shadowColor) {
            svg_1.setShadow(this, context);
        }
    };
    ShapeBase.prototype.transform = function (targetAttrs) {
        var attrs = this.attr();
        var matrix = (targetAttrs || attrs).matrix;
        if (matrix) {
            svg_1.setTransform(this);
        }
    };
    ShapeBase.prototype.isInShape = function (refX, refY) {
        return this.isPointInPath(refX, refY);
    };
    ShapeBase.prototype.isPointInPath = function (refX, refY) {
        var el = this.get('el');
        var canvas = this.get('canvas');
        var bbox = canvas.get('el').getBoundingClientRect();
        var clientX = refX + bbox.left;
        var clientY = refY + bbox.top;
        var element = document.elementFromPoint(clientX, clientY);
        if (element && element.isEqualNode(el)) {
            return true;
        }
        return false;
    };
    /**
     * 获取线拾取的宽度
     * @returns {number} 线的拾取宽度
     */
    ShapeBase.prototype.getHitLineWidth = function () {
        var _a = this.attrs, lineWidth = _a.lineWidth, lineAppendWidth = _a.lineAppendWidth;
        if (this.isStroke()) {
            return lineWidth + lineAppendWidth;
        }
        return 0;
    };
    return ShapeBase;
}(g_base_1.AbstractShape));
exports.default = ShapeBase;
//# sourceMappingURL=base.js.map

/***/ }),

/***/ "6d77":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, "contains", function() { return /* reexport */ esm_contains; });
__webpack_require__.d(__webpack_exports__, "includes", function() { return /* reexport */ esm_contains; });
__webpack_require__.d(__webpack_exports__, "difference", function() { return /* reexport */ esm_difference; });
__webpack_require__.d(__webpack_exports__, "find", function() { return /* reexport */ esm_find; });
__webpack_require__.d(__webpack_exports__, "findIndex", function() { return /* reexport */ find_index; });
__webpack_require__.d(__webpack_exports__, "firstValue", function() { return /* reexport */ first_value; });
__webpack_require__.d(__webpack_exports__, "flatten", function() { return /* reexport */ esm_flatten; });
__webpack_require__.d(__webpack_exports__, "flattenDeep", function() { return /* reexport */ flatten_deep; });
__webpack_require__.d(__webpack_exports__, "getRange", function() { return /* reexport */ get_range; });
__webpack_require__.d(__webpack_exports__, "pull", function() { return /* reexport */ esm_pull; });
__webpack_require__.d(__webpack_exports__, "pullAt", function() { return /* reexport */ pull_at; });
__webpack_require__.d(__webpack_exports__, "reduce", function() { return /* reexport */ esm_reduce; });
__webpack_require__.d(__webpack_exports__, "remove", function() { return /* reexport */ esm_remove; });
__webpack_require__.d(__webpack_exports__, "sortBy", function() { return /* reexport */ sort_by; });
__webpack_require__.d(__webpack_exports__, "union", function() { return /* reexport */ esm_union; });
__webpack_require__.d(__webpack_exports__, "uniq", function() { return /* reexport */ uniq; });
__webpack_require__.d(__webpack_exports__, "valuesOfKey", function() { return /* reexport */ values_of_key; });
__webpack_require__.d(__webpack_exports__, "head", function() { return /* reexport */ head; });
__webpack_require__.d(__webpack_exports__, "last", function() { return /* reexport */ last_last; });
__webpack_require__.d(__webpack_exports__, "startsWith", function() { return /* reexport */ starts_with; });
__webpack_require__.d(__webpack_exports__, "endsWith", function() { return /* reexport */ ends_with; });
__webpack_require__.d(__webpack_exports__, "filter", function() { return /* reexport */ esm_filter; });
__webpack_require__.d(__webpack_exports__, "every", function() { return /* reexport */ esm_every; });
__webpack_require__.d(__webpack_exports__, "some", function() { return /* reexport */ esm_some; });
__webpack_require__.d(__webpack_exports__, "group", function() { return /* reexport */ group; });
__webpack_require__.d(__webpack_exports__, "groupBy", function() { return /* reexport */ group_by; });
__webpack_require__.d(__webpack_exports__, "groupToMap", function() { return /* reexport */ groupToMap; });
__webpack_require__.d(__webpack_exports__, "getWrapBehavior", function() { return /* reexport */ get_wrap_behavior; });
__webpack_require__.d(__webpack_exports__, "wrapBehavior", function() { return /* reexport */ wrap_behavior; });
__webpack_require__.d(__webpack_exports__, "number2color", function() { return /* reexport */ number2color; });
__webpack_require__.d(__webpack_exports__, "parseRadius", function() { return /* reexport */ parse_radius; });
__webpack_require__.d(__webpack_exports__, "clamp", function() { return /* reexport */ esm_clamp; });
__webpack_require__.d(__webpack_exports__, "fixedBase", function() { return /* reexport */ fixed_base; });
__webpack_require__.d(__webpack_exports__, "isDecimal", function() { return /* reexport */ is_decimal; });
__webpack_require__.d(__webpack_exports__, "isEven", function() { return /* reexport */ is_even; });
__webpack_require__.d(__webpack_exports__, "isInteger", function() { return /* reexport */ is_integer; });
__webpack_require__.d(__webpack_exports__, "isNegative", function() { return /* reexport */ is_negative; });
__webpack_require__.d(__webpack_exports__, "isNumberEqual", function() { return /* reexport */ isNumberEqual; });
__webpack_require__.d(__webpack_exports__, "isOdd", function() { return /* reexport */ is_odd; });
__webpack_require__.d(__webpack_exports__, "isPositive", function() { return /* reexport */ is_positive; });
__webpack_require__.d(__webpack_exports__, "max", function() { return /* reexport */ esm_max; });
__webpack_require__.d(__webpack_exports__, "maxBy", function() { return /* reexport */ max_by; });
__webpack_require__.d(__webpack_exports__, "min", function() { return /* reexport */ esm_min; });
__webpack_require__.d(__webpack_exports__, "minBy", function() { return /* reexport */ min_by; });
__webpack_require__.d(__webpack_exports__, "mod", function() { return /* reexport */ esm_mod; });
__webpack_require__.d(__webpack_exports__, "toDegree", function() { return /* reexport */ to_degree; });
__webpack_require__.d(__webpack_exports__, "toInteger", function() { return /* reexport */ to_integer; });
__webpack_require__.d(__webpack_exports__, "toRadian", function() { return /* reexport */ to_radian; });
__webpack_require__.d(__webpack_exports__, "forIn", function() { return /* reexport */ for_in; });
__webpack_require__.d(__webpack_exports__, "has", function() { return /* reexport */ has; });
__webpack_require__.d(__webpack_exports__, "hasKey", function() { return /* reexport */ has_key; });
__webpack_require__.d(__webpack_exports__, "hasValue", function() { return /* reexport */ has_value; });
__webpack_require__.d(__webpack_exports__, "keys", function() { return /* reexport */ esm_keys; });
__webpack_require__.d(__webpack_exports__, "isMatch", function() { return /* reexport */ is_match; });
__webpack_require__.d(__webpack_exports__, "values", function() { return /* reexport */ esm_values; });
__webpack_require__.d(__webpack_exports__, "lowerCase", function() { return /* reexport */ lower_case; });
__webpack_require__.d(__webpack_exports__, "lowerFirst", function() { return /* reexport */ lower_first; });
__webpack_require__.d(__webpack_exports__, "substitute", function() { return /* reexport */ esm_substitute; });
__webpack_require__.d(__webpack_exports__, "upperCase", function() { return /* reexport */ upper_case; });
__webpack_require__.d(__webpack_exports__, "upperFirst", function() { return /* reexport */ upper_first; });
__webpack_require__.d(__webpack_exports__, "getType", function() { return /* reexport */ get_type; });
__webpack_require__.d(__webpack_exports__, "isArguments", function() { return /* reexport */ is_arguments; });
__webpack_require__.d(__webpack_exports__, "isArray", function() { return /* reexport */ is_array; });
__webpack_require__.d(__webpack_exports__, "isArrayLike", function() { return /* reexport */ is_array_like; });
__webpack_require__.d(__webpack_exports__, "isBoolean", function() { return /* reexport */ is_boolean; });
__webpack_require__.d(__webpack_exports__, "isDate", function() { return /* reexport */ is_date; });
__webpack_require__.d(__webpack_exports__, "isError", function() { return /* reexport */ is_error; });
__webpack_require__.d(__webpack_exports__, "isFunction", function() { return /* reexport */ is_function; });
__webpack_require__.d(__webpack_exports__, "isFinite", function() { return /* reexport */ is_finite; });
__webpack_require__.d(__webpack_exports__, "isNil", function() { return /* reexport */ is_nil; });
__webpack_require__.d(__webpack_exports__, "isNull", function() { return /* reexport */ is_null; });
__webpack_require__.d(__webpack_exports__, "isNumber", function() { return /* reexport */ is_number; });
__webpack_require__.d(__webpack_exports__, "isObject", function() { return /* reexport */ is_object; });
__webpack_require__.d(__webpack_exports__, "isObjectLike", function() { return /* reexport */ is_object_like; });
__webpack_require__.d(__webpack_exports__, "isPlainObject", function() { return /* reexport */ is_plain_object; });
__webpack_require__.d(__webpack_exports__, "isPrototype", function() { return /* reexport */ is_prototype; });
__webpack_require__.d(__webpack_exports__, "isRegExp", function() { return /* reexport */ is_reg_exp; });
__webpack_require__.d(__webpack_exports__, "isString", function() { return /* reexport */ is_string; });
__webpack_require__.d(__webpack_exports__, "isType", function() { return /* reexport */ is_type; });
__webpack_require__.d(__webpack_exports__, "isUndefined", function() { return /* reexport */ is_undefined; });
__webpack_require__.d(__webpack_exports__, "isElement", function() { return /* reexport */ is_element; });
__webpack_require__.d(__webpack_exports__, "requestAnimationFrame", function() { return /* reexport */ requestAnimationFrame; });
__webpack_require__.d(__webpack_exports__, "clearAnimationFrame", function() { return /* reexport */ cancelAnimationFrame; });
__webpack_require__.d(__webpack_exports__, "augment", function() { return /* reexport */ esm_augment; });
__webpack_require__.d(__webpack_exports__, "clone", function() { return /* reexport */ esm_clone; });
__webpack_require__.d(__webpack_exports__, "debounce", function() { return /* reexport */ esm_debounce; });
__webpack_require__.d(__webpack_exports__, "memoize", function() { return /* reexport */ memoize; });
__webpack_require__.d(__webpack_exports__, "deepMix", function() { return /* reexport */ deep_mix; });
__webpack_require__.d(__webpack_exports__, "each", function() { return /* reexport */ esm_each; });
__webpack_require__.d(__webpack_exports__, "extend", function() { return /* reexport */ esm_extend; });
__webpack_require__.d(__webpack_exports__, "indexOf", function() { return /* reexport */ index_of; });
__webpack_require__.d(__webpack_exports__, "isEmpty", function() { return /* reexport */ is_empty; });
__webpack_require__.d(__webpack_exports__, "isEqual", function() { return /* reexport */ is_equal; });
__webpack_require__.d(__webpack_exports__, "isEqualWith", function() { return /* reexport */ is_equal_with; });
__webpack_require__.d(__webpack_exports__, "map", function() { return /* reexport */ esm_map; });
__webpack_require__.d(__webpack_exports__, "mapValues", function() { return /* reexport */ map_values; });
__webpack_require__.d(__webpack_exports__, "mix", function() { return /* reexport */ mix; });
__webpack_require__.d(__webpack_exports__, "assign", function() { return /* reexport */ mix; });
__webpack_require__.d(__webpack_exports__, "get", function() { return /* reexport */ get; });
__webpack_require__.d(__webpack_exports__, "set", function() { return /* reexport */ set; });
__webpack_require__.d(__webpack_exports__, "pick", function() { return /* reexport */ pick; });
__webpack_require__.d(__webpack_exports__, "omit", function() { return /* reexport */ omit; });
__webpack_require__.d(__webpack_exports__, "throttle", function() { return /* reexport */ throttle; });
__webpack_require__.d(__webpack_exports__, "toArray", function() { return /* reexport */ to_array; });
__webpack_require__.d(__webpack_exports__, "toString", function() { return /* reexport */ to_string; });
__webpack_require__.d(__webpack_exports__, "uniqueId", function() { return /* reexport */ unique_id; });
__webpack_require__.d(__webpack_exports__, "noop", function() { return /* reexport */ noop; });
__webpack_require__.d(__webpack_exports__, "identity", function() { return /* reexport */ esm_identity; });
__webpack_require__.d(__webpack_exports__, "size", function() { return /* reexport */ size; });
__webpack_require__.d(__webpack_exports__, "measureTextWidth", function() { return /* reexport */ measure_text_width; });
__webpack_require__.d(__webpack_exports__, "getEllipsisText", function() { return /* reexport */ get_ellipsis_text; });
__webpack_require__.d(__webpack_exports__, "Cache", function() { return /* reexport */ cache; });

// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-array-like.js
var isArrayLike = function (value) {
    /**
     * isArrayLike([1, 2, 3]) => true
     * isArrayLike(document.body.children) => true
     * isArrayLike('abc') => true
     * isArrayLike(Function) => false
     */
    return value !== null && typeof value !== 'function' && isFinite(value.length);
};
/* harmony default export */ var is_array_like = (isArrayLike);
//# sourceMappingURL=is-array-like.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/contains.js

var contains = function (arr, value) {
    if (!is_array_like(arr)) {
        return false;
    }
    return arr.indexOf(value) > -1;
};
/* harmony default export */ var esm_contains = (contains);
//# sourceMappingURL=contains.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/filter.js

var filter = function (arr, func) {
    if (!is_array_like(arr)) {
        return arr;
    }
    var result = [];
    for (var index = 0; index < arr.length; index++) {
        var value = arr[index];
        if (func(value, index)) {
            result.push(value);
        }
    }
    return result;
};
/* harmony default export */ var esm_filter = (filter);
//# sourceMappingURL=filter.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/difference.js


/**
 * Flattens `array` a single level deep.
 *
 * @param {Array} arr The array to inspect.
 * @param {Array} values The values to exclude.
 * @return {Array} Returns the new array of filtered values.
 * @example
 * difference([2, 1], [2, 3]);  // => [1]
 */
var difference = function (arr, values) {
    if (values === void 0) { values = []; }
    return esm_filter(arr, function (value) { return !esm_contains(values, value); });
};
/* harmony default export */ var esm_difference = (difference);
//# sourceMappingURL=difference.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-type.js
var is_type_toString = {}.toString;
var isType = function (value, type) { return is_type_toString.call(value) === '[object ' + type + ']'; };
/* harmony default export */ var is_type = (isType);
//# sourceMappingURL=is-type.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-function.js
/**
 * 是否为函数
 * @param  {*} fn 对象
 * @return {Boolean}  是否函数
 */

/* harmony default export */ var is_function = (function (value) {
    return is_type(value, 'Function');
});
//# sourceMappingURL=is-function.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-nil.js
// isFinite,
var isNil = function (value) {
    /**
     * isNil(null) => true
     * isNil() => true
     */
    return value === null || value === undefined;
};
/* harmony default export */ var is_nil = (isNil);
//# sourceMappingURL=is-nil.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-array.js

/* harmony default export */ var is_array = (function (value) {
    return Array.isArray ?
        Array.isArray(value) :
        is_type(value, 'Array');
});
//# sourceMappingURL=is-array.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-object.js
/* harmony default export */ var is_object = (function (value) {
    /**
     * isObject({}) => true
     * isObject([1, 2, 3]) => true
     * isObject(Function) => true
     * isObject(null) => false
     */
    var type = typeof value;
    return value !== null && type === 'object' || type === 'function';
});
//# sourceMappingURL=is-object.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/each.js


function each(elements, func) {
    if (!elements) {
        return;
    }
    var rst;
    if (is_array(elements)) {
        for (var i = 0, len = elements.length; i < len; i++) {
            rst = func(elements[i], i);
            if (rst === false) {
                break;
            }
        }
    }
    else if (is_object(elements)) {
        for (var k in elements) {
            if (elements.hasOwnProperty(k)) {
                rst = func(elements[k], k);
                if (rst === false) {
                    break;
                }
            }
        }
    }
}
/* harmony default export */ var esm_each = (each);
//# sourceMappingURL=each.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/keys.js


var keys_keys = Object.keys ? function (obj) { return Object.keys(obj); } : function (obj) {
    var result = [];
    esm_each(obj, function (value, key) {
        if (!(is_function(obj) && key === 'prototype')) {
            result.push(key);
        }
    });
    return result;
};
/* harmony default export */ var esm_keys = (keys_keys);
//# sourceMappingURL=keys.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-match.js


function isMatch(obj, attrs) {
    var _keys = esm_keys(attrs);
    var length = _keys.length;
    if (is_nil(obj))
        return !length;
    for (var i = 0; i < length; i += 1) {
        var key = _keys[i];
        if (attrs[key] !== obj[key] || !(key in obj)) {
            return false;
        }
    }
    return true;
}
/* harmony default export */ var is_match = (isMatch);
//# sourceMappingURL=is-match.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-object-like.js
var isObjectLike = function (value) {
    /**
     * isObjectLike({}) => true
     * isObjectLike([1, 2, 3]) => true
     * isObjectLike(Function) => false
     * isObjectLike(null) => false
     */
    return typeof value === 'object' && value !== null;
};
/* harmony default export */ var is_object_like = (isObjectLike);
//# sourceMappingURL=is-object-like.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-plain-object.js


var isPlainObject = function (value) {
    /**
     * isObjectLike(new Foo) => false
     * isObjectLike([1, 2, 3]) => false
     * isObjectLike({ x: 0, y: 0 }) => true
     * isObjectLike(Object.create(null)) => true
     */
    if (!is_object_like(value) || !is_type(value, 'Object')) {
        return false;
    }
    if (Object.getPrototypeOf(value) === null) {
        return true;
    }
    var proto = value;
    while (Object.getPrototypeOf(proto) !== null) {
        proto = Object.getPrototypeOf(proto);
    }
    return Object.getPrototypeOf(value) === proto;
};
/* harmony default export */ var is_plain_object = (isPlainObject);
//# sourceMappingURL=is-plain-object.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/find.js




function find(arr, predicate) {
    if (!is_array(arr))
        return null;
    var _predicate;
    if (is_function(predicate)) {
        _predicate = predicate;
    }
    if (is_plain_object(predicate)) {
        _predicate = function (a) { return is_match(a, predicate); };
    }
    if (_predicate) {
        for (var i = 0; i < arr.length; i += 1) {
            if (_predicate(arr[i])) {
                return arr[i];
            }
        }
    }
    return null;
}
/* harmony default export */ var esm_find = (find);
//# sourceMappingURL=find.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/find-index.js
function findIndex(arr, predicate, fromIndex) {
    if (fromIndex === void 0) { fromIndex = 0; }
    for (var i = fromIndex; i < arr.length; i++) {
        if (predicate(arr[i], i)) {
            // 找到终止循环
            return i;
        }
    }
    return -1;
}
/* harmony default export */ var find_index = (findIndex);
//# sourceMappingURL=find-index.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/first-value.js


var firstValue = function (data, name) {
    var rst = null;
    for (var i = 0; i < data.length; i++) {
        var obj = data[i];
        var value = obj[name];
        if (!is_nil(value)) {
            if (is_array(value)) {
                rst = value[0]; // todo 这里是否应该使用递归，调用 firstValue @绝云
            }
            else {
                rst = value;
            }
            break;
        }
    }
    return rst;
};
/* harmony default export */ var first_value = (firstValue);
//# sourceMappingURL=first-value.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/flatten.js

/**
 * Flattens `array` a single level deep.
 *
 * @param {Array} arr The array to flatten.
 * @return {Array} Returns the new flattened array.
 * @example
 *
 * flatten([1, [2, [3, [4]], 5]]);  // => [1, 2, [3, [4]], 5]
 */
var flatten = function (arr) {
    if (!is_array(arr)) {
        return [];
    }
    var rst = [];
    for (var i = 0; i < arr.length; i++) {
        rst = rst.concat(arr[i]);
    }
    return rst;
};
/* harmony default export */ var esm_flatten = (flatten);
//# sourceMappingURL=flatten.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/flatten-deep.js

/**
 * Flattens `array` a single level deep.
 *
 * @param {Array} arr The array to flatten.
 * @param {Array} result The array to return.
 * @return {Array} Returns the new flattened array.
 * @example
 *
 * flattenDeep([1, [2, [3, [4]], 5]]);  // => [1, 2, 3, 4, 5]
 */
var flattenDeep = function (arr, result) {
    if (result === void 0) { result = []; }
    if (!is_array(arr)) {
        result.push(arr);
    }
    else {
        for (var i = 0; i < arr.length; i += 1) {
            flattenDeep(arr[i], result);
        }
    }
    return result;
};
/* harmony default export */ var flatten_deep = (flattenDeep);
//# sourceMappingURL=flatten-deep.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/max.js

/**
 * @param {Array} arr The array to iterate over.
 * @return {*} Returns the maximum value.
 * @example
 *
 * max([1, 2]);
 * // => 2
 *
 * max([]);
 * // => undefined
 *
 * const data = new Array(1250010).fill(1).map((d,idx) => idx);
 *
 * max(data);
 * // => 1250010
 * // Math.max(...data) will encounter "Maximum call stack size exceeded" error
 */
/* harmony default export */ var esm_max = (function (arr) {
    if (!is_array(arr)) {
        return undefined;
    }
    return arr.reduce(function (prev, curr) {
        return Math.max(prev, curr);
    }, arr[0]);
});
//# sourceMappingURL=max.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/min.js

/**
 * @param {Array} arr The array to iterate over.
 * @return {*} Returns the minimum value.
 * @example
 *
 * min([1, 2]);
 * // => 1
 *
 * min([]);
 * // => undefined
 *
 * const data = new Array(1250010).fill(1).map((d,idx) => idx);
 *
 * min(data);
 * // => 1250010
 * // Math.min(...data) will encounter "Maximum call stack size exceeded" error
 */
/* harmony default export */ var esm_min = (function (arr) {
    if (!is_array(arr)) {
        return undefined;
    }
    return arr.reduce(function (prev, curr) {
        return Math.min(prev, curr);
    }, arr[0]);
});
//# sourceMappingURL=min.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/get-range.js



var getRange = function (values) {
    // 存在 NaN 时，min,max 判定会出问题
    var filterValues = values.filter(function (v) { return !isNaN(v); });
    if (!filterValues.length) {
        // 如果没有数值则直接返回0
        return {
            min: 0,
            max: 0,
        };
    }
    if (is_array(values[0])) {
        var tmp = [];
        for (var i = 0; i < values.length; i++) {
            tmp = tmp.concat(values[i]);
        }
        filterValues = tmp;
    }
    var max = esm_max(filterValues);
    var min = esm_min(filterValues);
    return {
        min: min,
        max: max,
    };
};
/* harmony default export */ var get_range = (getRange);
//# sourceMappingURL=get-range.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/pull.js
var arrPrototype = Array.prototype;
var splice = arrPrototype.splice;
var indexOf = arrPrototype.indexOf;
var pull = function (arr) {
    var values = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        values[_i - 1] = arguments[_i];
    }
    for (var i = 0; i < values.length; i++) {
        var value = values[i];
        var fromIndex = -1;
        while ((fromIndex = indexOf.call(arr, value)) > -1) {
            splice.call(arr, fromIndex, 1);
        }
    }
    return arr;
};
/* harmony default export */ var esm_pull = (pull);
//# sourceMappingURL=pull.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/pull-at.js

var pull_at_splice = Array.prototype.splice;
var pull_at_pullAt = function pullAt(arr, indexes) {
    if (!is_array_like(arr)) {
        return [];
    }
    var length = arr ? indexes.length : 0;
    var last = length - 1;
    while (length--) {
        var previous = void 0;
        var index = indexes[length];
        if (length === last || index !== previous) {
            previous = index;
            pull_at_splice.call(arr, index, 1);
        }
    }
    return arr;
};
/* harmony default export */ var pull_at = (pull_at_pullAt);
//# sourceMappingURL=pull-at.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/reduce.js



var reduce = function (arr, fn, init) {
    if (!is_array(arr) && !is_plain_object(arr)) {
        return arr;
    }
    var result = init;
    esm_each(arr, function (data, i) {
        result = fn(result, data, i);
    });
    return result;
};
/* harmony default export */ var esm_reduce = (reduce);
//# sourceMappingURL=reduce.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/remove.js


var remove = function (arr, predicate) {
    /**
     * const arr = [1, 2, 3, 4]
     * const evens = remove(arr, n => n % 2 == 0)
     * console.log(arr) // => [1, 3]
     * console.log(evens) // => [2, 4]
     */
    var result = [];
    if (!is_array_like(arr)) {
        return result;
    }
    var i = -1;
    var indexes = [];
    var length = arr.length;
    while (++i < length) {
        var value = arr[i];
        if (predicate(value, i, arr)) {
            result.push(value);
            indexes.push(i);
        }
    }
    pull_at(arr, indexes);
    return result;
};
/* harmony default export */ var esm_remove = (remove);
//# sourceMappingURL=remove.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-string.js

/* harmony default export */ var is_string = (function (str) {
    return is_type(str, 'String');
});
//# sourceMappingURL=is-string.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/sort-by.js



function sortBy(arr, key) {
    var comparer;
    if (is_function(key)) {
        comparer = function (a, b) { return key(a) - key(b); };
    }
    else {
        var keys_1 = [];
        if (is_string(key)) {
            keys_1.push(key);
        }
        else if (is_array(key)) {
            keys_1 = key;
        }
        comparer = function (a, b) {
            for (var i = 0; i < keys_1.length; i += 1) {
                var prop = keys_1[i];
                if (a[prop] > b[prop]) {
                    return 1;
                }
                if (a[prop] < b[prop]) {
                    return -1;
                }
            }
            return 0;
        };
    }
    arr.sort(comparer);
    return arr;
}
/* harmony default export */ var sort_by = (sortBy);
//# sourceMappingURL=sort-by.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/uniq.js
function uniq(arr, cache) {
    if (cache === void 0) { cache = new Map(); }
    var r = [];
    if (Array.isArray(arr)) {
        for (var i = 0, len = arr.length; i < len; i++) {
            var item = arr[i];
            // 加一个 cache，提升性能
            if (!cache.has(item)) {
                r.push(item);
                cache.set(item, true);
            }
        }
    }
    return r;
}
//# sourceMappingURL=uniq.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/union.js

var union = function () {
    var sources = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        sources[_i] = arguments[_i];
    }
    return uniq([].concat.apply([], sources));
};
/* harmony default export */ var esm_union = (union);
//# sourceMappingURL=union.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/values-of-key.js


/* harmony default export */ var values_of_key = (function (data, name) {
    var rst = [];
    var tmpMap = {};
    for (var i = 0; i < data.length; i++) {
        var obj = data[i];
        var value = obj[name];
        if (!is_nil(value)) {
            // flatten
            if (!is_array(value)) {
                value = [value];
            }
            for (var j = 0; j < value.length; j++) {
                var val = value[j];
                // unique
                if (!tmpMap[val]) {
                    rst.push(val);
                    tmpMap[val] = true;
                }
            }
        }
    }
    return rst;
});
//# sourceMappingURL=values-of-key.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/head.js

function head(o) {
    if (is_array_like(o)) {
        return o[0];
    }
    return undefined;
}
//# sourceMappingURL=head.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/last.js

function last_last(o) {
    if (is_array_like(o)) {
        var arr = o;
        return arr[arr.length - 1];
    }
    return undefined;
}
//# sourceMappingURL=last.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/starts-with.js


function startsWith(arr, e) {
    return (is_array(arr) || is_string(arr)) ? arr[0] === e : false;
}
/* harmony default export */ var starts_with = (startsWith);
//# sourceMappingURL=starts-with.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/ends-with.js


function endsWith(arr, e) {
    return (is_array(arr) || is_string(arr)) ? arr[arr.length - 1] === e : false;
}
/* harmony default export */ var ends_with = (endsWith);
//# sourceMappingURL=ends-with.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/every.js
/**
 * 只要有一个不满足条件就返回 false
 * @param arr
 * @param func
 */
var every = function (arr, func) {
    for (var i = 0; i < arr.length; i++) {
        if (!func(arr[i], i))
            return false;
    }
    return true;
};
/* harmony default export */ var esm_every = (every);
//# sourceMappingURL=every.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/some.js
/**
 * 只要有一个满足条件就返回 true
 * @param arr
 * @param func
 */
var some = function (arr, func) {
    for (var i = 0; i < arr.length; i++) {
        if (func(arr[i], i))
            return true;
    }
    return false;
};
/* harmony default export */ var esm_some = (some);
//# sourceMappingURL=some.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/group-by.js


var group_by_hasOwnProperty = Object.prototype.hasOwnProperty;
function groupBy(data, condition) {
    if (!condition || !is_array(data)) {
        return {};
    }
    var result = {};
    // 兼容方法和 字符串的写法
    var predicate = is_function(condition) ? condition : function (item) { return item[condition]; };
    var key;
    for (var i = 0; i < data.length; i++) {
        var item = data[i];
        key = predicate(item);
        if (group_by_hasOwnProperty.call(result, key)) {
            result[key].push(item);
        }
        else {
            result[key] = [item];
        }
    }
    return result;
}
/* harmony default export */ var group_by = (groupBy);
//# sourceMappingURL=group-by.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/group-to-map.js



/**
 * 将数据分组成 map
 * @param data
 * @param condition
 */
function groupToMap(data, condition) {
    if (!condition) {
        return {
            0: data,
        };
    }
    if (!is_function(condition)) {
        // 如果是字符串，则按照 a*b 风格成数组
        var paramscondition_1 = is_array(condition) ? condition : condition.replace(/\s+/g, '').split('*');
        condition = function (row) {
            var unique = '_'; // 避免出现数字作为Key的情况，会进行按照数字的排序
            // 根据字段列表的值，拼接成 key
            for (var i = 0, l = paramscondition_1.length; i < l; i++) {
                unique += row[paramscondition_1[i]] && row[paramscondition_1[i]].toString();
            }
            return unique;
        };
    }
    return group_by(data, condition);
}
//# sourceMappingURL=group-to-map.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/group.js

/* harmony default export */ var group = (function (data, condition) {
    if (!condition) {
        // 没有条件，则自身改成数组
        return [data];
    }
    var groups = groupToMap(data, condition);
    var array = [];
    for (var i in groups) {
        array.push(groups[i]);
    }
    return array;
});
//# sourceMappingURL=group.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/get-wrap-behavior.js
/**
 * 获取封装的事件
 * @protected
 * @param  {Object} obj   对象
 * @param  {String} action 事件名称
 * @return {Function}        返回事件处理函数
 */
function getWrapBehavior(obj, action) {
    return obj['_wrap_' + action];
}
/* harmony default export */ var get_wrap_behavior = (getWrapBehavior);
//# sourceMappingURL=get-wrap-behavior.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/wrap-behavior.js
/**
 * 封装事件，便于使用上下文this,和便于解除事件时使用
 * @protected
 * @param  {Object} obj   对象
 * @param  {String} action 事件名称
 * @return {Function}        返回事件处理函数
 */
function wrapBehavior(obj, action) {
    if (obj['_wrap_' + action]) {
        return obj['_wrap_' + action];
    }
    var method = function (e) {
        obj[action](e);
    };
    obj['_wrap_' + action] = method;
    return method;
}
/* harmony default export */ var wrap_behavior = (wrapBehavior);
//# sourceMappingURL=wrap-behavior.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/number2color.js
var numColorCache = {};
function numberToColor(num) {
    // 增加缓存
    var color = numColorCache[num];
    if (!color) {
        var str = num.toString(16);
        for (var i = str.length; i < 6; i++) {
            str = '0' + str;
        }
        color = '#' + str;
        numColorCache[num] = color;
    }
    return color;
}
/* harmony default export */ var number2color = (numberToColor);
//# sourceMappingURL=number2color.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/parse-radius.js

function parseRadius(radius) {
    var r1 = 0, r2 = 0, r3 = 0, r4 = 0;
    if (is_array(radius)) {
        if (radius.length === 1) {
            r1 = r2 = r3 = r4 = radius[0];
        }
        else if (radius.length === 2) {
            r1 = r3 = radius[0];
            r2 = r4 = radius[1];
        }
        else if (radius.length === 3) {
            r1 = radius[0];
            r2 = r4 = radius[1];
            r3 = radius[2];
        }
        else {
            r1 = radius[0];
            r2 = radius[1];
            r3 = radius[2];
            r4 = radius[3];
        }
    }
    else {
        r1 = r2 = r3 = r4 = radius;
    }
    return {
        r1: r1,
        r2: r2,
        r3: r3,
        r4: r4
    };
}
/* harmony default export */ var parse_radius = (parseRadius);
//# sourceMappingURL=parse-radius.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/clamp.js
var clamp = function (a, min, max) {
    if (a < min) {
        return min;
    }
    else if (a > max) {
        return max;
    }
    return a;
};
/* harmony default export */ var esm_clamp = (clamp);
//# sourceMappingURL=clamp.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/fixed-base.js
var fixedBase = function (v, base) {
    var str = base.toString();
    var index = str.indexOf('.');
    if (index === -1) {
        return Math.round(v);
    }
    var length = str.substr(index + 1).length;
    if (length > 20) {
        length = 20;
    }
    return parseFloat(v.toFixed(length));
};
/* harmony default export */ var fixed_base = (fixedBase);
//# sourceMappingURL=fixed-base.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-number.js
/**
 * 判断是否数字
 * @return {Boolean} 是否数字
 */

var isNumber = function (value) {
    return is_type(value, 'Number');
};
/* harmony default export */ var is_number = (isNumber);
//# sourceMappingURL=is-number.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-decimal.js

var isDecimal = function (num) {
    return is_number(num) && num % 1 !== 0;
};
/* harmony default export */ var is_decimal = (isDecimal);
//# sourceMappingURL=is-decimal.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-even.js

var isEven = function (num) {
    return is_number(num) && num % 2 === 0;
};
/* harmony default export */ var is_even = (isEven);
//# sourceMappingURL=is-even.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-integer.js

var isInteger = Number.isInteger ? Number.isInteger : function (num) {
    return is_number(num) && num % 1 === 0;
};
/* harmony default export */ var is_integer = (isInteger);
//# sourceMappingURL=is-integer.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-negative.js

var isNegative = function (num) {
    return is_number(num) && num < 0;
};
/* harmony default export */ var is_negative = (isNegative);
//# sourceMappingURL=is-negative.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-number-equal.js
var PRECISION = 0.00001; // numbers less than this is considered as 0
function isNumberEqual(a, b, precision) {
    if (precision === void 0) { precision = PRECISION; }
    return Math.abs((a - b)) < precision;
}
;
//# sourceMappingURL=is-number-equal.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-odd.js

var isOdd = function (num) {
    return is_number(num) && num % 2 !== 0;
};
/* harmony default export */ var is_odd = (isOdd);
//# sourceMappingURL=is-odd.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-positive.js

var isPositive = function (num) {
    return is_number(num) && num > 0;
};
/* harmony default export */ var is_positive = (isPositive);
//# sourceMappingURL=is-positive.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/max-by.js


/**
 * @param {Array} arr The array to iterate over.
 * @param {Function} [fn] The iteratee invoked per element.
 * @return {*} Returns the maximum value.
 * @example
 *
 * var objects = [{ 'n': 1 }, { 'n': 2 }];
 *
 * maxBy(objects, function(o) { return o.n; });
 * // => { 'n': 2 }
 *
 * maxBy(objects, 'n');
 * // => { 'n': 2 }
 */
/* harmony default export */ var max_by = (function (arr, fn) {
    if (!is_array(arr)) {
        return undefined;
    }
    var maxItem;
    var max = -Infinity;
    for (var i = 0; i < arr.length; i++) {
        var item = arr[i];
        var v = is_function(fn) ? fn(item) : item[fn];
        if (v > max) {
            maxItem = item;
            max = v;
        }
    }
    return maxItem;
});
//# sourceMappingURL=max-by.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/min-by.js


/**
 * @param {Array} arr The array to iterate over.
 * @param {Function} [fn] The iteratee invoked per element.
 * @return {*} Returns the minimum value.
 * @example
 *
 * var objects = [{ 'n': 1 }, { 'n': 2 }];
 *
 * minBy(objects, function(o) { return o.n; });
 * // => { 'n': 1 }
 *
 * minBy(objects, 'n');
 * // => { 'n': 1 }
 */
/* harmony default export */ var min_by = (function (arr, fn) {
    if (!is_array(arr)) {
        return undefined;
    }
    var minItem;
    var min = Infinity;
    for (var i = 0; i < arr.length; i++) {
        var item = arr[i];
        var v = is_function(fn) ? fn(item) : item[fn];
        if (v < min) {
            minItem = item;
            min = v;
        }
    }
    return minItem;
});
//# sourceMappingURL=min-by.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/mod.js
var mod = function (n, m) {
    return ((n % m) + m) % m;
};
/* harmony default export */ var esm_mod = (mod);
//# sourceMappingURL=mod.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/to-degree.js
var DEGREE = 180 / Math.PI;
var toDegree = function (radian) {
    return DEGREE * radian;
};
/* harmony default export */ var to_degree = (toDegree);
//# sourceMappingURL=to-degree.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/to-integer.js
/* harmony default export */ var to_integer = (parseInt);
//# sourceMappingURL=to-integer.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/to-radian.js
var RADIAN = Math.PI / 180;
var toRadian = function (degree) {
    return RADIAN * degree;
};
/* harmony default export */ var to_radian = (toRadian);
//# sourceMappingURL=to-radian.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/for-in.js

/* harmony default export */ var for_in = (esm_each);
//# sourceMappingURL=for-in.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/has.js
/* harmony default export */ var has = (function (obj, key) { return obj.hasOwnProperty(key); });
//# sourceMappingURL=has.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/has-key.js

/* harmony default export */ var has_key = (has);
//# sourceMappingURL=has-key.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/values.js


// @ts-ignore
var values_values = Object.values ? function (obj) { return Object.values(obj); } : function (obj) {
    var result = [];
    esm_each(obj, function (value, key) {
        if (!(is_function(obj) && key === 'prototype')) {
            result.push(value);
        }
    });
    return result;
};
/* harmony default export */ var esm_values = (values_values);
//# sourceMappingURL=values.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/has-value.js


/* harmony default export */ var has_value = (function (obj, value) { return esm_contains(esm_values(obj), value); });
//# sourceMappingURL=has-value.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/to-string.js

/* harmony default export */ var to_string = (function (value) {
    if (is_nil(value))
        return '';
    return value.toString();
});
//# sourceMappingURL=to-string.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/lower-case.js

var lowerCase = function (str) {
    return to_string(str).toLowerCase();
};
/* harmony default export */ var lower_case = (lowerCase);
//# sourceMappingURL=lower-case.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/lower-first.js

var lowerFirst = function (value) {
    var str = to_string(value);
    return str.charAt(0).toLowerCase() + str.substring(1);
};
/* harmony default export */ var lower_first = (lowerFirst);
//# sourceMappingURL=lower-first.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/substitute.js
function substitute(str, o) {
    if (!str || !o) {
        return str;
    }
    return str.replace(/\\?\{([^{}]+)\}/g, function (match, name) {
        if (match.charAt(0) === '\\') {
            return match.slice(1);
        }
        return (o[name] === undefined) ? '' : o[name];
    });
}
/* harmony default export */ var esm_substitute = (substitute);
//# sourceMappingURL=substitute.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/upper-case.js

var upperCase = function (str) {
    return to_string(str).toUpperCase();
};
/* harmony default export */ var upper_case = (upperCase);
//# sourceMappingURL=upper-case.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/upper-first.js

var upperFirst = function (value) {
    var str = to_string(value);
    return str.charAt(0).toUpperCase() + str.substring(1);
};
/* harmony default export */ var upper_first = (upperFirst);
//# sourceMappingURL=upper-first.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/get-type.js
var get_type_toString = {}.toString;
var getType = function (value) {
    return get_type_toString.call(value).replace(/^\[object /, '').replace(/]$/, '');
};
/* harmony default export */ var get_type = (getType);
//# sourceMappingURL=get-type.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-arguments.js
/**
 * 是否是参数类型
 *
 * @param {Object} value 测试的值
 * @return {Boolean}
 */

var isArguments = function (value) {
    return is_type(value, 'Arguments');
};
/* harmony default export */ var is_arguments = (isArguments);
//# sourceMappingURL=is-arguments.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-boolean.js
/**
 * 是否是布尔类型
 *
 * @param {Object} value 测试的值
 * @return {Boolean}
 */

var isBoolean = function (value) {
    return is_type(value, 'Boolean');
};
/* harmony default export */ var is_boolean = (isBoolean);
//# sourceMappingURL=is-boolean.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-date.js

var isDate = function (value) {
    return is_type(value, 'Date');
};
/* harmony default export */ var is_date = (isDate);
//# sourceMappingURL=is-date.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-error.js
/**
 * 是否是参数类型
 *
 * @param {Object} value 测试的值
 * @return {Boolean}
 */

var isError = function (value) {
    return is_type(value, 'Error');
};
/* harmony default export */ var is_error = (isError);
//# sourceMappingURL=is-error.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-finite.js
/**
 * 判断是否为有限数
 * @return {Boolean}
 */

/* harmony default export */ var is_finite = (function (value) {
    return is_number(value) && isFinite(value);
});
//# sourceMappingURL=is-finite.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-null.js
var isNull = function (value) {
    return value === null;
};
/* harmony default export */ var is_null = (isNull);
//# sourceMappingURL=is-null.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-prototype.js
var objectProto = Object.prototype;
var isPrototype = function (value) {
    var Ctor = value && value.constructor;
    var proto = (typeof Ctor === 'function' && Ctor.prototype) || objectProto;
    return value === proto;
};
/* harmony default export */ var is_prototype = (isPrototype);
//# sourceMappingURL=is-prototype.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-reg-exp.js

var isRegExp = function (str) {
    return is_type(str, 'RegExp');
};
/* harmony default export */ var is_reg_exp = (isRegExp);
//# sourceMappingURL=is-reg-exp.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-undefined.js
var isUndefined = function (value) {
    return value === undefined;
};
/* harmony default export */ var is_undefined = (isUndefined);
//# sourceMappingURL=is-undefined.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-element.js
/**
 * 判断是否HTML元素
 * @return {Boolean} 是否HTML元素
 */
var isElement = function (o) {
    return o instanceof Element || o instanceof HTMLDocument;
};
/* harmony default export */ var is_element = (isElement);
//# sourceMappingURL=is-element.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/request-animation-frame.js
function requestAnimationFrame(fn) {
    var method = window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        // @ts-ignore
        window.mozRequestAnimationFrame ||
        // @ts-ignore
        window.msRequestAnimationFrame ||
        function (f) {
            return setTimeout(f, 16);
        };
    return method(fn);
}
;
//# sourceMappingURL=request-animation-frame.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/clear-animation-frame.js
function cancelAnimationFrame(handler) {
    var method = window.cancelAnimationFrame ||
        window.webkitCancelAnimationFrame ||
        // @ts-ignore
        window.mozCancelAnimationFrame ||
        // @ts-ignore
        window.msCancelAnimationFrame ||
        clearTimeout;
    method(handler);
}
;
//# sourceMappingURL=clear-animation-frame.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/mix.js
// FIXME: Mutable param should be forbidden in static lang.
function _mix(dist, obj) {
    for (var key in obj) {
        if (obj.hasOwnProperty(key) && key !== 'constructor' && obj[key] !== undefined) {
            dist[key] = obj[key];
        }
    }
}
function mix(dist, src1, src2, src3) {
    if (src1)
        _mix(dist, src1);
    if (src2)
        _mix(dist, src2);
    if (src3)
        _mix(dist, src3);
    return dist;
}
//# sourceMappingURL=mix.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/augment.js


var augment = function () {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
    }
    var c = args[0];
    for (var i = 1; i < args.length; i++) {
        var obj = args[i];
        if (is_function(obj)) {
            obj = obj.prototype;
        }
        mix(c.prototype, obj);
    }
};
/* harmony default export */ var esm_augment = (augment);
//# sourceMappingURL=augment.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/clone.js

var clone = function (obj) {
    if (typeof obj !== 'object' || obj === null) {
        return obj;
    }
    var rst;
    if (is_array(obj)) {
        rst = [];
        for (var i = 0, l = obj.length; i < l; i++) {
            if (typeof obj[i] === 'object' && obj[i] != null) {
                rst[i] = clone(obj[i]);
            }
            else {
                rst[i] = obj[i];
            }
        }
    }
    else {
        rst = {};
        for (var k in obj) {
            if (typeof obj[k] === 'object' && obj[k] != null) {
                rst[k] = clone(obj[k]);
            }
            else {
                rst[k] = obj[k];
            }
        }
    }
    return rst;
};
/* harmony default export */ var esm_clone = (clone);
//# sourceMappingURL=clone.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/debounce.js
function debounce(func, wait, immediate) {
    var timeout;
    return function () {
        var context = this, args = arguments;
        var later = function () {
            timeout = null;
            if (!immediate) {
                func.apply(context, args);
            }
        };
        var callNow = immediate && !timeout;
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
        if (callNow) {
            func.apply(context, args);
        }
    };
}
/* harmony default export */ var esm_debounce = (debounce);
//# sourceMappingURL=debounce.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/memoize.js

/**
 * _.memoize(calColor);
 * _.memoize(calColor, (...args) => args[0]);
 * @param f
 * @param resolver
 */
/* harmony default export */ var memoize = (function (f, resolver) {
    if (!is_function(f)) {
        throw new TypeError('Expected a function');
    }
    var memoized = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        // 使用方法构造 key，如果不存在 resolver，则直接取第一个参数作为 key
        var key = resolver ? resolver.apply(this, args) : args[0];
        var cache = memoized.cache;
        if (cache.has(key)) {
            return cache.get(key);
        }
        var result = f.apply(this, args);
        // 缓存起来
        cache.set(key, result);
        return result;
    };
    memoized.cache = new Map();
    return memoized;
});
//# sourceMappingURL=memoize.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/deep-mix.js


var MAX_MIX_LEVEL = 5;
function _deepMix(dist, src, level, maxLevel) {
    level = level || 0;
    maxLevel = maxLevel || MAX_MIX_LEVEL;
    for (var key in src) {
        if (src.hasOwnProperty(key)) {
            var value = src[key];
            if (value !== null && is_plain_object(value)) {
                if (!is_plain_object(dist[key])) {
                    dist[key] = {};
                }
                if (level < maxLevel) {
                    _deepMix(dist[key], value, level + 1, maxLevel);
                }
                else {
                    dist[key] = src[key];
                }
            }
            else if (is_array(value)) {
                dist[key] = [];
                dist[key] = dist[key].concat(value);
            }
            else if (value !== undefined) {
                dist[key] = value;
            }
        }
    }
}
// todo 重写
var deepMix = function (rst) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    for (var i = 0; i < args.length; i += 1) {
        _deepMix(rst, args[i]);
    }
    return rst;
};
/* harmony default export */ var deep_mix = (deepMix);
//# sourceMappingURL=deep-mix.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/extend.js


var extend = function (subclass, superclass, overrides, staticOverrides) {
    // 如果只提供父类构造函数，则自动生成子类构造函数
    if (!is_function(superclass)) {
        overrides = superclass;
        superclass = subclass;
        subclass = function () { };
    }
    var create = Object.create ?
        function (proto, c) {
            return Object.create(proto, {
                constructor: {
                    value: c
                }
            });
        } :
        function (proto, c) {
            function Tmp() { }
            Tmp.prototype = proto;
            var o = new Tmp();
            o.constructor = c;
            return o;
        };
    var superObj = create(superclass.prototype, subclass); // new superclass(),//实例化父类作为子类的prototype
    subclass.prototype = mix(superObj, subclass.prototype); // 指定子类的prototype
    subclass.superclass = create(superclass.prototype, superclass);
    mix(superObj, overrides);
    mix(subclass, staticOverrides);
    return subclass;
};
/* harmony default export */ var esm_extend = (extend);
//# sourceMappingURL=extend.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/index-of.js

var index_of_indexOf = function (arr, obj) {
    if (!is_array_like(arr)) {
        return -1;
    }
    var m = Array.prototype.indexOf;
    if (m) {
        return m.call(arr, obj);
    }
    var index = -1;
    for (var i = 0; i < arr.length; i++) {
        if (arr[i] === obj) {
            index = i;
            break;
        }
    }
    return index;
};
/* harmony default export */ var index_of = (index_of_indexOf);
//# sourceMappingURL=index-of.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-empty.js




var is_empty_hasOwnProperty = Object.prototype.hasOwnProperty;
function isEmpty(value) {
    /**
     * isEmpty(null) => true
     * isEmpty() => true
     * isEmpty(true) => true
     * isEmpty(1) => true
     * isEmpty([1, 2, 3]) => false
     * isEmpty('abc') => false
     * isEmpty({ a: 1 }) => false
     */
    if (is_nil(value)) {
        return true;
    }
    if (is_array_like(value)) {
        return !value.length;
    }
    var type = get_type(value);
    if (type === 'Map' || type === 'Set') {
        return !value.size;
    }
    if (is_prototype(value)) {
        return !Object.keys(value).length;
    }
    for (var key in value) {
        if (is_empty_hasOwnProperty.call(value, key)) {
            return false;
        }
    }
    return true;
}
/* harmony default export */ var is_empty = (isEmpty);
//# sourceMappingURL=is-empty.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-equal.js



var isEqual = function (value, other) {
    if (value === other) {
        return true;
    }
    if (!value || !other) {
        return false;
    }
    if (is_string(value) || is_string(other)) {
        return false;
    }
    if (is_array_like(value) || is_array_like(other)) {
        if (value.length !== other.length) {
            return false;
        }
        var rst = true;
        for (var i = 0; i < value.length; i++) {
            rst = isEqual(value[i], other[i]);
            if (!rst) {
                break;
            }
        }
        return rst;
    }
    if (is_object_like(value) || is_object_like(other)) {
        var valueKeys = Object.keys(value);
        var otherKeys = Object.keys(other);
        if (valueKeys.length !== otherKeys.length) {
            return false;
        }
        var rst = true;
        for (var i = 0; i < valueKeys.length; i++) {
            rst = isEqual(value[valueKeys[i]], other[valueKeys[i]]);
            if (!rst) {
                break;
            }
        }
        return rst;
    }
    return false;
};
/* harmony default export */ var is_equal = (isEqual);
//# sourceMappingURL=is-equal.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/is-equal-with.js


/**
 * @param {*} value The value to compare.
 * @param {*} other The other value to compare.
 * @param {Function} [fn] The function to customize comparisons.
 * @returns {boolean} Returns `true` if the values are equivalent, else `false`.
 * @example
 *
 * function isGreeting(value) {
 *   return /^h(?:i|ello)$/.test(value);
 * }
 *
 * function customizer(objValue, othValue) {
 *   if (isGreeting(objValue) && isGreeting(othValue)) {
 *     return true;
 *   }
 * }
 *
 * var array = ['hello', 'goodbye'];
 * var other = ['hi', 'goodbye'];
 *
 * isEqualWith(array, other, customizer);  // => true
 */
/* harmony default export */ var is_equal_with = (function (value, other, fn) {
    if (!is_function(fn)) {
        return is_equal(value, other);
    }
    return !!fn(value, other);
});
//# sourceMappingURL=is-equal-with.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/map.js

var map = function (arr, func) {
    if (!is_array_like(arr)) {
        // @ts-ignore
        return arr;
    }
    var result = [];
    for (var index = 0; index < arr.length; index++) {
        var value = arr[index];
        result.push(func(value, index));
    }
    return result;
};
/* harmony default export */ var esm_map = (map);
//# sourceMappingURL=map.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/map-values.js


var identity = function (v) { return v; };
/* harmony default export */ var map_values = (function (object, func) {
    if (func === void 0) { func = identity; }
    var r = {};
    if (is_object(object) && !is_nil(object)) {
        Object.keys(object).forEach(function (key) {
            // @ts-ignore
            r[key] = func(object[key], key);
        });
    }
    return r;
});
//# sourceMappingURL=map-values.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/get.js

/**
 * https://github.com/developit/dlv/blob/master/index.js
 * @param obj
 * @param key
 * @param defaultValue
 */
/* harmony default export */ var get = (function (obj, key, defaultValue) {
    var p = 0;
    var keyArr = is_string(key) ? key.split('.') : key;
    while (obj && p < keyArr.length) {
        obj = obj[keyArr[p++]];
    }
    return (obj === undefined || p < keyArr.length) ? defaultValue : obj;
});
//# sourceMappingURL=get.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/set.js



/**
 * https://github.com/developit/dlv/blob/master/index.js
 * @param obj
 * @param path
 * @param value
 */
/* harmony default export */ var set = (function (obj, path, value) {
    var o = obj;
    var keyArr = is_string(path) ? path.split('.') : path;
    keyArr.forEach(function (key, idx) {
        // 不是最后一个
        if (idx < keyArr.length - 1) {
            if (!is_object(o[key])) {
                o[key] = is_number(keyArr[idx + 1]) ? [] : {};
            }
            o = o[key];
        }
        else {
            o[key] = value;
        }
    });
    return obj;
});
//# sourceMappingURL=set.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/pick.js


var pick_hasOwnProperty = Object.prototype.hasOwnProperty;
/* harmony default export */ var pick = (function (object, keys) {
    if (object === null || !is_plain_object(object)) {
        return {};
    }
    var result = {};
    esm_each(keys, function (key) {
        if (pick_hasOwnProperty.call(object, key)) {
            result[key] = object[key];
        }
    });
    return result;
});
//# sourceMappingURL=pick.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/omit.js

/* harmony default export */ var omit = (function (obj, keys) {
    return esm_reduce(obj, function (r, curr, key) {
        if (!keys.includes(key)) {
            r[key] = curr;
        }
        return r;
    }, {});
});
//# sourceMappingURL=omit.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/throttle.js
/* harmony default export */ var throttle = (function (func, wait, options) {
    var timeout, context, args, result;
    var previous = 0;
    if (!options)
        options = {};
    var later = function () {
        previous = options.leading === false ? 0 : Date.now();
        timeout = null;
        result = func.apply(context, args);
        if (!timeout)
            context = args = null;
    };
    var throttled = function () {
        var now = Date.now();
        if (!previous && options.leading === false)
            previous = now;
        var remaining = wait - (now - previous);
        context = this;
        args = arguments;
        if (remaining <= 0 || remaining > wait) {
            if (timeout) {
                clearTimeout(timeout);
                timeout = null;
            }
            previous = now;
            result = func.apply(context, args);
            if (!timeout)
                context = args = null;
        }
        else if (!timeout && options.trailing !== false) {
            timeout = setTimeout(later, remaining);
        }
        return result;
    };
    throttled.cancel = function () {
        clearTimeout(timeout);
        previous = 0;
        timeout = context = args = null;
    };
    return throttled;
});
//# sourceMappingURL=throttle.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/to-array.js

/* harmony default export */ var to_array = (function (value) {
    return is_array_like(value) ? Array.prototype.slice.call(value) : [];
});
//# sourceMappingURL=to-array.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/unique-id.js
var unique_id_map = {};
/* harmony default export */ var unique_id = (function (prefix) {
    prefix = prefix || 'g';
    if (!unique_id_map[prefix]) {
        unique_id_map[prefix] = 1;
    }
    else {
        unique_id_map[prefix] += 1;
    }
    return prefix + unique_id_map[prefix];
});
//# sourceMappingURL=unique-id.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/noop.js
/* harmony default export */ var noop = (function () { });
//# sourceMappingURL=noop.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/identity.js
/* harmony default export */ var esm_identity = (function (v) { return v; });
//# sourceMappingURL=identity.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/size.js


function size(o) {
    if (is_nil(o)) {
        return 0;
    }
    if (is_array_like(o)) {
        return o.length;
    }
    return Object.keys(o).length;
}
//# sourceMappingURL=size.js.map
// EXTERNAL MODULE: ./node_modules/_tslib@2.6.3@tslib/tslib.es6.js
var tslib_es6 = __webpack_require__("9a80");

// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/measure-text-width.js




var ctx;
/**
 * 计算文本的宽度
 */
/* harmony default export */ var measure_text_width = (memoize(function (text, font) {
    if (font === void 0) { font = {}; }
    var fontSize = font.fontSize, fontFamily = font.fontFamily, fontWeight = font.fontWeight, fontStyle = font.fontStyle, fontVariant = font.fontVariant;
    if (!ctx) {
        ctx = document.createElement('canvas').getContext('2d');
    }
    ctx.font = [fontStyle, fontVariant, fontWeight, fontSize + "px", fontFamily].join(' ');
    return ctx.measureText(is_string(text) ? text : '').width;
}, function (text, font) {
    if (font === void 0) { font = {}; }
    return Object(tslib_es6["__spreadArrays"])([text], esm_values(font)).join('');
}));
//# sourceMappingURL=measure-text-width.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/get-ellipsis-text.js



/**
 * 获取文本的 ... 文本。
 * 算法（减少每次 measureText 的长度，measureText 的性能跟字符串时间相关）：
 * 1. 先通过 STEP 逐步计算，找到最后一个小于 maxWidth 的字符串
 * 2. 然后对最后这个字符串二分计算
 * @param text 需要计算的文本, 由于历史原因 除了支持string，还支持空值,number和数组等
 * @param maxWidth 最大宽度
 * @param font 字体
 * @param str 要替换的文本
 */
/* harmony default export */ var get_ellipsis_text = (function (text, maxWidth, font, str) {
    if (str === void 0) { str = '...'; }
    var STEP = 16; // 每次 16，调参工程师
    var PLACEHOLDER_WIDTH = measure_text_width(str, font);
    var leftText = !is_string(text) ? to_string(text) : text;
    var leftWidth = maxWidth;
    var r = []; // 最终的分段字符串
    var currentText;
    var currentWidth;
    if (measure_text_width(text, font) <= maxWidth) {
        return text;
    }
    // 首先通过 step 计算，找出最大的未超出长度的
    // eslint-disable-next-line no-constant-condition
    while (true) {
        // 更新字符串
        currentText = leftText.substr(0, STEP);
        // 计算宽度
        currentWidth = measure_text_width(currentText, font);
        // 超出剩余宽度，则停止
        if (currentWidth + PLACEHOLDER_WIDTH > leftWidth) {
            if (currentWidth > leftWidth) {
                break;
            }
        }
        r.push(currentText);
        // 没有超出，则计算剩余宽度
        leftWidth -= currentWidth;
        leftText = leftText.substr(STEP);
        // 字符串整体没有超出
        if (!leftText) {
            return r.join('');
        }
    }
    // 最下的最后一个 STEP，使用 1 递增（用二分效果更高）
    // eslint-disable-next-line no-constant-condition
    while (true) {
        // 更新字符串
        currentText = leftText.substr(0, 1);
        // 计算宽度
        currentWidth = measure_text_width(currentText, font);
        // 超出剩余宽度，则停止
        if (currentWidth + PLACEHOLDER_WIDTH > leftWidth) {
            break;
        }
        r.push(currentText);
        // 没有超出，则计算剩余宽度
        leftWidth -= currentWidth;
        leftText = leftText.substr(1);
        if (!leftText) {
            return r.join('');
        }
    }
    return "" + r.join('') + str;
});
//# sourceMappingURL=get-ellipsis-text.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/cache.js
/**
 * k-v 存储
 */
var default_1 = /** @class */ (function () {
    function default_1() {
        this.map = {};
    }
    default_1.prototype.has = function (key) {
        return this.map[key] !== undefined;
    };
    default_1.prototype.get = function (key, def) {
        var v = this.map[key];
        return v === undefined ? def : v;
    };
    default_1.prototype.set = function (key, value) {
        this.map[key] = value;
    };
    default_1.prototype.clear = function () {
        this.map = {};
    };
    default_1.prototype.delete = function (key) {
        delete this.map[key];
    };
    default_1.prototype.size = function () {
        return Object.keys(this.map).length;
    };
    return default_1;
}());
/* harmony default export */ var cache = (default_1);
//# sourceMappingURL=cache.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/index.js
// array


























// event


// format


// math

















// object







// string





// type























// other

























// text


// 不知道为什么，需要把这个 export，不然 ts 会报类型错误

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "6dec":
/***/ (function(module, exports) {

/**
 * Checks if `value` is suitable for use as unique object key.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is suitable, else `false`.
 */
function isKeyable(value) {
  var type = typeof value;
  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')
    ? (value !== '__proto__')
    : (value === null);
}

module.exports = isKeyable;


/***/ }),

/***/ "6e09":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = false;


/***/ }),

/***/ "6e62":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var bind = __webpack_require__("59a3");
var call = __webpack_require__("ded0");
var anObject = __webpack_require__("9774");
var tryToString = __webpack_require__("dcd7");
var isArrayIteratorMethod = __webpack_require__("f4b9");
var lengthOfArrayLike = __webpack_require__("8269");
var isPrototypeOf = __webpack_require__("d519");
var getIterator = __webpack_require__("7748");
var getIteratorMethod = __webpack_require__("4431");
var iteratorClose = __webpack_require__("454d");

var $TypeError = TypeError;

var Result = function (stopped, result) {
  this.stopped = stopped;
  this.result = result;
};

var ResultPrototype = Result.prototype;

module.exports = function (iterable, unboundFunction, options) {
  var that = options && options.that;
  var AS_ENTRIES = !!(options && options.AS_ENTRIES);
  var IS_RECORD = !!(options && options.IS_RECORD);
  var IS_ITERATOR = !!(options && options.IS_ITERATOR);
  var INTERRUPTED = !!(options && options.INTERRUPTED);
  var fn = bind(unboundFunction, that);
  var iterator, iterFn, index, length, result, next, step;

  var stop = function (condition) {
    if (iterator) iteratorClose(iterator, 'normal', condition);
    return new Result(true, condition);
  };

  var callFn = function (value) {
    if (AS_ENTRIES) {
      anObject(value);
      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);
    } return INTERRUPTED ? fn(value, stop) : fn(value);
  };

  if (IS_RECORD) {
    iterator = iterable.iterator;
  } else if (IS_ITERATOR) {
    iterator = iterable;
  } else {
    iterFn = getIteratorMethod(iterable);
    if (!iterFn) throw new $TypeError(tryToString(iterable) + ' is not iterable');
    // optimisation for array iterators
    if (isArrayIteratorMethod(iterFn)) {
      for (index = 0, length = lengthOfArrayLike(iterable); length > index; index++) {
        result = callFn(iterable[index]);
        if (result && isPrototypeOf(ResultPrototype, result)) return result;
      } return new Result(false);
    }
    iterator = getIterator(iterable, iterFn);
  }

  next = IS_RECORD ? iterable.next : iterator.next;
  while (!(step = call(next, iterator)).done) {
    try {
      result = callFn(step.value);
    } catch (error) {
      iteratorClose(iterator, 'throw', error);
    }
    if (typeof result == 'object' && result && isPrototypeOf(ResultPrototype, result)) return result;
  } return new Result(false);
};


/***/ }),

/***/ "6fb0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove this module from `core-js@4` since it's split to modules listed below
__webpack_require__("48e1");
__webpack_require__("5607");
__webpack_require__("d232");
__webpack_require__("e636");
__webpack_require__("fc32");
__webpack_require__("2ec4");


/***/ }),

/***/ "700f":
/***/ (function(module, exports, __webpack_require__) {

var baseToString = __webpack_require__("5eff");

/**
 * Converts `value` to a string. An empty string is returned for `null`
 * and `undefined` values. The sign of `-0` is preserved.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 * @example
 *
 * _.toString(null);
 * // => ''
 *
 * _.toString(-0);
 * // => '-0'
 *
 * _.toString([1, 2, 3]);
 * // => '1,2,3'
 */
function toString(value) {
  return value == null ? '' : baseToString(value);
}

module.exports = toString;


/***/ }),

/***/ "7041":
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue = __webpack_require__("4c93"),
    eq = __webpack_require__("4e90");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Assigns `value` to `key` of `object` if the existing value is not equivalent
 * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)
 * for equality comparisons.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function assignValue(object, key, value) {
  var objValue = object[key];
  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||
      (value === undefined && !(key in object))) {
    baseAssignValue(object, key, value);
  }
}

module.exports = assignValue;


/***/ }),

/***/ "709d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var isCallable = __webpack_require__("fe72");

var WeakMap = globalThis.WeakMap;

module.exports = isCallable(WeakMap) && /native code/.test(String(WeakMap));


/***/ }),

/***/ "7202":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var DOMIterables = __webpack_require__("93e4");
var DOMTokenListPrototype = __webpack_require__("9672");
var ArrayIteratorMethods = __webpack_require__("23f7");
var createNonEnumerableProperty = __webpack_require__("80b9");
var setToStringTag = __webpack_require__("5836");
var wellKnownSymbol = __webpack_require__("9a0b");

var ITERATOR = wellKnownSymbol('iterator');
var ArrayValues = ArrayIteratorMethods.values;

var handlePrototype = function (CollectionPrototype, COLLECTION_NAME) {
  if (CollectionPrototype) {
    // some Chrome versions have non-configurable methods on DOMTokenList
    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {
      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);
    } catch (error) {
      CollectionPrototype[ITERATOR] = ArrayValues;
    }
    setToStringTag(CollectionPrototype, COLLECTION_NAME, true);
    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {
      // some Chrome versions have non-configurable methods on DOMTokenList
      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {
        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);
      } catch (error) {
        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];
      }
    }
  }
};

for (var COLLECTION_NAME in DOMIterables) {
  handlePrototype(globalThis[COLLECTION_NAME] && globalThis[COLLECTION_NAME].prototype, COLLECTION_NAME);
}

handlePrototype(DOMTokenListPrototype, 'DOMTokenList');


/***/ }),

/***/ "72f9":
/***/ (function(module, exports) {

/**
 * A faster alternative to `Function#apply`, this function invokes `func`
 * with the `this` binding of `thisArg` and the arguments of `args`.
 *
 * @private
 * @param {Function} func The function to invoke.
 * @param {*} thisArg The `this` binding of `func`.
 * @param {Array} args The arguments to invoke `func` with.
 * @returns {*} Returns the result of `func`.
 */
function apply(func, thisArg, args) {
  switch (args.length) {
    case 0: return func.call(thisArg);
    case 1: return func.call(thisArg, args[0]);
    case 2: return func.call(thisArg, args[0], args[1]);
    case 3: return func.call(thisArg, args[0], args[1], args[2]);
  }
  return func.apply(thisArg, args);
}

module.exports = apply;


/***/ }),

/***/ "7393":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var DESCRIPTORS = __webpack_require__("98c8");
var ownKeys = __webpack_require__("fc6f");
var toIndexedObject = __webpack_require__("a330");
var getOwnPropertyDescriptorModule = __webpack_require__("1c2b");
var createProperty = __webpack_require__("99e5");

// `Object.getOwnPropertyDescriptors` method
// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors
$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {
  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {
    var O = toIndexedObject(object);
    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
    var keys = ownKeys(O);
    var result = {};
    var index = 0;
    var key, descriptor;
    while (keys.length > index) {
      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);
      if (descriptor !== undefined) createProperty(result, key, descriptor);
    }
    return result;
  }
});


/***/ }),

/***/ "73d0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _tslib = __webpack_require__("9a80");

var _canvas = _interopRequireDefault(__webpack_require__("3b27"));

var _canvas2 = _interopRequireDefault(__webpack_require__("3e93"));

var _base = _interopRequireDefault(__webpack_require__("b4b8"));

var _isString = _interopRequireDefault(__webpack_require__("ca2f"));

var _createDom = _interopRequireDefault(__webpack_require__("6041"));

var _modifyCss = _interopRequireDefault(__webpack_require__("e04a"));

var _isNil = _interopRequireDefault(__webpack_require__("eff3"));

var _each = _interopRequireDefault(__webpack_require__("bc91"));

var _matrixUtil = __webpack_require__("5695");

var _util = __webpack_require__("6d77");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var max = Math.max;
var DEFAULT_MODE = 'default';
var KEYSHAPE_MODE = 'keyShape';
var DELEGATE_MODE = 'delegate';
var SVG = 'svg';

var MiniMap =
/** @class */
function (_super) {
  (0, _tslib.__extends)(MiniMap, _super);

  function MiniMap() {
    var _this = _super !== null && _super.apply(this, arguments) || this;
    /**
     * 主图更新的监听函数，使用 debounce 减少渲染频率
     * e.g. 拖拽节点只会在松手后的 100ms 后执行 updateCanvas
     * e.g. render 时大量 addItem 也只会执行一次 updateCanvas
     */


    _this.handleUpdateCanvas = (0, _util.debounce)(function (event) {
      var self = _this;
      if (self.destroyed) return;
      self.updateCanvas();
    }, 100, false);
    return _this;
  }

  MiniMap.prototype.getDefaultCfgs = function () {
    return {
      container: null,
      className: 'g6-minimap',
      viewportClassName: 'g6-minimap-viewport',
      // Minimap 中默认展示和主图一样的内容，KeyShape 只展示节点和边的 key shape 部分，delegate表示展示自定义的rect，用户可自定义样式
      type: 'default',
      padding: 50,
      size: [200, 120],
      delegateStyle: {
        fill: '#40a9ff',
        stroke: '#096dd9'
      },
      refresh: true
    };
  };

  MiniMap.prototype.getEvents = function () {
    return {
      beforepaint: 'updateViewport',
      beforeanimate: 'disableRefresh',
      afteranimate: 'enableRefresh',
      viewportchange: 'disableOneRefresh'
    };
  }; // 若是正在进行动画，不刷新缩略图


  MiniMap.prototype.disableRefresh = function () {
    this.set('refresh', false);
  };

  MiniMap.prototype.enableRefresh = function () {
    this.set('refresh', true);
    this.updateCanvas();
  };

  MiniMap.prototype.disableOneRefresh = function () {
    this.set('viewportChange', true);
  };

  MiniMap.prototype.initViewport = function () {
    var _this = this;

    var cfgs = this._cfgs;
    var size = cfgs.size,
        graph = cfgs.graph;
    if (this.destroyed) return;
    var canvas = this.get('canvas');
    var containerDOM = canvas.get('container');
    var viewport = (0, _createDom.default)("\n      <div\n        class=" + cfgs.viewportClassName + "\n        style='position:absolute;\n          left:0;\n          top:0;\n          box-sizing:border-box;\n          border: 2px solid #1980ff'\n        draggable=true>\n      </div>"); // 计算拖拽水平方向距离

    var x = 0; // 计算拖拽垂直方向距离

    var y = 0; // 是否在拖拽minimap的视口

    var dragging = false; // 缓存viewport当前对于画布的x

    var left = 0; // 缓存viewport当前对于画布的y

    var top = 0; // 缓存viewport当前宽度

    var width = 0; // 缓存viewport当前高度

    var height = 0;
    var ratio = 0;
    var zoom = 0;
    viewport.addEventListener('dragstart', function (e) {
      if (e.dataTransfer) {
        var img = new Image();
        img.src = "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E";
        e.dataTransfer.setDragImage(img, 0, 0);
        e.dataTransfer.setData('text', 'view-port-minimap');
      }

      cfgs.refresh = false;

      if (e.target !== viewport) {
        return;
      } // 如果视口已经最大了，不需要拖拽


      var style = viewport.style;
      left = parseInt(style.left, 10);
      top = parseInt(style.top, 10);
      width = parseInt(style.width, 10);
      height = parseInt(style.height, 10);

      if (width > size[0] || height > size[1]) {
        return;
      }

      zoom = graph.getZoom();
      ratio = _this.get('ratio');
      dragging = true;
      x = e.clientX;
      y = e.clientY;
    }, false);
    viewport.addEventListener('drag', function (e) {
      if (!dragging || (0, _isNil.default)(e.clientX) || (0, _isNil.default)(e.clientY)) {
        return;
      }

      var dx = x - e.clientX;
      var dy = y - e.clientY; // 若视口移动到最左边或最右边了,仅移动到边界

      if (left - dx < 0 || left - dx + width >= size[0]) {
        dx = 0;
      } // 若视口移动到最上或最下边了，仅移动到边界


      if (top - dy < 0 || top - dy + height >= size[1]) {
        dy = 0;
      }

      left -= dx;
      top -= dy; // 先移动视口，避免移动到边上以后出现视口闪烁

      (0, _modifyCss.default)(viewport, {
        left: left + "px",
        top: top + "px"
      }); // graph 移动需要偏移量 dx/dy * 缩放比例才会得到正确的移动距离

      graph.translate(dx * zoom / ratio, dy * zoom / ratio);
      x = e.clientX;
      y = e.clientY;
    }, false);
    viewport.addEventListener('dragend', function () {
      dragging = false;
      cfgs.refresh = true;
    }, false);
    this.set('viewport', viewport);
    containerDOM.appendChild(viewport);
  };
  /**
   * 更新 viewport 视图
   */


  MiniMap.prototype.updateViewport = function () {
    if (this.destroyed) return;
    var ratio = this.get('ratio');
    var dx = this.get('dx');
    var dy = this.get('dy');
    var totaldx = this.get('totaldx');
    var totaldy = this.get('totaldy');
    var graph = this.get('graph');
    var size = this.get('size');
    var graphWidth = graph.get('width');
    var graphHeight = graph.get('height');
    var topLeft = graph.getPointByCanvas(0, 0);
    var bottomRight = graph.getPointByCanvas(graphWidth, graphHeight);
    var viewport = this.get('viewport');

    if (!viewport) {
      this.initViewport();
    }

    var zoom = graph.getZoom(); // viewport宽高,左上角点的计算

    var width = (bottomRight.x - topLeft.x) * ratio;
    var height = (bottomRight.y - topLeft.y) * ratio;
    var left = topLeft.x * ratio + totaldx;
    var top = topLeft.y * ratio + totaldy;
    var right = left + width;
    var bottom = top + height;

    if (left < 0) {
      width += left;
      left = 0;
    }

    if (right > size[0]) {
      width = width - (right - size[0]);
    }

    if (top < 0) {
      height += top;
      top = 0;
    }

    if (bottom > size[1]) {
      height = height - (bottom - size[1]);
    } // 缓存目前缩放比，在移动 minimap 视窗时就不用再计算大图的移动量


    this.set('ratio', ratio);
    var correctLeft = left + "px";
    var correctTop = top + "px";
    (0, _modifyCss.default)(viewport, {
      left: correctLeft,
      top: correctTop,
      width: width + "px",
      height: height + "px"
    });
  };
  /**
   * 将主图上的图形完全复制到小图
   */


  MiniMap.prototype.updateGraphShapes = function () {
    var graph = this._cfgs.graph;
    var canvas = this.get('canvas');
    var graphGroup = graph.get('group');
    if (graphGroup.destroyed) return;
    var clonedGroup = graphGroup.clone();
    clonedGroup.resetMatrix();
    canvas.clear();
    canvas.add(clonedGroup); // 当 renderer 是 svg，由于渲染引擎的 bug，这里需要将 visible 为 false 的元素手动隐藏

    var renderer = graph.get('renderer');

    if (renderer === SVG) {
      // 递归更新子元素
      this.updateVisible(clonedGroup);
    }
  }; // svg 在 canvas.add(clonedGroup) 之后会出现 visible 为 false 的元素被展示出来，需要递归更新


  MiniMap.prototype.updateVisible = function (ele) {
    var _this = this;

    if (!ele.isGroup() && !ele.get('visible')) {
      ele.hide();
    } else {
      var children = ele.get('children');
      if (!children || !children.length) return;
      children.forEach(function (child) {
        if (!child.get('visible')) child.hide();

        _this.updateVisible(child);
      });
    }
  }; // 仅在 minimap 上绘制 keyShape
  // FIXME 如果用户自定义绘制了其他内容，minimap上就无法画出


  MiniMap.prototype.updateKeyShapes = function () {
    var _this = this;

    var graph = this._cfgs.graph;
    (0, _each.default)(graph.getEdges(), function (edge) {
      _this.updateOneEdgeKeyShape(edge);
    });
    (0, _each.default)(graph.getNodes(), function (node) {
      _this.updateOneNodeKeyShape(node);
    });
    this.clearDestroyedShapes();
  };
  /**
   * 增加/更新单个元素的 keyShape
   * @param item INode 实例
   */


  MiniMap.prototype.updateOneNodeKeyShape = function (item) {
    var canvas = this.get('canvas');
    var group = canvas.get('children')[0] || canvas.addGroup();
    var itemMap = this.get('itemMap') || {}; // 差量更新 minimap 上的一个节点，对应主图的 item

    var mappedItem = itemMap[item.get('id')];
    var bbox = item.getBBox(); // 计算了节点父组矩阵的 bbox

    var cKeyShape = item.get('keyShape').clone();
    var keyShapeStyle = cKeyShape.attr();
    var attrs = {
      x: bbox.centerX,
      y: bbox.centerY
    };

    if (!mappedItem) {
      mappedItem = cKeyShape;
      group.add(mappedItem);
    } else {
      attrs = Object.assign(keyShapeStyle, attrs);
    }

    var shapeType = mappedItem.get('type');

    if (shapeType === 'rect' || shapeType === 'image') {
      attrs.x = bbox.minX;
      attrs.y = bbox.minY;
    }

    mappedItem.attr(attrs);

    if (!item.isVisible()) {
      mappedItem.hide();
    }

    mappedItem.exist = true;
    itemMap[item.get('id')] = mappedItem;
    this.set('itemMap', itemMap);
  };
  /**
   * Minimap 中展示自定义的rect，支持用户自定义样式和节点大小
   */


  MiniMap.prototype.updateDelegateShapes = function () {
    var _this = this;

    var graph = this._cfgs.graph; // 差量更新 minimap 上的节点和边

    (0, _each.default)(graph.getEdges(), function (edge) {
      _this.updateOneEdgeKeyShape(edge);
    });
    (0, _each.default)(graph.getNodes(), function (node) {
      _this.updateOneNodeDelegateShape(node);
    });
    this.clearDestroyedShapes();
  };

  MiniMap.prototype.clearDestroyedShapes = function () {
    var itemMap = this.get('itemMap') || {};
    var keys = Object.keys(itemMap);
    if (!keys || keys.length === 0) return;

    for (var i = keys.length - 1; i >= 0; i--) {
      var shape = itemMap[keys[i]];
      var exist = shape.exist;
      shape.exist = false;

      if (!exist) {
        shape.remove();
        delete itemMap[keys[i]];
      }
    }
  };
  /**
   * 设置只显示 edge 的 keyShape
   * @param item IEdge 实例
   */


  MiniMap.prototype.updateOneEdgeKeyShape = function (item) {
    var canvas = this.get('canvas');
    var group = canvas.get('children')[0] || canvas.addGroup();
    var itemMap = this.get('itemMap') || {}; // 差量更新 minimap 上的一个节点，对应主图的 item

    var mappedItem = itemMap[item.get('id')];

    if (mappedItem) {
      var path = item.get('keyShape').attr('path');
      mappedItem.attr('path', path);
    } else {
      mappedItem = item.get('keyShape').clone();
      group.add(mappedItem);
      mappedItem.toBack();
    }

    if (!item.isVisible()) {
      mappedItem.hide();
    }

    mappedItem.exist = true;
    itemMap[item.get('id')] = mappedItem;
    this.set('itemMap', itemMap);
  };
  /**
   * Minimap 中展示自定义的 rect，支持用户自定义样式和节点大小
   * 增加/更新单个元素
   * @param item INode 实例
   */


  MiniMap.prototype.updateOneNodeDelegateShape = function (item) {
    var canvas = this.get('canvas');
    var group = canvas.get('children')[0] || canvas.addGroup();
    var delegateStyle = this.get('delegateStyle');
    var itemMap = this.get('itemMap') || {}; // 差量更新 minimap 上的一个节点，对应主图的 item

    var mappedItem = itemMap[item.get('id')];
    var bbox = item.getBBox(); // 计算了节点父组矩阵的 bbox

    if (mappedItem) {
      var attrs = {
        x: bbox.minX,
        y: bbox.minY,
        width: bbox.width,
        height: bbox.height
      };
      mappedItem.attr(attrs);
    } else {
      mappedItem = group.addShape('rect', {
        attrs: (0, _tslib.__assign)({
          x: bbox.minX,
          y: bbox.minY,
          width: bbox.width,
          height: bbox.height
        }, delegateStyle),
        name: 'minimap-node-shape'
      });
    }

    if (!item.isVisible()) {
      mappedItem.hide();
    }

    mappedItem.exist = true;
    itemMap[item.get('id')] = mappedItem;
    this.set('itemMap', itemMap);
  };

  MiniMap.prototype.init = function () {
    this.initContainer();
    this.get('graph').on('afterupdateitem', this.handleUpdateCanvas);
    this.get('graph').on('afteritemstatechange', this.handleUpdateCanvas);
    this.get('graph').on('afteradditem', this.handleUpdateCanvas);
    this.get('graph').on('afterremoveitem', this.handleUpdateCanvas);
    this.get('graph').on('afterrender', this.handleUpdateCanvas);
    this.get('graph').on('afterlayout', this.handleUpdateCanvas);
  };
  /**
   * 初始化 Minimap 的容器
   */


  MiniMap.prototype.initContainer = function () {
    var self = this;
    var graph = self.get('graph');
    var size = self.get('size');
    var className = self.get('className');
    var parentNode = self.get('container');
    var container = (0, _createDom.default)("<div class='" + className + "' style='width: " + size[0] + "px; height: " + size[1] + "px; overflow: hidden'></div>");

    if ((0, _isString.default)(parentNode)) {
      parentNode = document.getElementById(parentNode);
    }

    if (parentNode) {
      parentNode.appendChild(container);
    } else {
      graph.get('container').appendChild(container);
    }

    self.set('container', container);
    var containerDOM = (0, _createDom.default)('<div class="g6-minimap-container" style="position: relative;"></div>');
    container.appendChild(containerDOM);
    var canvas;
    var renderer = graph.get('renderer');

    if (renderer === SVG) {
      canvas = new _canvas2.default({
        container: containerDOM,
        width: size[0],
        height: size[1]
      });
    } else {
      canvas = new _canvas.default({
        container: containerDOM,
        width: size[0],
        height: size[1]
      });
    }

    self.set('canvas', canvas);
    self.updateCanvas();
  };

  MiniMap.prototype.updateCanvas = function () {
    // 如果是在动画，则不刷新视图
    var isRefresh = this.get('refresh');

    if (!isRefresh) {
      return;
    }

    var graph = this.get('graph');

    if (graph.get('destroyed')) {
      return;
    } // 如果是视口变换，也不刷新视图，但是需要重置视口大小和位置


    if (this.get('viewportChange')) {
      this.set('viewportChange', false);
      this.updateViewport();
    }

    var size = this.get('size');
    var canvas = this.get('canvas');
    var type = this.get('type');
    var padding = this.get('padding');

    if (canvas.destroyed) {
      return;
    }

    switch (type) {
      case DEFAULT_MODE:
        this.updateGraphShapes();
        break;

      case KEYSHAPE_MODE:
        this.updateKeyShapes();
        break;

      case DELEGATE_MODE:
        // 得到的节点直接带有 x 和 y，每个节点不存在父 group，即每个节点位置不由父 group 控制
        this.updateDelegateShapes();
        break;

      default:
        break;
    }

    var group = canvas.get('children')[0];
    if (!group) return;
    group.resetMatrix(); // 该 bbox 是准确的，不计算 matrix 的包围盒

    var bbox = group.getCanvasBBox();
    var graphBBox = graph.get('canvas').getBBox();
    var width = graphBBox.width;
    var height = graphBBox.height;

    if (Number.isFinite(bbox.width)) {
      // 刷新后bbox可能会变，需要重置画布矩阵以缩放到合适的大小
      width = max(bbox.width, width);
      height = max(bbox.height, height);
    }

    width += 2 * padding;
    height += 2 * padding;
    var ratio = Math.min(size[0] / width, size[1] / height);
    var matrix = [1, 0, 0, 0, 1, 0, 0, 0, 1];
    var minX = 0;
    var minY = 0; // 平移到左上角

    if (Number.isFinite(bbox.minX)) {
      minX = -bbox.minX;
    }

    if (Number.isFinite(bbox.minY)) {
      minY = -bbox.minY;
    } // 缩放到适合视口后, 平移到画布中心


    var dx = (size[0] - (width - 2 * padding) * ratio) / 2;
    var dy = (size[1] - (height - 2 * padding) * ratio) / 2;
    matrix = (0, _matrixUtil.transform)(matrix, [['t', minX, minY], ['s', ratio, ratio], ['t', dx, dy]]);
    group.setMatrix(matrix); // 更新minimap视口

    this.set('ratio', ratio);
    this.set('totaldx', dx + minX * ratio);
    this.set('totaldy', dy + minY * ratio);
    this.set('dx', dx);
    this.set('dy', dy);
    this.updateViewport();
  };
  /**
   * 获取minimap的画布
   * @return {GCanvas} G的canvas实例
   */


  MiniMap.prototype.getCanvas = function () {
    return this.get('canvas');
  };
  /**
   * 获取minimap的窗口
   * @return {HTMLElement} 窗口的dom实例
   */


  MiniMap.prototype.getViewport = function () {
    return this.get('viewport');
  };
  /**
   * 获取minimap的容器dom
   * @return {HTMLElement} dom
   */


  MiniMap.prototype.getContainer = function () {
    return this.get('container');
  };

  MiniMap.prototype.destroy = function () {
    this.get('canvas').destroy();
    var container = this.get('container');
    container.parentNode.removeChild(container);
  };

  return MiniMap;
}(_base.default);

var _default = MiniMap;
exports.default = _default;

/***/ }),

/***/ "740f":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var FUNCTION_NAME_EXISTS = __webpack_require__("5efb").EXISTS;
var uncurryThis = __webpack_require__("1043");
var defineBuiltInAccessor = __webpack_require__("c0b5");

var FunctionPrototype = Function.prototype;
var functionToString = uncurryThis(FunctionPrototype.toString);
var nameRE = /function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/;
var regExpExec = uncurryThis(nameRE.exec);
var NAME = 'name';

// Function instances `.name` property
// https://tc39.es/ecma262/#sec-function-instances-name
if (DESCRIPTORS && !FUNCTION_NAME_EXISTS) {
  defineBuiltInAccessor(FunctionPrototype, NAME, {
    configurable: true,
    get: function () {
      try {
        return regExpExec(nameRE, functionToString(this))[1];
      } catch (error) {
        return '';
      }
    }
  });
}


/***/ }),

/***/ "7431":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.moveTo = exports.sortDom = exports.createDom = exports.createSVGElement = void 0;
var util_1 = __webpack_require__("6d77");
var constant_1 = __webpack_require__("7a93");
/**
 * 创建并返回图形的 svg 元素
 * @param type svg类型
 */
function createSVGElement(type) {
    return document.createElementNS('http://www.w3.org/2000/svg', type);
}
exports.createSVGElement = createSVGElement;
/**
 * 创建并返回图形的 dom 元素
 * @param  {IShape} shape 图形
 * @return {SVGElement}
 */
function createDom(shape) {
    var type = constant_1.SHAPE_TO_TAGS[shape.type];
    var parent = shape.getParent();
    if (!type) {
        throw new Error("the type " + shape.type + " is not supported by svg");
    }
    var element = createSVGElement(type);
    if (shape.get('id')) {
        element.id = shape.get('id');
    }
    shape.set('el', element);
    shape.set('attrs', {});
    // 对于 defs 下的 dom 节点，parent 为空，通过 context 统一挂载到 defs 节点下
    if (parent) {
        var parentNode = parent.get('el');
        if (parentNode) {
            parentNode.appendChild(element);
        }
        else {
            // parentNode maybe null for group
            parentNode = parent.createDom();
            parent.set('el', parentNode);
            parentNode.appendChild(element);
        }
    }
    return element;
}
exports.createDom = createDom;
/**
 * 对 dom 元素进行排序
 * @param {IElement} element  元素
 * @param {sorter}   function 排序函数
 */
function sortDom(element, sorter) {
    var el = element.get('el');
    var childList = util_1.toArray(el.children).sort(sorter);
    // create empty fragment
    var fragment = document.createDocumentFragment();
    childList.forEach(function (child) {
        fragment.appendChild(child);
    });
    el.appendChild(fragment);
}
exports.sortDom = sortDom;
/**
 * 将 dom 元素移动到父元素下的指定位置
 * @param {SVGElement} element     dom 元素
 * @param {number}     targetIndex 目标位置(从 0 开始)
 */
function moveTo(element, targetIndex) {
    var parentNode = element.parentNode;
    var siblings = Array.from(parentNode.childNodes).filter(
    // 要求为元素节点，且不能为 defs 节点
    function (node) { return node.nodeType === 1 && node.nodeName.toLowerCase() !== 'defs'; });
    // 获取目标节点
    var target = siblings[targetIndex];
    var currentIndex = siblings.indexOf(element);
    // 如果目标节点存在
    if (target) {
        // 当前索引 > 目标索引，直接插入到目标节点之前即可
        if (currentIndex > targetIndex) {
            parentNode.insertBefore(element, target);
        }
        else if (currentIndex < targetIndex) {
            // 当前索引 < 目标索引
            // 获取目标节点的下一个节点
            var targetNext = siblings[targetIndex + 1];
            // 如果目标节点的下一个节点存在，插入到该节点之前
            if (targetNext) {
                parentNode.insertBefore(element, targetNext);
            }
            else {
                // 如果该节点不存在，则追加到末尾
                parentNode.appendChild(element);
            }
        }
    }
    else {
        parentNode.appendChild(element);
    }
}
exports.moveTo = moveTo;
//# sourceMappingURL=dom.js.map

/***/ }),

/***/ "7533":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return removeFromArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return isBrowser; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return isParent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return isAllowCapture; });
/* harmony import */ var _antv_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("6d77");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "e", function() { return _antv_util__WEBPACK_IMPORTED_MODULE_0__["isNil"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "d", function() { return _antv_util__WEBPACK_IMPORTED_MODULE_0__["isFunction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "h", function() { return _antv_util__WEBPACK_IMPORTED_MODULE_0__["isString"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "f", function() { return _antv_util__WEBPACK_IMPORTED_MODULE_0__["isObject"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "i", function() { return _antv_util__WEBPACK_IMPORTED_MODULE_0__["mix"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "a", function() { return _antv_util__WEBPACK_IMPORTED_MODULE_0__["each"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "k", function() { return _antv_util__WEBPACK_IMPORTED_MODULE_0__["upperFirst"]; });

function removeFromArray(arr, obj) {
    var index = arr.indexOf(obj);
    if (index !== -1) {
        arr.splice(index, 1);
    }
}
var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';

// 是否元素的父容器
function isParent(container, shape) {
    // 所有 shape 都是 canvas 的子元素
    if (container.isCanvas()) {
        return true;
    }
    var parent = shape.getParent();
    var isParent = false;
    while (parent) {
        if (parent === container) {
            isParent = true;
            break;
        }
        parent = parent.getParent();
    }
    return isParent;
}
function isAllowCapture(element) {
    // @ts-ignore
    return element.cfg.visible && element.cfg.capture;
}
//# sourceMappingURL=util.js.map

/***/ }),

/***/ "7559":
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__("139b"),
    isPrototype = __webpack_require__("fe0d"),
    nativeKeysIn = __webpack_require__("00d2");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.
 *
 * @private
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 */
function baseKeysIn(object) {
  if (!isObject(object)) {
    return nativeKeysIn(object);
  }
  var isProto = isPrototype(object),
      result = [];

  for (var key in object) {
    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {
      result.push(key);
    }
  }
  return result;
}

module.exports = baseKeysIn;


/***/ }),

/***/ "75d4":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview text
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var util_1 = __webpack_require__("6d77");
var detect_browser_1 = __webpack_require__("3f75");
var svg_1 = __webpack_require__("6865");
var constant_1 = __webpack_require__("7a93");
var base_1 = __webpack_require__("6cb2");
var LETTER_SPACING = 0.3;
var BASELINE_MAP = {
    top: 'before-edge',
    middle: 'central',
    bottom: 'after-edge',
    alphabetic: 'baseline',
    hanging: 'hanging',
};
// for FireFox
var BASELINE_MAP_FOR_FIREFOX = {
    top: 'text-before-edge',
    middle: 'central',
    bottom: 'text-after-edge',
    alphabetic: 'alphabetic',
    hanging: 'hanging',
};
var ANCHOR_MAP = {
    left: 'left',
    start: 'left',
    center: 'middle',
    right: 'end',
    end: 'end',
};
var Text = /** @class */ (function (_super) {
    tslib_1.__extends(Text, _super);
    function Text() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'text';
        _this.canFill = true;
        _this.canStroke = true;
        return _this;
    }
    Text.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: 'sans-serif', fontStyle: 'normal', fontWeight: 'normal', fontVariant: 'normal', textAlign: 'start', textBaseline: 'bottom' });
    };
    Text.prototype.createPath = function (context, targetAttrs) {
        var _this = this;
        var attrs = this.attr();
        var el = this.get('el');
        this._setFont();
        util_1.each(targetAttrs || attrs, function (value, attr) {
            if (attr === 'text') {
                _this._setText("" + value);
            }
            else if (attr === 'matrix' && value) {
                svg_1.setTransform(_this);
            }
            else if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
        el.setAttribute('paint-order', 'stroke');
        el.setAttribute('style', 'stroke-linecap:butt; stroke-linejoin:miter;');
    };
    Text.prototype._setFont = function () {
        var el = this.get('el');
        var _a = this.attr(), textBaseline = _a.textBaseline, textAlign = _a.textAlign;
        var browser = detect_browser_1.detect();
        if (browser && browser.name === 'firefox') {
            // compatible with FireFox browser, ref: https://github.com/antvis/g/issues/119
            el.setAttribute('dominant-baseline', BASELINE_MAP_FOR_FIREFOX[textBaseline] || 'alphabetic');
        }
        else {
            el.setAttribute('alignment-baseline', BASELINE_MAP[textBaseline] || 'baseline');
        }
        el.setAttribute('text-anchor', ANCHOR_MAP[textAlign] || 'left');
    };
    Text.prototype._setText = function (text) {
        var el = this.get('el');
        var _a = this.attr(), x = _a.x, _b = _a.textBaseline, baseline = _b === void 0 ? 'bottom' : _b;
        if (!text) {
            el.innerHTML = '';
        }
        else if (~text.indexOf('\n')) {
            var textArr = text.split('\n');
            var textLen_1 = textArr.length - 1;
            var arr_1 = '';
            util_1.each(textArr, function (segment, i) {
                if (i === 0) {
                    if (baseline === 'alphabetic') {
                        arr_1 += "<tspan x=\"" + x + "\" dy=\"" + -textLen_1 + "em\">" + segment + "</tspan>";
                    }
                    else if (baseline === 'top') {
                        arr_1 += "<tspan x=\"" + x + "\" dy=\"0.9em\">" + segment + "</tspan>";
                    }
                    else if (baseline === 'middle') {
                        arr_1 += "<tspan x=\"" + x + "\" dy=\"" + -(textLen_1 - 1) / 2 + "em\">" + segment + "</tspan>";
                    }
                    else if (baseline === 'bottom') {
                        arr_1 += "<tspan x=\"" + x + "\" dy=\"-" + (textLen_1 + LETTER_SPACING) + "em\">" + segment + "</tspan>";
                    }
                    else if (baseline === 'hanging') {
                        arr_1 += "<tspan x=\"" + x + "\" dy=\"" + (-(textLen_1 - 1) - LETTER_SPACING) + "em\">" + segment + "</tspan>";
                    }
                }
                else {
                    arr_1 += "<tspan x=\"" + x + "\" dy=\"1em\">" + segment + "</tspan>";
                }
            });
            el.innerHTML = arr_1;
        }
        else {
            el.innerHTML = text;
        }
    };
    return Text;
}(base_1.default));
exports.default = Text;
//# sourceMappingURL=text.js.map

/***/ }),

/***/ "7614":
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__("0034"),
    root = __webpack_require__("82c6");

/* Built-in method references that are verified to be native. */
var Map = getNative(root, 'Map');

module.exports = Map;


/***/ }),

/***/ "761b":
/***/ (function(module, exports, __webpack_require__) {

var identity = __webpack_require__("59e3"),
    overRest = __webpack_require__("31b4"),
    setToString = __webpack_require__("a978");

/**
 * The base implementation of `_.rest` which doesn't validate or coerce arguments.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @param {number} [start=func.length-1] The start position of the rest parameter.
 * @returns {Function} Returns the new function.
 */
function baseRest(func, start) {
  return setToString(overRest(func, start, identity), func + '');
}

module.exports = baseRest;


/***/ }),

/***/ "7678":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var isObjectLike = function (value) {
    /**
     * isObjectLike({}) => true
     * isObjectLike([1, 2, 3]) => true
     * isObjectLike(Function) => false
     * isObjectLike(null) => false
     */
    return typeof value === 'object' && value !== null;
};
exports.default = isObjectLike;
//# sourceMappingURL=is-object-like.js.map

/***/ }),

/***/ "7748":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__("ded0");
var aCallable = __webpack_require__("d0d3");
var anObject = __webpack_require__("9774");
var tryToString = __webpack_require__("dcd7");
var getIteratorMethod = __webpack_require__("4431");

var $TypeError = TypeError;

module.exports = function (argument, usingIterator) {
  var iteratorMethod = arguments.length < 2 ? getIteratorMethod(argument) : usingIterator;
  if (aCallable(iteratorMethod)) return anObject(call(iteratorMethod, argument));
  throw new $TypeError(tryToString(argument) + ' is not iterable');
};


/***/ }),

/***/ "7795":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var wellKnownSymbol = __webpack_require__("9a0b");

var ITERATOR = wellKnownSymbol('iterator');
var SAFE_CLOSING = false;

try {
  var called = 0;
  var iteratorWithReturn = {
    next: function () {
      return { done: !!called++ };
    },
    'return': function () {
      SAFE_CLOSING = true;
    }
  };
  iteratorWithReturn[ITERATOR] = function () {
    return this;
  };
  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing
  Array.from(iteratorWithReturn, function () { throw 2; });
} catch (error) { /* empty */ }

module.exports = function (exec, SKIP_CLOSING) {
  try {
    if (!SKIP_CLOSING && !SAFE_CLOSING) return false;
  } catch (error) { return false; } // workaround of old WebKit + `eval` bug
  var ITERATION_SUPPORT = false;
  try {
    var object = {};
    object[ITERATOR] = function () {
      return {
        next: function () {
          return { done: ITERATION_SUPPORT = true };
        }
      };
    };
    exec(object);
  } catch (error) { /* empty */ }
  return ITERATION_SUPPORT;
};


/***/ }),

/***/ "79e4":
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// addapted from the document.currentScript polyfill by Adam Miller
// MIT license
// source: https://github.com/amiller-gh/currentScript-polyfill

// added support for Firefox https://bugzilla.mozilla.org/show_bug.cgi?id=1620505

(function (root, factory) {
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else {}
}(typeof self !== 'undefined' ? self : this, function () {
  function getCurrentScript () {
    var descriptor = Object.getOwnPropertyDescriptor(document, 'currentScript')
    // for chrome
    if (!descriptor && 'currentScript' in document && document.currentScript) {
      return document.currentScript
    }

    // for other browsers with native support for currentScript
    if (descriptor && descriptor.get !== getCurrentScript && document.currentScript) {
      return document.currentScript
    }
  
    // IE 8-10 support script readyState
    // IE 11+ & Firefox support stack trace
    try {
      throw new Error();
    }
    catch (err) {
      // Find the second match for the "at" string to get file src url from stack.
      var ieStackRegExp = /.*at [^(]*\((.*):(.+):(.+)\)$/ig,
        ffStackRegExp = /@([^@]*):(\d+):(\d+)\s*$/ig,
        stackDetails = ieStackRegExp.exec(err.stack) || ffStackRegExp.exec(err.stack),
        scriptLocation = (stackDetails && stackDetails[1]) || false,
        line = (stackDetails && stackDetails[2]) || false,
        currentLocation = document.location.href.replace(document.location.hash, ''),
        pageSource,
        inlineScriptSourceRegExp,
        inlineScriptSource,
        scripts = document.getElementsByTagName('script'); // Live NodeList collection
  
      if (scriptLocation === currentLocation) {
        pageSource = document.documentElement.outerHTML;
        inlineScriptSourceRegExp = new RegExp('(?:[^\\n]+?\\n){0,' + (line - 2) + '}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*', 'i');
        inlineScriptSource = pageSource.replace(inlineScriptSourceRegExp, '$1').trim();
      }
  
      for (var i = 0; i < scripts.length; i++) {
        // If ready state is interactive, return the script tag
        if (scripts[i].readyState === 'interactive') {
          return scripts[i];
        }
  
        // If src matches, return the script tag
        if (scripts[i].src === scriptLocation) {
          return scripts[i];
        }
  
        // If inline source matches, return the script tag
        if (
          scriptLocation === currentLocation &&
          scripts[i].innerHTML &&
          scripts[i].innerHTML.trim() === inlineScriptSource
        ) {
          return scripts[i];
        }
      }
  
      // If no match, return null
      return null;
    }
  };

  return getCurrentScript
}));


/***/ }),

/***/ "79f3":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toIntegerOrInfinity = __webpack_require__("1fba");

var max = Math.max;
var min = Math.min;

// Helper for a popular repeating case of the spec:
// Let integer be ? ToInteger(index).
// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).
module.exports = function (index, length) {
  var integer = toIntegerOrInfinity(index);
  return integer < 0 ? max(integer + length, 0) : min(integer, length);
};


/***/ }),

/***/ "7a2d":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("9a80");
/* harmony import */ var _antv_util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("6d77");
/* harmony import */ var _antv_matrix_util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("d729");
/* harmony import */ var _util_util__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("7533");
/* harmony import */ var _util_matrix__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("456a");
/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("947d");






var transform = _antv_matrix_util__WEBPACK_IMPORTED_MODULE_2__["ext"].transform;
var MATRIX = 'matrix';
var CLONE_CFGS = ['zIndex', 'capture', 'visible', 'type'];
// 可以在 toAttrs 中设置，但不属于绘图属性的字段
var RESERVED_PORPS = ['repeat'];
var DELEGATION_SPLIT = ':';
var WILDCARD = '*';
// 需要考虑数组嵌套数组的场景
// 数组嵌套对象的场景不考虑
function _cloneArrayAttr(arr) {
    var result = [];
    for (var i = 0; i < arr.length; i++) {
        if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isArray"])(arr[i])) {
            result.push([].concat(arr[i]));
        }
        else {
            result.push(arr[i]);
        }
    }
    return result;
}
function getFormatFromAttrs(toAttrs, shape) {
    var fromAttrs = {};
    var attrs = shape.attrs;
    for (var k in toAttrs) {
        fromAttrs[k] = attrs[k];
    }
    return fromAttrs;
}
function getFormatToAttrs(props, shape) {
    var toAttrs = {};
    var attrs = shape.attr();
    Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["each"])(props, function (v, k) {
        if (RESERVED_PORPS.indexOf(k) === -1 && !Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isEqual"])(attrs[k], v)) {
            toAttrs[k] = v;
        }
    });
    return toAttrs;
}
function checkExistedAttrs(animations, animation) {
    if (animation.onFrame) {
        return animations;
    }
    var startTime = animation.startTime, delay = animation.delay, duration = animation.duration;
    var hasOwnProperty = Object.prototype.hasOwnProperty;
    Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["each"])(animations, function (item) {
        // 后一个动画开始执行的时间 < 前一个动画的结束时间 && 后一个动画的执行时间 > 前一个动画的延迟
        if (startTime + delay < item.startTime + item.delay + item.duration && duration > item.delay) {
            Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["each"])(animation.toAttrs, function (v, k) {
                if (hasOwnProperty.call(item.toAttrs, k)) {
                    delete item.toAttrs[k];
                    delete item.fromAttrs[k];
                }
            });
        }
    });
    return animations;
}
var Element = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(Element, _super);
    function Element(cfg) {
        var _this = _super.call(this, cfg) || this;
        /**
         * @protected
         * 图形属性
         * @type {ShapeAttrs}
         */
        _this.attrs = {};
        var attrs = _this.getDefaultAttrs();
        Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["mix"])(attrs, cfg.attrs);
        _this.attrs = attrs;
        _this.initAttrs(attrs);
        _this.initAnimate(); // 初始化动画
        return _this;
    }
    // override
    Element.prototype.getDefaultCfg = function () {
        return {
            visible: true,
            capture: true,
            zIndex: 0,
        };
    };
    /**
     * @protected
     * 获取默认的属相
     */
    Element.prototype.getDefaultAttrs = function () {
        return {
            matrix: this.getDefaultMatrix(),
            opacity: 1,
        };
    };
    /**
     * @protected
     * 一些方法调用会引起画布变化
     * @param {ChangeType} changeType 改变的类型
     */
    Element.prototype.onCanvasChange = function (changeType) { };
    /**
     * @protected
     * 初始化属性，有些属性需要加工
     * @param {object} attrs 属性值
     */
    Element.prototype.initAttrs = function (attrs) { };
    /**
     * @protected
     * 初始化动画
     */
    Element.prototype.initAnimate = function () {
        this.set('animable', true);
        this.set('animating', false);
    };
    Element.prototype.isGroup = function () {
        return false;
    };
    Element.prototype.getParent = function () {
        return this.get('parent');
    };
    Element.prototype.getCanvas = function () {
        return this.get('canvas');
    };
    Element.prototype.attr = function () {
        var _a;
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        var name = args[0], value = args[1];
        if (!name)
            return this.attrs;
        if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isObject"])(name)) {
            for (var k in name) {
                this.setAttr(k, name[k]);
            }
            this.afterAttrsChange(name);
            return this;
        }
        if (args.length === 2) {
            this.setAttr(name, value);
            this.afterAttrsChange((_a = {},
                _a[name] = value,
                _a));
            return this;
        }
        return this.attrs[name];
    };
    // 是否被裁剪，被裁剪则不显示，不参与拾取
    Element.prototype.isClipped = function (refX, refY) {
        var clip = this.getClip();
        return clip && !clip.isHit(refX, refY);
    };
    /**
     * 内部设置属性值的接口
     * @param {string} name 属性名
     * @param {any} value 属性值
     */
    Element.prototype.setAttr = function (name, value) {
        var originValue = this.attrs[name];
        if (originValue !== value) {
            this.attrs[name] = value;
            this.onAttrChange(name, value, originValue);
        }
    };
    /**
     * @protected
     * 属性值发生改变
     * @param {string} name 属性名
     * @param {any} value 属性值
     * @param {any} originValue 属性值
     */
    Element.prototype.onAttrChange = function (name, value, originValue) {
        if (name === 'matrix') {
            this.set('totalMatrix', null);
        }
    };
    /**
     * 属性更改后需要做的事情
     * @protected
     */
    Element.prototype.afterAttrsChange = function (targetAttrs) {
        if (this.cfg.isClipShape) {
            var applyTo = this.cfg.applyTo;
            if (applyTo) {
                applyTo.onCanvasChange('clip');
            }
        }
        else {
            this.onCanvasChange('attr');
        }
    };
    Element.prototype.show = function () {
        // 不是高频操作直接使用 set
        this.set('visible', true);
        this.onCanvasChange('show');
        return this;
    };
    Element.prototype.hide = function () {
        // 不是高频操作直接使用 set
        this.set('visible', false);
        this.onCanvasChange('hide');
        return this;
    };
    Element.prototype.setZIndex = function (zIndex) {
        this.set('zIndex', zIndex);
        var parent = this.getParent();
        if (parent) {
            // 改变 zIndex 不应该立即触发渲染 (调用 onCanvasChange('zIndex'))，需要经过 sort 再触发
            parent.sort();
        }
        return this;
    };
    Element.prototype.toFront = function () {
        var parent = this.getParent();
        if (!parent) {
            return;
        }
        var children = parent.getChildren();
        var el = this.get('el');
        var index = children.indexOf(this);
        children.splice(index, 1);
        children.push(this);
        this.onCanvasChange('zIndex');
    };
    Element.prototype.toBack = function () {
        var parent = this.getParent();
        if (!parent) {
            return;
        }
        var children = parent.getChildren();
        var el = this.get('el');
        var index = children.indexOf(this);
        children.splice(index, 1);
        children.unshift(this);
        this.onCanvasChange('zIndex');
    };
    Element.prototype.remove = function (destroy) {
        if (destroy === void 0) { destroy = true; }
        var parent = this.getParent();
        if (parent) {
            Object(_util_util__WEBPACK_IMPORTED_MODULE_3__[/* removeFromArray */ "j"])(parent.getChildren(), this);
            if (!parent.get('clearing')) {
                // 如果父元素正在清理，当前元素不触发 remove
                this.onCanvasChange('remove');
            }
        }
        else {
            this.onCanvasChange('remove');
        }
        if (destroy) {
            this.destroy();
        }
    };
    Element.prototype.resetMatrix = function () {
        this.attr(MATRIX, this.getDefaultMatrix());
        this.onCanvasChange('matrix');
    };
    Element.prototype.getMatrix = function () {
        return this.attr(MATRIX);
    };
    Element.prototype.setMatrix = function (m) {
        this.attr(MATRIX, m);
        this.onCanvasChange('matrix');
    };
    // 获取总的 matrix
    Element.prototype.getTotalMatrix = function () {
        var totalMatrix = this.cfg.totalMatrix;
        if (!totalMatrix) {
            var currentMatrix = this.attr('matrix');
            var parentMatrix = this.cfg.parentMatrix;
            if (parentMatrix && currentMatrix) {
                totalMatrix = Object(_util_matrix__WEBPACK_IMPORTED_MODULE_4__[/* multiplyMatrix */ "b"])(parentMatrix, currentMatrix);
            }
            else {
                totalMatrix = currentMatrix || parentMatrix;
            }
            this.set('totalMatrix', totalMatrix);
        }
        return totalMatrix;
    };
    // 上层分组设置 matrix
    Element.prototype.applyMatrix = function (matrix) {
        var currentMatrix = this.attr('matrix');
        var totalMatrix = null;
        if (matrix && currentMatrix) {
            totalMatrix = Object(_util_matrix__WEBPACK_IMPORTED_MODULE_4__[/* multiplyMatrix */ "b"])(matrix, currentMatrix);
        }
        else {
            totalMatrix = currentMatrix || matrix;
        }
        this.set('totalMatrix', totalMatrix);
        this.set('parentMatrix', matrix);
    };
    /**
     * @protected
     * 获取默认的矩阵
     * @returns {number[]|null} 默认的矩阵
     */
    Element.prototype.getDefaultMatrix = function () {
        return null;
    };
    // 将向量应用设置的矩阵
    Element.prototype.applyToMatrix = function (v) {
        var matrix = this.attr('matrix');
        if (matrix) {
            return Object(_util_matrix__WEBPACK_IMPORTED_MODULE_4__[/* multiplyVec2 */ "c"])(matrix, v);
        }
        return v;
    };
    // 根据设置的矩阵，将向量转换相对于图形/分组的位置
    Element.prototype.invertFromMatrix = function (v) {
        var matrix = this.attr('matrix');
        if (matrix) {
            var invertMatrix = Object(_util_matrix__WEBPACK_IMPORTED_MODULE_4__[/* invert */ "a"])(matrix);
            if (invertMatrix) {
                return Object(_util_matrix__WEBPACK_IMPORTED_MODULE_4__[/* multiplyVec2 */ "c"])(invertMatrix, v);
            }
        }
        return v;
    };
    // 设置 clip
    Element.prototype.setClip = function (clipCfg) {
        var canvas = this.getCanvas();
        // 应该只设置当前元素的 clip，不应该去修改 clip 本身，方便 clip 被复用
        // TODO: setClip 的传参既 shape 配置，也支持 shape 对象
        // const preShape = this.get('clipShape');
        // if (preShape) {
        //   // 将之前的 clipShape 销毁
        //   preShape.destroy();
        // }
        var clipShape = null;
        // 如果配置项为 null，则不移除 clipShape
        if (clipCfg) {
            var ShapeBase = this.getShapeBase();
            var shapeType = Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["upperFirst"])(clipCfg.type);
            var Cons = ShapeBase[shapeType];
            if (Cons) {
                clipShape = new Cons({
                    type: clipCfg.type,
                    isClipShape: true,
                    applyTo: this,
                    attrs: clipCfg.attrs,
                    canvas: canvas,
                });
            }
        }
        this.set('clipShape', clipShape);
        this.onCanvasChange('clip');
        return clipShape;
    };
    Element.prototype.getClip = function () {
        // 高频率调用的地方直接使用 this.cfg.xxx
        var clipShape = this.cfg.clipShape;
        // 未设置时返回 Null，保证一致性
        if (!clipShape) {
            return null;
        }
        return clipShape;
    };
    Element.prototype.clone = function () {
        var _this = this;
        var originAttrs = this.attrs;
        var attrs = {};
        Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["each"])(originAttrs, function (i, k) {
            if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isArray"])(originAttrs[k])) {
                attrs[k] = _cloneArrayAttr(originAttrs[k]);
            }
            else {
                attrs[k] = originAttrs[k];
            }
        });
        var cons = this.constructor;
        // @ts-ignore
        var clone = new cons({ attrs: attrs });
        Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["each"])(CLONE_CFGS, function (cfgName) {
            clone.set(cfgName, _this.get(cfgName));
        });
        return clone;
    };
    Element.prototype.destroy = function () {
        var destroyed = this.destroyed;
        if (destroyed) {
            return;
        }
        this.attrs = {};
        _super.prototype.destroy.call(this);
        // this.onCanvasChange('destroy');
    };
    /**
     * 是否处于动画暂停状态
     * @return {boolean} 是否处于动画暂停状态
     */
    Element.prototype.isAnimatePaused = function () {
        return this.get('_pause').isPaused;
    };
    /**
     * 执行动画，支持多种函数签名
     * 1. animate(toAttrs: ElementAttrs, duration: number, easing?: string, callback?: () => void, delay?: number)
     * 2. animate(onFrame: OnFrame, duration: number, easing?: string, callback?: () => void, delay?: number)
     * 3. animate(toAttrs: ElementAttrs, cfg: AnimateCfg)
     * 4. animate(onFrame: OnFrame, cfg: AnimateCfg)
     * 各个参数的含义为:
     *   toAttrs  动画最终状态
     *   onFrame  自定义帧动画函数
     *   duration 动画执行时间
     *   easing   动画缓动效果
     *   callback 动画执行后的回调
     *   delay    动画延迟时间
     */
    Element.prototype.animate = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        if (!this.get('timeline') && !this.get('canvas')) {
            return;
        }
        this.set('animating', true);
        var timeline = this.get('timeline');
        if (!timeline) {
            timeline = this.get('canvas').get('timeline');
            this.set('timeline', timeline);
        }
        var animations = this.get('animations') || [];
        // 初始化 tick
        if (!timeline.timer) {
            timeline.initTimer();
        }
        var toAttrs = args[0], duration = args[1], _a = args[2], easing = _a === void 0 ? 'easeLinear' : _a, _b = args[3], callback = _b === void 0 ? _antv_util__WEBPACK_IMPORTED_MODULE_1__["noop"] : _b, _c = args[4], delay = _c === void 0 ? 0 : _c;
        var onFrame;
        var repeat;
        var pauseCallback;
        var resumeCallback;
        var animateCfg;
        // 第二个参数，既可以是动画最终状态 toAttrs，也可以是自定义帧动画函数 onFrame
        if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isFunction"])(toAttrs)) {
            onFrame = toAttrs;
            toAttrs = {};
        }
        else if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isObject"])(toAttrs) && toAttrs.onFrame) {
            // 兼容 3.0 中的写法，onFrame 和 repeat 可在 toAttrs 中设置
            onFrame = toAttrs.onFrame;
            repeat = toAttrs.repeat;
        }
        // 第二个参数，既可以是执行时间 duration，也可以是动画参数 animateCfg
        if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isObject"])(duration)) {
            animateCfg = duration;
            duration = animateCfg.duration;
            easing = animateCfg.easing || 'easeLinear';
            delay = animateCfg.delay || 0;
            // animateCfg 中的设置优先级更高
            repeat = animateCfg.repeat || repeat || false;
            callback = animateCfg.callback || _antv_util__WEBPACK_IMPORTED_MODULE_1__["noop"];
            pauseCallback = animateCfg.pauseCallback || _antv_util__WEBPACK_IMPORTED_MODULE_1__["noop"];
            resumeCallback = animateCfg.resumeCallback || _antv_util__WEBPACK_IMPORTED_MODULE_1__["noop"];
        }
        else {
            // 第四个参数，既可以是回调函数 callback，也可以是延迟时间 delay
            if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isNumber"])(callback)) {
                delay = callback;
                callback = null;
            }
            // 第三个参数，既可以是缓动参数 easing，也可以是回调函数 callback
            if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isFunction"])(easing)) {
                callback = easing;
                easing = 'easeLinear';
            }
            else {
                easing = easing || 'easeLinear';
            }
        }
        var formatToAttrs = getFormatToAttrs(toAttrs, this);
        var animation = {
            fromAttrs: getFormatFromAttrs(formatToAttrs, this),
            toAttrs: formatToAttrs,
            duration: duration,
            easing: easing,
            repeat: repeat,
            callback: callback,
            pauseCallback: pauseCallback,
            resumeCallback: resumeCallback,
            delay: delay,
            startTime: timeline.getTime(),
            id: Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["uniqueId"])(),
            onFrame: onFrame,
            pathFormatted: false,
        };
        // 如果动画元素队列中已经有这个图形了
        if (animations.length > 0) {
            // 先检查是否需要合并属性。若有相同的动画，将该属性从前一个动画中删除,直接用后一个动画中
            animations = checkExistedAttrs(animations, animation);
        }
        else {
            // 否则将图形添加到动画元素队列
            timeline.addAnimator(this);
        }
        animations.push(animation);
        this.set('animations', animations);
        this.set('_pause', { isPaused: false });
    };
    /**
     * 停止动画
     * @param {boolean} toEnd 是否到动画的最终状态
     */
    Element.prototype.stopAnimate = function (toEnd) {
        var _this = this;
        if (toEnd === void 0) { toEnd = true; }
        var animations = this.get('animations');
        Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["each"])(animations, function (animation) {
            // 将动画执行到最后一帧
            if (toEnd) {
                if (animation.onFrame) {
                    _this.attr(animation.onFrame(1));
                }
                else {
                    _this.attr(animation.toAttrs);
                }
            }
            if (animation.callback) {
                // 动画停止时的回调
                animation.callback();
            }
        });
        this.set('animating', false);
        this.set('animations', []);
    };
    /**
     * 暂停动画
     */
    Element.prototype.pauseAnimate = function () {
        var timeline = this.get('timeline');
        var animations = this.get('animations');
        var pauseTime = timeline.getTime();
        Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["each"])(animations, function (animation) {
            animation._paused = true;
            animation._pauseTime = pauseTime;
            if (animation.pauseCallback) {
                // 动画暂停时的回调
                animation.pauseCallback();
            }
        });
        // 记录下是在什么时候暂停的
        this.set('_pause', {
            isPaused: true,
            pauseTime: pauseTime,
        });
        return this;
    };
    /**
     * 恢复动画
     */
    Element.prototype.resumeAnimate = function () {
        var timeline = this.get('timeline');
        var current = timeline.getTime();
        var animations = this.get('animations');
        var pauseTime = this.get('_pause').pauseTime;
        // 之后更新属性需要计算动画已经执行的时长，如果暂停了，就把初始时间调后
        Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["each"])(animations, function (animation) {
            animation.startTime = animation.startTime + (current - pauseTime);
            animation._paused = false;
            animation._pauseTime = null;
            if (animation.resumeCallback) {
                animation.resumeCallback();
            }
        });
        this.set('_pause', {
            isPaused: false,
        });
        this.set('animations', animations);
        return this;
    };
    /**
     * 触发委托事件
     * @param  {string}     type 事件类型
     * @param  {GraphEvent} eventObj 事件对象
     */
    Element.prototype.emitDelegation = function (type, eventObj) {
        var _this = this;
        var paths = eventObj.propagationPath;
        var events = this.getEvents();
        var relativeShape;
        if (type === 'mouseenter') {
            relativeShape = eventObj.fromShape;
        }
        else if (type === 'mouseleave') {
            relativeShape = eventObj.toShape;
        }
        var _loop_1 = function (i) {
            var element = paths[i];
            // 暂定跟 name 绑定
            var name_1 = element.get('name');
            if (name_1) {
                // 第一个 mouseenter 和 mouseleave 的停止即可，因为后面的都是前面的 Parent
                if (
                // 只有 element 是 Group 或者 Canvas 的时候，才需要判断 isParent
                (element.isGroup() || (element.isCanvas && element.isCanvas())) &&
                    relativeShape &&
                    Object(_util_util__WEBPACK_IMPORTED_MODULE_3__[/* isParent */ "g"])(element, relativeShape)) {
                    return "break";
                }
                if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["isArray"])(name_1)) {
                    Object(_antv_util__WEBPACK_IMPORTED_MODULE_1__["each"])(name_1, function (subName) {
                        _this.emitDelegateEvent(element, subName, eventObj);
                    });
                }
                else {
                    this_1.emitDelegateEvent(element, name_1, eventObj);
                }
            }
        };
        var this_1 = this;
        // 至少有一个对象，且第一个对象为 shape
        for (var i = 0; i < paths.length; i++) {
            var state_1 = _loop_1(i);
            if (state_1 === "break")
                break;
        }
    };
    Element.prototype.emitDelegateEvent = function (element, name, eventObj) {
        var events = this.getEvents();
        // 事件委托的形式 name:type
        var eventName = name + DELEGATION_SPLIT + eventObj.type;
        if (events[eventName] || events[WILDCARD]) {
            // 对于通配符 *，事件名称 = 委托事件名称
            eventObj.name = eventName;
            eventObj.currentTarget = element;
            eventObj.delegateTarget = this;
            // 将委托事件的监听对象 delegateObject 挂载到事件对象上
            eventObj.delegateObject = element.get('delegateObject');
            this.emit(eventName, eventObj);
        }
    };
    /**
     * 移动元素
     * @param {number} translateX 水平移动距离
     * @param {number} translateY 垂直移动距离
     * @return {IElement} 元素
     */
    Element.prototype.translate = function (translateX, translateY) {
        if (translateX === void 0) { translateX = 0; }
        if (translateY === void 0) { translateY = 0; }
        var matrix = this.getMatrix();
        var newMatrix = transform(matrix, [['t', translateX, translateY]]);
        this.setMatrix(newMatrix);
        return this;
    };
    /**
     * 移动元素到目标位置
     * @param {number} targetX 目标位置的水平坐标
     * @param {number} targetX 目标位置的垂直坐标
     * @return {IElement} 元素
     */
    Element.prototype.move = function (targetX, targetY) {
        var x = this.attr('x') || 0;
        var y = this.attr('y') || 0;
        this.translate(targetX - x, targetY - y);
        return this;
    };
    /**
     * 移动元素到目标位置，等价于 move 方法。由于 moveTo 的语义性更强，因此在文档中推荐使用 moveTo 方法
     * @param {number} targetX 目标位置的 x 轴坐标
     * @param {number} targetY 目标位置的 y 轴坐标
     * @return {IElement} 元素
     */
    Element.prototype.moveTo = function (targetX, targetY) {
        return this.move(targetX, targetY);
    };
    /**
     * 缩放元素
     * @param {number} ratioX 水平缩放比例
     * @param {number} ratioY 垂直缩放比例
     * @return {IElement} 元素
     */
    Element.prototype.scale = function (ratioX, ratioY) {
        var matrix = this.getMatrix();
        var newMatrix = transform(matrix, [['s', ratioX, ratioY || ratioX]]);
        this.setMatrix(newMatrix);
        return this;
    };
    /**
     * 以画布左上角 (0, 0) 为中心旋转元素
     * @param {number} radian 旋转角度(弧度值)
     * @return {IElement} 元素
     */
    Element.prototype.rotate = function (radian) {
        var matrix = this.getMatrix();
        var newMatrix = transform(matrix, [['r', radian]]);
        this.setMatrix(newMatrix);
        return this;
    };
    /**
     * 以起始点为中心旋转元素
     * @param {number} radian 旋转角度(弧度值)
     * @return {IElement} 元素
     */
    Element.prototype.rotateAtStart = function (rotate) {
        var _a = this.attr(), x = _a.x, y = _a.y;
        var matrix = this.getMatrix();
        var newMatrix = transform(matrix, [
            ['t', -x, -y],
            ['r', rotate],
            ['t', x, y],
        ]);
        this.setMatrix(newMatrix);
        return this;
    };
    /**
     * 以任意点 (x, y) 为中心旋转元素
     * @param {number} radian 旋转角度(弧度值)
     * @return {IElement} 元素
     */
    Element.prototype.rotateAtPoint = function (x, y, rotate) {
        var matrix = this.getMatrix();
        var newMatrix = transform(matrix, [
            ['t', -x, -y],
            ['r', rotate],
            ['t', x, y],
        ]);
        this.setMatrix(newMatrix);
        return this;
    };
    return Element;
}(_base__WEBPACK_IMPORTED_MODULE_5__[/* default */ "a"]));
/* harmony default export */ __webpack_exports__["a"] = (Element);
//# sourceMappingURL=element.js.map

/***/ }),

/***/ "7a83":
/***/ (function(module, exports, __webpack_require__) {

var isKeyable = __webpack_require__("6dec");

/**
 * Gets the data for `map`.
 *
 * @private
 * @param {Object} map The map to query.
 * @param {string} key The reference key.
 * @returns {*} Returns the map data.
 */
function getMapData(map, key) {
  var data = map.__data__;
  return isKeyable(key)
    ? data[typeof key == 'string' ? 'string' : 'hash']
    : data.map;
}

module.exports = getMapData;


/***/ }),

/***/ "7a93":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.EVENTS = exports.SVG_ATTR_MAP = exports.SHAPE_TO_TAGS = void 0;
exports.SHAPE_TO_TAGS = {
    rect: 'path',
    circle: 'circle',
    line: 'line',
    path: 'path',
    marker: 'path',
    text: 'text',
    polyline: 'polyline',
    polygon: 'polygon',
    image: 'image',
    ellipse: 'ellipse',
    dom: 'foreignObject',
};
exports.SVG_ATTR_MAP = {
    opacity: 'opacity',
    fillStyle: 'fill',
    fill: 'fill',
    fillOpacity: 'fill-opacity',
    strokeStyle: 'stroke',
    strokeOpacity: 'stroke-opacity',
    stroke: 'stroke',
    x: 'x',
    y: 'y',
    r: 'r',
    rx: 'rx',
    ry: 'ry',
    width: 'width',
    height: 'height',
    x1: 'x1',
    x2: 'x2',
    y1: 'y1',
    y2: 'y2',
    lineCap: 'stroke-linecap',
    lineJoin: 'stroke-linejoin',
    lineWidth: 'stroke-width',
    lineDash: 'stroke-dasharray',
    lineDashOffset: 'stroke-dashoffset',
    miterLimit: 'stroke-miterlimit',
    font: 'font',
    fontSize: 'font-size',
    fontStyle: 'font-style',
    fontVariant: 'font-variant',
    fontWeight: 'font-weight',
    fontFamily: 'font-family',
    startArrow: 'marker-start',
    endArrow: 'marker-end',
    path: 'd',
    class: 'class',
    id: 'id',
    style: 'style',
    preserveAspectRatio: 'preserveAspectRatio',
};
exports.EVENTS = [
    'click',
    'mousedown',
    'mouseup',
    'dblclick',
    'contextmenu',
    'mouseenter',
    'mouseleave',
    'mouseover',
    'mouseout',
    'mousemove',
    'wheel',
];
//# sourceMappingURL=constant.js.map

/***/ }),

/***/ "7b4d":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("9a80");
/* harmony import */ var _element__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("7a2d");
/* harmony import */ var _util_matrix__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("456a");



var AbstractShape = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(AbstractShape, _super);
    function AbstractShape(cfg) {
        return _super.call(this, cfg) || this;
    }
    // 是否在包围盒内
    AbstractShape.prototype._isInBBox = function (refX, refY) {
        var bbox = this.getBBox();
        return bbox.minX <= refX && bbox.maxX >= refX && bbox.minY <= refY && bbox.maxY >= refY;
    };
    /**
     * 属性更改后需要做的事情
     * @protected
     * @param {ShapeAttrs} targetAttrs 渲染的图像属性
     */
    AbstractShape.prototype.afterAttrsChange = function (targetAttrs) {
        _super.prototype.afterAttrsChange.call(this, targetAttrs);
        this.clearCacheBBox();
    };
    // 计算包围盒时，需要缓存，这是一个高频的操作
    AbstractShape.prototype.getBBox = function () {
        var bbox = this.cfg.bbox;
        if (!bbox) {
            bbox = this.calculateBBox();
            this.set('bbox', bbox);
        }
        return bbox;
    };
    // 计算相对于画布的包围盒
    AbstractShape.prototype.getCanvasBBox = function () {
        var canvasBBox = this.cfg.canvasBBox;
        if (!canvasBBox) {
            canvasBBox = this.calculateCanvasBBox();
            this.set('canvasBBox', canvasBBox);
        }
        return canvasBBox;
    };
    AbstractShape.prototype.applyMatrix = function (matrix) {
        _super.prototype.applyMatrix.call(this, matrix);
        // 清理掉缓存的包围盒
        this.set('canvasBBox', null);
    };
    /**
     * 计算相对于画布的包围盒，默认等同于 bbox
     * @return {BBox} 包围盒
     */
    AbstractShape.prototype.calculateCanvasBBox = function () {
        var bbox = this.getBBox();
        var totalMatrix = this.getTotalMatrix();
        var minX = bbox.minX, minY = bbox.minY, maxX = bbox.maxX, maxY = bbox.maxY;
        if (totalMatrix) {
            var topLeft = Object(_util_matrix__WEBPACK_IMPORTED_MODULE_2__[/* multiplyVec2 */ "c"])(totalMatrix, [bbox.minX, bbox.minY]);
            var topRight = Object(_util_matrix__WEBPACK_IMPORTED_MODULE_2__[/* multiplyVec2 */ "c"])(totalMatrix, [bbox.maxX, bbox.minY]);
            var bottomLeft = Object(_util_matrix__WEBPACK_IMPORTED_MODULE_2__[/* multiplyVec2 */ "c"])(totalMatrix, [bbox.minX, bbox.maxY]);
            var bottomRight = Object(_util_matrix__WEBPACK_IMPORTED_MODULE_2__[/* multiplyVec2 */ "c"])(totalMatrix, [bbox.maxX, bbox.maxY]);
            minX = Math.min(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);
            maxX = Math.max(topLeft[0], topRight[0], bottomLeft[0], bottomRight[0]);
            minY = Math.min(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);
            maxY = Math.max(topLeft[1], topRight[1], bottomLeft[1], bottomRight[1]);
        }
        var attrs = this.attrs;
        // 如果存在 shadow 则计算 shadow
        if (attrs.shadowColor) {
            var _a = attrs.shadowBlur, shadowBlur = _a === void 0 ? 0 : _a, _b = attrs.shadowOffsetX, shadowOffsetX = _b === void 0 ? 0 : _b, _c = attrs.shadowOffsetY, shadowOffsetY = _c === void 0 ? 0 : _c;
            var shadowLeft = minX - shadowBlur + shadowOffsetX;
            var shadowRight = maxX + shadowBlur + shadowOffsetX;
            var shadowTop = minY - shadowBlur + shadowOffsetY;
            var shadowBottom = maxY + shadowBlur + shadowOffsetY;
            minX = Math.min(minX, shadowLeft);
            maxX = Math.max(maxX, shadowRight);
            minY = Math.min(minY, shadowTop);
            maxY = Math.max(maxY, shadowBottom);
        }
        return {
            x: minX,
            y: minY,
            minX: minX,
            minY: minY,
            maxX: maxX,
            maxY: maxY,
            width: maxX - minX,
            height: maxY - minY,
        };
    };
    /**
     * @protected
     * 清理缓存的 bbox
     */
    AbstractShape.prototype.clearCacheBBox = function () {
        this.set('bbox', null);
        this.set('canvasBBox', null);
    };
    // 实现接口
    AbstractShape.prototype.isClipShape = function () {
        return this.get('isClipShape');
    };
    /**
     * @protected
     * 不同的图形自己实现是否在图形内部的逻辑，要判断边和填充区域
     * @param  {number}  refX 相对于图形的坐标 x
     * @param  {number}  refY 相对于图形的坐标 Y
     * @return {boolean} 点是否在图形内部
     */
    AbstractShape.prototype.isInShape = function (refX, refY) {
        return false;
    };
    /**
     * 是否仅仅使用 BBox 检测就可以判定拾取到图形
     * 默认是 false，但是有些图形例如 image、marker 等都可直接使用 BBox 的检测而不需要使用图形拾取
     * @return {Boolean} 仅仅使用 BBox 进行拾取
     */
    AbstractShape.prototype.isOnlyHitBox = function () {
        return false;
    };
    // 不同的 Shape 各自实现
    AbstractShape.prototype.isHit = function (x, y) {
        var startArrowShape = this.get('startArrowShape');
        var endArrowShape = this.get('endArrowShape');
        var vec = [x, y, 1];
        vec = this.invertFromMatrix(vec);
        var refX = vec[0], refY = vec[1];
        var inBBox = this._isInBBox(refX, refY);
        // 跳过图形的拾取，在某些图形中可以省略一倍的检测成本
        if (this.isOnlyHitBox()) {
            return inBBox;
        }
        // 被裁减掉的和不在包围盒内的不进行计算
        if (inBBox && !this.isClipped(refX, refY)) {
            // 对图形进行拾取判断
            if (this.isInShape(refX, refY)) {
                return true;
            }
            // 对起始箭头进行拾取判断
            if (startArrowShape && startArrowShape.isHit(refX, refY)) {
                return true;
            }
            // 对结束箭头进行拾取判断
            if (endArrowShape && endArrowShape.isHit(refX, refY)) {
                return true;
            }
        }
        return false;
    };
    return AbstractShape;
}(_element__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"]));
/* harmony default export */ __webpack_exports__["a"] = (AbstractShape);
//# sourceMappingURL=shape.js.map

/***/ }),

/***/ "7bd5":
/***/ (function(module, exports) {

/**
 * Removes all key-value entries from the list cache.
 *
 * @private
 * @name clear
 * @memberOf ListCache
 */
function listCacheClear() {
  this.__data__ = [];
  this.size = 0;
}

module.exports = listCacheClear;


/***/ }),

/***/ "7c1c":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// IE8- don't enum bug keys
module.exports = [
  'constructor',
  'hasOwnProperty',
  'isPrototypeOf',
  'propertyIsEnumerable',
  'toLocaleString',
  'toString',
  'valueOf'
];


/***/ }),

/***/ "7ca1":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var flattenIntoArray = __webpack_require__("cfbf");
var toObject = __webpack_require__("8ec0");
var lengthOfArrayLike = __webpack_require__("8269");
var toIntegerOrInfinity = __webpack_require__("1fba");
var arraySpeciesCreate = __webpack_require__("dda1");

// `Array.prototype.flat` method
// https://tc39.es/ecma262/#sec-array.prototype.flat
$({ target: 'Array', proto: true }, {
  flat: function flat(/* depthArg = 1 */) {
    var depthArg = arguments.length ? arguments[0] : undefined;
    var O = toObject(this);
    var sourceLen = lengthOfArrayLike(O);
    var A = arraySpeciesCreate(O, 0);
    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toIntegerOrInfinity(depthArg));
    return A;
  }
});


/***/ }),

/***/ "7cb3":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var NativePromiseConstructor = __webpack_require__("b885");
var isCallable = __webpack_require__("fe72");
var isForced = __webpack_require__("cc6e");
var inspectSource = __webpack_require__("c89e");
var wellKnownSymbol = __webpack_require__("9a0b");
var ENVIRONMENT = __webpack_require__("a232");
var IS_PURE = __webpack_require__("6e09");
var V8_VERSION = __webpack_require__("8423");

var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;
var SPECIES = wellKnownSymbol('species');
var SUBCLASSING = false;
var NATIVE_PROMISE_REJECTION_EVENT = isCallable(globalThis.PromiseRejectionEvent);

var FORCED_PROMISE_CONSTRUCTOR = isForced('Promise', function () {
  var PROMISE_CONSTRUCTOR_SOURCE = inspectSource(NativePromiseConstructor);
  var GLOBAL_CORE_JS_PROMISE = PROMISE_CONSTRUCTOR_SOURCE !== String(NativePromiseConstructor);
  // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables
  // https://bugs.chromium.org/p/chromium/issues/detail?id=830565
  // We can't detect it synchronously, so just check versions
  if (!GLOBAL_CORE_JS_PROMISE && V8_VERSION === 66) return true;
  // We need Promise#{ catch, finally } in the pure version for preventing prototype pollution
  if (IS_PURE && !(NativePromisePrototype['catch'] && NativePromisePrototype['finally'])) return true;
  // We can't use @@species feature detection in V8 since it causes
  // deoptimization and performance degradation
  // https://github.com/zloirock/core-js/issues/679
  if (!V8_VERSION || V8_VERSION < 51 || !/native code/.test(PROMISE_CONSTRUCTOR_SOURCE)) {
    // Detect correctness of subclassing with @@species support
    var promise = new NativePromiseConstructor(function (resolve) { resolve(1); });
    var FakePromise = function (exec) {
      exec(function () { /* empty */ }, function () { /* empty */ });
    };
    var constructor = promise.constructor = {};
    constructor[SPECIES] = FakePromise;
    SUBCLASSING = promise.then(function () { /* empty */ }) instanceof FakePromise;
    if (!SUBCLASSING) return true;
  // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test
  } return !GLOBAL_CORE_JS_PROMISE && (ENVIRONMENT === 'BROWSER' || ENVIRONMENT === 'DENO') && !NATIVE_PROMISE_REJECTION_EVENT;
});

module.exports = {
  CONSTRUCTOR: FORCED_PROMISE_CONSTRUCTOR,
  REJECTION_EVENT: NATIVE_PROMISE_REJECTION_EVENT,
  SUBCLASSING: SUBCLASSING
};


/***/ }),

/***/ "7d02":
/***/ (function(module, exports, __webpack_require__) {

var Stack = __webpack_require__("a857"),
    assignMergeValue = __webpack_require__("dc5a"),
    baseFor = __webpack_require__("9979"),
    baseMergeDeep = __webpack_require__("3697"),
    isObject = __webpack_require__("139b"),
    keysIn = __webpack_require__("ac69"),
    safeGet = __webpack_require__("4ca9");

/**
 * The base implementation of `_.merge` without support for multiple sources.
 *
 * @private
 * @param {Object} object The destination object.
 * @param {Object} source The source object.
 * @param {number} srcIndex The index of `source`.
 * @param {Function} [customizer] The function to customize merged values.
 * @param {Object} [stack] Tracks traversed source values and their merged
 *  counterparts.
 */
function baseMerge(object, source, srcIndex, customizer, stack) {
  if (object === source) {
    return;
  }
  baseFor(source, function(srcValue, key) {
    stack || (stack = new Stack);
    if (isObject(srcValue)) {
      baseMergeDeep(object, source, key, srcIndex, baseMerge, customizer, stack);
    }
    else {
      var newValue = customizer
        ? customizer(safeGet(object, key), srcValue, (key + ''), object, source, stack)
        : undefined;

      if (newValue === undefined) {
        newValue = srcValue;
      }
      assignMergeValue(object, key, newValue);
    }
  }, keysIn);
}

module.exports = baseMerge;


/***/ }),

/***/ "7d025":
/***/ (function(module, exports, __webpack_require__) {

var assignValue = __webpack_require__("7041"),
    castPath = __webpack_require__("6a1d"),
    isIndex = __webpack_require__("4de3"),
    isObject = __webpack_require__("139b"),
    toKey = __webpack_require__("d202");

/**
 * The base implementation of `_.set`.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {Array|string} path The path of the property to set.
 * @param {*} value The value to set.
 * @param {Function} [customizer] The function to customize path creation.
 * @returns {Object} Returns `object`.
 */
function baseSet(object, path, value, customizer) {
  if (!isObject(object)) {
    return object;
  }
  path = castPath(path, object);

  var index = -1,
      length = path.length,
      lastIndex = length - 1,
      nested = object;

  while (nested != null && ++index < length) {
    var key = toKey(path[index]),
        newValue = value;

    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {
      return object;
    }

    if (index != lastIndex) {
      var objValue = nested[key];
      newValue = customizer ? customizer(objValue, key, nested) : undefined;
      if (newValue === undefined) {
        newValue = isObject(objValue)
          ? objValue
          : (isIndex(path[index + 1]) ? [] : {});
      }
    }
    assignValue(nested, key, newValue);
    nested = nested[key];
  }
  return object;
}

module.exports = baseSet;


/***/ }),

/***/ "7e1e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var defineBuiltInAccessor = __webpack_require__("c0b5");
var isObject = __webpack_require__("d2cb");
var isPossiblePrototype = __webpack_require__("bbc6");
var toObject = __webpack_require__("8ec0");
var requireObjectCoercible = __webpack_require__("deed");

// eslint-disable-next-line es/no-object-getprototypeof -- safe
var getPrototypeOf = Object.getPrototypeOf;
// eslint-disable-next-line es/no-object-setprototypeof -- safe
var setPrototypeOf = Object.setPrototypeOf;
var ObjectPrototype = Object.prototype;
var PROTO = '__proto__';

// `Object.prototype.__proto__` accessor
// https://tc39.es/ecma262/#sec-object.prototype.__proto__
if (DESCRIPTORS && getPrototypeOf && setPrototypeOf && !(PROTO in ObjectPrototype)) try {
  defineBuiltInAccessor(ObjectPrototype, PROTO, {
    configurable: true,
    get: function __proto__() {
      return getPrototypeOf(toObject(this));
    },
    set: function __proto__(proto) {
      var O = requireObjectCoercible(this);
      if (isPossiblePrototype(proto) && isObject(O)) {
        setPrototypeOf(O, proto);
      }
    }
  });
} catch (error) { /* empty */ }


/***/ }),

/***/ "7e5b":
/***/ (function(module, exports) {

/**
 * This method returns `false`.
 *
 * @static
 * @memberOf _
 * @since 4.13.0
 * @category Util
 * @returns {boolean} Returns `false`.
 * @example
 *
 * _.times(2, _.stubFalse);
 * // => [false, false]
 */
function stubFalse() {
  return false;
}

module.exports = stubFalse;


/***/ }),

/***/ "7ea4":
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf = __webpack_require__("1a8d");

/**
 * Sets the list cache `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf ListCache
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the list cache instance.
 */
function listCacheSet(key, value) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    ++this.size;
    data.push([key, value]);
  } else {
    data[index][1] = value;
  }
  return this;
}

module.exports = listCacheSet;


/***/ }),

/***/ "802c":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isConstructor = __webpack_require__("c185");
var tryToString = __webpack_require__("dcd7");

var $TypeError = TypeError;

// `Assert: IsConstructor(argument) is true`
module.exports = function (argument) {
  if (isConstructor(argument)) return argument;
  throw new $TypeError(tryToString(argument) + ' is not a constructor');
};


/***/ }),

/***/ "80b9":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var definePropertyModule = __webpack_require__("80ea");
var createPropertyDescriptor = __webpack_require__("6638");

module.exports = DESCRIPTORS ? function (object, key, value) {
  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));
} : function (object, key, value) {
  object[key] = value;
  return object;
};


/***/ }),

/***/ "80ea":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var IE8_DOM_DEFINE = __webpack_require__("6621");
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__("1349");
var anObject = __webpack_require__("9774");
var toPropertyKey = __webpack_require__("bc9d");

var $TypeError = TypeError;
// eslint-disable-next-line es/no-object-defineproperty -- safe
var $defineProperty = Object.defineProperty;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;
var ENUMERABLE = 'enumerable';
var CONFIGURABLE = 'configurable';
var WRITABLE = 'writable';

// `Object.defineProperty` method
// https://tc39.es/ecma262/#sec-object.defineproperty
exports.f = DESCRIPTORS ? V8_PROTOTYPE_DEFINE_BUG ? function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (typeof O === 'function' && P === 'prototype' && 'value' in Attributes && WRITABLE in Attributes && !Attributes[WRITABLE]) {
    var current = $getOwnPropertyDescriptor(O, P);
    if (current && current[WRITABLE]) {
      O[P] = Attributes.value;
      Attributes = {
        configurable: CONFIGURABLE in Attributes ? Attributes[CONFIGURABLE] : current[CONFIGURABLE],
        enumerable: ENUMERABLE in Attributes ? Attributes[ENUMERABLE] : current[ENUMERABLE],
        writable: false
      };
    }
  } return $defineProperty(O, P, Attributes);
} : $defineProperty : function defineProperty(O, P, Attributes) {
  anObject(O);
  P = toPropertyKey(P);
  anObject(Attributes);
  if (IE8_DOM_DEFINE) try {
    return $defineProperty(O, P, Attributes);
  } catch (error) { /* empty */ }
  if ('get' in Attributes || 'set' in Attributes) throw new $TypeError('Accessors not supported');
  if ('value' in Attributes) O[P] = Attributes.value;
  return O;
};


/***/ }),

/***/ "81fa":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var getBuiltIn = __webpack_require__("4fed");
var hasOwn = __webpack_require__("85ed");
var toString = __webpack_require__("502b");
var shared = __webpack_require__("f823");
var NATIVE_SYMBOL_REGISTRY = __webpack_require__("01a3");

var StringToSymbolRegistry = shared('string-to-symbol-registry');
var SymbolToStringRegistry = shared('symbol-to-string-registry');

// `Symbol.for` method
// https://tc39.es/ecma262/#sec-symbol.for
$({ target: 'Symbol', stat: true, forced: !NATIVE_SYMBOL_REGISTRY }, {
  'for': function (key) {
    var string = toString(key);
    if (hasOwn(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];
    var symbol = getBuiltIn('Symbol')(string);
    StringToSymbolRegistry[string] = symbol;
    SymbolToStringRegistry[symbol] = string;
    return symbol;
  }
});


/***/ }),

/***/ "81fd":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var NATIVE_SYMBOL = __webpack_require__("1942");
var fails = __webpack_require__("e835");
var getOwnPropertySymbolsModule = __webpack_require__("a826");
var toObject = __webpack_require__("8ec0");

// V8 ~ Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives
// https://bugs.chromium.org/p/v8/issues/detail?id=3443
var FORCED = !NATIVE_SYMBOL || fails(function () { getOwnPropertySymbolsModule.f(1); });

// `Object.getOwnPropertySymbols` method
// https://tc39.es/ecma262/#sec-object.getownpropertysymbols
$({ target: 'Object', stat: true, forced: FORCED }, {
  getOwnPropertySymbols: function getOwnPropertySymbols(it) {
    var $getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
    return $getOwnPropertySymbols ? $getOwnPropertySymbols(toObject(it)) : [];
  }
});


/***/ }),

/***/ "8237":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.refreshElement = exports.drawChildren = void 0;
var svg_1 = __webpack_require__("6865");
var dom_1 = __webpack_require__("7431");
function drawChildren(context, children) {
    children.forEach(function (child) {
        child.draw(context);
    });
}
exports.drawChildren = drawChildren;
/**
 * 更新元素，包括 group 和 shape
 * @param {IElement} element       SVG 元素
 * @param {ChangeType} changeType  更新类型
 */
function refreshElement(element, changeType) {
    // 对于还没有挂载到画布下的元素，canvas 可能为空
    var canvas = element.get('canvas');
    // 只有挂载到画布下，才对元素进行实际渲染
    if (canvas && canvas.get('autoDraw')) {
        var context = canvas.get('context');
        var parent_1 = element.getParent();
        var parentChildren = parent_1 ? parent_1.getChildren() : [canvas];
        var el = element.get('el');
        if (changeType === 'remove') {
            var isClipShape = element.get('isClipShape');
            // 对于 clip，不仅需要将 clipShape 对于的 SVG 元素删除，还需要将上层的 clipPath 元素也删除
            if (isClipShape) {
                var clipPathEl = el && el.parentNode;
                var defsEl = clipPathEl && clipPathEl.parentNode;
                if (clipPathEl && defsEl) {
                    defsEl.removeChild(clipPathEl);
                }
            }
            else if (el && el.parentNode) {
                el.parentNode.removeChild(el);
            }
        }
        else if (changeType === 'show') {
            el.setAttribute('visibility', 'visible');
        }
        else if (changeType === 'hide') {
            el.setAttribute('visibility', 'hidden');
        }
        else if (changeType === 'zIndex') {
            dom_1.moveTo(el, parentChildren.indexOf(element));
        }
        else if (changeType === 'sort') {
            var children_1 = element.get('children');
            if (children_1 && children_1.length) {
                dom_1.sortDom(element, function (a, b) {
                    return children_1.indexOf(a) - children_1.indexOf(b) ? 1 : 0;
                });
            }
        }
        else if (changeType === 'clear') {
            // el maybe null for group
            if (el) {
                el.innerHTML = '';
            }
        }
        else if (changeType === 'matrix') {
            svg_1.setTransform(element);
        }
        else if (changeType === 'clip') {
            svg_1.setClip(element, context);
        }
        else if (changeType === 'attr') {
            // 已在 afterAttrsChange 进行了处理，此处 do nothing
        }
        else if (changeType === 'add') {
            element.draw(context);
        }
    }
}
exports.refreshElement = refreshElement;
//# sourceMappingURL=draw.js.map

/***/ }),

/***/ "8269":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toLength = __webpack_require__("5f1c");

// `LengthOfArrayLike` abstract operation
// https://tc39.es/ecma262/#sec-lengthofarraylike
module.exports = function (obj) {
  return toLength(obj.length);
};


/***/ }),

/***/ "82b1":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");
var isCallable = __webpack_require__("fe72");
var isObject = __webpack_require__("d2cb");
var create = __webpack_require__("6943");
var getPrototypeOf = __webpack_require__("4b29");
var defineBuiltIn = __webpack_require__("f303");
var wellKnownSymbol = __webpack_require__("9a0b");
var IS_PURE = __webpack_require__("6e09");

var ITERATOR = wellKnownSymbol('iterator');
var BUGGY_SAFARI_ITERATORS = false;

// `%IteratorPrototype%` object
// https://tc39.es/ecma262/#sec-%iteratorprototype%-object
var IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;

/* eslint-disable es/no-array-prototype-keys -- safe */
if ([].keys) {
  arrayIterator = [].keys();
  // Safari 8 has buggy iterators w/o `next`
  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;
  else {
    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));
    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;
  }
}

var NEW_ITERATOR_PROTOTYPE = !isObject(IteratorPrototype) || fails(function () {
  var test = {};
  // FF44- legacy iterators case
  return IteratorPrototype[ITERATOR].call(test) !== test;
});

if (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};
else if (IS_PURE) IteratorPrototype = create(IteratorPrototype);

// `%IteratorPrototype%[@@iterator]()` method
// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator
if (!isCallable(IteratorPrototype[ITERATOR])) {
  defineBuiltIn(IteratorPrototype, ITERATOR, function () {
    return this;
  });
}

module.exports = {
  IteratorPrototype: IteratorPrototype,
  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS
};


/***/ }),

/***/ "82c6":
/***/ (function(module, exports, __webpack_require__) {

var freeGlobal = __webpack_require__("1cba");

/** Detect free variable `self`. */
var freeSelf = typeof self == 'object' && self && self.Object === Object && self;

/** Used as a reference to the global object. */
var root = freeGlobal || freeSelf || Function('return this')();

module.exports = root;


/***/ }),

/***/ "83ba":
/***/ (function(module, exports, __webpack_require__) {

var isArray = __webpack_require__("f868"),
    isSymbol = __webpack_require__("d19b");

/** Used to match property names within property paths. */
var reIsDeepProp = /\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,
    reIsPlainProp = /^\w*$/;

/**
 * Checks if `value` is a property name and not a property path.
 *
 * @private
 * @param {*} value The value to check.
 * @param {Object} [object] The object to query keys on.
 * @returns {boolean} Returns `true` if `value` is a property name, else `false`.
 */
function isKey(value, object) {
  if (isArray(value)) {
    return false;
  }
  var type = typeof value;
  if (type == 'number' || type == 'symbol' || type == 'boolean' ||
      value == null || isSymbol(value)) {
    return true;
  }
  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||
    (object != null && value in Object(object));
}

module.exports = isKey;


/***/ }),

/***/ "8423":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var userAgent = __webpack_require__("93b7");

var process = globalThis.process;
var Deno = globalThis.Deno;
var versions = process && process.versions || Deno && Deno.version;
var v8 = versions && versions.v8;
var match, version;

if (v8) {
  match = v8.split('.');
  // in old Chrome, versions of V8 isn't V8 = Chrome / 10
  // but their correct versions are not interesting for us
  version = match[0] > 0 && match[0] < 4 ? 1 : +(match[0] + match[1]);
}

// BrowserFS NodeJS `process` polyfill incorrectly set `.v8` to `0.0`
// so check `userAgent` even if `.v8` exists, but 0
if (!version && userAgent) {
  match = userAgent.match(/Edge\/(\d+)/);
  if (!match || match[1] >= 74) {
    match = userAgent.match(/Chrome\/(\d+)/);
    if (match) version = +match[1];
  }
}

module.exports = version;


/***/ }),

/***/ "8480":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "create", function() { return create; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "clone", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "length", function() { return length; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fromValues", function() { return fromValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "copy", function() { return copy; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "set", function() { return set; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "add", function() { return add; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "subtract", function() { return subtract; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "multiply", function() { return multiply; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "divide", function() { return divide; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ceil", function() { return ceil; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "floor", function() { return floor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "min", function() { return min; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "max", function() { return max; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "round", function() { return round; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scale", function() { return scale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scaleAndAdd", function() { return scaleAndAdd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "distance", function() { return distance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredDistance", function() { return squaredDistance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "squaredLength", function() { return squaredLength; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "negate", function() { return negate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "inverse", function() { return inverse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "normalize", function() { return normalize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dot", function() { return dot; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cross", function() { return cross; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lerp", function() { return lerp; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hermite", function() { return hermite; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "bezier", function() { return bezier; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "random", function() { return random; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat4", function() { return transformMat4; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformMat3", function() { return transformMat3; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "transformQuat", function() { return transformQuat; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateX", function() { return rotateX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateY", function() { return rotateY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotateZ", function() { return rotateZ; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "angle", function() { return angle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "zero", function() { return zero; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "str", function() { return str; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exactEquals", function() { return exactEquals; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "equals", function() { return equals; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sub", function() { return sub; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "mul", function() { return mul; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "div", function() { return div; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dist", function() { return dist; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrDist", function() { return sqrDist; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "len", function() { return len; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "sqrLen", function() { return sqrLen; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "forEach", function() { return forEach; });
/* harmony import */ var _common_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("b98d");

/**
 * 3 Dimensional Vector
 * @module vec3
 */

/**
 * Creates a new, empty vec3
 *
 * @returns {vec3} a new 3D vector
 */

function create() {
  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__[/* ARRAY_TYPE */ "a"](3);

  if (_common_js__WEBPACK_IMPORTED_MODULE_0__[/* ARRAY_TYPE */ "a"] != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }

  return out;
}
/**
 * Creates a new vec3 initialized with values from an existing vector
 *
 * @param {ReadonlyVec3} a vector to clone
 * @returns {vec3} a new 3D vector
 */

function clone(a) {
  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__[/* ARRAY_TYPE */ "a"](3);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  return out;
}
/**
 * Calculates the length of a vec3
 *
 * @param {ReadonlyVec3} a vector to calculate length of
 * @returns {Number} length of a
 */

function length(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return Math.hypot(x, y, z);
}
/**
 * Creates a new vec3 initialized with the given values
 *
 * @param {Number} x X component
 * @param {Number} y Y component
 * @param {Number} z Z component
 * @returns {vec3} a new 3D vector
 */

function fromValues(x, y, z) {
  var out = new _common_js__WEBPACK_IMPORTED_MODULE_0__[/* ARRAY_TYPE */ "a"](3);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
}
/**
 * Copy the values from one vec3 to another
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the source vector
 * @returns {vec3} out
 */

function copy(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  return out;
}
/**
 * Set the components of a vec3 to the given values
 *
 * @param {vec3} out the receiving vector
 * @param {Number} x X component
 * @param {Number} y Y component
 * @param {Number} z Z component
 * @returns {vec3} out
 */

function set(out, x, y, z) {
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
}
/**
 * Adds two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {vec3} out
 */

function add(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  return out;
}
/**
 * Subtracts vector b from vector a
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {vec3} out
 */

function subtract(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  return out;
}
/**
 * Multiplies two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {vec3} out
 */

function multiply(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  out[2] = a[2] * b[2];
  return out;
}
/**
 * Divides two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {vec3} out
 */

function divide(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  out[2] = a[2] / b[2];
  return out;
}
/**
 * Math.ceil the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a vector to ceil
 * @returns {vec3} out
 */

function ceil(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  out[2] = Math.ceil(a[2]);
  return out;
}
/**
 * Math.floor the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a vector to floor
 * @returns {vec3} out
 */

function floor(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  out[2] = Math.floor(a[2]);
  return out;
}
/**
 * Returns the minimum of two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {vec3} out
 */

function min(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  out[2] = Math.min(a[2], b[2]);
  return out;
}
/**
 * Returns the maximum of two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {vec3} out
 */

function max(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  out[2] = Math.max(a[2], b[2]);
  return out;
}
/**
 * Math.round the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a vector to round
 * @returns {vec3} out
 */

function round(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  out[2] = Math.round(a[2]);
  return out;
}
/**
 * Scales a vec3 by a scalar number
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the vector to scale
 * @param {Number} b amount to scale the vector by
 * @returns {vec3} out
 */

function scale(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  return out;
}
/**
 * Adds two vec3's after scaling the second operand by a scalar value
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @param {Number} scale the amount to scale b by before adding
 * @returns {vec3} out
 */

function scaleAndAdd(out, a, b, scale) {
  out[0] = a[0] + b[0] * scale;
  out[1] = a[1] + b[1] * scale;
  out[2] = a[2] + b[2] * scale;
  return out;
}
/**
 * Calculates the euclidian distance between two vec3's
 *
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {Number} distance between a and b
 */

function distance(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  return Math.hypot(x, y, z);
}
/**
 * Calculates the squared euclidian distance between two vec3's
 *
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {Number} squared distance between a and b
 */

function squaredDistance(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  return x * x + y * y + z * z;
}
/**
 * Calculates the squared length of a vec3
 *
 * @param {ReadonlyVec3} a vector to calculate squared length of
 * @returns {Number} squared length of a
 */

function squaredLength(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return x * x + y * y + z * z;
}
/**
 * Negates the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a vector to negate
 * @returns {vec3} out
 */

function negate(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  out[2] = -a[2];
  return out;
}
/**
 * Returns the inverse of the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a vector to invert
 * @returns {vec3} out
 */

function inverse(out, a) {
  out[0] = 1.0 / a[0];
  out[1] = 1.0 / a[1];
  out[2] = 1.0 / a[2];
  return out;
}
/**
 * Normalize a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a vector to normalize
 * @returns {vec3} out
 */

function normalize(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var len = x * x + y * y + z * z;

  if (len > 0) {
    //TODO: evaluate use of glm_invsqrt here?
    len = 1 / Math.sqrt(len);
  }

  out[0] = a[0] * len;
  out[1] = a[1] * len;
  out[2] = a[2] * len;
  return out;
}
/**
 * Calculates the dot product of two vec3's
 *
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {Number} dot product of a and b
 */

function dot(a, b) {
  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
}
/**
 * Computes the cross product of two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @returns {vec3} out
 */

function cross(out, a, b) {
  var ax = a[0],
      ay = a[1],
      az = a[2];
  var bx = b[0],
      by = b[1],
      bz = b[2];
  out[0] = ay * bz - az * by;
  out[1] = az * bx - ax * bz;
  out[2] = ax * by - ay * bx;
  return out;
}
/**
 * Performs a linear interpolation between two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @param {Number} t interpolation amount, in the range [0-1], between the two inputs
 * @returns {vec3} out
 */

function lerp(out, a, b, t) {
  var ax = a[0];
  var ay = a[1];
  var az = a[2];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  out[2] = az + t * (b[2] - az);
  return out;
}
/**
 * Performs a hermite interpolation with two control points
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @param {ReadonlyVec3} c the third operand
 * @param {ReadonlyVec3} d the fourth operand
 * @param {Number} t interpolation amount, in the range [0-1], between the two inputs
 * @returns {vec3} out
 */

function hermite(out, a, b, c, d, t) {
  var factorTimes2 = t * t;
  var factor1 = factorTimes2 * (2 * t - 3) + 1;
  var factor2 = factorTimes2 * (t - 2) + t;
  var factor3 = factorTimes2 * (t - 1);
  var factor4 = factorTimes2 * (3 - 2 * t);
  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
  return out;
}
/**
 * Performs a bezier interpolation with two control points
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the first operand
 * @param {ReadonlyVec3} b the second operand
 * @param {ReadonlyVec3} c the third operand
 * @param {ReadonlyVec3} d the fourth operand
 * @param {Number} t interpolation amount, in the range [0-1], between the two inputs
 * @returns {vec3} out
 */

function bezier(out, a, b, c, d, t) {
  var inverseFactor = 1 - t;
  var inverseFactorTimesTwo = inverseFactor * inverseFactor;
  var factorTimes2 = t * t;
  var factor1 = inverseFactorTimesTwo * inverseFactor;
  var factor2 = 3 * t * inverseFactorTimesTwo;
  var factor3 = 3 * factorTimes2 * inverseFactor;
  var factor4 = factorTimes2 * t;
  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;
  return out;
}
/**
 * Generates a random vector with the given scale
 *
 * @param {vec3} out the receiving vector
 * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned
 * @returns {vec3} out
 */

function random(out, scale) {
  scale = scale || 1.0;
  var r = _common_js__WEBPACK_IMPORTED_MODULE_0__[/* RANDOM */ "c"]() * 2.0 * Math.PI;
  var z = _common_js__WEBPACK_IMPORTED_MODULE_0__[/* RANDOM */ "c"]() * 2.0 - 1.0;
  var zScale = Math.sqrt(1.0 - z * z) * scale;
  out[0] = Math.cos(r) * zScale;
  out[1] = Math.sin(r) * zScale;
  out[2] = z * scale;
  return out;
}
/**
 * Transforms the vec3 with a mat4.
 * 4th vector component is implicitly '1'
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the vector to transform
 * @param {ReadonlyMat4} m matrix to transform with
 * @returns {vec3} out
 */

function transformMat4(out, a, m) {
  var x = a[0],
      y = a[1],
      z = a[2];
  var w = m[3] * x + m[7] * y + m[11] * z + m[15];
  w = w || 1.0;
  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;
  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;
  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;
  return out;
}
/**
 * Transforms the vec3 with a mat3.
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the vector to transform
 * @param {ReadonlyMat3} m the 3x3 matrix to transform with
 * @returns {vec3} out
 */

function transformMat3(out, a, m) {
  var x = a[0],
      y = a[1],
      z = a[2];
  out[0] = x * m[0] + y * m[3] + z * m[6];
  out[1] = x * m[1] + y * m[4] + z * m[7];
  out[2] = x * m[2] + y * m[5] + z * m[8];
  return out;
}
/**
 * Transforms the vec3 with a quat
 * Can also be used for dual quaternions. (Multiply it with the real part)
 *
 * @param {vec3} out the receiving vector
 * @param {ReadonlyVec3} a the vector to transform
 * @param {ReadonlyQuat} q quaternion to transform with
 * @returns {vec3} out
 */

function transformQuat(out, a, q) {
  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed
  var qx = q[0],
      qy = q[1],
      qz = q[2],
      qw = q[3];
  var x = a[0],
      y = a[1],
      z = a[2]; // var qvec = [qx, qy, qz];
  // var uv = vec3.cross([], qvec, a);

  var uvx = qy * z - qz * y,
      uvy = qz * x - qx * z,
      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);

  var uuvx = qy * uvz - qz * uvy,
      uuvy = qz * uvx - qx * uvz,
      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);

  var w2 = qw * 2;
  uvx *= w2;
  uvy *= w2;
  uvz *= w2; // vec3.scale(uuv, uuv, 2);

  uuvx *= 2;
  uuvy *= 2;
  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));

  out[0] = x + uvx + uuvx;
  out[1] = y + uvy + uuvy;
  out[2] = z + uvz + uuvz;
  return out;
}
/**
 * Rotate a 3D vector around the x-axis
 * @param {vec3} out The receiving vec3
 * @param {ReadonlyVec3} a The vec3 point to rotate
 * @param {ReadonlyVec3} b The origin of the rotation
 * @param {Number} rad The angle of rotation in radians
 * @returns {vec3} out
 */

function rotateX(out, a, b, rad) {
  var p = [],
      r = []; //Translate point to the origin

  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2]; //perform rotation

  r[0] = p[0];
  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);
  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position

  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];
  return out;
}
/**
 * Rotate a 3D vector around the y-axis
 * @param {vec3} out The receiving vec3
 * @param {ReadonlyVec3} a The vec3 point to rotate
 * @param {ReadonlyVec3} b The origin of the rotation
 * @param {Number} rad The angle of rotation in radians
 * @returns {vec3} out
 */

function rotateY(out, a, b, rad) {
  var p = [],
      r = []; //Translate point to the origin

  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2]; //perform rotation

  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);
  r[1] = p[1];
  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position

  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];
  return out;
}
/**
 * Rotate a 3D vector around the z-axis
 * @param {vec3} out The receiving vec3
 * @param {ReadonlyVec3} a The vec3 point to rotate
 * @param {ReadonlyVec3} b The origin of the rotation
 * @param {Number} rad The angle of rotation in radians
 * @returns {vec3} out
 */

function rotateZ(out, a, b, rad) {
  var p = [],
      r = []; //Translate point to the origin

  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2]; //perform rotation

  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);
  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);
  r[2] = p[2]; //translate to correct position

  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];
  return out;
}
/**
 * Get the angle between two 3D vectors
 * @param {ReadonlyVec3} a The first operand
 * @param {ReadonlyVec3} b The second operand
 * @returns {Number} The angle in radians
 */

function angle(a, b) {
  var ax = a[0],
      ay = a[1],
      az = a[2],
      bx = b[0],
      by = b[1],
      bz = b[2],
      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),
      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),
      mag = mag1 * mag2,
      cosine = mag && dot(a, b) / mag;
  return Math.acos(Math.min(Math.max(cosine, -1), 1));
}
/**
 * Set the components of a vec3 to zero
 *
 * @param {vec3} out the receiving vector
 * @returns {vec3} out
 */

function zero(out) {
  out[0] = 0.0;
  out[1] = 0.0;
  out[2] = 0.0;
  return out;
}
/**
 * Returns a string representation of a vector
 *
 * @param {ReadonlyVec3} a vector to represent as a string
 * @returns {String} string representation of the vector
 */

function str(a) {
  return "vec3(" + a[0] + ", " + a[1] + ", " + a[2] + ")";
}
/**
 * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)
 *
 * @param {ReadonlyVec3} a The first vector.
 * @param {ReadonlyVec3} b The second vector.
 * @returns {Boolean} True if the vectors are equal, false otherwise.
 */

function exactEquals(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];
}
/**
 * Returns whether or not the vectors have approximately the same elements in the same position.
 *
 * @param {ReadonlyVec3} a The first vector.
 * @param {ReadonlyVec3} b The second vector.
 * @returns {Boolean} True if the vectors are equal, false otherwise.
 */

function equals(a, b) {
  var a0 = a[0],
      a1 = a[1],
      a2 = a[2];
  var b0 = b[0],
      b1 = b[1],
      b2 = b[2];
  return Math.abs(a0 - b0) <= _common_js__WEBPACK_IMPORTED_MODULE_0__[/* EPSILON */ "b"] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= _common_js__WEBPACK_IMPORTED_MODULE_0__[/* EPSILON */ "b"] * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= _common_js__WEBPACK_IMPORTED_MODULE_0__[/* EPSILON */ "b"] * Math.max(1.0, Math.abs(a2), Math.abs(b2));
}
/**
 * Alias for {@link vec3.subtract}
 * @function
 */

var sub = subtract;
/**
 * Alias for {@link vec3.multiply}
 * @function
 */

var mul = multiply;
/**
 * Alias for {@link vec3.divide}
 * @function
 */

var div = divide;
/**
 * Alias for {@link vec3.distance}
 * @function
 */

var dist = distance;
/**
 * Alias for {@link vec3.squaredDistance}
 * @function
 */

var sqrDist = squaredDistance;
/**
 * Alias for {@link vec3.length}
 * @function
 */

var len = length;
/**
 * Alias for {@link vec3.squaredLength}
 * @function
 */

var sqrLen = squaredLength;
/**
 * Perform some operation over an array of vec3s.
 *
 * @param {Array} a the array of vectors to iterate over
 * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed
 * @param {Number} offset Number of elements to skip at the beginning of the array
 * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array
 * @param {Function} fn Function to call for each vector in the array
 * @param {Object} [arg] additional argument to pass to fn
 * @returns {Array} a
 * @function
 */

var forEach = function () {
  var vec = create();
  return function (a, stride, offset, count, fn, arg) {
    var i, l;

    if (!stride) {
      stride = 3;
    }

    if (!offset) {
      offset = 0;
    }

    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }

    for (i = offset; i < l; i += stride) {
      vec[0] = a[i];
      vec[1] = a[i + 1];
      vec[2] = a[i + 2];
      fn(vec, vec, arg);
      a[i] = vec[0];
      a[i + 1] = vec[1];
      a[i + 2] = vec[2];
    }

    return a;
  };
}();

/***/ }),

/***/ "8509":
/***/ (function(module, exports) {

/**
 * The base implementation of `_.unary` without support for storing metadata.
 *
 * @private
 * @param {Function} func The function to cap arguments for.
 * @returns {Function} Returns the new capped function.
 */
function baseUnary(func) {
  return function(value) {
    return func(value);
  };
}

module.exports = baseUnary;


/***/ }),

/***/ "850f":
/***/ (function(module, exports) {

/**
 * Checks if a stack value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf Stack
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function stackHas(key) {
  return this.__data__.has(key);
}

module.exports = stackHas;


/***/ }),

/***/ "8522":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__("1e49");
function inRect(minX, minY, width, height, lineWidth, x, y) {
    var halfWidth = lineWidth / 2;
    // 将四个边看做矩形来检测，比边的检测算法要快
    return (util_1.inBox(minX - halfWidth, minY - halfWidth, width, lineWidth, x, y) || // 上边
        util_1.inBox(minX + width - halfWidth, minY - halfWidth, lineWidth, height, x, y) || // 右边
        util_1.inBox(minX + halfWidth, minY + height - halfWidth, width, lineWidth, x, y) || // 下边
        util_1.inBox(minX - halfWidth, minY + halfWidth, lineWidth, height, x, y)); // 左边
}
exports.default = inRect;
//# sourceMappingURL=rect.js.map

/***/ }),

/***/ "85ed":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var toObject = __webpack_require__("8ec0");

var hasOwnProperty = uncurryThis({}.hasOwnProperty);

// `HasOwnProperty` abstract operation
// https://tc39.es/ecma262/#sec-hasownproperty
// eslint-disable-next-line es/no-object-hasown -- safe
module.exports = Object.hasOwn || function hasOwn(it, key) {
  return hasOwnProperty(toObject(it), key);
};


/***/ }),

/***/ "860f":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview pattern
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__("6d77");
var dom_1 = __webpack_require__("7431");
var regexPR = /^p\s*\(\s*([axyn])\s*\)\s*(.*)/i;
var Pattern = /** @class */ (function () {
    function Pattern(cfg) {
        this.cfg = {};
        var el = dom_1.createSVGElement('pattern');
        el.setAttribute('patternUnits', 'userSpaceOnUse');
        var child = dom_1.createSVGElement('image');
        el.appendChild(child);
        var id = util_1.uniqueId('pattern_');
        el.id = id;
        this.el = el;
        this.id = id;
        this.cfg = cfg;
        var arr = regexPR.exec(cfg);
        var source = arr[2];
        child.setAttribute('href', source);
        var img = new Image();
        if (!source.match(/^data:/i)) {
            img.crossOrigin = 'Anonymous';
        }
        img.src = source;
        function onload() {
            el.setAttribute('width', "" + img.width);
            el.setAttribute('height', "" + img.height);
        }
        if (img.complete) {
            onload();
        }
        else {
            img.onload = onload;
            // Fix onload() bug in IE9
            img.src = img.src;
        }
        return this;
    }
    Pattern.prototype.match = function (type, attr) {
        return this.cfg === attr;
    };
    return Pattern;
}());
exports.default = Pattern;
//# sourceMappingURL=pattern.js.map

/***/ }),

/***/ "8668":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
/**
 * @fileoverview polygon
 * @author dengfuping_develop@163.com
 */
var util_1 = __webpack_require__("6d77");
var constant_1 = __webpack_require__("7a93");
var base_1 = __webpack_require__("6cb2");
var Polygon = /** @class */ (function (_super) {
    tslib_1.__extends(Polygon, _super);
    function Polygon() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'polygon';
        _this.canFill = true;
        _this.canStroke = true;
        return _this;
    }
    Polygon.prototype.createPath = function (context, targetAttrs) {
        var attrs = this.attr();
        var el = this.get('el');
        util_1.each(targetAttrs || attrs, function (value, attr) {
            if (attr === 'points' && util_1.isArray(value) && value.length >= 2) {
                el.setAttribute('points', value.map(function (point) { return point[0] + "," + point[1]; }).join(' '));
            }
            else if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
    };
    return Polygon;
}(base_1.default));
exports.default = Polygon;
//# sourceMappingURL=polygon.js.map

/***/ }),

/***/ "87b6":
/***/ (function(module, exports) {

/**
 * The base implementation of `_.hasIn` without support for deep paths.
 *
 * @private
 * @param {Object} [object] The object to query.
 * @param {Array|string} key The key to check.
 * @returns {boolean} Returns `true` if `key` exists, else `false`.
 */
function baseHasIn(object, key) {
  return object != null && key in Object(object);
}

module.exports = baseHasIn;


/***/ }),

/***/ "8848":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $forEach = __webpack_require__("308c").forEach;
var arrayMethodIsStrict = __webpack_require__("c3f4");

var STRICT_METHOD = arrayMethodIsStrict('forEach');

// `Array.prototype.forEach` method implementation
// https://tc39.es/ecma262/#sec-array.prototype.foreach
module.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {
  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);
// eslint-disable-next-line es/no-array-prototype-foreach -- safe
} : [].forEach;


/***/ }),

/***/ "8914":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview gradient
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__("6d77");
var dom_1 = __webpack_require__("7431");
var regexLG = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i;
var regexRG = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i;
var regexColorStop = /[\d.]+:(#[^\s]+|[^)]+\))/gi;
function addStop(steps) {
    var arr = steps.match(regexColorStop);
    if (!arr) {
        return '';
    }
    var stops = '';
    arr.sort(function (a, b) {
        a = a.split(':');
        b = b.split(':');
        return Number(a[0]) - Number(b[0]);
    });
    util_1.each(arr, function (item) {
        item = item.split(':');
        stops += "<stop offset=\"" + item[0] + "\" stop-color=\"" + item[1] + "\"></stop>";
    });
    return stops;
}
function parseLineGradient(color, el) {
    var arr = regexLG.exec(color);
    var angle = util_1.mod(util_1.toRadian(parseFloat(arr[1])), Math.PI * 2);
    var steps = arr[2];
    var start;
    var end;
    if (angle >= 0 && angle < 0.5 * Math.PI) {
        start = {
            x: 0,
            y: 0,
        };
        end = {
            x: 1,
            y: 1,
        };
    }
    else if (0.5 * Math.PI <= angle && angle < Math.PI) {
        start = {
            x: 1,
            y: 0,
        };
        end = {
            x: 0,
            y: 1,
        };
    }
    else if (Math.PI <= angle && angle < 1.5 * Math.PI) {
        start = {
            x: 1,
            y: 1,
        };
        end = {
            x: 0,
            y: 0,
        };
    }
    else {
        start = {
            x: 0,
            y: 1,
        };
        end = {
            x: 1,
            y: 0,
        };
    }
    var tanTheta = Math.tan(angle);
    var tanTheta2 = tanTheta * tanTheta;
    var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;
    var y = (tanTheta * (end.x - start.x + tanTheta * (end.y - start.y))) / (tanTheta2 + 1) + start.y;
    el.setAttribute('x1', start.x);
    el.setAttribute('y1', start.y);
    el.setAttribute('x2', x);
    el.setAttribute('y2', y);
    el.innerHTML = addStop(steps);
}
function parseRadialGradient(color, self) {
    var arr = regexRG.exec(color);
    var cx = parseFloat(arr[1]);
    var cy = parseFloat(arr[2]);
    var r = parseFloat(arr[3]);
    var steps = arr[4];
    self.setAttribute('cx', cx);
    self.setAttribute('cy', cy);
    self.setAttribute('r', r);
    self.innerHTML = addStop(steps);
}
var Gradient = /** @class */ (function () {
    function Gradient(cfg) {
        this.cfg = {};
        var el = null;
        var id = util_1.uniqueId('gradient_');
        if (cfg.toLowerCase()[0] === 'l') {
            el = dom_1.createSVGElement('linearGradient');
            parseLineGradient(cfg, el);
        }
        else {
            el = dom_1.createSVGElement('radialGradient');
            parseRadialGradient(cfg, el);
        }
        el.setAttribute('id', id);
        this.el = el;
        this.id = id;
        this.cfg = cfg;
        return this;
    }
    Gradient.prototype.match = function (type, attr) {
        return this.cfg === attr;
    };
    return Gradient;
}());
exports.default = Gradient;
//# sourceMappingURL=gradient.js.map

/***/ }),

/***/ "89e7":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var userAgent = __webpack_require__("93b7");

module.exports = /ipad|iphone|ipod/i.test(userAgent) && typeof Pebble != 'undefined';


/***/ }),

/***/ "8a25":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.default = (function (value) {
    /**
     * isObject({}) => true
     * isObject([1, 2, 3]) => true
     * isObject(Function) => true
     * isObject(null) => false
     */
    var type = typeof value;
    return value !== null && type === 'object' || type === 'function';
});
//# sourceMappingURL=is-object.js.map

/***/ }),

/***/ "8bf9":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var g_math_1 = __webpack_require__("4502");
var g_math_2 = __webpack_require__("4502");
var util_1 = __webpack_require__("6d77");
var base_1 = __webpack_require__("98ae");
var polyline_1 = __webpack_require__("0869");
var ArrowUtil = __webpack_require__("a5a4");
var PolyLine = /** @class */ (function (_super) {
    tslib_1.__extends(PolyLine, _super);
    function PolyLine() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    PolyLine.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { startArrow: false, endArrow: false });
    };
    PolyLine.prototype.initAttrs = function (attrs) {
        this.setArrow();
    };
    // 更新属性时，检测是否更改了 points
    PolyLine.prototype.onAttrChange = function (name, value, originValue) {
        _super.prototype.onAttrChange.call(this, name, value, originValue);
        this.setArrow();
        if (['points'].indexOf(name) !== -1) {
            this._resetCache();
        }
    };
    PolyLine.prototype._resetCache = function () {
        this.set('totalLength', null);
        this.set('tCache', null);
    };
    PolyLine.prototype.setArrow = function () {
        var attrs = this.attr();
        var _a = this.attrs, points = _a.points, startArrow = _a.startArrow, endArrow = _a.endArrow;
        var length = points.length;
        var x1 = points[0][0];
        var y1 = points[0][1];
        var x2 = points[length - 1][0];
        var y2 = points[length - 1][1];
        if (startArrow) {
            ArrowUtil.addStartArrow(this, attrs, points[1][0], points[1][1], x1, y1);
        }
        if (endArrow) {
            ArrowUtil.addEndArrow(this, attrs, points[length - 2][0], points[length - 2][1], x2, y2);
        }
    };
    // 不允许 fill
    PolyLine.prototype.isFill = function () {
        return false;
    };
    PolyLine.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {
        // 没有设置 stroke 不能被拾取, 没有线宽不能被拾取
        if (!isStroke || !lineWidth) {
            return false;
        }
        var points = this.attr().points;
        return polyline_1.default(points, lineWidth, x, y, false);
    };
    // 始终填充
    PolyLine.prototype.isStroke = function () {
        return true;
    };
    PolyLine.prototype.createPath = function (context) {
        var _a = this.attr(), points = _a.points, startArrow = _a.startArrow, endArrow = _a.endArrow;
        var length = points.length;
        if (points.length < 2) {
            return;
        }
        var x1 = points[0][0];
        var y1 = points[0][1];
        var x2 = points[length - 1][0];
        var y2 = points[length - 1][1];
        // 如果定义了箭头，并且是自定义箭头，线条相应缩进
        if (startArrow && startArrow.d) {
            var distance = ArrowUtil.getShortenOffset(x1, y1, points[1][0], points[1][1], startArrow.d);
            x1 += distance.dx;
            y1 += distance.dy;
        }
        if (endArrow && endArrow.d) {
            var distance = ArrowUtil.getShortenOffset(points[length - 2][0], points[length - 2][1], x2, y2, endArrow.d);
            x2 -= distance.dx;
            y2 -= distance.dy;
        }
        context.beginPath();
        context.moveTo(x1, y1);
        for (var i = 0; i < length - 1; i++) {
            var point = points[i];
            context.lineTo(point[0], point[1]);
        }
        context.lineTo(x2, y2);
    };
    PolyLine.prototype.afterDrawPath = function (context) {
        var startArrowShape = this.get('startArrowShape');
        var endArrowShape = this.get('endArrowShape');
        if (startArrowShape) {
            startArrowShape.draw(context);
        }
        if (endArrowShape) {
            endArrowShape.draw(context);
        }
    };
    /**
     * Get length of polyline
     * @return {number} length
     */
    PolyLine.prototype.getTotalLength = function () {
        var points = this.attr().points;
        // get totalLength from cache
        var totalLength = this.get('totalLength');
        if (!util_1.isNil(totalLength)) {
            return totalLength;
        }
        this.set('totalLength', g_math_2.Polyline.length(points));
        return this.get('totalLength');
    };
    /**
     * Get point according to ratio
     * @param {number} ratio
     * @return {Point} point
     */
    PolyLine.prototype.getPoint = function (ratio) {
        var points = this.attr().points;
        // get tCache from cache
        var tCache = this.get('tCache');
        if (!tCache) {
            this._setTcache();
            tCache = this.get('tCache');
        }
        var subt;
        var index;
        util_1.each(tCache, function (v, i) {
            if (ratio >= v[0] && ratio <= v[1]) {
                subt = (ratio - v[0]) / (v[1] - v[0]);
                index = i;
            }
        });
        return g_math_1.Line.pointAt(points[index][0], points[index][1], points[index + 1][0], points[index + 1][1], subt);
    };
    PolyLine.prototype._setTcache = function () {
        var points = this.attr().points;
        if (!points || points.length === 0) {
            return;
        }
        var totalLength = this.getTotalLength();
        if (totalLength <= 0) {
            return;
        }
        var tempLength = 0;
        var tCache = [];
        var segmentT;
        var segmentL;
        util_1.each(points, function (p, i) {
            if (points[i + 1]) {
                segmentT = [];
                segmentT[0] = tempLength / totalLength;
                segmentL = g_math_1.Line.length(p[0], p[1], points[i + 1][0], points[i + 1][1]);
                tempLength += segmentL;
                segmentT[1] = tempLength / totalLength;
                tCache.push(segmentT);
            }
        });
        this.set('tCache', tCache);
    };
    /**
     * Get start tangent vector
     * @return {Array}
     */
    PolyLine.prototype.getStartTangent = function () {
        var points = this.attr().points;
        var result = [];
        result.push([points[1][0], points[1][1]]);
        result.push([points[0][0], points[0][1]]);
        return result;
    };
    /**
     * Get end tangent vector
     * @return {Array}
     */
    PolyLine.prototype.getEndTangent = function () {
        var points = this.attr().points;
        var l = points.length - 1;
        var result = [];
        result.push([points[l - 1][0], points[l - 1][1]]);
        result.push([points[l][0], points[l][1]]);
        return result;
    };
    return PolyLine;
}(base_1.default));
exports.default = PolyLine;
//# sourceMappingURL=polyline.js.map

/***/ }),

/***/ "8c7b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var internalObjectKeys = __webpack_require__("17da");
var enumBugKeys = __webpack_require__("7c1c");

var hiddenKeys = enumBugKeys.concat('length', 'prototype');

// `Object.getOwnPropertyNames` method
// https://tc39.es/ecma262/#sec-object.getownpropertynames
// eslint-disable-next-line es/no-object-getownpropertynames -- safe
exports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {
  return internalObjectKeys(O, hiddenKeys);
};


/***/ }),

/***/ "8d55":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var Queue = function () {
  this.head = null;
  this.tail = null;
};

Queue.prototype = {
  add: function (item) {
    var entry = { item: item, next: null };
    var tail = this.tail;
    if (tail) tail.next = entry;
    else this.head = entry;
    this.tail = entry;
  },
  get: function () {
    var entry = this.head;
    if (entry) {
      var next = this.head = entry.next;
      if (next === null) this.tail = null;
      return entry.item;
    }
  }
};

module.exports = Queue;


/***/ }),

/***/ "8eb4":
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__("82c6");

/** Built-in value references. */
var Uint8Array = root.Uint8Array;

module.exports = Uint8Array;


/***/ }),

/***/ "8ec0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var requireObjectCoercible = __webpack_require__("deed");

var $Object = Object;

// `ToObject` abstract operation
// https://tc39.es/ecma262/#sec-toobject
module.exports = function (argument) {
  return $Object(requireObjectCoercible(argument));
};


/***/ }),

/***/ "90a0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var internalObjectKeys = __webpack_require__("17da");
var enumBugKeys = __webpack_require__("7c1c");

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
// eslint-disable-next-line es/no-object-keys -- safe
module.exports = Object.keys || function keys(O) {
  return internalObjectKeys(O, enumBugKeys);
};


/***/ }),

/***/ "9178":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, "a", function() { return /* reexport */ mat3_namespaceObject; });
__webpack_require__.d(__webpack_exports__, "b", function() { return /* reexport */ vec2; });
__webpack_require__.d(__webpack_exports__, "c", function() { return /* reexport */ vec3; });

// UNUSED EXPORTS: glMatrix, mat2, mat2d, mat4, quat, quat2, vec4

// NAMESPACE OBJECT: ./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/mat3.js
var mat3_namespaceObject = {};
__webpack_require__.r(mat3_namespaceObject);
__webpack_require__.d(mat3_namespaceObject, "create", function() { return create; });
__webpack_require__.d(mat3_namespaceObject, "fromMat4", function() { return fromMat4; });
__webpack_require__.d(mat3_namespaceObject, "clone", function() { return clone; });
__webpack_require__.d(mat3_namespaceObject, "copy", function() { return copy; });
__webpack_require__.d(mat3_namespaceObject, "fromValues", function() { return fromValues; });
__webpack_require__.d(mat3_namespaceObject, "set", function() { return set; });
__webpack_require__.d(mat3_namespaceObject, "identity", function() { return identity; });
__webpack_require__.d(mat3_namespaceObject, "transpose", function() { return transpose; });
__webpack_require__.d(mat3_namespaceObject, "invert", function() { return invert; });
__webpack_require__.d(mat3_namespaceObject, "adjoint", function() { return adjoint; });
__webpack_require__.d(mat3_namespaceObject, "determinant", function() { return determinant; });
__webpack_require__.d(mat3_namespaceObject, "multiply", function() { return multiply; });
__webpack_require__.d(mat3_namespaceObject, "translate", function() { return translate; });
__webpack_require__.d(mat3_namespaceObject, "rotate", function() { return rotate; });
__webpack_require__.d(mat3_namespaceObject, "scale", function() { return scale; });
__webpack_require__.d(mat3_namespaceObject, "fromTranslation", function() { return fromTranslation; });
__webpack_require__.d(mat3_namespaceObject, "fromRotation", function() { return fromRotation; });
__webpack_require__.d(mat3_namespaceObject, "fromScaling", function() { return fromScaling; });
__webpack_require__.d(mat3_namespaceObject, "fromMat2d", function() { return fromMat2d; });
__webpack_require__.d(mat3_namespaceObject, "fromQuat", function() { return fromQuat; });
__webpack_require__.d(mat3_namespaceObject, "normalFromMat4", function() { return normalFromMat4; });
__webpack_require__.d(mat3_namespaceObject, "projection", function() { return projection; });
__webpack_require__.d(mat3_namespaceObject, "str", function() { return str; });
__webpack_require__.d(mat3_namespaceObject, "frob", function() { return frob; });
__webpack_require__.d(mat3_namespaceObject, "add", function() { return add; });
__webpack_require__.d(mat3_namespaceObject, "subtract", function() { return subtract; });
__webpack_require__.d(mat3_namespaceObject, "multiplyScalar", function() { return multiplyScalar; });
__webpack_require__.d(mat3_namespaceObject, "multiplyScalarAndAdd", function() { return multiplyScalarAndAdd; });
__webpack_require__.d(mat3_namespaceObject, "exactEquals", function() { return exactEquals; });
__webpack_require__.d(mat3_namespaceObject, "equals", function() { return equals; });
__webpack_require__.d(mat3_namespaceObject, "mul", function() { return mul; });
__webpack_require__.d(mat3_namespaceObject, "sub", function() { return sub; });

// EXTERNAL MODULE: ./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/common.js
var common = __webpack_require__("b98d");

// CONCATENATED MODULE: ./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/mat3.js

/**
 * 3x3 Matrix
 * @module mat3
 */

/**
 * Creates a new identity mat3
 *
 * @returns {mat3} a new 3x3 matrix
 */

function create() {
  var out = new common["a" /* ARRAY_TYPE */](9);

  if (common["a" /* ARRAY_TYPE */] != Float32Array) {
    out[1] = 0;
    out[2] = 0;
    out[3] = 0;
    out[5] = 0;
    out[6] = 0;
    out[7] = 0;
  }

  out[0] = 1;
  out[4] = 1;
  out[8] = 1;
  return out;
}
/**
 * Copies the upper-left 3x3 values into the given mat3.
 *
 * @param {mat3} out the receiving 3x3 matrix
 * @param {ReadonlyMat4} a   the source 4x4 matrix
 * @returns {mat3} out
 */

function fromMat4(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[4];
  out[4] = a[5];
  out[5] = a[6];
  out[6] = a[8];
  out[7] = a[9];
  out[8] = a[10];
  return out;
}
/**
 * Creates a new mat3 initialized with values from an existing matrix
 *
 * @param {ReadonlyMat3} a matrix to clone
 * @returns {mat3} a new 3x3 matrix
 */

function clone(a) {
  var out = new common["a" /* ARRAY_TYPE */](9);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  out[4] = a[4];
  out[5] = a[5];
  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  return out;
}
/**
 * Copy the values from one mat3 to another
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the source matrix
 * @returns {mat3} out
 */

function copy(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  out[3] = a[3];
  out[4] = a[4];
  out[5] = a[5];
  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  return out;
}
/**
 * Create a new mat3 with the given values
 *
 * @param {Number} m00 Component in column 0, row 0 position (index 0)
 * @param {Number} m01 Component in column 0, row 1 position (index 1)
 * @param {Number} m02 Component in column 0, row 2 position (index 2)
 * @param {Number} m10 Component in column 1, row 0 position (index 3)
 * @param {Number} m11 Component in column 1, row 1 position (index 4)
 * @param {Number} m12 Component in column 1, row 2 position (index 5)
 * @param {Number} m20 Component in column 2, row 0 position (index 6)
 * @param {Number} m21 Component in column 2, row 1 position (index 7)
 * @param {Number} m22 Component in column 2, row 2 position (index 8)
 * @returns {mat3} A new mat3
 */

function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {
  var out = new common["a" /* ARRAY_TYPE */](9);
  out[0] = m00;
  out[1] = m01;
  out[2] = m02;
  out[3] = m10;
  out[4] = m11;
  out[5] = m12;
  out[6] = m20;
  out[7] = m21;
  out[8] = m22;
  return out;
}
/**
 * Set the components of a mat3 to the given values
 *
 * @param {mat3} out the receiving matrix
 * @param {Number} m00 Component in column 0, row 0 position (index 0)
 * @param {Number} m01 Component in column 0, row 1 position (index 1)
 * @param {Number} m02 Component in column 0, row 2 position (index 2)
 * @param {Number} m10 Component in column 1, row 0 position (index 3)
 * @param {Number} m11 Component in column 1, row 1 position (index 4)
 * @param {Number} m12 Component in column 1, row 2 position (index 5)
 * @param {Number} m20 Component in column 2, row 0 position (index 6)
 * @param {Number} m21 Component in column 2, row 1 position (index 7)
 * @param {Number} m22 Component in column 2, row 2 position (index 8)
 * @returns {mat3} out
 */

function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {
  out[0] = m00;
  out[1] = m01;
  out[2] = m02;
  out[3] = m10;
  out[4] = m11;
  out[5] = m12;
  out[6] = m20;
  out[7] = m21;
  out[8] = m22;
  return out;
}
/**
 * Set a mat3 to the identity matrix
 *
 * @param {mat3} out the receiving matrix
 * @returns {mat3} out
 */

function identity(out) {
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 1;
  out[5] = 0;
  out[6] = 0;
  out[7] = 0;
  out[8] = 1;
  return out;
}
/**
 * Transpose the values of a mat3
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the source matrix
 * @returns {mat3} out
 */

function transpose(out, a) {
  // If we are transposing ourselves we can skip a few steps but have to cache some values
  if (out === a) {
    var a01 = a[1],
        a02 = a[2],
        a12 = a[5];
    out[1] = a[3];
    out[2] = a[6];
    out[3] = a01;
    out[5] = a[7];
    out[6] = a02;
    out[7] = a12;
  } else {
    out[0] = a[0];
    out[1] = a[3];
    out[2] = a[6];
    out[3] = a[1];
    out[4] = a[4];
    out[5] = a[7];
    out[6] = a[2];
    out[7] = a[5];
    out[8] = a[8];
  }

  return out;
}
/**
 * Inverts a mat3
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the source matrix
 * @returns {mat3} out
 */

function invert(out, a) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2];
  var a10 = a[3],
      a11 = a[4],
      a12 = a[5];
  var a20 = a[6],
      a21 = a[7],
      a22 = a[8];
  var b01 = a22 * a11 - a12 * a21;
  var b11 = -a22 * a10 + a12 * a20;
  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant

  var det = a00 * b01 + a01 * b11 + a02 * b21;

  if (!det) {
    return null;
  }

  det = 1.0 / det;
  out[0] = b01 * det;
  out[1] = (-a22 * a01 + a02 * a21) * det;
  out[2] = (a12 * a01 - a02 * a11) * det;
  out[3] = b11 * det;
  out[4] = (a22 * a00 - a02 * a20) * det;
  out[5] = (-a12 * a00 + a02 * a10) * det;
  out[6] = b21 * det;
  out[7] = (-a21 * a00 + a01 * a20) * det;
  out[8] = (a11 * a00 - a01 * a10) * det;
  return out;
}
/**
 * Calculates the adjugate of a mat3
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the source matrix
 * @returns {mat3} out
 */

function adjoint(out, a) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2];
  var a10 = a[3],
      a11 = a[4],
      a12 = a[5];
  var a20 = a[6],
      a21 = a[7],
      a22 = a[8];
  out[0] = a11 * a22 - a12 * a21;
  out[1] = a02 * a21 - a01 * a22;
  out[2] = a01 * a12 - a02 * a11;
  out[3] = a12 * a20 - a10 * a22;
  out[4] = a00 * a22 - a02 * a20;
  out[5] = a02 * a10 - a00 * a12;
  out[6] = a10 * a21 - a11 * a20;
  out[7] = a01 * a20 - a00 * a21;
  out[8] = a00 * a11 - a01 * a10;
  return out;
}
/**
 * Calculates the determinant of a mat3
 *
 * @param {ReadonlyMat3} a the source matrix
 * @returns {Number} determinant of a
 */

function determinant(a) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2];
  var a10 = a[3],
      a11 = a[4],
      a12 = a[5];
  var a20 = a[6],
      a21 = a[7],
      a22 = a[8];
  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);
}
/**
 * Multiplies two mat3's
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the first operand
 * @param {ReadonlyMat3} b the second operand
 * @returns {mat3} out
 */

function multiply(out, a, b) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2];
  var a10 = a[3],
      a11 = a[4],
      a12 = a[5];
  var a20 = a[6],
      a21 = a[7],
      a22 = a[8];
  var b00 = b[0],
      b01 = b[1],
      b02 = b[2];
  var b10 = b[3],
      b11 = b[4],
      b12 = b[5];
  var b20 = b[6],
      b21 = b[7],
      b22 = b[8];
  out[0] = b00 * a00 + b01 * a10 + b02 * a20;
  out[1] = b00 * a01 + b01 * a11 + b02 * a21;
  out[2] = b00 * a02 + b01 * a12 + b02 * a22;
  out[3] = b10 * a00 + b11 * a10 + b12 * a20;
  out[4] = b10 * a01 + b11 * a11 + b12 * a21;
  out[5] = b10 * a02 + b11 * a12 + b12 * a22;
  out[6] = b20 * a00 + b21 * a10 + b22 * a20;
  out[7] = b20 * a01 + b21 * a11 + b22 * a21;
  out[8] = b20 * a02 + b21 * a12 + b22 * a22;
  return out;
}
/**
 * Translate a mat3 by the given vector
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the matrix to translate
 * @param {ReadonlyVec2} v vector to translate by
 * @returns {mat3} out
 */

function translate(out, a, v) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2],
      a10 = a[3],
      a11 = a[4],
      a12 = a[5],
      a20 = a[6],
      a21 = a[7],
      a22 = a[8],
      x = v[0],
      y = v[1];
  out[0] = a00;
  out[1] = a01;
  out[2] = a02;
  out[3] = a10;
  out[4] = a11;
  out[5] = a12;
  out[6] = x * a00 + y * a10 + a20;
  out[7] = x * a01 + y * a11 + a21;
  out[8] = x * a02 + y * a12 + a22;
  return out;
}
/**
 * Rotates a mat3 by the given angle
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the matrix to rotate
 * @param {Number} rad the angle to rotate the matrix by
 * @returns {mat3} out
 */

function rotate(out, a, rad) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2],
      a10 = a[3],
      a11 = a[4],
      a12 = a[5],
      a20 = a[6],
      a21 = a[7],
      a22 = a[8],
      s = Math.sin(rad),
      c = Math.cos(rad);
  out[0] = c * a00 + s * a10;
  out[1] = c * a01 + s * a11;
  out[2] = c * a02 + s * a12;
  out[3] = c * a10 - s * a00;
  out[4] = c * a11 - s * a01;
  out[5] = c * a12 - s * a02;
  out[6] = a20;
  out[7] = a21;
  out[8] = a22;
  return out;
}
/**
 * Scales the mat3 by the dimensions in the given vec2
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the matrix to rotate
 * @param {ReadonlyVec2} v the vec2 to scale the matrix by
 * @returns {mat3} out
 **/

function scale(out, a, v) {
  var x = v[0],
      y = v[1];
  out[0] = x * a[0];
  out[1] = x * a[1];
  out[2] = x * a[2];
  out[3] = y * a[3];
  out[4] = y * a[4];
  out[5] = y * a[5];
  out[6] = a[6];
  out[7] = a[7];
  out[8] = a[8];
  return out;
}
/**
 * Creates a matrix from a vector translation
 * This is equivalent to (but much faster than):
 *
 *     mat3.identity(dest);
 *     mat3.translate(dest, dest, vec);
 *
 * @param {mat3} out mat3 receiving operation result
 * @param {ReadonlyVec2} v Translation vector
 * @returns {mat3} out
 */

function fromTranslation(out, v) {
  out[0] = 1;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = 1;
  out[5] = 0;
  out[6] = v[0];
  out[7] = v[1];
  out[8] = 1;
  return out;
}
/**
 * Creates a matrix from a given angle
 * This is equivalent to (but much faster than):
 *
 *     mat3.identity(dest);
 *     mat3.rotate(dest, dest, rad);
 *
 * @param {mat3} out mat3 receiving operation result
 * @param {Number} rad the angle to rotate the matrix by
 * @returns {mat3} out
 */

function fromRotation(out, rad) {
  var s = Math.sin(rad),
      c = Math.cos(rad);
  out[0] = c;
  out[1] = s;
  out[2] = 0;
  out[3] = -s;
  out[4] = c;
  out[5] = 0;
  out[6] = 0;
  out[7] = 0;
  out[8] = 1;
  return out;
}
/**
 * Creates a matrix from a vector scaling
 * This is equivalent to (but much faster than):
 *
 *     mat3.identity(dest);
 *     mat3.scale(dest, dest, vec);
 *
 * @param {mat3} out mat3 receiving operation result
 * @param {ReadonlyVec2} v Scaling vector
 * @returns {mat3} out
 */

function fromScaling(out, v) {
  out[0] = v[0];
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = v[1];
  out[5] = 0;
  out[6] = 0;
  out[7] = 0;
  out[8] = 1;
  return out;
}
/**
 * Copies the values from a mat2d into a mat3
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat2d} a the matrix to copy
 * @returns {mat3} out
 **/

function fromMat2d(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = 0;
  out[3] = a[2];
  out[4] = a[3];
  out[5] = 0;
  out[6] = a[4];
  out[7] = a[5];
  out[8] = 1;
  return out;
}
/**
 * Calculates a 3x3 matrix from the given quaternion
 *
 * @param {mat3} out mat3 receiving operation result
 * @param {ReadonlyQuat} q Quaternion to create matrix from
 *
 * @returns {mat3} out
 */

function fromQuat(out, q) {
  var x = q[0],
      y = q[1],
      z = q[2],
      w = q[3];
  var x2 = x + x;
  var y2 = y + y;
  var z2 = z + z;
  var xx = x * x2;
  var yx = y * x2;
  var yy = y * y2;
  var zx = z * x2;
  var zy = z * y2;
  var zz = z * z2;
  var wx = w * x2;
  var wy = w * y2;
  var wz = w * z2;
  out[0] = 1 - yy - zz;
  out[3] = yx - wz;
  out[6] = zx + wy;
  out[1] = yx + wz;
  out[4] = 1 - xx - zz;
  out[7] = zy - wx;
  out[2] = zx - wy;
  out[5] = zy + wx;
  out[8] = 1 - xx - yy;
  return out;
}
/**
 * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix
 *
 * @param {mat3} out mat3 receiving operation result
 * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from
 *
 * @returns {mat3} out
 */

function normalFromMat4(out, a) {
  var a00 = a[0],
      a01 = a[1],
      a02 = a[2],
      a03 = a[3];
  var a10 = a[4],
      a11 = a[5],
      a12 = a[6],
      a13 = a[7];
  var a20 = a[8],
      a21 = a[9],
      a22 = a[10],
      a23 = a[11];
  var a30 = a[12],
      a31 = a[13],
      a32 = a[14],
      a33 = a[15];
  var b00 = a00 * a11 - a01 * a10;
  var b01 = a00 * a12 - a02 * a10;
  var b02 = a00 * a13 - a03 * a10;
  var b03 = a01 * a12 - a02 * a11;
  var b04 = a01 * a13 - a03 * a11;
  var b05 = a02 * a13 - a03 * a12;
  var b06 = a20 * a31 - a21 * a30;
  var b07 = a20 * a32 - a22 * a30;
  var b08 = a20 * a33 - a23 * a30;
  var b09 = a21 * a32 - a22 * a31;
  var b10 = a21 * a33 - a23 * a31;
  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant

  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;

  if (!det) {
    return null;
  }

  det = 1.0 / det;
  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;
  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;
  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;
  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;
  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;
  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;
  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;
  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;
  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;
  return out;
}
/**
 * Generates a 2D projection matrix with the given bounds
 *
 * @param {mat3} out mat3 frustum matrix will be written into
 * @param {number} width Width of your gl context
 * @param {number} height Height of gl context
 * @returns {mat3} out
 */

function projection(out, width, height) {
  out[0] = 2 / width;
  out[1] = 0;
  out[2] = 0;
  out[3] = 0;
  out[4] = -2 / height;
  out[5] = 0;
  out[6] = -1;
  out[7] = 1;
  out[8] = 1;
  return out;
}
/**
 * Returns a string representation of a mat3
 *
 * @param {ReadonlyMat3} a matrix to represent as a string
 * @returns {String} string representation of the matrix
 */

function str(a) {
  return "mat3(" + a[0] + ", " + a[1] + ", " + a[2] + ", " + a[3] + ", " + a[4] + ", " + a[5] + ", " + a[6] + ", " + a[7] + ", " + a[8] + ")";
}
/**
 * Returns Frobenius norm of a mat3
 *
 * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of
 * @returns {Number} Frobenius norm
 */

function frob(a) {
  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);
}
/**
 * Adds two mat3's
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the first operand
 * @param {ReadonlyMat3} b the second operand
 * @returns {mat3} out
 */

function add(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  out[3] = a[3] + b[3];
  out[4] = a[4] + b[4];
  out[5] = a[5] + b[5];
  out[6] = a[6] + b[6];
  out[7] = a[7] + b[7];
  out[8] = a[8] + b[8];
  return out;
}
/**
 * Subtracts matrix b from matrix a
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the first operand
 * @param {ReadonlyMat3} b the second operand
 * @returns {mat3} out
 */

function subtract(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  out[3] = a[3] - b[3];
  out[4] = a[4] - b[4];
  out[5] = a[5] - b[5];
  out[6] = a[6] - b[6];
  out[7] = a[7] - b[7];
  out[8] = a[8] - b[8];
  return out;
}
/**
 * Multiply each element of the matrix by a scalar.
 *
 * @param {mat3} out the receiving matrix
 * @param {ReadonlyMat3} a the matrix to scale
 * @param {Number} b amount to scale the matrix's elements by
 * @returns {mat3} out
 */

function multiplyScalar(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  out[3] = a[3] * b;
  out[4] = a[4] * b;
  out[5] = a[5] * b;
  out[6] = a[6] * b;
  out[7] = a[7] * b;
  out[8] = a[8] * b;
  return out;
}
/**
 * Adds two mat3's after multiplying each element of the second operand by a scalar value.
 *
 * @param {mat3} out the receiving vector
 * @param {ReadonlyMat3} a the first operand
 * @param {ReadonlyMat3} b the second operand
 * @param {Number} scale the amount to scale b's elements by before adding
 * @returns {mat3} out
 */

function multiplyScalarAndAdd(out, a, b, scale) {
  out[0] = a[0] + b[0] * scale;
  out[1] = a[1] + b[1] * scale;
  out[2] = a[2] + b[2] * scale;
  out[3] = a[3] + b[3] * scale;
  out[4] = a[4] + b[4] * scale;
  out[5] = a[5] + b[5] * scale;
  out[6] = a[6] + b[6] * scale;
  out[7] = a[7] + b[7] * scale;
  out[8] = a[8] + b[8] * scale;
  return out;
}
/**
 * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)
 *
 * @param {ReadonlyMat3} a The first matrix.
 * @param {ReadonlyMat3} b The second matrix.
 * @returns {Boolean} True if the matrices are equal, false otherwise.
 */

function exactEquals(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];
}
/**
 * Returns whether or not the matrices have approximately the same elements in the same position.
 *
 * @param {ReadonlyMat3} a The first matrix.
 * @param {ReadonlyMat3} b The second matrix.
 * @returns {Boolean} True if the matrices are equal, false otherwise.
 */

function equals(a, b) {
  var a0 = a[0],
      a1 = a[1],
      a2 = a[2],
      a3 = a[3],
      a4 = a[4],
      a5 = a[5],
      a6 = a[6],
      a7 = a[7],
      a8 = a[8];
  var b0 = b[0],
      b1 = b[1],
      b2 = b[2],
      b3 = b[3],
      b4 = b[4],
      b5 = b[5],
      b6 = b[6],
      b7 = b[7],
      b8 = b[8];
  return Math.abs(a0 - b0) <= common["b" /* EPSILON */] * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= common["b" /* EPSILON */] * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= common["b" /* EPSILON */] * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= common["b" /* EPSILON */] * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= common["b" /* EPSILON */] * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= common["b" /* EPSILON */] * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= common["b" /* EPSILON */] * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= common["b" /* EPSILON */] * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= common["b" /* EPSILON */] * Math.max(1.0, Math.abs(a8), Math.abs(b8));
}
/**
 * Alias for {@link mat3.multiply}
 * @function
 */

var mul = multiply;
/**
 * Alias for {@link mat3.subtract}
 * @function
 */

var sub = subtract;
// EXTERNAL MODULE: ./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/vec2.js
var vec2 = __webpack_require__("4f07");

// EXTERNAL MODULE: ./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/vec3.js
var vec3 = __webpack_require__("8480");

// CONCATENATED MODULE: ./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/index.js












/***/ }),

/***/ "917b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var defineProperty = __webpack_require__("80ea").f;

module.exports = function (Target, Source, key) {
  key in Target || defineProperty(Target, key, {
    configurable: true,
    get: function () { return Source[key]; },
    set: function (it) { Source[key] = it; }
  });
};


/***/ }),

/***/ "91c2":
/***/ (function(module, exports, __webpack_require__) {

var memoizeCapped = __webpack_require__("e159");

/** Used to match property names within property paths. */
var rePropName = /[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;

/** Used to match backslashes in property paths. */
var reEscapeChar = /\\(\\)?/g;

/**
 * Converts `string` to a property path array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the property path array.
 */
var stringToPath = memoizeCapped(function(string) {
  var result = [];
  if (string.charCodeAt(0) === 46 /* . */) {
    result.push('');
  }
  string.replace(rePropName, function(match, number, quote, subString) {
    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));
  });
  return result;
});

module.exports = stringToPath;


/***/ }),

/***/ "92e2":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(global) {
var check = function (it) {
  return it && it.Math === Math && it;
};

// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
module.exports =
  // eslint-disable-next-line es/no-global-this -- safe
  check(typeof globalThis == 'object' && globalThis) ||
  check(typeof window == 'object' && window) ||
  // eslint-disable-next-line no-restricted-globals -- safe
  check(typeof self == 'object' && self) ||
  check(typeof global == 'object' && global) ||
  check(typeof this == 'object' && this) ||
  // eslint-disable-next-line no-new-func -- fallback
  (function () { return this; })() || Function('return this')();

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("f20b")))

/***/ }),

/***/ "9394":
/***/ (function(module, exports, __webpack_require__) {

var getMapData = __webpack_require__("7a83");

/**
 * Checks if a map value for `key` exists.
 *
 * @private
 * @name has
 * @memberOf MapCache
 * @param {string} key The key of the entry to check.
 * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.
 */
function mapCacheHas(key) {
  return getMapData(this, key).has(key);
}

module.exports = mapCacheHas;


/***/ }),

/***/ "93b3":
/***/ (function(module, exports, __webpack_require__) {

var copyObject = __webpack_require__("9bdb"),
    keysIn = __webpack_require__("ac69");

/**
 * Converts `value` to a plain object flattening inherited enumerable string
 * keyed properties of `value` to own properties of the plain object.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Lang
 * @param {*} value The value to convert.
 * @returns {Object} Returns the converted plain object.
 * @example
 *
 * function Foo() {
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.assign({ 'a': 1 }, new Foo);
 * // => { 'a': 1, 'b': 2 }
 *
 * _.assign({ 'a': 1 }, _.toPlainObject(new Foo));
 * // => { 'a': 1, 'b': 2, 'c': 3 }
 */
function toPlainObject(value) {
  return copyObject(value, keysIn(value));
}

module.exports = toPlainObject;


/***/ }),

/***/ "93b7":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");

var navigator = globalThis.navigator;
var userAgent = navigator && navigator.userAgent;

module.exports = userAgent ? String(userAgent) : '';


/***/ }),

/***/ "93e4":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// iterable DOM collections
// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods
module.exports = {
  CSSRuleList: 0,
  CSSStyleDeclaration: 0,
  CSSValueList: 0,
  ClientRectList: 0,
  DOMRectList: 0,
  DOMStringList: 0,
  DOMTokenList: 1,
  DataTransferItemList: 0,
  FileList: 0,
  HTMLAllCollection: 0,
  HTMLCollection: 0,
  HTMLFormElement: 0,
  HTMLSelectElement: 0,
  MediaList: 0,
  MimeTypeArray: 0,
  NamedNodeMap: 0,
  NodeList: 1,
  PaintRequestList: 0,
  Plugin: 0,
  PluginArray: 0,
  SVGLengthList: 0,
  SVGNumberList: 0,
  SVGPathSegList: 0,
  SVGPointList: 0,
  SVGStringList: 0,
  SVGTransformList: 0,
  SourceBufferList: 0,
  StyleSheetList: 0,
  TextTrackCueList: 0,
  TextTrackList: 0,
  TouchList: 0
};


/***/ }),

/***/ "943c":
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var root = __webpack_require__("82c6"),
    stubFalse = __webpack_require__("7e5b");

/** Detect free variable `exports`. */
var freeExports =  true && exports && !exports.nodeType && exports;

/** Detect free variable `module`. */
var freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;

/** Detect the popular CommonJS extension `module.exports`. */
var moduleExports = freeModule && freeModule.exports === freeExports;

/** Built-in value references. */
var Buffer = moduleExports ? root.Buffer : undefined;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;

/**
 * Checks if `value` is a buffer.
 *
 * @static
 * @memberOf _
 * @since 4.3.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.
 * @example
 *
 * _.isBuffer(new Buffer(2));
 * // => true
 *
 * _.isBuffer(new Uint8Array(2));
 * // => false
 */
var isBuffer = nativeIsBuffer || stubFalse;

module.exports = isBuffer;

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__("6765")(module)))

/***/ }),

/***/ "947d":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/_tslib@2.6.3@tslib/tslib.es6.js
var tslib_es6 = __webpack_require__("9a80");

// CONCATENATED MODULE: ./node_modules/_@antv_event-emitter@0.1.3@@antv/event-emitter/esm/index.js
var WILDCARD = '*';
/* event-emitter */
var EventEmitter = /** @class */ (function () {
    function EventEmitter() {
        this._events = {};
    }
    /**
     * 监听一个事件
     * @param evt
     * @param callback
     * @param once
     */
    EventEmitter.prototype.on = function (evt, callback, once) {
        if (!this._events[evt]) {
            this._events[evt] = [];
        }
        this._events[evt].push({
            callback: callback,
            once: !!once,
        });
        return this;
    };
    /**
     * 监听一个事件一次
     * @param evt
     * @param callback
     */
    EventEmitter.prototype.once = function (evt, callback) {
        return this.on(evt, callback, true);
    };
    /**
     * 触发一个事件
     * @param evt
     * @param args
     */
    EventEmitter.prototype.emit = function (evt) {
        var _this = this;
        var args = [];
        for (var _i = 1; _i < arguments.length; _i++) {
            args[_i - 1] = arguments[_i];
        }
        var events = this._events[evt] || [];
        var wildcardEvents = this._events[WILDCARD] || [];
        // 实际的处理 emit 方法
        var doEmit = function (es) {
            var length = es.length;
            for (var i = 0; i < length; i++) {
                if (!es[i]) {
                    continue;
                }
                var _a = es[i], callback = _a.callback, once = _a.once;
                if (once) {
                    es.splice(i, 1);
                    if (es.length === 0) {
                        delete _this._events[evt];
                    }
                    length--;
                    i--;
                }
                callback.apply(_this, args);
            }
        };
        doEmit(events);
        doEmit(wildcardEvents);
    };
    /**
     * 取消监听一个事件，或者一个channel
     * @param evt
     * @param callback
     */
    EventEmitter.prototype.off = function (evt, callback) {
        if (!evt) {
            // evt 为空全部清除
            this._events = {};
        }
        else {
            if (!callback) {
                // evt 存在，callback 为空，清除事件所有方法
                delete this._events[evt];
            }
            else {
                // evt 存在，callback 存在，清除匹配的
                var events = this._events[evt] || [];
                var length_1 = events.length;
                for (var i = 0; i < length_1; i++) {
                    if (events[i].callback === callback) {
                        events.splice(i, 1);
                        length_1--;
                        i--;
                    }
                }
                if (events.length === 0) {
                    delete this._events[evt];
                }
            }
        }
        return this;
    };
    /* 当前所有的事件 */
    EventEmitter.prototype.getEvents = function () {
        return this._events;
    };
    return EventEmitter;
}());
/* harmony default export */ var esm = (EventEmitter);
//# sourceMappingURL=index.js.map
// EXTERNAL MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/util/util.js
var util = __webpack_require__("7533");

// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/abstract/base.js



var base_Base = /** @class */ (function (_super) {
    Object(tslib_es6["__extends"])(Base, _super);
    function Base(cfg) {
        var _this = _super.call(this) || this;
        /**
         * 是否被销毁
         * @type {boolean}
         */
        _this.destroyed = false;
        var defaultCfg = _this.getDefaultCfg();
        _this.cfg = Object(util["i" /* mix */])(defaultCfg, cfg);
        return _this;
    }
    /**
     * @protected
     * 默认的配置项
     * @returns {object} 默认的配置项
     */
    Base.prototype.getDefaultCfg = function () {
        return {};
    };
    // 实现接口的方法
    Base.prototype.get = function (name) {
        return this.cfg[name];
    };
    // 实现接口的方法
    Base.prototype.set = function (name, value) {
        this.cfg[name] = value;
    };
    // 实现接口的方法
    Base.prototype.destroy = function () {
        this.cfg = {
            destroyed: true,
        };
        this.off();
        this.destroyed = true;
    };
    return Base;
}(esm));
/* harmony default export */ var base = __webpack_exports__["a"] = (base_Base);
//# sourceMappingURL=base.js.map

/***/ }),

/***/ "94ea":
/***/ (function(module, exports, __webpack_require__) {

var baseIsTypedArray = __webpack_require__("5e8a"),
    baseUnary = __webpack_require__("8509"),
    nodeUtil = __webpack_require__("2ec7");

/* Node.js helper references. */
var nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;

/**
 * Checks if `value` is classified as a typed array.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.
 * @example
 *
 * _.isTypedArray(new Uint8Array);
 * // => true
 *
 * _.isTypedArray([]);
 * // => false
 */
var isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;

module.exports = isTypedArray;


/***/ }),

/***/ "9672":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// in old WebKit versions, `element.classList` is not an instance of global `DOMTokenList`
var documentCreateElement = __webpack_require__("6c25");

var classList = documentCreateElement('span').classList;
var DOMTokenListPrototype = classList && classList.constructor && classList.constructor.prototype;

module.exports = DOMTokenListPrototype === Object.prototype ? undefined : DOMTokenListPrototype;


/***/ }),

/***/ "96b4":
/***/ (function(module, exports) {

/**
 * Removes `key` and its value from the stack.
 *
 * @private
 * @name delete
 * @memberOf Stack
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function stackDelete(key) {
  var data = this.__data__,
      result = data['delete'](key);

  this.size = data.size;
  return result;
}

module.exports = stackDelete;


/***/ }),

/***/ "970e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var hasOwn = __webpack_require__("85ed");
var defineBuiltIn = __webpack_require__("f303");
var dateToPrimitive = __webpack_require__("d8ba");
var wellKnownSymbol = __webpack_require__("9a0b");

var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');
var DatePrototype = Date.prototype;

// `Date.prototype[@@toPrimitive]` method
// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive
if (!hasOwn(DatePrototype, TO_PRIMITIVE)) {
  defineBuiltIn(DatePrototype, TO_PRIMITIVE, dateToPrimitive);
}


/***/ }),

/***/ "9755":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// TODO: Remove this module from `core-js@4` since it's split to modules listed below
__webpack_require__("b680");
__webpack_require__("81fa");
__webpack_require__("c2f0");
__webpack_require__("07e7");
__webpack_require__("81fd");


/***/ }),

/***/ "9774":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isObject = __webpack_require__("d2cb");

var $String = String;
var $TypeError = TypeError;

// `Assert: Type(argument) is Object`
module.exports = function (argument) {
  if (isObject(argument)) return argument;
  throw new $TypeError($String(argument) + ' is not an object');
};


/***/ }),

/***/ "9796":
/***/ (function(module, exports) {

/**
 * Removes `key` and its value from the hash.
 *
 * @private
 * @name delete
 * @memberOf Hash
 * @param {Object} hash The hash to modify.
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function hashDelete(key) {
  var result = this.has(key) && delete this.__data__[key];
  this.size -= result ? 1 : 0;
  return result;
}

module.exports = hashDelete;


/***/ }),

/***/ "97a9":
/***/ (function(module, exports, __webpack_require__) {

var Uint8Array = __webpack_require__("8eb4");

/**
 * Creates a clone of `arrayBuffer`.
 *
 * @private
 * @param {ArrayBuffer} arrayBuffer The array buffer to clone.
 * @returns {ArrayBuffer} Returns the cloned array buffer.
 */
function cloneArrayBuffer(arrayBuffer) {
  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);
  new Uint8Array(result).set(new Uint8Array(arrayBuffer));
  return result;
}

module.exports = cloneArrayBuffer;


/***/ }),

/***/ "97c0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview image
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var util_1 = __webpack_require__("6d77");
var constant_1 = __webpack_require__("7a93");
var base_1 = __webpack_require__("6cb2");
var Image = /** @class */ (function (_super) {
    tslib_1.__extends(Image, _super);
    function Image() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'image';
        _this.canFill = false;
        _this.canStroke = false;
        return _this;
    }
    Image.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0 });
    };
    Image.prototype.createPath = function (context, targetAttrs) {
        var _this = this;
        var attrs = this.attr();
        var el = this.get('el');
        util_1.each(targetAttrs || attrs, function (value, attr) {
            if (attr === 'img') {
                _this._setImage(attrs.img);
            }
            else if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
    };
    Image.prototype.setAttr = function (name, value) {
        this.attrs[name] = value;
        if (name === 'img') {
            this._setImage(value);
        }
    };
    Image.prototype._setImage = function (img) {
        var attrs = this.attr();
        var el = this.get('el');
        if (util_1.isString(img)) {
            el.setAttribute('href', img);
        }
        else if (img instanceof window.Image) {
            if (!attrs.width) {
                el.setAttribute('width', img.width);
                this.attr('width', img.width);
            }
            if (!attrs.height) {
                el.setAttribute('height', img.height);
                this.attr('height', img.height);
            }
            el.setAttribute('href', img.src);
        }
        else if (img instanceof HTMLElement && util_1.isString(img.nodeName) && img.nodeName.toUpperCase() === 'CANVAS') {
            // @ts-ignore
            el.setAttribute('href', img.toDataURL());
        }
        else if (img instanceof ImageData) {
            var canvas = document.createElement('canvas');
            canvas.setAttribute('width', "" + img.width);
            canvas.setAttribute('height', "" + img.height);
            canvas.getContext('2d').putImageData(img, 0, 0);
            if (!attrs.width) {
                el.setAttribute('width', "" + img.width);
                this.attr('width', img.width);
            }
            if (!attrs.height) {
                el.setAttribute('height', "" + img.height);
                this.attr('height', img.height);
            }
            el.setAttribute('href', canvas.toDataURL());
        }
    };
    return Image;
}(base_1.default));
exports.default = Image;
//# sourceMappingURL=image.js.map

/***/ }),

/***/ "983e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isPossiblePrototype = __webpack_require__("bbc6");

var $String = String;
var $TypeError = TypeError;

module.exports = function (argument) {
  if (isPossiblePrototype(argument)) return argument;
  throw new $TypeError("Can't set " + $String(argument) + ' as a prototype');
};


/***/ }),

/***/ "9842":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var toObject = __webpack_require__("8ec0");
var lengthOfArrayLike = __webpack_require__("8269");
var setArrayLength = __webpack_require__("d81b");
var doesNotExceedSafeInteger = __webpack_require__("3110");
var fails = __webpack_require__("e835");

var INCORRECT_TO_LENGTH = fails(function () {
  return [].push.call({ length: 0x100000000 }, 1) !== 4294967297;
});

// V8 <= 121 and Safari <= 15.4; FF < 23 throws InternalError
// https://bugs.chromium.org/p/v8/issues/detail?id=12681
var properErrorOnNonWritableLength = function () {
  try {
    // eslint-disable-next-line es/no-object-defineproperty -- safe
    Object.defineProperty([], 'length', { writable: false }).push();
  } catch (error) {
    return error instanceof TypeError;
  }
};

var FORCED = INCORRECT_TO_LENGTH || !properErrorOnNonWritableLength();

// `Array.prototype.push` method
// https://tc39.es/ecma262/#sec-array.prototype.push
$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  push: function push(item) {
    var O = toObject(this);
    var len = lengthOfArrayLike(O);
    var argCount = arguments.length;
    doesNotExceedSafeInteger(len + argCount);
    for (var i = 0; i < argCount; i++) {
      O[len] = arguments[i];
      len++;
    }
    setArrayLength(O, len);
    return len;
  }
});


/***/ }),

/***/ "98ae":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var g_base_1 = __webpack_require__("ae4c");
var util_1 = __webpack_require__("1e49");
var draw_1 = __webpack_require__("a394");
var g_base_2 = __webpack_require__("ae4c");
var Shape = __webpack_require__("595a");
var group_1 = __webpack_require__("4d59");
var ShapeBase = /** @class */ (function (_super) {
    tslib_1.__extends(ShapeBase, _super);
    function ShapeBase() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ShapeBase.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        // 设置默认值
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { lineWidth: 1, lineAppendWidth: 0, strokeOpacity: 1, fillOpacity: 1 });
    };
    ShapeBase.prototype.getShapeBase = function () {
        return Shape;
    };
    ShapeBase.prototype.getGroupBase = function () {
        return group_1.default;
    };
    /**
     * 一些方法调用会引起画布变化
     * @param {ChangeType} changeType 改变的类型
     */
    ShapeBase.prototype.onCanvasChange = function (changeType) {
        draw_1.refreshElement(this, changeType);
    };
    ShapeBase.prototype.calculateBBox = function () {
        var type = this.get('type');
        var lineWidth = this.getHitLineWidth();
        // const attrs = this.attr();
        var bboxMethod = g_base_2.getBBoxMethod(type);
        var box = bboxMethod(this);
        var halfLineWidth = lineWidth / 2;
        var minX = box.x - halfLineWidth;
        var minY = box.y - halfLineWidth;
        var maxX = box.x + box.width + halfLineWidth;
        var maxY = box.y + box.height + halfLineWidth;
        return {
            x: minX,
            minX: minX,
            y: minY,
            minY: minY,
            width: box.width + lineWidth,
            height: box.height + lineWidth,
            maxX: maxX,
            maxY: maxY,
        };
    };
    ShapeBase.prototype.isFill = function () {
        return !!this.attrs['fill'] || this.isClipShape();
    };
    ShapeBase.prototype.isStroke = function () {
        return !!this.attrs['stroke'];
    };
    // 同 shape 中的方法重复了
    ShapeBase.prototype._applyClip = function (context, clip) {
        if (clip) {
            context.save();
            // 将 clip 的属性挂载到 context 上
            draw_1.applyAttrsToContext(context, clip);
            // 绘制 clip 路径
            clip.createPath(context);
            context.restore();
            // 裁剪
            context.clip();
            clip._afterDraw();
        }
    };
    // 绘制图形时需要考虑 region 限制
    ShapeBase.prototype.draw = function (context, region) {
        var clip = this.cfg.clipShape;
        // 如果指定了 region，同时不允许刷新时，直接返回
        if (region) {
            if (this.cfg.refresh === false) {
                // this._afterDraw();
                this.set('hasChanged', false);
                return;
            }
            // 是否相交需要考虑 clip 的包围盒
            var bbox = this.getCanvasBBox();
            if (!util_1.intersectRect(region, bbox)) {
                // 图形的包围盒与重绘区域不相交时，也需要清除标记
                this.set('hasChanged', false);
                // 存在多种情形需要更新 cacheCanvasBBox 和 isInview 的判定
                // 1. 之前图形在视窗内，但是现在不再视窗内
                // 2. 如果当前的图形以及父元素都没有发生过变化，refresh = false 不会走到这里，所以这里的图形都是父元素发生变化，但是没有在视图内的元素
                if (this.cfg.isInView) {
                    this._afterDraw();
                }
                return;
            }
        }
        context.save();
        // 先将 attrs 应用到上下文中，再设置 clip。因为 clip 应该被当前元素的 matrix 所影响
        draw_1.applyAttrsToContext(context, this);
        this._applyClip(context, clip);
        this.drawPath(context);
        context.restore();
        this._afterDraw();
    };
    ShapeBase.prototype.getCanvasViewBox = function () {
        var canvas = this.cfg.canvas;
        if (canvas) {
            // @ts-ignore
            return canvas.getViewRange();
        }
        return null;
    };
    ShapeBase.prototype.cacheCanvasBBox = function () {
        var canvasBBox = this.getCanvasViewBox();
        // 绘制的时候缓存包围盒
        if (canvasBBox) {
            var bbox = this.getCanvasBBox();
            var isInView = util_1.intersectRect(bbox, canvasBBox);
            this.set('isInView', isInView);
            // 不再视窗内 cacheCanvasBBox 设置成 null，会提升局部渲染的性能，
            // 因为在局部渲染影响的包围盒计算时不考虑这个图形的包围盒
            // 父元素 cacheCanvasBBox 计算的时候也不计算
            if (isInView) {
                this.set('cacheCanvasBBox', bbox);
            }
            else {
                this.set('cacheCanvasBBox', null);
            }
        }
    };
    ShapeBase.prototype._afterDraw = function () {
        this.cacheCanvasBBox();
        // 绘制后消除标记
        this.set('hasChanged', false);
        this.set('refresh', null);
    };
    ShapeBase.prototype.skipDraw = function () {
        this.set('cacheCanvasBBox', null);
        this.set('isInView', null);
        this.set('hasChanged', false);
    };
    /**
     * 绘制图形的路径
     * @param {CanvasRenderingContext2D} context 上下文
     */
    ShapeBase.prototype.drawPath = function (context) {
        this.createPath(context);
        this.strokeAndFill(context);
        this.afterDrawPath(context);
    };
    /**
     * @protected
     * 填充图形
     * @param {CanvasRenderingContext2D} context context 上下文
     */
    ShapeBase.prototype.fill = function (context) {
        context.fill();
    };
    /**
     * @protected
     * 绘制图形边框
     * @param {CanvasRenderingContext2D} context context 上下文
     */
    ShapeBase.prototype.stroke = function (context) {
        context.stroke();
    };
    // 绘制或者填充
    ShapeBase.prototype.strokeAndFill = function (context) {
        var _a = this.attrs, lineWidth = _a.lineWidth, opacity = _a.opacity, strokeOpacity = _a.strokeOpacity, fillOpacity = _a.fillOpacity;
        if (this.isFill()) {
            if (!util_1.isNil(fillOpacity) && fillOpacity !== 1) {
                context.globalAlpha = fillOpacity;
                this.fill(context);
                context.globalAlpha = opacity;
            }
            else {
                this.fill(context);
            }
        }
        if (this.isStroke()) {
            if (lineWidth > 0) {
                if (!util_1.isNil(strokeOpacity) && strokeOpacity !== 1) {
                    context.globalAlpha = strokeOpacity;
                }
                this.stroke(context);
            }
        }
        this.afterDrawPath(context);
    };
    /**
     * @protected
     * 绘制图形的路径
     * @param {CanvasRenderingContext2D} context 上下文
     */
    ShapeBase.prototype.createPath = function (context) { };
    /**
     * 绘制完成 path 后的操作
     * @param {CanvasRenderingContext2D} context 上下文
     */
    ShapeBase.prototype.afterDrawPath = function (context) { };
    ShapeBase.prototype.isInShape = function (refX, refY) {
        // return HitUtil.isHitShape(this, refX, refY);
        var isStroke = this.isStroke();
        var isFill = this.isFill();
        var lineWidth = this.getHitLineWidth();
        return this.isInStrokeOrPath(refX, refY, isStroke, isFill, lineWidth);
    };
    // 之所以不拆成 isInStroke 和 isInPath 在于两者存在一些共同的计算
    ShapeBase.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {
        return false;
    };
    /**
     * 获取线拾取的宽度
     * @returns {number} 线的拾取宽度
     */
    ShapeBase.prototype.getHitLineWidth = function () {
        if (!this.isStroke()) {
            return 0;
        }
        var attrs = this.attrs;
        return attrs['lineWidth'] + attrs['lineAppendWidth'];
    };
    return ShapeBase;
}(g_base_1.AbstractShape));
exports.default = ShapeBase;
//# sourceMappingURL=base.js.map

/***/ }),

/***/ "98c8":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");

// Detect IE8's incomplete defineProperty implementation
module.exports = !fails(function () {
  // eslint-disable-next-line es/no-object-defineproperty -- required for testing
  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] !== 7;
});


/***/ }),

/***/ "9979":
/***/ (function(module, exports, __webpack_require__) {

var createBaseFor = __webpack_require__("31af");

/**
 * The base implementation of `baseForOwn` which iterates over `object`
 * properties returned by `keysFunc` and invokes `iteratee` for each property.
 * Iteratee functions may exit iteration early by explicitly returning `false`.
 *
 * @private
 * @param {Object} object The object to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @param {Function} keysFunc The function to get the keys of `object`.
 * @returns {Object} Returns `object`.
 */
var baseFor = createBaseFor();

module.exports = baseFor;


/***/ }),

/***/ "99e5":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var definePropertyModule = __webpack_require__("80ea");
var createPropertyDescriptor = __webpack_require__("6638");

module.exports = function (object, key, value) {
  if (DESCRIPTORS) definePropertyModule.f(object, key, createPropertyDescriptor(0, value));
  else object[key] = value;
};


/***/ }),

/***/ "9a0b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var shared = __webpack_require__("f823");
var hasOwn = __webpack_require__("85ed");
var uid = __webpack_require__("de7c");
var NATIVE_SYMBOL = __webpack_require__("1942");
var USE_SYMBOL_AS_UID = __webpack_require__("2810");

var Symbol = globalThis.Symbol;
var WellKnownSymbolsStore = shared('wks');
var createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol['for'] || Symbol : Symbol && Symbol.withoutSetter || uid;

module.exports = function (name) {
  if (!hasOwn(WellKnownSymbolsStore, name)) {
    WellKnownSymbolsStore[name] = NATIVE_SYMBOL && hasOwn(Symbol, name)
      ? Symbol[name]
      : createWellKnownSymbol('Symbol.' + name);
  } return WellKnownSymbolsStore[name];
};


/***/ }),

/***/ "9a38":
/***/ (function(module, exports) {

/** Used as references for various `Number` constants. */
var MAX_SAFE_INTEGER = 9007199254740991;

/**
 * Checks if `value` is a valid array-like length.
 *
 * **Note:** This method is loosely based on
 * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.
 * @example
 *
 * _.isLength(3);
 * // => true
 *
 * _.isLength(Number.MIN_VALUE);
 * // => false
 *
 * _.isLength(Infinity);
 * // => false
 *
 * _.isLength('3');
 * // => false
 */
function isLength(value) {
  return typeof value == 'number' &&
    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;
}

module.exports = isLength;


/***/ }),

/***/ "9a80":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__extends", function() { return __extends; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__assign", function() { return __assign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__rest", function() { return __rest; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__decorate", function() { return __decorate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__param", function() { return __param; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__esDecorate", function() { return __esDecorate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__runInitializers", function() { return __runInitializers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__propKey", function() { return __propKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__setFunctionName", function() { return __setFunctionName; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__metadata", function() { return __metadata; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__awaiter", function() { return __awaiter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__generator", function() { return __generator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__createBinding", function() { return __createBinding; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__exportStar", function() { return __exportStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__values", function() { return __values; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__read", function() { return __read; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spread", function() { return __spread; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spreadArrays", function() { return __spreadArrays; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__spreadArray", function() { return __spreadArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__await", function() { return __await; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncGenerator", function() { return __asyncGenerator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncDelegator", function() { return __asyncDelegator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__asyncValues", function() { return __asyncValues; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__makeTemplateObject", function() { return __makeTemplateObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importStar", function() { return __importStar; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__importDefault", function() { return __importDefault; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldGet", function() { return __classPrivateFieldGet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldSet", function() { return __classPrivateFieldSet; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__classPrivateFieldIn", function() { return __classPrivateFieldIn; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__addDisposableResource", function() { return __addDisposableResource; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "__disposeResources", function() { return __disposeResources; });
/******************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/* global Reflect, Promise, SuppressedError, Symbol */

var extendStatics = function(d, b) {
    extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };
    return extendStatics(d, b);
};

function __extends(d, b) {
    if (typeof b !== "function" && b !== null)
        throw new TypeError("Class extends value " + String(b) + " is not a constructor or null");
    extendStatics(d, b);
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
}

var __assign = function() {
    __assign = Object.assign || function __assign(t) {
        for (var s, i = 1, n = arguments.length; i < n; i++) {
            s = arguments[i];
            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];
        }
        return t;
    }
    return __assign.apply(this, arguments);
}

function __rest(s, e) {
    var t = {};
    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)
        t[p] = s[p];
    if (s != null && typeof Object.getOwnPropertySymbols === "function")
        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {
            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))
                t[p[i]] = s[p[i]];
        }
    return t;
}

function __decorate(decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
}

function __param(paramIndex, decorator) {
    return function (target, key) { decorator(target, key, paramIndex); }
}

function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {
    function accept(f) { if (f !== void 0 && typeof f !== "function") throw new TypeError("Function expected"); return f; }
    var kind = contextIn.kind, key = kind === "getter" ? "get" : kind === "setter" ? "set" : "value";
    var target = !descriptorIn && ctor ? contextIn["static"] ? ctor : ctor.prototype : null;
    var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});
    var _, done = false;
    for (var i = decorators.length - 1; i >= 0; i--) {
        var context = {};
        for (var p in contextIn) context[p] = p === "access" ? {} : contextIn[p];
        for (var p in contextIn.access) context.access[p] = contextIn.access[p];
        context.addInitializer = function (f) { if (done) throw new TypeError("Cannot add initializers after decoration has completed"); extraInitializers.push(accept(f || null)); };
        var result = (0, decorators[i])(kind === "accessor" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);
        if (kind === "accessor") {
            if (result === void 0) continue;
            if (result === null || typeof result !== "object") throw new TypeError("Object expected");
            if (_ = accept(result.get)) descriptor.get = _;
            if (_ = accept(result.set)) descriptor.set = _;
            if (_ = accept(result.init)) initializers.unshift(_);
        }
        else if (_ = accept(result)) {
            if (kind === "field") initializers.unshift(_);
            else descriptor[key] = _;
        }
    }
    if (target) Object.defineProperty(target, contextIn.name, descriptor);
    done = true;
};

function __runInitializers(thisArg, initializers, value) {
    var useValue = arguments.length > 2;
    for (var i = 0; i < initializers.length; i++) {
        value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);
    }
    return useValue ? value : void 0;
};

function __propKey(x) {
    return typeof x === "symbol" ? x : "".concat(x);
};

function __setFunctionName(f, name, prefix) {
    if (typeof name === "symbol") name = name.description ? "[".concat(name.description, "]") : "";
    return Object.defineProperty(f, "name", { configurable: true, value: prefix ? "".concat(prefix, " ", name) : name });
};

function __metadata(metadataKey, metadataValue) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(metadataKey, metadataValue);
}

function __awaiter(thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
}

function __generator(thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
}

var __createBinding = Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
        desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
});

function __exportStar(m, o) {
    for (var p in m) if (p !== "default" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);
}

function __values(o) {
    var s = typeof Symbol === "function" && Symbol.iterator, m = s && o[s], i = 0;
    if (m) return m.call(o);
    if (o && typeof o.length === "number") return {
        next: function () {
            if (o && i >= o.length) o = void 0;
            return { value: o && o[i++], done: !o };
        }
    };
    throw new TypeError(s ? "Object is not iterable." : "Symbol.iterator is not defined.");
}

function __read(o, n) {
    var m = typeof Symbol === "function" && o[Symbol.iterator];
    if (!m) return o;
    var i = m.call(o), r, ar = [], e;
    try {
        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);
    }
    catch (error) { e = { error: error }; }
    finally {
        try {
            if (r && !r.done && (m = i["return"])) m.call(i);
        }
        finally { if (e) throw e.error; }
    }
    return ar;
}

/** @deprecated */
function __spread() {
    for (var ar = [], i = 0; i < arguments.length; i++)
        ar = ar.concat(__read(arguments[i]));
    return ar;
}

/** @deprecated */
function __spreadArrays() {
    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;
    for (var r = Array(s), k = 0, i = 0; i < il; i++)
        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)
            r[k] = a[j];
    return r;
}

function __spreadArray(to, from, pack) {
    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {
        if (ar || !(i in from)) {
            if (!ar) ar = Array.prototype.slice.call(from, 0, i);
            ar[i] = from[i];
        }
    }
    return to.concat(ar || Array.prototype.slice.call(from));
}

function __await(v) {
    return this instanceof __await ? (this.v = v, this) : new __await(v);
}

function __asyncGenerator(thisArg, _arguments, generator) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var g = generator.apply(thisArg, _arguments || []), i, q = [];
    return i = {}, verb("next"), verb("throw"), verb("return", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;
    function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }
    function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }
    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }
    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }
    function fulfill(value) { resume("next", value); }
    function reject(value) { resume("throw", value); }
    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }
}

function __asyncDelegator(o) {
    var i, p;
    return i = {}, verb("next"), verb("throw", function (e) { throw e; }), verb("return"), i[Symbol.iterator] = function () { return this; }, i;
    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }
}

function __asyncValues(o) {
    if (!Symbol.asyncIterator) throw new TypeError("Symbol.asyncIterator is not defined.");
    var m = o[Symbol.asyncIterator], i;
    return m ? m.call(o) : (o = typeof __values === "function" ? __values(o) : o[Symbol.iterator](), i = {}, verb("next"), verb("throw"), verb("return"), i[Symbol.asyncIterator] = function () { return this; }, i);
    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }
    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }
}

function __makeTemplateObject(cooked, raw) {
    if (Object.defineProperty) { Object.defineProperty(cooked, "raw", { value: raw }); } else { cooked.raw = raw; }
    return cooked;
};

var __setModuleDefault = Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
};

function __importStar(mod) {
    if (mod && mod.__esModule) return mod;
    var result = {};
    if (mod != null) for (var k in mod) if (k !== "default" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);
    __setModuleDefault(result, mod);
    return result;
}

function __importDefault(mod) {
    return (mod && mod.__esModule) ? mod : { default: mod };
}

function __classPrivateFieldGet(receiver, state, kind, f) {
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
    return kind === "m" ? f : kind === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
}

function __classPrivateFieldSet(receiver, state, value, kind, f) {
    if (kind === "m") throw new TypeError("Private method is not writable");
    if (kind === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
    if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
    return (kind === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;
}

function __classPrivateFieldIn(state, receiver) {
    if (receiver === null || (typeof receiver !== "object" && typeof receiver !== "function")) throw new TypeError("Cannot use 'in' operator on non-object");
    return typeof state === "function" ? receiver === state : state.has(receiver);
}

function __addDisposableResource(env, value, async) {
    if (value !== null && value !== void 0) {
        if (typeof value !== "object" && typeof value !== "function") throw new TypeError("Object expected.");
        var dispose, inner;
        if (async) {
            if (!Symbol.asyncDispose) throw new TypeError("Symbol.asyncDispose is not defined.");
            dispose = value[Symbol.asyncDispose];
        }
        if (dispose === void 0) {
            if (!Symbol.dispose) throw new TypeError("Symbol.dispose is not defined.");
            dispose = value[Symbol.dispose];
            if (async) inner = dispose;
        }
        if (typeof dispose !== "function") throw new TypeError("Object not disposable.");
        if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };
        env.stack.push({ value: value, dispose: dispose, async: async });
    }
    else if (async) {
        env.stack.push({ async: true });
    }
    return value;

}

var _SuppressedError = typeof SuppressedError === "function" ? SuppressedError : function (error, suppressed, message) {
    var e = new Error(message);
    return e.name = "SuppressedError", e.error = error, e.suppressed = suppressed, e;
};

function __disposeResources(env) {
    function fail(e) {
        env.error = env.hasError ? new _SuppressedError(e, env.error, "An error was suppressed during disposal.") : e;
        env.hasError = true;
    }
    function next() {
        while (env.stack.length) {
            var rec = env.stack.pop();
            try {
                var result = rec.dispose && rec.dispose.call(rec.value);
                if (rec.async) return Promise.resolve(result).then(next, function(e) { fail(e); return next(); });
            }
            catch (e) {
                fail(e);
            }
        }
        if (env.hasError) throw env.error;
    }
    return next();
}

/* harmony default export */ __webpack_exports__["default"] = ({
    __extends: __extends,
    __assign: __assign,
    __rest: __rest,
    __decorate: __decorate,
    __param: __param,
    __metadata: __metadata,
    __awaiter: __awaiter,
    __generator: __generator,
    __createBinding: __createBinding,
    __exportStar: __exportStar,
    __values: __values,
    __read: __read,
    __spread: __spread,
    __spreadArrays: __spreadArrays,
    __spreadArray: __spreadArray,
    __await: __await,
    __asyncGenerator: __asyncGenerator,
    __asyncDelegator: __asyncDelegator,
    __asyncValues: __asyncValues,
    __makeTemplateObject: __makeTemplateObject,
    __importStar: __importStar,
    __importDefault: __importDefault,
    __classPrivateFieldGet: __classPrivateFieldGet,
    __classPrivateFieldSet: __classPrivateFieldSet,
    __classPrivateFieldIn: __classPrivateFieldIn,
    __addDisposableResource: __addDisposableResource,
    __disposeResources: __disposeResources,
});


/***/ }),

/***/ "9b5e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function (exec) {
  try {
    return { error: false, value: exec() };
  } catch (error) {
    return { error: true, value: error };
  }
};


/***/ }),

/***/ "9bdb":
/***/ (function(module, exports, __webpack_require__) {

var assignValue = __webpack_require__("7041"),
    baseAssignValue = __webpack_require__("4c93");

/**
 * Copies properties of `source` to `object`.
 *
 * @private
 * @param {Object} source The object to copy properties from.
 * @param {Array} props The property identifiers to copy.
 * @param {Object} [object={}] The object to copy properties to.
 * @param {Function} [customizer] The function to customize copied values.
 * @returns {Object} Returns `object`.
 */
function copyObject(source, props, object, customizer) {
  var isNew = !object;
  object || (object = {});

  var index = -1,
      length = props.length;

  while (++index < length) {
    var key = props[index];

    var newValue = customizer
      ? customizer(object[key], source[key], key, object, source)
      : undefined;

    if (newValue === undefined) {
      newValue = source[key];
    }
    if (isNew) {
      baseAssignValue(object, key, newValue);
    } else {
      assignValue(object, key, newValue);
    }
  }
  return object;
}

module.exports = copyObject;


/***/ }),

/***/ "9d34":
/***/ (function(module, exports, __webpack_require__) {

var baseSlice = __webpack_require__("291a");

/**
 * Casts `array` to a slice if it's needed.
 *
 * @private
 * @param {Array} array The array to inspect.
 * @param {number} start The start position.
 * @param {number} [end=array.length] The end position.
 * @returns {Array} Returns the cast slice.
 */
function castSlice(array, start, end) {
  var length = array.length;
  end = end === undefined ? length : end;
  return (!start && end >= length) ? array : baseSlice(array, start, end);
}

module.exports = castSlice;


/***/ }),

/***/ "9d6b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");

module.exports = !fails(function () {
  function F() { /* empty */ }
  F.prototype.constructor = null;
  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing
  return Object.getPrototypeOf(new F()) !== F.prototype;
});


/***/ }),

/***/ "9d87":
/***/ (function(module, exports, __webpack_require__) {

"use strict";
// `Symbol.prototype.description` getter
// https://tc39.es/ecma262/#sec-symbol.prototype.description

var $ = __webpack_require__("a884");
var DESCRIPTORS = __webpack_require__("98c8");
var globalThis = __webpack_require__("92e2");
var uncurryThis = __webpack_require__("1043");
var hasOwn = __webpack_require__("85ed");
var isCallable = __webpack_require__("fe72");
var isPrototypeOf = __webpack_require__("d519");
var toString = __webpack_require__("502b");
var defineBuiltInAccessor = __webpack_require__("c0b5");
var copyConstructorProperties = __webpack_require__("5aa5");

var NativeSymbol = globalThis.Symbol;
var SymbolPrototype = NativeSymbol && NativeSymbol.prototype;

if (DESCRIPTORS && isCallable(NativeSymbol) && (!('description' in SymbolPrototype) ||
  // Safari 12 bug
  NativeSymbol().description !== undefined
)) {
  var EmptyStringDescriptionStore = {};
  // wrap Symbol constructor for correct work with undefined description
  var SymbolWrapper = function Symbol() {
    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : toString(arguments[0]);
    var result = isPrototypeOf(SymbolPrototype, this)
      ? new NativeSymbol(description)
      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'
      : description === undefined ? NativeSymbol() : NativeSymbol(description);
    if (description === '') EmptyStringDescriptionStore[result] = true;
    return result;
  };

  copyConstructorProperties(SymbolWrapper, NativeSymbol);
  SymbolWrapper.prototype = SymbolPrototype;
  SymbolPrototype.constructor = SymbolWrapper;

  var NATIVE_SYMBOL = String(NativeSymbol('description detection')) === 'Symbol(description detection)';
  var thisSymbolValue = uncurryThis(SymbolPrototype.valueOf);
  var symbolDescriptiveString = uncurryThis(SymbolPrototype.toString);
  var regexp = /^Symbol\((.*)\)[^)]+$/;
  var replace = uncurryThis(''.replace);
  var stringSlice = uncurryThis(''.slice);

  defineBuiltInAccessor(SymbolPrototype, 'description', {
    configurable: true,
    get: function description() {
      var symbol = thisSymbolValue(this);
      if (hasOwn(EmptyStringDescriptionStore, symbol)) return '';
      var string = symbolDescriptiveString(symbol);
      var desc = NATIVE_SYMBOL ? stringSlice(string, 7, -1) : replace(string, regexp, '$1');
      return desc === '' ? undefined : desc;
    }
  });

  $({ global: true, constructor: true, forced: true }, {
    Symbol: SymbolWrapper
  });
}


/***/ }),

/***/ "9dae":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__("4fed");
var hasOwn = __webpack_require__("85ed");
var createNonEnumerableProperty = __webpack_require__("80b9");
var isPrototypeOf = __webpack_require__("d519");
var setPrototypeOf = __webpack_require__("6628");
var copyConstructorProperties = __webpack_require__("5aa5");
var proxyAccessor = __webpack_require__("917b");
var inheritIfRequired = __webpack_require__("fe68");
var normalizeStringArgument = __webpack_require__("4d79");
var installErrorCause = __webpack_require__("4539");
var installErrorStack = __webpack_require__("d202f");
var DESCRIPTORS = __webpack_require__("98c8");
var IS_PURE = __webpack_require__("6e09");

module.exports = function (FULL_NAME, wrapper, FORCED, IS_AGGREGATE_ERROR) {
  var STACK_TRACE_LIMIT = 'stackTraceLimit';
  var OPTIONS_POSITION = IS_AGGREGATE_ERROR ? 2 : 1;
  var path = FULL_NAME.split('.');
  var ERROR_NAME = path[path.length - 1];
  var OriginalError = getBuiltIn.apply(null, path);

  if (!OriginalError) return;

  var OriginalErrorPrototype = OriginalError.prototype;

  // V8 9.3- bug https://bugs.chromium.org/p/v8/issues/detail?id=12006
  if (!IS_PURE && hasOwn(OriginalErrorPrototype, 'cause')) delete OriginalErrorPrototype.cause;

  if (!FORCED) return OriginalError;

  var BaseError = getBuiltIn('Error');

  var WrappedError = wrapper(function (a, b) {
    var message = normalizeStringArgument(IS_AGGREGATE_ERROR ? b : a, undefined);
    var result = IS_AGGREGATE_ERROR ? new OriginalError(a) : new OriginalError();
    if (message !== undefined) createNonEnumerableProperty(result, 'message', message);
    installErrorStack(result, WrappedError, result.stack, 2);
    if (this && isPrototypeOf(OriginalErrorPrototype, this)) inheritIfRequired(result, this, WrappedError);
    if (arguments.length > OPTIONS_POSITION) installErrorCause(result, arguments[OPTIONS_POSITION]);
    return result;
  });

  WrappedError.prototype = OriginalErrorPrototype;

  if (ERROR_NAME !== 'Error') {
    if (setPrototypeOf) setPrototypeOf(WrappedError, BaseError);
    else copyConstructorProperties(WrappedError, BaseError, { name: true });
  } else if (DESCRIPTORS && STACK_TRACE_LIMIT in OriginalError) {
    proxyAccessor(WrappedError, OriginalError, STACK_TRACE_LIMIT);
    proxyAccessor(WrappedError, OriginalError, 'prepareStackTrace');
  }

  copyConstructorProperties(WrappedError, OriginalError);

  if (!IS_PURE) try {
    // Safari 13- bug: WebAssembly errors does not have a proper `.name`
    if (OriginalErrorPrototype.name !== ERROR_NAME) {
      createNonEnumerableProperty(OriginalErrorPrototype, 'name', ERROR_NAME);
    }
    OriginalErrorPrototype.constructor = WrappedError;
  } catch (error) { /* empty */ }

  return WrappedError;
};


/***/ }),

/***/ "9f13":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var toIntegerOrInfinity = __webpack_require__("1fba");
var toString = __webpack_require__("502b");
var requireObjectCoercible = __webpack_require__("deed");

var charAt = uncurryThis(''.charAt);
var charCodeAt = uncurryThis(''.charCodeAt);
var stringSlice = uncurryThis(''.slice);

var createMethod = function (CONVERT_TO_STRING) {
  return function ($this, pos) {
    var S = toString(requireObjectCoercible($this));
    var position = toIntegerOrInfinity(pos);
    var size = S.length;
    var first, second;
    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;
    first = charCodeAt(S, position);
    return first < 0xD800 || first > 0xDBFF || position + 1 === size
      || (second = charCodeAt(S, position + 1)) < 0xDC00 || second > 0xDFFF
        ? CONVERT_TO_STRING
          ? charAt(S, position)
          : first
        : CONVERT_TO_STRING
          ? stringSlice(S, position, position + 2)
          : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;
  };
};

module.exports = {
  // `String.prototype.codePointAt` method
  // https://tc39.es/ecma262/#sec-string.prototype.codepointat
  codeAt: createMethod(false),
  // `String.prototype.at` method
  // https://github.com/mathiasbynens/String.prototype.at
  charAt: createMethod(true)
};


/***/ }),

/***/ "a07d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var is_type_1 = __webpack_require__("6627");
exports.default = (function (value) {
    return Array.isArray ?
        Array.isArray(value) :
        is_type_1.default(value, 'Array');
});
//# sourceMappingURL=is-array.js.map

/***/ }),

/***/ "a232":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* global Bun, Deno -- detection */
var globalThis = __webpack_require__("92e2");
var userAgent = __webpack_require__("93b7");
var classof = __webpack_require__("51d7");

var userAgentStartsWith = function (string) {
  return userAgent.slice(0, string.length) === string;
};

module.exports = (function () {
  if (userAgentStartsWith('Bun/')) return 'BUN';
  if (userAgentStartsWith('Cloudflare-Workers')) return 'CLOUDFLARE';
  if (userAgentStartsWith('Deno/')) return 'DENO';
  if (userAgentStartsWith('Node.js/')) return 'NODE';
  if (globalThis.Bun && typeof Bun.version == 'string') return 'BUN';
  if (globalThis.Deno && typeof Deno.version == 'object') return 'DENO';
  if (classof(globalThis.process) === 'process') return 'NODE';
  if (globalThis.window && globalThis.document) return 'BROWSER';
  return 'REST';
})();


/***/ }),

/***/ "a233":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $TypeError = TypeError;

module.exports = function (passed, required) {
  if (passed < required) throw new $TypeError('Not enough arguments');
  return passed;
};


/***/ }),

/***/ "a244":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var setPrototypeOf = __webpack_require__("6628");

// `Object.setPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.setprototypeof
$({ target: 'Object', stat: true }, {
  setPrototypeOf: setPrototypeOf
});


/***/ }),

/***/ "a2e1":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// a string of all valid unicode whitespaces
module.exports = '\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002' +
  '\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';


/***/ }),

/***/ "a330":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// toObject with fallback for non-array-like ES3 strings
var IndexedObject = __webpack_require__("5155");
var requireObjectCoercible = __webpack_require__("deed");

module.exports = function (it) {
  return IndexedObject(requireObjectCoercible(it));
};


/***/ }),

/***/ "a394":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.mergeView = exports.getMergedRegion = exports.getRefreshRegion = exports.refreshElement = exports.drawPath = exports.clearChanged = exports.checkChildrenRefresh = exports.checkRefresh = exports.drawChildren = exports.applyAttrsToContext = void 0;
var util_1 = __webpack_require__("6d77");
var parse_1 = __webpack_require__("c2c4");
var arc_params_1 = __webpack_require__("3231");
var util_2 = __webpack_require__("1e49");
var ArrowUtil = __webpack_require__("a5a4");
var SHAPE_ATTRS_MAP = {
    fill: 'fillStyle',
    stroke: 'strokeStyle',
    opacity: 'globalAlpha',
};
function applyAttrsToContext(context, element) {
    var attrs = element.attr();
    for (var k in attrs) {
        var v = attrs[k];
        // 转换一下不与 canvas 兼容的属性名
        var name_1 = SHAPE_ATTRS_MAP[k] ? SHAPE_ATTRS_MAP[k] : k;
        if (name_1 === 'matrix' && v) {
            // 设置矩阵
            context.transform(v[0], v[1], v[3], v[4], v[6], v[7]);
        }
        else if (name_1 === 'lineDash' && context.setLineDash) {
            // 设置虚线，只支持数组形式，非数组形式不做任何操作
            util_1.isArray(v) && context.setLineDash(v);
        }
        else {
            if (name_1 === 'strokeStyle' || name_1 === 'fillStyle') {
                // 如果存在渐变、pattern 这个开销有些大
                // 可以考虑缓存机制，通过 hasUpdate 来避免一些运算
                v = parse_1.parseStyle(context, element, v);
            }
            else if (name_1 === 'globalAlpha') {
                // opacity 效果可以叠加，子元素的 opacity 需要与父元素 opacity 相乘
                v = v * context.globalAlpha;
            }
            context[name_1] = v;
        }
    }
}
exports.applyAttrsToContext = applyAttrsToContext;
function drawChildren(context, children, region) {
    for (var i = 0; i < children.length; i++) {
        var child = children[i];
        if (child.cfg.visible) {
            child.draw(context, region);
        }
        else {
            child.skipDraw();
        }
    }
}
exports.drawChildren = drawChildren;
// 这个地方的逻辑比较复杂，简单画了一张图：https://www.yuque.com/antv/ou292n/pcgt5g#OW1QE
function checkRefresh(canvas, children, region) {
    var refreshElements = canvas.get('refreshElements');
    // 先遍历需要刷新的元素，将这些元素的父元素也设置 refresh
    util_1.each(refreshElements, function (el) {
        if (el !== canvas) {
            var parent_1 = el.cfg.parent;
            while (parent_1 && parent_1 !== canvas && !parent_1.cfg.refresh) {
                parent_1.cfg.refresh = true;
                parent_1 = parent_1.cfg.parent;
            }
        }
    });
    if (refreshElements[0] === canvas) {
        setChildrenRefresh(children, region);
    }
    else {
        // 检查所有子元素是否可以刷新
        checkChildrenRefresh(children, region);
    }
}
exports.checkRefresh = checkRefresh;
// 检查所有的子元素是否应该更新
function checkChildrenRefresh(children, region) {
    for (var i = 0; i < children.length; i++) {
        var child = children[i];
        if (child.cfg.visible) {
            // 先判断 hasChanged，因为它的优先级判断应该高于 refresh
            if (child.cfg.hasChanged) {
                // 如果节点发生了 change，则需要级联设置子元素的 refresh
                child.cfg.refresh = true;
                if (child.isGroup()) {
                    setChildrenRefresh(child.cfg.children, region);
                }
            }
            else if (child.cfg.refresh) {
                // 如果当前图形/分组 refresh = true，说明其子节点存在 changed
                if (child.isGroup()) {
                    checkChildrenRefresh(child.cfg.children, region);
                }
            }
            else {
                // 这个分支说明此次局部刷新，所有的节点和父元素没有发生变化，仅需要检查包围盒（缓存）是否相交即可
                var refresh = checkElementRefresh(child, region);
                child.cfg.refresh = refresh;
                if (refresh && child.isGroup()) {
                    // 如果需要刷新，说明子元素也需要刷新，继续进行判定
                    checkChildrenRefresh(child.cfg.children, region);
                }
            }
        }
    }
}
exports.checkChildrenRefresh = checkChildrenRefresh;
// 由于对改变的图形放入 refreshElements 时做了优化，判定父元素 changed 时不加入
// 那么有可能会出现 elements 都为空，所以最终 group
function clearChanged(elements) {
    for (var i = 0; i < elements.length; i++) {
        var el = elements[i];
        el.cfg.hasChanged = false;
        // 级联清理
        if (el.isGroup() && !el.destroyed) {
            clearChanged(el.cfg.children);
        }
    }
}
exports.clearChanged = clearChanged;
// 当某个父元素发生改变时，调用这个方法级联设置 refresh
function setChildrenRefresh(children, region) {
    for (var i = 0; i < children.length; i++) {
        var child = children[i];
        if (!child.cfg.visible) {
            continue;
        }
        // let refresh = true;
        // 获取缓存的 bbox，如果这个 bbox 还存在则说明父元素不是矩阵发生了改变
        // const bbox = child.cfg.canvasBBox;
        // if (bbox) {
        //   // 如果这时候
        //   refresh = intersectRect(bbox, region);
        // }
        child.cfg.refresh = true;
        // 如果需要刷新当前节点，所有的子元素设置 refresh
        if (child.isGroup()) {
            setChildrenRefresh(child.get('children'), region);
        }
    }
}
function checkElementRefresh(shape, region) {
    var bbox = shape.cfg.cacheCanvasBBox;
    var isAllow = shape.cfg.isInView && bbox && util_2.intersectRect(bbox, region);
    return isAllow;
}
// 绘制 path
function drawPath(shape, context, attrs, arcParamsCache) {
    var path = attrs.path, startArrow = attrs.startArrow, endArrow = attrs.endArrow;
    if (!path) {
        return;
    }
    var currentPoint = [0, 0]; // 当前图形
    var startMovePoint = [0, 0]; // 开始 M 的点，可能会有多个
    var distance = {
        dx: 0,
        dy: 0,
    };
    context.beginPath();
    for (var i = 0; i < path.length; i++) {
        var params = path[i];
        var command = params[0];
        if (i === 0 && startArrow && startArrow.d) {
            var tangent = shape.getStartTangent();
            distance = ArrowUtil.getShortenOffset(tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1], startArrow.d);
        }
        else if (i === path.length - 2 && path[i + 1][0] === 'Z' && endArrow && endArrow.d) {
            // 为了防止结尾为 Z 的 segment 缩短不起效，需要取最后两个 segment 特殊处理
            var lastPath = path[i + 1];
            if (lastPath[0] === 'Z') {
                var tangent = shape.getEndTangent();
                distance = ArrowUtil.getShortenOffset(tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1], endArrow.d);
            }
        }
        else if (i === path.length - 1 && endArrow && endArrow.d) {
            if (path[0] !== 'Z') {
                var tangent = shape.getEndTangent();
                distance = ArrowUtil.getShortenOffset(tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1], endArrow.d);
            }
        }
        var dx = distance.dx, dy = distance.dy;
        // V,H,S,T 都在前面被转换成标准形式
        switch (command) {
            case 'M':
                context.moveTo(params[1] - dx, params[2] - dy);
                startMovePoint = [params[1], params[2]];
                break;
            case 'L':
                context.lineTo(params[1] - dx, params[2] - dy);
                break;
            case 'Q':
                context.quadraticCurveTo(params[1], params[2], params[3] - dx, params[4] - dy);
                break;
            case 'C':
                context.bezierCurveTo(params[1], params[2], params[3], params[4], params[5] - dx, params[6] - dy);
                break;
            case 'A': {
                var arcParams = void 0;
                // 为了加速绘制，可以提供参数的缓存，各个图形自己缓存
                if (arcParamsCache) {
                    arcParams = arcParamsCache[i];
                    if (!arcParams) {
                        arcParams = arc_params_1.default(currentPoint, params);
                        arcParamsCache[i] = arcParams;
                    }
                }
                else {
                    arcParams = arc_params_1.default(currentPoint, params);
                }
                var cx = arcParams.cx, cy = arcParams.cy, rx = arcParams.rx, ry = arcParams.ry, startAngle = arcParams.startAngle, endAngle = arcParams.endAngle, xRotation = arcParams.xRotation, sweepFlag = arcParams.sweepFlag;
                // 直接使用椭圆的 api
                if (context.ellipse) {
                    context.ellipse(cx, cy, rx, ry, xRotation, startAngle, endAngle, 1 - sweepFlag);
                }
                else {
                    var r = rx > ry ? rx : ry;
                    var scaleX = rx > ry ? 1 : rx / ry;
                    var scaleY = rx > ry ? ry / rx : 1;
                    context.translate(cx, cy);
                    context.rotate(xRotation);
                    context.scale(scaleX, scaleY);
                    context.arc(0, 0, r, startAngle, endAngle, 1 - sweepFlag);
                    context.scale(1 / scaleX, 1 / scaleY);
                    context.rotate(-xRotation);
                    context.translate(-cx, -cy);
                }
                break;
            }
            case 'Z':
                context.closePath();
                break;
            default:
                break;
        }
        // 有了 Z 后，当前节点从开始 M 的点开始
        if (command === 'Z') {
            currentPoint = startMovePoint;
        }
        else {
            var len = params.length;
            currentPoint = [params[len - 2], params[len - 1]];
        }
    }
}
exports.drawPath = drawPath;
// 刷新图形元素(Shape 或者 Group)
function refreshElement(element, changeType) {
    var canvas = element.get('canvas');
    // 只有存在于 canvas 上时生效
    if (canvas) {
        if (changeType === 'remove') {
            // 一旦 remove，则无法在 element 上拿到包围盒
            // destroy 后所有属性都拿不到，所以需要暂存一下
            // 这是一段 hack 的代码
            element._cacheCanvasBBox = element.get('cacheCanvasBBox');
        }
        // 防止反复刷新
        if (!element.get('hasChanged')) {
            // 但是始终要标记为 hasChanged，便于后面进行局部渲染
            element.set('hasChanged', true);
            // 本来只有局部渲染模式下，才需要记录更新的元素队列
            // if (canvas.get('localRefresh')) {
            //   canvas.refreshElement(element, changeType, canvas);
            // }
            // 但对于 https://github.com/antvis/g/issues/422 的场景，全局渲染的模式下也需要记录更新的元素队列
            // 如果当前元素的父元素发生了改变，可以不放入队列，这句话大概能够提升 15% 的初次渲染性能
            if (!(element.cfg.parent && element.cfg.parent.get('hasChanged'))) {
                canvas.refreshElement(element, changeType, canvas);
                if (canvas.get('autoDraw')) {
                    canvas.draw();
                }
            }
        }
    }
}
exports.refreshElement = refreshElement;
function getRefreshRegion(element) {
    var region;
    if (!element.destroyed) {
        var cacheBox = element.get('cacheCanvasBBox');
        var validCache = cacheBox && !!(cacheBox.width && cacheBox.height);
        var bbox = element.getCanvasBBox();
        var validBBox = bbox && !!(bbox.width && bbox.height);
        // 是否是有效 bbox 判定，一些 NaN 或者 宽高为 0 的情况过滤掉
        if (validCache && validBBox) {
            region = util_2.mergeRegion(cacheBox, bbox);
        }
        else if (validCache) {
            region = cacheBox;
        }
        else if (validBBox) {
            region = bbox;
        }
    }
    else {
        // 因为元素已经销毁所以无法获取到缓存的包围盒
        region = element['_cacheCanvasBBox'];
    }
    return region;
}
exports.getRefreshRegion = getRefreshRegion;
function getMergedRegion(elements) {
    if (!elements.length) {
        return null;
    }
    var minXArr = [];
    var minYArr = [];
    var maxXArr = [];
    var maxYArr = [];
    util_1.each(elements, function (el) {
        var region = getRefreshRegion(el);
        if (region) {
            minXArr.push(region.minX);
            minYArr.push(region.minY);
            maxXArr.push(region.maxX);
            maxYArr.push(region.maxY);
        }
    });
    return {
        minX: util_1.min(minXArr),
        minY: util_1.min(minYArr),
        maxX: util_1.max(maxXArr),
        maxY: util_1.max(maxYArr),
    };
}
exports.getMergedRegion = getMergedRegion;
function mergeView(region, viewRegion) {
    if (!region || !viewRegion) {
        return null;
    }
    // 不相交，则直接返回 null
    if (!util_2.intersectRect(region, viewRegion)) {
        return null;
    }
    return {
        minX: Math.max(region.minX, viewRegion.minX),
        minY: Math.max(region.minY, viewRegion.minY),
        maxX: Math.min(region.maxX, viewRegion.maxX),
        maxY: Math.min(region.maxY, viewRegion.maxY),
    };
}
exports.mergeView = mergeView;
//# sourceMappingURL=draw.js.map

/***/ }),

/***/ "a56e":
/***/ (function(module, exports) {

//# sourceMappingURL=types.js.map

/***/ }),

/***/ "a5a4":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.addEndArrow = exports.addStartArrow = exports.getShortenOffset = void 0;
var tslib_1 = __webpack_require__("9a80");
var shape_1 = __webpack_require__("595a");
var sin = Math.sin, cos = Math.cos, atan2 = Math.atan2, PI = Math.PI;
function _addDefaultArrow(shape, attrs, x1, y1, x2, y2, isStart) {
    var stroke = attrs.stroke, lineWidth = attrs.lineWidth;
    var x = x1 - x2;
    var y = y1 - y2;
    var rad = atan2(y, x);
    var arrowShape = new shape_1.Path({
        type: 'path',
        canvas: shape.get('canvas'),
        isArrowShape: true,
        attrs: {
            // 默认箭头的边长为 10，夹角为 60 度
            path: "M" + 10 * cos(PI / 6) + "," + 10 * sin(PI / 6) + " L0,0 L" + 10 * cos(PI / 6) + ",-" + 10 * sin(PI / 6),
            // 使用 shape stroke 值
            stroke: stroke,
            lineWidth: lineWidth,
        },
    });
    arrowShape.translate(x2, y2);
    arrowShape.rotateAtPoint(x2, y2, rad);
    shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);
}
/**
 * 箭头 path 的设置要求
 * 1. 箭头顶点坐标需要为 (0, 0)
 * 2. 箭头夹角的中心分割线需要与 X 轴正方向对齐
 */
function _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, isStart) {
    var startArrow = attrs.startArrow, endArrow = attrs.endArrow, stroke = attrs.stroke, lineWidth = attrs.lineWidth;
    var arrowAttrs = isStart ? startArrow : endArrow;
    var d = arrowAttrs.d, arrowFill = arrowAttrs.fill, arrowStroke = arrowAttrs.stroke, arrowLineWidth = arrowAttrs.lineWidth, restAttrs = tslib_1.__rest(arrowAttrs, ["d", "fill", "stroke", "lineWidth"]);
    var x = x1 - x2;
    var y = y1 - y2;
    var rad = atan2(y, x);
    if (d) {
        x2 = x2 - cos(rad) * d;
        y2 = y2 - sin(rad) * d;
    }
    var arrowShape = new shape_1.Path({
        type: 'path',
        canvas: shape.get('canvas'),
        isArrowShape: true,
        attrs: tslib_1.__assign(tslib_1.__assign({}, restAttrs), { 
            // 支持单独设置箭头的 stroke 和 lineWidth，若为空则使用 shape 的值
            stroke: arrowStroke || stroke, lineWidth: arrowLineWidth || lineWidth, 
            // 箭头是否填充需要手动设置，不会继承自 shape 的值
            fill: arrowFill }),
    });
    arrowShape.translate(x2, y2);
    arrowShape.rotateAtPoint(x2, y2, rad);
    shape.set(isStart ? 'startArrowShape' : 'endArrowShape', arrowShape);
}
/**
 * 如果自定义箭头并且有 d 需要做偏移，如果直接画，线条会超出箭头尖端，因此需要根据箭头偏移 d, 返回线需要缩短的距离
 * |----------------
 * |<|--------------
 * |
 * @param {number} x1 起始点 x
 * @param {number} y1 起始点 y
 * @param {number} x2 箭头作用点 x
 * @param {number} y2 箭头作用点 y
 * @param {number} d  箭头沿线条方向的偏移距离
 * @return {{dx: number, dy: number}} 返回线条偏移距离
 */
function getShortenOffset(x1, y1, x2, y2, d) {
    var rad = atan2(y2 - y1, x2 - x1);
    return {
        dx: cos(rad) * d,
        dy: sin(rad) * d,
    };
}
exports.getShortenOffset = getShortenOffset;
/**
 * 绘制起始箭头
 * @param {IShape} shape 图形
 * @param {ShapeAttrs} attrs shape 的绘图属性
 * @param {number} x1 起始点 x
 * @param {number} y1 起始点 y
 * @param {number} x2 箭头作用点 x
 * @param {number} y2 箭头作用点 y
 */
function addStartArrow(shape, attrs, x1, y1, x2, y2) {
    if (typeof attrs.startArrow === 'object') {
        _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, true);
    }
    else if (attrs.startArrow) {
        _addDefaultArrow(shape, attrs, x1, y1, x2, y2, true);
    }
    else {
        shape.set('startArrowShape', null);
    }
}
exports.addStartArrow = addStartArrow;
/**
 * 绘制结束箭头
 * @param {IShape} shape 图形
 * @param {ShapeAttrs} attrs shape 的绘图属性
 * @param {number} x1 起始点 x
 * @param {number} y1 起始点 y
 * @param {number} x2 箭头作用点 x
 * @param {number} y2 箭头作用点 y
 */
function addEndArrow(shape, attrs, x1, y1, x2, y2) {
    if (typeof attrs.endArrow === 'object') {
        _addCustomizedArrow(shape, attrs, x1, y1, x2, y2, false);
    }
    else if (attrs.endArrow) {
        _addDefaultArrow(shape, attrs, x1, y1, x2, y2, false);
    }
    else {
        shape.set('startArrowShape', null);
    }
}
exports.addEndArrow = addEndArrow;
//# sourceMappingURL=arrow.js.map

/***/ }),

/***/ "a6f6":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var defineWellKnownSymbol = __webpack_require__("158b");

// `Symbol.iterator` well-known symbol
// https://tc39.es/ecma262/#sec-symbol.iterator
defineWellKnownSymbol('iterator');


/***/ }),

/***/ "a724":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var TO_STRING_TAG_SUPPORT = __webpack_require__("51cb");
var defineBuiltIn = __webpack_require__("f303");
var toString = __webpack_require__("0ebc");

// `Object.prototype.toString` method
// https://tc39.es/ecma262/#sec-object.prototype.tostring
if (!TO_STRING_TAG_SUPPORT) {
  defineBuiltIn(Object.prototype, 'toString', toString, { unsafe: true });
}


/***/ }),

/***/ "a726":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var util_1 = __webpack_require__("6d77");
var constant_1 = __webpack_require__("7a93");
var base_1 = __webpack_require__("6cb2");
var Path = /** @class */ (function (_super) {
    tslib_1.__extends(Path, _super);
    function Path() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'path';
        _this.canFill = true;
        _this.canStroke = true;
        return _this;
    }
    Path.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { startArrow: false, endArrow: false });
    };
    Path.prototype.createPath = function (context, targetAttrs) {
        var _this = this;
        var attrs = this.attr();
        var el = this.get('el');
        util_1.each(targetAttrs || attrs, function (value, attr) {
            if (attr === 'path' && util_1.isArray(value)) {
                el.setAttribute('d', _this._formatPath(value));
            }
            else if (attr === 'startArrow' || attr === 'endArrow') {
                if (value) {
                    var id = util_1.isObject(value)
                        ? context.addArrow(attrs, constant_1.SVG_ATTR_MAP[attr])
                        : context.getDefaultArrow(attrs, constant_1.SVG_ATTR_MAP[attr]);
                    el.setAttribute(constant_1.SVG_ATTR_MAP[attr], "url(#" + id + ")");
                }
                else {
                    el.removeAttribute(constant_1.SVG_ATTR_MAP[attr]);
                }
            }
            else if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
    };
    Path.prototype._formatPath = function (value) {
        var newValue = value
            .map(function (path) {
            return path.join(' ');
        })
            .join('');
        if (~newValue.indexOf('NaN')) {
            return '';
        }
        return newValue;
    };
    /**
     * Get total length of path
     * 尽管通过浏览器的 SVGPathElement.getTotalLength() 接口获取的 path 长度，
     * 与 Canvas 版本通过数学计算的方式得到的长度有一些细微差异，但最大误差在个位数像素，精度上可以能接受
     * @return {number} length
     */
    Path.prototype.getTotalLength = function () {
        var el = this.get('el');
        return el ? el.getTotalLength() : null;
    };
    /**
     * Get point according to ratio
     * @param {number} ratio
     * @return {Point} point
     */
    Path.prototype.getPoint = function (ratio) {
        var el = this.get('el');
        var totalLength = this.getTotalLength();
        // @see https://github.com/antvis/g/issues/634
        if (totalLength === 0) {
            return null;
        }
        var point = el ? el.getPointAtLength(ratio * totalLength) : null;
        return point
            ? {
                x: point.x,
                y: point.y,
            }
            : null;
    };
    return Path;
}(base_1.default));
exports.default = Path;
//# sourceMappingURL=path.js.map

/***/ }),

/***/ "a826":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe
exports.f = Object.getOwnPropertySymbols;


/***/ }),

/***/ "a857":
/***/ (function(module, exports, __webpack_require__) {

var ListCache = __webpack_require__("4127"),
    stackClear = __webpack_require__("26c5"),
    stackDelete = __webpack_require__("96b4"),
    stackGet = __webpack_require__("fbae"),
    stackHas = __webpack_require__("850f"),
    stackSet = __webpack_require__("0c58");

/**
 * Creates a stack cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function Stack(entries) {
  var data = this.__data__ = new ListCache(entries);
  this.size = data.size;
}

// Add methods to `Stack`.
Stack.prototype.clear = stackClear;
Stack.prototype['delete'] = stackDelete;
Stack.prototype.get = stackGet;
Stack.prototype.has = stackHas;
Stack.prototype.set = stackSet;

module.exports = Stack;


/***/ }),

/***/ "a884":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var getOwnPropertyDescriptor = __webpack_require__("1c2b").f;
var createNonEnumerableProperty = __webpack_require__("80b9");
var defineBuiltIn = __webpack_require__("f303");
var defineGlobalProperty = __webpack_require__("c1b9");
var copyConstructorProperties = __webpack_require__("5aa5");
var isForced = __webpack_require__("cc6e");

/*
  options.target         - name of the target object
  options.global         - target is the global object
  options.stat           - export as static methods of target
  options.proto          - export as prototype methods of target
  options.real           - real prototype method for the `pure` version
  options.forced         - export even if the native feature is available
  options.bind           - bind methods to the target, required for the `pure` version
  options.wrap           - wrap constructors to preventing global pollution, required for the `pure` version
  options.unsafe         - use the simple assignment of property instead of delete + defineProperty
  options.sham           - add a flag to not completely full polyfills
  options.enumerable     - export as enumerable property
  options.dontCallGetSet - prevent calling a getter on target
  options.name           - the .name of the function if it does not match the key
*/
module.exports = function (options, source) {
  var TARGET = options.target;
  var GLOBAL = options.global;
  var STATIC = options.stat;
  var FORCED, target, key, targetProperty, sourceProperty, descriptor;
  if (GLOBAL) {
    target = globalThis;
  } else if (STATIC) {
    target = globalThis[TARGET] || defineGlobalProperty(TARGET, {});
  } else {
    target = globalThis[TARGET] && globalThis[TARGET].prototype;
  }
  if (target) for (key in source) {
    sourceProperty = source[key];
    if (options.dontCallGetSet) {
      descriptor = getOwnPropertyDescriptor(target, key);
      targetProperty = descriptor && descriptor.value;
    } else targetProperty = target[key];
    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);
    // contained in target
    if (!FORCED && targetProperty !== undefined) {
      if (typeof sourceProperty == typeof targetProperty) continue;
      copyConstructorProperties(sourceProperty, targetProperty);
    }
    // add a flag to not completely full polyfills
    if (options.sham || (targetProperty && targetProperty.sham)) {
      createNonEnumerableProperty(sourceProperty, 'sham', true);
    }
    defineBuiltIn(target, key, sourceProperty, options);
  }
};


/***/ }),

/***/ "a93a":
/***/ (function(module, exports) {

/** Used to detect hot functions by number of calls within a span of milliseconds. */
var HOT_COUNT = 800,
    HOT_SPAN = 16;

/* Built-in method references for those with the same name as other `lodash` methods. */
var nativeNow = Date.now;

/**
 * Creates a function that'll short out and invoke `identity` instead
 * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`
 * milliseconds.
 *
 * @private
 * @param {Function} func The function to restrict.
 * @returns {Function} Returns the new shortable function.
 */
function shortOut(func) {
  var count = 0,
      lastCalled = 0;

  return function() {
    var stamp = nativeNow(),
        remaining = HOT_SPAN - (stamp - lastCalled);

    lastCalled = stamp;
    if (remaining > 0) {
      if (++count >= HOT_COUNT) {
        return arguments[0];
      }
    } else {
      count = 0;
    }
    return func.apply(undefined, arguments);
  };
}

module.exports = shortOut;


/***/ }),

/***/ "a93b":
/***/ (function(module, exports, __webpack_require__) {

var baseFlatten = __webpack_require__("d8f5");

/**
 * Flattens `array` a single level deep.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Array
 * @param {Array} array The array to flatten.
 * @returns {Array} Returns the new flattened array.
 * @example
 *
 * _.flatten([1, [2, [3, [4]], 5]]);
 * // => [1, 2, [3, [4]], 5]
 */
function flatten(array) {
  var length = array == null ? 0 : array.length;
  return length ? baseFlatten(array, 1) : [];
}

module.exports = flatten;


/***/ }),

/***/ "a978":
/***/ (function(module, exports, __webpack_require__) {

var baseSetToString = __webpack_require__("219e"),
    shortOut = __webpack_require__("a93a");

/**
 * Sets the `toString` method of `func` to return `string`.
 *
 * @private
 * @param {Function} func The function to modify.
 * @param {Function} string The `toString` result.
 * @returns {Function} Returns `func`.
 */
var setToString = shortOut(baseSetToString);

module.exports = setToString;


/***/ }),

/***/ "a97a":
/***/ (function(module, exports) {

/**
 * Copies the values of `source` to `array`.
 *
 * @private
 * @param {Array} source The array to copy values from.
 * @param {Array} [array=[]] The array to copy values to.
 * @returns {Array} Returns `array`.
 */
function copyArray(source, array) {
  var index = -1,
      length = source.length;

  array || (array = Array(length));
  while (++index < length) {
    array[index] = source[index];
  }
  return array;
}

module.exports = copyArray;


/***/ }),

/***/ "a9b1":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview ellipse
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var util_1 = __webpack_require__("6d77");
var constant_1 = __webpack_require__("7a93");
var base_1 = __webpack_require__("6cb2");
var Ellipse = /** @class */ (function (_super) {
    tslib_1.__extends(Ellipse, _super);
    function Ellipse() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'ellipse';
        _this.canFill = true;
        _this.canStroke = true;
        return _this;
    }
    Ellipse.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, rx: 0, ry: 0 });
    };
    Ellipse.prototype.createPath = function (context, targetAttrs) {
        var attrs = this.attr();
        var el = this.get('el');
        util_1.each(targetAttrs || attrs, function (value, attr) {
            // 圆和椭圆的点坐标属性不是 x, y，而是 cx, cy
            if (attr === 'x' || attr === 'y') {
                el.setAttribute("c" + attr, value);
            }
            else if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
    };
    return Ellipse;
}(base_1.default));
exports.default = Ellipse;
//# sourceMappingURL=ellipse.js.map

/***/ }),

/***/ "a9cc":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview marker
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var util_1 = __webpack_require__("6d77");
var base_1 = __webpack_require__("6cb2");
var symbols_1 = __webpack_require__("b4c9");
var Marker = /** @class */ (function (_super) {
    tslib_1.__extends(Marker, _super);
    function Marker() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'marker';
        _this.canFill = true;
        _this.canStroke = true;
        return _this;
    }
    Marker.prototype.createPath = function (context) {
        var el = this.get('el');
        el.setAttribute('d', this._assembleMarker());
    };
    Marker.prototype._assembleMarker = function () {
        var d = this._getPath();
        if (util_1.isArray(d)) {
            return d
                .map(function (path) {
                return path.join(' ');
            })
                .join('');
        }
        return d;
    };
    Marker.prototype._getPath = function () {
        var attrs = this.attr();
        var x = attrs.x, y = attrs.y;
        // 兼容 r 和 radius 两种写法，推荐使用 r
        var r = attrs.r || attrs.radius;
        var symbol = attrs.symbol || 'circle';
        var method;
        if (util_1.isFunction(symbol)) {
            method = symbol;
        }
        else {
            method = symbols_1.default.get(symbol);
        }
        if (!method) {
            console.warn(method + " symbol is not exist.");
            return null;
        }
        return method(x, y, r);
    };
    // 作为其静态属性
    Marker.symbolsFactory = symbols_1.default;
    return Marker;
}(base_1.default));
exports.default = Marker;
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "aa0c":
/***/ (function(module, exports) {

/**
 * Appends the elements of `values` to `array`.
 *
 * @private
 * @param {Array} array The array to modify.
 * @param {Array} values The values to append.
 * @returns {Array} Returns `array`.
 */
function arrayPush(array, values) {
  var index = -1,
      length = values.length,
      offset = array.length;

  while (++index < length) {
    array[offset + index] = values[index];
  }
  return array;
}

module.exports = arrayPush;


/***/ }),

/***/ "aae6":
/***/ (function(module, exports, __webpack_require__) {

var coreJsData = __webpack_require__("c1ce");

/** Used to detect methods masquerading as native. */
var maskSrcKey = (function() {
  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');
  return uid ? ('Symbol(src)_1.' + uid) : '';
}());

/**
 * Checks if `func` has its source masked.
 *
 * @private
 * @param {Function} func The function to check.
 * @returns {boolean} Returns `true` if `func` is masked, else `false`.
 */
function isMasked(func) {
  return !!maskSrcKey && (maskSrcKey in func);
}

module.exports = isMasked;


/***/ }),

/***/ "ac69":
/***/ (function(module, exports, __webpack_require__) {

var arrayLikeKeys = __webpack_require__("0190"),
    baseKeysIn = __webpack_require__("7559"),
    isArrayLike = __webpack_require__("4c8a");

/**
 * Creates an array of the own and inherited enumerable property names of `object`.
 *
 * **Note:** Non-object values are coerced to objects.
 *
 * @static
 * @memberOf _
 * @since 3.0.0
 * @category Object
 * @param {Object} object The object to query.
 * @returns {Array} Returns the array of property names.
 * @example
 *
 * function Foo() {
 *   this.a = 1;
 *   this.b = 2;
 * }
 *
 * Foo.prototype.c = 3;
 *
 * _.keysIn(new Foo);
 * // => ['a', 'b', 'c'] (iteration order is not guaranteed)
 */
function keysIn(object) {
  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);
}

module.exports = keysIn;


/***/ }),

/***/ "ad37":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXTERNAL MODULE: ./node_modules/_tslib@2.6.3@tslib/tslib.es6.js
var tslib_es6 = __webpack_require__("9a80");

// EXTERNAL MODULE: ./node_modules/_detect-browser@5.3.0@detect-browser/es/index.js
var es = __webpack_require__("3f75");

// EXTERNAL MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/abstract/container.js
var abstract_container = __webpack_require__("62a0");

// EXTERNAL MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/util/util.js
var util = __webpack_require__("7533");

// EXTERNAL MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/index.js + 110 modules
var esm = __webpack_require__("6d77");

// CONCATENATED MODULE: ./node_modules/_d3-timer@1.0.10@d3-timer/src/timer.js
var timer_frame = 0, // is an animation frame pending?
    timeout = 0, // is a timeout pending?
    interval = 0, // are any timers active?
    pokeDelay = 1000, // how frequently we check for clock skew
    taskHead,
    taskTail,
    clockLast = 0,
    clockNow = 0,
    clockSkew = 0,
    clock = typeof performance === "object" && performance.now ? performance : Date,
    setFrame = typeof window === "object" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };

function now() {
  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);
}

function clearNow() {
  clockNow = 0;
}

function Timer() {
  this._call =
  this._time =
  this._next = null;
}

Timer.prototype = timer.prototype = {
  constructor: Timer,
  restart: function(callback, delay, time) {
    if (typeof callback !== "function") throw new TypeError("callback is not a function");
    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);
    if (!this._next && taskTail !== this) {
      if (taskTail) taskTail._next = this;
      else taskHead = this;
      taskTail = this;
    }
    this._call = callback;
    this._time = time;
    sleep();
  },
  stop: function() {
    if (this._call) {
      this._call = null;
      this._time = Infinity;
      sleep();
    }
  }
};

function timer(callback, delay, time) {
  var t = new Timer;
  t.restart(callback, delay, time);
  return t;
}

function timerFlush() {
  now(); // Get the current time, if not already set.
  ++timer_frame; // Pretend we’ve set an alarm, if we haven’t already.
  var t = taskHead, e;
  while (t) {
    if ((e = clockNow - t._time) >= 0) t._call.call(null, e);
    t = t._next;
  }
  --timer_frame;
}

function wake() {
  clockNow = (clockLast = clock.now()) + clockSkew;
  timer_frame = timeout = 0;
  try {
    timerFlush();
  } finally {
    timer_frame = 0;
    nap();
    clockNow = 0;
  }
}

function poke() {
  var now = clock.now(), delay = now - clockLast;
  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;
}

function nap() {
  var t0, t1 = taskHead, t2, time = Infinity;
  while (t1) {
    if (t1._call) {
      if (time > t1._time) time = t1._time;
      t0 = t1, t1 = t1._next;
    } else {
      t2 = t1._next, t1._next = null;
      t1 = t0 ? t0._next = t2 : taskHead = t2;
    }
  }
  taskTail = t0;
  sleep(time);
}

function sleep(time) {
  if (timer_frame) return; // Soonest alarm already set, or will be.
  if (timeout) timeout = clearTimeout(timeout);
  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.
  if (delay > 24) {
    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);
    if (interval) interval = clearInterval(interval);
  } else {
    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);
    timer_frame = 1, setFrame(wake);
  }
}

// CONCATENATED MODULE: ./node_modules/_d3-color@3.1.0@d3-color/src/define.js
/* harmony default export */ var define = (function(constructor, factory, prototype) {
  constructor.prototype = factory.prototype = prototype;
  prototype.constructor = constructor;
});

function extend(parent, definition) {
  var prototype = Object.create(parent.prototype);
  for (var key in definition) prototype[key] = definition[key];
  return prototype;
}

// CONCATENATED MODULE: ./node_modules/_d3-color@3.1.0@d3-color/src/color.js


function Color() {}

var darker = 0.7;
var brighter = 1 / darker;

var reI = "\\s*([+-]?\\d+)\\s*",
    reN = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",
    reP = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",
    reHex = /^#([0-9a-f]{3,8})$/,
    reRgbInteger = new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),
    reRgbPercent = new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),
    reRgbaInteger = new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),
    reRgbaPercent = new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),
    reHslPercent = new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),
    reHslaPercent = new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`);

var named = {
  aliceblue: 0xf0f8ff,
  antiquewhite: 0xfaebd7,
  aqua: 0x00ffff,
  aquamarine: 0x7fffd4,
  azure: 0xf0ffff,
  beige: 0xf5f5dc,
  bisque: 0xffe4c4,
  black: 0x000000,
  blanchedalmond: 0xffebcd,
  blue: 0x0000ff,
  blueviolet: 0x8a2be2,
  brown: 0xa52a2a,
  burlywood: 0xdeb887,
  cadetblue: 0x5f9ea0,
  chartreuse: 0x7fff00,
  chocolate: 0xd2691e,
  coral: 0xff7f50,
  cornflowerblue: 0x6495ed,
  cornsilk: 0xfff8dc,
  crimson: 0xdc143c,
  cyan: 0x00ffff,
  darkblue: 0x00008b,
  darkcyan: 0x008b8b,
  darkgoldenrod: 0xb8860b,
  darkgray: 0xa9a9a9,
  darkgreen: 0x006400,
  darkgrey: 0xa9a9a9,
  darkkhaki: 0xbdb76b,
  darkmagenta: 0x8b008b,
  darkolivegreen: 0x556b2f,
  darkorange: 0xff8c00,
  darkorchid: 0x9932cc,
  darkred: 0x8b0000,
  darksalmon: 0xe9967a,
  darkseagreen: 0x8fbc8f,
  darkslateblue: 0x483d8b,
  darkslategray: 0x2f4f4f,
  darkslategrey: 0x2f4f4f,
  darkturquoise: 0x00ced1,
  darkviolet: 0x9400d3,
  deeppink: 0xff1493,
  deepskyblue: 0x00bfff,
  dimgray: 0x696969,
  dimgrey: 0x696969,
  dodgerblue: 0x1e90ff,
  firebrick: 0xb22222,
  floralwhite: 0xfffaf0,
  forestgreen: 0x228b22,
  fuchsia: 0xff00ff,
  gainsboro: 0xdcdcdc,
  ghostwhite: 0xf8f8ff,
  gold: 0xffd700,
  goldenrod: 0xdaa520,
  gray: 0x808080,
  green: 0x008000,
  greenyellow: 0xadff2f,
  grey: 0x808080,
  honeydew: 0xf0fff0,
  hotpink: 0xff69b4,
  indianred: 0xcd5c5c,
  indigo: 0x4b0082,
  ivory: 0xfffff0,
  khaki: 0xf0e68c,
  lavender: 0xe6e6fa,
  lavenderblush: 0xfff0f5,
  lawngreen: 0x7cfc00,
  lemonchiffon: 0xfffacd,
  lightblue: 0xadd8e6,
  lightcoral: 0xf08080,
  lightcyan: 0xe0ffff,
  lightgoldenrodyellow: 0xfafad2,
  lightgray: 0xd3d3d3,
  lightgreen: 0x90ee90,
  lightgrey: 0xd3d3d3,
  lightpink: 0xffb6c1,
  lightsalmon: 0xffa07a,
  lightseagreen: 0x20b2aa,
  lightskyblue: 0x87cefa,
  lightslategray: 0x778899,
  lightslategrey: 0x778899,
  lightsteelblue: 0xb0c4de,
  lightyellow: 0xffffe0,
  lime: 0x00ff00,
  limegreen: 0x32cd32,
  linen: 0xfaf0e6,
  magenta: 0xff00ff,
  maroon: 0x800000,
  mediumaquamarine: 0x66cdaa,
  mediumblue: 0x0000cd,
  mediumorchid: 0xba55d3,
  mediumpurple: 0x9370db,
  mediumseagreen: 0x3cb371,
  mediumslateblue: 0x7b68ee,
  mediumspringgreen: 0x00fa9a,
  mediumturquoise: 0x48d1cc,
  mediumvioletred: 0xc71585,
  midnightblue: 0x191970,
  mintcream: 0xf5fffa,
  mistyrose: 0xffe4e1,
  moccasin: 0xffe4b5,
  navajowhite: 0xffdead,
  navy: 0x000080,
  oldlace: 0xfdf5e6,
  olive: 0x808000,
  olivedrab: 0x6b8e23,
  orange: 0xffa500,
  orangered: 0xff4500,
  orchid: 0xda70d6,
  palegoldenrod: 0xeee8aa,
  palegreen: 0x98fb98,
  paleturquoise: 0xafeeee,
  palevioletred: 0xdb7093,
  papayawhip: 0xffefd5,
  peachpuff: 0xffdab9,
  peru: 0xcd853f,
  pink: 0xffc0cb,
  plum: 0xdda0dd,
  powderblue: 0xb0e0e6,
  purple: 0x800080,
  rebeccapurple: 0x663399,
  red: 0xff0000,
  rosybrown: 0xbc8f8f,
  royalblue: 0x4169e1,
  saddlebrown: 0x8b4513,
  salmon: 0xfa8072,
  sandybrown: 0xf4a460,
  seagreen: 0x2e8b57,
  seashell: 0xfff5ee,
  sienna: 0xa0522d,
  silver: 0xc0c0c0,
  skyblue: 0x87ceeb,
  slateblue: 0x6a5acd,
  slategray: 0x708090,
  slategrey: 0x708090,
  snow: 0xfffafa,
  springgreen: 0x00ff7f,
  steelblue: 0x4682b4,
  tan: 0xd2b48c,
  teal: 0x008080,
  thistle: 0xd8bfd8,
  tomato: 0xff6347,
  turquoise: 0x40e0d0,
  violet: 0xee82ee,
  wheat: 0xf5deb3,
  white: 0xffffff,
  whitesmoke: 0xf5f5f5,
  yellow: 0xffff00,
  yellowgreen: 0x9acd32
};

define(Color, color_color, {
  copy(channels) {
    return Object.assign(new this.constructor, this, channels);
  },
  displayable() {
    return this.rgb().displayable();
  },
  hex: color_formatHex, // Deprecated! Use color.formatHex.
  formatHex: color_formatHex,
  formatHex8: color_formatHex8,
  formatHsl: color_formatHsl,
  formatRgb: color_formatRgb,
  toString: color_formatRgb
});

function color_formatHex() {
  return this.rgb().formatHex();
}

function color_formatHex8() {
  return this.rgb().formatHex8();
}

function color_formatHsl() {
  return hslConvert(this).formatHsl();
}

function color_formatRgb() {
  return this.rgb().formatRgb();
}

function color_color(format) {
  var m, l;
  format = (format + "").trim().toLowerCase();
  return (m = reHex.exec(format)) ? (l = m[1].length, m = parseInt(m[1], 16), l === 6 ? rgbn(m) // #ff0000
      : l === 3 ? new Rgb((m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), ((m & 0xf) << 4) | (m & 0xf), 1) // #f00
      : l === 8 ? rgba(m >> 24 & 0xff, m >> 16 & 0xff, m >> 8 & 0xff, (m & 0xff) / 0xff) // #ff000000
      : l === 4 ? rgba((m >> 12 & 0xf) | (m >> 8 & 0xf0), (m >> 8 & 0xf) | (m >> 4 & 0xf0), (m >> 4 & 0xf) | (m & 0xf0), (((m & 0xf) << 4) | (m & 0xf)) / 0xff) // #f000
      : null) // invalid hex
      : (m = reRgbInteger.exec(format)) ? new Rgb(m[1], m[2], m[3], 1) // rgb(255, 0, 0)
      : (m = reRgbPercent.exec(format)) ? new Rgb(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, 1) // rgb(100%, 0%, 0%)
      : (m = reRgbaInteger.exec(format)) ? rgba(m[1], m[2], m[3], m[4]) // rgba(255, 0, 0, 1)
      : (m = reRgbaPercent.exec(format)) ? rgba(m[1] * 255 / 100, m[2] * 255 / 100, m[3] * 255 / 100, m[4]) // rgb(100%, 0%, 0%, 1)
      : (m = reHslPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, 1) // hsl(120, 50%, 50%)
      : (m = reHslaPercent.exec(format)) ? hsla(m[1], m[2] / 100, m[3] / 100, m[4]) // hsla(120, 50%, 50%, 1)
      : named.hasOwnProperty(format) ? rgbn(named[format]) // eslint-disable-line no-prototype-builtins
      : format === "transparent" ? new Rgb(NaN, NaN, NaN, 0)
      : null;
}

function rgbn(n) {
  return new Rgb(n >> 16 & 0xff, n >> 8 & 0xff, n & 0xff, 1);
}

function rgba(r, g, b, a) {
  if (a <= 0) r = g = b = NaN;
  return new Rgb(r, g, b, a);
}

function rgbConvert(o) {
  if (!(o instanceof Color)) o = color_color(o);
  if (!o) return new Rgb;
  o = o.rgb();
  return new Rgb(o.r, o.g, o.b, o.opacity);
}

function color_rgb(r, g, b, opacity) {
  return arguments.length === 1 ? rgbConvert(r) : new Rgb(r, g, b, opacity == null ? 1 : opacity);
}

function Rgb(r, g, b, opacity) {
  this.r = +r;
  this.g = +g;
  this.b = +b;
  this.opacity = +opacity;
}

define(Rgb, color_rgb, extend(Color, {
  brighter(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  darker(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
  },
  rgb() {
    return this;
  },
  clamp() {
    return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));
  },
  displayable() {
    return (-0.5 <= this.r && this.r < 255.5)
        && (-0.5 <= this.g && this.g < 255.5)
        && (-0.5 <= this.b && this.b < 255.5)
        && (0 <= this.opacity && this.opacity <= 1);
  },
  hex: rgb_formatHex, // Deprecated! Use color.formatHex.
  formatHex: rgb_formatHex,
  formatHex8: rgb_formatHex8,
  formatRgb: rgb_formatRgb,
  toString: rgb_formatRgb
}));

function rgb_formatHex() {
  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;
}

function rgb_formatHex8() {
  return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
}

function rgb_formatRgb() {
  const a = clampa(this.opacity);
  return `${a === 1 ? "rgb(" : "rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a === 1 ? ")" : `, ${a})`}`;
}

function clampa(opacity) {
  return isNaN(opacity) ? 1 : Math.max(0, Math.min(1, opacity));
}

function clampi(value) {
  return Math.max(0, Math.min(255, Math.round(value) || 0));
}

function hex(value) {
  value = clampi(value);
  return (value < 16 ? "0" : "") + value.toString(16);
}

function hsla(h, s, l, a) {
  if (a <= 0) h = s = l = NaN;
  else if (l <= 0 || l >= 1) h = s = NaN;
  else if (s <= 0) h = NaN;
  return new Hsl(h, s, l, a);
}

function hslConvert(o) {
  if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);
  if (!(o instanceof Color)) o = color_color(o);
  if (!o) return new Hsl;
  if (o instanceof Hsl) return o;
  o = o.rgb();
  var r = o.r / 255,
      g = o.g / 255,
      b = o.b / 255,
      min = Math.min(r, g, b),
      max = Math.max(r, g, b),
      h = NaN,
      s = max - min,
      l = (max + min) / 2;
  if (s) {
    if (r === max) h = (g - b) / s + (g < b) * 6;
    else if (g === max) h = (b - r) / s + 2;
    else h = (r - g) / s + 4;
    s /= l < 0.5 ? max + min : 2 - max - min;
    h *= 60;
  } else {
    s = l > 0 && l < 1 ? 0 : h;
  }
  return new Hsl(h, s, l, o.opacity);
}

function hsl(h, s, l, opacity) {
  return arguments.length === 1 ? hslConvert(h) : new Hsl(h, s, l, opacity == null ? 1 : opacity);
}

function Hsl(h, s, l, opacity) {
  this.h = +h;
  this.s = +s;
  this.l = +l;
  this.opacity = +opacity;
}

define(Hsl, hsl, extend(Color, {
  brighter(k) {
    k = k == null ? brighter : Math.pow(brighter, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  darker(k) {
    k = k == null ? darker : Math.pow(darker, k);
    return new Hsl(this.h, this.s, this.l * k, this.opacity);
  },
  rgb() {
    var h = this.h % 360 + (this.h < 0) * 360,
        s = isNaN(h) || isNaN(this.s) ? 0 : this.s,
        l = this.l,
        m2 = l + (l < 0.5 ? l : 1 - l) * s,
        m1 = 2 * l - m2;
    return new Rgb(
      hsl2rgb(h >= 240 ? h - 240 : h + 120, m1, m2),
      hsl2rgb(h, m1, m2),
      hsl2rgb(h < 120 ? h + 240 : h - 120, m1, m2),
      this.opacity
    );
  },
  clamp() {
    return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));
  },
  displayable() {
    return (0 <= this.s && this.s <= 1 || isNaN(this.s))
        && (0 <= this.l && this.l <= 1)
        && (0 <= this.opacity && this.opacity <= 1);
  },
  formatHsl() {
    const a = clampa(this.opacity);
    return `${a === 1 ? "hsl(" : "hsla("}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a === 1 ? ")" : `, ${a})`}`;
  }
}));

function clamph(value) {
  value = (value || 0) % 360;
  return value < 0 ? value + 360 : value;
}

function clampt(value) {
  return Math.max(0, Math.min(1, value || 0));
}

/* From FvD 13.37, CSS Color Module Level 3 */
function hsl2rgb(h, m1, m2) {
  return (h < 60 ? m1 + (m2 - m1) * h / 60
      : h < 180 ? m2
      : h < 240 ? m1 + (m2 - m1) * (240 - h) / 60
      : m1) * 255;
}

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/basis.js
function basis(t1, v0, v1, v2, v3) {
  var t2 = t1 * t1, t3 = t2 * t1;
  return ((1 - 3 * t1 + 3 * t2 - t3) * v0
      + (4 - 6 * t2 + 3 * t3) * v1
      + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2
      + t3 * v3) / 6;
}

/* harmony default export */ var src_basis = (function(values) {
  var n = values.length - 1;
  return function(t) {
    var i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n),
        v1 = values[i],
        v2 = values[i + 1],
        v0 = i > 0 ? values[i - 1] : 2 * v1 - v2,
        v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
});

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/basisClosed.js


/* harmony default export */ var basisClosed = (function(values) {
  var n = values.length;
  return function(t) {
    var i = Math.floor(((t %= 1) < 0 ? ++t : t) * n),
        v0 = values[(i + n - 1) % n],
        v1 = values[i % n],
        v2 = values[(i + 1) % n],
        v3 = values[(i + 2) % n];
    return basis((t - i / n) * n, v0, v1, v2, v3);
  };
});

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/constant.js
/* harmony default export */ var constant = (x => () => x);

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/color.js


function linear(a, d) {
  return function(t) {
    return a + t * d;
  };
}

function exponential(a, b, y) {
  return a = Math.pow(a, y), b = Math.pow(b, y) - a, y = 1 / y, function(t) {
    return Math.pow(a + t * b, y);
  };
}

function hue(a, b) {
  var d = b - a;
  return d ? linear(a, d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d) : constant(isNaN(a) ? b : a);
}

function gamma(y) {
  return (y = +y) === 1 ? nogamma : function(a, b) {
    return b - a ? exponential(a, b, y) : constant(isNaN(a) ? b : a);
  };
}

function nogamma(a, b) {
  var d = b - a;
  return d ? linear(a, d) : constant(isNaN(a) ? b : a);
}

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/rgb.js





/* harmony default export */ var src_rgb = ((function rgbGamma(y) {
  var color = gamma(y);

  function rgb(start, end) {
    var r = color((start = color_rgb(start)).r, (end = color_rgb(end)).r),
        g = color(start.g, end.g),
        b = color(start.b, end.b),
        opacity = nogamma(start.opacity, end.opacity);
    return function(t) {
      start.r = r(t);
      start.g = g(t);
      start.b = b(t);
      start.opacity = opacity(t);
      return start + "";
    };
  }

  rgb.gamma = rgbGamma;

  return rgb;
})(1));

function rgbSpline(spline) {
  return function(colors) {
    var n = colors.length,
        r = new Array(n),
        g = new Array(n),
        b = new Array(n),
        i, color;
    for (i = 0; i < n; ++i) {
      color = color_rgb(colors[i]);
      r[i] = color.r || 0;
      g[i] = color.g || 0;
      b[i] = color.b || 0;
    }
    r = spline(r);
    g = spline(g);
    b = spline(b);
    color.opacity = 1;
    return function(t) {
      color.r = r(t);
      color.g = g(t);
      color.b = b(t);
      return color + "";
    };
  };
}

var rgbBasis = rgbSpline(src_basis);
var rgbBasisClosed = rgbSpline(basisClosed);

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/numberArray.js
/* harmony default export */ var numberArray = (function(a, b) {
  if (!b) b = [];
  var n = a ? Math.min(b.length, a.length) : 0,
      c = b.slice(),
      i;
  return function(t) {
    for (i = 0; i < n; ++i) c[i] = a[i] * (1 - t) + b[i] * t;
    return c;
  };
});

function isNumberArray(x) {
  return ArrayBuffer.isView(x) && !(x instanceof DataView);
}

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/array.js



/* harmony default export */ var array = (function(a, b) {
  return (isNumberArray(b) ? numberArray : genericArray)(a, b);
});

function genericArray(a, b) {
  var nb = b ? b.length : 0,
      na = a ? Math.min(nb, a.length) : 0,
      x = new Array(na),
      c = new Array(nb),
      i;

  for (i = 0; i < na; ++i) x[i] = value(a[i], b[i]);
  for (; i < nb; ++i) c[i] = b[i];

  return function(t) {
    for (i = 0; i < na; ++i) c[i] = x[i](t);
    return c;
  };
}

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/date.js
/* harmony default export */ var date = (function(a, b) {
  var d = new Date;
  return a = +a, b = +b, function(t) {
    return d.setTime(a * (1 - t) + b * t), d;
  };
});

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/number.js
/* harmony default export */ var number = (function(a, b) {
  return a = +a, b = +b, function(t) {
    return a * (1 - t) + b * t;
  };
});

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/object.js


/* harmony default export */ var object = (function(a, b) {
  var i = {},
      c = {},
      k;

  if (a === null || typeof a !== "object") a = {};
  if (b === null || typeof b !== "object") b = {};

  for (k in b) {
    if (k in a) {
      i[k] = value(a[k], b[k]);
    } else {
      c[k] = b[k];
    }
  }

  return function(t) {
    for (k in i) c[k] = i[k](t);
    return c;
  };
});

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/string.js


var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,
    reB = new RegExp(reA.source, "g");

function zero(b) {
  return function() {
    return b;
  };
}

function one(b) {
  return function(t) {
    return b(t) + "";
  };
}

/* harmony default export */ var string = (function(a, b) {
  var bi = reA.lastIndex = reB.lastIndex = 0, // scan index for next number in b
      am, // current match in a
      bm, // current match in b
      bs, // string preceding current number in b, if any
      i = -1, // index in s
      s = [], // string constants and placeholders
      q = []; // number interpolators

  // Coerce inputs to strings.
  a = a + "", b = b + "";

  // Interpolate pairs of numbers in a & b.
  while ((am = reA.exec(a))
      && (bm = reB.exec(b))) {
    if ((bs = bm.index) > bi) { // a string precedes the next number in b
      bs = b.slice(bi, bs);
      if (s[i]) s[i] += bs; // coalesce with previous string
      else s[++i] = bs;
    }
    if ((am = am[0]) === (bm = bm[0])) { // numbers in a & b match
      if (s[i]) s[i] += bm; // coalesce with previous string
      else s[++i] = bm;
    } else { // interpolate non-matching numbers
      s[++i] = null;
      q.push({i: i, x: number(am, bm)});
    }
    bi = reB.lastIndex;
  }

  // Add remains of b.
  if (bi < b.length) {
    bs = b.slice(bi);
    if (s[i]) s[i] += bs; // coalesce with previous string
    else s[++i] = bs;
  }

  // Special optimization for only a single match.
  // Otherwise, interpolate each of the numbers and rejoin the string.
  return s.length < 2 ? (q[0]
      ? one(q[0].x)
      : zero(b))
      : (b = q.length, function(t) {
          for (var i = 0, o; i < b; ++i) s[(o = q[i]).i] = o.x(t);
          return s.join("");
        });
});

// CONCATENATED MODULE: ./node_modules/_d3-interpolate@3.0.1@d3-interpolate/src/value.js










/* harmony default export */ var value = (function(a, b) {
  var t = typeof b, c;
  return b == null || t === "boolean" ? constant(b)
      : (t === "number" ? number
      : t === "string" ? ((c = color_color(b)) ? (b = c, src_rgb) : string)
      : b instanceof color_color ? src_rgb
      : b instanceof Date ? date
      : isNumberArray(b) ? numberArray
      : Array.isArray(b) ? genericArray
      : typeof b.valueOf !== "function" && typeof b.toString !== "function" || isNaN(b) ? object
      : number)(a, b);
});

// EXTERNAL MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/animate/register.js + 12 modules
var register = __webpack_require__("faf7");

// EXTERNAL MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/util/path.js
var path = __webpack_require__("e05a");

// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/util/color.js
var isColorProp = function (prop) { return ['fill', 'stroke', 'fillStyle', 'strokeStyle'].includes(prop); };
var isGradientColor = function (val) { return /^[r,R,L,l]{1}[\s]*\(/.test(val); };
//# sourceMappingURL=color.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/animate/timeline.js


 // 目前整体动画只需要数值和数组的差值计算



var IDENTITY_MATRIX = [1, 0, 0, 0, 1, 0, 0, 0, 1];
/**
 * 使用 ratio 进行插值计算来更新属性
 * @param {IElement}  shape    元素
 * @param {Animation} animation 动画
 * @param {number}    ratio    比例
 * @return {boolean}  动画是否执行完成
 */
function _update(shape, animation, ratio) {
    var cProps = {}; // 此刻属性
    var fromAttrs = animation.fromAttrs, toAttrs = animation.toAttrs;
    if (shape.destroyed) {
        return;
    }
    var interf; //  差值函数
    for (var k in toAttrs) {
        if (!Object(esm["isEqual"])(fromAttrs[k], toAttrs[k])) {
            if (k === 'path') {
                var toPath = toAttrs[k];
                var fromPath = fromAttrs[k];
                if (toPath.length > fromPath.length) {
                    toPath = path["parsePathString"](toAttrs[k]); // 终点状态
                    fromPath = path["parsePathString"](fromAttrs[k]); // 起始状态
                    fromPath = path["fillPathByDiff"](fromPath, toPath);
                    fromPath = path["formatPath"](fromPath, toPath);
                    animation.fromAttrs.path = fromPath;
                    animation.toAttrs.path = toPath;
                }
                else if (!animation.pathFormatted) {
                    toPath = path["parsePathString"](toAttrs[k]);
                    fromPath = path["parsePathString"](fromAttrs[k]);
                    fromPath = path["formatPath"](fromPath, toPath);
                    animation.fromAttrs.path = fromPath;
                    animation.toAttrs.path = toPath;
                    animation.pathFormatted = true;
                }
                cProps[k] = [];
                for (var i = 0; i < toPath.length; i++) {
                    var toPathPoint = toPath[i];
                    var fromPathPoint = fromPath[i];
                    var cPathPoint = [];
                    for (var j = 0; j < toPathPoint.length; j++) {
                        if (Object(esm["isNumber"])(toPathPoint[j]) && fromPathPoint && Object(esm["isNumber"])(fromPathPoint[j])) {
                            interf = value(fromPathPoint[j], toPathPoint[j]);
                            cPathPoint.push(interf(ratio));
                        }
                        else {
                            cPathPoint.push(toPathPoint[j]);
                        }
                    }
                    cProps[k].push(cPathPoint);
                }
            }
            else if (k === 'matrix') {
                /*
                 对矩阵进行插值时，需要保证矩阵不为空，为空则使用单位矩阵
                 TODO: 二维和三维场景下单位矩阵不同，之后 WebGL 版需要做进一步处理
                 */
                var matrixFn = array(fromAttrs[k] || IDENTITY_MATRIX, toAttrs[k] || IDENTITY_MATRIX);
                var currentMatrix = matrixFn(ratio);
                cProps[k] = currentMatrix;
            }
            else if (isColorProp(k) && isGradientColor(toAttrs[k])) {
                cProps[k] = toAttrs[k];
            }
            else if (!Object(esm["isFunction"])(toAttrs[k])) {
                // 非函数类型的值才能做插值
                interf = value(fromAttrs[k], toAttrs[k]);
                cProps[k] = interf(ratio);
            }
        }
    }
    shape.attr(cProps);
}
/**
 * 根据自定义帧动画函数 onFrame 来更新属性
 * @param {IElement}  shape    元素
 * @param {Animation} animation 动画
 * @param {number}    elapsed  动画执行时间(毫秒)
 * @return {boolean}  动画是否执行完成
 */
function update(shape, animation, elapsed) {
    var startTime = animation.startTime, delay = animation.delay;
    // 如果还没有开始执行或暂停，先不更新
    if (elapsed < startTime + delay || animation._paused) {
        return false;
    }
    var ratio;
    var duration = animation.duration;
    var easing = animation.easing;
    var easeFn = Object(register["a" /* getEasing */])(easing);
    // 已执行时间
    elapsed = elapsed - startTime - animation.delay;
    if (animation.repeat) {
        // 如果动画重复执行，则 elapsed > duration，计算 ratio 时需取模
        ratio = (elapsed % duration) / duration;
        ratio = easeFn(ratio);
    }
    else {
        ratio = elapsed / duration;
        if (ratio < 1) {
            // 动画未执行完
            ratio = easeFn(ratio);
        }
        else {
            // 动画已执行完
            if (animation.onFrame) {
                shape.attr(animation.onFrame(1));
            }
            else {
                shape.attr(animation.toAttrs);
            }
            return true;
        }
    }
    if (animation.onFrame) {
        var attrs = animation.onFrame(ratio);
        shape.attr(attrs);
    }
    else {
        _update(shape, animation, ratio);
    }
    return false;
}
var timeline_Timeline = /** @class */ (function () {
    /**
     * 时间轴构造函数，依赖于画布
     * @param {}
     */
    function Timeline(canvas) {
        /**
         * 执行动画的元素列表
         * @type {IElement[]}
         */
        this.animators = [];
        /**
         * 当前时间
         * @type {number}
         */
        this.current = 0;
        /**
         * 定时器
         * @type {d3Timer.Timer}
         */
        this.timer = null;
        this.canvas = canvas;
    }
    /**
     * 初始化定时器
     */
    Timeline.prototype.initTimer = function () {
        var _this = this;
        var isFinished = false;
        var shape;
        var animations;
        var animation;
        this.timer = timer(function (elapsed) {
            _this.current = elapsed;
            if (_this.animators.length > 0) {
                for (var i = _this.animators.length - 1; i >= 0; i--) {
                    shape = _this.animators[i];
                    if (shape.destroyed) {
                        // 如果已经被销毁，直接移出队列
                        _this.removeAnimator(i);
                        continue;
                    }
                    if (!shape.isAnimatePaused()) {
                        animations = shape.get('animations');
                        for (var j = animations.length - 1; j >= 0; j--) {
                            animation = animations[j];
                            isFinished = update(shape, animation, elapsed);
                            if (isFinished) {
                                animations.splice(j, 1);
                                isFinished = false;
                                if (animation.callback) {
                                    animation.callback();
                                }
                            }
                        }
                    }
                    if (animations.length === 0) {
                        _this.removeAnimator(i);
                    }
                }
                var autoDraw = _this.canvas.get('autoDraw');
                // 非自动渲染模式下，手动调用 canvas.draw() 重新渲染
                if (!autoDraw) {
                    _this.canvas.draw();
                }
            }
        });
    };
    /**
     * 增加动画元素
     */
    Timeline.prototype.addAnimator = function (shape) {
        this.animators.push(shape);
    };
    /**
     * 移除动画元素
     */
    Timeline.prototype.removeAnimator = function (index) {
        this.animators.splice(index, 1);
    };
    /**
     * 是否有动画在执行
     */
    Timeline.prototype.isAnimating = function () {
        return !!this.animators.length;
    };
    /**
     * 停止定时器
     */
    Timeline.prototype.stop = function () {
        if (this.timer) {
            this.timer.stop();
        }
    };
    /**
     * 停止时间轴上所有元素的动画，并置空动画元素列表
     * @param {boolean} toEnd 是否到动画的最终状态，用来透传给动画元素的 stopAnimate 方法
     */
    Timeline.prototype.stopAllAnimations = function (toEnd) {
        if (toEnd === void 0) { toEnd = true; }
        this.animators.forEach(function (animator) {
            animator.stopAnimate(toEnd);
        });
        this.animators = [];
        this.canvas.draw();
    };
    /**
     * 获取当前时间
     */
    Timeline.prototype.getTime = function () {
        return this.current;
    };
    return Timeline;
}());
/* harmony default export */ var animate_timeline = (timeline_Timeline);
//# sourceMappingURL=timeline.js.map
// EXTERNAL MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/event/graph-event.js
var graph_event = __webpack_require__("38d8");

// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/event/event-contoller.js
/**
 * @fileoverview 事件处理器
 * @author dxq613@gmail.com
 */


var CLICK_OFFSET = 40;
var LEFT_BTN_CODE = 0;
var DELEGATION_SPLIT = ':';
var EVENTS = [
    'mousedown',
    'mouseup',
    'dblclick',
    'mouseout',
    'mouseover',
    'mousemove',
    'mouseleave',
    'mouseenter',
    'touchstart',
    'touchmove',
    'touchend',
    'dragenter',
    'dragover',
    'dragleave',
    'drop',
    'contextmenu',
    'mousewheel',
];
// 是否有委托事件监听
function hasDelegation(events, type) {
    for (var key in events) {
        if (events.hasOwnProperty(key) && key.indexOf(DELEGATION_SPLIT + type) >= 0) {
            return true;
        }
    }
    return false;
}
// 触发目标事件，目标只能是 shape 或 canvas
function emitTargetEvent(target, type, eventObj) {
    eventObj.name = type;
    eventObj.target = target;
    eventObj.currentTarget = target;
    eventObj.delegateTarget = target;
    target.emit(type, eventObj);
}
// 事件冒泡, enter 和 leave 需要对 fromShape 和 toShape 进行判同
function bubbleEvent(container, type, eventObj) {
    if (eventObj.bubbles) {
        var relativeShape = void 0;
        var isOverEvent = false;
        if (type === 'mouseenter') {
            relativeShape = eventObj.fromShape;
            isOverEvent = true;
        }
        else if (type === 'mouseleave') {
            isOverEvent = true;
            relativeShape = eventObj.toShape;
        }
        // canvas 上的 mouseenter， mouseleave 事件，仅当进入或者移出 canvas 时触发
        if (container.isCanvas() && isOverEvent) {
            return;
        }
        // 如果相关图形同当前图形在同一个容器内，不触发事件
        if (relativeShape && Object(util["g" /* isParent */])(container, relativeShape)) {
            // 阻止继续向上冒泡
            eventObj.bubbles = false;
            return;
        }
        // 事件名称可能在委托过程中被修改，因此事件冒泡时需要重新设置事件名称
        eventObj.name = type;
        eventObj.currentTarget = container;
        eventObj.delegateTarget = container;
        container.emit(type, eventObj);
    }
}
var event_contoller_EventController = /** @class */ (function () {
    function EventController(cfg) {
        var _this = this;
        // 正在被拖拽的图形
        this.draggingShape = null;
        this.dragging = false;
        // 当前鼠标/touch所在位置的图形
        this.currentShape = null;
        this.mousedownShape = null;
        this.mousedownPoint = null;
        // 统一处理所有的回调
        this._eventCallback = function (ev) {
            var type = ev.type;
            _this._triggerEvent(type, ev);
        };
        // 在 document 处理拖拽到画布外的事件，处理从图形上移除画布未被捕捉的问题
        this._onDocumentMove = function (ev) {
            var canvas = _this.canvas;
            var el = canvas.get('el');
            if (el !== ev.target) {
                // 不在 canvas 上移动
                if (_this.dragging || _this.currentShape) {
                    var pointInfo = _this._getPointInfo(ev);
                    // 还在拖拽过程中
                    if (_this.dragging) {
                        _this._emitEvent('drag', ev, pointInfo, _this.draggingShape);
                    }
                    // 说明从某个图形直接移动到了画布外面，
                    // 修复了 mouseleave 的 bug 后不再出现这种情况
                    // if (this.currentShape) {
                    //   this._emitEvent('mouseleave', ev, pointInfo, this.currentShape, this.currentShape, null);
                    //   this.currentShape = null;
                    // }
                }
            }
        };
        // 在 document 上处理拖拽到外面，释放鼠标时触发 dragend
        this._onDocumentMouseUp = function (ev) {
            var canvas = _this.canvas;
            var el = canvas.get('el');
            if (el !== ev.target) {
                // 不在 canvas 上移动
                if (_this.dragging) {
                    var pointInfo = _this._getPointInfo(ev);
                    if (_this.draggingShape) {
                        // 如果存在拖拽的图形，则也触发 drop 事件
                        _this._emitEvent('drop', ev, pointInfo, null);
                    }
                    _this._emitEvent('dragend', ev, pointInfo, _this.draggingShape);
                    _this._afterDrag(_this.draggingShape, pointInfo, ev);
                }
            }
        };
        this.canvas = cfg.canvas;
    }
    EventController.prototype.init = function () {
        this._bindEvents();
    };
    // 注册事件
    EventController.prototype._bindEvents = function () {
        var _this = this;
        var el = this.canvas.get('el');
        Object(util["a" /* each */])(EVENTS, function (eventName) {
            el.addEventListener(eventName, _this._eventCallback);
        });
        if (document) {
            // 处理移动到外面没有触发 shape mouse leave 的事件
            // 处理拖拽到外部的问题
            document.addEventListener('mousemove', this._onDocumentMove);
            // 处理拖拽过程中在外部释放鼠标的问题
            document.addEventListener('mouseup', this._onDocumentMouseUp);
        }
    };
    // 清理事件
    EventController.prototype._clearEvents = function () {
        var _this = this;
        var el = this.canvas.get('el');
        Object(util["a" /* each */])(EVENTS, function (eventName) {
            el.removeEventListener(eventName, _this._eventCallback);
        });
        if (document) {
            document.removeEventListener('mousemove', this._onDocumentMove);
            document.removeEventListener('mouseup', this._onDocumentMouseUp);
        }
    };
    EventController.prototype._getEventObj = function (type, event, point, target, fromShape, toShape) {
        var eventObj = new graph_event["a" /* default */](type, event);
        eventObj.fromShape = fromShape;
        eventObj.toShape = toShape;
        eventObj.x = point.x;
        eventObj.y = point.y;
        eventObj.clientX = point.clientX;
        eventObj.clientY = point.clientY;
        eventObj.propagationPath.push(target);
        // 事件的x,y应该是基于画布左上角的，与canvas的matrix无关
        return eventObj;
    };
    // 根据点获取图形，提取成独立方法，便于后续优化
    EventController.prototype._getShape = function (point, ev) {
        return this.canvas.getShape(point.x, point.y, ev);
    };
    // 获取事件的当前点的信息
    EventController.prototype._getPointInfo = function (ev) {
        var canvas = this.canvas;
        var clientPoint = canvas.getClientByEvent(ev);
        var point = canvas.getPointByEvent(ev);
        return {
            x: point.x,
            y: point.y,
            clientX: clientPoint.x,
            clientY: clientPoint.y,
        };
    };
    // 触发事件
    EventController.prototype._triggerEvent = function (type, ev) {
        var pointInfo = this._getPointInfo(ev);
        // 每次都获取图形有一定成本，后期可以考虑进行缓存策略
        var shape = this._getShape(pointInfo, ev);
        var method = this["_on" + type];
        var leaveCanvas = false;
        if (method) {
            method.call(this, pointInfo, shape, ev);
        }
        else {
            var preShape = this.currentShape;
            // 如果进入、移出画布时存在图形，则要分别触发事件
            if (type === 'mouseenter' || type === 'dragenter' || type === 'mouseover') {
                this._emitEvent(type, ev, pointInfo, null, null, shape); // 先进入画布
                if (shape) {
                    this._emitEvent(type, ev, pointInfo, shape, null, shape); // 再触发图形的事件
                }
                if (type === 'mouseenter' && this.draggingShape) {
                    // 如果正在拖拽图形, 则触发 dragleave
                    this._emitEvent('dragenter', ev, pointInfo, null);
                }
            }
            else if (type === 'mouseleave' || type === 'dragleave' || type === 'mouseout') {
                leaveCanvas = true;
                if (preShape) {
                    this._emitEvent(type, ev, pointInfo, preShape, preShape, null); // 先触发图形的事件
                }
                this._emitEvent(type, ev, pointInfo, null, preShape, null); // 再触发离开画布事件
                if (type === 'mouseleave' && this.draggingShape) {
                    this._emitEvent('dragleave', ev, pointInfo, null);
                }
            }
            else {
                this._emitEvent(type, ev, pointInfo, shape, null, null); // 一般事件中不需要考虑 from, to
            }
        }
        if (!leaveCanvas) {
            this.currentShape = shape;
        }
        // 当鼠标从画布移动到 shape 或者从 preShape 移动到 shape 时，应用 shape 上的鼠标样式
        if (shape && !shape.get('destroyed')) {
            var canvas = this.canvas;
            var el = canvas.get('el');
            el.style.cursor = shape.attr('cursor') || canvas.get('cursor');
        }
    };
    // 记录下点击的位置、图形，便于拖拽事件、click 事件的判定
    EventController.prototype._onmousedown = function (pointInfo, shape, event) {
        // 只有鼠标左键的 mousedown 事件才会设置 mousedownShape 等属性，避免鼠标右键的 mousedown 事件引起其他事件发生
        if (event.button === LEFT_BTN_CODE) {
            this.mousedownShape = shape;
            this.mousedownPoint = pointInfo;
            this.mousedownTimeStamp = event.timeStamp;
        }
        this._emitEvent('mousedown', event, pointInfo, shape, null, null); // mousedown 不考虑fromShape, toShape
    };
    // mouseleave 和 mouseenter 都是成对存在的
    // mouseenter 和 mouseover 同时触发
    EventController.prototype._emitMouseoverEvents = function (event, pointInfo, fromShape, toShape) {
        var el = this.canvas.get('el');
        if (fromShape !== toShape) {
            if (fromShape) {
                this._emitEvent('mouseout', event, pointInfo, fromShape, fromShape, toShape);
                this._emitEvent('mouseleave', event, pointInfo, fromShape, fromShape, toShape);
                // 当鼠标从 fromShape 移动到画布上时，重置鼠标样式
                if (!toShape || toShape.get('destroyed')) {
                    el.style.cursor = this.canvas.get('cursor');
                }
            }
            if (toShape) {
                this._emitEvent('mouseover', event, pointInfo, toShape, fromShape, toShape);
                this._emitEvent('mouseenter', event, pointInfo, toShape, fromShape, toShape);
            }
        }
    };
    // dragover 不等同于 mouseover，而等同于 mousemove
    EventController.prototype._emitDragoverEvents = function (event, pointInfo, fromShape, toShape, isCanvasEmit) {
        if (toShape) {
            if (toShape !== fromShape) {
                if (fromShape) {
                    this._emitEvent('dragleave', event, pointInfo, fromShape, fromShape, toShape);
                }
                this._emitEvent('dragenter', event, pointInfo, toShape, fromShape, toShape);
            }
            if (!isCanvasEmit) {
                this._emitEvent('dragover', event, pointInfo, toShape);
            }
        }
        else if (fromShape) {
            // TODO: 此处判断有问题，当 drag 图形时，也会触发一次 dragleave 事件，因为此时 toShape 为 null，这不是所期望的
            // 经过空白区域
            this._emitEvent('dragleave', event, pointInfo, fromShape, fromShape, toShape);
        }
        if (isCanvasEmit) {
            this._emitEvent('dragover', event, pointInfo, toShape);
        }
    };
    // drag 完成后，需要做一些清理工作
    EventController.prototype._afterDrag = function (draggingShape, pointInfo, event) {
        if (draggingShape) {
            draggingShape.set('capture', true); // 恢复可以拾取
            this.draggingShape = null;
        }
        this.dragging = false;
        // drag 完成后，有可能 draggingShape 已经移动到了当前位置，所以不能直接取当前图形
        var shape = this._getShape(pointInfo, event);
        // 拖拽完成后，进行 enter，leave 的判定
        if (shape !== draggingShape) {
            this._emitMouseoverEvents(event, pointInfo, draggingShape, shape);
        }
        this.currentShape = shape; // 更新当前 shape，如果不处理当前图形的 mouseleave 事件可能会出问题
    };
    // 按键抬起时，会终止拖拽、触发点击
    EventController.prototype._onmouseup = function (pointInfo, shape, event) {
        // eevent.button === 0 表示鼠标左键事件，此处加上判断主要是为了避免右键鼠标会触发 mouseup 和 click 事件
        // ref: https://developer.mozilla.org/en-US/docs/Web/API/MouseEvent/button
        if (event.button === LEFT_BTN_CODE) {
            var draggingShape = this.draggingShape;
            if (this.dragging) {
                // 存在可以拖拽的图形，同时拖拽到其他图形上时触发 drag 事件
                if (draggingShape) {
                    this._emitEvent('drop', event, pointInfo, shape);
                }
                this._emitEvent('dragend', event, pointInfo, draggingShape);
                this._afterDrag(draggingShape, pointInfo, event);
            }
            else {
                this._emitEvent('mouseup', event, pointInfo, shape); // 先触发 mouseup 再触发 click
                if (shape === this.mousedownShape) {
                    this._emitEvent('click', event, pointInfo, shape);
                }
                this.mousedownShape = null;
                this.mousedownPoint = null;
            }
        }
    };
    // 当触发浏览器的 dragover 事件时，不会再触发 mousemove ，所以这时候的 dragenter, dragleave 事件需要重新处理
    EventController.prototype._ondragover = function (pointInfo, shape, event) {
        event.preventDefault(); // 如果不对 dragover 进行 preventDefault，则不会在 canvas 上触发 drop 事件
        var preShape = this.currentShape;
        this._emitDragoverEvents(event, pointInfo, preShape, shape, true);
    };
    // 大量的图形事件，都通过 mousemove 模拟
    EventController.prototype._onmousemove = function (pointInfo, shape, event) {
        var canvas = this.canvas;
        var preShape = this.currentShape;
        var draggingShape = this.draggingShape;
        // 正在拖拽时
        if (this.dragging) {
            // 正在拖拽中
            if (draggingShape) {
                // 如果拖拽了 shape 会触发 dragenter, dragleave, dragover 和 drag 事件
                this._emitDragoverEvents(event, pointInfo, preShape, shape, false);
            }
            // 如果存在 draggingShape 则会在 draggingShape 上触发 drag 事件，冒泡到 canvas 上
            // 否则在 canvas 上触发 drag 事件
            this._emitEvent('drag', event, pointInfo, draggingShape);
        }
        else {
            var mousedownPoint = this.mousedownPoint;
            if (mousedownPoint) {
                // 当鼠标点击下去，同时移动时，进行 drag 判定
                var mousedownShape = this.mousedownShape;
                var now = event.timeStamp;
                var timeWindow = now - this.mousedownTimeStamp;
                var dx = mousedownPoint.clientX - pointInfo.clientX;
                var dy = mousedownPoint.clientY - pointInfo.clientY;
                var dist = dx * dx + dy * dy;
                if (timeWindow > 120 || dist > CLICK_OFFSET) {
                    if (mousedownShape && mousedownShape.get('draggable')) {
                        // 设置了 draggable 的 shape 才能触发 drag 相关的事件
                        draggingShape = this.mousedownShape; // 拖动鼠标点下时的 shape
                        draggingShape.set('capture', false); // 禁止继续拾取，否则无法进行 dragover,dragenter,dragleave,drop的判定
                        this.draggingShape = draggingShape;
                        this.dragging = true;
                        this._emitEvent('dragstart', event, pointInfo, draggingShape);
                        // 清理按下鼠标时缓存的值
                        this.mousedownShape = null;
                        this.mousedownPoint = null;
                    }
                    else if (!mousedownShape && canvas.get('draggable')) {
                        // 设置了 draggable 的 canvas 才能触发 drag 相关的事件
                        this.dragging = true;
                        this._emitEvent('dragstart', event, pointInfo, null);
                        // 清理按下鼠标时缓存的值
                        this.mousedownShape = null;
                        this.mousedownPoint = null;
                    }
                    else {
                        this._emitMouseoverEvents(event, pointInfo, preShape, shape);
                        this._emitEvent('mousemove', event, pointInfo, shape);
                    }
                }
                else {
                    this._emitMouseoverEvents(event, pointInfo, preShape, shape);
                    this._emitEvent('mousemove', event, pointInfo, shape);
                }
            }
            else {
                // 没有按键按下时，则直接触发 mouse over 相关的各种事件
                this._emitMouseoverEvents(event, pointInfo, preShape, shape);
                // 始终触发移动
                this._emitEvent('mousemove', event, pointInfo, shape);
            }
        }
    };
    // 触发事件
    EventController.prototype._emitEvent = function (type, event, pointInfo, shape, fromShape, toShape) {
        var eventObj = this._getEventObj(type, event, pointInfo, shape, fromShape, toShape);
        // 存在 shape 触发，则进行冒泡处理
        if (shape) {
            eventObj.shape = shape;
            // 触发 shape 上的事件
            emitTargetEvent(shape, type, eventObj);
            var parent_1 = shape.getParent();
            // 执行冒泡
            while (parent_1) {
                // 委托事件要先触发
                parent_1.emitDelegation(type, eventObj);
                // 事件冒泡停止，不能妨碍委托事件
                if (!eventObj.propagationStopped) {
                    bubbleEvent(parent_1, type, eventObj);
                }
                eventObj.propagationPath.push(parent_1);
                parent_1 = parent_1.getParent();
            }
        }
        else {
            // 如果没有 shape 直接在 canvas 上触发
            var canvas = this.canvas;
            // 直接触发 canvas 上的事件
            emitTargetEvent(canvas, type, eventObj);
        }
    };
    EventController.prototype.destroy = function () {
        // 清理事件
        this._clearEvents();
        // 清理缓存的对象
        this.canvas = null;
        this.currentShape = null;
        this.draggingShape = null;
        this.mousedownPoint = null;
        this.mousedownShape = null;
        this.mousedownTimeStamp = null;
    };
    return EventController;
}());
/* harmony default export */ var event_contoller = (event_contoller_EventController);
//# sourceMappingURL=event-contoller.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/abstract/canvas.js






var PX_SUFFIX = 'px';
var browser = Object(es["detect"])();
var isFirefox = browser && browser.name === 'firefox';
var canvas_Canvas = /** @class */ (function (_super) {
    Object(tslib_es6["__extends"])(Canvas, _super);
    function Canvas(cfg) {
        var _this = _super.call(this, cfg) || this;
        _this.initContainer();
        _this.initDom();
        _this.initEvents();
        _this.initTimeline();
        return _this;
    }
    Canvas.prototype.getDefaultCfg = function () {
        var cfg = _super.prototype.getDefaultCfg.call(this);
        // set default cursor style for canvas
        cfg['cursor'] = 'default';
        // CSS transform 目前尚未经过长时间验证，为了避免影响上层业务，默认关闭，上层按需开启
        cfg['supportCSSTransform'] = false;
        return cfg;
    };
    /**
     * @protected
     * 初始化容器
     */
    Canvas.prototype.initContainer = function () {
        var container = this.get('container');
        if (Object(util["h" /* isString */])(container)) {
            container = document.getElementById(container);
            this.set('container', container);
        }
    };
    /**
     * @protected
     * 初始化 DOM
     */
    Canvas.prototype.initDom = function () {
        var el = this.createDom();
        this.set('el', el);
        // 附加到容器
        var container = this.get('container');
        container.appendChild(el);
        // 设置初始宽度
        this.setDOMSize(this.get('width'), this.get('height'));
    };
    /**
     * @protected
     * 初始化绑定的事件
     */
    Canvas.prototype.initEvents = function () {
        var eventController = new event_contoller({
            canvas: this,
        });
        eventController.init();
        this.set('eventController', eventController);
    };
    /**
     * @protected
     * 初始化时间轴
     */
    Canvas.prototype.initTimeline = function () {
        var timeline = new animate_timeline(this);
        this.set('timeline', timeline);
    };
    /**
     * @protected
     * 修改画布对应的 DOM 的大小
     * @param {number} width  宽度
     * @param {number} height 高度
     */
    Canvas.prototype.setDOMSize = function (width, height) {
        var el = this.get('el');
        if (util["c" /* isBrowser */]) {
            el.style.width = width + PX_SUFFIX;
            el.style.height = height + PX_SUFFIX;
        }
    };
    // 实现接口
    Canvas.prototype.changeSize = function (width, height) {
        this.setDOMSize(width, height);
        this.set('width', width);
        this.set('height', height);
        this.onCanvasChange('changeSize');
    };
    /**
     * 获取当前的渲染引擎
     * @return {Renderer} 返回当前的渲染引擎
     */
    Canvas.prototype.getRenderer = function () {
        return this.get('renderer');
    };
    /**
     * 获取画布的 cursor 样式
     * @return {Cursor}
     */
    Canvas.prototype.getCursor = function () {
        return this.get('cursor');
    };
    /**
     * 设置画布的 cursor 样式
     * @param {Cursor} cursor  cursor 样式
     */
    Canvas.prototype.setCursor = function (cursor) {
        this.set('cursor', cursor);
        var el = this.get('el');
        if (util["c" /* isBrowser */] && el) {
            // 直接设置样式，不等待鼠标移动时再设置
            el.style.cursor = cursor;
        }
    };
    // 实现接口
    Canvas.prototype.getPointByEvent = function (ev) {
        var supportCSSTransform = this.get('supportCSSTransform');
        if (supportCSSTransform) {
            // For Firefox <= 38
            if (isFirefox && !Object(util["e" /* isNil */])(ev.layerX) && ev.layerX !== ev.offsetX) {
                return {
                    x: ev.layerX,
                    y: ev.layerY,
                };
            }
            if (!Object(util["e" /* isNil */])(ev.offsetX)) {
                // For IE6+, Firefox >= 39, Chrome, Safari, Opera
                return {
                    x: ev.offsetX,
                    y: ev.offsetY,
                };
            }
        }
        // should calculate by self for other cases, like Safari in ios
        // TODO: support CSS transform
        var _a = this.getClientByEvent(ev), clientX = _a.x, clientY = _a.y;
        return this.getPointByClient(clientX, clientY);
    };
    // 获取 touch 事件的 clientX 和 clientY 需要单独处理
    Canvas.prototype.getClientByEvent = function (ev) {
        var clientInfo = ev;
        if (ev.touches) {
            if (ev.type === 'touchend') {
                clientInfo = ev.changedTouches[0];
            }
            else {
                clientInfo = ev.touches[0];
            }
        }
        return {
            x: clientInfo.clientX,
            y: clientInfo.clientY,
        };
    };
    // 实现接口
    Canvas.prototype.getPointByClient = function (clientX, clientY) {
        var el = this.get('el');
        var bbox = el.getBoundingClientRect();
        return {
            x: clientX - bbox.left,
            y: clientY - bbox.top,
        };
    };
    // 实现接口
    Canvas.prototype.getClientByPoint = function (x, y) {
        var el = this.get('el');
        var bbox = el.getBoundingClientRect();
        return {
            x: x + bbox.left,
            y: y + bbox.top,
        };
    };
    // 实现接口
    Canvas.prototype.draw = function () { };
    /**
     * @protected
     * 销毁 DOM 容器
     */
    Canvas.prototype.removeDom = function () {
        var el = this.get('el');
        el.parentNode.removeChild(el);
    };
    /**
     * @protected
     * 清理所有的事件
     */
    Canvas.prototype.clearEvents = function () {
        var eventController = this.get('eventController');
        eventController.destroy();
    };
    Canvas.prototype.isCanvas = function () {
        return true;
    };
    Canvas.prototype.getParent = function () {
        return null;
    };
    Canvas.prototype.destroy = function () {
        var timeline = this.get('timeline');
        if (this.get('destroyed')) {
            return;
        }
        this.clear();
        // 同初始化时相反顺序调用
        if (timeline) {
            // 画布销毁时自动停止动画
            timeline.stop();
        }
        this.clearEvents();
        this.removeDom();
        _super.prototype.destroy.call(this);
    };
    return Canvas;
}(abstract_container["a" /* default */]));
/* harmony default export */ var canvas = __webpack_exports__["a"] = (canvas_Canvas);
//# sourceMappingURL=canvas.js.map

/***/ }),

/***/ "add1":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var userAgent = __webpack_require__("93b7");

// eslint-disable-next-line redos/no-vulnerable -- safe
module.exports = /(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent);


/***/ }),

/***/ "ae06":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var isArray = __webpack_require__("c806");
var isCallable = __webpack_require__("fe72");
var classof = __webpack_require__("51d7");
var toString = __webpack_require__("502b");

var push = uncurryThis([].push);

module.exports = function (replacer) {
  if (isCallable(replacer)) return replacer;
  if (!isArray(replacer)) return;
  var rawLength = replacer.length;
  var keys = [];
  for (var i = 0; i < rawLength; i++) {
    var element = replacer[i];
    if (typeof element == 'string') push(keys, element);
    else if (typeof element == 'number' || classof(element) === 'Number' || classof(element) === 'String') push(keys, toString(element));
  }
  var keysLength = keys.length;
  var root = true;
  return function (key, value) {
    if (root) {
      root = false;
      return value;
    }
    if (isArray(this)) return value;
    for (var j = 0; j < keysLength; j++) if (keys[j] === key) return value;
  };
};


/***/ }),

/***/ "ae4c":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "version", function() { return version; });
/* harmony import */ var _util_path__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("e05a");
/* harmony reexport (module object) */ __webpack_require__.d(__webpack_exports__, "PathUtil", function() { return _util_path__WEBPACK_IMPORTED_MODULE_0__; });
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("a56e");
/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_types__WEBPACK_IMPORTED_MODULE_1__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_1__) if(["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _types__WEBPACK_IMPORTED_MODULE_1__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("65a5");
/* harmony import */ var _interfaces__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_interfaces__WEBPACK_IMPORTED_MODULE_2__);
/* harmony reexport (unknown) */ for(var __WEBPACK_IMPORT_KEY__ in _interfaces__WEBPACK_IMPORTED_MODULE_2__) if(["default","Event","Base","AbstractCanvas","AbstractGroup","AbstractShape","PathUtil","getBBoxMethod","registerBBox","getTextHeight","assembleFont","isAllowCapture","multiplyVec2","invert","getOffScreenContext","registerEasing","version"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) (function(key) { __webpack_require__.d(__webpack_exports__, key, function() { return _interfaces__WEBPACK_IMPORTED_MODULE_2__[key]; }) }(__WEBPACK_IMPORT_KEY__));
/* harmony import */ var _event_graph_event__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("38d8");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Event", function() { return _event_graph_event__WEBPACK_IMPORTED_MODULE_3__["a"]; });

/* harmony import */ var _abstract_base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("947d");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Base", function() { return _abstract_base__WEBPACK_IMPORTED_MODULE_4__["a"]; });

/* harmony import */ var _abstract_canvas__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("ad37");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AbstractCanvas", function() { return _abstract_canvas__WEBPACK_IMPORTED_MODULE_5__["a"]; });

/* harmony import */ var _abstract_group__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("d54d");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AbstractGroup", function() { return _abstract_group__WEBPACK_IMPORTED_MODULE_6__["a"]; });

/* harmony import */ var _abstract_shape__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("7b4d");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "AbstractShape", function() { return _abstract_shape__WEBPACK_IMPORTED_MODULE_7__["a"]; });

/* harmony import */ var _bbox__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("ae8d");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getBBoxMethod", function() { return _bbox__WEBPACK_IMPORTED_MODULE_8__["a"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "registerBBox", function() { return _bbox__WEBPACK_IMPORTED_MODULE_8__["b"]; });

/* harmony import */ var _util_text__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("2fe8");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getTextHeight", function() { return _util_text__WEBPACK_IMPORTED_MODULE_9__["b"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "assembleFont", function() { return _util_text__WEBPACK_IMPORTED_MODULE_9__["a"]; });

/* harmony import */ var _util_util__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("7533");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "isAllowCapture", function() { return _util_util__WEBPACK_IMPORTED_MODULE_10__["b"]; });

/* harmony import */ var _util_matrix__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("456a");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "multiplyVec2", function() { return _util_matrix__WEBPACK_IMPORTED_MODULE_11__["c"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "invert", function() { return _util_matrix__WEBPACK_IMPORTED_MODULE_11__["a"]; });

/* harmony import */ var _util_offscreen__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("bf34");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "getOffScreenContext", function() { return _util_offscreen__WEBPACK_IMPORTED_MODULE_12__["a"]; });

/* harmony import */ var _animate_register__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("faf7");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "registerEasing", function() { return _animate_register__WEBPACK_IMPORTED_MODULE_13__["b"]; });

/**
 * @fileoverview G 的基础接口定义和所有的抽象类
 * @author dxq613@gmail.com
 */















var version = '0.5.11';
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "ae8d":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, "a", function() { return /* reexport */ getMethod; });
__webpack_require__.d(__webpack_exports__, "b", function() { return /* reexport */ register; });

// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/register.js
var cache = new Map();
/**
 * 注册计算包围盒的算法
 * @param type 方法名
 * @param method 方法
 */
function register(type, method) {
    cache.set(type, method);
}
/**
 * 获取计算包围盒的算法
 * @param type 方法名
 */
function getMethod(type) {
    return cache.get(type);
}
//# sourceMappingURL=register.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/rect.js
/* harmony default export */ var rect = (function (shape) {
    var attrs = shape.attr();
    var x = attrs.x, y = attrs.y, width = attrs.width, height = attrs.height;
    return {
        x: x,
        y: y,
        width: width,
        height: height,
    };
});
//# sourceMappingURL=rect.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/circle.js
/* harmony default export */ var circle = (function (shape) {
    var _a = shape.attr(), x = _a.x, y = _a.y, r = _a.r;
    return {
        x: x - r,
        y: y - r,
        width: r * 2,
        height: r * 2,
    };
});
//# sourceMappingURL=circle.js.map
// EXTERNAL MODULE: ./node_modules/_@antv_g-math@0.1.9@@antv/g-math/esm/index.js + 10 modules
var esm = __webpack_require__("4502");

// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/util.js
// 合并包围盒
function mergeBBox(bbox1, bbox2) {
    if (!bbox1 || !bbox2) {
        return bbox1 || bbox2;
    }
    return {
        minX: Math.min(bbox1.minX, bbox2.minX),
        minY: Math.min(bbox1.minY, bbox2.minY),
        maxX: Math.max(bbox1.maxX, bbox2.maxX),
        maxY: Math.max(bbox1.maxY, bbox2.maxY),
    };
}
// 合并箭头的包围盒
function mergeArrowBBox(shape, bbox) {
    var startArrowShape = shape.get('startArrowShape');
    var endArrowShape = shape.get('endArrowShape');
    var startArrowBBox = null;
    var endArrowBBox = null;
    if (startArrowShape) {
        startArrowBBox = startArrowShape.getCanvasBBox();
        bbox = mergeBBox(bbox, startArrowBBox);
    }
    if (endArrowShape) {
        endArrowBBox = endArrowShape.getCanvasBBox();
        bbox = mergeBBox(bbox, endArrowBBox);
    }
    return bbox;
}
//# sourceMappingURL=util.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/polyline.js


/* harmony default export */ var polyline = (function (shape) {
    var attrs = shape.attr();
    var points = attrs.points;
    var xArr = [];
    var yArr = [];
    for (var i = 0; i < points.length; i++) {
        var point = points[i];
        xArr.push(point[0]);
        yArr.push(point[1]);
    }
    var _a = esm["Util"].getBBoxByArray(xArr, yArr), x = _a.x, y = _a.y, width = _a.width, height = _a.height;
    var bbox = {
        minX: x,
        minY: y,
        maxX: x + width,
        maxY: y + height,
    };
    bbox = mergeArrowBBox(shape, bbox);
    return {
        x: bbox.minX,
        y: bbox.minY,
        width: bbox.maxX - bbox.minX,
        height: bbox.maxY - bbox.minY,
    };
});
//# sourceMappingURL=polyline.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/polygon.js

/* harmony default export */ var polygon = (function (shape) {
    var attrs = shape.attr();
    var points = attrs.points;
    var xArr = [];
    var yArr = [];
    for (var i = 0; i < points.length; i++) {
        var point = points[i];
        xArr.push(point[0]);
        yArr.push(point[1]);
    }
    return esm["Util"].getBBoxByArray(xArr, yArr);
});
//# sourceMappingURL=polygon.js.map
// EXTERNAL MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/util/text.js
var util_text = __webpack_require__("2fe8");

// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/text.js

/* harmony default export */ var bbox_text = (function (shape) {
    var attrs = shape.attr();
    var x = attrs.x, y = attrs.y, text = attrs.text, fontSize = attrs.fontSize, lineHeight = attrs.lineHeight;
    var font = attrs.font;
    if (!font) {
        // 如果未组装 font
        font = Object(util_text["a" /* assembleFont */])(attrs);
    }
    var width = Object(util_text["c" /* getTextWidth */])(text, font);
    var bbox;
    if (!width) {
        // 如果width不存在，四点共其实点
        bbox = {
            x: x,
            y: y,
            width: 0,
            height: 0,
        };
    }
    else {
        var textAlign = attrs.textAlign, textBaseline = attrs.textBaseline;
        var height = Object(util_text["b" /* getTextHeight */])(text, fontSize, lineHeight); // attrs.height
        // 默认左右对齐：left, 默认上下对齐 bottom
        var point = {
            x: x,
            y: y - height,
        };
        if (textAlign) {
            if (textAlign === 'end' || textAlign === 'right') {
                point.x -= width;
            }
            else if (textAlign === 'center') {
                point.x -= width / 2;
            }
        }
        if (textBaseline) {
            if (textBaseline === 'top') {
                point.y += height;
            }
            else if (textBaseline === 'middle') {
                point.y += height / 2;
            }
        }
        bbox = {
            x: point.x,
            y: point.y,
            width: width,
            height: height,
        };
    }
    return bbox;
});
//# sourceMappingURL=text.js.map
// EXTERNAL MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/index.js + 22 modules
var path_util_esm = __webpack_require__("fd5d");

// EXTERNAL MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/index.js + 110 modules
var util_esm = __webpack_require__("6d77");

// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/path.js




function getPathBox(segments, lineWidth) {
    var xArr = [];
    var yArr = [];
    var segmentsWithAngle = [];
    for (var i = 0; i < segments.length; i++) {
        var segment = segments[i];
        var currentPoint = segment.currentPoint, params = segment.params, prePoint = segment.prePoint;
        var box = void 0;
        switch (segment.command) {
            case 'Q':
                box = esm["Quad"].box(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4]);
                break;
            case 'C':
                box = esm["Cubic"].box(prePoint[0], prePoint[1], params[1], params[2], params[3], params[4], params[5], params[6]);
                break;
            case 'A':
                var arcParams = segment.arcParams;
                box = esm["Arc"].box(arcParams.cx, arcParams.cy, arcParams.rx, arcParams.ry, arcParams.xRotation, arcParams.startAngle, arcParams.endAngle);
                break;
            default:
                xArr.push(currentPoint[0]);
                yArr.push(currentPoint[1]);
                break;
        }
        if (box) {
            segment.box = box;
            xArr.push(box.x, box.x + box.width);
            yArr.push(box.y, box.y + box.height);
        }
        if (lineWidth && (segment.command === 'L' || segment.command === 'M') && segment.prePoint && segment.nextPoint) {
            segmentsWithAngle.push(segment);
        }
    }
    // bbox calculation should ignore NaN for path attribute
    // ref: https://github.com/antvis/g/issues/210
    // ref: https://github.com/antvis/G2/issues/3109
    xArr = xArr.filter(function (item) { return !Number.isNaN(item) && item !== Infinity && item !== -Infinity; });
    yArr = yArr.filter(function (item) { return !Number.isNaN(item) && item !== Infinity && item !== -Infinity; });
    var minX = Object(util_esm["min"])(xArr);
    var minY = Object(util_esm["min"])(yArr);
    var maxX = Object(util_esm["max"])(xArr);
    var maxY = Object(util_esm["max"])(yArr);
    if (segmentsWithAngle.length === 0) {
        return {
            x: minX,
            y: minY,
            width: maxX - minX,
            height: maxY - minY,
        };
    }
    for (var i = 0; i < segmentsWithAngle.length; i++) {
        var segment = segmentsWithAngle[i];
        var currentPoint = segment.currentPoint;
        var extra = void 0;
        if (currentPoint[0] === minX) {
            extra = getExtraFromSegmentWithAngle(segment, lineWidth);
            minX = minX - extra.xExtra;
        }
        else if (currentPoint[0] === maxX) {
            extra = getExtraFromSegmentWithAngle(segment, lineWidth);
            maxX = maxX + extra.xExtra;
        }
        if (currentPoint[1] === minY) {
            extra = getExtraFromSegmentWithAngle(segment, lineWidth);
            minY = minY - extra.yExtra;
        }
        else if (currentPoint[1] === maxY) {
            extra = getExtraFromSegmentWithAngle(segment, lineWidth);
            maxY = maxY + extra.yExtra;
        }
    }
    return {
        x: minX,
        y: minY,
        width: maxX - minX,
        height: maxY - minY,
    };
}
function getExtraFromSegmentWithAngle(segment, lineWidth) {
    var prePoint = segment.prePoint, currentPoint = segment.currentPoint, nextPoint = segment.nextPoint;
    var currentAndPre = Math.pow(currentPoint[0] - prePoint[0], 2) + Math.pow(currentPoint[1] - prePoint[1], 2);
    var currentAndNext = Math.pow(currentPoint[0] - nextPoint[0], 2) + Math.pow(currentPoint[1] - nextPoint[1], 2);
    var preAndNext = Math.pow(prePoint[0] - nextPoint[0], 2) + Math.pow(prePoint[1] - nextPoint[1], 2);
    // 以 currentPoint 为顶点的夹角
    var currentAngle = Math.acos((currentAndPre + currentAndNext - preAndNext) / (2 * Math.sqrt(currentAndPre) * Math.sqrt(currentAndNext)));
    // 夹角为空、 0 或 PI 时，不需要计算夹角处的额外宽度
    // 注意: 由于计算精度问题，夹角为 0 的情况计算出来的角度可能是一个很小的值，还需要判断其与 0 是否近似相等
    if (!currentAngle || Math.sin(currentAngle) === 0 || Object(util_esm["isNumberEqual"])(currentAngle, 0)) {
        return {
            xExtra: 0,
            yExtra: 0,
        };
    }
    var xAngle = Math.abs(Math.atan2(nextPoint[1] - currentPoint[1], nextPoint[0] - currentPoint[0]));
    var yAngle = Math.abs(Math.atan2(nextPoint[0] - currentPoint[0], nextPoint[1] - currentPoint[1]));
    // 将夹角转为锐角
    xAngle = xAngle > Math.PI / 2 ? Math.PI - xAngle : xAngle;
    yAngle = yAngle > Math.PI / 2 ? Math.PI - yAngle : yAngle;
    // 这里不考虑在水平和垂直方向的投影，直接使用最大差值
    // 由于上层统一加减了二分之一线宽，这里需要进行弥补
    var extra = {
        // 水平方向投影
        xExtra: Math.cos(currentAngle / 2 - xAngle) * ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0,
        // 垂直方向投影
        yExtra: Math.cos(yAngle - currentAngle / 2) * ((lineWidth / 2) * (1 / Math.sin(currentAngle / 2))) - lineWidth / 2 || 0,
    };
    return extra;
}
/* harmony default export */ var bbox_path = (function (shape) {
    var attrs = shape.attr();
    var path = attrs.path, stroke = attrs.stroke;
    var lineWidth = stroke ? attrs.lineWidth : 0; // 只有有 stroke 时，lineWidth 才生效
    var segments = shape.get('segments') || Object(path_util_esm["path2Segments"])(path);
    var _a = getPathBox(segments, lineWidth), x = _a.x, y = _a.y, width = _a.width, height = _a.height;
    var bbox = {
        minX: x,
        minY: y,
        maxX: x + width,
        maxY: y + height,
    };
    bbox = mergeArrowBBox(shape, bbox);
    return {
        x: bbox.minX,
        y: bbox.minY,
        width: bbox.maxX - bbox.minX,
        height: bbox.maxY - bbox.minY,
    };
});
//# sourceMappingURL=path.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/line.js

/* harmony default export */ var line = (function (shape) {
    var attrs = shape.attr();
    var x1 = attrs.x1, y1 = attrs.y1, x2 = attrs.x2, y2 = attrs.y2;
    var minX = Math.min(x1, x2);
    var maxX = Math.max(x1, x2);
    var minY = Math.min(y1, y2);
    var maxY = Math.max(y1, y2);
    var bbox = {
        minX: minX,
        maxX: maxX,
        minY: minY,
        maxY: maxY,
    };
    bbox = mergeArrowBBox(shape, bbox);
    return {
        x: bbox.minX,
        y: bbox.minY,
        width: bbox.maxX - bbox.minX,
        height: bbox.maxY - bbox.minY,
    };
});
//# sourceMappingURL=line.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/ellipse.js
/* harmony default export */ var ellipse = (function (shape) {
    var attrs = shape.attr();
    var x = attrs.x, y = attrs.y, rx = attrs.rx, ry = attrs.ry;
    return {
        x: x - rx,
        y: y - ry,
        width: rx * 2,
        height: ry * 2,
    };
});
//# sourceMappingURL=ellipse.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/bbox/index.js









register('rect', rect);
register('image', rect); // image 使用 rect 的包围盒计算
register('circle', circle);
register('marker', circle); // marker 使用 circle 的计算方案
register('polyline', polyline);
register('polygon', polygon);
register('text', bbox_text);
register('path', bbox_path);
register('line', line);
register('ellipse', ellipse);

//# sourceMappingURL=index.js.map

/***/ }),

/***/ "b022":
/***/ (function(module, exports, __webpack_require__) {

var cloneArrayBuffer = __webpack_require__("97a9");

/**
 * Creates a clone of `typedArray`.
 *
 * @private
 * @param {Object} typedArray The typed array to clone.
 * @param {boolean} [isDeep] Specify a deep clone.
 * @returns {Object} Returns the cloned typed array.
 */
function cloneTypedArray(typedArray, isDeep) {
  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;
  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);
}

module.exports = cloneTypedArray;


/***/ }),

/***/ "b0cb":
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__("dc9b"),
    isObjectLike = __webpack_require__("d92c");

/** `Object#toString` result references. */
var argsTag = '[object Arguments]';

/**
 * The base implementation of `_.isArguments`.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an `arguments` object,
 */
function baseIsArguments(value) {
  return isObjectLike(value) && baseGetTag(value) == argsTag;
}

module.exports = baseIsArguments;


/***/ }),

/***/ "b155":
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__("82c6");

/** Built-in value references. */
var Symbol = root.Symbol;

module.exports = Symbol;


/***/ }),

/***/ "b26d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.parsePath = exports.parseRadius = void 0;
var util_1 = __webpack_require__("6d77");
var regexTags = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi;
var regexDot = /[^\s,]+/gi;
function parseRadius(radius) {
    var r1 = 0;
    var r2 = 0;
    var r3 = 0;
    var r4 = 0;
    if (util_1.isArray(radius)) {
        if (radius.length === 1) {
            r1 = r2 = r3 = r4 = radius[0];
        }
        else if (radius.length === 2) {
            r1 = r3 = radius[0];
            r2 = r4 = radius[1];
        }
        else if (radius.length === 3) {
            r1 = radius[0];
            r2 = r4 = radius[1];
            r3 = radius[2];
        }
        else {
            r1 = radius[0];
            r2 = radius[1];
            r3 = radius[2];
            r4 = radius[3];
        }
    }
    else {
        r1 = r2 = r3 = r4 = radius;
    }
    return {
        r1: r1,
        r2: r2,
        r3: r3,
        r4: r4,
    };
}
exports.parseRadius = parseRadius;
function parsePath(path) {
    path = path || [];
    if (util_1.isArray(path)) {
        return path;
    }
    if (util_1.isString(path)) {
        path = path.match(regexTags);
        util_1.each(path, function (item, index) {
            item = item.match(regexDot);
            if (item[0].length > 1) {
                var tag = item[0].charAt(0);
                item.splice(1, 0, item[0].substr(1));
                item[0] = tag;
            }
            util_1.each(item, function (sub, i) {
                if (!isNaN(sub)) {
                    item[i] = +sub;
                }
            });
            path[index] = item;
        });
        return path;
    }
}
exports.parsePath = parsePath;
//# sourceMappingURL=format.js.map

/***/ }),

/***/ "b303":
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__("b155"),
    isArguments = __webpack_require__("54bf"),
    isArray = __webpack_require__("f868");

/** Built-in value references. */
var spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;

/**
 * Checks if `value` is a flattenable `arguments` object or array.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.
 */
function isFlattenable(value) {
  return isArray(value) || isArguments(value) ||
    !!(spreadableSymbol && value && value[spreadableSymbol]);
}

module.exports = isFlattenable;


/***/ }),

/***/ "b376":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_BIND = __webpack_require__("48d3");

var FunctionPrototype = Function.prototype;
var apply = FunctionPrototype.apply;
var call = FunctionPrototype.call;

// eslint-disable-next-line es/no-reflect -- safe
module.exports = typeof Reflect == 'object' && Reflect.apply || (NATIVE_BIND ? call.bind(apply) : function () {
  return call.apply(apply, arguments);
});


/***/ }),

/***/ "b462":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = {};


/***/ }),

/***/ "b48b":
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__("0034");

var defineProperty = (function() {
  try {
    var func = getNative(Object, 'defineProperty');
    func({}, '', {});
    return func;
  } catch (e) {}
}());

module.exports = defineProperty;


/***/ }),

/***/ "b4b8":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _deepMix = _interopRequireDefault(__webpack_require__("e9ad"));

var _each = _interopRequireDefault(__webpack_require__("bc91"));

var _wrapBehavior = _interopRequireDefault(__webpack_require__("1f6e"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var PluginBase =
/** @class */
function () {
  /**
   * 插件基类的构造函数
   * @param cfgs 插件的配置项
   */
  function PluginBase(cfgs) {
    this._cfgs = (0, _deepMix.default)(this.getDefaultCfgs(), cfgs);
    this._events = {};
    this.destroyed = false;
  }
  /**
   * 获取默认的插件配置
   */


  PluginBase.prototype.getDefaultCfgs = function () {
    return {};
  };
  /**
   * 初始化插件
   * @param graph Graph 实例
   */


  PluginBase.prototype.initPlugin = function (graph) {
    var self = this;
    self.set('graph', graph);
    var events = self.getEvents();
    var bindEvents = {};
    (0, _each.default)(events, function (v, k) {
      var event = (0, _wrapBehavior.default)(self, v);
      bindEvents[k] = event;
      graph.on(k, event);
    });
    this._events = bindEvents;
    this.init();
  };
  /**
   * 初始化方法，供子类实现
   */


  PluginBase.prototype.init = function () {};
  /**
   * 获取插件中的事件和事件处理方法，供子类实现
   */


  PluginBase.prototype.getEvents = function () {
    return {};
  };
  /**
   * 获取配置项中的某个值
   * @param key 键值
   */


  PluginBase.prototype.get = function (key) {
    return this._cfgs[key];
  };
  /**
   * 将指定的值存储到 cfgs 中
   * @param key 键值
   * @param val 设置的值
   */


  PluginBase.prototype.set = function (key, val) {
    this._cfgs[key] = val;
  };
  /**
   * 销毁方法，供子类复写
   */


  PluginBase.prototype.destroy = function () {};
  /**
   * 销毁插件
   */


  PluginBase.prototype.destroyPlugin = function () {
    this.destroy();
    var graph = this.get('graph');
    var events = this._events;
    (0, _each.default)(events, function (v, k) {
      graph.off(k, v);
    });
    this._events = null;
    this._cfgs = null;
    this.destroyed = true;
  };

  return PluginBase;
}();

var _default = PluginBase;
exports.default = _default;

/***/ }),

/***/ "b4c9":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Symbols = {
    // 圆
    circle: function (x, y, r) {
        return [
            ['M', x, y],
            ['m', -r, 0],
            ['a', r, r, 0, 1, 0, r * 2, 0],
            ['a', r, r, 0, 1, 0, -r * 2, 0],
        ];
    },
    // 正方形
    square: function (x, y, r) {
        return [['M', x - r, y - r], ['L', x + r, y - r], ['L', x + r, y + r], ['L', x - r, y + r], ['Z']];
    },
    // 菱形
    diamond: function (x, y, r) {
        return [['M', x - r, y], ['L', x, y - r], ['L', x + r, y], ['L', x, y + r], ['Z']];
    },
    // 三角形
    triangle: function (x, y, r) {
        var diffY = r * Math.sin((1 / 3) * Math.PI);
        return [['M', x - r, y + diffY], ['L', x, y - diffY], ['L', x + r, y + diffY], ['z']];
    },
    // 倒三角形
    triangleDown: function (x, y, r) {
        var diffY = r * Math.sin((1 / 3) * Math.PI);
        return [['M', x - r, y - diffY], ['L', x + r, y - diffY], ['L', x, y + diffY], ['Z']];
    },
};
exports.default = {
    get: function (type) {
        return Symbols[type];
    },
    register: function (type, func) {
        Symbols[type] = func;
    },
    remove: function (type) {
        delete Symbols[type];
    },
    getAll: function () {
        return Symbols;
    },
};
//# sourceMappingURL=symbols.js.map

/***/ }),

/***/ "b56a":
/***/ (function(module, exports, __webpack_require__) {

var getMapData = __webpack_require__("7a83");

/**
 * Removes `key` and its value from the map.
 *
 * @private
 * @name delete
 * @memberOf MapCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function mapCacheDelete(key) {
  var result = getMapData(this, key)['delete'](key);
  this.size -= result ? 1 : 0;
  return result;
}

module.exports = mapCacheDelete;


/***/ }),

/***/ "b578":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var DESCRIPTORS = __webpack_require__("98c8");

// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Avoid NodeJS experimental warning
module.exports = function (name) {
  if (!DESCRIPTORS) return globalThis[name];
  var descriptor = getOwnPropertyDescriptor(globalThis, name);
  return descriptor && descriptor.value;
};


/***/ }),

/***/ "b604":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var wellKnownSymbol = __webpack_require__("9a0b");

exports.f = wellKnownSymbol;


/***/ }),

/***/ "b680":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var globalThis = __webpack_require__("92e2");
var call = __webpack_require__("ded0");
var uncurryThis = __webpack_require__("1043");
var IS_PURE = __webpack_require__("6e09");
var DESCRIPTORS = __webpack_require__("98c8");
var NATIVE_SYMBOL = __webpack_require__("1942");
var fails = __webpack_require__("e835");
var hasOwn = __webpack_require__("85ed");
var isPrototypeOf = __webpack_require__("d519");
var anObject = __webpack_require__("9774");
var toIndexedObject = __webpack_require__("a330");
var toPropertyKey = __webpack_require__("bc9d");
var $toString = __webpack_require__("502b");
var createPropertyDescriptor = __webpack_require__("6638");
var nativeObjectCreate = __webpack_require__("6943");
var objectKeys = __webpack_require__("90a0");
var getOwnPropertyNamesModule = __webpack_require__("8c7b");
var getOwnPropertyNamesExternal = __webpack_require__("e512");
var getOwnPropertySymbolsModule = __webpack_require__("a826");
var getOwnPropertyDescriptorModule = __webpack_require__("1c2b");
var definePropertyModule = __webpack_require__("80ea");
var definePropertiesModule = __webpack_require__("c56d");
var propertyIsEnumerableModule = __webpack_require__("05ca");
var defineBuiltIn = __webpack_require__("f303");
var defineBuiltInAccessor = __webpack_require__("c0b5");
var shared = __webpack_require__("f823");
var sharedKey = __webpack_require__("e152");
var hiddenKeys = __webpack_require__("b920");
var uid = __webpack_require__("de7c");
var wellKnownSymbol = __webpack_require__("9a0b");
var wrappedWellKnownSymbolModule = __webpack_require__("b604");
var defineWellKnownSymbol = __webpack_require__("158b");
var defineSymbolToPrimitive = __webpack_require__("f763");
var setToStringTag = __webpack_require__("5836");
var InternalStateModule = __webpack_require__("d987");
var $forEach = __webpack_require__("308c").forEach;

var HIDDEN = sharedKey('hidden');
var SYMBOL = 'Symbol';
var PROTOTYPE = 'prototype';

var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(SYMBOL);

var ObjectPrototype = Object[PROTOTYPE];
var $Symbol = globalThis.Symbol;
var SymbolPrototype = $Symbol && $Symbol[PROTOTYPE];
var RangeError = globalThis.RangeError;
var TypeError = globalThis.TypeError;
var QObject = globalThis.QObject;
var nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;
var nativeDefineProperty = definePropertyModule.f;
var nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;
var nativePropertyIsEnumerable = propertyIsEnumerableModule.f;
var push = uncurryThis([].push);

var AllSymbols = shared('symbols');
var ObjectPrototypeSymbols = shared('op-symbols');
var WellKnownSymbolsStore = shared('wks');

// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173
var USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;

// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687
var fallbackDefineProperty = function (O, P, Attributes) {
  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);
  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];
  nativeDefineProperty(O, P, Attributes);
  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {
    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);
  }
};

var setSymbolDescriptor = DESCRIPTORS && fails(function () {
  return nativeObjectCreate(nativeDefineProperty({}, 'a', {
    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }
  })).a !== 7;
}) ? fallbackDefineProperty : nativeDefineProperty;

var wrap = function (tag, description) {
  var symbol = AllSymbols[tag] = nativeObjectCreate(SymbolPrototype);
  setInternalState(symbol, {
    type: SYMBOL,
    tag: tag,
    description: description
  });
  if (!DESCRIPTORS) symbol.description = description;
  return symbol;
};

var $defineProperty = function defineProperty(O, P, Attributes) {
  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);
  anObject(O);
  var key = toPropertyKey(P);
  anObject(Attributes);
  if (hasOwn(AllSymbols, key)) {
    if (!Attributes.enumerable) {
      if (!hasOwn(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, nativeObjectCreate(null)));
      O[HIDDEN][key] = true;
    } else {
      if (hasOwn(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;
      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });
    } return setSymbolDescriptor(O, key, Attributes);
  } return nativeDefineProperty(O, key, Attributes);
};

var $defineProperties = function defineProperties(O, Properties) {
  anObject(O);
  var properties = toIndexedObject(Properties);
  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));
  $forEach(keys, function (key) {
    if (!DESCRIPTORS || call($propertyIsEnumerable, properties, key)) $defineProperty(O, key, properties[key]);
  });
  return O;
};

var $create = function create(O, Properties) {
  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);
};

var $propertyIsEnumerable = function propertyIsEnumerable(V) {
  var P = toPropertyKey(V);
  var enumerable = call(nativePropertyIsEnumerable, this, P);
  if (this === ObjectPrototype && hasOwn(AllSymbols, P) && !hasOwn(ObjectPrototypeSymbols, P)) return false;
  return enumerable || !hasOwn(this, P) || !hasOwn(AllSymbols, P) || hasOwn(this, HIDDEN) && this[HIDDEN][P]
    ? enumerable : true;
};

var $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {
  var it = toIndexedObject(O);
  var key = toPropertyKey(P);
  if (it === ObjectPrototype && hasOwn(AllSymbols, key) && !hasOwn(ObjectPrototypeSymbols, key)) return;
  var descriptor = nativeGetOwnPropertyDescriptor(it, key);
  if (descriptor && hasOwn(AllSymbols, key) && !(hasOwn(it, HIDDEN) && it[HIDDEN][key])) {
    descriptor.enumerable = true;
  }
  return descriptor;
};

var $getOwnPropertyNames = function getOwnPropertyNames(O) {
  var names = nativeGetOwnPropertyNames(toIndexedObject(O));
  var result = [];
  $forEach(names, function (key) {
    if (!hasOwn(AllSymbols, key) && !hasOwn(hiddenKeys, key)) push(result, key);
  });
  return result;
};

var $getOwnPropertySymbols = function (O) {
  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;
  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));
  var result = [];
  $forEach(names, function (key) {
    if (hasOwn(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || hasOwn(ObjectPrototype, key))) {
      push(result, AllSymbols[key]);
    }
  });
  return result;
};

// `Symbol` constructor
// https://tc39.es/ecma262/#sec-symbol-constructor
if (!NATIVE_SYMBOL) {
  $Symbol = function Symbol() {
    if (isPrototypeOf(SymbolPrototype, this)) throw new TypeError('Symbol is not a constructor');
    var description = !arguments.length || arguments[0] === undefined ? undefined : $toString(arguments[0]);
    var tag = uid(description);
    var setter = function (value) {
      var $this = this === undefined ? globalThis : this;
      if ($this === ObjectPrototype) call(setter, ObjectPrototypeSymbols, value);
      if (hasOwn($this, HIDDEN) && hasOwn($this[HIDDEN], tag)) $this[HIDDEN][tag] = false;
      var descriptor = createPropertyDescriptor(1, value);
      try {
        setSymbolDescriptor($this, tag, descriptor);
      } catch (error) {
        if (!(error instanceof RangeError)) throw error;
        fallbackDefineProperty($this, tag, descriptor);
      }
    };
    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });
    return wrap(tag, description);
  };

  SymbolPrototype = $Symbol[PROTOTYPE];

  defineBuiltIn(SymbolPrototype, 'toString', function toString() {
    return getInternalState(this).tag;
  });

  defineBuiltIn($Symbol, 'withoutSetter', function (description) {
    return wrap(uid(description), description);
  });

  propertyIsEnumerableModule.f = $propertyIsEnumerable;
  definePropertyModule.f = $defineProperty;
  definePropertiesModule.f = $defineProperties;
  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;
  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;
  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;

  wrappedWellKnownSymbolModule.f = function (name) {
    return wrap(wellKnownSymbol(name), name);
  };

  if (DESCRIPTORS) {
    // https://github.com/tc39/proposal-Symbol-description
    defineBuiltInAccessor(SymbolPrototype, 'description', {
      configurable: true,
      get: function description() {
        return getInternalState(this).description;
      }
    });
    if (!IS_PURE) {
      defineBuiltIn(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });
    }
  }
}

$({ global: true, constructor: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {
  Symbol: $Symbol
});

$forEach(objectKeys(WellKnownSymbolsStore), function (name) {
  defineWellKnownSymbol(name);
});

$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {
  useSetter: function () { USE_SETTER = true; },
  useSimple: function () { USE_SETTER = false; }
});

$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {
  // `Object.create` method
  // https://tc39.es/ecma262/#sec-object.create
  create: $create,
  // `Object.defineProperty` method
  // https://tc39.es/ecma262/#sec-object.defineproperty
  defineProperty: $defineProperty,
  // `Object.defineProperties` method
  // https://tc39.es/ecma262/#sec-object.defineproperties
  defineProperties: $defineProperties,
  // `Object.getOwnPropertyDescriptor` method
  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors
  getOwnPropertyDescriptor: $getOwnPropertyDescriptor
});

$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {
  // `Object.getOwnPropertyNames` method
  // https://tc39.es/ecma262/#sec-object.getownpropertynames
  getOwnPropertyNames: $getOwnPropertyNames
});

// `Symbol.prototype[@@toPrimitive]` method
// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive
defineSymbolToPrimitive();

// `Symbol.prototype[@@toStringTag]` property
// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag
setToStringTag($Symbol, SYMBOL);

hiddenKeys[HIDDEN] = true;


/***/ }),

/***/ "b6ee":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var wellKnownSymbol = __webpack_require__("9a0b");
var create = __webpack_require__("6943");
var defineProperty = __webpack_require__("80ea").f;

var UNSCOPABLES = wellKnownSymbol('unscopables');
var ArrayPrototype = Array.prototype;

// Array.prototype[@@unscopables]
// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables
if (ArrayPrototype[UNSCOPABLES] === undefined) {
  defineProperty(ArrayPrototype, UNSCOPABLES, {
    configurable: true,
    value: create(null)
  });
}

// add a key to Array.prototype[@@unscopables]
module.exports = function (key) {
  ArrayPrototype[UNSCOPABLES][key] = true;
};


/***/ }),

/***/ "b7f4":
/***/ (function(module, exports) {

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/**
 * Converts `value` to a string using `Object.prototype.toString`.
 *
 * @private
 * @param {*} value The value to convert.
 * @returns {string} Returns the converted string.
 */
function objectToString(value) {
  return nativeObjectToString.call(value);
}

module.exports = objectToString;


/***/ }),

/***/ "b825":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__("4fed");

module.exports = getBuiltIn('document', 'documentElement');


/***/ }),

/***/ "b885":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");

module.exports = globalThis.Promise;


/***/ }),

/***/ "b920":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = {};


/***/ }),

/***/ "b98d":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return EPSILON; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ARRAY_TYPE; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return RANDOM; });
/* unused harmony export setMatrixArrayType */
/* unused harmony export toRadian */
/* unused harmony export equals */
/**
 * Common utilities
 * @module glMatrix
 */
// Configuration Constants
var EPSILON = 0.000001;
var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;
var RANDOM = Math.random;
/**
 * Sets the type of array used when creating new vectors and matrices
 *
 * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array
 */

function setMatrixArrayType(type) {
  ARRAY_TYPE = type;
}
var degree = Math.PI / 180;
/**
 * Convert Degree To Radian
 *
 * @param {Number} a Angle in Degrees
 */

function toRadian(a) {
  return a * degree;
}
/**
 * Tests whether or not the arguments have approximately the same value, within an absolute
 * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less
 * than or equal to 1.0, and a relative tolerance is used for larger values)
 *
 * @param {Number} a The first number to test.
 * @param {Number} b The second number to test.
 * @returns {Boolean} True if the numbers are approximately equal, false otherwise.
 */

function equals(a, b) {
  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));
}
if (!Math.hypot) Math.hypot = function () {
  var y = 0,
      i = arguments.length;

  while (i--) {
    y += arguments[i] * arguments[i];
  }

  return Math.sqrt(y);
};

/***/ }),

/***/ "b9b2":
/***/ (function(module, exports) {

/** Used to compose unicode character classes. */
var rsAstralRange = '\\ud800-\\udfff',
    rsComboMarksRange = '\\u0300-\\u036f',
    reComboHalfMarksRange = '\\ufe20-\\ufe2f',
    rsComboSymbolsRange = '\\u20d0-\\u20ff',
    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,
    rsVarRange = '\\ufe0e\\ufe0f';

/** Used to compose unicode capture groups. */
var rsAstral = '[' + rsAstralRange + ']',
    rsCombo = '[' + rsComboRange + ']',
    rsFitz = '\\ud83c[\\udffb-\\udfff]',
    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',
    rsNonAstral = '[^' + rsAstralRange + ']',
    rsRegional = '(?:\\ud83c[\\udde6-\\uddff]){2}',
    rsSurrPair = '[\\ud800-\\udbff][\\udc00-\\udfff]',
    rsZWJ = '\\u200d';

/** Used to compose unicode regexes. */
var reOptMod = rsModifier + '?',
    rsOptVar = '[' + rsVarRange + ']?',
    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',
    rsSeq = rsOptVar + reOptMod + rsOptJoin,
    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';

/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */
var reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');

/**
 * Converts a Unicode `string` to an array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the converted array.
 */
function unicodeToArray(string) {
  return string.match(reUnicode) || [];
}

module.exports = unicodeToArray;


/***/ }),

/***/ "bbc6":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isObject = __webpack_require__("d2cb");

module.exports = function (argument) {
  return isObject(argument) || argument === null;
};


/***/ }),

/***/ "bc91":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var is_array_1 = __webpack_require__("a07d");
var is_object_1 = __webpack_require__("8a25");
function each(elements, func) {
    if (!elements) {
        return;
    }
    var rst;
    if (is_array_1.default(elements)) {
        for (var i = 0, len = elements.length; i < len; i++) {
            rst = func(elements[i], i);
            if (rst === false) {
                break;
            }
        }
    }
    else if (is_object_1.default(elements)) {
        for (var k in elements) {
            if (elements.hasOwnProperty(k)) {
                rst = func(elements[k], k);
                if (rst === false) {
                    break;
                }
            }
        }
    }
}
exports.default = each;
//# sourceMappingURL=each.js.map

/***/ }),

/***/ "bc9d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var toPrimitive = __webpack_require__("6393");
var isSymbol = __webpack_require__("ef41");

// `ToPropertyKey` abstract operation
// https://tc39.es/ecma262/#sec-topropertykey
module.exports = function (argument) {
  var key = toPrimitive(argument, 'string');
  return isSymbol(key) ? key : key + '';
};


/***/ }),

/***/ "bea5":
/***/ (function(module, exports) {

/**
 * Creates a function that returns `value`.
 *
 * @static
 * @memberOf _
 * @since 2.4.0
 * @category Util
 * @param {*} value The value to return from the new function.
 * @returns {Function} Returns the new constant function.
 * @example
 *
 * var objects = _.times(2, _.constant({ 'a': 1 }));
 *
 * console.log(objects);
 * // => [{ 'a': 1 }, { 'a': 1 }]
 *
 * console.log(objects[0] === objects[1]);
 * // => true
 */
function constant(value) {
  return function() {
    return value;
  };
}

module.exports = constant;


/***/ }),

/***/ "bf34":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return getOffScreenContext; });
// 全局设置一个唯一离屏的 ctx，用于计算 isPointInPath
var offScreenCtx = null;
function getOffScreenContext() {
    if (!offScreenCtx) {
        var canvas = document.createElement('canvas');
        canvas.width = 1;
        canvas.height = 1;
        offScreenCtx = canvas.getContext('2d');
    }
    return offScreenCtx;
}
//# sourceMappingURL=offscreen.js.map

/***/ }),

/***/ "c015":
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__("b155");

/** Used for built-in method references. */
var objectProto = Object.prototype;

/** Used to check objects for own properties. */
var hasOwnProperty = objectProto.hasOwnProperty;

/**
 * Used to resolve the
 * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)
 * of values.
 */
var nativeObjectToString = objectProto.toString;

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the raw `toStringTag`.
 */
function getRawTag(value) {
  var isOwn = hasOwnProperty.call(value, symToStringTag),
      tag = value[symToStringTag];

  try {
    value[symToStringTag] = undefined;
    var unmasked = true;
  } catch (e) {}

  var result = nativeObjectToString.call(value);
  if (unmasked) {
    if (isOwn) {
      value[symToStringTag] = tag;
    } else {
      delete value[symToStringTag];
    }
  }
  return result;
}

module.exports = getRawTag;


/***/ }),

/***/ "c0b5":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var makeBuiltIn = __webpack_require__("40cb");
var defineProperty = __webpack_require__("80ea");

module.exports = function (target, name, descriptor) {
  if (descriptor.get) makeBuiltIn(descriptor.get, name, { getter: true });
  if (descriptor.set) makeBuiltIn(descriptor.set, name, { setter: true });
  return defineProperty.f(target, name, descriptor);
};


/***/ }),

/***/ "c111":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");
var globalThis = __webpack_require__("92e2");

// babel-minify and Closure Compiler transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError
var $RegExp = globalThis.RegExp;

var UNSUPPORTED_Y = fails(function () {
  var re = $RegExp('a', 'y');
  re.lastIndex = 2;
  return re.exec('abcd') !== null;
});

// UC Browser bug
// https://github.com/zloirock/core-js/issues/1008
var MISSED_STICKY = UNSUPPORTED_Y || fails(function () {
  return !$RegExp('a', 'y').sticky;
});

var BROKEN_CARET = UNSUPPORTED_Y || fails(function () {
  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687
  var re = $RegExp('^r', 'gy');
  re.lastIndex = 2;
  return re.exec('str') !== null;
});

module.exports = {
  BROKEN_CARET: BROKEN_CARET,
  MISSED_STICKY: MISSED_STICKY,
  UNSUPPORTED_Y: UNSUPPORTED_Y
};


/***/ }),

/***/ "c17e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var g_math_1 = __webpack_require__("4502");
var util_1 = __webpack_require__("6d77");
var base_1 = __webpack_require__("98ae");
var path_util_1 = __webpack_require__("fd5d");
var draw_1 = __webpack_require__("a394");
var point_in_path_1 = __webpack_require__("6248");
var polygon_1 = __webpack_require__("4ac6");
var path_1 = __webpack_require__("33ac");
var ArrowUtil = __webpack_require__("a5a4");
// 是否在多个多边形内部
function isInPolygons(polygons, x, y) {
    var isHit = false;
    for (var i = 0; i < polygons.length; i++) {
        var points = polygons[i];
        isHit = polygon_1.default(points, x, y);
        if (isHit) {
            break;
        }
    }
    return isHit;
}
var Path = /** @class */ (function (_super) {
    tslib_1.__extends(Path, _super);
    function Path() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Path.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { startArrow: false, endArrow: false });
    };
    Path.prototype.initAttrs = function (attrs) {
        this._setPathArr(attrs.path);
        this.setArrow();
    };
    // 更新属性时，检测是否更改了 path
    Path.prototype.onAttrChange = function (name, value, originValue) {
        _super.prototype.onAttrChange.call(this, name, value, originValue);
        if (name === 'path') {
            this._setPathArr(value);
        }
        // 由于箭头的绘制依赖于 line 的诸多 attrs，因此这里不再对每个 attr 进行判断，attr 每次变化都会影响箭头的更新
        this.setArrow();
    };
    // 将 path 转换成绝对路径
    Path.prototype._setPathArr = function (path) {
        // 转换 path 的格式
        this.attrs.path = path_util_1.path2Absolute(path);
        var hasArc = path_1.default.hasArc(path);
        // 为了加速 path 的绘制、拾取和计算，这个地方可以缓存很多东西
        // 这些缓存都是第一次需要时计算和存储，虽然增加了复杂度，但是频繁调用的方法，性能有很大提升
        this.set('hasArc', hasArc);
        this.set('paramsCache', {}); // 清理缓存
        this.set('segments', null); // 延迟生成 path，在动画场景下可能不会有拾取
        this.set('curve', null);
        this.set('tCache', null);
        this.set('totalLength', null);
    };
    Path.prototype.getSegments = function () {
        var segments = this.get('segements');
        if (!segments) {
            segments = path_util_1.path2Segments(this.attr('path'));
            this.set('segments', segments);
        }
        return segments;
    };
    Path.prototype.setArrow = function () {
        var attrs = this.attr();
        var startArrow = attrs.startArrow, endArrow = attrs.endArrow;
        if (startArrow) {
            var tangent = this.getStartTangent();
            ArrowUtil.addStartArrow(this, attrs, tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1]);
        }
        if (endArrow) {
            var tangent = this.getEndTangent();
            ArrowUtil.addEndArrow(this, attrs, tangent[0][0], tangent[0][1], tangent[1][0], tangent[1][1]);
        }
    };
    Path.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {
        var segments = this.getSegments();
        var hasArc = this.get('hasArc');
        var isHit = false;
        if (isStroke) {
            var length_1 = this.getTotalLength();
            isHit = path_1.default.isPointInStroke(segments, lineWidth, x, y, length_1);
        }
        if (!isHit && isFill) {
            if (hasArc) {
                // 存在曲线时，暂时使用 canvas 的 api 计算，后续可以进行多边形切割
                isHit = point_in_path_1.default(this, x, y);
            }
            else {
                var path = this.attr('path');
                var extractResutl = path_1.default.extractPolygons(path);
                // 提取出来的多边形包含闭合的和非闭合的，在这里统一按照多边形处理
                isHit = isInPolygons(extractResutl.polygons, x, y) || isInPolygons(extractResutl.polylines, x, y);
            }
        }
        return isHit;
    };
    Path.prototype.createPath = function (context) {
        var attrs = this.attr();
        var paramsCache = this.get('paramsCache'); // 由于计算圆弧的参数成本很大，所以要缓存
        draw_1.drawPath(this, context, attrs, paramsCache);
    };
    Path.prototype.afterDrawPath = function (context) {
        var startArrowShape = this.get('startArrowShape');
        var endArrowShape = this.get('endArrowShape');
        if (startArrowShape) {
            startArrowShape.draw(context);
        }
        if (endArrowShape) {
            endArrowShape.draw(context);
        }
    };
    /**
     * Get total length of path
     * @return {number} length
     */
    Path.prototype.getTotalLength = function () {
        var totalLength = this.get('totalLength');
        if (!util_1.isNil(totalLength)) {
            return totalLength;
        }
        this._calculateCurve();
        this._setTcache();
        return this.get('totalLength');
    };
    /**
     * Get point according to ratio
     * @param {number} ratio
     * @return {Point} point
     */
    Path.prototype.getPoint = function (ratio) {
        var tCache = this.get('tCache');
        if (!tCache) {
            this._calculateCurve();
            this._setTcache();
            tCache = this.get('tCache');
        }
        var subt;
        var index;
        var curve = this.get('curve');
        if (!tCache || tCache.length === 0) {
            if (curve) {
                return {
                    x: curve[0][1],
                    y: curve[0][2],
                };
            }
            return null;
        }
        util_1.each(tCache, function (v, i) {
            if (ratio >= v[0] && ratio <= v[1]) {
                subt = (ratio - v[0]) / (v[1] - v[0]);
                index = i;
            }
        });
        var seg = curve[index];
        if (util_1.isNil(seg) || util_1.isNil(index)) {
            return null;
        }
        var l = seg.length;
        var nextSeg = curve[index + 1];
        return g_math_1.Cubic.pointAt(seg[l - 2], seg[l - 1], nextSeg[1], nextSeg[2], nextSeg[3], nextSeg[4], nextSeg[5], nextSeg[6], subt);
    };
    Path.prototype._calculateCurve = function () {
        var path = this.attr().path;
        this.set('curve', path_1.default.pathToCurve(path));
    };
    Path.prototype._setTcache = function () {
        var totalLength = 0;
        var tempLength = 0;
        // 每段 curve 对应起止点的长度比例列表，形如: [[0, 0.25], [0.25, 0.6]. [0.6, 0.9], [0.9, 1]]
        var tCache = [];
        var segmentT;
        var segmentL;
        var segmentN;
        var l;
        var curve = this.get('curve');
        if (!curve) {
            return;
        }
        util_1.each(curve, function (segment, i) {
            segmentN = curve[i + 1];
            l = segment.length;
            if (segmentN) {
                totalLength +=
                    g_math_1.Cubic.length(segment[l - 2], segment[l - 1], segmentN[1], segmentN[2], segmentN[3], segmentN[4], segmentN[5], segmentN[6]) || 0;
            }
        });
        this.set('totalLength', totalLength);
        if (totalLength === 0) {
            this.set('tCache', []);
            return;
        }
        util_1.each(curve, function (segment, i) {
            segmentN = curve[i + 1];
            l = segment.length;
            if (segmentN) {
                segmentT = [];
                segmentT[0] = tempLength / totalLength;
                segmentL = g_math_1.Cubic.length(segment[l - 2], segment[l - 1], segmentN[1], segmentN[2], segmentN[3], segmentN[4], segmentN[5], segmentN[6]);
                // 当 path 不连续时，segmentL 可能为空，为空时需要作为 0 处理
                tempLength += segmentL || 0;
                segmentT[1] = tempLength / totalLength;
                tCache.push(segmentT);
            }
        });
        this.set('tCache', tCache);
    };
    /**
     * Get start tangent vector
     * @return {Array}
     */
    Path.prototype.getStartTangent = function () {
        var segments = this.getSegments();
        var result;
        if (segments.length > 1) {
            var startPoint = segments[0].currentPoint;
            var endPoint = segments[1].currentPoint;
            var tangent = segments[1].startTangent;
            result = [];
            if (tangent) {
                result.push([startPoint[0] - tangent[0], startPoint[1] - tangent[1]]);
                result.push([startPoint[0], startPoint[1]]);
            }
            else {
                result.push([endPoint[0], endPoint[1]]);
                result.push([startPoint[0], startPoint[1]]);
            }
        }
        return result;
    };
    /**
     * Get end tangent vector
     * @return {Array}
     */
    Path.prototype.getEndTangent = function () {
        var segments = this.getSegments();
        var length = segments.length;
        var result;
        if (length > 1) {
            var startPoint = segments[length - 2].currentPoint;
            var endPoint = segments[length - 1].currentPoint;
            var tangent = segments[length - 1].endTangent;
            result = [];
            if (tangent) {
                result.push([endPoint[0] - tangent[0], endPoint[1] - tangent[1]]);
                result.push([endPoint[0], endPoint[1]]);
            }
            else {
                result.push([startPoint[0], startPoint[1]]);
                result.push([endPoint[0], endPoint[1]]);
            }
        }
        return result;
    };
    return Path;
}(base_1.default));
exports.default = Path;
//# sourceMappingURL=path.js.map

/***/ }),

/***/ "c185":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var fails = __webpack_require__("e835");
var isCallable = __webpack_require__("fe72");
var classof = __webpack_require__("e013");
var getBuiltIn = __webpack_require__("4fed");
var inspectSource = __webpack_require__("c89e");

var noop = function () { /* empty */ };
var construct = getBuiltIn('Reflect', 'construct');
var constructorRegExp = /^\s*(?:class|function)\b/;
var exec = uncurryThis(constructorRegExp.exec);
var INCORRECT_TO_STRING = !constructorRegExp.test(noop);

var isConstructorModern = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  try {
    construct(noop, [], argument);
    return true;
  } catch (error) {
    return false;
  }
};

var isConstructorLegacy = function isConstructor(argument) {
  if (!isCallable(argument)) return false;
  switch (classof(argument)) {
    case 'AsyncFunction':
    case 'GeneratorFunction':
    case 'AsyncGeneratorFunction': return false;
  }
  try {
    // we can't check .prototype since constructors produced by .bind haven't it
    // `Function#toString` throws on some built-it function in some legacy engines
    // (for example, `DOMQuad` and similar in FF41-)
    return INCORRECT_TO_STRING || !!exec(constructorRegExp, inspectSource(argument));
  } catch (error) {
    return true;
  }
};

isConstructorLegacy.sham = true;

// `IsConstructor` abstract operation
// https://tc39.es/ecma262/#sec-isconstructor
module.exports = !construct || fails(function () {
  var called;
  return isConstructorModern(isConstructorModern.call)
    || !isConstructorModern(Object)
    || !isConstructorModern(function () { called = true; })
    || called;
}) ? isConstructorLegacy : isConstructorModern;


/***/ }),

/***/ "c198":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview arrow
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__("6d77");
var dom_1 = __webpack_require__("7431");
var Arrow = /** @class */ (function () {
    function Arrow(attrs, type) {
        this.cfg = {};
        var el = dom_1.createSVGElement('marker');
        var id = util_1.uniqueId('marker_');
        el.setAttribute('id', id);
        var shape = dom_1.createSVGElement('path');
        shape.setAttribute('stroke', attrs.stroke || 'none');
        shape.setAttribute('fill', attrs.fill || 'none');
        el.appendChild(shape);
        el.setAttribute('overflow', 'visible');
        el.setAttribute('orient', 'auto-start-reverse');
        this.el = el;
        this.child = shape;
        this.id = id;
        var cfg = attrs[type === 'marker-start' ? 'startArrow' : 'endArrow'];
        this.stroke = attrs.stroke || '#000';
        if (cfg === true) {
            this._setDefaultPath(type, shape);
        }
        else {
            this.cfg = cfg; // when arrow config exists
            this._setMarker(attrs.lineWidth, shape);
        }
        return this;
    }
    Arrow.prototype.match = function () {
        return false;
    };
    Arrow.prototype._setDefaultPath = function (type, el) {
        var parent = this.el;
        // 默认箭头的边长为 10，夹角为 60 度
        el.setAttribute('d', "M0,0 L" + 10 * Math.cos(Math.PI / 6) + ",5 L0,10");
        parent.setAttribute('refX', "" + 10 * Math.cos(Math.PI / 6));
        parent.setAttribute('refY', "" + 5);
    };
    Arrow.prototype._setMarker = function (r, el) {
        var parent = this.el;
        var path = this.cfg.path;
        var d = this.cfg.d;
        if (util_1.isArray(path)) {
            path = path
                .map(function (segment) {
                return segment.join(' ');
            })
                .join('');
        }
        el.setAttribute('d', path);
        parent.appendChild(el);
        if (d) {
            parent.setAttribute('refX', "" + d / r);
        }
    };
    Arrow.prototype.update = function (fill) {
        var child = this.child;
        if (child.attr) {
            child.attr('fill', fill);
        }
        else {
            child.setAttribute('fill', fill);
        }
    };
    return Arrow;
}());
exports.default = Arrow;
//# sourceMappingURL=arrow.js.map

/***/ }),

/***/ "c1b9":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");

// eslint-disable-next-line es/no-object-defineproperty -- safe
var defineProperty = Object.defineProperty;

module.exports = function (key, value) {
  try {
    defineProperty(globalThis, key, { value: value, configurable: true, writable: true });
  } catch (error) {
    globalThis[key] = value;
  } return value;
};


/***/ }),

/***/ "c1ce":
/***/ (function(module, exports, __webpack_require__) {

var root = __webpack_require__("82c6");

/** Used to detect overreaching core-js shims. */
var coreJsData = root['__core-js_shared__'];

module.exports = coreJsData;


/***/ }),

/***/ "c26a":
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__("dc9b"),
    isObject = __webpack_require__("139b");

/** `Object#toString` result references. */
var asyncTag = '[object AsyncFunction]',
    funcTag = '[object Function]',
    genTag = '[object GeneratorFunction]',
    proxyTag = '[object Proxy]';

/**
 * Checks if `value` is classified as a `Function` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a function, else `false`.
 * @example
 *
 * _.isFunction(_);
 * // => true
 *
 * _.isFunction(/abc/);
 * // => false
 */
function isFunction(value) {
  if (!isObject(value)) {
    return false;
  }
  // The use of `Object#toString` avoids issues with the `typeof` operator
  // in Safari 9 which returns 'object' for typed arrays and other constructors.
  var tag = baseGetTag(value);
  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;
}

module.exports = isFunction;


/***/ }),

/***/ "c2ab":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview 圆
 * @author dxq613@gmail.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var base_1 = __webpack_require__("98ae");
var util_1 = __webpack_require__("1e49");
var Circle = /** @class */ (function (_super) {
    tslib_1.__extends(Circle, _super);
    function Circle() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Circle.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, r: 0 });
    };
    Circle.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {
        var attrs = this.attr();
        var cx = attrs.x;
        var cy = attrs.y;
        var r = attrs.r;
        var halfLineWidth = lineWidth / 2;
        var absDistance = util_1.distance(cx, cy, x, y);
        // 直接用距离，如果同时存在边和填充时，可以减少两次计算
        if (isFill && isStroke) {
            return absDistance <= r + halfLineWidth;
        }
        if (isFill) {
            return absDistance <= r;
        }
        if (isStroke) {
            return absDistance >= r - halfLineWidth && absDistance <= r + halfLineWidth;
        }
        return false;
    };
    Circle.prototype.createPath = function (context) {
        var attrs = this.attr();
        var cx = attrs.x;
        var cy = attrs.y;
        var r = attrs.r;
        context.beginPath();
        context.arc(cx, cy, r, 0, Math.PI * 2, false);
        context.closePath();
    };
    return Circle;
}(base_1.default));
exports.default = Circle;
//# sourceMappingURL=circle.js.map

/***/ }),

/***/ "c2c4":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.parseRadius = exports.parseStyle = exports.parsePattern = exports.parseRadialGradient = exports.parseLineGradient = void 0;
var util_1 = __webpack_require__("1e49");
var regexLG = /^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i;
var regexRG = /^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i;
var regexPR = /^p\s*\(\s*([axyn])\s*\)\s*(.*)/i;
var regexColorStop = /[\d.]+:(#[^\s]+|[^\)]+\))/gi;
function addStop(steps, gradient) {
    var arr = steps.match(regexColorStop);
    util_1.each(arr, function (item) {
        var itemArr = item.split(':');
        gradient.addColorStop(itemArr[0], itemArr[1]);
    });
}
/**
 * 将边和填充设置的颜色转换成线性渐变对象
 * @param {CanvasRenderingContext2D} context canvas 上下文
 * @param {IElement}                 element  图形元素
 * @param {string}                   gradientStr   颜色
 * @returns {any} 渐变对象
 */
function parseLineGradient(context, element, gradientStr) {
    var arr = regexLG.exec(gradientStr);
    var angle = (parseFloat(arr[1]) % 360) * (Math.PI / 180);
    var steps = arr[2];
    var box = element.getBBox();
    var start;
    var end;
    if (angle >= 0 && angle < (1 / 2) * Math.PI) {
        start = {
            x: box.minX,
            y: box.minY,
        };
        end = {
            x: box.maxX,
            y: box.maxY,
        };
    }
    else if ((1 / 2) * Math.PI <= angle && angle < Math.PI) {
        start = {
            x: box.maxX,
            y: box.minY,
        };
        end = {
            x: box.minX,
            y: box.maxY,
        };
    }
    else if (Math.PI <= angle && angle < (3 / 2) * Math.PI) {
        start = {
            x: box.maxX,
            y: box.maxY,
        };
        end = {
            x: box.minX,
            y: box.minY,
        };
    }
    else {
        start = {
            x: box.minX,
            y: box.maxY,
        };
        end = {
            x: box.maxX,
            y: box.minY,
        };
    }
    var tanTheta = Math.tan(angle);
    var tanTheta2 = tanTheta * tanTheta;
    var x = (end.x - start.x + tanTheta * (end.y - start.y)) / (tanTheta2 + 1) + start.x;
    var y = (tanTheta * (end.x - start.x + tanTheta * (end.y - start.y))) / (tanTheta2 + 1) + start.y;
    var gradient = context.createLinearGradient(start.x, start.y, x, y);
    addStop(steps, gradient);
    return gradient;
}
exports.parseLineGradient = parseLineGradient;
/**
 * 将边和填充设置的颜色转换成圆形渐变对象
 * @param {CanvasRenderingContext2D} context canvas 上下文
 * @param {IElement}                 element  图形元素
 * @param {string}                   gradientStr   颜色
 * @returns {any} 渐变对象
 */
function parseRadialGradient(context, element, gradientStr) {
    var arr = regexRG.exec(gradientStr);
    var fx = parseFloat(arr[1]);
    var fy = parseFloat(arr[2]);
    var fr = parseFloat(arr[3]);
    var steps = arr[4];
    // 环半径为0时，默认无渐变，取渐变序列的最后一个颜色
    if (fr === 0) {
        var colors = steps.match(regexColorStop);
        return colors[colors.length - 1].split(':')[1];
    }
    var box = element.getBBox();
    var width = box.maxX - box.minX;
    var height = box.maxY - box.minY;
    var r = Math.sqrt(width * width + height * height) / 2;
    var gradient = context.createRadialGradient(box.minX + width * fx, box.minY + height * fy, 0, box.minX + width / 2, box.minY + height / 2, fr * r);
    addStop(steps, gradient);
    return gradient;
}
exports.parseRadialGradient = parseRadialGradient;
/**
 * 边和填充设置的颜色转换成 pattern
 * @param {CanvasRenderingContext2D} context canvas 上下文
 * @param {IElement}                 element  图形元素
 * @param {string}                   patternStr   生成 pattern 的字符串
 */
function parsePattern(context, element, patternStr) {
    // 在转换过程中进行了缓存
    if (element.get('patternSource') && element.get('patternSource') === patternStr) {
        return element.get('pattern');
    }
    var pattern;
    var img;
    var arr = regexPR.exec(patternStr);
    var repeat = arr[1];
    var source = arr[2];
    // Function to be called when pattern loads
    function onload() {
        // Create pattern
        pattern = context.createPattern(img, repeat);
        element.set('pattern', pattern); // be a cache
        element.set('patternSource', patternStr);
    }
    switch (repeat) {
        case 'a':
            repeat = 'repeat';
            break;
        case 'x':
            repeat = 'repeat-x';
            break;
        case 'y':
            repeat = 'repeat-y';
            break;
        case 'n':
            repeat = 'no-repeat';
            break;
        default:
            repeat = 'no-repeat';
    }
    img = new Image();
    // If source URL is not a data URL
    if (!source.match(/^data:/i)) {
        // Set crossOrigin for this image
        img.crossOrigin = 'Anonymous';
    }
    img.src = source;
    if (img.complete) {
        onload();
    }
    else {
        img.onload = onload;
        // Fix onload() bug in IE9
        img.src = img.src;
    }
    return pattern;
}
exports.parsePattern = parsePattern;
function parseStyle(context, element, color) {
    var bbox = element.getBBox();
    if (isNaN(bbox.x) || isNaN(bbox.y) || isNaN(bbox.width) || isNaN(bbox.height)) {
        return color;
    }
    if (util_1.isString(color)) {
        if (color[1] === '(' || color[2] === '(') {
            if (color[0] === 'l') {
                // regexLG.test(color)
                return parseLineGradient(context, element, color);
            }
            if (color[0] === 'r') {
                // regexRG.test(color)
                return parseRadialGradient(context, element, color);
            }
            if (color[0] === 'p') {
                // regexPR.test(color)
                return parsePattern(context, element, color);
            }
        }
        return color;
    }
    if (color instanceof CanvasPattern) {
        return color;
    }
}
exports.parseStyle = parseStyle;
function parseRadius(radius) {
    var r1 = 0;
    var r2 = 0;
    var r3 = 0;
    var r4 = 0;
    if (util_1.isArray(radius)) {
        if (radius.length === 1) {
            r1 = r2 = r3 = r4 = radius[0];
        }
        else if (radius.length === 2) {
            r1 = r3 = radius[0];
            r2 = r4 = radius[1];
        }
        else if (radius.length === 3) {
            r1 = radius[0];
            r2 = r4 = radius[1];
            r3 = radius[2];
        }
        else {
            r1 = radius[0];
            r2 = radius[1];
            r3 = radius[2];
            r4 = radius[3];
        }
    }
    else {
        r1 = r2 = r3 = r4 = radius;
    }
    return [r1, r2, r3, r4];
}
exports.parseRadius = parseRadius;
//# sourceMappingURL=parse.js.map

/***/ }),

/***/ "c2f0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var hasOwn = __webpack_require__("85ed");
var isSymbol = __webpack_require__("ef41");
var tryToString = __webpack_require__("dcd7");
var shared = __webpack_require__("f823");
var NATIVE_SYMBOL_REGISTRY = __webpack_require__("01a3");

var SymbolToStringRegistry = shared('symbol-to-string-registry');

// `Symbol.keyFor` method
// https://tc39.es/ecma262/#sec-symbol.keyfor
$({ target: 'Symbol', stat: true, forced: !NATIVE_SYMBOL_REGISTRY }, {
  keyFor: function keyFor(sym) {
    if (!isSymbol(sym)) throw new TypeError(tryToString(sym) + ' is not a symbol');
    if (hasOwn(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];
  }
});


/***/ }),

/***/ "c2f4":
/***/ (function(module, exports, __webpack_require__) {

var isArrayLike = __webpack_require__("4c8a"),
    isObjectLike = __webpack_require__("d92c");

/**
 * This method is like `_.isArrayLike` except that it also checks if `value`
 * is an object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array-like object,
 *  else `false`.
 * @example
 *
 * _.isArrayLikeObject([1, 2, 3]);
 * // => true
 *
 * _.isArrayLikeObject(document.body.children);
 * // => true
 *
 * _.isArrayLikeObject('abc');
 * // => false
 *
 * _.isArrayLikeObject(_.noop);
 * // => false
 */
function isArrayLikeObject(value) {
  return isObjectLike(value) && isArrayLike(value);
}

module.exports = isArrayLikeObject;


/***/ }),

/***/ "c2f6":
/***/ (function(module, exports) {

/**
 * Converts an ASCII `string` to an array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the converted array.
 */
function asciiToArray(string) {
  return string.split('');
}

module.exports = asciiToArray;


/***/ }),

/***/ "c3a6":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var toObject = __webpack_require__("8ec0");
var nativeKeys = __webpack_require__("90a0");
var fails = __webpack_require__("e835");

var FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });

// `Object.keys` method
// https://tc39.es/ecma262/#sec-object.keys
$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {
  keys: function keys(it) {
    return nativeKeys(toObject(it));
  }
});


/***/ }),

/***/ "c3f4":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");

module.exports = function (METHOD_NAME, argument) {
  var method = [][METHOD_NAME];
  return !!method && fails(function () {
    // eslint-disable-next-line no-useless-call -- required for testing
    method.call(null, argument || function () { return 1; }, 1);
  });
};


/***/ }),

/***/ "c4e8":
/***/ (function(module, exports, __webpack_require__) {

var isObject = __webpack_require__("139b");

/** Built-in value references. */
var objectCreate = Object.create;

/**
 * The base implementation of `_.create` without support for assigning
 * properties to the created object.
 *
 * @private
 * @param {Object} proto The object to inherit from.
 * @returns {Object} Returns the new object.
 */
var baseCreate = (function() {
  function object() {}
  return function(proto) {
    if (!isObject(proto)) {
      return {};
    }
    if (objectCreate) {
      return objectCreate(proto);
    }
    object.prototype = proto;
    var result = new object;
    object.prototype = undefined;
    return result;
  };
}());

module.exports = baseCreate;


/***/ }),

/***/ "c53c":
/***/ (function(module, exports, __webpack_require__) {

var castSlice = __webpack_require__("9d34"),
    hasUnicode = __webpack_require__("026b"),
    stringToArray = __webpack_require__("ff8d"),
    toString = __webpack_require__("700f");

/**
 * Creates a function like `_.lowerFirst`.
 *
 * @private
 * @param {string} methodName The name of the `String` case method to use.
 * @returns {Function} Returns the new case function.
 */
function createCaseFirst(methodName) {
  return function(string) {
    string = toString(string);

    var strSymbols = hasUnicode(string)
      ? stringToArray(string)
      : undefined;

    var chr = strSymbols
      ? strSymbols[0]
      : string.charAt(0);

    var trailing = strSymbols
      ? castSlice(strSymbols, 1).join('')
      : string.slice(1);

    return chr[methodName]() + trailing;
  };
}

module.exports = createCaseFirst;


/***/ }),

/***/ "c56d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var V8_PROTOTYPE_DEFINE_BUG = __webpack_require__("1349");
var definePropertyModule = __webpack_require__("80ea");
var anObject = __webpack_require__("9774");
var toIndexedObject = __webpack_require__("a330");
var objectKeys = __webpack_require__("90a0");

// `Object.defineProperties` method
// https://tc39.es/ecma262/#sec-object.defineproperties
// eslint-disable-next-line es/no-object-defineproperties -- safe
exports.f = DESCRIPTORS && !V8_PROTOTYPE_DEFINE_BUG ? Object.defineProperties : function defineProperties(O, Properties) {
  anObject(O);
  var props = toIndexedObject(Properties);
  var keys = objectKeys(Properties);
  var length = keys.length;
  var index = 0;
  var key;
  while (length > index) definePropertyModule.f(O, key = keys[index++], props[key]);
  return O;
};


/***/ }),

/***/ "c577":
/***/ (function(module, exports, __webpack_require__) {

var castPath = __webpack_require__("6a1d"),
    toKey = __webpack_require__("d202");

/**
 * The base implementation of `_.get` without support for default values.
 *
 * @private
 * @param {Object} object The object to query.
 * @param {Array|string} path The path of the property to get.
 * @returns {*} Returns the resolved value.
 */
function baseGet(object, path) {
  path = castPath(path, object);

  var index = 0,
      length = path.length;

  while (object != null && index < length) {
    object = object[toKey(path[index++])];
  }
  return (index && index == length) ? object : undefined;
}

module.exports = baseGet;


/***/ }),

/***/ "c62f":
/***/ (function(module, exports) {

/**
 * A specialized version of `_.map` for arrays without support for iteratee
 * shorthands.
 *
 * @private
 * @param {Array} [array] The array to iterate over.
 * @param {Function} iteratee The function invoked per iteration.
 * @returns {Array} Returns the new mapped array.
 */
function arrayMap(array, iteratee) {
  var index = -1,
      length = array == null ? 0 : array.length,
      result = Array(length);

  while (++index < length) {
    result[index] = iteratee(array[index], index, array);
  }
  return result;
}

module.exports = arrayMap;


/***/ }),

/***/ "c6e8":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");
var createPropertyDescriptor = __webpack_require__("6638");

module.exports = !fails(function () {
  var error = new Error('a');
  if (!('stack' in error)) return true;
  // eslint-disable-next-line es/no-object-defineproperty -- safe
  Object.defineProperty(error, 'stack', createPropertyDescriptor(1, 7));
  return error.stack !== 7;
});


/***/ }),

/***/ "c7fc":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");
var globalThis = __webpack_require__("92e2");

// babel-minify and Closure Compiler transpiles RegExp('(?<a>b)', 'g') -> /(?<a>b)/g and it causes SyntaxError
var $RegExp = globalThis.RegExp;

module.exports = fails(function () {
  var re = $RegExp('(?<a>b)', 'g');
  return re.exec('b').groups.a !== 'b' ||
    'b'.replace(re, '$<a>c') !== 'bc';
});


/***/ }),

/***/ "c806":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var classof = __webpack_require__("51d7");

// `IsArray` abstract operation
// https://tc39.es/ecma262/#sec-isarray
// eslint-disable-next-line es/no-array-isarray -- safe
module.exports = Array.isArray || function isArray(argument) {
  return classof(argument) === 'Array';
};


/***/ }),

/***/ "c875":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview 多边形
 * @author dxq613@gmail.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var base_1 = __webpack_require__("98ae");
var polyline_1 = __webpack_require__("0869");
var polygon_1 = __webpack_require__("4ac6");
var Polygon = /** @class */ (function (_super) {
    tslib_1.__extends(Polygon, _super);
    function Polygon() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Polygon.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {
        var points = this.attr().points;
        var isHit = false;
        if (isStroke) {
            isHit = polyline_1.default(points, lineWidth, x, y, true);
        }
        if (!isHit && isFill) {
            isHit = polygon_1.default(points, x, y); // isPointInPath(shape, x, y);
        }
        return isHit;
    };
    Polygon.prototype.createPath = function (context) {
        var attrs = this.attr();
        var points = attrs.points;
        if (points.length < 2) {
            return;
        }
        context.beginPath();
        for (var i = 0; i < points.length; i++) {
            var point = points[i];
            if (i === 0) {
                context.moveTo(point[0], point[1]);
            }
            else {
                context.lineTo(point[0], point[1]);
            }
        }
        context.closePath();
    };
    return Polygon;
}(base_1.default));
exports.default = Polygon;
//# sourceMappingURL=polygon.js.map

/***/ }),

/***/ "c89e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var isCallable = __webpack_require__("fe72");
var store = __webpack_require__("50c7");

var functionToString = uncurryThis(Function.toString);

// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper
if (!isCallable(store.inspectSource)) {
  store.inspectSource = function (it) {
    return functionToString(it);
  };
}

module.exports = store.inspectSource;


/***/ }),

/***/ "c946":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");

var $Error = Error;
var replace = uncurryThis(''.replace);

var TEST = (function (arg) { return String(new $Error(arg).stack); })('zxcasd');
// eslint-disable-next-line redos/no-vulnerable -- safe
var V8_OR_CHAKRA_STACK_ENTRY = /\n\s*at [^:]*:[^\n]*/;
var IS_V8_OR_CHAKRA_STACK = V8_OR_CHAKRA_STACK_ENTRY.test(TEST);

module.exports = function (stack, dropEntries) {
  if (IS_V8_OR_CHAKRA_STACK && typeof stack == 'string' && !$Error.prepareStackTrace) {
    while (dropEntries--) stack = replace(stack, V8_OR_CHAKRA_STACK_ENTRY, '');
  } return stack;
};


/***/ }),

/***/ "ca2f":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var is_type_1 = __webpack_require__("6627");
exports.default = (function (str) {
    return is_type_1.default(str, 'String');
});
//# sourceMappingURL=is-string.js.map

/***/ }),

/***/ "cc6e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var fails = __webpack_require__("e835");
var isCallable = __webpack_require__("fe72");

var replacement = /#|\.prototype\./;

var isForced = function (feature, detection) {
  var value = data[normalize(feature)];
  return value === POLYFILL ? true
    : value === NATIVE ? false
    : isCallable(detection) ? fails(detection)
    : !!detection;
};

var normalize = isForced.normalize = function (string) {
  return String(string).replace(replacement, '.').toLowerCase();
};

var data = isForced.data = {};
var NATIVE = isForced.NATIVE = 'N';
var POLYFILL = isForced.POLYFILL = 'P';

module.exports = isForced;


/***/ }),

/***/ "cce9":
/***/ (function(module, exports, __webpack_require__) {

var getNative = __webpack_require__("0034");

/* Built-in method references that are verified to be native. */
var nativeCreate = getNative(Object, 'create');

module.exports = nativeCreate;


/***/ }),

/***/ "cd2a":
/***/ (function(module, exports, __webpack_require__) {

var assocIndexOf = __webpack_require__("1a8d");

/** Used for built-in method references. */
var arrayProto = Array.prototype;

/** Built-in value references. */
var splice = arrayProto.splice;

/**
 * Removes `key` and its value from the list cache.
 *
 * @private
 * @name delete
 * @memberOf ListCache
 * @param {string} key The key of the value to remove.
 * @returns {boolean} Returns `true` if the entry was removed, else `false`.
 */
function listCacheDelete(key) {
  var data = this.__data__,
      index = assocIndexOf(data, key);

  if (index < 0) {
    return false;
  }
  var lastIndex = data.length - 1;
  if (index == lastIndex) {
    data.pop();
  } else {
    splice.call(data, index, 1);
  }
  --this.size;
  return true;
}

module.exports = listCacheDelete;


/***/ }),

/***/ "cd73":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview 椭圆
 * @author dxq613@gmail.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var base_1 = __webpack_require__("98ae");
// 根据椭圆公式计算 x*x/rx*rx + y*y/ry*ry;
function ellipseDistance(squareX, squareY, rx, ry) {
    return squareX / (rx * rx) + squareY / (ry * ry);
}
var Ellipse = /** @class */ (function (_super) {
    tslib_1.__extends(Ellipse, _super);
    function Ellipse() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    Ellipse.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, rx: 0, ry: 0 });
    };
    Ellipse.prototype.isInStrokeOrPath = function (x, y, isStroke, isFill, lineWidth) {
        var attrs = this.attr();
        var halfLineWith = lineWidth / 2;
        var cx = attrs.x;
        var cy = attrs.y;
        var rx = attrs.rx, ry = attrs.ry;
        var squareX = (x - cx) * (x - cx);
        var squareY = (y - cy) * (y - cy);
        // 使用椭圆的公式： x*x/rx*rx + y*y/ry*ry = 1;
        if (isFill && isStroke) {
            return ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <= 1;
        }
        if (isFill) {
            return ellipseDistance(squareX, squareY, rx, ry) <= 1;
        }
        if (isStroke) {
            return (ellipseDistance(squareX, squareY, rx - halfLineWith, ry - halfLineWith) >= 1 &&
                ellipseDistance(squareX, squareY, rx + halfLineWith, ry + halfLineWith) <= 1);
        }
        return false;
    };
    Ellipse.prototype.createPath = function (context) {
        var attrs = this.attr();
        var cx = attrs.x;
        var cy = attrs.y;
        var rx = attrs.rx;
        var ry = attrs.ry;
        context.beginPath();
        // 兼容逻辑
        if (context.ellipse) {
            context.ellipse(cx, cy, rx, ry, 0, 0, Math.PI * 2, false);
        }
        else {
            // 如果不支持，则使用圆来绘制，进行变形
            var r = rx > ry ? rx : ry;
            var scaleX = rx > ry ? 1 : rx / ry;
            var scaleY = rx > ry ? ry / rx : 1;
            context.save();
            context.translate(cx, cy);
            context.scale(scaleX, scaleY);
            context.arc(0, 0, r, 0, Math.PI * 2);
            context.restore();
            context.closePath();
        }
    };
    return Ellipse;
}(base_1.default));
exports.default = Ellipse;
//# sourceMappingURL=ellipse.js.map

/***/ }),

/***/ "cdfb":
/***/ (function(module, exports, __webpack_require__) {

var baseCreate = __webpack_require__("c4e8"),
    getPrototype = __webpack_require__("f227"),
    isPrototype = __webpack_require__("fe0d");

/**
 * Initializes an object clone.
 *
 * @private
 * @param {Object} object The object to clone.
 * @returns {Object} Returns the initialized clone.
 */
function initCloneObject(object) {
  return (typeof object.constructor == 'function' && !isPrototype(object))
    ? baseCreate(getPrototype(object))
    : {};
}

module.exports = initCloneObject;


/***/ }),

/***/ "cf38":
/***/ (function(module, exports, __webpack_require__) {

var nativeCreate = __webpack_require__("cce9");

/**
 * Removes all key-value entries from the hash.
 *
 * @private
 * @name clear
 * @memberOf Hash
 */
function hashClear() {
  this.__data__ = nativeCreate ? nativeCreate(null) : {};
  this.size = 0;
}

module.exports = hashClear;


/***/ }),

/***/ "cfbf":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isArray = __webpack_require__("c806");
var lengthOfArrayLike = __webpack_require__("8269");
var doesNotExceedSafeInteger = __webpack_require__("3110");
var bind = __webpack_require__("59a3");

// `FlattenIntoArray` abstract operation
// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray
var flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {
  var targetIndex = start;
  var sourceIndex = 0;
  var mapFn = mapper ? bind(mapper, thisArg) : false;
  var element, elementLen;

  while (sourceIndex < sourceLen) {
    if (sourceIndex in source) {
      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];

      if (depth > 0 && isArray(element)) {
        elementLen = lengthOfArrayLike(element);
        targetIndex = flattenIntoArray(target, original, element, elementLen, targetIndex, depth - 1) - 1;
      } else {
        doesNotExceedSafeInteger(targetIndex + 1);
        target[targetIndex] = element;
      }

      targetIndex++;
    }
    sourceIndex++;
  }
  return targetIndex;
};

module.exports = flattenIntoArray;


/***/ }),

/***/ "cff1":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview rect
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var util_1 = __webpack_require__("6d77");
var base_1 = __webpack_require__("6cb2");
var constant_1 = __webpack_require__("7a93");
var format_1 = __webpack_require__("b26d");
var Rect = /** @class */ (function (_super) {
    tslib_1.__extends(Rect, _super);
    function Rect() {
        var _this = _super !== null && _super.apply(this, arguments) || this;
        _this.type = 'rect';
        _this.canFill = true;
        _this.canStroke = true;
        return _this;
    }
    Rect.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0, radius: 0 });
    };
    Rect.prototype.createPath = function (context, targetAttrs) {
        var _this = this;
        var attrs = this.attr();
        var el = this.get('el');
        // 加上状态量，用来标记 path 是否已组装
        var completed = false;
        // 和组装 path 相关的绘图属性
        var pathRelatedAttrs = ['x', 'y', 'width', 'height', 'radius'];
        util_1.each(targetAttrs || attrs, function (value, attr) {
            if (pathRelatedAttrs.indexOf(attr) !== -1 && !completed) {
                el.setAttribute('d', _this._assembleRect(attrs));
                completed = true;
            }
            else if (pathRelatedAttrs.indexOf(attr) === -1 && constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
    };
    Rect.prototype._assembleRect = function (attrs) {
        var x = attrs.x;
        var y = attrs.y;
        var w = attrs.width;
        var h = attrs.height;
        var radius = attrs.radius;
        if (!radius) {
            return "M " + x + "," + y + " l " + w + ",0 l 0," + h + " l" + -w + " 0 z";
        }
        var r = format_1.parseRadius(radius);
        if (util_1.isArray(radius)) {
            if (radius.length === 1) {
                r.r1 = r.r2 = r.r3 = r.r4 = radius[0];
            }
            else if (radius.length === 2) {
                r.r1 = r.r3 = radius[0];
                r.r2 = r.r4 = radius[1];
            }
            else if (radius.length === 3) {
                r.r1 = radius[0];
                r.r2 = r.r4 = radius[1];
                r.r3 = radius[2];
            }
            else {
                r.r1 = radius[0];
                r.r2 = radius[1];
                r.r3 = radius[2];
                r.r4 = radius[3];
            }
        }
        else {
            r.r1 = r.r2 = r.r3 = r.r4 = radius;
        }
        var d = [
            ["M " + (x + r.r1) + "," + y],
            ["l " + (w - r.r1 - r.r2) + ",0"],
            ["a " + r.r2 + "," + r.r2 + ",0,0,1," + r.r2 + "," + r.r2],
            ["l 0," + (h - r.r2 - r.r3)],
            ["a " + r.r3 + "," + r.r3 + ",0,0,1," + -r.r3 + "," + r.r3],
            ["l " + (r.r3 + r.r4 - w) + ",0"],
            ["a " + r.r4 + "," + r.r4 + ",0,0,1," + -r.r4 + "," + -r.r4],
            ["l 0," + (r.r4 + r.r1 - h)],
            ["a " + r.r1 + "," + r.r1 + ",0,0,1," + r.r1 + "," + -r.r1],
            ['z'],
        ];
        return d.join(' ');
    };
    return Rect;
}(base_1.default));
exports.default = Rect;
//# sourceMappingURL=rect.js.map

/***/ }),

/***/ "d091":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var userAgent = __webpack_require__("93b7");

module.exports = /web0s(?!.*chrome)/i.test(userAgent);


/***/ }),

/***/ "d0d3":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isCallable = __webpack_require__("fe72");
var tryToString = __webpack_require__("dcd7");

var $TypeError = TypeError;

// `Assert: IsCallable(argument) is true`
module.exports = function (argument) {
  if (isCallable(argument)) return argument;
  throw new $TypeError(tryToString(argument) + ' is not a function');
};


/***/ }),

/***/ "d152":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");
var apply = __webpack_require__("b376");
var bind = __webpack_require__("59a3");
var isCallable = __webpack_require__("fe72");
var hasOwn = __webpack_require__("85ed");
var fails = __webpack_require__("e835");
var html = __webpack_require__("b825");
var arraySlice = __webpack_require__("f600");
var createElement = __webpack_require__("6c25");
var validateArgumentsLength = __webpack_require__("a233");
var IS_IOS = __webpack_require__("add1");
var IS_NODE = __webpack_require__("d27e");

var set = globalThis.setImmediate;
var clear = globalThis.clearImmediate;
var process = globalThis.process;
var Dispatch = globalThis.Dispatch;
var Function = globalThis.Function;
var MessageChannel = globalThis.MessageChannel;
var String = globalThis.String;
var counter = 0;
var queue = {};
var ONREADYSTATECHANGE = 'onreadystatechange';
var $location, defer, channel, port;

fails(function () {
  // Deno throws a ReferenceError on `location` access without `--location` flag
  $location = globalThis.location;
});

var run = function (id) {
  if (hasOwn(queue, id)) {
    var fn = queue[id];
    delete queue[id];
    fn();
  }
};

var runner = function (id) {
  return function () {
    run(id);
  };
};

var eventListener = function (event) {
  run(event.data);
};

var globalPostMessageDefer = function (id) {
  // old engines have not location.origin
  globalThis.postMessage(String(id), $location.protocol + '//' + $location.host);
};

// Node.js 0.9+ & IE10+ has setImmediate, otherwise:
if (!set || !clear) {
  set = function setImmediate(handler) {
    validateArgumentsLength(arguments.length, 1);
    var fn = isCallable(handler) ? handler : Function(handler);
    var args = arraySlice(arguments, 1);
    queue[++counter] = function () {
      apply(fn, undefined, args);
    };
    defer(counter);
    return counter;
  };
  clear = function clearImmediate(id) {
    delete queue[id];
  };
  // Node.js 0.8-
  if (IS_NODE) {
    defer = function (id) {
      process.nextTick(runner(id));
    };
  // Sphere (JS game engine) Dispatch API
  } else if (Dispatch && Dispatch.now) {
    defer = function (id) {
      Dispatch.now(runner(id));
    };
  // Browsers with MessageChannel, includes WebWorkers
  // except iOS - https://github.com/zloirock/core-js/issues/624
  } else if (MessageChannel && !IS_IOS) {
    channel = new MessageChannel();
    port = channel.port2;
    channel.port1.onmessage = eventListener;
    defer = bind(port.postMessage, port);
  // Browsers with postMessage, skip WebWorkers
  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'
  } else if (
    globalThis.addEventListener &&
    isCallable(globalThis.postMessage) &&
    !globalThis.importScripts &&
    $location && $location.protocol !== 'file:' &&
    !fails(globalPostMessageDefer)
  ) {
    defer = globalPostMessageDefer;
    globalThis.addEventListener('message', eventListener, false);
  // IE8-
  } else if (ONREADYSTATECHANGE in createElement('script')) {
    defer = function (id) {
      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {
        html.removeChild(this);
        run(id);
      };
    };
  // Rest old browsers
  } else {
    defer = function (id) {
      setTimeout(runner(id), 0);
    };
  }
}

module.exports = {
  set: set,
  clear: clear
};


/***/ }),

/***/ "d19b":
/***/ (function(module, exports, __webpack_require__) {

var baseGetTag = __webpack_require__("dc9b"),
    isObjectLike = __webpack_require__("d92c");

/** `Object#toString` result references. */
var symbolTag = '[object Symbol]';

/**
 * Checks if `value` is classified as a `Symbol` primitive or object.
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.
 * @example
 *
 * _.isSymbol(Symbol.iterator);
 * // => true
 *
 * _.isSymbol('abc');
 * // => false
 */
function isSymbol(value) {
  return typeof value == 'symbol' ||
    (isObjectLike(value) && baseGetTag(value) == symbolTag);
}

module.exports = isSymbol;


/***/ }),

/***/ "d1bd":
/***/ (function(module, exports, __webpack_require__) {

var nativeCreate = __webpack_require__("cce9");

/** Used to stand-in for `undefined` hash values. */
var HASH_UNDEFINED = '__lodash_hash_undefined__';

/**
 * Sets the hash `key` to `value`.
 *
 * @private
 * @name set
 * @memberOf Hash
 * @param {string} key The key of the value to set.
 * @param {*} value The value to set.
 * @returns {Object} Returns the hash instance.
 */
function hashSet(key, value) {
  var data = this.__data__;
  this.size += this.has(key) ? 0 : 1;
  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;
  return this;
}

module.exports = hashSet;


/***/ }),

/***/ "d202":
/***/ (function(module, exports, __webpack_require__) {

var isSymbol = __webpack_require__("d19b");

/** Used as references for various `Number` constants. */
var INFINITY = 1 / 0;

/**
 * Converts `value` to a string key if it's not a string or symbol.
 *
 * @private
 * @param {*} value The value to inspect.
 * @returns {string|symbol} Returns the key.
 */
function toKey(value) {
  if (typeof value == 'string' || isSymbol(value)) {
    return value;
  }
  var result = (value + '');
  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;
}

module.exports = toKey;


/***/ }),

/***/ "d202f":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var createNonEnumerableProperty = __webpack_require__("80b9");
var clearErrorStack = __webpack_require__("c946");
var ERROR_STACK_INSTALLABLE = __webpack_require__("c6e8");

// non-standard V8
var captureStackTrace = Error.captureStackTrace;

module.exports = function (error, C, stack, dropEntries) {
  if (ERROR_STACK_INSTALLABLE) {
    if (captureStackTrace) captureStackTrace(error, C);
    else createNonEnumerableProperty(error, 'stack', clearErrorStack(stack, dropEntries));
  }
};


/***/ }),

/***/ "d232":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var IS_PURE = __webpack_require__("6e09");
var FORCED_PROMISE_CONSTRUCTOR = __webpack_require__("7cb3").CONSTRUCTOR;
var NativePromiseConstructor = __webpack_require__("b885");
var getBuiltIn = __webpack_require__("4fed");
var isCallable = __webpack_require__("fe72");
var defineBuiltIn = __webpack_require__("f303");

var NativePromisePrototype = NativePromiseConstructor && NativePromiseConstructor.prototype;

// `Promise.prototype.catch` method
// https://tc39.es/ecma262/#sec-promise.prototype.catch
$({ target: 'Promise', proto: true, forced: FORCED_PROMISE_CONSTRUCTOR, real: true }, {
  'catch': function (onRejected) {
    return this.then(undefined, onRejected);
  }
});

// makes sure that native promise-based APIs `Promise#catch` properly works with patched `Promise#then`
if (!IS_PURE && isCallable(NativePromiseConstructor)) {
  var method = getBuiltIn('Promise').prototype['catch'];
  if (NativePromisePrototype['catch'] !== method) {
    defineBuiltIn(NativePromisePrototype, 'catch', method, { unsafe: true });
  }
}


/***/ }),

/***/ "d26d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var bind = __webpack_require__("59a3");
var call = __webpack_require__("ded0");
var toObject = __webpack_require__("8ec0");
var callWithSafeIterationClosing = __webpack_require__("f8dc");
var isArrayIteratorMethod = __webpack_require__("f4b9");
var isConstructor = __webpack_require__("c185");
var lengthOfArrayLike = __webpack_require__("8269");
var createProperty = __webpack_require__("99e5");
var getIterator = __webpack_require__("7748");
var getIteratorMethod = __webpack_require__("4431");

var $Array = Array;

// `Array.from` method implementation
// https://tc39.es/ecma262/#sec-array.from
module.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {
  var O = toObject(arrayLike);
  var IS_CONSTRUCTOR = isConstructor(this);
  var argumentsLength = arguments.length;
  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;
  var mapping = mapfn !== undefined;
  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined);
  var iteratorMethod = getIteratorMethod(O);
  var index = 0;
  var length, result, step, iterator, next, value;
  // if the target is not iterable or it's an array with the default iterator - use a simple case
  if (iteratorMethod && !(this === $Array && isArrayIteratorMethod(iteratorMethod))) {
    result = IS_CONSTRUCTOR ? new this() : [];
    iterator = getIterator(O, iteratorMethod);
    next = iterator.next;
    for (;!(step = call(next, iterator)).done; index++) {
      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;
      createProperty(result, index, value);
    }
  } else {
    length = lengthOfArrayLike(O);
    result = IS_CONSTRUCTOR ? new this(length) : $Array(length);
    for (;length > index; index++) {
      value = mapping ? mapfn(O[index], index) : O[index];
      createProperty(result, index, value);
    }
  }
  result.length = index;
  return result;
};


/***/ }),

/***/ "d27e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var ENVIRONMENT = __webpack_require__("a232");

module.exports = ENVIRONMENT === 'NODE';


/***/ }),

/***/ "d2cb":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isCallable = __webpack_require__("fe72");

module.exports = function (it) {
  return typeof it == 'object' ? it !== null : isCallable(it);
};


/***/ }),

/***/ "d387":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var line_1 = __webpack_require__("5ad5");
var arc_1 = __webpack_require__("5c8f");
function rectWithRadius(minX, minY, width, height, radius, lineWidth, x, y) {
    var halfWidth = lineWidth / 2;
    return (line_1.default(minX + radius, minY, minX + width - radius, minY, lineWidth, x, y) ||
        line_1.default(minX + width, minY + radius, minX + width, minY + height - radius, lineWidth, x, y) ||
        line_1.default(minX + width - radius, minY + height, minX + radius, minY + height, lineWidth, x, y) ||
        line_1.default(minX, minY + height - radius, minX, minY + radius, lineWidth, x, y) ||
        arc_1.default(minX + width - radius, minY + radius, radius, 1.5 * Math.PI, 2 * Math.PI, lineWidth, x, y) ||
        arc_1.default(minX + width - radius, minY + height - radius, radius, 0, 0.5 * Math.PI, lineWidth, x, y) ||
        arc_1.default(minX + radius, minY + height - radius, radius, 0.5 * Math.PI, Math.PI, lineWidth, x, y) ||
        arc_1.default(minX + radius, minY + radius, radius, Math.PI, 1.5 * Math.PI, lineWidth, x, y));
}
exports.default = rectWithRadius;
//# sourceMappingURL=rect-radius.js.map

/***/ }),

/***/ "d41d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var fails = __webpack_require__("e835");
var isArray = __webpack_require__("c806");
var isObject = __webpack_require__("d2cb");
var toObject = __webpack_require__("8ec0");
var lengthOfArrayLike = __webpack_require__("8269");
var doesNotExceedSafeInteger = __webpack_require__("3110");
var createProperty = __webpack_require__("99e5");
var arraySpeciesCreate = __webpack_require__("dda1");
var arrayMethodHasSpeciesSupport = __webpack_require__("4086");
var wellKnownSymbol = __webpack_require__("9a0b");
var V8_VERSION = __webpack_require__("8423");

var IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');

// We can't use this feature detection in V8 since it causes
// deoptimization and serious performance degradation
// https://github.com/zloirock/core-js/issues/679
var IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {
  var array = [];
  array[IS_CONCAT_SPREADABLE] = false;
  return array.concat()[0] !== array;
});

var isConcatSpreadable = function (O) {
  if (!isObject(O)) return false;
  var spreadable = O[IS_CONCAT_SPREADABLE];
  return spreadable !== undefined ? !!spreadable : isArray(O);
};

var FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !arrayMethodHasSpeciesSupport('concat');

// `Array.prototype.concat` method
// https://tc39.es/ecma262/#sec-array.prototype.concat
// with adding support of @@isConcatSpreadable and @@species
$({ target: 'Array', proto: true, arity: 1, forced: FORCED }, {
  // eslint-disable-next-line no-unused-vars -- required for `.length`
  concat: function concat(arg) {
    var O = toObject(this);
    var A = arraySpeciesCreate(O, 0);
    var n = 0;
    var i, k, length, len, E;
    for (i = -1, length = arguments.length; i < length; i++) {
      E = i === -1 ? O : arguments[i];
      if (isConcatSpreadable(E)) {
        len = lengthOfArrayLike(E);
        doesNotExceedSafeInteger(n + len);
        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);
      } else {
        doesNotExceedSafeInteger(n + 1);
        createProperty(A, n++, E);
      }
    }
    A.length = n;
    return A;
  }
});


/***/ }),

/***/ "d519":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");

module.exports = uncurryThis({}.isPrototypeOf);


/***/ }),

/***/ "d54d":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("9a80");
/* harmony import */ var _container__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("62a0");


var AbstractGroup = /** @class */ (function (_super) {
    Object(tslib__WEBPACK_IMPORTED_MODULE_0__["__extends"])(AbstractGroup, _super);
    function AbstractGroup() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    AbstractGroup.prototype.isGroup = function () {
        return true;
    };
    AbstractGroup.prototype.isEntityGroup = function () {
        return false;
    };
    AbstractGroup.prototype.clone = function () {
        var clone = _super.prototype.clone.call(this);
        // 获取构造函数
        var children = this.getChildren();
        for (var i = 0; i < children.length; i++) {
            var child = children[i];
            clone.add(child.clone());
        }
        return clone;
    };
    return AbstractGroup;
}(_container__WEBPACK_IMPORTED_MODULE_1__[/* default */ "a"]));
/* harmony default export */ __webpack_exports__["a"] = (AbstractGroup);
//# sourceMappingURL=group.js.map

/***/ }),

/***/ "d693":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function (a, b) {
  try {
    // eslint-disable-next-line no-console -- safe
    arguments.length === 1 ? console.error(a) : console.error(a, b);
  } catch (error) { /* empty */ }
};


/***/ }),

/***/ "d729":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, "mat3", function() { return /* reexport */ esm["a" /* mat3 */]; });
__webpack_require__.d(__webpack_exports__, "vec2", function() { return /* reexport */ esm["b" /* vec2 */]; });
__webpack_require__.d(__webpack_exports__, "vec3", function() { return /* reexport */ esm["c" /* vec3 */]; });
__webpack_require__.d(__webpack_exports__, "ext", function() { return /* reexport */ ext_namespaceObject; });

// NAMESPACE OBJECT: ./node_modules/_@antv_matrix-util@3.1.0-beta.3@@antv/matrix-util/esm/ext.js
var ext_namespaceObject = {};
__webpack_require__.r(ext_namespaceObject);
__webpack_require__.d(ext_namespaceObject, "leftTranslate", function() { return leftTranslate; });
__webpack_require__.d(ext_namespaceObject, "leftRotate", function() { return leftRotate; });
__webpack_require__.d(ext_namespaceObject, "leftScale", function() { return leftScale; });
__webpack_require__.d(ext_namespaceObject, "transform", function() { return transform; });
__webpack_require__.d(ext_namespaceObject, "direction", function() { return direction; });
__webpack_require__.d(ext_namespaceObject, "angleTo", function() { return angleTo; });
__webpack_require__.d(ext_namespaceObject, "vertical", function() { return vertical; });

// EXTERNAL MODULE: ./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/index.js + 1 modules
var esm = __webpack_require__("9178");

// CONCATENATED MODULE: ./node_modules/_@antv_matrix-util@3.1.0-beta.3@@antv/matrix-util/esm/ext.js
/**
 * @description 扩展方法，提供 gl-matrix 为提供的方法
 * */

function leftTranslate(out, a, v) {
    var transMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];
    esm["a" /* mat3 */].fromTranslation(transMat, v);
    return esm["a" /* mat3 */].multiply(out, transMat, a);
}
function leftRotate(out, a, rad) {
    var rotateMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];
    esm["a" /* mat3 */].fromRotation(rotateMat, rad);
    return esm["a" /* mat3 */].multiply(out, rotateMat, a);
}
function leftScale(out, a, v) {
    var scaleMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];
    esm["a" /* mat3 */].fromScaling(scaleMat, v);
    return esm["a" /* mat3 */].multiply(out, scaleMat, a);
}
function leftMultiply(out, a, a1) {
    return esm["a" /* mat3 */].multiply(out, a1, a);
}
/**
 * 根据 actions 来做 transform
 * @param m
 * @param actions
 */
function transform(m, actions) {
    var matrix = m ? [].concat(m) : [1, 0, 0, 0, 1, 0, 0, 0, 1];
    for (var i = 0, len = actions.length; i < len; i++) {
        var action = actions[i];
        switch (action[0]) {
            case 't':
                leftTranslate(matrix, matrix, [action[1], action[2]]);
                break;
            case 's':
                leftScale(matrix, matrix, [action[1], action[2]]);
                break;
            case 'r':
                leftRotate(matrix, matrix, action[1]);
                break;
            case 'm':
                leftMultiply(matrix, matrix, action[1]);
                break;
            default:
                break;
        }
    }
    return matrix;
}
/**
 * 向量 v1 到 向量 v2 夹角的方向
 * @param  {Array} v1 向量
 * @param  {Array} v2 向量
 * @return {Boolean} >= 0 顺时针 < 0 逆时针
 */
function direction(v1, v2) {
    return v1[0] * v2[1] - v2[0] * v1[1];
}
/**
 * 二维向量 v1 到 v2 的夹角
 * @param v1
 * @param v2
 * @param direct
 */
function angleTo(v1, v2, direct) {
    var ang = esm["b" /* vec2 */].angle(v1, v2);
    var angleLargeThanPI = direction(v1, v2) >= 0;
    if (direct) {
        if (angleLargeThanPI) {
            return Math.PI * 2 - ang;
        }
        return ang;
    }
    if (angleLargeThanPI) {
        return ang;
    }
    return Math.PI * 2 - ang;
}
/**
 * 计算二维向量的垂直向量
 * @param out
 * @param v
 * @param flag
 */
function vertical(out, v, flag) {
    if (flag) {
        out[0] = v[1];
        out[1] = -1 * v[0];
    }
    else {
        out[0] = -1 * v[1];
        out[1] = v[0];
    }
    return out;
}
//# sourceMappingURL=ext.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_matrix-util@3.1.0-beta.3@@antv/matrix-util/esm/index.js



//# sourceMappingURL=index.js.map

/***/ }),

/***/ "d81b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var DESCRIPTORS = __webpack_require__("98c8");
var isArray = __webpack_require__("c806");

var $TypeError = TypeError;
// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe
var getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;

// Safari < 13 does not throw an error in this case
var SILENT_ON_NON_WRITABLE_LENGTH_SET = DESCRIPTORS && !function () {
  // makes no sense without proper strict mode support
  if (this !== undefined) return true;
  try {
    // eslint-disable-next-line es/no-object-defineproperty -- safe
    Object.defineProperty([], 'length', { writable: false }).length = 1;
  } catch (error) {
    return error instanceof TypeError;
  }
}();

module.exports = SILENT_ON_NON_WRITABLE_LENGTH_SET ? function (O, length) {
  if (isArray(O) && !getOwnPropertyDescriptor(O, 'length').writable) {
    throw new $TypeError('Cannot set read only .length');
  } return O.length = length;
} : function (O, length) {
  return O.length = length;
};


/***/ }),

/***/ "d835":
/***/ (function(module, exports, __webpack_require__) {

var Hash = __webpack_require__("30b8"),
    ListCache = __webpack_require__("4127"),
    Map = __webpack_require__("7614");

/**
 * Removes all key-value entries from the map.
 *
 * @private
 * @name clear
 * @memberOf MapCache
 */
function mapCacheClear() {
  this.size = 0;
  this.__data__ = {
    'hash': new Hash,
    'map': new (Map || ListCache),
    'string': new Hash
  };
}

module.exports = mapCacheClear;


/***/ }),

/***/ "d865":
/***/ (function(module, exports, __webpack_require__) {

var flatten = __webpack_require__("a93b"),
    overRest = __webpack_require__("31b4"),
    setToString = __webpack_require__("a978");

/**
 * A specialized version of `baseRest` which flattens the rest array.
 *
 * @private
 * @param {Function} func The function to apply a rest parameter to.
 * @returns {Function} Returns the new function.
 */
function flatRest(func) {
  return setToString(overRest(func, undefined, flatten), func + '');
}

module.exports = flatRest;


/***/ }),

/***/ "d8ba":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__("9774");
var ordinaryToPrimitive = __webpack_require__("d95c");

var $TypeError = TypeError;

// `Date.prototype[@@toPrimitive](hint)` method implementation
// https://tc39.es/ecma262/#sec-date.prototype-@@toprimitive
module.exports = function (hint) {
  anObject(this);
  if (hint === 'string' || hint === 'default') hint = 'string';
  else if (hint !== 'number') throw new $TypeError('Incorrect hint');
  return ordinaryToPrimitive(this, hint);
};


/***/ }),

/***/ "d8f5":
/***/ (function(module, exports, __webpack_require__) {

var arrayPush = __webpack_require__("aa0c"),
    isFlattenable = __webpack_require__("b303");

/**
 * The base implementation of `_.flatten` with support for restricting flattening.
 *
 * @private
 * @param {Array} array The array to flatten.
 * @param {number} depth The maximum recursion depth.
 * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.
 * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.
 * @param {Array} [result=[]] The initial result value.
 * @returns {Array} Returns the new flattened array.
 */
function baseFlatten(array, depth, predicate, isStrict, result) {
  var index = -1,
      length = array.length;

  predicate || (predicate = isFlattenable);
  result || (result = []);

  while (++index < length) {
    var value = array[index];
    if (depth > 0 && predicate(value)) {
      if (depth > 1) {
        // Recursively flatten arrays (susceptible to call stack limits).
        baseFlatten(value, depth - 1, predicate, isStrict, result);
      } else {
        arrayPush(result, value);
      }
    } else if (!isStrict) {
      result[result.length] = value;
    }
  }
  return result;
}

module.exports = baseFlatten;


/***/ }),

/***/ "d92c":
/***/ (function(module, exports) {

/**
 * Checks if `value` is object-like. A value is object-like if it's not `null`
 * and has a `typeof` result of "object".
 *
 * @static
 * @memberOf _
 * @since 4.0.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is object-like, else `false`.
 * @example
 *
 * _.isObjectLike({});
 * // => true
 *
 * _.isObjectLike([1, 2, 3]);
 * // => true
 *
 * _.isObjectLike(_.noop);
 * // => false
 *
 * _.isObjectLike(null);
 * // => false
 */
function isObjectLike(value) {
  return value != null && typeof value == 'object';
}

module.exports = isObjectLike;


/***/ }),

/***/ "d95c":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__("ded0");
var isCallable = __webpack_require__("fe72");
var isObject = __webpack_require__("d2cb");

var $TypeError = TypeError;

// `OrdinaryToPrimitive` abstract operation
// https://tc39.es/ecma262/#sec-ordinarytoprimitive
module.exports = function (input, pref) {
  var fn, val;
  if (pref === 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  if (isCallable(fn = input.valueOf) && !isObject(val = call(fn, input))) return val;
  if (pref !== 'string' && isCallable(fn = input.toString) && !isObject(val = call(fn, input))) return val;
  throw new $TypeError("Can't convert object to primitive value");
};


/***/ }),

/***/ "d96e":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var is_object_like_1 = __webpack_require__("7678");
var is_type_1 = __webpack_require__("6627");
var isPlainObject = function (value) {
    /**
     * isObjectLike(new Foo) => false
     * isObjectLike([1, 2, 3]) => false
     * isObjectLike({ x: 0, y: 0 }) => true
     * isObjectLike(Object.create(null)) => true
     */
    if (!is_object_like_1.default(value) || !is_type_1.default(value, 'Object')) {
        return false;
    }
    if (Object.getPrototypeOf(value) === null) {
        return true;
    }
    var proto = value;
    while (Object.getPrototypeOf(proto) !== null) {
        proto = Object.getPrototypeOf(proto);
    }
    return Object.getPrototypeOf(value) === proto;
};
exports.default = isPlainObject;
//# sourceMappingURL=is-plain-object.js.map

/***/ }),

/***/ "d987":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_WEAK_MAP = __webpack_require__("709d");
var globalThis = __webpack_require__("92e2");
var isObject = __webpack_require__("d2cb");
var createNonEnumerableProperty = __webpack_require__("80b9");
var hasOwn = __webpack_require__("85ed");
var shared = __webpack_require__("50c7");
var sharedKey = __webpack_require__("e152");
var hiddenKeys = __webpack_require__("b920");

var OBJECT_ALREADY_INITIALIZED = 'Object already initialized';
var TypeError = globalThis.TypeError;
var WeakMap = globalThis.WeakMap;
var set, get, has;

var enforce = function (it) {
  return has(it) ? get(it) : set(it, {});
};

var getterFor = function (TYPE) {
  return function (it) {
    var state;
    if (!isObject(it) || (state = get(it)).type !== TYPE) {
      throw new TypeError('Incompatible receiver, ' + TYPE + ' required');
    } return state;
  };
};

if (NATIVE_WEAK_MAP || shared.state) {
  var store = shared.state || (shared.state = new WeakMap());
  /* eslint-disable no-self-assign -- prototype methods protection */
  store.get = store.get;
  store.has = store.has;
  store.set = store.set;
  /* eslint-enable no-self-assign -- prototype methods protection */
  set = function (it, metadata) {
    if (store.has(it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    store.set(it, metadata);
    return metadata;
  };
  get = function (it) {
    return store.get(it) || {};
  };
  has = function (it) {
    return store.has(it);
  };
} else {
  var STATE = sharedKey('state');
  hiddenKeys[STATE] = true;
  set = function (it, metadata) {
    if (hasOwn(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);
    metadata.facade = it;
    createNonEnumerableProperty(it, STATE, metadata);
    return metadata;
  };
  get = function (it) {
    return hasOwn(it, STATE) ? it[STATE] : {};
  };
  has = function (it) {
    return hasOwn(it, STATE);
  };
}

module.exports = {
  set: set,
  get: get,
  has: has,
  enforce: enforce,
  getterFor: getterFor
};


/***/ }),

/***/ "db26":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview defs
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__("6d77");
var gradient_1 = __webpack_require__("8914");
var shadow_1 = __webpack_require__("3ed7");
var arrow_1 = __webpack_require__("c198");
var clip_1 = __webpack_require__("e335");
var pattern_1 = __webpack_require__("860f");
var dom_1 = __webpack_require__("7431");
var Defs = /** @class */ (function () {
    function Defs(canvas) {
        var el = dom_1.createSVGElement('defs');
        var id = util_1.uniqueId('defs_');
        el.id = id;
        canvas.appendChild(el);
        this.children = [];
        this.defaultArrow = {};
        this.el = el;
        this.canvas = canvas;
    }
    Defs.prototype.find = function (type, attr) {
        var children = this.children;
        var result = null;
        for (var i = 0; i < children.length; i++) {
            if (children[i].match(type, attr)) {
                result = children[i].id;
                break;
            }
        }
        return result;
    };
    Defs.prototype.findById = function (id) {
        var children = this.children;
        var flag = null;
        for (var i = 0; i < children.length; i++) {
            if (children[i].id === id) {
                flag = children[i];
                break;
            }
        }
        return flag;
    };
    Defs.prototype.add = function (item) {
        this.children.push(item);
        item.canvas = this.canvas;
        item.parent = this;
    };
    Defs.prototype.getDefaultArrow = function (attrs, name) {
        var stroke = attrs.stroke || attrs.strokeStyle;
        if (this.defaultArrow[stroke]) {
            return this.defaultArrow[stroke].id;
        }
        var arrow = new arrow_1.default(attrs, name);
        this.defaultArrow[stroke] = arrow;
        this.el.appendChild(arrow.el);
        this.add(arrow);
        return arrow.id;
    };
    Defs.prototype.addGradient = function (cfg) {
        var gradient = new gradient_1.default(cfg);
        this.el.appendChild(gradient.el);
        this.add(gradient);
        return gradient.id;
    };
    Defs.prototype.addArrow = function (attrs, name) {
        var arrow = new arrow_1.default(attrs, name);
        this.el.appendChild(arrow.el);
        this.add(arrow);
        return arrow.id;
    };
    Defs.prototype.addShadow = function (cfg) {
        var shadow = new shadow_1.default(cfg);
        this.el.appendChild(shadow.el);
        this.add(shadow);
        return shadow.id;
    };
    Defs.prototype.addPattern = function (cfg) {
        var pattern = new pattern_1.default(cfg);
        this.el.appendChild(pattern.el);
        this.add(pattern);
        return pattern.id;
    };
    Defs.prototype.addClip = function (cfg) {
        var clip = new clip_1.default(cfg);
        this.el.appendChild(clip.el);
        this.add(clip);
        return clip.id;
    };
    return Defs;
}());
exports.default = Defs;
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "dc5a":
/***/ (function(module, exports, __webpack_require__) {

var baseAssignValue = __webpack_require__("4c93"),
    eq = __webpack_require__("4e90");

/**
 * This function is like `assignValue` except that it doesn't assign
 * `undefined` values.
 *
 * @private
 * @param {Object} object The object to modify.
 * @param {string} key The key of the property to assign.
 * @param {*} value The value to assign.
 */
function assignMergeValue(object, key, value) {
  if ((value !== undefined && !eq(object[key], value)) ||
      (value === undefined && !(key in object))) {
    baseAssignValue(object, key, value);
  }
}

module.exports = assignMergeValue;


/***/ }),

/***/ "dc9b":
/***/ (function(module, exports, __webpack_require__) {

var Symbol = __webpack_require__("b155"),
    getRawTag = __webpack_require__("c015"),
    objectToString = __webpack_require__("b7f4");

/** `Object#toString` result references. */
var nullTag = '[object Null]',
    undefinedTag = '[object Undefined]';

/** Built-in value references. */
var symToStringTag = Symbol ? Symbol.toStringTag : undefined;

/**
 * The base implementation of `getTag` without fallbacks for buggy environments.
 *
 * @private
 * @param {*} value The value to query.
 * @returns {string} Returns the `toStringTag`.
 */
function baseGetTag(value) {
  if (value == null) {
    return value === undefined ? undefinedTag : nullTag;
  }
  return (symToStringTag && symToStringTag in Object(value))
    ? getRawTag(value)
    : objectToString(value);
}

module.exports = baseGetTag;


/***/ }),

/***/ "dcd7":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $String = String;

module.exports = function (argument) {
  try {
    return $String(argument);
  } catch (error) {
    return 'Object';
  }
};


/***/ }),

/***/ "dd26":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__("9774");
var isObject = __webpack_require__("d2cb");
var newPromiseCapability = __webpack_require__("34b0");

module.exports = function (C, x) {
  anObject(C);
  if (isObject(x) && x.constructor === C) return x;
  var promiseCapability = newPromiseCapability.f(C);
  var resolve = promiseCapability.resolve;
  resolve(x);
  return promiseCapability.promise;
};


/***/ }),

/***/ "dda1":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var arraySpeciesConstructor = __webpack_require__("e63f");

// `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray, length) {
  return new (arraySpeciesConstructor(originalArray))(length === 0 ? 0 : length);
};


/***/ }),

/***/ "ddd9":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var base_1 = __webpack_require__("6cb2");
Object.defineProperty(exports, "Base", { enumerable: true, get: function () { return base_1.default; } });
var circle_1 = __webpack_require__("5849");
Object.defineProperty(exports, "Circle", { enumerable: true, get: function () { return circle_1.default; } });
var dom_1 = __webpack_require__("171f");
Object.defineProperty(exports, "Dom", { enumerable: true, get: function () { return dom_1.default; } });
var ellipse_1 = __webpack_require__("a9b1");
Object.defineProperty(exports, "Ellipse", { enumerable: true, get: function () { return ellipse_1.default; } });
var image_1 = __webpack_require__("97c0");
Object.defineProperty(exports, "Image", { enumerable: true, get: function () { return image_1.default; } });
var line_1 = __webpack_require__("559c");
Object.defineProperty(exports, "Line", { enumerable: true, get: function () { return line_1.default; } });
var marker_1 = __webpack_require__("a9cc");
Object.defineProperty(exports, "Marker", { enumerable: true, get: function () { return marker_1.default; } });
var path_1 = __webpack_require__("a726");
Object.defineProperty(exports, "Path", { enumerable: true, get: function () { return path_1.default; } });
var polygon_1 = __webpack_require__("8668");
Object.defineProperty(exports, "Polygon", { enumerable: true, get: function () { return polygon_1.default; } });
var polyline_1 = __webpack_require__("22e5");
Object.defineProperty(exports, "Polyline", { enumerable: true, get: function () { return polyline_1.default; } });
var rect_1 = __webpack_require__("cff1");
Object.defineProperty(exports, "Rect", { enumerable: true, get: function () { return rect_1.default; } });
var text_1 = __webpack_require__("75d4");
Object.defineProperty(exports, "Text", { enumerable: true, get: function () { return text_1.default; } });
//# sourceMappingURL=index.js.map

/***/ }),

/***/ "de7c":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");

var id = 0;
var postfix = Math.random();
var toString = uncurryThis(1.0.toString);

module.exports = function (key) {
  return 'Symbol(' + (key === undefined ? '' : key) + ')_' + toString(++id + postfix, 36);
};


/***/ }),

/***/ "de9a":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var g_base_1 = __webpack_require__("ae4c");
var util_1 = __webpack_require__("6d77");
var Shape = __webpack_require__("ddd9");
var draw_1 = __webpack_require__("8237");
var svg_1 = __webpack_require__("6865");
var constant_1 = __webpack_require__("7a93");
var dom_1 = __webpack_require__("7431");
var Group = /** @class */ (function (_super) {
    tslib_1.__extends(Group, _super);
    function Group() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    // SVG 中分组对应实体标签 <g>
    Group.prototype.isEntityGroup = function () {
        return true;
    };
    Group.prototype.createDom = function () {
        var element = dom_1.createSVGElement('g');
        this.set('el', element);
        var parent = this.getParent();
        if (parent) {
            var parentNode = parent.get('el');
            if (parentNode) {
                parentNode.appendChild(element);
            }
            else {
                // parentNode maybe null for group
                parentNode = parent.createDom();
                parent.set('el', parentNode);
                parentNode.appendChild(element);
            }
        }
        return element;
    };
    // 覆盖基类的 afterAttrsChange 方法
    Group.prototype.afterAttrsChange = function (targetAttrs) {
        _super.prototype.afterAttrsChange.call(this, targetAttrs);
        var canvas = this.get('canvas');
        // 只有挂载到画布下，才对元素进行实际渲染
        if (canvas && canvas.get('autoDraw')) {
            var context = canvas.get('context');
            this.createPath(context, targetAttrs);
        }
    };
    /**
     * 一些方法调用会引起画布变化
     * @param {ChangeType} changeType 改变的类型
     */
    Group.prototype.onCanvasChange = function (changeType) {
        draw_1.refreshElement(this, changeType);
    };
    Group.prototype.getShapeBase = function () {
        return Shape;
    };
    Group.prototype.getGroupBase = function () {
        return Group;
    };
    Group.prototype.draw = function (context) {
        var children = this.getChildren();
        var el = this.get('el');
        if (this.get('destroyed')) {
            if (el) {
                el.parentNode.removeChild(el);
            }
        }
        else {
            if (!el) {
                this.createDom();
            }
            svg_1.setClip(this, context);
            this.createPath(context);
            if (children.length) {
                draw_1.drawChildren(context, children);
            }
        }
    };
    /**
     * 绘制分组的路径
     * @param {Defs} context 上下文
     * @param {ShapeAttrs} targetAttrs 渲染的目标属性
     */
    Group.prototype.createPath = function (context, targetAttrs) {
        var attrs = this.attr();
        var el = this.get('el');
        util_1.each(targetAttrs || attrs, function (value, attr) {
            if (constant_1.SVG_ATTR_MAP[attr]) {
                el.setAttribute(constant_1.SVG_ATTR_MAP[attr], value);
            }
        });
        svg_1.setTransform(this);
    };
    return Group;
}(g_base_1.AbstractGroup));
exports.default = Group;
//# sourceMappingURL=group.js.map

/***/ }),

/***/ "ded0":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var NATIVE_BIND = __webpack_require__("48d3");

var call = Function.prototype.call;

module.exports = NATIVE_BIND ? call.bind(call) : function () {
  return call.apply(call, arguments);
};


/***/ }),

/***/ "deed":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isNullOrUndefined = __webpack_require__("2e64");

var $TypeError = TypeError;

// `RequireObjectCoercible` abstract operation
// https://tc39.es/ecma262/#sec-requireobjectcoercible
module.exports = function (it) {
  if (isNullOrUndefined(it)) throw new $TypeError("Can't call method on " + it);
  return it;
};


/***/ }),

/***/ "e013":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var TO_STRING_TAG_SUPPORT = __webpack_require__("51cb");
var isCallable = __webpack_require__("fe72");
var classofRaw = __webpack_require__("51d7");
var wellKnownSymbol = __webpack_require__("9a0b");

var TO_STRING_TAG = wellKnownSymbol('toStringTag');
var $Object = Object;

// ES3 wrong here
var CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) === 'Arguments';

// fallback for IE11 Script Access Denied error
var tryGet = function (it, key) {
  try {
    return it[key];
  } catch (error) { /* empty */ }
};

// getting tag from ES6+ `Object.prototype.toString`
module.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {
  var O, tag, result;
  return it === undefined ? 'Undefined' : it === null ? 'Null'
    // @@toStringTag case
    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag
    // builtinTag case
    : CORRECT_ARGUMENTS ? classofRaw(O)
    // ES3 arguments fallback
    : (result = classofRaw(O)) === 'Object' && isCallable(O.callee) ? 'Arguments' : result;
};


/***/ }),

/***/ "e03d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable no-unused-vars -- required for functions `.length` */
var $ = __webpack_require__("a884");
var globalThis = __webpack_require__("92e2");
var apply = __webpack_require__("b376");
var wrapErrorConstructorWithCause = __webpack_require__("9dae");

var WEB_ASSEMBLY = 'WebAssembly';
var WebAssembly = globalThis[WEB_ASSEMBLY];

// eslint-disable-next-line es/no-error-cause -- feature detection
var FORCED = new Error('e', { cause: 7 }).cause !== 7;

var exportGlobalErrorCauseWrapper = function (ERROR_NAME, wrapper) {
  var O = {};
  O[ERROR_NAME] = wrapErrorConstructorWithCause(ERROR_NAME, wrapper, FORCED);
  $({ global: true, constructor: true, arity: 1, forced: FORCED }, O);
};

var exportWebAssemblyErrorCauseWrapper = function (ERROR_NAME, wrapper) {
  if (WebAssembly && WebAssembly[ERROR_NAME]) {
    var O = {};
    O[ERROR_NAME] = wrapErrorConstructorWithCause(WEB_ASSEMBLY + '.' + ERROR_NAME, wrapper, FORCED);
    $({ target: WEB_ASSEMBLY, stat: true, constructor: true, arity: 1, forced: FORCED }, O);
  }
};

// https://tc39.es/ecma262/#sec-nativeerror
exportGlobalErrorCauseWrapper('Error', function (init) {
  return function Error(message) { return apply(init, this, arguments); };
});
exportGlobalErrorCauseWrapper('EvalError', function (init) {
  return function EvalError(message) { return apply(init, this, arguments); };
});
exportGlobalErrorCauseWrapper('RangeError', function (init) {
  return function RangeError(message) { return apply(init, this, arguments); };
});
exportGlobalErrorCauseWrapper('ReferenceError', function (init) {
  return function ReferenceError(message) { return apply(init, this, arguments); };
});
exportGlobalErrorCauseWrapper('SyntaxError', function (init) {
  return function SyntaxError(message) { return apply(init, this, arguments); };
});
exportGlobalErrorCauseWrapper('TypeError', function (init) {
  return function TypeError(message) { return apply(init, this, arguments); };
});
exportGlobalErrorCauseWrapper('URIError', function (init) {
  return function URIError(message) { return apply(init, this, arguments); };
});
exportWebAssemblyErrorCauseWrapper('CompileError', function (init) {
  return function CompileError(message) { return apply(init, this, arguments); };
});
exportWebAssemblyErrorCauseWrapper('LinkError', function (init) {
  return function LinkError(message) { return apply(init, this, arguments); };
});
exportWebAssemblyErrorCauseWrapper('RuntimeError', function (init) {
  return function RuntimeError(message) { return apply(init, this, arguments); };
});


/***/ }),

/***/ "e04a":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
function modifyCSS(dom, css) {
    if (dom) {
        for (var key in css) {
            if (css.hasOwnProperty(key)) {
                dom.style[key] = css[key];
            }
        }
    }
    return dom;
}
exports.default = modifyCSS;
//# sourceMappingURL=modify-css.js.map

/***/ }),

/***/ "e05a":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "catmullRomToBezier", function() { return catmullRomToBezier; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fillPath", function() { return fillPath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "fillPathByDiff", function() { return fillPathByDiff; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "formatPath", function() { return formatPath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "intersection", function() { return intersection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parsePathArray", function() { return parsePathArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "parsePathString", function() { return parsePathString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pathToAbsolute", function() { return pathToAbsolute; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "pathToCurve", function() { return pathToCurve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rectPath", function() { return rectPath; });
/* harmony import */ var _antv_util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("6d77");

var SPACES = '\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029';
var PATH_COMMAND = new RegExp("([a-z])[" + SPACES + ",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[" + SPACES + "]*,?[" + SPACES + "]*)+)", 'ig');
var PATH_VALUES = new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[" + SPACES + "]*,?[" + SPACES + "]*", 'ig');
// Parse given path string into an array of arrays of path segments
var parsePathString = function (pathString) {
    if (!pathString) {
        return null;
    }
    if (Object(_antv_util__WEBPACK_IMPORTED_MODULE_0__["isArray"])(pathString)) {
        return pathString;
    }
    var paramCounts = {
        a: 7,
        c: 6,
        o: 2,
        h: 1,
        l: 2,
        m: 2,
        r: 4,
        q: 4,
        s: 4,
        t: 2,
        v: 1,
        u: 3,
        z: 0,
    };
    var data = [];
    String(pathString).replace(PATH_COMMAND, function (a, b, c) {
        var params = [];
        var name = b.toLowerCase();
        c.replace(PATH_VALUES, function (a, b) {
            b && params.push(+b);
        });
        if (name === 'm' && params.length > 2) {
            data.push([b].concat(params.splice(0, 2)));
            name = 'l';
            b = b === 'm' ? 'l' : 'L';
        }
        if (name === 'o' && params.length === 1) {
            data.push([b, params[0]]);
        }
        if (name === 'r') {
            data.push([b].concat(params));
        }
        else {
            while (params.length >= paramCounts[name]) {
                data.push([b].concat(params.splice(0, paramCounts[name])));
                if (!paramCounts[name]) {
                    break;
                }
            }
        }
        return pathString;
    });
    return data;
};
// http://schepers.cc/getting-to-the-point
var catmullRomToBezier = function (crp, z) {
    var d = [];
    // @ts-ignore
    for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {
        var p = [
            {
                x: +crp[i - 2],
                y: +crp[i - 1],
            },
            {
                x: +crp[i],
                y: +crp[i + 1],
            },
            {
                x: +crp[i + 2],
                y: +crp[i + 3],
            },
            {
                x: +crp[i + 4],
                y: +crp[i + 5],
            },
        ];
        if (z) {
            if (!i) {
                p[0] = {
                    x: +crp[iLen - 2],
                    y: +crp[iLen - 1],
                };
            }
            else if (iLen - 4 === i) {
                p[3] = {
                    x: +crp[0],
                    y: +crp[1],
                };
            }
            else if (iLen - 2 === i) {
                p[2] = {
                    x: +crp[0],
                    y: +crp[1],
                };
                p[3] = {
                    x: +crp[2],
                    y: +crp[3],
                };
            }
        }
        else {
            if (iLen - 4 === i) {
                p[3] = p[2];
            }
            else if (!i) {
                p[0] = {
                    x: +crp[i],
                    y: +crp[i + 1],
                };
            }
        }
        d.push([
            'C',
            (-p[0].x + 6 * p[1].x + p[2].x) / 6,
            (-p[0].y + 6 * p[1].y + p[2].y) / 6,
            (p[1].x + 6 * p[2].x - p[3].x) / 6,
            (p[1].y + 6 * p[2].y - p[3].y) / 6,
            p[2].x,
            p[2].y,
        ]);
    }
    return d;
};
var ellipsePath = function (x, y, rx, ry, a) {
    var res = [];
    if (a === null && ry === null) {
        ry = rx;
    }
    x = +x;
    y = +y;
    rx = +rx;
    ry = +ry;
    if (a !== null) {
        var rad = Math.PI / 180;
        var x1 = x + rx * Math.cos(-ry * rad);
        var x2 = x + rx * Math.cos(-a * rad);
        var y1 = y + rx * Math.sin(-ry * rad);
        var y2 = y + rx * Math.sin(-a * rad);
        res = [
            ['M', x1, y1],
            ['A', rx, rx, 0, +(a - ry > 180), 0, x2, y2],
        ];
    }
    else {
        res = [['M', x, y], ['m', 0, -ry], ['a', rx, ry, 0, 1, 1, 0, 2 * ry], ['a', rx, ry, 0, 1, 1, 0, -2 * ry], ['z']];
    }
    return res;
};
var pathToAbsolute = function (pathArray) {
    pathArray = parsePathString(pathArray);
    if (!pathArray || !pathArray.length) {
        return [['M', 0, 0]];
    }
    var res = [];
    var x = 0;
    var y = 0;
    var mx = 0;
    var my = 0;
    var start = 0;
    var pa0;
    var dots;
    if (pathArray[0][0] === 'M') {
        x = +pathArray[0][1];
        y = +pathArray[0][2];
        mx = x;
        my = y;
        start++;
        res[0] = ['M', x, y];
    }
    var crz = pathArray.length === 3 &&
        pathArray[0][0] === 'M' &&
        pathArray[1][0].toUpperCase() === 'R' &&
        pathArray[2][0].toUpperCase() === 'Z';
    for (var r = void 0, pa = void 0, i = start, ii = pathArray.length; i < ii; i++) {
        res.push((r = []));
        pa = pathArray[i];
        pa0 = pa[0];
        if (pa0 !== pa0.toUpperCase()) {
            r[0] = pa0.toUpperCase();
            switch (r[0]) {
                case 'A':
                    r[1] = pa[1];
                    r[2] = pa[2];
                    r[3] = pa[3];
                    r[4] = pa[4];
                    r[5] = pa[5];
                    r[6] = +pa[6] + x;
                    r[7] = +pa[7] + y;
                    break;
                case 'V':
                    r[1] = +pa[1] + y;
                    break;
                case 'H':
                    r[1] = +pa[1] + x;
                    break;
                case 'R':
                    dots = [x, y].concat(pa.slice(1));
                    for (var j = 2, jj = dots.length; j < jj; j++) {
                        dots[j] = +dots[j] + x;
                        dots[++j] = +dots[j] + y;
                    }
                    res.pop();
                    res = res.concat(catmullRomToBezier(dots, crz));
                    break;
                case 'O':
                    res.pop();
                    dots = ellipsePath(x, y, pa[1], pa[2]);
                    dots.push(dots[0]);
                    res = res.concat(dots);
                    break;
                case 'U':
                    res.pop();
                    res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));
                    r = ['U'].concat(res[res.length - 1].slice(-2));
                    break;
                case 'M':
                    mx = +pa[1] + x;
                    my = +pa[2] + y;
                    break; // for lint
                default:
                    for (var j = 1, jj = pa.length; j < jj; j++) {
                        r[j] = +pa[j] + (j % 2 ? x : y);
                    }
            }
        }
        else if (pa0 === 'R') {
            dots = [x, y].concat(pa.slice(1));
            res.pop();
            res = res.concat(catmullRomToBezier(dots, crz));
            r = ['R'].concat(pa.slice(-2));
        }
        else if (pa0 === 'O') {
            res.pop();
            dots = ellipsePath(x, y, pa[1], pa[2]);
            dots.push(dots[0]);
            res = res.concat(dots);
        }
        else if (pa0 === 'U') {
            res.pop();
            res = res.concat(ellipsePath(x, y, pa[1], pa[2], pa[3]));
            r = ['U'].concat(res[res.length - 1].slice(-2));
        }
        else {
            for (var k = 0, kk = pa.length; k < kk; k++) {
                r[k] = pa[k];
            }
        }
        pa0 = pa0.toUpperCase();
        if (pa0 !== 'O') {
            switch (r[0]) {
                case 'Z':
                    x = +mx;
                    y = +my;
                    break;
                case 'H':
                    x = r[1];
                    break;
                case 'V':
                    y = r[1];
                    break;
                case 'M':
                    mx = r[r.length - 2];
                    my = r[r.length - 1];
                    break; // for lint
                default:
                    x = r[r.length - 2];
                    y = r[r.length - 1];
            }
        }
    }
    return res;
};
var l2c = function (x1, y1, x2, y2) {
    return [x1, y1, x2, y2, x2, y2];
};
var q2c = function (x1, y1, ax, ay, x2, y2) {
    var _13 = 1 / 3;
    var _23 = 2 / 3;
    return [_13 * x1 + _23 * ax, _13 * y1 + _23 * ay, _13 * x2 + _23 * ax, _13 * y2 + _23 * ay, x2, y2];
};
var a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {
    // for more information of where this math came from visit:
    // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes
    if (rx === ry) {
        rx += 1;
    }
    var _120 = (Math.PI * 120) / 180;
    var rad = (Math.PI / 180) * (+angle || 0);
    var res = [];
    var xy;
    var f1;
    var f2;
    var cx;
    var cy;
    var rotate = function (x, y, rad) {
        var X = x * Math.cos(rad) - y * Math.sin(rad);
        var Y = x * Math.sin(rad) + y * Math.cos(rad);
        return {
            x: X,
            y: Y,
        };
    };
    if (!recursive) {
        xy = rotate(x1, y1, -rad);
        x1 = xy.x;
        y1 = xy.y;
        xy = rotate(x2, y2, -rad);
        x2 = xy.x;
        y2 = xy.y;
        if (x1 === x2 && y1 === y2) {
            // 若弧的起始点和终点重叠则错开一点
            x2 += 1;
            y2 += 1;
        }
        // const cos = Math.cos(Math.PI / 180 * angle);
        // const sin = Math.sin(Math.PI / 180 * angle);
        var x = (x1 - x2) / 2;
        var y = (y1 - y2) / 2;
        var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);
        if (h > 1) {
            h = Math.sqrt(h);
            rx = h * rx;
            ry = h * ry;
        }
        var rx2 = rx * rx;
        var ry2 = ry * ry;
        var k = (large_arc_flag === sweep_flag ? -1 : 1) *
            Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x)));
        cx = (k * rx * y) / ry + (x1 + x2) / 2;
        cy = (k * -ry * x) / rx + (y1 + y2) / 2;
        // @ts-ignore
        f1 = Math.asin(((y1 - cy) / ry).toFixed(9));
        // @ts-ignore
        f2 = Math.asin(((y2 - cy) / ry).toFixed(9));
        f1 = x1 < cx ? Math.PI - f1 : f1;
        f2 = x2 < cx ? Math.PI - f2 : f2;
        f1 < 0 && (f1 = Math.PI * 2 + f1);
        f2 < 0 && (f2 = Math.PI * 2 + f2);
        if (sweep_flag && f1 > f2) {
            f1 = f1 - Math.PI * 2;
        }
        if (!sweep_flag && f2 > f1) {
            f2 = f2 - Math.PI * 2;
        }
    }
    else {
        f1 = recursive[0];
        f2 = recursive[1];
        cx = recursive[2];
        cy = recursive[3];
    }
    var df = f2 - f1;
    if (Math.abs(df) > _120) {
        var f2old = f2;
        var x2old = x2;
        var y2old = y2;
        f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);
        x2 = cx + rx * Math.cos(f2);
        y2 = cy + ry * Math.sin(f2);
        res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);
    }
    df = f2 - f1;
    var c1 = Math.cos(f1);
    var s1 = Math.sin(f1);
    var c2 = Math.cos(f2);
    var s2 = Math.sin(f2);
    var t = Math.tan(df / 4);
    var hx = (4 / 3) * rx * t;
    var hy = (4 / 3) * ry * t;
    var m1 = [x1, y1];
    var m2 = [x1 + hx * s1, y1 - hy * c1];
    var m3 = [x2 + hx * s2, y2 - hy * c2];
    var m4 = [x2, y2];
    m2[0] = 2 * m1[0] - m2[0];
    m2[1] = 2 * m1[1] - m2[1];
    if (recursive) {
        return [m2, m3, m4].concat(res);
    }
    res = [m2, m3, m4].concat(res).join().split(',');
    var newres = [];
    for (var i = 0, ii = res.length; i < ii; i++) {
        newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;
    }
    return newres;
};
var pathToCurve = function (path, path2) {
    var p = pathToAbsolute(path);
    var p2 = path2 && pathToAbsolute(path2);
    var attrs = {
        x: 0,
        y: 0,
        bx: 0,
        by: 0,
        X: 0,
        Y: 0,
        qx: null,
        qy: null,
    };
    var attrs2 = {
        x: 0,
        y: 0,
        bx: 0,
        by: 0,
        X: 0,
        Y: 0,
        qx: null,
        qy: null,
    };
    var pcoms1 = []; // path commands of original path p
    var pcoms2 = []; // path commands of original path p2
    var pfirst = ''; // temporary holder for original path command
    var pcom = ''; // holder for previous path command of original path
    var ii;
    var processPath = function (path, d, pcom) {
        var nx;
        var ny;
        if (!path) {
            return ['C', d.x, d.y, d.x, d.y, d.x, d.y];
        }
        !(path[0] in
            {
                T: 1,
                Q: 1,
            }) && (d.qx = d.qy = null);
        switch (path[0]) {
            case 'M':
                d.X = path[1];
                d.Y = path[2];
                break;
            case 'A':
                path = ['C'].concat(a2c.apply(0, [d.x, d.y].concat(path.slice(1))));
                break;
            case 'S':
                if (pcom === 'C' || pcom === 'S') {
                    // In "S" case we have to take into account, if the previous command is C/S.
                    nx = d.x * 2 - d.bx; // And reflect the previous
                    ny = d.y * 2 - d.by; // command's control point relative to the current point.
                }
                else {
                    // or some else or nothing
                    nx = d.x;
                    ny = d.y;
                }
                path = ['C', nx, ny].concat(path.slice(1));
                break;
            case 'T':
                if (pcom === 'Q' || pcom === 'T') {
                    // In "T" case we have to take into account, if the previous command is Q/T.
                    d.qx = d.x * 2 - d.qx; // And make a reflection similar
                    d.qy = d.y * 2 - d.qy; // to case "S".
                }
                else {
                    // or something else or nothing
                    d.qx = d.x;
                    d.qy = d.y;
                }
                path = ['C'].concat(q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));
                break;
            case 'Q':
                d.qx = path[1];
                d.qy = path[2];
                path = ['C'].concat(q2c(d.x, d.y, path[1], path[2], path[3], path[4]));
                break;
            case 'L':
                path = ['C'].concat(l2c(d.x, d.y, path[1], path[2]));
                break;
            case 'H':
                path = ['C'].concat(l2c(d.x, d.y, path[1], d.y));
                break;
            case 'V':
                path = ['C'].concat(l2c(d.x, d.y, d.x, path[1]));
                break;
            case 'Z':
                path = ['C'].concat(l2c(d.x, d.y, d.X, d.Y));
                break;
            default:
                break;
        }
        return path;
    };
    var fixArc = function (pp, i) {
        if (pp[i].length > 7) {
            pp[i].shift();
            var pi = pp[i];
            while (pi.length) {
                pcoms1[i] = 'A'; // if created multiple C:s, their original seg is saved
                p2 && (pcoms2[i] = 'A'); // the same as above
                pp.splice(i++, 0, ['C'].concat(pi.splice(0, 6)));
            }
            pp.splice(i, 1);
            ii = Math.max(p.length, (p2 && p2.length) || 0);
        }
    };
    var fixM = function (path1, path2, a1, a2, i) {
        if (path1 && path2 && path1[i][0] === 'M' && path2[i][0] !== 'M') {
            path2.splice(i, 0, ['M', a2.x, a2.y]);
            a1.bx = 0;
            a1.by = 0;
            a1.x = path1[i][1];
            a1.y = path1[i][2];
            ii = Math.max(p.length, (p2 && p2.length) || 0);
        }
    };
    ii = Math.max(p.length, (p2 && p2.length) || 0);
    for (var i = 0; i < ii; i++) {
        p[i] && (pfirst = p[i][0]); // save current path command
        if (pfirst !== 'C') {
            // C is not saved yet, because it may be result of conversion
            pcoms1[i] = pfirst; // Save current path command
            i && (pcom = pcoms1[i - 1]); // Get previous path command pcom
        }
        p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath
        if (pcoms1[i] !== 'A' && pfirst === 'C')
            pcoms1[i] = 'C'; // A is the only command
        // which may produce multiple C:s
        // so we have to make sure that C is also C in original path
        fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1
        if (p2) {
            // the same procedures is done to p2
            p2[i] && (pfirst = p2[i][0]);
            if (pfirst !== 'C') {
                pcoms2[i] = pfirst;
                i && (pcom = pcoms2[i - 1]);
            }
            p2[i] = processPath(p2[i], attrs2, pcom);
            if (pcoms2[i] !== 'A' && pfirst === 'C') {
                pcoms2[i] = 'C';
            }
            fixArc(p2, i);
        }
        fixM(p, p2, attrs, attrs2, i);
        fixM(p2, p, attrs2, attrs, i);
        var seg = p[i];
        var seg2 = p2 && p2[i];
        var seglen = seg.length;
        var seg2len = p2 && seg2.length;
        attrs.x = seg[seglen - 2];
        attrs.y = seg[seglen - 1];
        attrs.bx = parseFloat(seg[seglen - 4]) || attrs.x;
        attrs.by = parseFloat(seg[seglen - 3]) || attrs.y;
        attrs2.bx = p2 && (parseFloat(seg2[seg2len - 4]) || attrs2.x);
        attrs2.by = p2 && (parseFloat(seg2[seg2len - 3]) || attrs2.y);
        attrs2.x = p2 && seg2[seg2len - 2];
        attrs2.y = p2 && seg2[seg2len - 1];
    }
    return p2 ? [p, p2] : p;
};
var p2s = /,?([a-z]),?/gi;
var parsePathArray = function (path) {
    return path.join(',').replace(p2s, '$1');
};
var base3 = function (t, p1, p2, p3, p4) {
    var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4;
    var t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;
    return t * t2 - 3 * p1 + 3 * p2;
};
var bezlen = function (x1, y1, x2, y2, x3, y3, x4, y4, z) {
    if (z === null) {
        z = 1;
    }
    z = z > 1 ? 1 : z < 0 ? 0 : z;
    var z2 = z / 2;
    var n = 12;
    var Tvalues = [
        -0.1252, 0.1252, -0.3678, 0.3678, -0.5873, 0.5873, -0.7699, 0.7699, -0.9041, 0.9041, -0.9816, 0.9816,
    ];
    var Cvalues = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472];
    var sum = 0;
    for (var i = 0; i < n; i++) {
        var ct = z2 * Tvalues[i] + z2;
        var xbase = base3(ct, x1, x2, x3, x4);
        var ybase = base3(ct, y1, y2, y3, y4);
        var comb = xbase * xbase + ybase * ybase;
        sum += Cvalues[i] * Math.sqrt(comb);
    }
    return z2 * sum;
};
var curveDim = function (x0, y0, x1, y1, x2, y2, x3, y3) {
    var tvalues = [];
    var bounds = [[], []];
    var a;
    var b;
    var c;
    var t;
    for (var i = 0; i < 2; ++i) {
        if (i === 0) {
            b = 6 * x0 - 12 * x1 + 6 * x2;
            a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;
            c = 3 * x1 - 3 * x0;
        }
        else {
            b = 6 * y0 - 12 * y1 + 6 * y2;
            a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;
            c = 3 * y1 - 3 * y0;
        }
        if (Math.abs(a) < 1e-12) {
            if (Math.abs(b) < 1e-12) {
                continue;
            }
            t = -c / b;
            if (t > 0 && t < 1) {
                tvalues.push(t);
            }
            continue;
        }
        var b2ac = b * b - 4 * c * a;
        var sqrtb2ac = Math.sqrt(b2ac);
        if (b2ac < 0) {
            continue;
        }
        var t1 = (-b + sqrtb2ac) / (2 * a);
        if (t1 > 0 && t1 < 1) {
            tvalues.push(t1);
        }
        var t2 = (-b - sqrtb2ac) / (2 * a);
        if (t2 > 0 && t2 < 1) {
            tvalues.push(t2);
        }
    }
    var j = tvalues.length;
    var jlen = j;
    var mt;
    while (j--) {
        t = tvalues[j];
        mt = 1 - t;
        bounds[0][j] = mt * mt * mt * x0 + 3 * mt * mt * t * x1 + 3 * mt * t * t * x2 + t * t * t * x3;
        bounds[1][j] = mt * mt * mt * y0 + 3 * mt * mt * t * y1 + 3 * mt * t * t * y2 + t * t * t * y3;
    }
    bounds[0][jlen] = x0;
    bounds[1][jlen] = y0;
    bounds[0][jlen + 1] = x3;
    bounds[1][jlen + 1] = y3;
    bounds[0].length = bounds[1].length = jlen + 2;
    return {
        min: {
            x: Math.min.apply(0, bounds[0]),
            y: Math.min.apply(0, bounds[1]),
        },
        max: {
            x: Math.max.apply(0, bounds[0]),
            y: Math.max.apply(0, bounds[1]),
        },
    };
};
var intersect = function (x1, y1, x2, y2, x3, y3, x4, y4) {
    if (Math.max(x1, x2) < Math.min(x3, x4) ||
        Math.min(x1, x2) > Math.max(x3, x4) ||
        Math.max(y1, y2) < Math.min(y3, y4) ||
        Math.min(y1, y2) > Math.max(y3, y4)) {
        return;
    }
    var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4);
    var ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4);
    var denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);
    if (!denominator) {
        return;
    }
    var px = nx / denominator;
    var py = ny / denominator;
    var px2 = +px.toFixed(2);
    var py2 = +py.toFixed(2);
    if (px2 < +Math.min(x1, x2).toFixed(2) ||
        px2 > +Math.max(x1, x2).toFixed(2) ||
        px2 < +Math.min(x3, x4).toFixed(2) ||
        px2 > +Math.max(x3, x4).toFixed(2) ||
        py2 < +Math.min(y1, y2).toFixed(2) ||
        py2 > +Math.max(y1, y2).toFixed(2) ||
        py2 < +Math.min(y3, y4).toFixed(2) ||
        py2 > +Math.max(y3, y4).toFixed(2)) {
        return;
    }
    return {
        x: px,
        y: py,
    };
};
var isPointInsideBBox = function (bbox, x, y) {
    return x >= bbox.x && x <= bbox.x + bbox.width && y >= bbox.y && y <= bbox.y + bbox.height;
};
var rectPath = function (x, y, w, h, r) {
    if (r) {
        return [
            ['M', +x + +r, y],
            ['l', w - r * 2, 0],
            ['a', r, r, 0, 0, 1, r, r],
            ['l', 0, h - r * 2],
            ['a', r, r, 0, 0, 1, -r, r],
            ['l', r * 2 - w, 0],
            ['a', r, r, 0, 0, 1, -r, -r],
            ['l', 0, r * 2 - h],
            ['a', r, r, 0, 0, 1, r, -r],
            ['z'],
        ];
    }
    var res = [['M', x, y], ['l', w, 0], ['l', 0, h], ['l', -w, 0], ['z']];
    // @ts-ignore
    res.parsePathArray = parsePathArray;
    return res;
};
var box = function (x, y, width, height) {
    if (x === null) {
        x = y = width = height = 0;
    }
    if (y === null) {
        y = x.y;
        width = x.width;
        height = x.height;
        x = x.x;
    }
    return {
        x: x,
        y: y,
        width: width,
        w: width,
        height: height,
        h: height,
        x2: x + width,
        y2: y + height,
        cx: x + width / 2,
        cy: y + height / 2,
        r1: Math.min(width, height) / 2,
        r2: Math.max(width, height) / 2,
        r0: Math.sqrt(width * width + height * height) / 2,
        path: rectPath(x, y, width, height),
        vb: [x, y, width, height].join(' '),
    };
};
var isBBoxIntersect = function (bbox1, bbox2) {
    bbox1 = box(bbox1);
    bbox2 = box(bbox2);
    return (isPointInsideBBox(bbox2, bbox1.x, bbox1.y) ||
        isPointInsideBBox(bbox2, bbox1.x2, bbox1.y) ||
        isPointInsideBBox(bbox2, bbox1.x, bbox1.y2) ||
        isPointInsideBBox(bbox2, bbox1.x2, bbox1.y2) ||
        isPointInsideBBox(bbox1, bbox2.x, bbox2.y) ||
        isPointInsideBBox(bbox1, bbox2.x2, bbox2.y) ||
        isPointInsideBBox(bbox1, bbox2.x, bbox2.y2) ||
        isPointInsideBBox(bbox1, bbox2.x2, bbox2.y2) ||
        (((bbox1.x < bbox2.x2 && bbox1.x > bbox2.x) || (bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)) &&
            ((bbox1.y < bbox2.y2 && bbox1.y > bbox2.y) || (bbox2.y < bbox1.y2 && bbox2.y > bbox1.y))));
};
var bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {
    if (!Object(_antv_util__WEBPACK_IMPORTED_MODULE_0__["isArray"])(p1x)) {
        p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];
    }
    var bbox = curveDim.apply(null, p1x);
    return box(bbox.min.x, bbox.min.y, bbox.max.x - bbox.min.x, bbox.max.y - bbox.min.y);
};
var findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {
    var t1 = 1 - t;
    var t13 = Math.pow(t1, 3);
    var t12 = Math.pow(t1, 2);
    var t2 = t * t;
    var t3 = t2 * t;
    var x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x;
    var y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y;
    var mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x);
    var my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y);
    var nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x);
    var ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y);
    var ax = t1 * p1x + t * c1x;
    var ay = t1 * p1y + t * c1y;
    var cx = t1 * c2x + t * p2x;
    var cy = t1 * c2y + t * p2y;
    var alpha = 90 - (Math.atan2(mx - nx, my - ny) * 180) / Math.PI;
    // (mx > nx || my < ny) && (alpha += 180);
    return {
        x: x,
        y: y,
        m: {
            x: mx,
            y: my,
        },
        n: {
            x: nx,
            y: ny,
        },
        start: {
            x: ax,
            y: ay,
        },
        end: {
            x: cx,
            y: cy,
        },
        alpha: alpha,
    };
};
var interHelper = function (bez1, bez2, justCount) {
    var bbox1 = bezierBBox(bez1);
    var bbox2 = bezierBBox(bez2);
    if (!isBBoxIntersect(bbox1, bbox2)) {
        return justCount ? 0 : [];
    }
    var l1 = bezlen.apply(0, bez1);
    var l2 = bezlen.apply(0, bez2);
    var n1 = ~~(l1 / 8);
    var n2 = ~~(l2 / 8);
    var dots1 = [];
    var dots2 = [];
    var xy = {};
    var res = justCount ? 0 : [];
    for (var i = 0; i < n1 + 1; i++) {
        var d = findDotsAtSegment.apply(0, bez1.concat(i / n1));
        dots1.push({
            x: d.x,
            y: d.y,
            t: i / n1,
        });
    }
    for (var i = 0; i < n2 + 1; i++) {
        var d = findDotsAtSegment.apply(0, bez2.concat(i / n2));
        dots2.push({
            x: d.x,
            y: d.y,
            t: i / n2,
        });
    }
    for (var i = 0; i < n1; i++) {
        for (var j = 0; j < n2; j++) {
            var di = dots1[i];
            var di1 = dots1[i + 1];
            var dj = dots2[j];
            var dj1 = dots2[j + 1];
            var ci = Math.abs(di1.x - di.x) < 0.001 ? 'y' : 'x';
            var cj = Math.abs(dj1.x - dj.x) < 0.001 ? 'y' : 'x';
            var is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);
            if (is) {
                if (xy[is.x.toFixed(4)] === is.y.toFixed(4)) {
                    continue;
                }
                xy[is.x.toFixed(4)] = is.y.toFixed(4);
                var t1 = di.t + Math.abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t);
                var t2 = dj.t + Math.abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);
                if (t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1) {
                    if (justCount) {
                        // @ts-ignore
                        res += 1;
                    }
                    else {
                        // @ts-ignore
                        res.push({
                            x: is.x,
                            y: is.y,
                            t1: t1,
                            t2: t2,
                        });
                    }
                }
            }
        }
    }
    return res;
};
var interPathHelper = function (path1, path2, justCount) {
    path1 = pathToCurve(path1);
    path2 = pathToCurve(path2);
    var x1;
    var y1;
    var x2;
    var y2;
    var x1m;
    var y1m;
    var x2m;
    var y2m;
    var bez1;
    var bez2;
    var res = justCount ? 0 : [];
    for (var i = 0, ii = path1.length; i < ii; i++) {
        var pi = path1[i];
        if (pi[0] === 'M') {
            x1 = x1m = pi[1];
            y1 = y1m = pi[2];
        }
        else {
            if (pi[0] === 'C') {
                bez1 = [x1, y1].concat(pi.slice(1));
                x1 = bez1[6];
                y1 = bez1[7];
            }
            else {
                bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];
                x1 = x1m;
                y1 = y1m;
            }
            for (var j = 0, jj = path2.length; j < jj; j++) {
                var pj = path2[j];
                if (pj[0] === 'M') {
                    x2 = x2m = pj[1];
                    y2 = y2m = pj[2];
                }
                else {
                    if (pj[0] === 'C') {
                        bez2 = [x2, y2].concat(pj.slice(1));
                        x2 = bez2[6];
                        y2 = bez2[7];
                    }
                    else {
                        bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];
                        x2 = x2m;
                        y2 = y2m;
                    }
                    var intr = interHelper(bez1, bez2, justCount);
                    if (justCount) {
                        // @ts-ignore
                        res += intr;
                    }
                    else {
                        // @ts-ignore
                        for (var k = 0, kk = intr.length; k < kk; k++) {
                            intr[k].segment1 = i;
                            intr[k].segment2 = j;
                            intr[k].bez1 = bez1;
                            intr[k].bez2 = bez2;
                        }
                        // @ts-ignore
                        res = res.concat(intr);
                    }
                }
            }
        }
    }
    return res;
};
var intersection = function (path1, path2) {
    return interPathHelper(path1, path2);
};
function decasteljau(points, t) {
    var left = [];
    var right = [];
    function recurse(points, t) {
        if (points.length === 1) {
            left.push(points[0]);
            right.push(points[0]);
        }
        else {
            var middlePoints = [];
            for (var i = 0; i < points.length - 1; i++) {
                if (i === 0) {
                    left.push(points[0]);
                }
                if (i === points.length - 2) {
                    right.push(points[i + 1]);
                }
                middlePoints[i] = [
                    (1 - t) * points[i][0] + t * points[i + 1][0],
                    (1 - t) * points[i][1] + t * points[i + 1][1],
                ];
            }
            recurse(middlePoints, t);
        }
    }
    if (points.length) {
        recurse(points, t);
    }
    return { left: left, right: right.reverse() };
}
function splitCurve(start, end, count) {
    var points = [[start[1], start[2]]];
    count = count || 2;
    var segments = [];
    if (end[0] === 'A') {
        points.push(end[6]);
        points.push(end[7]);
    }
    else if (end[0] === 'C') {
        points.push([end[1], end[2]]);
        points.push([end[3], end[4]]);
        points.push([end[5], end[6]]);
    }
    else if (end[0] === 'S' || end[0] === 'Q') {
        points.push([end[1], end[2]]);
        points.push([end[3], end[4]]);
    }
    else {
        points.push([end[1], end[2]]);
    }
    var leftSegments = points;
    var t = 1 / count;
    for (var i = 0; i < count - 1; i++) {
        var rt = t / (1 - t * i);
        var split = decasteljau(leftSegments, rt);
        segments.push(split.left);
        leftSegments = split.right;
    }
    segments.push(leftSegments);
    var result = segments.map(function (segment) {
        var cmd = [];
        if (segment.length === 4) {
            cmd.push('C');
            cmd = cmd.concat(segment[2]);
        }
        if (segment.length >= 3) {
            if (segment.length === 3) {
                cmd.push('Q');
            }
            cmd = cmd.concat(segment[1]);
        }
        if (segment.length === 2) {
            cmd.push('L');
        }
        cmd = cmd.concat(segment[segment.length - 1]);
        return cmd;
    });
    return result;
}
var splitSegment = function (start, end, count) {
    if (count === 1) {
        return [[].concat(start)];
    }
    var segments = [];
    if (end[0] === 'L' || end[0] === 'C' || end[0] === 'Q') {
        segments = segments.concat(splitCurve(start, end, count));
    }
    else {
        var temp = [].concat(start);
        if (temp[0] === 'M') {
            temp[0] = 'L';
        }
        for (var i = 0; i <= count - 1; i++) {
            segments.push(temp);
        }
    }
    return segments;
};
var fillPath = function (source, target) {
    if (source.length === 1) {
        return source;
    }
    var sourceLen = source.length - 1;
    var targetLen = target.length - 1;
    var ratio = sourceLen / targetLen;
    var segmentsToFill = [];
    if (source.length === 1 && source[0][0] === 'M') {
        for (var i = 0; i < targetLen - sourceLen; i++) {
            source.push(source[0]);
        }
        return source;
    }
    for (var i = 0; i < targetLen; i++) {
        var index = Math.floor(ratio * i);
        segmentsToFill[index] = (segmentsToFill[index] || 0) + 1;
    }
    var filled = segmentsToFill.reduce(function (filled, count, i) {
        if (i === sourceLen) {
            return filled.concat(source[sourceLen]);
        }
        return filled.concat(splitSegment(source[i], source[i + 1], count));
    }, []);
    filled.unshift(source[0]);
    if (target[targetLen] === 'Z' || target[targetLen] === 'z') {
        filled.push('Z');
    }
    return filled;
};
var isEqual = function (obj1, obj2) {
    if (obj1.length !== obj2.length) {
        return false;
    }
    var result = true;
    Object(_antv_util__WEBPACK_IMPORTED_MODULE_0__["each"])(obj1, function (item, i) {
        if (item !== obj2[i]) {
            result = false;
            return false;
        }
    });
    return result;
};
function getMinDiff(del, add, modify) {
    var type = null;
    var min = modify;
    if (add < min) {
        min = add;
        type = 'add';
    }
    if (del < min) {
        min = del;
        type = 'del';
    }
    return {
        type: type,
        min: min,
    };
}
/*
 * https://en.wikipedia.org/wiki/Levenshtein_distance
 * 计算两条path的编辑距离
 */
var levenshteinDistance = function (source, target) {
    var sourceLen = source.length;
    var targetLen = target.length;
    var sourceSegment;
    var targetSegment;
    var temp = 0;
    if (sourceLen === 0 || targetLen === 0) {
        return null;
    }
    var dist = [];
    for (var i = 0; i <= sourceLen; i++) {
        dist[i] = [];
        dist[i][0] = { min: i };
    }
    for (var j = 0; j <= targetLen; j++) {
        dist[0][j] = { min: j };
    }
    for (var i = 1; i <= sourceLen; i++) {
        sourceSegment = source[i - 1];
        for (var j = 1; j <= targetLen; j++) {
            targetSegment = target[j - 1];
            if (isEqual(sourceSegment, targetSegment)) {
                temp = 0;
            }
            else {
                temp = 1;
            }
            var del = dist[i - 1][j].min + 1;
            var add = dist[i][j - 1].min + 1;
            var modify = dist[i - 1][j - 1].min + temp;
            dist[i][j] = getMinDiff(del, add, modify);
        }
    }
    return dist;
};
var fillPathByDiff = function (source, target) {
    var diffMatrix = levenshteinDistance(source, target);
    var sourceLen = source.length;
    var targetLen = target.length;
    var changes = [];
    var index = 1;
    var minPos = 1;
    // 如果source和target不是完全不相等
    if (diffMatrix[sourceLen][targetLen].min !== sourceLen) {
        // 获取从source到target所需改动
        for (var i = 1; i <= sourceLen; i++) {
            var min = diffMatrix[i][i].min;
            minPos = i;
            for (var j = index; j <= targetLen; j++) {
                if (diffMatrix[i][j].min < min) {
                    min = diffMatrix[i][j].min;
                    minPos = j;
                }
            }
            index = minPos;
            if (diffMatrix[i][index].type) {
                changes.push({ index: i - 1, type: diffMatrix[i][index].type });
            }
        }
        // 对source进行增删path
        for (var i = changes.length - 1; i >= 0; i--) {
            index = changes[i].index;
            if (changes[i].type === 'add') {
                source.splice(index, 0, [].concat(source[index]));
            }
            else {
                source.splice(index, 1);
            }
        }
    }
    // source尾部补齐
    sourceLen = source.length;
    var diff = targetLen - sourceLen;
    if (sourceLen < targetLen) {
        for (var i = 0; i < diff; i++) {
            if (source[sourceLen - 1][0] === 'z' || source[sourceLen - 1][0] === 'Z') {
                source.splice(sourceLen - 2, 0, source[sourceLen - 2]);
            }
            else {
                source.push(source[sourceLen - 1]);
            }
            sourceLen += 1;
        }
    }
    return source;
};
// 将两个点均分成count个点
function _splitPoints(points, former, count) {
    var result = [].concat(points);
    var index;
    var t = 1 / (count + 1);
    var formerEnd = _getSegmentPoints(former)[0];
    for (var i = 1; i <= count; i++) {
        t *= i;
        index = Math.floor(points.length * t);
        if (index === 0) {
            result.unshift([formerEnd[0] * t + points[index][0] * (1 - t), formerEnd[1] * t + points[index][1] * (1 - t)]);
        }
        else {
            result.splice(index, 0, [
                formerEnd[0] * t + points[index][0] * (1 - t),
                formerEnd[1] * t + points[index][1] * (1 - t),
            ]);
        }
    }
    return result;
}
/*
 * 抽取pathSegment中的关键点
 * M,L,A,Q,H,V一个端点
 * Q, S抽取一个端点，一个控制点
 * C抽取一个端点，两个控制点
 */
function _getSegmentPoints(segment) {
    var points = [];
    switch (segment[0]) {
        case 'M':
            points.push([segment[1], segment[2]]);
            break;
        case 'L':
            points.push([segment[1], segment[2]]);
            break;
        case 'A':
            points.push([segment[6], segment[7]]);
            break;
        case 'Q':
            points.push([segment[3], segment[4]]);
            points.push([segment[1], segment[2]]);
            break;
        case 'T':
            points.push([segment[1], segment[2]]);
            break;
        case 'C':
            points.push([segment[5], segment[6]]);
            points.push([segment[1], segment[2]]);
            points.push([segment[3], segment[4]]);
            break;
        case 'S':
            points.push([segment[3], segment[4]]);
            points.push([segment[1], segment[2]]);
            break;
        case 'H':
            points.push([segment[1], segment[1]]);
            break;
        case 'V':
            points.push([segment[1], segment[1]]);
            break;
        default:
    }
    return points;
}
var formatPath = function (fromPath, toPath) {
    if (fromPath.length <= 1) {
        return fromPath;
    }
    var points;
    for (var i = 0; i < toPath.length; i++) {
        if (fromPath[i][0] !== toPath[i][0]) {
            // 获取fromPath的pathSegment的端点，根据toPath的指令对其改造
            points = _getSegmentPoints(fromPath[i]);
            switch (toPath[i][0]) {
                case 'M':
                    fromPath[i] = ['M'].concat(points[0]);
                    break;
                case 'L':
                    fromPath[i] = ['L'].concat(points[0]);
                    break;
                case 'A':
                    fromPath[i] = [].concat(toPath[i]);
                    fromPath[i][6] = points[0][0];
                    fromPath[i][7] = points[0][1];
                    break;
                case 'Q':
                    if (points.length < 2) {
                        if (i > 0) {
                            points = _splitPoints(points, fromPath[i - 1], 1);
                        }
                        else {
                            fromPath[i] = toPath[i];
                            break;
                        }
                    }
                    fromPath[i] = ['Q'].concat(points.reduce(function (arr, i) {
                        return arr.concat(i);
                    }, []));
                    break;
                case 'T':
                    fromPath[i] = ['T'].concat(points[0]);
                    break;
                case 'C':
                    if (points.length < 3) {
                        if (i > 0) {
                            points = _splitPoints(points, fromPath[i - 1], 2);
                        }
                        else {
                            fromPath[i] = toPath[i];
                            break;
                        }
                    }
                    fromPath[i] = ['C'].concat(points.reduce(function (arr, i) {
                        return arr.concat(i);
                    }, []));
                    break;
                case 'S':
                    if (points.length < 2) {
                        if (i > 0) {
                            points = _splitPoints(points, fromPath[i - 1], 1);
                        }
                        else {
                            fromPath[i] = toPath[i];
                            break;
                        }
                    }
                    fromPath[i] = ['S'].concat(points.reduce(function (arr, i) {
                        return arr.concat(i);
                    }, []));
                    break;
                default:
                    fromPath[i] = toPath[i];
            }
        }
    }
    return fromPath;
};

//# sourceMappingURL=path.js.map

/***/ }),

/***/ "e152":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var shared = __webpack_require__("f823");
var uid = __webpack_require__("de7c");

var keys = shared('keys');

module.exports = function (key) {
  return keys[key] || (keys[key] = uid(key));
};


/***/ }),

/***/ "e159":
/***/ (function(module, exports, __webpack_require__) {

var memoize = __webpack_require__("65a57");

/** Used as the maximum memoize cache size. */
var MAX_MEMOIZE_SIZE = 500;

/**
 * A specialized version of `_.memoize` which clears the memoized function's
 * cache when it exceeds `MAX_MEMOIZE_SIZE`.
 *
 * @private
 * @param {Function} func The function to have its output memoized.
 * @returns {Function} Returns the new memoized function.
 */
function memoizeCapped(func) {
  var result = memoize(func, function(key) {
    if (cache.size === MAX_MEMOIZE_SIZE) {
      cache.clear();
    }
    return key;
  });

  var cache = result.cache;
  return result;
}

module.exports = memoizeCapped;


/***/ }),

/***/ "e17b":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var charAt = __webpack_require__("9f13").charAt;
var toString = __webpack_require__("502b");
var InternalStateModule = __webpack_require__("d987");
var defineIterator = __webpack_require__("42b8");
var createIterResultObject = __webpack_require__("0a94");

var STRING_ITERATOR = 'String Iterator';
var setInternalState = InternalStateModule.set;
var getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);

// `String.prototype[@@iterator]` method
// https://tc39.es/ecma262/#sec-string.prototype-@@iterator
defineIterator(String, 'String', function (iterated) {
  setInternalState(this, {
    type: STRING_ITERATOR,
    string: toString(iterated),
    index: 0
  });
// `%StringIteratorPrototype%.next` method
// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next
}, function next() {
  var state = getInternalState(this);
  var string = state.string;
  var index = state.index;
  var point;
  if (index >= string.length) return createIterResultObject(undefined, true);
  point = charAt(string, index);
  state.index += point.length;
  return createIterResultObject(point, false);
});


/***/ }),

/***/ "e335":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview clip
 * @author dengfuping_develop@163.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var util_1 = __webpack_require__("6d77");
var dom_1 = __webpack_require__("7431");
var Clip = /** @class */ (function () {
    function Clip(cfg) {
        this.type = 'clip';
        this.cfg = {};
        var el = dom_1.createSVGElement('clipPath');
        this.el = el;
        this.id = util_1.uniqueId('clip_');
        el.id = this.id;
        var shapeEl = cfg.cfg.el;
        el.appendChild(shapeEl);
        this.cfg = cfg;
        return this;
    }
    Clip.prototype.match = function () {
        return false;
    };
    Clip.prototype.remove = function () {
        var el = this.el;
        el.parentNode.removeChild(el);
    };
    return Clip;
}());
exports.default = Clip;
//# sourceMappingURL=clip.js.map

/***/ }),

/***/ "e3d4":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var PROPER_FUNCTION_NAME = __webpack_require__("5efb").PROPER;
var defineBuiltIn = __webpack_require__("f303");
var anObject = __webpack_require__("9774");
var $toString = __webpack_require__("502b");
var fails = __webpack_require__("e835");
var getRegExpFlags = __webpack_require__("60c0");

var TO_STRING = 'toString';
var RegExpPrototype = RegExp.prototype;
var nativeToString = RegExpPrototype[TO_STRING];

var NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) !== '/a/b'; });
// FF44- RegExp#toString has a wrong name
var INCORRECT_NAME = PROPER_FUNCTION_NAME && nativeToString.name !== TO_STRING;

// `RegExp.prototype.toString` method
// https://tc39.es/ecma262/#sec-regexp.prototype.tostring
if (NOT_GENERIC || INCORRECT_NAME) {
  defineBuiltIn(RegExpPrototype, TO_STRING, function toString() {
    var R = anObject(this);
    var pattern = $toString(R.source);
    var flags = $toString(getRegExpFlags(R));
    return '/' + pattern + '/' + flags;
  }, { unsafe: true });
}


/***/ }),

/***/ "e512":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/* eslint-disable es/no-object-getownpropertynames -- safe */
var classof = __webpack_require__("51d7");
var toIndexedObject = __webpack_require__("a330");
var $getOwnPropertyNames = __webpack_require__("8c7b").f;
var arraySlice = __webpack_require__("f600");

var windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames
  ? Object.getOwnPropertyNames(window) : [];

var getWindowNames = function (it) {
  try {
    return $getOwnPropertyNames(it);
  } catch (error) {
    return arraySlice(windowNames);
  }
};

// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window
module.exports.f = function getOwnPropertyNames(it) {
  return windowNames && classof(it) === 'Window'
    ? getWindowNames(it)
    : $getOwnPropertyNames(toIndexedObject(it));
};


/***/ }),

/***/ "e5cc":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.forEach = exports.sqrLen = exports.len = exports.sqrDist = exports.dist = exports.div = exports.mul = exports.sub = undefined;
exports.create = create;
exports.clone = clone;
exports.length = length;
exports.fromValues = fromValues;
exports.copy = copy;
exports.set = set;
exports.add = add;
exports.subtract = subtract;
exports.multiply = multiply;
exports.divide = divide;
exports.ceil = ceil;
exports.floor = floor;
exports.min = min;
exports.max = max;
exports.round = round;
exports.scale = scale;
exports.scaleAndAdd = scaleAndAdd;
exports.distance = distance;
exports.squaredDistance = squaredDistance;
exports.squaredLength = squaredLength;
exports.negate = negate;
exports.inverse = inverse;
exports.normalize = normalize;
exports.dot = dot;
exports.cross = cross;
exports.lerp = lerp;
exports.hermite = hermite;
exports.bezier = bezier;
exports.random = random;
exports.transformMat4 = transformMat4;
exports.transformMat3 = transformMat3;
exports.transformQuat = transformQuat;
exports.rotateX = rotateX;
exports.rotateY = rotateY;
exports.rotateZ = rotateZ;
exports.angle = angle;
exports.str = str;
exports.exactEquals = exactEquals;
exports.equals = equals;

var _common = __webpack_require__("e713");

var glMatrix = _interopRequireWildcard(_common);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/**
 * 3 Dimensional Vector
 * @module vec3
 */

/**
 * Creates a new, empty vec3
 *
 * @returns {vec3} a new 3D vector
 */
function create() {
  var out = new glMatrix.ARRAY_TYPE(3);
  if (glMatrix.ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
    out[2] = 0;
  }
  return out;
}

/**
 * Creates a new vec3 initialized with values from an existing vector
 *
 * @param {vec3} a vector to clone
 * @returns {vec3} a new 3D vector
 */
function clone(a) {
  var out = new glMatrix.ARRAY_TYPE(3);
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  return out;
}

/**
 * Calculates the length of a vec3
 *
 * @param {vec3} a vector to calculate length of
 * @returns {Number} length of a
 */
function length(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return Math.sqrt(x * x + y * y + z * z);
}

/**
 * Creates a new vec3 initialized with the given values
 *
 * @param {Number} x X component
 * @param {Number} y Y component
 * @param {Number} z Z component
 * @returns {vec3} a new 3D vector
 */
function fromValues(x, y, z) {
  var out = new glMatrix.ARRAY_TYPE(3);
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
}

/**
 * Copy the values from one vec3 to another
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the source vector
 * @returns {vec3} out
 */
function copy(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  out[2] = a[2];
  return out;
}

/**
 * Set the components of a vec3 to the given values
 *
 * @param {vec3} out the receiving vector
 * @param {Number} x X component
 * @param {Number} y Y component
 * @param {Number} z Z component
 * @returns {vec3} out
 */
function set(out, x, y, z) {
  out[0] = x;
  out[1] = y;
  out[2] = z;
  return out;
}

/**
 * Adds two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {vec3} out
 */
function add(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  out[2] = a[2] + b[2];
  return out;
}

/**
 * Subtracts vector b from vector a
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {vec3} out
 */
function subtract(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  out[2] = a[2] - b[2];
  return out;
}

/**
 * Multiplies two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {vec3} out
 */
function multiply(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  out[2] = a[2] * b[2];
  return out;
}

/**
 * Divides two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {vec3} out
 */
function divide(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  out[2] = a[2] / b[2];
  return out;
}

/**
 * Math.ceil the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a vector to ceil
 * @returns {vec3} out
 */
function ceil(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  out[2] = Math.ceil(a[2]);
  return out;
}

/**
 * Math.floor the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a vector to floor
 * @returns {vec3} out
 */
function floor(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  out[2] = Math.floor(a[2]);
  return out;
}

/**
 * Returns the minimum of two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {vec3} out
 */
function min(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  out[2] = Math.min(a[2], b[2]);
  return out;
}

/**
 * Returns the maximum of two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {vec3} out
 */
function max(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  out[2] = Math.max(a[2], b[2]);
  return out;
}

/**
 * Math.round the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a vector to round
 * @returns {vec3} out
 */
function round(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  out[2] = Math.round(a[2]);
  return out;
}

/**
 * Scales a vec3 by a scalar number
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the vector to scale
 * @param {Number} b amount to scale the vector by
 * @returns {vec3} out
 */
function scale(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  out[2] = a[2] * b;
  return out;
}

/**
 * Adds two vec3's after scaling the second operand by a scalar value
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @param {Number} scale the amount to scale b by before adding
 * @returns {vec3} out
 */
function scaleAndAdd(out, a, b, scale) {
  out[0] = a[0] + b[0] * scale;
  out[1] = a[1] + b[1] * scale;
  out[2] = a[2] + b[2] * scale;
  return out;
}

/**
 * Calculates the euclidian distance between two vec3's
 *
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {Number} distance between a and b
 */
function distance(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  return Math.sqrt(x * x + y * y + z * z);
}

/**
 * Calculates the squared euclidian distance between two vec3's
 *
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {Number} squared distance between a and b
 */
function squaredDistance(a, b) {
  var x = b[0] - a[0];
  var y = b[1] - a[1];
  var z = b[2] - a[2];
  return x * x + y * y + z * z;
}

/**
 * Calculates the squared length of a vec3
 *
 * @param {vec3} a vector to calculate squared length of
 * @returns {Number} squared length of a
 */
function squaredLength(a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  return x * x + y * y + z * z;
}

/**
 * Negates the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a vector to negate
 * @returns {vec3} out
 */
function negate(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  out[2] = -a[2];
  return out;
}

/**
 * Returns the inverse of the components of a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a vector to invert
 * @returns {vec3} out
 */
function inverse(out, a) {
  out[0] = 1.0 / a[0];
  out[1] = 1.0 / a[1];
  out[2] = 1.0 / a[2];
  return out;
}

/**
 * Normalize a vec3
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a vector to normalize
 * @returns {vec3} out
 */
function normalize(out, a) {
  var x = a[0];
  var y = a[1];
  var z = a[2];
  var len = x * x + y * y + z * z;
  if (len > 0) {
    //TODO: evaluate use of glm_invsqrt here?
    len = 1 / Math.sqrt(len);
    out[0] = a[0] * len;
    out[1] = a[1] * len;
    out[2] = a[2] * len;
  }
  return out;
}

/**
 * Calculates the dot product of two vec3's
 *
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {Number} dot product of a and b
 */
function dot(a, b) {
  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];
}

/**
 * Computes the cross product of two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @returns {vec3} out
 */
function cross(out, a, b) {
  var ax = a[0],
      ay = a[1],
      az = a[2];
  var bx = b[0],
      by = b[1],
      bz = b[2];

  out[0] = ay * bz - az * by;
  out[1] = az * bx - ax * bz;
  out[2] = ax * by - ay * bx;
  return out;
}

/**
 * Performs a linear interpolation between two vec3's
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @param {Number} t interpolation amount, in the range [0-1], between the two inputs
 * @returns {vec3} out
 */
function lerp(out, a, b, t) {
  var ax = a[0];
  var ay = a[1];
  var az = a[2];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  out[2] = az + t * (b[2] - az);
  return out;
}

/**
 * Performs a hermite interpolation with two control points
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @param {vec3} c the third operand
 * @param {vec3} d the fourth operand
 * @param {Number} t interpolation amount, in the range [0-1], between the two inputs
 * @returns {vec3} out
 */
function hermite(out, a, b, c, d, t) {
  var factorTimes2 = t * t;
  var factor1 = factorTimes2 * (2 * t - 3) + 1;
  var factor2 = factorTimes2 * (t - 2) + t;
  var factor3 = factorTimes2 * (t - 1);
  var factor4 = factorTimes2 * (3 - 2 * t);

  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;

  return out;
}

/**
 * Performs a bezier interpolation with two control points
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the first operand
 * @param {vec3} b the second operand
 * @param {vec3} c the third operand
 * @param {vec3} d the fourth operand
 * @param {Number} t interpolation amount, in the range [0-1], between the two inputs
 * @returns {vec3} out
 */
function bezier(out, a, b, c, d, t) {
  var inverseFactor = 1 - t;
  var inverseFactorTimesTwo = inverseFactor * inverseFactor;
  var factorTimes2 = t * t;
  var factor1 = inverseFactorTimesTwo * inverseFactor;
  var factor2 = 3 * t * inverseFactorTimesTwo;
  var factor3 = 3 * factorTimes2 * inverseFactor;
  var factor4 = factorTimes2 * t;

  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;
  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;
  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;

  return out;
}

/**
 * Generates a random vector with the given scale
 *
 * @param {vec3} out the receiving vector
 * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned
 * @returns {vec3} out
 */
function random(out, scale) {
  scale = scale || 1.0;

  var r = glMatrix.RANDOM() * 2.0 * Math.PI;
  var z = glMatrix.RANDOM() * 2.0 - 1.0;
  var zScale = Math.sqrt(1.0 - z * z) * scale;

  out[0] = Math.cos(r) * zScale;
  out[1] = Math.sin(r) * zScale;
  out[2] = z * scale;
  return out;
}

/**
 * Transforms the vec3 with a mat4.
 * 4th vector component is implicitly '1'
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the vector to transform
 * @param {mat4} m matrix to transform with
 * @returns {vec3} out
 */
function transformMat4(out, a, m) {
  var x = a[0],
      y = a[1],
      z = a[2];
  var w = m[3] * x + m[7] * y + m[11] * z + m[15];
  w = w || 1.0;
  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;
  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;
  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;
  return out;
}

/**
 * Transforms the vec3 with a mat3.
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the vector to transform
 * @param {mat3} m the 3x3 matrix to transform with
 * @returns {vec3} out
 */
function transformMat3(out, a, m) {
  var x = a[0],
      y = a[1],
      z = a[2];
  out[0] = x * m[0] + y * m[3] + z * m[6];
  out[1] = x * m[1] + y * m[4] + z * m[7];
  out[2] = x * m[2] + y * m[5] + z * m[8];
  return out;
}

/**
 * Transforms the vec3 with a quat
 * Can also be used for dual quaternions. (Multiply it with the real part)
 *
 * @param {vec3} out the receiving vector
 * @param {vec3} a the vector to transform
 * @param {quat} q quaternion to transform with
 * @returns {vec3} out
 */
function transformQuat(out, a, q) {
  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed
  var qx = q[0],
      qy = q[1],
      qz = q[2],
      qw = q[3];
  var x = a[0],
      y = a[1],
      z = a[2];
  // var qvec = [qx, qy, qz];
  // var uv = vec3.cross([], qvec, a);
  var uvx = qy * z - qz * y,
      uvy = qz * x - qx * z,
      uvz = qx * y - qy * x;
  // var uuv = vec3.cross([], qvec, uv);
  var uuvx = qy * uvz - qz * uvy,
      uuvy = qz * uvx - qx * uvz,
      uuvz = qx * uvy - qy * uvx;
  // vec3.scale(uv, uv, 2 * w);
  var w2 = qw * 2;
  uvx *= w2;
  uvy *= w2;
  uvz *= w2;
  // vec3.scale(uuv, uuv, 2);
  uuvx *= 2;
  uuvy *= 2;
  uuvz *= 2;
  // return vec3.add(out, a, vec3.add(out, uv, uuv));
  out[0] = x + uvx + uuvx;
  out[1] = y + uvy + uuvy;
  out[2] = z + uvz + uuvz;
  return out;
}

/**
 * Rotate a 3D vector around the x-axis
 * @param {vec3} out The receiving vec3
 * @param {vec3} a The vec3 point to rotate
 * @param {vec3} b The origin of the rotation
 * @param {Number} c The angle of rotation
 * @returns {vec3} out
 */
function rotateX(out, a, b, c) {
  var p = [],
      r = [];
  //Translate point to the origin
  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2];

  //perform rotation
  r[0] = p[0];
  r[1] = p[1] * Math.cos(c) - p[2] * Math.sin(c);
  r[2] = p[1] * Math.sin(c) + p[2] * Math.cos(c);

  //translate to correct position
  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];

  return out;
}

/**
 * Rotate a 3D vector around the y-axis
 * @param {vec3} out The receiving vec3
 * @param {vec3} a The vec3 point to rotate
 * @param {vec3} b The origin of the rotation
 * @param {Number} c The angle of rotation
 * @returns {vec3} out
 */
function rotateY(out, a, b, c) {
  var p = [],
      r = [];
  //Translate point to the origin
  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2];

  //perform rotation
  r[0] = p[2] * Math.sin(c) + p[0] * Math.cos(c);
  r[1] = p[1];
  r[2] = p[2] * Math.cos(c) - p[0] * Math.sin(c);

  //translate to correct position
  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];

  return out;
}

/**
 * Rotate a 3D vector around the z-axis
 * @param {vec3} out The receiving vec3
 * @param {vec3} a The vec3 point to rotate
 * @param {vec3} b The origin of the rotation
 * @param {Number} c The angle of rotation
 * @returns {vec3} out
 */
function rotateZ(out, a, b, c) {
  var p = [],
      r = [];
  //Translate point to the origin
  p[0] = a[0] - b[0];
  p[1] = a[1] - b[1];
  p[2] = a[2] - b[2];

  //perform rotation
  r[0] = p[0] * Math.cos(c) - p[1] * Math.sin(c);
  r[1] = p[0] * Math.sin(c) + p[1] * Math.cos(c);
  r[2] = p[2];

  //translate to correct position
  out[0] = r[0] + b[0];
  out[1] = r[1] + b[1];
  out[2] = r[2] + b[2];

  return out;
}

/**
 * Get the angle between two 3D vectors
 * @param {vec3} a The first operand
 * @param {vec3} b The second operand
 * @returns {Number} The angle in radians
 */
function angle(a, b) {
  var tempA = fromValues(a[0], a[1], a[2]);
  var tempB = fromValues(b[0], b[1], b[2]);

  normalize(tempA, tempA);
  normalize(tempB, tempB);

  var cosine = dot(tempA, tempB);

  if (cosine > 1.0) {
    return 0;
  } else if (cosine < -1.0) {
    return Math.PI;
  } else {
    return Math.acos(cosine);
  }
}

/**
 * Returns a string representation of a vector
 *
 * @param {vec3} a vector to represent as a string
 * @returns {String} string representation of the vector
 */
function str(a) {
  return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';
}

/**
 * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)
 *
 * @param {vec3} a The first vector.
 * @param {vec3} b The second vector.
 * @returns {Boolean} True if the vectors are equal, false otherwise.
 */
function exactEquals(a, b) {
  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];
}

/**
 * Returns whether or not the vectors have approximately the same elements in the same position.
 *
 * @param {vec3} a The first vector.
 * @param {vec3} b The second vector.
 * @returns {Boolean} True if the vectors are equal, false otherwise.
 */
function equals(a, b) {
  var a0 = a[0],
      a1 = a[1],
      a2 = a[2];
  var b0 = b[0],
      b1 = b[1],
      b2 = b[2];
  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));
}

/**
 * Alias for {@link vec3.subtract}
 * @function
 */
var sub = exports.sub = subtract;

/**
 * Alias for {@link vec3.multiply}
 * @function
 */
var mul = exports.mul = multiply;

/**
 * Alias for {@link vec3.divide}
 * @function
 */
var div = exports.div = divide;

/**
 * Alias for {@link vec3.distance}
 * @function
 */
var dist = exports.dist = distance;

/**
 * Alias for {@link vec3.squaredDistance}
 * @function
 */
var sqrDist = exports.sqrDist = squaredDistance;

/**
 * Alias for {@link vec3.length}
 * @function
 */
var len = exports.len = length;

/**
 * Alias for {@link vec3.squaredLength}
 * @function
 */
var sqrLen = exports.sqrLen = squaredLength;

/**
 * Perform some operation over an array of vec3s.
 *
 * @param {Array} a the array of vectors to iterate over
 * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed
 * @param {Number} offset Number of elements to skip at the beginning of the array
 * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array
 * @param {Function} fn Function to call for each vector in the array
 * @param {Object} [arg] additional argument to pass to fn
 * @returns {Array} a
 * @function
 */
var forEach = exports.forEach = function () {
  var vec = create();

  return function (a, stride, offset, count, fn, arg) {
    var i = void 0,
        l = void 0;
    if (!stride) {
      stride = 3;
    }

    if (!offset) {
      offset = 0;
    }

    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }

    for (i = offset; i < l; i += stride) {
      vec[0] = a[i];vec[1] = a[i + 1];vec[2] = a[i + 2];
      fn(vec, vec, arg);
      a[i] = vec[0];a[i + 1] = vec[1];a[i + 2] = vec[2];
    }

    return a;
  };
}();

/***/ }),

/***/ "e5d6":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var defineWellKnownSymbol = __webpack_require__("158b");
var defineSymbolToPrimitive = __webpack_require__("f763");

// `Symbol.toPrimitive` well-known symbol
// https://tc39.es/ecma262/#sec-symbol.toprimitive
defineWellKnownSymbol('toPrimitive');

// `Symbol.prototype[@@toPrimitive]` method
// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive
defineSymbolToPrimitive();


/***/ }),

/***/ "e636":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var call = __webpack_require__("ded0");
var aCallable = __webpack_require__("d0d3");
var newPromiseCapabilityModule = __webpack_require__("34b0");
var perform = __webpack_require__("9b5e");
var iterate = __webpack_require__("6e62");
var PROMISE_STATICS_INCORRECT_ITERATION = __webpack_require__("4276");

// `Promise.race` method
// https://tc39.es/ecma262/#sec-promise.race
$({ target: 'Promise', stat: true, forced: PROMISE_STATICS_INCORRECT_ITERATION }, {
  race: function race(iterable) {
    var C = this;
    var capability = newPromiseCapabilityModule.f(C);
    var reject = capability.reject;
    var result = perform(function () {
      var $promiseResolve = aCallable(C.resolve);
      iterate(iterable, function (promise) {
        call($promiseResolve, C, promise).then(capability.resolve, reject);
      });
    });
    if (result.error) reject(result.value);
    return capability.promise;
  }
});


/***/ }),

/***/ "e63f":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isArray = __webpack_require__("c806");
var isConstructor = __webpack_require__("c185");
var isObject = __webpack_require__("d2cb");
var wellKnownSymbol = __webpack_require__("9a0b");

var SPECIES = wellKnownSymbol('species');
var $Array = Array;

// a part of `ArraySpeciesCreate` abstract operation
// https://tc39.es/ecma262/#sec-arrayspeciescreate
module.exports = function (originalArray) {
  var C;
  if (isArray(originalArray)) {
    C = originalArray.constructor;
    // cross-realm fallback
    if (isConstructor(C) && (C === $Array || isArray(C.prototype))) C = undefined;
    else if (isObject(C)) {
      C = C[SPECIES];
      if (C === null) C = undefined;
    }
  } return C === undefined ? $Array : C;
};


/***/ }),

/***/ "e713":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.setMatrixArrayType = setMatrixArrayType;
exports.toRadian = toRadian;
exports.equals = equals;
/**
 * Common utilities
 * @module glMatrix
 */

// Configuration Constants
var EPSILON = exports.EPSILON = 0.000001;
var ARRAY_TYPE = exports.ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;
var RANDOM = exports.RANDOM = Math.random;

/**
 * Sets the type of array used when creating new vectors and matrices
 *
 * @param {Type} type Array type, such as Float32Array or Array
 */
function setMatrixArrayType(type) {
  exports.ARRAY_TYPE = ARRAY_TYPE = type;
}

var degree = Math.PI / 180;

/**
 * Convert Degree To Radian
 *
 * @param {Number} a Angle in Degrees
 */
function toRadian(a) {
  return a * degree;
}

/**
 * Tests whether or not the arguments have approximately the same value, within an absolute
 * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less
 * than or equal to 1.0, and a relative tolerance is used for larger values)
 *
 * @param {Number} a The first number to test.
 * @param {Number} b The second number to test.
 * @returns {Boolean} True if the numbers are approximately equal, false otherwise.
 */
function equals(a, b) {
  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));
}

/***/ }),

/***/ "e835":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

module.exports = function (exec) {
  try {
    return !!exec();
  } catch (error) {
    return true;
  }
};


/***/ }),

/***/ "e9ad":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var is_array_1 = __webpack_require__("a07d");
var is_plain_object_1 = __webpack_require__("d96e");
var MAX_MIX_LEVEL = 5;
function _deepMix(dist, src, level, maxLevel) {
    level = level || 0;
    maxLevel = maxLevel || MAX_MIX_LEVEL;
    for (var key in src) {
        if (src.hasOwnProperty(key)) {
            var value = src[key];
            if (value !== null && is_plain_object_1.default(value)) {
                if (!is_plain_object_1.default(dist[key])) {
                    dist[key] = {};
                }
                if (level < maxLevel) {
                    _deepMix(dist[key], value, level + 1, maxLevel);
                }
                else {
                    dist[key] = src[key];
                }
            }
            else if (is_array_1.default(value)) {
                dist[key] = [];
                dist[key] = dist[key].concat(value);
            }
            else if (value !== undefined) {
                dist[key] = value;
            }
        }
    }
}
// todo 重写
var deepMix = function (rst) {
    var args = [];
    for (var _i = 1; _i < arguments.length; _i++) {
        args[_i - 1] = arguments[_i];
    }
    for (var i = 0; i < args.length; i += 1) {
        _deepMix(rst, args[i]);
    }
    return rst;
};
exports.default = deepMix;
//# sourceMappingURL=deep-mix.js.map

/***/ }),

/***/ "eb48":
/***/ (function(module, exports, __webpack_require__) {

!function(t,e){ true?module.exports=e():undefined}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=820)}([,function(t,e,n){"use strict";var r=function(t,e,n){t.prototype=e.prototype=n,n.constructor=t};function i(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function a(){}var o="\\s*([+-]?\\d+)\\s*",s="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",c=/^#([0-9a-f]{3})$/,h=/^#([0-9a-f]{6})$/,f=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),l=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),p=new RegExp("^rgba\\("+[o,o,o,s]+"\\)$"),d=new RegExp("^rgba\\("+[u,u,u,s]+"\\)$"),g=new RegExp("^hsl\\("+[s,u,u]+"\\)$"),v=new RegExp("^hsla\\("+[s,u,u,s]+"\\)$"),m={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function x(t){var e;return t=(t+"").trim().toLowerCase(),(e=c.exec(t))?new _((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=h.exec(t))?y(parseInt(e[1],16)):(e=f.exec(t))?new _(e[1],e[2],e[3],1):(e=l.exec(t))?new _(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=p.exec(t))?b(e[1],e[2],e[3],e[4]):(e=d.exec(t))?b(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=g.exec(t))?S(e[1],e[2]/100,e[3]/100,1):(e=v.exec(t))?S(e[1],e[2]/100,e[3]/100,e[4]):m.hasOwnProperty(t)?y(m[t]):"transparent"===t?new _(NaN,NaN,NaN,0):null}function y(t){return new _(t>>16&255,t>>8&255,255&t,1)}function b(t,e,n,r){return r<=0&&(t=e=n=NaN),new _(t,e,n,r)}function M(t){return t instanceof a||(t=x(t)),t?new _((t=t.rgb()).r,t.g,t.b,t.opacity):new _}function w(t,e,n,r){return 1===arguments.length?M(t):new _(t,e,n,null==r?1:r)}function _(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function E(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function S(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new P(t,e,n,r)}function A(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof P)return new P(t.h,t.s,t.l,t.opacity);if(t instanceof a||(t=x(t)),!t)return new P;if(t instanceof P)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,u=o-i,c=(o+i)/2;return u?(s=e===o?(n-r)/u+6*(n<r):n===o?(r-e)/u+2:(e-n)/u+4,u/=c<.5?o+i:2-o-i,s*=60):u=c>0&&c<1?0:s,new P(s,u,c,t.opacity)}(t):new P(t,e,n,null==r?1:r)}function P(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function O(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}r(a,x,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),r(_,w,i(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new _(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new _(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+E(this.r)+E(this.g)+E(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),r(P,A,i(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new P(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new P(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new _(O(t>=240?t-240:t+120,i,r),O(t,i,r),O(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var C=Math.PI/180,I=180/Math.PI,T=.96422,k=1,N=.82521,L=4/29,B=6/29,j=3*B*B,D=B*B*B;function R(t){if(t instanceof X)return new X(t.l,t.a,t.b,t.opacity);if(t instanceof Z){if(isNaN(t.h))return new X(t.l,0,0,t.opacity);var e=t.h*C;return new X(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof _||(t=M(t));var n,r,i=H(t.r),a=H(t.g),o=H(t.b),s=G((.2225045*i+.7168786*a+.0606169*o)/k);return i===a&&a===o?n=r=s:(n=G((.4360747*i+.3850649*a+.1430804*o)/T),r=G((.0139322*i+.0971045*a+.7141733*o)/N)),new X(116*s-16,500*(n-s),200*(s-r),t.opacity)}function F(t,e){return new X(t,0,0,null==e?1:e)}function Y(t,e,n,r){return 1===arguments.length?R(t):new X(t,e,n,null==r?1:r)}function X(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function G(t){return t>D?Math.pow(t,1/3):t/j+L}function q(t){return t>B?t*t*t:j*(t-L)}function U(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function H(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function V(t){if(t instanceof Z)return new Z(t.h,t.c,t.l,t.opacity);if(t instanceof X||(t=R(t)),0===t.a&&0===t.b)return new Z(NaN,0,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*I;return new Z(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function z(t,e,n,r){return 1===arguments.length?V(t):new Z(n,e,t,null==r?1:r)}function W(t,e,n,r){return 1===arguments.length?V(t):new Z(t,e,n,null==r?1:r)}function Z(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}r(X,Y,i(a,{brighter:function(t){return new X(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new X(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new _(U(3.1338561*(e=T*q(e))-1.6168667*(t=k*q(t))-.4906146*(n=N*q(n))),U(-.9787684*e+1.9161415*t+.033454*n),U(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),r(Z,W,i(a,{brighter:function(t){return new Z(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Z(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return R(this).rgb()}}));var K=-.14861,Q=1.78277,$=-.29227,J=-.90649,tt=1.97294,et=tt*J,nt=tt*Q,rt=Q*$-J*K;function it(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof at)return new at(t.h,t.s,t.l,t.opacity);t instanceof _||(t=M(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(rt*r+et*e-nt*n)/(rt+et-nt),a=r-i,o=(tt*(n-i)-$*a)/J,s=Math.sqrt(o*o+a*a)/(tt*i*(1-i)),u=s?Math.atan2(o,a)*I-120:NaN;return new at(u<0?u+360:u,s,i,t.opacity)}(t):new at(t,e,n,null==r?1:r)}function at(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}r(at,it,i(a,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new at(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new at(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*C,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new _(255*(e+n*(K*r+Q*i)),255*(e+n*($*r+J*i)),255*(e+n*(tt*r)),this.opacity)}})),n.d(e,"a",function(){return x}),n.d(e,"h",function(){return w}),n.d(e,"e",function(){return A}),n.d(e,"f",function(){return Y}),n.d(e,"d",function(){return W}),n.d(e,"g",function(){return z}),n.d(e,"c",function(){return F}),n.d(e,"b",function(){return it})},,,,,,,,,,,,,,,function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){"use strict";n.r(e);var r,i,a=0,o=0,s=0,u=1e3,c=0,h=0,f=0,l="object"==typeof performance&&performance.now?performance:Date,p="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function d(){return h||(p(g),h=l.now()+f)}function g(){h=0}function v(){this._call=this._time=this._next=null}function m(t,e,n){var r=new v;return r.restart(t,e,n),r}function x(){d(),++a;for(var t,e=r;e;)(t=h-e._time)>=0&&e._call.call(null,t),e=e._next;--a}function y(){h=(c=l.now())+f,a=o=0;try{x()}finally{a=0,function(){var t,e,n=r,a=1/0;for(;n;)n._call?(a>n._time&&(a=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:r=e);i=t,M(a)}(),h=0}}function b(){var t=l.now(),e=t-c;e>u&&(f-=e,c=t)}function M(t){a||(o&&(o=clearTimeout(o)),t-h>24?(t<1/0&&(o=setTimeout(y,t-l.now()-f)),s&&(s=clearInterval(s))):(s||(c=l.now(),s=setInterval(b,u)),a=1,p(y)))}v.prototype=m.prototype={constructor:v,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?d():+n)+(null==e?0:+e),this._next||i===this||(i?i._next=this:r=this,i=this),this._call=t,this._time=n,M()},stop:function(){this._call&&(this._call=null,this._time=1/0,M())}};var w=function(t,e,n){var r=new v;return e=null==e?0:+e,r.restart(function(n){r.stop(),t(n+e)},e,n),r},_=function(t,e,n){var r=new v,i=e;return null==e?(r.restart(t,e,n),r):(e=+e,n=null==n?d():+n,r.restart(function a(o){o+=i,r.restart(a,i+=e,n),t(o)},e,n),r)};n.d(e,"now",function(){return d}),n.d(e,"timer",function(){return m}),n.d(e,"timerFlush",function(){return x}),n.d(e,"timeout",function(){return w}),n.d(e,"interval",function(){return _})},,function(t,e,n){var r=n(644),i={};r.merge(i,r,{mixin:function(t,e){var n=t.CFG?"CFG":"ATTRS";if(t&&e){t._mixins=e,t[n]=t[n]||{};var r={};i.each(e,function(e){i.augment(t,e);var a=e[n];a&&i.merge(r,a)}),t[n]=i.merge(r,t[n])}}}),t.exports=i},function(t,e,n){var r=n(117),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();t.exports=a},,,function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},,,function(t,e,n){var r={},i=n(682),a=n(748),o=n(257),s=n(727),u=n(726),c=n(725);o.mix(r,o,u,c,s,a,i),t.exports=r},,,,,,,,function(t,e,n){var r=n(38),i=n(250),a=n(249),o="[object Null]",s="[object Undefined]",u=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?s:o:u&&u in Object(t)?i(t):a(t)}},,,,function(t,e,n){var r=n(20).Symbol;t.exports=r},function(t,e,n){var r=n(34),i=n(23),a="[object Symbol]";t.exports=function(t){return"symbol"==typeof t||i(t)&&r(t)==a}},,,,,function(t,e,n){"use strict";function r(t){return+t}function i(t){return t*t}function a(t){return t*(2-t)}function o(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function s(t){return t*t*t}function u(t){return--t*t*t+1}function c(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}n.r(e);var h=function t(e){function n(t){return Math.pow(t,e)}return e=+e,n.exponent=t,n}(3),f=function t(e){function n(t){return 1-Math.pow(1-t,e)}return e=+e,n.exponent=t,n}(3),l=function t(e){function n(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,n.exponent=t,n}(3),p=Math.PI,d=p/2;function g(t){return 1-Math.cos(t*d)}function v(t){return Math.sin(t*d)}function m(t){return(1-Math.cos(p*t))/2}function x(t){return Math.pow(2,10*t-10)}function y(t){return 1-Math.pow(2,-10*t)}function b(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function M(t){return 1-Math.sqrt(1-t*t)}function w(t){return Math.sqrt(1- --t*t)}function _(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var E=4/11,S=6/11,A=8/11,P=.75,O=9/11,C=10/11,I=.9375,T=21/22,k=63/64,N=1/E/E;function L(t){return 1-B(1-t)}function B(t){return(t=+t)<E?N*t*t:t<A?N*(t-=S)*t+P:t<C?N*(t-=O)*t+I:N*(t-=T)*t+k}function j(t){return((t*=2)<=1?1-B(1-t):B(t-1)+1)/2}var D=function t(e){function n(t){return t*t*((e+1)*t-e)}return e=+e,n.overshoot=t,n}(1.70158),R=function t(e){function n(t){return--t*t*((e+1)*t+e)+1}return e=+e,n.overshoot=t,n}(1.70158),F=function t(e){function n(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,n.overshoot=t,n}(1.70158),Y=2*Math.PI,X=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Y);function i(t){return e*Math.pow(2,10*--t)*Math.sin((r-t)/n)}return i.amplitude=function(e){return t(e,n*Y)},i.period=function(n){return t(e,n)},i}(1,.3),G=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Y);function i(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/n)}return i.amplitude=function(e){return t(e,n*Y)},i.period=function(n){return t(e,n)},i}(1,.3),q=function t(e,n){var r=Math.asin(1/(e=Math.max(1,e)))*(n/=Y);function i(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((r-t)/n):2-e*Math.pow(2,-10*t)*Math.sin((r+t)/n))/2}return i.amplitude=function(e){return t(e,n*Y)},i.period=function(n){return t(e,n)},i}(1,.3);n.d(e,"easeLinear",function(){return r}),n.d(e,"easeQuad",function(){return o}),n.d(e,"easeQuadIn",function(){return i}),n.d(e,"easeQuadOut",function(){return a}),n.d(e,"easeQuadInOut",function(){return o}),n.d(e,"easeCubic",function(){return c}),n.d(e,"easeCubicIn",function(){return s}),n.d(e,"easeCubicOut",function(){return u}),n.d(e,"easeCubicInOut",function(){return c}),n.d(e,"easePoly",function(){return l}),n.d(e,"easePolyIn",function(){return h}),n.d(e,"easePolyOut",function(){return f}),n.d(e,"easePolyInOut",function(){return l}),n.d(e,"easeSin",function(){return m}),n.d(e,"easeSinIn",function(){return g}),n.d(e,"easeSinOut",function(){return v}),n.d(e,"easeSinInOut",function(){return m}),n.d(e,"easeExp",function(){return b}),n.d(e,"easeExpIn",function(){return x}),n.d(e,"easeExpOut",function(){return y}),n.d(e,"easeExpInOut",function(){return b}),n.d(e,"easeCircle",function(){return _}),n.d(e,"easeCircleIn",function(){return M}),n.d(e,"easeCircleOut",function(){return w}),n.d(e,"easeCircleInOut",function(){return _}),n.d(e,"easeBounce",function(){return B}),n.d(e,"easeBounceIn",function(){return L}),n.d(e,"easeBounceOut",function(){return B}),n.d(e,"easeBounceInOut",function(){return j}),n.d(e,"easeBack",function(){return F}),n.d(e,"easeBackIn",function(){return D}),n.d(e,"easeBackOut",function(){return R}),n.d(e,"easeBackInOut",function(){return F}),n.d(e,"easeElastic",function(){return G}),n.d(e,"easeElasticIn",function(){return X}),n.d(e,"easeElasticOut",function(){return G}),n.d(e,"easeElasticInOut",function(){return q})},function(t,e,n){var r=n(115),i=Array.isArray?Array.isArray:function(t){return r(t,"Array")};t.exports=i},function(t,e,n){var r=n(621),i=n(45);t.exports=function(t,e){if(t)if(i(t))for(var n=0,a=t.length;n<a&&!1!==e(t[n],n);n++);else if(r(t))for(var o in t)if(t.hasOwnProperty(o)&&!1===e(t[o],o))break}},,,,,,,,,,,,function(t,e,n){var r=n(19),i=n(742),a=n(641),o=n(613),s=function t(e){t.superclass.constructor.call(this,e)};s.ATTRS={},r.extend(s,a);var u={matrix:"matrix",path:"path",points:"points",lineDash:"lineDash"};r.augment(s,i,{isShape:!0,drawInner:function(t){var e=this._attrs;this.createPath(t);var n=t.globalAlpha;if(this.hasFill()){var i=e.fillOpacity;r.isNil(i)||1===i?t.fill():(t.globalAlpha=i,t.fill(),t.globalAlpha=n)}if(this.hasStroke()&&this._attrs.lineWidth>0){var a=e.strokeOpacity;r.isNil(a)||1===a||(t.globalAlpha=a),t.stroke()}this.afterPath(t)},afterPath:function(){},isHitBox:function(){return!0},isHit:function(t,e){var n=[t,e,1];if(this.invert(n),this.isHitBox()){var r=this.getBBox();if(r&&!o.box(r.minX,r.maxX,r.minY,r.maxY,n[0],n[1]))return!1}var i=this._attrs.clip;return i?(i.invert(n,this.get("canvas")),!!i.isPointInPath(n[0],n[1])&&this.isPointInPath(n[0],n[1])):this.isPointInPath(n[0],n[1])},calculateBox:function(){return null},getHitLineWidth:function(){var t=this._attrs,e=t.lineAppendWidth||0;return(t.lineWidth||0)+e},clearTotalMatrix:function(){this._cfg.totalMatrix=null,this._cfg.region=null},clearBBox:function(){this._cfg.box=null,this._cfg.region=null},getBBox:function(){var t=this._cfg.box;return t||((t=this.calculateBox())&&(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY),this._cfg.box=t),t},clone:function(){var t=null,e=this._attrs,n={};return r.each(e,function(t,i){u[i]&&r.isArray(e[i])?n[i]=function(t){for(var e=[],n=0;n<t.length;n++)r.isArray(t[n])?e.push([].concat(t[n])):e.push(t[n]);return e}(e[i]):n[i]=e[i]}),t=new this.constructor({attrs:n}),t._cfg.zIndex=this._cfg.zIndex,t}}),t.exports=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t},e.toRadian=function(t){return t*i},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=e.EPSILON=1e-6;e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random;var i=Math.PI/180},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(115);t.exports=function(t){return r(t,"Function")}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e){var n={}.toString;t.exports=function(t,e){return n.call(t)==="[object "+e+"]"}},function(t,e,n){var r;
/*!
 * EventEmitter v5.1.0 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */!function(e){"use strict";function i(){}var a=i.prototype,o=e.EventEmitter;function s(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function u(t){return function(){return this[t].apply(this,arguments)}}a.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},a.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},a.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},a.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},a.on=u("addListener"),a.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},a.once=u("addOnceListener"),a.defineEvent=function(t){return this.getListeners(t),this},a.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},a.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&-1!==(n=s(i[r],e))&&i[r].splice(n,1);return this},a.off=u("removeListener"),a.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},a.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},a.manipulateListeners=function(t,e,n){var r,i,a=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)a.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},a.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},a.removeAllListeners=u("removeEvent"),a.emitEvent=function(t,e){var n,r,i,a,o=this.getListenersAsObject(t);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},a.trigger=u("emitEvent"),a.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},a.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return e.EventEmitter=o,i},void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}(this||{})},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(252))},function(t,e){t.exports=function(t){return null!==t&&"function"!=typeof t&&isFinite(t.length)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(115);t.exports=function(t){return r(t,"Number")}},function(t,e){t.exports=function(t){return null===t||void 0===t}},function(t,e,n){"use strict";n.r(e);var r=n(1);function i(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}var a=function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),a=t[r],o=t[r+1],s=r>0?t[r-1]:2*a-o,u=r<e-1?t[r+2]:2*o-a;return i((n-r/e)*e,s,a,o,u)}},o=function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),a=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],u=t[(r+2)%e];return i((n-r/e)*e,a,o,s,u)}},s=function(t){return function(){return t}};function u(t,e){return function(n){return t+n*e}}function c(t,e){var n=e-t;return n?u(t,n>180||n<-180?n-360*Math.round(n/360):n):s(isNaN(t)?e:t)}function h(t){return 1==(t=+t)?f:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):s(isNaN(e)?n:e)}}function f(t,e){var n=e-t;return n?u(t,n):s(isNaN(t)?e:t)}var l=function t(e){var n=h(e);function i(t,e){var i=n((t=Object(r.h)(t)).r,(e=Object(r.h)(e)).r),a=n(t.g,e.g),o=n(t.b,e.b),s=f(t.opacity,e.opacity);return function(e){return t.r=i(e),t.g=a(e),t.b=o(e),t.opacity=s(e),t+""}}return i.gamma=t,i}(1);function p(t){return function(e){var n,i,a=e.length,o=new Array(a),s=new Array(a),u=new Array(a);for(n=0;n<a;++n)i=Object(r.h)(e[n]),o[n]=i.r||0,s[n]=i.g||0,u[n]=i.b||0;return o=t(o),s=t(s),u=t(u),i.opacity=1,function(t){return i.r=o(t),i.g=s(t),i.b=u(t),i+""}}}var d=p(a),g=p(o),v=function(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=P(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}},m=function(t,e){var n=new Date;return e-=t=+t,function(r){return n.setTime(t+e*r),n}},x=function(t,e){return e-=t=+t,function(n){return t+e*n}},y=function(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=P(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}},b=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M=new RegExp(b.source,"g");var w,_,E,S,A=function(t,e){var n,r,i,a=b.lastIndex=M.lastIndex=0,o=-1,s=[],u=[];for(t+="",e+="";(n=b.exec(t))&&(r=M.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,u.push({i:o,x:x(n,r)})),a=M.lastIndex;return a<e.length&&(i=e.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?u[0]?function(t){return function(e){return t(e)+""}}(u[0].x):function(t){return function(){return t}}(e):(e=u.length,function(t){for(var n,r=0;r<e;++r)s[(n=u[r]).i]=n.x(t);return s.join("")})},P=function(t,e){var n,i=typeof e;return null==e||"boolean"===i?s(e):("number"===i?x:"string"===i?(n=Object(r.a)(e))?(e=n,l):A:e instanceof r.a?l:e instanceof Date?m:Array.isArray(e)?v:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?y:x)(t,e)},O=function(t,e){return e-=t=+t,function(n){return Math.round(t+e*n)}},C=180/Math.PI,I={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},T=function(t,e,n,r,i,a){var o,s,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*n+e*r)&&(n-=t*u,r-=e*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),t*r<e*n&&(t=-t,e=-e,u=-u,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*C,skewX:Math.atan(u)*C,scaleX:o,scaleY:s}};function k(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(a,o){var s=[],u=[];return a=t(a),o=t(o),function(t,r,i,a,o,s){if(t!==i||r!==a){var u=o.push("translate(",null,e,null,n);s.push({i:u-4,x:x(t,i)},{i:u-2,x:x(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}(a.translateX,a.translateY,o.translateX,o.translateY,s,u),function(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:x(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(a.rotate,o.rotate,s,u),function(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:x(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(a.skewX,o.skewX,s,u),function(t,e,n,r,a,o){if(t!==n||e!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:x(t,n)},{i:s-2,x:x(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,o.scaleX,o.scaleY,s,u),a=o=null,function(t){for(var e,n=-1,r=u.length;++n<r;)s[(e=u[n]).i]=e.x(t);return s.join("")}}}var N=k(function(t){return"none"===t?I:(w||(w=document.createElement("DIV"),_=document.documentElement,E=document.defaultView),w.style.transform=t,t=E.getComputedStyle(_.appendChild(w),null).getPropertyValue("transform"),_.removeChild(w),t=t.slice(7,-1).split(","),T(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),L=k(function(t){return null==t?I:(S||(S=document.createElementNS("http://www.w3.org/2000/svg","g")),S.setAttribute("transform",t),(t=S.transform.baseVal.consolidate())?(t=t.matrix,T(t.a,t.b,t.c,t.d,t.e,t.f)):I)},", ",")",")"),B=Math.SQRT2;function j(t){return((t=Math.exp(t))+1/t)/2}var D=function(t,e){var n,r,i=t[0],a=t[1],o=t[2],s=e[0],u=e[1],c=e[2],h=s-i,f=u-a,l=h*h+f*f;if(l<1e-12)r=Math.log(c/o)/B,n=function(t){return[i+t*h,a+t*f,o*Math.exp(B*t*r)]};else{var p=Math.sqrt(l),d=(c*c-o*o+4*l)/(2*o*2*p),g=(c*c-o*o-4*l)/(2*c*2*p),v=Math.log(Math.sqrt(d*d+1)-d),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/B,n=function(t){var e=t*r,n=j(v),s=o/(2*p)*(n*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(B*e+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[i+s*h,a+s*f,o*n/j(B*e+v)]}}return n.duration=1e3*r,n};function R(t){return function(e,n){var i=t((e=Object(r.e)(e)).h,(n=Object(r.e)(n)).h),a=f(e.s,n.s),o=f(e.l,n.l),s=f(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(t),e.opacity=s(t),e+""}}}var F=R(c),Y=R(f);function X(t,e){var n=f((t=Object(r.f)(t)).l,(e=Object(r.f)(e)).l),i=f(t.a,e.a),a=f(t.b,e.b),o=f(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=a(e),t.opacity=o(e),t+""}}function G(t){return function(e,n){var i=t((e=Object(r.d)(e)).h,(n=Object(r.d)(n)).h),a=f(e.c,n.c),o=f(e.l,n.l),s=f(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=a(t),e.l=o(t),e.opacity=s(t),e+""}}}var q=G(c),U=G(f);function H(t){return function e(n){function i(e,i){var a=t((e=Object(r.b)(e)).h,(i=Object(r.b)(i)).h),o=f(e.s,i.s),s=f(e.l,i.l),u=f(e.opacity,i.opacity);return function(t){return e.h=a(t),e.s=o(t),e.l=s(Math.pow(t,n)),e.opacity=u(t),e+""}}return n=+n,i.gamma=e,i}(1)}var V=H(c),z=H(f),W=function(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n};n.d(e,"interpolate",function(){return P}),n.d(e,"interpolateArray",function(){return v}),n.d(e,"interpolateBasis",function(){return a}),n.d(e,"interpolateBasisClosed",function(){return o}),n.d(e,"interpolateDate",function(){return m}),n.d(e,"interpolateNumber",function(){return x}),n.d(e,"interpolateObject",function(){return y}),n.d(e,"interpolateRound",function(){return O}),n.d(e,"interpolateString",function(){return A}),n.d(e,"interpolateTransformCss",function(){return N}),n.d(e,"interpolateTransformSvg",function(){return L}),n.d(e,"interpolateZoom",function(){return D}),n.d(e,"interpolateRgb",function(){return l}),n.d(e,"interpolateRgbBasis",function(){return d}),n.d(e,"interpolateRgbBasisClosed",function(){return g}),n.d(e,"interpolateHsl",function(){return F}),n.d(e,"interpolateHslLong",function(){return Y}),n.d(e,"interpolateLab",function(){return X}),n.d(e,"interpolateHcl",function(){return q}),n.d(e,"interpolateHclLong",function(){return U}),n.d(e,"interpolateCubehelix",function(){return V}),n.d(e,"interpolateCubehelixLong",function(){return z}),n.d(e,"quantize",function(){return W})},,,,,,,,,function(t,e,n){var r=n(609);t.exports={track:!1,defaultNodeSize:40,labelStyle:{fill:"#595959",textAlign:"center",textBaseline:"middle"},groupStyle:{stroke:"#CED4D9",fill:"#F2F4F5",radius:2},groupBackgroundPadding:[40,10,10,10],updateDuration:450,enterDuration:450,leaveDuration:450,updateEasing:"easeQuadOut",enterEasing:"easeQuadOut",leaveEasing:"easeQuadOut",version:r}},function(t,e,n){t.exports={Canvas:n(747),Group:n(642),Shape:n(58),Arc:n(638),Circle:n(637),Dom:n(636),Ellipse:n(635),Fan:n(634),Image:n(633),Line:n(632),Marker:n(611),Path:n(631),Polygon:n(630),Polyline:n(629),Rect:n(628),Text:n(627),PathSegment:n(600),PathUtil:n(610),Event:n(643),version:"3.3.5"}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e,n){var r=n(38),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=o.call(t);return r&&(e?t[s]=n:delete t[s]),i}},function(t,e,n){var r=n(16),i=n(39),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,h=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(i(t))return a;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=u.test(t);return n||c.test(t)?h(t.slice(2),n?2:8):s.test(t)?a:+t}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){var r=n(20);t.exports=function(){return r.Date.now()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=function(t){var e=new r.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=s,e.multiply=u,e.divide=c,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=h,e.squaredDistance=f,e.squaredLength=l,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=p,e.dot=d,e.cross=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[0],s=n[1],u=n[2];return t[0]=i*u-a*s,t[1]=a*o-r*u,t[2]=r*s-i*o,t},e.lerp=function(t,e,n,r){var i=e[0],a=e[1],o=e[2];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t[2]=o+r*(n[2]-o),t},e.hermite=function(t,e,n,r,i,a){var o=a*a,s=o*(2*a-3)+1,u=o*(a-2)+a,c=o*(a-1),h=o*(3-2*a);return t[0]=e[0]*s+n[0]*u+r[0]*c+i[0]*h,t[1]=e[1]*s+n[1]*u+r[1]*c+i[1]*h,t[2]=e[2]*s+n[2]*u+r[2]*c+i[2]*h,t},e.bezier=function(t,e,n,r,i,a){var o=1-a,s=o*o,u=a*a,c=s*o,h=3*a*s,f=3*u*o,l=u*a;return t[0]=e[0]*c+n[0]*h+r[0]*f+i[0]*l,t[1]=e[1]*c+n[1]*h+r[1]*f+i[1]*l,t[2]=e[2]*c+n[2]*h+r[2]*f+i[2]*l,t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI,i=2*r.RANDOM()-1,a=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=i*e,t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=n[3]*r+n[7]*i+n[11]*a+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*a+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*a+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*a+n[14])/o,t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1],a=e[2];return t[0]=r*n[0]+i*n[3]+a*n[6],t[1]=r*n[1]+i*n[4]+a*n[7],t[2]=r*n[2]+i*n[5]+a*n[8],t},e.transformQuat=function(t,e,n){var r=n[0],i=n[1],a=n[2],o=n[3],s=e[0],u=e[1],c=e[2],h=i*c-a*u,f=a*s-r*c,l=r*u-i*s,p=i*l-a*f,d=a*h-r*l,g=r*f-i*h,v=2*o;return h*=v,f*=v,l*=v,p*=2,d*=2,g*=2,t[0]=s+h+p,t[1]=u+f+d,t[2]=c+l+g,t},e.rotateX=function(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0],a[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),a[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateY=function(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),a[1]=i[1],a[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.rotateZ=function(t,e,n,r){var i=[],a=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],a[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),a[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),a[2]=i[2],t[0]=a[0]+n[0],t[1]=a[1]+n[1],t[2]=a[2]+n[2],t},e.angle=function(t,e){var n=o(t[0],t[1],t[2]),r=o(e[0],e[1],e[2]);p(n,n),p(r,r);var i=d(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],i=t[1],a=t[2],o=e[0],s=e[1],u=e[2];return Math.abs(n-o)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-s)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(a-u)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(59));function i(){var t=new r.ARRAY_TYPE(3);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e,n){var i=new r.ARRAY_TYPE(3);return i[0]=t,i[1]=e,i[2]=n,i}function s(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function c(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function h(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function f(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function l(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function p(t,e){var n=e[0],r=e[1],i=e[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}e.sub=s,e.mul=u,e.div=c,e.dist=h,e.sqrDist=f,e.len=a,e.sqrLen=l,e.forEach=function(){var t=i();return function(e,n,r,i,a,o){var s=void 0,u=void 0;for(n||(n=3),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],a(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=i,e.clone=function(t){var e=new r.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new r.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=o,e.divide=s,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=c,e.length=h,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],i=n*n+r*r;i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i);return t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var i=e[0],a=e[1];return t[0]=i+r*(n[0]-i),t[1]=a+r*(n[1]-a),t},e.random=function(t,e){e=e||1;var n=2*r.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t},e.transformMat2d=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t},e.rotate=function(t,e,n,r){var i=e[0]-n[0],a=e[1]-n[1],o=Math.sin(r),s=Math.cos(r);return t[0]=i*s-a*o+n[0],t[1]=i*o+a*s+n[1],t},e.angle=function(t,e){var n=t[0],r=t[1],i=e[0],a=e[1],o=n*n+r*r;o>0&&(o=1/Math.sqrt(o));var s=i*i+a*a;s>0&&(s=1/Math.sqrt(s));var u=(n*i+r*a)*o*s;return u>1?0:u<-1?Math.PI:Math.acos(u)},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],i=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(o))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(59));function i(){var t=new r.ARRAY_TYPE(2);return r.ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function s(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function h(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function f(t){var e=t[0],n=t[1];return e*e+n*n}e.len=h,e.sub=a,e.mul=o,e.div=s,e.dist=u,e.sqrDist=c,e.sqrLen=f,e.forEach=function(){var t=i();return function(e,n,r,i,a,o){var s=void 0,u=void 0;for(n||(n=2),r||(r=0),u=i?Math.min(i*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],a(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new r.ARRAY_TYPE(9);r.ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0);return t[0]=1,t[4]=1,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new r.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,i,a,o,s,u,c){var h=new r.ARRAY_TYPE(9);return h[0]=t,h[1]=e,h[2]=n,h[3]=i,h[4]=a,h[5]=o,h[6]=s,h[7]=u,h[8]=c,h},e.set=function(t,e,n,r,i,a,o,s,u,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=a,t[5]=o,t[6]=s,t[7]=u,t[8]=c,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=h*o-s*c,l=-h*a+s*u,p=c*a-o*u,d=n*f+r*l+i*p;if(!d)return null;return d=1/d,t[0]=f*d,t[1]=(-h*r+i*c)*d,t[2]=(s*r-i*o)*d,t[3]=l*d,t[4]=(h*n-i*u)*d,t[5]=(-s*n+i*a)*d,t[6]=p*d,t[7]=(-c*n+r*u)*d,t[8]=(o*n-r*a)*d,t},e.adjoint=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8];return t[0]=o*h-s*c,t[1]=i*c-r*h,t[2]=r*s-i*o,t[3]=s*u-a*h,t[4]=n*h-i*u,t[5]=i*a-n*s,t[6]=a*c-o*u,t[7]=r*u-n*c,t[8]=n*o-r*a,t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],i=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*(c*a-o*u)+n*(-c*i+o*s)+r*(u*i-a*s)},e.multiply=i,e.translate=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=a,t[3]=o,t[4]=s,t[5]=u,t[6]=l*r+p*o+c,t[7]=l*i+p*s+h,t[8]=l*a+p*u+f,t},e.rotate=function(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=Math.sin(n),p=Math.cos(n);return t[0]=p*r+l*o,t[1]=p*i+l*s,t[2]=p*a+l*u,t[3]=p*o-l*r,t[4]=p*s-l*i,t[5]=p*u-l*a,t[6]=c,t[7]=h,t[8]=f,t},e.scale=function(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=n+n,s=r+r,u=i+i,c=n*o,h=r*o,f=r*s,l=i*o,p=i*s,d=i*u,g=a*o,v=a*s,m=a*u;return t[0]=1-f-d,t[3]=h-m,t[6]=l+v,t[1]=h+m,t[4]=1-c-d,t[7]=p-g,t[2]=l-v,t[5]=p+g,t[8]=1-c-f,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],u=e[6],c=e[7],h=e[8],f=e[9],l=e[10],p=e[11],d=e[12],g=e[13],v=e[14],m=e[15],x=n*s-r*o,y=n*u-i*o,b=n*c-a*o,M=r*u-i*s,w=r*c-a*s,_=i*c-a*u,E=h*g-f*d,S=h*v-l*d,A=h*m-p*d,P=f*v-l*g,O=f*m-p*g,C=l*m-p*v,I=x*C-y*O+b*P+M*A-w*S+_*E;if(!I)return null;return I=1/I,t[0]=(s*C-u*O+c*P)*I,t[1]=(u*A-o*C-c*S)*I,t[2]=(o*O-s*A+c*E)*I,t[3]=(i*O-r*C-a*P)*I,t[4]=(n*C-i*A+a*S)*I,t[5]=(r*A-n*O-a*E)*I,t[6]=(g*_-v*w+m*M)*I,t[7]=(v*b-d*_-m*y)*I,t[8]=(d*w-g*b+m*x)*I,t},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],i=t[1],a=t[2],o=t[3],s=t[4],u=t[5],c=t[6],h=t[7],f=t[8],l=e[0],p=e[1],d=e[2],g=e[3],v=e[4],m=e[5],x=e[6],y=e[7],b=e[8];return Math.abs(n-l)<=r.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(i-p)<=r.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(a-d)<=r.EPSILON*Math.max(1,Math.abs(a),Math.abs(d))&&Math.abs(o-g)<=r.EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(s-v)<=r.EPSILON*Math.max(1,Math.abs(s),Math.abs(v))&&Math.abs(u-m)<=r.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(c-x)<=r.EPSILON*Math.max(1,Math.abs(c),Math.abs(x))&&Math.abs(h-y)<=r.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(f-b)<=r.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(59));function i(t,e,n){var r=e[0],i=e[1],a=e[2],o=e[3],s=e[4],u=e[5],c=e[6],h=e[7],f=e[8],l=n[0],p=n[1],d=n[2],g=n[3],v=n[4],m=n[5],x=n[6],y=n[7],b=n[8];return t[0]=l*r+p*o+d*c,t[1]=l*i+p*s+d*h,t[2]=l*a+p*u+d*f,t[3]=g*r+v*o+m*c,t[4]=g*i+v*s+m*h,t[5]=g*a+v*u+m*f,t[6]=x*r+y*o+b*c,t[7]=x*i+y*s+b*h,t[8]=x*a+y*u+b*f,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}e.mul=i,e.sub=a},function(t,e,n){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=5,a=n(819);Math.sign=function(t){return 0===(t=+t)||isNaN(t)?t:t>0?1:-1};var o=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({},a,{throttle:n(749),debounce:n(645),omit:function(t,e){var n={};return a.each(t,function(t,r){-1===e.indexOf(r)&&(n[r]=t)}),n},traverseTree:function(t,e,n,r){void 0===r&&(r=!1);var i=n(t);r&&e(t,null,null),i&&o.each(i,function(r,i){e(r,t,i),o.traverseTree(r,e,n)})},toAllPadding:function(t){var e=0,n=0,r=0,i=0;return o.isNumber(t)||o.isString(t)?e=n=r=i=t:o.isArray(t)&&(e=t[0],r=o.isNil(t[1])?t[0]:t[1],i=o.isNil(t[2])?t[0]:t[2],n=o.isNil(t[3])?r:t[3]),[e,r,i,n]},guid:function(){return"xxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},mix:function(){var t,e,n=o.toArray(arguments),r=n[0];if(!0===r)for(r=n[1],e=2;e<n.length;e++)s(r,t=n[e]);else for(e=1;e<n.length;e++)for(var i in t=n[e])t.hasOwnProperty(i)&&"constructor"!==i&&(r[i]=t[i]);return r},mixin:function(t,e){if(t&&e){t._mixins=e,t.ATTRS=t.ATTRS||{};o.each(e,function(e){o.augment(t,e)}),t.ATTRS=o.mix({},t.ATTRS)}}});function s(t,e,n){for(var r in n=n||0,e)if(e.hasOwnProperty(r)){var a=e[r];null!==a&&o.isPlainObject(a)?(o.isPlainObject(t[r])||(t[r]={}),n<i?s(t[r],e[r],n+1):t[r]=e[r]):o.isArray(a)?(t[r]=[],t[r]=t[r].concat(a)):void 0!==a&&(t[r]=e[r])}}o.Array={remove:function(t,e){var n=o.indexOf(t,e);-1!==n&&t.splice(n,1)}},t.exports=o},function(t,e,n){var r=n(26),i={},a={draw:function(){}},o={defaultShapeType:null,getShape:function(t,e){return this[t]||this[e]||this[this.defaultShapeType]||a},getExtendShape:function(t,e){var n=this;if(r.isArray(t)){var i={};return t.forEach(function(t){n[t]&&(i=r.mix({},i,n.getShape(t,e)))}),i}return this.getShape(t,e)}};i.registerShapeManager=function(t,e){var n=r.mix({},o,e),a=r.upperFirst(t);return i[a]=n,i["register"+a]=function(t,e,i,a){r.isNil(i)&&r.isNil(a)&&(i=t);var o=n.getExtendShape(i,a),s=r.mix(!0,{},o,e);return s.type=t,n[t]=s,s},n},t.exports=i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var r=n(19),i=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi;t.exports={parseRadius:function(t){var e=0,n=0,i=0,a=0;return r.isArray(t)?1===t.length?e=n=i=a=t[0]:2===t.length?(e=i=t[0],n=a=t[1]):3===t.length?(e=t[0],n=a=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],a=t[3]):e=n=i=a=t,{r1:e,r2:n,r3:i,r4:a}},parsePath:function(t){return t=t||[],r.isArray(t)?t:r.isString(t)?(t=t.match(i),r.each(t,function(e,n){if((e=e.match(a))[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}r.each(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0}}},function(t,e,n){var r=n(237);t.exports=function(t){return r(t)?"":t.toString()}},function(t,e,n){var r=n(115);t.exports=function(t){return r(t,"String")}},function(t,e,n){var r=n(619),i=n(115);t.exports=function(t){if(!r(t)||!i(t,"Object"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},function(t,e,n){var r=function(t){function e(e){var n;return(n=t.call(this)||this).options=e,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){var t=this,e=this.options;this.roots.forEach(function(n){t.layout(n,e).eachNode(function(t){t.data.x=t.x+t.data.width/2+t.hgap,t.data.y=t.y+t.data.height/2+t.vgap})})},e}(n(622));t.exports=r},function(t,e,n){!function(e,n){t.exports=n()}("undefined"!=typeof self&&self,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){var r=n(7);t.exports={assign:r}},function(t,e,n){var r=n(3),i=function(){function t(t,e){void 0===e&&(e={});this.options=e,this.rootNode=r(t,e)}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=i},function(t,e,n){var r=n(4),i=["LR","RL","TB","BT","H","V"],a=["LR","RL","H"],o=i[0];t.exports=function(t,e,n){var s=e.direction||o;if(e.isHorizontal=function(t){return a.indexOf(t)>-1}(s),s&&-1===i.indexOf(s))throw new TypeError("Invalid direction: "+s);if(s===i[0])n(t,e);else if(s===i[1])n(t,e),t.right2left();else if(s===i[2])n(t,e);else if(s===i[3])n(t,e),t.bottom2top();else if(s===i[4]||s===i[5]){var u=r(t,e),c=u.left,h=u.right;n(c,e),n(h,e),e.isHorizontal?c.right2left():c.bottom2top(),h.translate(c.x-h.x,c.y-h.y),t.x=c.x,t.y=h.y;var f=t.getBoundingBox();e.isHorizontal?f.top<0&&t.translate(0,-f.top):f.left<0&&t.translate(-f.left,0)}return t.translate(-(t.x+t.width/2+t.hgap),-(t.y+t.height/2+t.vgap)),t}},function(t,e,n){var r=n(0),i={getId:function(t){return t.id||t.name},getHGap:function(t){return t.hgap||18},getVGap:function(t){return t.vgap||18},getChildren:function(t){return t.children},getHeight:function(t){return t.height||36},getWidth:function(t){var e=t.name||" ";return t.width||18*e.split("").length}};function a(t,e){var n=this;if(n.vgap=n.hgap=0,t instanceof a)return t;n.data=t;var r=e.getHGap(t),i=e.getVGap(t);return n.width=e.getWidth(t),n.height=e.getHeight(t),n.id=e.getId(t),n.x=n.y=0,n.depth=0,n.children||(n.children=[]),n.addGap(r,i),n}r.assign(a.prototype,{isRoot:function(){return 0===this.depth},isLeaf:function(){return 0===this.children.length},addGap:function(t,e){this.hgap+=t,this.vgap+=e,this.width+=2*t,this.height+=2*e},eachNode:function(t){for(var e,n=[this];e=n.pop();)t(e),n=n.concat(e.children)},DFTraverse:function(t){this.eachNode(t)},BFTraverse:function(t){for(var e,n=[this];e=n.shift();)t(e),n=n.concat(e.children)},getBoundingBox:function(){var t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(e){t.left=Math.min(t.left,e.x),t.top=Math.min(t.top,e.y),t.width=Math.max(t.width,e.x+e.width),t.height=Math.max(t.height,e.y+e.height)}),t},translate:function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.eachNode(function(n){n.x+=t,n.y+=e})},right2left:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.x=e.x-2*(e.x-t.left)-e.width}),this.translate(t.width,0)},bottom2top:function(){var t=this.getBoundingBox();this.eachNode(function(e){e.y=e.y-2*(e.y-t.top)-e.height}),this.translate(0,t.height)}}),t.exports=function(t,e,n){void 0===e&&(e={});var o,s=new a(t,e=r.assign({},i,e)),u=[s];if(!n&&!t.collapsed)for(;o=u.pop();)if(!o.data.collapsed){var c=e.getChildren(o.data),h=c?c.length:0;if(o.children=new Array(h),c&&h)for(var f=0;f<h;f++){var l=new a(c[f],e);o.children[f]=l,u.push(l),l.parent=o,l.depth=o.depth+1}}return s}},function(t,e,n){var r=n(3);t.exports=function(t,e){for(var n=r(t.data,e,!0),i=r(t.data,e,!0),a=t.children.length,o=Math.round(a/2),s=e.getSide||function(t,e){return e<o?"right":"left"},u=0;u<a;u++){var c=t.children[u];"right"===s(c,u)?i.children.push(c):n.children.push(c)}return n.eachNode(function(t){t.isRoot()||(t.side="left")}),i.eachNode(function(t){t.isRoot()||(t.side="right")}),{left:n,right:i}}},function(t,e,n){var r={compactBox:n(6),dendrogram:n(9),indented:n(11),mindmap:n(13)};t.exports=r},function(t,e,n){var r=n(1),i=n(8),a=n(2),o=n(0),s=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){return a(this.rootNode,this.options,i)},e}(r),u={};t.exports=function(t,e){return e=o.assign({},u,e),new s(t,e).execute()}},function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}t.exports=function(t,e,r,i){return e&&n(t,e),r&&n(t,r),i&&n(t,i),t}},function(t,e){function n(t,e,n,r){void 0===r&&(r=[]);var i=this;i.w=t||0,i.h=e||0,i.y=n||0,i.x=0,i.c=r||[],i.cs=r.length,i.prelim=0,i.mod=0,i.shift=0,i.change=0,i.tl=null,i.tr=null,i.el=null,i.er=null,i.msel=0,i.mser=0}function r(t,e){!function t(e,n,r){r?e.y+=n:e.x+=n,e.children.forEach(function(e){t(e,n,r)})}(t,-function t(e,n){var r=n?e.y:e.x;return e.children.forEach(function(e){r=Math.min(t(e,n),r)}),r}(t,e),e)}n.fromNode=function(t,e){if(!t)return null;var r=[];return t.children.forEach(function(t){r.push(n.fromNode(t,e))}),e?new n(t.height,t.width,t.x,r):new n(t.width,t.height,t.y,r)},t.exports=function(t,e){void 0===e&&(e={});var i=e.isHorizontal;function a(t){0===t.cs?(t.el=t,t.er=t,t.msel=t.mser=0):(t.el=t.c[0].el,t.msel=t.c[0].msel,t.er=t.c[t.cs-1].er,t.mser=t.c[t.cs-1].mser)}function o(t,e,n){for(var r=t.c[e-1],i=r.mod,a=t.c[e],o=a.mod;null!==r&&null!==a;){h(r)>n.low&&(n=n.nxt);var f=i+r.prelim+r.w-(o+a.prelim);f>0&&(o+=f,s(t,e,n.index,f));var l=h(r),p=h(a);l<=p&&null!==(r=c(r))&&(i+=r.mod),l>=p&&null!==(a=u(a))&&(o+=a.mod)}!r&&a?function(t,e,n,r){var i=t.c[0].el;i.tl=n;var a=r-n.mod-t.c[0].msel;i.mod+=a,i.prelim-=a,t.c[0].el=t.c[e].el,t.c[0].msel=t.c[e].msel}(t,e,a,o):r&&!a&&function(t,e,n,r){var i=t.c[e].er;i.tr=n;var a=r-n.mod-t.c[e].mser;i.mod+=a,i.prelim-=a,t.c[e].er=t.c[e-1].er,t.c[e].mser=t.c[e-1].mser}(t,e,r,i)}function s(t,e,n,r){t.c[e].mod+=r,t.c[e].msel+=r,t.c[e].mser+=r,function(t,e,n,r){if(n!==e-1){var i=e-n;t.c[n+1].shift+=r/i,t.c[e].shift-=r/i,t.c[e].change-=r-r/i}}(t,e,n,r)}function u(t){return 0===t.cs?t.tl:t.c[0]}function c(t){return 0===t.cs?t.tr:t.c[t.cs-1]}function h(t){return t.y+t.h}function f(t,e,n){for(;null!==n&&t>=n.low;)n=n.nxt;return{low:t,index:e,nxt:n}}!function t(e,n,r){void 0===r&&(r=0),n?(e.x=r,r+=e.width):(e.y=r,r+=e.height),e.children.forEach(function(e){t(e,n,r)})}(t,i);var l=n.fromNode(t,i);return function t(e){if(0!==e.cs){t(e.c[0]);for(var n=f(h(e.c[0].el),0,null),r=1;r<e.cs;++r){t(e.c[r]);var i=h(e.c[r].er);o(e,r,n),n=f(i,r,n)}!function(t){t.prelim=(t.c[0].prelim+t.c[0].mod+t.c[t.cs-1].mod+t.c[t.cs-1].prelim+t.c[t.cs-1].w)/2-t.w/2}(e),a(e)}else a(e)}(l),function t(e,n){n+=e.mod,e.x=e.prelim+n,function(t){for(var e=0,n=0,r=0;r<t.cs;r++)e+=t.c[r].shift,n+=e+t.c[r].change,t.c[r].mod+=n}(e);for(var r=0;r<e.cs;r++)t(e.c[r],n)}(l,0),function t(e,n,r){r?n.y=e.x:n.x=e.x,e.c.forEach(function(e,i){t(e,n.children[i],r)})}(l,t,i),r(t,i),t}},function(t,e,n){var r=n(1),i=n(10),a=n(2),o=n(0),s=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){return this.rootNode.width=0,a(this.rootNode,this.options,i)},e}(r),u={};t.exports=function(t,e){return e=o.assign({},u,e),new s(t,e).execute()}},function(t,e,n){var r=n(0);var i={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},i,e);var n,a=0;var o=function t(e){if(!e)return null;e.width=0,e.depth&&e.depth>a&&(a=e.depth);var n=e.children,r=n.length,i=new function(t,e){void 0===t&&(t=0),void 0===e&&(e=[]);var n=this;n.x=n.y=0,n.leftChild=n.rightChild=null,n.height=0,n.children=e}(e.height,[]);return n.forEach(function(e,n){var a=t(e);i.children.push(a),0===n&&(i.leftChild=a),n===r-1&&(i.rightChild=a)}),i.originNode=e,i.isLeaf=e.isLeaf(),i}(t);return function t(e){if(e.isLeaf||0===e.children.length)e.drawingDepth=a;else{var n=e.children.map(function(e){return t(e)}),r=Math.min.apply(null,n);e.drawingDepth=r-1}return e.drawingDepth}(o),function t(r){r.x=r.drawingDepth*e.rankSep,r.isLeaf?(r.y=0,n&&(r.y=n.y+n.height+e.nodeSep,r.originNode.parent!==n.originNode.parent&&(r.y+=e.subTreeSep)),n=r):(r.children.forEach(function(e){t(e)}),r.y=(r.leftChild.y+r.rightChild.y)/2)}(o),function t(e,n,r){r?(n.x=e.x,n.y=e.y):(n.x=e.y,n.y=e.x),e.children.forEach(function(e,i){t(e,n.children[i],r)})}(o,t,e.isHorizontal),t}},function(t,e,n){var r=n(1),i=n(12),a=n(4),o=n(0),s=["LR","RL","H"],u=s[0],c=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){var t=this.options,e=this.rootNode;t.isHorizontal=!0;var n=t.indent,r=t.direction||u;if(r&&-1===s.indexOf(r))throw new TypeError("Invalid direction: "+r);if(r===s[0])i(e,n);else if(r===s[1])i(e,n),e.right2left();else if(r===s[2]){var o=a(e,t),c=o.left,h=o.right;i(c,n),c.right2left(),i(h,n);var f=c.getBoundingBox();h.translate(f.width,0),e.x=h.x-e.width/2}return e},e}(r),h={};t.exports=function(t,e){return e=o.assign({},h,e),new c(t,e).execute()}},function(t,e){t.exports=function(t,e){void 0===e&&(e=20);var n=null;t.eachNode(function(t){!function(t,e,n){t.x+=n*t.depth,t.y=e?e.y+e.height:0}(t,n,e),n=t})}},function(t,e,n){var r=n(1),i=n(14),a=n(2),o=n(0),s=function(t){function e(){return t.apply(this,arguments)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e.prototype.execute=function(){return a(this.rootNode,this.options,i)},e}(r),u={};t.exports=function(t,e){return e=o.assign({},u,e),new s(t,e).execute()}},function(t,e,n){var r=n(0);var i={getSubTreeSep:function(){return 0}};t.exports=function(t,e){void 0===e&&(e={}),e=r.assign({},i,e),t.parent={x:0,width:0,height:0,y:0},t.BFTraverse(function(t){t.x=t.parent.x+t.parent.width}),t.parent=null,function t(e,n){var r=0;return e.children.length?e.children.forEach(function(e){r+=t(e,n)}):r=e.height,e._subTreeSep=n.getSubTreeSep(e.data),e.totalHeight=Math.max(e.height,r)+2*e._subTreeSep,e.totalHeight}(t,e),t.startY=0,t.y=t.totalHeight/2-t.height/2,t.eachNode(function(t){var e=t.children,n=e.length;if(n){var r=e[0];if(r.startY=t.startY+t._subTreeSep,1===n)r.y=t.y+t.height/2-r.height/2;else{r.y=r.startY+r.totalHeight/2-r.height/2;for(var i=1;i<n;i++){var a=e[i];a.startY=e[i-1].startY+e[i-1].totalHeight,a.y=a.startY+a.totalHeight/2-a.height/2}}}}),function t(e){var n=e.children,r=n.length;if(r){n.forEach(function(e){t(e)});var i=n[0],a=n[r-1],o=a.y-i.y+a.height,s=0;if(n.forEach(function(t){s+=t.totalHeight}),o>e.height)e.y=i.y+o/2-e.height/2;else if(1!==n.length||e.height>s){var u=e.y+(e.height-o)/2-i.y;n.forEach(function(t){t.translate(0,u)})}else e.y=(i.y+i.height/2+a.y+a.height/2)/2-e.height/2}}(t)}}])})},function(t,e,n){var r=n(26),i=function(){var t=e.prototype;function e(t){var e=this.getDefaultCfg();r.mix(this,e,t),this._init()}return t.getDefaultCfg=function(){return{}},t._init=function(){},t.destroy=function(){},e}();t.exports=i},function(t,e,n){var r=n(19),i=n(613),a=n(612),o=n(640),s=n(639),u=r.vec3,c=r.mat3,h=["m","l","c","a","q","h","v","t","s","z"];function f(t,e,n){return{x:n.x+t,y:n.y+e}}function l(t,e){return{x:e.x+(e.x-t.x),y:e.y+(e.y-t.y)}}function p(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function d(t,e){return(t[0]*e[0]+t[1]*e[1])/(p(t)*p(e))}function g(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(d(t,e))}var v=function(t,e,n){this.preSegment=e,this.isLast=n,this.init(t,e)};r.augment(v,{init:function(t,e){var n=t[0];e=e||{endPoint:{x:0,y:0}};var i,a,o,s,u=h.indexOf(n)>=0,c=u?n.toUpperCase():n,p=t,v=e.endPoint,m=p[1],x=p[2];switch(c){default:break;case"M":s=u?f(m,x,v):{x:m,y:x},this.command="M",this.params=[v,s],this.subStart=s,this.endPoint=s;break;case"L":s=u?f(m,x,v):{x:m,y:x},this.command="L",this.params=[v,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return[s.x-v.x,s.y-v.y]},this.startTangent=function(){return[v.x-s.x,v.y-s.y]};break;case"H":s=u?f(m,0,v):{x:m,y:v.y},this.command="L",this.params=[v,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return[s.x-v.x,s.y-v.y]},this.startTangent=function(){return[v.x-s.x,v.y-s.y]};break;case"V":s=u?f(0,m,v):{x:v.x,y:m},this.command="L",this.params=[v,s],this.subStart=e.subStart,this.endPoint=s,this.endTangent=function(){return[s.x-v.x,s.y-v.y]},this.startTangent=function(){return[v.x-s.x,v.y-s.y]};break;case"Q":u?(i=f(m,x,v),a=f(p[3],p[4],v)):(i={x:m,y:x},a={x:p[3],y:p[4]}),this.command="Q",this.params=[v,i,a],this.subStart=e.subStart,this.endPoint=a,this.endTangent=function(){return[a.x-i.x,a.y-i.y]},this.startTangent=function(){return[v.x-i.x,v.y-i.y]};break;case"T":a=u?f(m,x,v):{x:m,y:x},"Q"===e.command?(i=l(e.params[1],v),this.command="Q",this.params=[v,i,a],this.subStart=e.subStart,this.endPoint=a,this.endTangent=function(){return[a.x-i.x,a.y-i.y]},this.startTangent=function(){return[v.x-i.x,v.y-i.y]}):(this.command="TL",this.params=[v,a],this.subStart=e.subStart,this.endPoint=a,this.endTangent=function(){return[a.x-v.x,a.y-v.y]},this.startTangent=function(){return[v.x-a.x,v.y-a.y]});break;case"C":u?(i=f(m,x,v),a=f(p[3],p[4],v),o=f(p[5],p[6],v)):(i={x:m,y:x},a={x:p[3],y:p[4]},o={x:p[5],y:p[6]}),this.command="C",this.params=[v,i,a,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return[o.x-a.x,o.y-a.y]},this.startTangent=function(){return[v.x-i.x,v.y-i.y]};break;case"S":u?(a=f(m,x,v),o=f(p[3],p[4],v)):(a={x:m,y:x},o={x:p[3],y:p[4]}),"C"===e.command?(i=l(e.params[2],v),this.command="C",this.params=[v,i,a,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return[o.x-a.x,o.y-a.y]},this.startTangent=function(){return[v.x-i.x,v.y-i.y]}):(this.command="SQ",this.params=[v,a,o],this.subStart=e.subStart,this.endPoint=o,this.endTangent=function(){return[o.x-a.x,o.y-a.y]},this.startTangent=function(){return[v.x-a.x,v.y-a.y]});break;case"A":var y=m,b=x,M=p[3],w=p[4],_=p[5];s=u?f(p[6],p[7],v):{x:p[6],y:p[7]},this.command="A";var E=function(t,e,n,i,a,o,s){var u=r.mod(r.toRadian(s),2*Math.PI),c=t.x,h=t.y,f=e.x,l=e.y,p=Math.cos(u)*(c-f)/2+Math.sin(u)*(h-l)/2,v=-1*Math.sin(u)*(c-f)/2+Math.cos(u)*(h-l)/2,m=p*p/(a*a)+v*v/(o*o);m>1&&(a*=Math.sqrt(m),o*=Math.sqrt(m));var x=a*a*(v*v)+o*o*(p*p),y=Math.sqrt((a*a*(o*o)-x)/x);n===i&&(y*=-1),isNaN(y)&&(y=0);var b=y*a*v/o,M=y*-o*p/a,w=(c+f)/2+Math.cos(u)*b-Math.sin(u)*M,_=(h+l)/2+Math.sin(u)*b+Math.cos(u)*M,E=g([1,0],[(p-b)/a,(v-M)/o]),S=[(p-b)/a,(v-M)/o],A=[(-1*p-b)/a,(-1*v-M)/o],P=g(S,A);return d(S,A)<=-1&&(P=Math.PI),d(S,A)>=1&&(P=0),0===i&&P>0&&(P-=2*Math.PI),1===i&&P<0&&(P+=2*Math.PI),[t,w,_,a,o,E,P,u,i]}(v,s,w,_,y,b,M);this.params=E;var S=e.subStart;this.subStart=S,this.endPoint=s;var A=E[5]%(2*Math.PI);r.isNumberEqual(A,2*Math.PI)&&(A=0);var P=E[6]%(2*Math.PI);r.isNumberEqual(P,2*Math.PI)&&(P=0);var O=.001;this.startTangent=function(){0===_&&(O*=-1);var t=E[3]*Math.cos(A-O)+E[1],e=E[4]*Math.sin(A-O)+E[2];return[t-S.x,e-S.y]},this.endTangent=function(){var t=E[6];t-2*Math.PI<1e-4&&(t=0);var e=E[3]*Math.cos(A+t+O)+E[1],n=E[4]*Math.sin(A+t-O)+E[2];return[v.x-e,v.y-n]};break;case"Z":this.command="Z",this.params=[v,e.subStart],this.subStart=e.subStart,this.endPoint=e.subStart}},isInside:function(t,e,n){var r=this.command,a=this.params,o=this.box;if(o&&!i.box(o.minX,o.maxX,o.minY,o.maxY,t,e))return!1;switch(r){default:break;case"M":return!1;case"TL":case"L":case"Z":return i.line(a[0].x,a[0].y,a[1].x,a[1].y,n,t,e);case"SQ":case"Q":return i.quadraticline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,n,t,e);case"C":return i.cubicline(a[0].x,a[0].y,a[1].x,a[1].y,a[2].x,a[2].y,a[3].x,a[3].y,n,t,e);case"A":var s=a,h=s[1],f=s[2],l=s[3],p=s[4],d=s[5],g=s[6],v=s[7],m=s[8],x=l>p?l:p,y=l>p?1:l/p,b=l>p?p/l:1;s=[t,e,1];var M=[1,0,0,0,1,0,0,0,1];return c.translate(M,M,[-h,-f]),c.rotate(M,M,-v),c.scale(M,M,[1/y,1/b]),u.transformMat3(s,s,M),i.arcline(0,0,x,d,d+g,1-m,n,s[0],s[1])}return!1},draw:function(t){var e,n,r,i=this.command,a=this.params;switch(i){default:break;case"M":t.moveTo(a[1].x,a[1].y);break;case"TL":case"L":t.lineTo(a[1].x,a[1].y);break;case"SQ":case"Q":e=a[1],n=a[2],t.quadraticCurveTo(e.x,e.y,n.x,n.y);break;case"C":e=a[1],n=a[2],r=a[3],t.bezierCurveTo(e.x,e.y,n.x,n.y,r.x,r.y);break;case"A":var o=a,s=o[1],u=o[2],c=o[3],h=o[4],f=o[5],l=o[6],p=o[7],d=o[8],g=c>h?c:h,v=c>h?1:c/h,m=c>h?h/c:1;t.translate(s,u),t.rotate(p),t.scale(v,m),t.arc(0,0,g,f,f+l,1-d),t.scale(1/v,1/m),t.rotate(-p),t.translate(-s,-u);break;case"Z":t.closePath()}},getBBox:function(t){var e,n,r,i,u=t/2,c=this.params;switch(this.command){default:case"M":case"Z":break;case"TL":case"L":this.box={minX:Math.min(c[0].x,c[1].x)-u,maxX:Math.max(c[0].x,c[1].x)+u,minY:Math.min(c[0].y,c[1].y)-u,maxY:Math.max(c[0].y,c[1].y)+u};break;case"SQ":case"Q":for(r=0,i=(n=o.extrema(c[0].x,c[1].x,c[2].x)).length;r<i;r++)n[r]=o.at(c[0].x,c[1].x,c[2].x,n[r]);for(n.push(c[0].x,c[2].x),r=0,i=(e=o.extrema(c[0].y,c[1].y,c[2].y)).length;r<i;r++)e[r]=o.at(c[0].y,c[1].y,c[2].y,e);e.push(c[0].y,c[2].y),this.box={minX:Math.min.apply(Math,n)-u,maxX:Math.max.apply(Math,n)+u,minY:Math.min.apply(Math,e)-u,maxY:Math.max.apply(Math,e)+u};break;case"C":for(r=0,i=(n=a.extrema(c[0].x,c[1].x,c[2].x,c[3].x)).length;r<i;r++)n[r]=a.at(c[0].x,c[1].x,c[2].x,c[3].x,n[r]);for(r=0,i=(e=a.extrema(c[0].y,c[1].y,c[2].y,c[3].y)).length;r<i;r++)e[r]=a.at(c[0].y,c[1].y,c[2].y,c[3].y,e[r]);n.push(c[0].x,c[3].x),e.push(c[0].y,c[3].y),this.box={minX:Math.min.apply(Math,n)-u,maxX:Math.max.apply(Math,n)+u,minY:Math.min.apply(Math,e)-u,maxY:Math.max.apply(Math,e)+u};break;case"A":var h=c,f=h[1],l=h[2],p=h[3],d=h[4],g=h[5],v=h[6],m=h[7],x=h[8],y=g,b=g+v,M=s.xExtrema(m,p,d),w=1/0,_=-1/0,E=[y,b];for(r=2*-Math.PI;r<=2*Math.PI;r+=Math.PI){var S=M+r;1===x?y<S&&S<b&&E.push(S):b<S&&S<y&&E.push(S)}for(r=0,i=E.length;r<i;r++){var A=s.xAt(m,p,d,f,E[r]);A<w&&(w=A),A>_&&(_=A)}var P=s.yExtrema(m,p,d),O=1/0,C=-1/0,I=[y,b];for(r=2*-Math.PI;r<=2*Math.PI;r+=Math.PI){var T=P+r;1===x?y<T&&T<b&&I.push(T):b<T&&T<y&&I.push(T)}for(r=0,i=I.length;r<i;r++){var k=s.yAt(m,p,d,l,I[r]);k<O&&(O=k),k>C&&(C=k)}this.box={minX:w-u,maxX:_+u,minY:O-u,maxY:C+u}}}}),t.exports=v},function(t,e,n){var r=n(593),i=n(600),a=Math.PI,o=Math.sin,s=Math.cos,u=Math.atan2,c=10,h=a/3;function f(t,e,n,r,i,f,l){var p,d,g,v,m,x,y;if(!e.fill){var b=e.arrowLength||c,M=e.arrowAngle?e.arrowAngle*a/180:h;y=u(r-f,n-i),m=Math.abs(e.lineWidth*s(y))/2,x=Math.abs(e.lineWidth*o(y))/2,l&&(m=-m,x=-x),p=i+b*s(y+M/2),d=f+b*o(y+M/2),g=i+b*s(y-M/2),v=f+b*o(y-M/2),t.beginPath(),t.moveTo(p-m,d-x),t.lineTo(i-m,f-x),t.lineTo(g-m,v-x),t.moveTo(i-m,f-x),t.lineTo(i+m,f+x),t.moveTo(i,f),t.stroke()}}function l(t,e,n,a,o,s,u){var c=u?e.startArrow:e.endArrow,h=c.d,f=0,l=o-n,p=s-a,d=Math.atan(l/p);0===p&&l<0?f=Math.PI:l>0&&p>0?f=Math.PI/2-d:l<0&&p<0?f=-Math.PI/2-d:l>=0&&p<0?f=-d-Math.PI/2:l<=0&&p>0&&(f=Math.PI/2-d);var g=function(t){var e,n=[],a=r.parsePath(t.path);if(!Array.isArray(a)||0===a.length||"M"!==a[0][0]&&"m"!==a[0][0])return!1;for(var o=a.length,s=0;s<a.length;s++){var u=a[s];e=new i(u,e,s===o-1),n.push(e)}return n}(c);if(g){h&&(u?(o+=Math.sin(Math.abs(d))*h,s=s+Math.cos(Math.abs(d))*h-.5*t.lineWidth):(o-=Math.sin(Math.abs(d))*h,s=s-Math.cos(Math.abs(d))*h+.5*t.lineWidth)),t.save(),t.beginPath(),t.translate(o,s),t.rotate(f);for(var v=0;v<g.length;v++)g[v].draw(t);t.setTransform(1,0,0,1,0,0),t.fillStyle=t.strokeStyle,t.fill(),t.restore()}}t.exports={addStartArrow:function(t,e,n,r,i,a){"object"==typeof e.startArrow?l(t,e,n,r,i,a,!0):e.startArrow&&f(t,e,n,r,i,a,!0)},addEndArrow:function(t,e,n,r,i,a){"object"==typeof e.endArrow?l(t,e,n,r,i,a,!1):e.endArrow&&f(t,e,n,r,i,a,!1)}}},function(t,e,n){var r=n(19);function i(t,e,n,r){return{x:Math.cos(r)*n+t,y:Math.sin(r)*n+e}}function a(t,e,n,r){var i,a;return r?t<e?(i=e-t,a=2*Math.PI-n+t):t>n&&(i=2*Math.PI-t+e,a=t-n):(i=t-e,a=n-t),i>a?n:e}function o(t,e,n,i){var o=0;return n-e>=2*Math.PI&&(o=2*Math.PI),e=r.mod(e,2*Math.PI),n=r.mod(n,2*Math.PI)+o,t=r.mod(t,2*Math.PI),i?e>=n?t>n&&t<e?t:a(t,n,e,!0):t<e||t>n?t:a(t,e,n):e<=n?e<t&&t<n?t:a(t,e,n,!0):t>e||t<n?t:a(t,n,e)}function s(t,e,n,i,a,s,u,c,h){var f=[u,c],l=[t,e],p=r.vec2.subtract([],f,l),d=r.vec2.angleTo([1,0],p);d=o(d,i,a,s);var g=[n*Math.cos(d)+t,n*Math.sin(d)+e];return h&&(h.x=g[0],h.y=g[1]),r.vec2.distance(g,f)}t.exports={nearAngle:o,projectPoint:function(t,e,n,r,i,a,o,u){var c={};return s(t,e,n,r,i,a,o,u,c),c},pointDistance:s,box:function(t,e,n,a,s,u){var c=Math.PI/2,h=Math.PI,f=3*Math.PI/2,l=[],p=o(0,a,s,u);0===p&&l.push(i(t,e,n,0)),(p=o(c,a,s,u))===c&&l.push(i(t,e,n,c)),(p=o(h,a,s,u))===h&&l.push(i(t,e,n,h)),(p=o(f,a,s,u))===f&&l.push(i(t,e,n,f)),l.push(i(t,e,n,a)),l.push(i(t,e,n,s));var d=1/0,g=-1/0,v=1/0,m=-1/0;return r.each(l,function(t){d>t.x&&(d=t.x),g<t.x&&(g=t.x),v>t.y&&(v=t.y),m<t.y&&(m=t.y)}),{minX:d,minY:v,maxX:g,maxY:m}}}},function(t,e,n){var r=n(19).vec2;t.exports={at:function(t,e,n){return(e-t)*n+t},pointDistance:function(t,e,n,i,a,o){var s=[n-t,i-e];if(r.exactEquals(s,[0,0]))return NaN;var u=[-s[1],s[0]];r.normalize(u,u);var c=[a-t,o-e];return Math.abs(r.dot(c,u))},box:function(t,e,n,r,i){var a=i/2,o=Math.min(t,n),s=Math.max(t,n);return{minX:o-a,minY:Math.min(e,r)-a,maxX:s+a,maxY:Math.max(e,r)+a}},len:function(t,e,n,r){return Math.sqrt((n-t)*(n-t)+(r-e)*(r-e))}}},function(t,e,n){var r=n(118);t.exports=function(t){return r(t)?Array.prototype.slice.call(t):[]}},function(t,e,n){var r=n(118),i=Array.prototype.indexOf;t.exports=function(t,e){return!!r(t)&&i.call(t,e)>-1}},function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&"constructor"!==n&&void 0!==e[n]&&(t[n]=e[n])}t.exports=function(t,e,r,i){return e&&n(t,e),r&&n(t,r),i&&n(t,i),t}},,function(t,e,n){var r=n(26);var i=function(){function t(t){r.mix(this,{id:"",type:null,model:{},group:null,animate:!1,modelCache:{},isItem:!0,visible:!0},t),this._init()}var e=t.prototype;return e._init=function(){this._initGroup(),this.draw()},e._mapping=function(){var t=this.mapper,e=this.model;t.mapping(e)},e._initGroup=function(){var t=this.group,e=this.model,n=this.type;t.isItemContainer=!0,t.id=e.id,t.itemType=n,t.model=e,t.item=this},e._calculateBBox=function(){var t=this.keyShape,e=this.group,n=r.getBBox(t,e);return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n},e.getLabel=function(){return this.group.findByClass("label")[0]},e.getGraph=function(){return this.graph},e._setShapeObj=function(){var t=this.graph,e=this.type,n=this.getModel();this.shapeObj=t.getShapeObj(e,n)},e._afterDraw=function(){var t=this.graph;this._setGId(),this._cacheModel(),t.emit("afteritemdraw",{item:this})},e._cacheModel=function(){this.modelCache=r.mix({},this.model)},e._setGId=function(){var t=this.group,e=this.id,n=this.type;t.gid=e,t.deepEach(function(t,r,i){var a=r.gid;if(t.id=e,t.eventPreFix=n,t.gid=a+"-"+i,t.isShape){var o=t.get("type");t.gid+="-"+o}})},e._beforeDraw=function(){var t=this.graph,e=this.group;t.emit("beforeitemdraw",{item:this}),e.resetMatrix(),this.updateCollapsedParent()},e._shouldDraw=function(){return!0},e._getDiff=function(){var t=[],e=this.model,n=this.modelCache;return r.each(e,function(e,i){r.isEqual(e,n[i])||t.push(i)}),0!==t.length&&t},e._drawInner=function(){var t=this.animate;this.group.clear(!t),this._mapping(),this._setShapeObj();var e=this.shapeObj,n=e.draw(this);n&&(n.isKeyShape=!0,this.keyShape=n),e.afterDraw&&e.afterDraw(this)},e.deepEach=function(t,e){r.traverseTree(this,t,e||function(t){return t.getChildren()})},e.getShapeObj=function(){return this.shapeObj},e.updateCollapsedParent=function(){var t=this.dataMap;this.collapsedParent=function t(e,n){var r=n[e.parent];if(!r)return!1;if(r){var i=t(r,n);if(i)return i}return r.collapsed?r:void 0}(this.model,t)},e.isVisible=function(){return this.visible},e.hide=function(){var t=this.group,e=this.graph;e.emit("beforeitemhide",{item:this}),t.hide(),this.visible=!1,e.emit("afteritemhide",{item:this})},e.show=function(){var t=this.group,e=this.graph;e.emit("beforeitemshow",{item:this}),t.show(),this.visible=!0,e.emit("afteritemshow",{item:this})},e.draw=function(){this._beforeDraw(),this._shouldDraw()&&this._drawInner(),this._afterDraw()},e.forceUpdate=function(){this._beforeDraw(),this._drawInner(),this._afterDraw()},e.getCenter=function(){var t=this.getBBox();return{x:t.centerX,y:t.centerY}},e.getBBox=function(){return this.bbox||this._calculateBBox()},e.layoutUpdate=function(){this.isVisible()&&this.draw()},e.update=function(){this.draw()},e.getModel=function(){return this.model},e.getKeyShape=function(){return this.keyShape},e.getGraphicGroup=function(){return this.group},e.getHierarchy=function(){return this.graph.getHierarchy(this)},e.getParent=function(){var t=this.model;return this.itemMap[t.parent]},e.getAllParents=function(){for(var t=this.model,e=this.itemMap,n=[],r=t.parent;r&&e[r];){var i=e[r],a=i.getModel();n.push(i),r=a.parent}return n},e.getAllChildren=function(){var t=[];return this.deepEach(function(e){t.push(e)}),t},e.getChildren=function(){var t=this.id;return this.graph.getItems().filter(function(e){return e.model.parent===t})},e.toFront=function(){this.group.toFront()},e.toBack=function(){this.group.toBack()},e.destroy=function(){if(!this.destroyed){var t=this.animate,e=this.graph;e.emit("beforeitemdestroy",{item:this}),this.group.remove(!t),this.destroyed=!0,e.emit("afteritemdestroy",{item:this})}},t}();t.exports=i},function(t,e){t.exports="2.2.6"},function(t,e,n){var r=n(644),i="\t\n\v\f\r   ᠎             　\u2028\u2029",a=new RegExp("([a-z])["+i+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+i+"]*,?["+i+"]*)+)","ig"),o=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+i+"]*,?["+i+"]*","ig"),s=function(t){if(!t)return null;if(typeof t==typeof[])return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},n=[];return String(t).replace(a,function(t,r,i){var a=[],s=r.toLowerCase();if(i.replace(o,function(t,e){e&&a.push(+e)}),"m"===s&&a.length>2&&(n.push([r].concat(a.splice(0,2))),s="l",r="m"===r?"l":"L"),"o"===s&&1===a.length&&n.push([r,a[0]]),"r"===s)n.push([r].concat(a));else for(;a.length>=e[s]&&(n.push([r].concat(a.splice(0,e[s]))),e[s]););}),n},u=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var a=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?a[3]={x:+t[0],y:+t[1]}:i-2===r&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n},c=function(t,e,n,r,i){var a=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var o=Math.PI/180,s=t+n*Math.cos(-r*o),u=t+n*Math.cos(-i*o);a=[["M",s,e+n*Math.sin(-r*o)],["A",n,n,0,+(i-r>180),0,u,e+n*Math.sin(-i*o)]]}else a=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return a},h=function(t){if(!(t=s(t))||!t.length)return[["M",0,0]];var e,n,r=[],i=0,a=0,o=0,h=0,f=0;"M"===t[0][0]&&(o=i=+t[0][1],h=a=+t[0][2],f++,r[0]=["M",i,a]);for(var l,p,d=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),g=f,v=t.length;g<v;g++){if(r.push(l=[]),(e=(p=t[g])[0])!==e.toUpperCase())switch(l[0]=e.toUpperCase(),l[0]){case"A":l[1]=p[1],l[2]=p[2],l[3]=p[3],l[4]=p[4],l[5]=p[5],l[6]=+p[6]+i,l[7]=+p[7]+a;break;case"V":l[1]=+p[1]+a;break;case"H":l[1]=+p[1]+i;break;case"R":for(var m=2,x=(n=[i,a].concat(p.slice(1))).length;m<x;m++)n[m]=+n[m]+i,n[++m]=+n[m]+a;r.pop(),r=r.concat(u(n,d));break;case"O":r.pop(),(n=c(i,a,p[1],p[2])).push(n[0]),r=r.concat(n);break;case"U":r.pop(),r=r.concat(c(i,a,p[1],p[2],p[3])),l=["U"].concat(r[r.length-1].slice(-2));break;case"M":o=+p[1]+i,h=+p[2]+a;break;default:for(var y=1,b=p.length;y<b;y++)l[y]=+p[y]+(y%2?i:a)}else if("R"===e)n=[i,a].concat(p.slice(1)),r.pop(),r=r.concat(u(n,d)),l=["R"].concat(p.slice(-2));else if("O"===e)r.pop(),(n=c(i,a,p[1],p[2])).push(n[0]),r=r.concat(n);else if("U"===e)r.pop(),r=r.concat(c(i,a,p[1],p[2],p[3])),l=["U"].concat(r[r.length-1].slice(-2));else for(var M=0,w=p.length;M<w;M++)l[M]=p[M];if("O"!==(e=e.toUpperCase()))switch(l[0]){case"Z":i=+o,a=+h;break;case"H":i=l[1];break;case"V":a=l[1];break;case"M":o=l[l.length-2],h=l[l.length-1];break;default:i=l[l.length-2],a=l[l.length-1]}}return r},f=function(t,e,n,r){return[t,e,n,r,n,r]},l=function(t,e,n,r,i,a){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*i+2/3*n,1/3*a+2/3*r,i,a]},p=function(t,e){var n,r=h(t),i=e&&h(e),a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},s=[],u=[],c="",p="",d=function(t,e,n){var r,i;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(function t(e,n,r,i,a,o,s,u,c,h){r===i&&(r+=1);var f,l,p,d,g,v=120*Math.PI/180,m=Math.PI/180*(+a||0),x=[],y=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(h)l=h[0],p=h[1],d=h[2],g=h[3];else{e=(f=y(e,n,-m)).x,n=f.y,u=(f=y(u,c,-m)).x,c=f.y,e===u&&n===c&&(u+=1,c+=1);var b=(e-u)/2,M=(n-c)/2,w=b*b/(r*r)+M*M/(i*i);w>1&&(r*=w=Math.sqrt(w),i*=w);var _=r*r,E=i*i,S=(o===s?-1:1)*Math.sqrt(Math.abs((_*E-_*M*M-E*b*b)/(_*M*M+E*b*b)));d=S*r*M/i+(e+u)/2,g=S*-i*b/r+(n+c)/2,l=Math.asin(((n-g)/i).toFixed(9)),p=Math.asin(((c-g)/i).toFixed(9)),l=e<d?Math.PI-l:l,p=u<d?Math.PI-p:p,l<0&&(l=2*Math.PI+l),p<0&&(p=2*Math.PI+p),s&&l>p&&(l-=2*Math.PI),!s&&p>l&&(p-=2*Math.PI)}var A=p-l;if(Math.abs(A)>v){var P=p,O=u,C=c;p=l+v*(s&&p>l?1:-1),x=t(u=d+r*Math.cos(p),c=g+i*Math.sin(p),r,i,a,0,s,O,C,[p,P,d,g])}A=p-l;var I=Math.cos(l),T=Math.sin(l),k=Math.cos(p),N=Math.sin(p),L=Math.tan(A/4),B=4/3*r*L,j=4/3*i*L,D=[e,n],R=[e+B*T,n-j*I],F=[u+B*N,c-j*k],Y=[u,c];if(R[0]=2*D[0]-R[0],R[1]=2*D[1]-R[1],h)return[R,F,Y].concat(x);for(var X=[],G=0,q=(x=[R,F,Y].concat(x).join().split(",")).length;G<q;G++)X[G]=G%2?y(x[G-1],x[G],m).y:y(x[G],x[G+1],m).x;return X}.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,i=2*e.y-e.by):(r=e.x,i=e.y),t=["C",r,i].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(l(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(l(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(f(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(f(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(f(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(f(e.x,e.y,e.X,e.Y))}return t},g=function(t,e){if(t[e].length>7){t[e].shift();for(var a=t[e];a.length;)s[e]="A",i&&(u[e]="A"),t.splice(e++,0,["C"].concat(a.splice(0,6)));t.splice(e,1),n=Math.max(r.length,i&&i.length||0)}},v=function(t,e,a,o,s){t&&e&&"M"===t[s][0]&&"M"!==e[s][0]&&(e.splice(s,0,["M",o.x,o.y]),a.bx=0,a.by=0,a.x=t[s][1],a.y=t[s][2],n=Math.max(r.length,i&&i.length||0))};n=Math.max(r.length,i&&i.length||0);for(var m=0;m<n;m++){r[m]&&(c=r[m][0]),"C"!==c&&(s[m]=c,m&&(p=s[m-1])),r[m]=d(r[m],a,p),"A"!==s[m]&&"C"===c&&(s[m]="C"),g(r,m),i&&(i[m]&&(c=i[m][0]),"C"!==c&&(u[m]=c,m&&(p=u[m-1])),i[m]=d(i[m],o,p),"A"!==u[m]&&"C"===c&&(u[m]="C"),g(i,m)),v(r,i,a,o,m),v(i,r,o,a,m);var x=r[m],y=i&&i[m],b=x.length,M=i&&y.length;a.x=x[b-2],a.y=x[b-1],a.bx=parseFloat(x[b-4])||a.x,a.by=parseFloat(x[b-3])||a.y,o.bx=i&&(parseFloat(y[M-4])||o.x),o.by=i&&(parseFloat(y[M-3])||o.y),o.x=i&&y[M-2],o.y=i&&y[M-1]}return i?[r,i]:r},d=/,?([a-z]),?/gi,g=function(t){return t.join(",").replace(d,"$1")},v=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},m=function(t,e,n,r,i,a,o,s,u){null===u&&(u=1);for(var c=(u=u>1?1:u<0?0:u)/2,h=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],l=0,p=0;p<12;p++){var d=c*h[p]+c,g=v(d,t,n,i,o),m=v(d,e,r,a,s),x=g*g+m*m;l+=f[p]*Math.sqrt(x)}return c*l},x=function(t,e,n,r,i,a,o,s){if(!(Math.max(t,n)<Math.min(i,o)||Math.min(t,n)>Math.max(i,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(t-n)*(a-s)-(e-r)*(i-o);if(u){var c=((t*r-e*n)*(i-o)-(t-n)*(i*s-a*o))/u,h=((t*r-e*n)*(a-s)-(e-r)*(i*s-a*o))/u,f=+c.toFixed(2),l=+h.toFixed(2);if(!(f<+Math.min(t,n).toFixed(2)||f>+Math.max(t,n).toFixed(2)||f<+Math.min(i,o).toFixed(2)||f>+Math.max(i,o).toFixed(2)||l<+Math.min(e,r).toFixed(2)||l>+Math.max(e,r).toFixed(2)||l<+Math.min(a,s).toFixed(2)||l>+Math.max(a,s).toFixed(2)))return{x:c,y:h}}}},y=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},b=function(t,e,n,r,i){if(i)return[["M",+t+ +i,e],["l",n-2*i,0],["a",i,i,0,0,1,i,i],["l",0,r-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-n,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-r],["a",i,i,0,0,1,i,-i],["z"]];var a=[["M",t,e],["l",n,0],["l",0,r],["l",-n,0],["z"]];return a.parsePathArray=g,a},M=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:b(t,e,n,r),vb:[t,e,n,r].join(" ")}},w=function(t,e,n,i,a,o,s,u){r.isArray(t)||(t=[t,e,n,i,a,o,s,u]);var c=function(t,e,n,r,i,a,o,s){for(var u,c,h,f,l=[],p=[[],[]],d=0;d<2;++d)if(0===d?(c=6*t-12*n+6*i,u=-3*t+9*n-9*i+3*o,h=3*n-3*t):(c=6*e-12*r+6*a,u=-3*e+9*r-9*a+3*s,h=3*r-3*e),Math.abs(u)<1e-12){if(Math.abs(c)<1e-12)continue;(f=-h/c)>0&&f<1&&l.push(f)}else{var g=c*c-4*h*u,v=Math.sqrt(g);if(!(g<0)){var m=(-c+v)/(2*u);m>0&&m<1&&l.push(m);var x=(-c-v)/(2*u);x>0&&x<1&&l.push(x)}}for(var y,b=l.length,M=b;b--;)y=1-(f=l[b]),p[0][b]=y*y*y*t+3*y*y*f*n+3*y*f*f*i+f*f*f*o,p[1][b]=y*y*y*e+3*y*y*f*r+3*y*f*f*a+f*f*f*s;return p[0][M]=t,p[1][M]=e,p[0][M+1]=o,p[1][M+1]=s,p[0].length=p[1].length=M+2,{min:{x:Math.min.apply(0,p[0]),y:Math.min.apply(0,p[1])},max:{x:Math.max.apply(0,p[0]),y:Math.max.apply(0,p[1])}}}.apply(null,t);return M(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)},_=function(t,e,n,r,i,a,o,s,u){var c=1-u,h=Math.pow(c,3),f=Math.pow(c,2),l=u*u,p=l*u,d=t+2*u*(n-t)+l*(i-2*n+t),g=e+2*u*(r-e)+l*(a-2*r+e),v=n+2*u*(i-n)+l*(o-2*i+n),m=r+2*u*(a-r)+l*(s-2*a+r);return{x:h*t+3*f*u*n+3*c*u*u*i+p*o,y:h*e+3*f*u*r+3*c*u*u*a+p*s,m:{x:d,y:g},n:{x:v,y:m},start:{x:c*t+u*n,y:c*e+u*r},end:{x:c*i+u*o,y:c*a+u*s},alpha:90-180*Math.atan2(d-v,g-m)/Math.PI}},E=function(t,e,n){if(!function(t,e){return t=M(t),e=M(e),y(e,t.x,t.y)||y(e,t.x2,t.y)||y(e,t.x,t.y2)||y(e,t.x2,t.y2)||y(t,e.x,e.y)||y(t,e.x2,e.y)||y(t,e.x,e.y2)||y(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(w(t),w(e)))return n?0:[];for(var r=~~(m.apply(0,t)/8),i=~~(m.apply(0,e)/8),a=[],o=[],s={},u=n?0:[],c=0;c<r+1;c++){var h=_.apply(0,t.concat(c/r));a.push({x:h.x,y:h.y,t:c/r})}for(var f=0;f<i+1;f++){var l=_.apply(0,e.concat(f/i));o.push({x:l.x,y:l.y,t:f/i})}for(var p=0;p<r;p++)for(var d=0;d<i;d++){var g=a[p],v=a[p+1],b=o[d],E=o[d+1],S=Math.abs(v.x-g.x)<.001?"y":"x",A=Math.abs(E.x-b.x)<.001?"y":"x",P=x(g.x,g.y,v.x,v.y,b.x,b.y,E.x,E.y);if(P){if(s[P.x.toFixed(4)]===P.y.toFixed(4))continue;s[P.x.toFixed(4)]=P.y.toFixed(4);var O=g.t+Math.abs((P[S]-g[S])/(v[S]-g[S]))*(v.t-g.t),C=b.t+Math.abs((P[A]-b[A])/(E[A]-b[A]))*(E.t-b.t);O>=0&&O<=1&&C>=0&&C<=1&&(n?u++:u.push({x:P.x,y:P.y,t1:O,t2:C}))}}return u};function S(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var a=[],o=0;o<e.length-1;o++)0===o&&n.push(e[0]),o===e.length-2&&r.push(e[o+1]),a[o]=[(1-i)*e[o][0]+i*e[o+1][0],(1-i)*e[o][1]+i*e[o+1][1]];t(a,i)}}(t,e),{left:n,right:r.reverse()}}var A=function(t,e,n){if(1===n)return[[].concat(t)];var r=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])r=r.concat(function(t,e,n){var r=[[t[1],t[2]]];n=n||2;var i=[];"A"===e[0]?(r.push(e[6]),r.push(e[7])):"C"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/n,s=0;s<n-1;s++){var u=S(a,o/(1-o*s));i.push(u.left),a=u.right}return i.push(a),i.map(function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e=e.concat(t[t.length-1])})}(t,e,n));else{var i=[].concat(t);"M"===i[0]&&(i[0]="L");for(var a=0;a<=n-1;a++)r.push(i)}return r},P=function(t,e){if(t.length!==e.length)return!1;var n=!0;return r.each(t,function(t,r){if(t!==e[r])return n=!1,!1}),n};function O(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}function C(t,e,n){for(var r,i=[].concat(t),a=1/(n+1),o=I(e)[0],s=1;s<=n;s++)a*=s,0===(r=Math.floor(t.length*a))?i.unshift([o[0]*a+t[r][0]*(1-a),o[1]*a+t[r][1]*(1-a)]):i.splice(r,0,[o[0]*a+t[r][0]*(1-a),o[1]*a+t[r][1]*(1-a)]);return i}function I(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}t.exports={parsePathString:s,parsePathArray:g,pathTocurve:p,pathToAbsolute:h,catmullRomToBezier:u,rectPath:b,fillPath:function(t,e){if(1===t.length)return t;var n=t.length-1,r=e.length-1,i=n/r,a=[];if(1===t.length&&"M"===t[0][0]){for(var o=0;o<r-n;o++)t.push(t[0]);return t}for(var s=0;s<r;s++){var u=Math.floor(i*s);a[u]=(a[u]||0)+1}var c=a.reduce(function(e,r,i){return i===n?e.concat(t[n]):e.concat(A(t[i],t[i+1],r))},[]);return c.unshift(t[0]),"Z"!==e[r]&&"z"!==e[r]||c.push("Z"),c},fillPathByDiff:function(t,e){var n=function(t,e){var n,r,i=t.length,a=e.length,o=0;if(0===i||0===a)return null;for(var s=[],u=0;u<=i;u++)s[u]=[],s[u][0]={min:u};for(var c=0;c<=a;c++)s[0][c]={min:c};for(var h=1;h<=i;h++){n=t[h-1];for(var f=1;f<=a;f++){r=e[f-1],o=P(n,r)?0:1;var l=s[h-1][f].min+1,p=s[h][f-1].min+1,d=s[h-1][f-1].min+o;s[h][f]=O(l,p,d)}}return s}(t,e),r=t.length,i=e.length,a=[],o=1,s=1;if(n[r][i]!==r){for(var u=1;u<=r;u++){var c=n[u][u].min;s=u;for(var h=o;h<=i;h++)n[u][h].min<c&&(c=n[u][h].min,s=h);o=s,n[u][o].type&&a.push({index:u-1,type:n[u][o].type})}for(var f=a.length-1;f>=0;f--)o=a[f].index,"add"===a[f].type?t.splice(o,0,[].concat(t[o])):t.splice(o,1)}var l=i-(r=t.length);if(r<i)for(var p=0;p<l;p++)"z"===t[r-1][0]||"Z"===t[r-1][0]?t.splice(r-2,0,t[r-2]):t.push(t[r-1]),r+=1;return t},formatPath:function(t,e){if(t.length<=1)return t;for(var n,r=0;r<e.length;r++)if(t[r][0]!==e[r][0])switch(n=I(t[r]),e[r][0]){case"M":t[r]=["M"].concat(n[0]);break;case"L":t[r]=["L"].concat(n[0]);break;case"A":t[r]=[].concat(e[r]),t[r][6]=n[0][0],t[r][7]=n[0][1];break;case"Q":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=C(n,t[r-1],1)}t[r]=["Q"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"T":t[r]=["T"].concat(n[0]);break;case"C":if(n.length<3){if(!(r>0)){t[r]=e[r];break}n=C(n,t[r-1],2)}t[r]=["C"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;case"S":if(n.length<2){if(!(r>0)){t[r]=e[r];break}n=C(n,t[r-1],1)}t[r]=["S"].concat(n.reduce(function(t,e){return t.concat(e)},[]));break;default:t[r]=e[r]}return t},intersection:function(t,e){return function(t,e,n){var r,i,a,o,s,u,c,h,f,l;t=p(t),e=p(e);for(var d=n?0:[],g=0,v=t.length;g<v;g++){var m=t[g];if("M"===m[0])r=s=m[1],i=u=m[2];else{"C"===m[0]?(r=(f=[r,i].concat(m.slice(1)))[6],i=f[7]):(f=[r,i,r,i,s,u,s,u],r=s,i=u);for(var x=0,y=e.length;x<y;x++){var b=e[x];if("M"===b[0])a=c=b[1],o=h=b[2];else{"C"===b[0]?(a=(l=[a,o].concat(b.slice(1)))[6],o=l[7]):(l=[a,o,a,o,c,h,c,h],a=c,o=h);var M=E(f,l,n);if(n)d+=M;else{for(var w=0,_=M.length;w<_;w++)M[w].segment1=g,M[w].segment2=x,M[w].bez1=f,M[w].bez2=l;d=d.concat(M)}}}}}return d}(t,e)}}},function(t,e,n){var r=n(19),i=n(58),a=n(593),o=n(600),s=function t(e){t.superclass.constructor.call(this,e)};s.Symbols={circle:function(t,e,n){return[["M",t,e],["m",-n,0],["a",n,n,0,1,0,2*n,0],["a",n,n,0,1,0,2*-n,0]]},square:function(t,e,n){return[["M",t-n,e-n],["L",t+n,e-n],["L",t+n,e+n],["L",t-n,e+n],["Z"]]},diamond:function(t,e,n){return[["M",t-n,e],["L",t,e-n],["L",t+n,e],["L",t,e+n],["Z"]]},triangle:function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e+r],["L",t,e-r],["L",t+n,e+r],["z"]]},"triangle-down":function(t,e,n){var r=n*Math.sin(1/3*Math.PI);return[["M",t-n,e-r],["L",t+n,e-r],["L",t,e+r],["Z"]]}},s.ATTRS={path:null,lineWidth:1},r.extend(s,i),r.augment(s,{type:"marker",canFill:!0,canStroke:!0,getDefaultAttrs:function(){return{x:0,y:0,lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.radius,i=this.getHitLineWidth()/2+r;return{minX:e-i,minY:n-i,maxX:e+i,maxY:n+i}},_getPath:function(){var t=this._attrs,e=t.x,n=t.y,i=t.radius||t.r,a=t.symbol||"circle";return(r.isFunction(a)?a:s.Symbols[a])(e,n,i)},createPath:function(t){var e=this._cfg.segments;if(!e||this._cfg.hasUpdate){var n,r=a.parsePath(this._getPath());t.beginPath(),e=[];for(var i=0;i<r.length;i++){var s=r[i];n=new o(s,n,i===r.length-1),e.push(n),n.draw(t)}this._cfg.segments=e,this._cfg.hasUpdate=!1}else{t.beginPath();for(var u=0;u<e.length;u++)e[u].draw(t)}}}),t.exports=s},function(t,e,n){var r=n(19),i=r.vec2;function a(t,e,n,r,i){var a=1-i;return a*a*(a*r+3*i*n)+i*i*(i*t+3*a*e)}function o(t,e,n,r,o,s,u,c,h,f,l){var p,d,g,v,m,x,y,b,M=.005,w=1/0,_=[h,f];for(d=0;d<1;d+=.05)g=[a(t,n,o,u,d),a(e,r,s,c,d)],(v=i.squaredDistance(_,g))<w&&(p=d,w=v);w=1/0;for(var E=0;E<32&&!(M<1e-4);E++)b=p+M,g=[a(t,n,o,u,y=p-M),a(e,r,s,c,y)],v=i.squaredDistance(_,g),y>=0&&v<w?(p=y,w=v):(x=[a(t,n,o,u,b),a(e,r,s,c,b)],m=i.squaredDistance(_,x),b<=1&&m<w?(p=b,w=m):M*=.5);return l&&(l.x=a(t,n,o,u,p),l.y=a(e,r,s,c,p)),Math.sqrt(w)}function s(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n}t.exports={at:a,derivativeAt:function(t,e,n,r,i){var a=1-i;return 3*(((e-t)*a+2*(n-e)*i)*a+(r-n)*i*i)},projectPoint:function(t,e,n,r,i,a,s,u,c,h){var f={};return o(t,e,n,r,i,a,s,u,c,h,f),f},pointDistance:o,extrema:function(t,e,n,i){var a,o,s,u=3*t-9*e+9*n-3*i,c=6*e-12*n+6*i,h=3*n-3*i,f=[];if(r.isNumberEqual(u,0))r.isNumberEqual(c,0)||(a=-h/c)>=0&&a<=1&&f.push(a);else{var l=c*c-4*u*h;r.isNumberEqual(l,0)?f.push(-c/(2*u)):l>0&&(o=(-c-(s=Math.sqrt(l)))/(2*u),(a=(-c+s)/(2*u))>=0&&a<=1&&f.push(a),o>=0&&o<=1&&f.push(o))}return f},len:function(t,e,n,i,a,o,u,c,h){r.isNil(h)&&(h=1);for(var f=(h=h>1?1:h<0?0:h)/2,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,g=0;g<12;g++){var v=f*l[g]+f,m=s(v,t,n,a,u),x=s(v,e,i,o,c),y=m*m+x*x;d+=p[g]*Math.sqrt(y)}return f*d}}},function(t,e,n){var r=n(603),i=n(640),a=n(612),o=n(602);t.exports={line:function(t,e,n,i,a,o,s){var u=r.box(t,e,n,i,a);if(!this.box(u.minX,u.maxX,u.minY,u.maxY,o,s))return!1;var c=r.pointDistance(t,e,n,i,o,s);return!isNaN(c)&&c<=a/2},polyline:function(t,e,n,r){var i=t.length-1;if(i<1)return!1;for(var a=0;a<i;a++){var o=t[a][0],s=t[a][1],u=t[a+1][0],c=t[a+1][1];if(this.line(o,s,u,c,e,n,r))return!0}return!1},cubicline:function(t,e,n,r,i,o,s,u,c,h,f){return a.pointDistance(t,e,n,r,i,o,s,u,h,f)<=c/2},quadraticline:function(t,e,n,r,a,o,s,u,c){return i.pointDistance(t,e,n,r,a,o,u,c)<=s/2},arcline:function(t,e,n,r,i,a,s,u,c){return o.pointDistance(t,e,n,r,i,a,u,c)<=s/2},rect:function(t,e,n,r,i,a){return t<=i&&i<=t+n&&e<=a&&a<=e+r},circle:function(t,e,n,r,i){return Math.pow(r-t,2)+Math.pow(i-e,2)<=Math.pow(n,2)},box:function(t,e,n,r,i,a){return t<=i&&i<=e&&n<=a&&a<=r}}},function(t,e,n){var r=n(619),i=n(118),a=n(595);t.exports=function t(e,n){if(e===n)return!0;if(!e||!n)return!1;if(a(e)||a(n))return!1;if(i(e)||i(n)){if(e.length!==n.length)return!1;for(var o=!0,s=0;s<e.length&&(o=t(e[s],n[s]));s++);return o}if(r(e)||r(n)){var u=Object.keys(e),c=Object.keys(n);if(u.length!==c.length)return!1;for(var h=!0,f=0;f<u.length&&(h=t(e[u[f]],n[u[f]]));f++);return h}return!1}},function(t,e,n){var r=n(596),i=n(45),a=5;function o(t,e,n,s){for(var u in n=n||0,s=s||a,e)if(e.hasOwnProperty(u)){var c=e[u];null!==c&&r(c)?(r(t[u])||(t[u]={}),n<s?o(t[u],c,n+1,s):t[u]=e[u]):i(c)?(t[u]=[],t[u]=t[u].concat(c)):void 0!==c&&(t[u]=c)}}t.exports=function(){for(var t=new Array(arguments.length),e=t.length,n=0;n<e;n++)t[n]=arguments[n];for(var r=t[0],i=1;i<e;i++)o(r,t[i]);return r}},function(t,e,n){var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(45);t.exports=function t(e){if("object"!==(void 0===e?"undefined":r(e))||null===e)return e;var n=void 0;if(i(e)){n=[];for(var a=0,o=e.length;a<o;a++)"object"===r(e[a])&&null!=e[a]?n[a]=t(e[a]):n[a]=e[a]}else for(var s in n={},e)"object"===r(e[s])&&null!=e[s]?n[s]=t(e[s]):n[s]=e[s];return n}},function(t,e,n){var r=n(256);r.translate=function(t,e,n){var i=new Array(9);return r.fromTranslation(i,n),r.multiply(t,i,e)},r.rotate=function(t,e,n){var i=new Array(9);return r.fromRotation(i,n),r.multiply(t,i,e)},r.scale=function(t,e,n){var i=new Array(9);return r.fromScaling(i,n),r.multiply(t,i,e)},t.exports=r},function(t,e){t.exports=function(t,e,n){return t<e?e:t>n?n:t}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){return"object"===(void 0===t?"undefined":n(t))&&null!==t}},function(t,e,n){var r=n(46),i=n(118);t.exports=function(t,e){if(!i(t))return t;var n=[];return r(t,function(t,r){e(t,r)&&n.push(t)}),n}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=function(t){var e=void 0===t?"undefined":n(t);return null!==t&&"object"===e||"function"===e}},function(t,e){var n=function(){function t(){}return t.prototype.execute=function(){throw new Error("please override this method")},t}();t.exports=n},function(t,e,n){t.exports={CompactBoxTree:n(688),Dendrogram:n(687),IndentedTree:n(686),Mindmap:n(685),Base:n(622)}},function(t,e,n){var r=n(26),i=function(t){function e(e){var n={type:"node",isNode:!0,zIndex:3,edges:[],linkable:!0};return r.mix(n,e),t.call(this,n)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.updatePosition=function(){var t=this.group,e=this.model;t.setMatrix([1,0,0,0,1,0,e.x?e.x:0,e.y?e.y:0,1]),this.bbox=this._calculateBBox()},n._shouldDraw=function(){var e=this._getDiff(),n=t.prototype._shouldDraw.call(this);return e&&!(2===e.length&&-1!==e.indexOf("x")&&-1!==e.indexOf("y"))&&!(1===e.length&&("x"===e[0]||"y"===e[0]))&&n},n._afterDraw=function(){this.updatePosition(),t.prototype._afterDraw.call(this)},n.layoutUpdate=function(){this._beforeDraw(),this._afterDraw()},n.getEdges=function(){var t=this;return this.graph.getEdges().filter(function(e){var n=e.getModel();return n.source===t.id||n.target===t.id})},n.getInEdges=function(){var t=this;return this.getEdges().filter(function(e){return e.target===t})},n.getOutEdges=function(){var t=this;return this.getEdges().filter(function(e){return e.source===t})},n.getLinkPoints=function(t){var e=this.getAnchorPoints();if(r.isNumber(t)&&e[t])return[e[t]];var n=t.x,i=t.y,a=this.getBBox(),o=a.centerX,s=a.centerY,u=n-o,c=i-s,h=this.shapeObj,f=h.anchor||{},l=this.defaultIntersectBox,p=[];if(r.isEmpty(e)){switch(h.intersectBox||f.intersectBox||f.type||l){case"rect":p=[r.getIntersectPointRect(a,t)];break;case"path":if(this.keyShape&&"path"===this.keyShape.get("type")){var d=r.parsePathArray(["M",n,i,"L",o,s]);p=[r.intersection(d,this.keyShape.get("path"))]}break;default:p=[r.getIntersectPointCircle(n,i,a.centerX,a.centerY,Math.max(a.width,a.height)/2)]}r.isEmpty(p[0])&&(p=[{x:o,y:s}])}else p=e.map(function(t){var e=t.x-o,n=t.y-s,i=r.getArcOfVectors({x:u,y:c},{x:e,y:n});return r.mix({},t,{arc:i})}).sort(function(t,e){return t.arc-e.arc});return p},n.getAnchorPoints=function(t){var e,n=this.shapeObj,i=this.getBBox(),a=[],o=n.anchor||{};return e=r.isArray(o)?o:r.isFunction(o)?o(this):r.isFunction(o.points)?o.points(this):o.points,r.each(e,function(t,e){var n=r.mix({x:i.minX+t[0]*i.width,y:i.minY+t[1]*i.height},t[2],{index:e});a.push(n)}),this._anchorPoints=a,r.isNumber(t)?this._anchorPoints[t]:this._anchorPoints},e}(n(608));t.exports=i},function(t,e,n){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(715),n(714),n(713);var i=n(712),a=n(710),o=n(683),s=n(26),u=n(706),c=n(248),h=n(704),f=n(702),l=n(700),p=n(699),d=n(697),g=n(696),v=n(695),m=n(692),x=n(691),y=[g,f,l,h,v,m,n(690),x,p,d],b=function(t){!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(n,t);var e=n.prototype;function n(e){var n,r={};return y.forEach(function(t){s.mix(r,s.clone(t.CFG),e)}),(n=t.call(this,r)||this)._pluginInit(),n.emit("beforeinit"),n._init(),n.emit("afterinit"),n}return e.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,plugins:[],fontFamily:'"Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", SimSun, "sans-serif"',nodeDefaultShape:void 0,edgeDefaultShape:void 0,groupDefaultShape:void 0,defaultIntersectBox:"circle",renderer:"canvas",_type:"graph",_controllers:{},_timers:{},_dataMap:{},_itemMap:{},_freezMap:{},_data:{},_delayRunObj:{}}},e._init=function(){var t=this;this._initData(),this._initContainer(),this._initCanvas(),y.forEach(function(e){e.INIT&&t[e.INIT]()}),this.initEvent()},e.initEvent=function(){},e._executeLayout=function(t,e,n,r){s.isFunction(t)?t(e,n,this):s.isObject(t)&&(t.nodes=e,t.edges=n,t.groups=r,t.graph=this,t.execute())},e._pluginInit=function(){var t=this;this.get("plugins").forEach(function(e){t._initPlugin(e)})},e._initPlugin=function(t){t.graph=this,t.init&&t.init()},e._getTimer=function(t){return this.get("_timers")[t]},e._setTimer=function(t,e){this.get("_timers")[t]=e},e._getController=function(t){return this.get("_controllers")[t]},e._initContainer=function(){var t=this.get("container");t||(t=this.get("id")),t=s.initDOMContainer(t,"graph");var e=s.createDOM('<div class="graph-container"></div>',{position:"relative"});t.appendChild(e),this.set("_containerDOM",t),this.set("_graphContainer",e)},e._initCanvas=function(){var t=this.get("_graphContainer"),e=this.get("width"),n=this.get("height"),r=this.get("fontFamily"),i=this.get("renderer"),a={width:e,height:n,fontFamily:r,renderer:i,eventEnable:!1,containerDOM:t};"svg"===i&&(a.pixelRatio=1);var o=new(0,c.Canvas)(a),s=o.get("el");s.style.top=0,s.style.left=0,s.style.overflow="hidden",this.set("_canvas",o);var u=this.getMouseEventWrapper();u.style.outline="none",u.style["user-select"]="none",u.setAttribute("tabindex",20);var h=o.addGroup(),f=h.addGroup();this.set("_itemGroup",f),this.set("_rootGroup",h)},e._initData=function(){this.set("_dataMap",{}),this.set("_itemMap",{_nodes:[],_edges:[],_groups:[],_guides:[]}),this.set("_data",{})},e._refresh=function(){},e.getKeyboardEventWrapper=function(){var t=this.get("keyboardEventWrapper");return t||this.getMouseEventWrapper()},e.getMouseEventWrapper=function(){return this.get("_canvas").get("el")},e.addPlugin=function(t){var e=this.get("plugins");this._initPlugin(t),e.push(t)},e.getGraphContainer=function(){return this.get("_graphContainer")},e._sortGroup=function(t){var e=this.get("_dataMap"),n={};t.forEach(function(t){var r=t.id,i=t.parent;for(n[r]=1;i&&e[i];)n[r]++,i=e[i].parent}),t.sort(function(t,e){return n[e.id]-n[t.id]})},e._addItems=function(t,e){var n=this;this._addDatas(t,e),"group"===t&&this._sortGroup(e);var r=s.upperFirst(t),i=a[r],o=this.get("_itemMap"),u=this.get("_itemGroup"),c=this.get("_dataMap"),h=this.get("animate"),f=this.get("defaultIntersectBox");if(!i)throw new Error("please set valid item type!");e.forEach(function(e){var r=new i({id:e.id,type:t,model:e,group:u.addGroup(),graph:n,mapper:n._getController(t+"Mapper"),itemMap:o,animate:h,dataMap:c,defaultIntersectBox:f});o[e.id]=r,o["_"+t+"s"].push(r)})},e._removeItems=function(t){var e=this.get("_dataMap"),n=this.get("_itemMap");t.forEach(function(t){delete e[t.id],delete n[t.id],s.Array.remove(n["_"+t.type+"s"],t),t.destroy()})},e._updateItems=function(t,e){t.forEach(function(t,n){var r=e[n];r&&s.mix(t.getModel(),r),t.update()})},e._getShowEdge=function(t){var e=t.getSource(),n=t.getTarget();return(e.linkable&&e.isVisible()||!e.linkable)&&(n.linkable&&n.isVisible()||!n.linkable)&&t},e._addDatas=function(t,e){var n=this.get("_dataMap");e.forEach(function(t){if(s.isNil(t.id)&&(t.id=s.guid()),n[t.id])throw new Error("id:"+t.id+" has already been set, please set new one");n[t.id]=t})},e._drawInner=function(){var t=this.get("_data"),e=this.get("_itemGroup"),n=this.get("_dataMap"),r=this.get("_itemMap");t.nodes&&this._addItems("node",t.nodes),t.groups&&this._addItems("group",t.groups),t.edges&&this._addItems("edge",t.edges),t.guides&&this._addItems("guide",t.guides),e.sortBy(function(t){var e=t.id,i=r[e],a=n[e];return a&&!s.isNil(a.index)?a.index:!i||i.destroyed||s.isNil(i.zIndex)?void 0:i.zIndex})},e._clearInner=function(){this.getItems().forEach(function(t){t&&t.destroy()})},e.preventAnimate=function(t){return this.set("_forcePreventAnimate",!0),t(),this.set("_forcePreventAnimate",!1),this},e.getShapeObj=function(t,e){if(!s.isObject(t)){var n=s.upperFirst(t),r=o[n],i=this.get(t+"DefaultShape");return r.getShape(e.shape,i)}return t.getShapeObj()},e.getSource=function(){return this.get("_sourceData")},e.parseSource=function(t){return t},e.getCanvas=function(){return this.get("_canvas")},e.getRootGroup=function(){return this.get("_rootGroup")},e.getItemGroup=function(){return this.get("_itemGroup")},e.source=function(t){return this.emit("beforesource"),this.set("_data",t),this.set("_sourceData",t),this.emit("aftersource"),this},e.render=function(){return this.emit("beforerender"),this.emit("beforedrawinner"),this._drawInner(),this.emit("afterdrawinner"),this.emit("afterrender"),this},e.reRender=function(){var t=this.get("_sourceData");return this.read(t),this},e.setCapture=function(t){this.get("_rootGroup").set("capture",t)},e.destroy=function(){this.emit("beforedestroy");var e=this.get("_canvas"),n=this.get("_graphContainer"),r=this.get("_controllers"),i=this.get("_timers"),a=this.get("_windowForceResizeEvent"),o=this.get("plugins");return s.each(i,function(t){clearTimeout(t)}),s.each(r,function(t){t.destroy()}),o.forEach(function(t){t.destroy&&t.destroy()}),e&&e.destroy(),n.destroy(),window.removeEventListener("resize",a),this.emit("afterdestroy"),t.prototype.destroy.call(this),this},e.save=function(){var t={nodes:[],edges:[],groups:[],guides:[]};return this.get("_itemGroup").get("children").forEach(function(e,n){var r=e.model;if(r){var i=e.itemType,a=s.clone(r);a.index=n,t[i+"s"].push(a)}}),0===t.nodes.length&&delete t.nodes,0===t.edges.length&&delete t.edges,0===t.groups.length&&delete t.groups,0===t.guides.length&&delete t.guides,t},e.add=function(t,e){var n=[],r={action:"add",model:e,affectedItemIds:n};this.emit("beforechange",r);var i=this.get("_itemMap");this._addItems(t,[e]);var a=i[e.id];return a.getAllParents().forEach(function(t){t.update()}),r.item=a,n.push(e.id),this.emit("afterchange",r),a},e.remove=function(t){if((t=this.getItem(t))&&!t.destroyed){var e=[],n=[],r={action:"remove",item:t,affectedItemIds:n};if(t.isNode){var i=t.getEdges();e=e.concat(i)}if(t.isGroup){var a=t.getEdges(),o=t.getAllChildren(),u=t.getCrossEdges(),c=t.getInnerEdges();e=e.concat(a,o,u,c),e=s.uniq(e)}e.push(t);var h=t.getAllParents();return h.forEach(function(t){n.push(t.id)}),e.forEach(function(t){n.push(t.id)}),this.emit("beforechange",r),this._removeItems(e),h.forEach(function(t){t.update()}),this.emit("afterchange",r),this}},e.simpleUpdate=function(t,e){return this._updateItems([t],[e]),this.draw(),this},e.update=function(t,e){var n=this.get("_itemMap");if((t=this.getItem(t))&&!t.destroyed&&e){var r=this.get("animate"),i=[],a=[],o=[],u=t.getModel(),c=s.mix({},u),h={action:"update",item:t,originModel:c,updateModel:e,affectedItemIds:o},f=n[c.parent];if(i.push(t),a.push(e),o.push(t.id),f&&f!==parent&&s.isGroup(f)&&t.getAllParents().forEach(function(t){i.push(t),a.push(null),o.push(t.id)}),e.parent){var l=n[e.parent];if(!l)throw new Error("there is no "+e.parent+" exist, please add a new one!");i.push(l),a.push(null),o.push(l.id),l.getAllParents().forEach(function(t){i.push(t),a.push(null),o.push(t.id)})}if(t.isNode||t.isGroup)t.getEdges().forEach(function(t){i.push(t),a.push(null),o.push(t.id)});return t.isGroup&&!s.isNil(e.collapsed)&&(r&&t.deepEach(function(t){o.push(t.id)}),t.getCrossEdges().forEach(function(t){i.push(t),a.push(null),o.push(t.id)})),this.emit("beforechange",h),this._updateItems(i,a),this.emit("afterchange",h),this}},e.read=function(t){var e=this;if(!t)throw new Error("please read valid data!");var n={action:"changeData",data:t};return this.emit("beforechange",n),this.preventAnimate(function(){e.clear(),e.source(t),e.render()}),this.emit("afterchange",n),this},e.clear=function(){return this.emit("beforeclear"),this._clearInner(),this._initData(),this.emit("afterclear"),this},e.hide=function(t){var e=[],n=[],r={item:t=this.getItem(t),affectedItemIds:n};return e.push(t),t.isNode&&t.getEdges().forEach(function(t){e.push(t)}),t.isGroup&&(t.getEdges().forEach(function(t){e.push(t)}),t.deepEach(function(t){e.push(t)})),(e=s.uniq(e)).forEach(function(t){n.push(t.id)}),this.emit("beforehide",r),e.forEach(function(t){t.hide()}),this.emit("afterhide",r),this},e.show=function(t){var e=this,n=[],r=[],i={item:t=this.getItem(t),affectedItemIds:r};if(t.visible=!0,t.isEdge){var a=this._getShowEdge(t);a&&n.push(a)}else n.push(t);return t.isNode&&t.getEdges().forEach(function(t){(t=e._getShowEdge(t))&&n.push(t)}),t.isGroup&&(t.getEdges().forEach(function(t){(t=e._getShowEdge(t))&&n.push(t)}),t.deepEach(function(t){n.push(t)})),(n=s.uniq(n)).forEach(function(t){r.push(t.id)}),this.emit("beforeshow",i),n.forEach(function(t){t.show()}),this.emit("aftershow",i),this},e.getWidth=function(){return this.get("width")},e.getHeight=function(){return this.get("height")},e.changeSize=function(t,e){if(!(Math.abs(t)>=1/0||Math.abs(e)>=1/0)){var n=this.get("_canvas");return t===this.get("width")&&e===this.get("height")||(this.emit("beforechangesize"),n.changeSize(t,e),this.set("width",t),this.set("height",e),this.emit("afterchangesize"),this.draw()),this}console.warn("size parameter more than the maximum")},e.toFront=function(t){t=this.getItem(t);var e=this.get("_itemGroup"),n=t.getGraphicGroup();s.toFront(n,e),this.draw()},e.toBack=function(t){t=this.getItem(t);var e=this.get("_itemGroup"),n=t.getGraphicGroup();s.toBack(n,e),this.draw()},e.css=function(t){var e=this.getGraphContainer();s.modifyCSS(e,t)},e.saveImage=function(t){var e=this.getBBox(),n=this.getFitViewPadding();return new u(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({graph:this,width:e.width+n[1]+n[3],height:e.height+n[0]+n[2]},t)).toCanvas()},n}(i);y.forEach(function(t){s.mix(b.prototype,t.AUGMENT)}),t.exports=b},function(t,e){var n={registerBehaviour:function(t,e,r){e.dependences=r,n[t]=e},resetMode:function(t,e){var r,i=[];e._off();for(var a=0;a<t.length;a++)(r=n[t[a]])&&(r.dependences&&r.dependences.forEach(function(t){t&&-1===i.indexOf(t)&&(n[t](e),i.push(t))}),r&&-1===i.indexOf(r)&&r(e))}};t.exports=n},function(t,e,n){var r=n(19),i=n(58),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null},r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"text",getDefaultAttrs:function(){return{lineWidth:1,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"}},initTransform:function(){var t=this._attrs.fontSize;t&&+t<12&&this.transform([["t",-1*this._attrs.x,-1*this._attrs.y],["s",+t/12,+t/12],["t",this._attrs.x,this._attrs.y]])},_assembleFont:function(){var t=this._attrs,e=t.fontSize,n=t.fontFamily,r=t.fontWeight,i=t.fontStyle,a=t.fontVariant;t.font=[i,a,r,e+"px",n].join(" ")},_setAttrText:function(){var t=this._attrs,e=t.text,n=null;if(r.isString(e)&&-1!==e.indexOf("\n")){var i=(n=e.split("\n")).length;t.lineCount=i}t.textArr=n},_getTextHeight:function(){var t=this._attrs,e=t.lineCount,n=1*t.fontSize;return e>1?n*e+this._getSpaceingY()*(e-1):n},isHitBox:function(){return!1},calculateBox:function(){var t=this._attrs,e=this._cfg;e.attrs&&!e.hasUpdate||(this._assembleFont(),this._setAttrText()),t.textArr||this._setAttrText();var n=t.x,r=t.y,i=this.measureText();if(!i)return{minX:n,minY:r,maxX:n,maxY:r};var a=this._getTextHeight(),o=t.textAlign,s=t.textBaseline,u=this.getHitLineWidth(),c={x:n,y:r-a};o&&("end"===o||"right"===o?c.x-=i:"center"===o&&(c.x-=i/2)),s&&("top"===s?c.y+=a:"middle"===s&&(c.y+=a/2)),this.set("startPoint",c);var h=u/2;return{minX:c.x-h,minY:c.y-h,maxX:c.x+i+h,maxY:c.y+a+h}},_getSpaceingY:function(){var t=this._attrs,e=t.lineHeight,n=1*t.fontSize;return e?e-n:.14*n},drawInner:function(t){var e=this._attrs,n=this._cfg;n.attrs&&!n.hasUpdate||(this._assembleFont(),this._setAttrText()),t.font=e.font;var i=e.text;if(i){var a=e.textArr,o=e.x,s=e.y;if(t.beginPath(),this.hasStroke()){var u=e.strokeOpacity;r.isNil(u)||1===u||(t.globalAlpha=u),a?this._drawTextArr(t,!1):t.strokeText(i,o,s),t.globalAlpha=1}if(this.hasFill()){var c=e.fillOpacity;r.isNil(c)||1===c||(t.globalAlpha=c),a?this._drawTextArr(t,!0):t.fillText(i,o,s)}n.hasUpdate=!1}},_drawTextArr:function(t,e){var n,i=this._attrs.textArr,a=this._attrs.textBaseline,o=1*this._attrs.fontSize,s=this._getSpaceingY(),u=this._attrs.x,c=this._attrs.y,h=this.getBBox(),f=h.maxY-h.minY;r.each(i,function(r,i){n=c+i*(s+o)-f+o,"middle"===a&&(n+=f-o-(f-o)/2),"top"===a&&(n+=f-o),e?t.fillText(r,u,n):t.strokeText(r,u,n)})},measureText:function(){var t,e=this._attrs,n=e.text,i=e.font,a=e.textArr,o=0;if(!r.isNil(n)){var s=document.createElement("canvas").getContext("2d");return s.save(),s.font=i,a?r.each(a,function(e){t=s.measureText(e).width,o<t&&(o=t),s.restore()}):(o=s.measureText(n).width,s.restore()),o}}}),t.exports=a},function(t,e,n){var r=n(19),i=n(593).parseRadius,a=n(58),o=function t(e){t.superclass.constructor.call(this,e)};o.ATTRS={x:0,y:0,width:0,height:0,radius:0,lineWidth:1},r.extend(o,a),r.augment(o,{canFill:!0,canStroke:!0,type:"rect",getDefaultAttrs:function(){return{lineWidth:1,radius:0}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.width,i=t.height,a=this.getHitLineWidth()/2;return{minX:e-a,minY:n-a,maxX:e+r+a,maxY:n+i+a}},createPath:function(t){var e=this._attrs,n=e.x,r=e.y,a=e.width,o=e.height,s=e.radius;if((t=t||this.get("context")).beginPath(),0===s)t.rect(n,r,a,o);else{var u=i(s);t.moveTo(n+u.r1,r),t.lineTo(n+a-u.r2,r),0!==u.r2&&t.arc(n+a-u.r2,r+u.r2,u.r2,-Math.PI/2,0),t.lineTo(n+a,r+o-u.r3),0!==u.r3&&t.arc(n+a-u.r3,r+o-u.r3,u.r3,0,Math.PI/2),t.lineTo(n+u.r4,r+o),0!==u.r4&&t.arc(n+u.r4,r+o-u.r4,u.r4,Math.PI/2,Math.PI),t.lineTo(n,r+u.r1),0!==u.r1&&t.arc(n+u.r1,r+u.r1,u.r1,Math.PI,1.5*Math.PI),t.closePath()}}}),t.exports=o},function(t,e,n){var r=n(19),i=n(58),a=n(601),o=n(603),s=function t(e){t.superclass.constructor.call(this,e)};s.ATTRS={points:null,lineWidth:1,startArrow:!1,endArrow:!1,tCache:null},r.extend(s,i),r.augment(s,{canStroke:!0,type:"polyline",tCache:null,getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,e=this.getHitLineWidth(),n=t.points;if(!n||0===n.length)return null;var i=1/0,a=1/0,o=-1/0,s=-1/0;r.each(n,function(t){var e=t[0],n=t[1];e<i&&(i=e),e>o&&(o=e),n<a&&(a=n),n>s&&(s=n)});var u=e/2;return{minX:i-u,minY:a-u,maxX:o+u,maxY:s+u}},_setTcache:function(){var t,e,n=this._attrs.points,i=0,a=0,s=[];n&&0!==n.length&&(r.each(n,function(t,e){n[e+1]&&(i+=o.len(t[0],t[1],n[e+1][0],n[e+1][1]))}),i<=0||(r.each(n,function(r,u){n[u+1]&&((t=[])[0]=a/i,e=o.len(r[0],r[1],n[u+1][0],n[u+1][1]),a+=e,t[1]=a/i,s.push(t))}),this.tCache=s))},createPath:function(t){var e,n,r=this._attrs.points;if(!(r.length<2)){for((t=t||this.get("context")).beginPath(),t.moveTo(r[0][0],r[0][1]),n=1,e=r.length-1;n<e;n++)t.lineTo(r[n][0],r[n][1]);t.lineTo(r[e][0],r[e][1])}},getStartTangent:function(){var t=this.__attrs.points,e=[];return e.push([t[1][0],t[1][1]]),e.push([t[0][0],t[0][1]]),e},getEndTangent:function(){var t=this.__attrs.points,e=t.length-1,n=[];return n.push([t[e-1][0],t[e-1][1]]),n.push([t[e][0],t[e][1]]),n},afterPath:function(t){var e=this._attrs,n=e.points,r=n.length-1;t=t||this.get("context"),e.startArrow&&a.addStartArrow(t,e,n[1][0],n[1][1],n[0][0],n[0][1]),e.endArrow&&a.addEndArrow(t,e,n[r-1][0],n[r-1][1],n[r][0],n[r][1])},getPoint:function(t){var e,n,i=this._attrs.points,a=this.tCache;return a||(this._setTcache(),a=this.tCache),r.each(a,function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)}),{x:o.at(i[n][0],i[n+1][0],e),y:o.at(i[n][1],i[n+1][1],e)}}}),t.exports=s},function(t,e,n){var r=n(19),i=n(58),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={points:null,lineWidth:1},r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"polygon",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs.points,e=this.getHitLineWidth();if(!t||0===t.length)return null;var n=1/0,i=1/0,a=-1/0,o=-1/0;r.each(t,function(t){var e=t[0],r=t[1];e<n&&(n=e),e>a&&(a=e),r<i&&(i=r),r>o&&(o=r)});var s=e/2;return{minX:n-s,minY:i-s,maxX:a+s,maxY:o+s}},createPath:function(t){var e=this._attrs.points;e.length<2||((t=t||this.get("context")).beginPath(),r.each(e,function(e,n){0===n?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])}),t.closePath())}}),t.exports=a},function(t,e,n){var r=n(19),i=n(58),a=n(600),o=n(593),s=n(601),u=n(610),c=n(612),h=function t(e){t.superclass.constructor.call(this,e)};h.ATTRS={path:null,lineWidth:1,startArrow:!1,endArrow:!1},r.extend(h,i),r.augment(h,{canFill:!0,canStroke:!0,type:"path",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},_afterSetAttrPath:function(t){if(r.isNil(t))return this.setSilent("segments",null),void this.setSilent("box",void 0);var e,n=o.parsePath(t),i=[];if(r.isArray(n)&&0!==n.length&&("M"===n[0][0]||"m"===n[0][0])){for(var s=n.length,u=0;u<n.length;u++){var c=n[u];e=new a(c,e,u===s-1),i.push(e)}this.setSilent("segments",i),this.setSilent("tCache",null),this.setSilent("box",null)}},calculateBox:function(){var t=this.get("segments");if(!t)return null;var e=this.getHitLineWidth(),n=1/0,i=-1/0,a=1/0,o=-1/0;return r.each(t,function(t){t.getBBox(e);var r=t.box;r&&(r.minX<n&&(n=r.minX),r.maxX>i&&(i=r.maxX),r.minY<a&&(a=r.minY),r.maxY>o&&(o=r.maxY))}),n===1/0||a===1/0?{minX:0,minY:0,maxX:0,maxY:0}:{minX:n,minY:a,maxX:i,maxY:o}},_setTcache:function(){var t,e,n,i,a=0,o=0,s=[],u=this._cfg.curve;u&&(r.each(u,function(t,e){n=u[e+1],i=t.length,n&&(a+=c.len(t[i-2],t[i-1],n[1],n[2],n[3],n[4],n[5],n[6]))}),r.each(u,function(r,h){n=u[h+1],i=r.length,n&&((t=[])[0]=o/a,e=c.len(r[i-2],r[i-1],n[1],n[2],n[3],n[4],n[5],n[6]),o+=e,t[1]=o/a,s.push(t))}),this._cfg.tCache=s)},_calculateCurve:function(){var t=this._attrs.path;this._cfg.curve=u.pathTocurve(t)},getStartTangent:function(){var t,e,n,i,a=this.get("segments");if(a.length>1)if(t=a[0].endPoint,e=a[1].endPoint,n=a[1].startTangent,i=[],r.isFunction(n)){var o=n();i.push([t.x-o[0],t.y-o[1]]),i.push([t.x,t.y])}else i.push([e.x,e.y]),i.push([t.x,t.y]);return i},getEndTangent:function(){var t,e,n,i,a=this.get("segments"),o=a.length;if(o>1)if(t=a[o-2].endPoint,e=a[o-1].endPoint,n=a[o-1].endTangent,i=[],r.isFunction(n)){var s=n();i.push([e.x-s[0],e.y-s[1]]),i.push([e.x,e.y])}else i.push([t.x,t.y]),i.push([e.x,e.y]);return i},getPoint:function(t){var e,n,i=this._cfg.tCache;i||(this._calculateCurve(),this._setTcache(),i=this._cfg.tCache);var a=this._cfg.curve;if(!i)return a?{x:a[0][1],y:a[0][2]}:null;r.each(i,function(r,i){t>=r[0]&&t<=r[1]&&(e=(t-r[0])/(r[1]-r[0]),n=i)});var o=a[n];if(r.isNil(o)||r.isNil(n))return null;var s=o.length,u=a[n+1];return{x:c.at(o[s-2],u[1],u[3],u[5],1-e),y:c.at(o[s-1],u[2],u[4],u[6],1-e)}},createPath:function(t){var e=this.get("segments");if(r.isArray(e)){(t=t||this.get("context")).beginPath();for(var n=e.length,i=0;i<n;i++)e[i].draw(t)}},afterPath:function(t){var e=this._attrs,n=this.get("segments"),i=e.path;if(t=t||this.get("context"),r.isArray(n)&&1!==n.length&&(e.startArrow||e.endArrow)&&"z"!==i[i.length-1]&&"Z"!==i[i.length-1]&&!e.fill){var a=this.getStartTangent();s.addStartArrow(t,e,a[0][0],a[0][1],a[1][0],a[1][1]);var o=this.getEndTangent();s.addEndArrow(t,e,o[0][0],o[0][1],o[1][0],o[1][1])}}}),t.exports=h},function(t,e,n){var r=n(19),i=n(58),a=n(601),o=n(603),s=function t(e){t.superclass.constructor.call(this,e)};s.ATTRS={x1:0,y1:0,x2:0,y2:0,lineWidth:1,startArrow:!1,endArrow:!1},r.extend(s,i),r.augment(s,{canStroke:!0,type:"line",getDefaultAttrs:function(){return{lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,e=t.x1,n=t.y1,r=t.x2,i=t.y2,a=this.getHitLineWidth();return o.box(e,n,r,i,a)},createPath:function(t){var e=this._attrs,n=e.x1,r=e.y1,i=e.x2,a=e.y2;(t=t||self.get("context")).beginPath(),t.moveTo(n,r),t.lineTo(i,a)},afterPath:function(t){var e=this._attrs,n=e.x1,r=e.y1,i=e.x2,o=e.y2;t=t||this.get("context"),e.startArrow&&a.addStartArrow(t,e,i,o,n,r),e.endArrow&&a.addEndArrow(t,e,n,r,i,o)},getPoint:function(t){var e=this._attrs;return{x:o.at(e.x1,e.x2,t),y:o.at(e.y1,e.y2,t)}}}),t.exports=s},function(t,e,n){var r=n(19),i=n(58),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,img:void 0,width:0,height:0,sx:null,sy:null,swidth:null,sheight:null},r.extend(a,i),r.augment(a,{type:"image",isHitBox:function(){return!1},calculateBox:function(){var t=this._attrs;this._cfg.attrs&&this._cfg.attrs.img===t.img||this._setAttrImg();var e=t.x,n=t.y;return{minX:e,minY:n,maxX:e+t.width,maxY:n+t.height}},_beforeSetLoading:function(t){var e=this.get("canvas");return!1===t&&!0===this.get("toDraw")&&(this._cfg.loading=!1,e.draw()),t},_setAttrImg:function(){var t=this,e=t._attrs,n=e.img;if(!r.isString(n))return n instanceof Image?(e.width||t.attr("width",n.width),e.height||t.attr("height",n.height),n):n instanceof HTMLElement&&r.isString(n.nodeName)&&"CANVAS"===n.nodeName.toUpperCase()?(e.width||t.attr("width",Number(n.getAttribute("width"))),e.height||t.attr("height",Number(n.getAttribute("height"))),n):n instanceof ImageData?(e.width||t.attr("width",n.width),e.height||t.attr("height",n.height),n):null;var i=new Image;i.onload=function(){if(t.get("destroyed"))return!1;t.attr("imgSrc",n),t.attr("img",i);var e=t.get("callback");e&&e.call(t),t.set("loading",!1)},i.src=n,i.crossOrigin="Anonymous",t.set("loading",!0)},drawInner:function(t){this._cfg.hasUpdate&&this._setAttrImg(),this.get("loading")?this.set("toDraw",!0):(this._drawImage(t),this._cfg.hasUpdate=!1)},_drawImage:function(t){var e=this._attrs,n=e.x,i=e.y,a=e.img,o=e.width,s=e.height,u=e.sx,c=e.sy,h=e.swidth,f=e.sheight;this.set("toDraw",!1);var l=a;if(l instanceof ImageData&&((l=new Image).src=a),l instanceof Image||l instanceof HTMLElement&&r.isString(l.nodeName)&&"CANVAS"===l.nodeName.toUpperCase()){if(r.isNil(u)||r.isNil(c)||r.isNil(h)||r.isNil(f))return void t.drawImage(l,n,i,o,s);if(!(r.isNil(u)||r.isNil(c)||r.isNil(h)||r.isNil(f)))return void t.drawImage(l,u,c,h,f,n,i,o,s)}}}),t.exports=a},function(t,e,n){var r=n(19),i=n(58),a=n(602),o=function t(e){t.superclass.constructor.call(this,e)};o.ATTRS={x:0,y:0,rs:0,re:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1},r.extend(o,i),r.augment(o,{canFill:!0,canStroke:!0,type:"fan",getDefaultAttrs:function(){return{clockwise:!1,lineWidth:1,rs:0,re:0}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.rs,i=t.re,o=t.startAngle,s=t.endAngle,u=t.clockwise,c=this.getHitLineWidth(),h=a.box(e,n,r,o,s,u),f=a.box(e,n,i,o,s,u),l=c/2;return{minX:Math.min(h.minX,f.minX)-l,minY:Math.min(h.minY,f.minY)-l,maxX:Math.max(h.maxX,f.maxX)+l,maxY:Math.max(h.maxY,f.maxY)+l}},createPath:function(t){var e=this._attrs,n=e.x,r=e.y,i=e.rs,a=e.re,o=e.startAngle,s=e.endAngle,u=e.clockwise,c={x:Math.cos(o)*i+n,y:Math.sin(o)*i+r},h={x:Math.cos(o)*a+n,y:Math.sin(o)*a+r},f={x:Math.cos(s)*i+n,y:Math.sin(s)*i+r};(t=t||self.get("context")).beginPath(),t.moveTo(c.x,c.y),t.lineTo(h.x,h.y),t.arc(n,r,a,o,s,u),t.lineTo(f.x,f.y),t.arc(n,r,i,s,o,!u),t.closePath()}}),t.exports=o},function(t,e,n){var r=n(19),i=n(58),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,rx:1,ry:1,lineWidth:1},r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"ellipse",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.rx,i=t.ry,a=this.getHitLineWidth(),o=r+a/2,s=i+a/2;return{minX:e-o,minY:n-s,maxX:e+o,maxY:n+s}},createPath:function(t){var e=this._attrs,n=e.x,i=e.y,a=e.rx,o=e.ry;t=t||self.get("context");var s=a>o?a:o,u=a>o?1:a/o,c=a>o?o/a:1,h=[1,0,0,0,1,0,0,0,1];r.mat3.scale(h,h,[u,c]),r.mat3.translate(h,h,[n,i]),t.beginPath(),t.save(),t.transform(h[0],h[1],h[3],h[4],h[6],h[7]),t.arc(0,0,s,0,2*Math.PI),t.restore(),t.closePath()}}),t.exports=a},function(t,e,n){var r=n(19),i=n(58),a=function t(e){t.superclass.constructor.call(this,e)};r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"dom",calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.width,i=t.height,a=this.getHitLineWidth()/2;return{minX:e-a,minY:n-a,maxX:e+r+a,maxY:n+i+a}}}),t.exports=a},function(t,e,n){var r=n(19),i=n(58),a=function t(e){t.superclass.constructor.call(this,e)};a.ATTRS={x:0,y:0,r:0,lineWidth:1},r.extend(a,i),r.augment(a,{canFill:!0,canStroke:!0,type:"circle",getDefaultAttrs:function(){return{lineWidth:1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.r,i=this.getHitLineWidth()/2+r;return{minX:e-i,minY:n-i,maxX:e+i,maxY:n+i}},createPath:function(t){var e=this._attrs,n=e.x,r=e.y,i=e.r;t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath()}}),t.exports=a},function(t,e,n){var r=n(19),i=n(58),a=n(602),o=n(601);function s(t,e,n){return t+e*Math.cos(n)}function u(t,e,n){return t+e*Math.sin(n)}var c=function t(e){t.superclass.constructor.call(this,e)};c.ATTRS={x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1},r.extend(c,i),r.augment(c,{canStroke:!0,type:"arc",getDefaultAttrs:function(){return{x:0,y:0,r:0,startAngle:0,endAngle:0,clockwise:!1,lineWidth:1,startArrow:!1,endArrow:!1}},calculateBox:function(){var t=this._attrs,e=t.x,n=t.y,r=t.r,i=t.startAngle,o=t.endAngle,s=t.clockwise,u=this.getHitLineWidth()/2,c=a.box(e,n,r,i,o,s);return c.minX-=u,c.minY-=u,c.maxX+=u,c.maxY+=u,c},getStartTangent:function(){var t=this._attrs,e=t.x,n=t.y,r=t.startAngle,i=t.r,a=t.clockwise,o=Math.PI/180;a&&(o*=-1);var c=[],h=s(e,i,r+o),f=u(n,i,r+o),l=s(e,i,r),p=u(n,i,r);return c.push([h,f]),c.push([l,p]),c},getEndTangent:function(){var t=this._attrs,e=t.x,n=t.y,r=t.endAngle,i=t.r,a=t.clockwise,o=Math.PI/180,c=[];a&&(o*=-1);var h=s(e,i,r+o),f=u(n,i,r+o),l=s(e,i,r),p=u(n,i,r);return c.push([l,p]),c.push([h,f]),c},createPath:function(t){var e=this._attrs,n=e.x,r=e.y,i=e.r,a=e.startAngle,o=e.endAngle,s=e.clockwise;(t=t||self.get("context")).beginPath(),t.arc(n,r,i,a,o,s)},afterPath:function(t){var e=this._attrs;if(t=t||this.get("context"),e.startArrow){var n=this.getStartTangent();o.addStartArrow(t,e,n[0][0],n[0][1],n[1][0],n[1][1])}if(e.endArrow){var r=this.getEndTangent();o.addEndArrow(t,e,r[0][0],r[0][1],r[1][0],r[1][1])}}}),t.exports=c},function(t,e){t.exports={xAt:function(t,e,n,r,i){return e*Math.cos(t)*Math.cos(i)-n*Math.sin(t)*Math.sin(i)+r},yAt:function(t,e,n,r,i){return e*Math.sin(t)*Math.cos(i)+n*Math.cos(t)*Math.sin(i)+r},xExtrema:function(t,e,n){return Math.atan(-n/e*Math.tan(t))},yExtrema:function(t,e,n){return Math.atan(n/(e*Math.tan(t)))}}},function(t,e,n){var r=n(19),i=r.vec2;function a(t,e,n,r){var i=1-r;return i*(i*t+2*r*e)+r*r*n}function o(t,e,n,r,o,s,u,c,h){var f,l,p,d,g,v,m,x=.005,y=1/0,b=[u,c];for(g=0;g<1;g+=.05)p=[a(t,n,o,g),a(e,r,s,g)],(l=i.squaredDistance(b,p))<y&&(f=g,y=l);for(y=1/0,m=0;m<32&&!(x<1e-4);m++){var M=f-x,w=f+x;p=[a(t,n,o,M),a(e,r,s,M)],l=i.squaredDistance(b,p),M>=0&&l<y?(f=M,y=l):(d=[a(t,n,o,w),a(e,r,s,w)],v=i.squaredDistance(b,d),w<=1&&v<y?(f=w,y=v):x*=.5)}return h&&(h.x=a(t,n,o,f),h.y=a(e,r,s,f)),Math.sqrt(y)}t.exports={at:a,projectPoint:function(t,e,n,r,i,a,s,u){var c={};return o(t,e,n,r,i,a,s,u,c),c},pointDistance:o,extrema:function(t,e,n){var i=t+n-2*e;if(r.isNumberEqual(i,0))return[.5];var a=(t-e)/i;return a<=1&&a>=0?[a]:[]}}},function(t,e,n){var r=n(19),i=n(746),a=n(745),o=n(744),s=n(116),u=function(t){this._cfg={zIndex:0,capture:!0,visible:!0,destroyed:!1},r.assign(this._cfg,this.getDefaultCfg(),t),this.initAttrs(this._cfg.attrs),this._cfg.attrs={},this.initTransform(),this.init()};u.CFG={id:null,zIndex:0,canvas:null,parent:null,capture:!0,context:null,visible:!0,destroyed:!1},r.augment(u,i,a,s,o,{init:function(){this.setSilent("animable",!0),this.setSilent("animating",!1)},getParent:function(){return this._cfg.parent},getDefaultCfg:function(){return{}},set:function(t,e){return"zIndex"===t&&this._beforeSetZIndex&&this._beforeSetZIndex(e),"loading"===t&&this._beforeSetLoading&&this._beforeSetLoading(e),this._cfg[t]=e,this},setSilent:function(t,e){this._cfg[t]=e},get:function(t){return this._cfg[t]},show:function(){return this._cfg.visible=!0,this},hide:function(){return this._cfg.visible=!1,this},remove:function(t,e){var n=this._cfg,i=n.parent,a=n.el;return i&&r.remove(i.get("children"),this),a&&(e?i&&i._cfg.tobeRemoved.push(a):a.parentNode.removeChild(a)),(t||void 0===t)&&this.destroy(),this},destroy:function(){this.get("destroyed")||(this._attrs=null,this.removeEvent(),this._cfg={destroyed:!0})},toFront:function(){var t=this._cfg,e=t.parent;if(e){var n=e._cfg.children,r=t.el,i=n.indexOf(this);n.splice(i,1),n.push(this),r&&(r.parentNode.removeChild(r),t.el=null)}},toBack:function(){var t=this._cfg,e=t.parent;if(e){var n=e._cfg.children,r=t.el,i=n.indexOf(this);if(n.splice(i,1),n.unshift(this),r){var a=r.parentNode;a.removeChild(r),a.insertBefore(r,a.firstChild)}}},_beforeSetZIndex:function(t){var e=this._cfg.parent;this._cfg.zIndex=t,r.isNil(e)||e.sort();var n=this._cfg.el;if(n){var i=e._cfg.children,a=i.indexOf(this),o=n.parentNode;o.removeChild(n),a===i.length-1?o.appendChild(n):o.insertBefore(n,o.childNodes[a])}return t},_setAttrs:function(t){return this.attr(t),t},setZIndex:function(t){return this._cfg.zIndex=t,this._beforeSetZIndex(t)},clone:function(){return r.clone(this)},getBBox:function(){}}),t.exports=u},function(t,e,n){var r=n(19),i=n(641),a=n(743),o={},s="_INDEX";function u(t,e,n){for(var r,i=t.length-1;i>=0;i--){var a=t[i];if(a._cfg.visible&&a._cfg.capture&&(a.isGroup?r=a.getShape(e,n):a.isHit(e,n)&&(r=a)),r)break}return r}var c=function t(e){t.superclass.constructor.call(this,e),this.set("children",[]),this.set("tobeRemoved",[]),this._beforeRenderUI(),this._renderUI(),this._bindUI()};r.extend(c,i),r.augment(c,{isGroup:!0,type:"group",canFill:!0,canStroke:!0,getDefaultCfg:function(){return function t(e){if(!e._cfg&&e!==c){var n=e.superclass.constructor;n&&!n._cfg&&t(n),e._cfg={},r.merge(e._cfg,n._cfg),r.merge(e._cfg,e.CFG)}}(this.constructor),r.merge({},this.constructor._cfg)},_beforeRenderUI:function(){},_renderUI:function(){},_bindUI:function(){},addShape:function(t,e){var n=this.get("canvas");e=e||{};var i=o[t];if(i||(i=r.upperFirst(t),o[t]=i),e.attrs&&n){var s=e.attrs;if("text"===t){var u=n.get("fontFamily");u&&(s.fontFamily=s.fontFamily?s.fontFamily:u)}}e.canvas=n,e.type=t;var c=new a[i](e);return this.add(c),c},addGroup:function(t,e){var n,i=this.get("canvas");if(e=r.merge({},e),r.isFunction(t))e?(e.canvas=i,e.parent=this,n=new t(e)):n=new t({canvas:i,parent:this}),this.add(n);else if(r.isObject(t))t.canvas=i,n=new c(t),this.add(n);else{if(void 0!==t)return!1;n=new c,this.add(n)}return n},renderBack:function(t,e){var n=this.get("backShape"),i=this.getBBox();return r.merge(e,{x:i.minX-t[3],y:i.minY-t[0],width:i.width+t[1]+t[3],height:i.height+t[0]+t[2]}),n?n.attr(e):n=this.addShape("rect",{zIndex:-1,attrs:e}),this.set("backShape",n),this.sort(),n},removeChild:function(t,e){if(arguments.length>=2)this.contain(t)&&t.remove(e);else{if(1===arguments.length){if(!r.isBoolean(t))return this.contain(t)&&t.remove(!0),this;e=t}0===arguments.length&&(e=!0),c.superclass.remove.call(this,e)}return this},add:function(t){var e=this,n=e.get("children");if(r.isArray(t))r.each(t,function(t){var n=t.get("parent");n&&n.removeChild(t,!1),e._setCfgProperty(t)}),e._cfg.children=n.concat(t);else{var i=t,a=i.get("parent");a&&a.removeChild(i,!1),e._setCfgProperty(i),n.push(i)}return e},_setCfgProperty:function(t){var e=this._cfg;t.set("parent",this),t.set("canvas",e.canvas),e.timeline&&t.set("timeline",e.timeline)},contain:function(t){return this.get("children").indexOf(t)>-1},getChildByIndex:function(t){return this.get("children")[t]},getFirst:function(){return this.getChildByIndex(0)},getLast:function(){var t=this.get("children").length-1;return this.getChildByIndex(t)},getBBox:function(){var t=1/0,e=-1/0,n=1/0,i=-1/0,a=this.get("children");a.length>0?r.each(a,function(r){if(r.get("visible")){if(r.isGroup&&0===r.get("children").length)return;var a=r.getBBox();if(!a)return!0;var o=[a.minX,a.minY,1],s=[a.minX,a.maxY,1],u=[a.maxX,a.minY,1],c=[a.maxX,a.maxY,1];r.apply(o),r.apply(s),r.apply(u),r.apply(c);var h=Math.min(o[0],s[0],u[0],c[0]),f=Math.max(o[0],s[0],u[0],c[0]),l=Math.min(o[1],s[1],u[1],c[1]),p=Math.max(o[1],s[1],u[1],c[1]);h<t&&(t=h),f>e&&(e=f),l<n&&(n=l),p>i&&(i=p)}}):(t=0,e=0,n=0,i=0);var o={minX:t,minY:n,maxX:e,maxY:i};return o.x=o.minX,o.y=o.minY,o.width=o.maxX-o.minX,o.height=o.maxY-o.minY,o},getCount:function(){return this.get("children").length},sort:function(){var t=this.get("children");return r.each(t,function(t,e){return t[s]=e,t}),t.sort(function(t){return function(e,n){var r=t(e,n);return 0===r?e[s]-n[s]:r}}(function(t,e){return t.get("zIndex")-e.get("zIndex")})),this},findById:function(t){return this.find(function(e){return e.get("id")===t})},find:function(t){if(r.isString(t))return this.findById(t);var e=this.get("children"),n=null;return r.each(e,function(e){if(t(e)?n=e:e.find&&(n=e.find(t)),n)return!1}),n},findAll:function(t){var e=this.get("children"),n=[],i=[];return r.each(e,function(e){t(e)&&n.push(e),e.findAllBy&&(i=e.findAllBy(t),n=n.concat(i))}),n},findBy:function(t){var e=this.get("children"),n=null;return r.each(e,function(e){if(t(e)?n=e:e.findBy&&(n=e.findBy(t)),n)return!1}),n},findAllBy:function(t){var e=this.get("children"),n=[],i=[];return r.each(e,function(e){t(e)&&n.push(e),e.findAllBy&&(i=e.findAllBy(t),n=n.concat(i))}),n},getShape:function(t,e){var n,r=this._attrs.clip,i=this._cfg.children;if(r){var a=[t,e,1];r.invert(a,this.get("canvas")),r.isPointInPath(a[0],a[1])&&(n=u(i,t,e))}else n=u(i,t,e);return n},clearTotalMatrix:function(){if(this.get("totalMatrix")){this.setSilent("totalMatrix",null);for(var t=this._cfg.children,e=0;e<t.length;e++){t[e].clearTotalMatrix()}}},clear:function(t){for(var e=this._cfg.children,n=e.length-1;n>=0;n--)e[n].remove(!0,t);return this._cfg.children=[],this},destroy:function(){this.get("destroyed")||(this.clear(),c.superclass.destroy.call(this))},clone:function(){var t=this._cfg.children,e=new c;return r.each(t,function(t){e.add(t.clone())}),e}}),t.exports=c},function(t,e,n){var r=n(19),i=function(t,e,n,r){this.type=t,this.target=null,this.currentTarget=null,this.bubbles=n,this.cancelable=r,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.removed=!1,this.event=e};r.augment(i,{preventDefault:function(){this.defaultPrevented=this.cancelable&&!0},stopPropagation:function(){this.propagationStopped=!0},remove:function(){this.remove=!0},clone:function(){return r.clone(this)},toString:function(){return"[Event (type="+this.type+")]"}}),t.exports=i},function(t,e,n){t.exports={isFunction:n(84),isObject:n(621),isBoolean:n(653),isNil:n(237),isString:n(595),isArray:n(45),isNumber:n(236),isEmpty:n(647),uniqueId:n(646),clone:n(616),deepMix:n(615),assign:n(606),merge:n(615),upperFirst:n(655),each:n(46),isEqual:n(614),toArray:n(604),extend:n(650),augment:n(651),remove:n(676),isNumberEqual:n(673),toRadian:n(669),toDegree:n(671),mod:n(672),clamp:n(618),createDom:n(681),modifyCSS:n(680),requestAnimationFrame:n(679),getRatio:function(){return window.devicePixelRatio?window.devicePixelRatio:2},mat3:n(617),vec2:n(668),vec3:n(667),transform:n(666)}},function(t,e,n){var r=n(16),i=n(253),a=n(251),o="Expected a function",s=Math.max,u=Math.min;t.exports=function(t,e,n){var c,h,f,l,p,d,g=0,v=!1,m=!1,x=!0;if("function"!=typeof t)throw new TypeError(o);function y(e){var n=c,r=h;return c=h=void 0,g=e,l=t.apply(r,n)}function b(t){var n=t-d;return void 0===d||n>=e||n<0||m&&t-g>=f}function M(){var t=i();if(b(t))return w(t);p=setTimeout(M,function(t){var n=e-(t-d);return m?u(n,f-(t-g)):n}(t))}function w(t){return p=void 0,x&&c?y(t):(c=h=void 0,l)}function _(){var t=i(),n=b(t);if(c=arguments,h=this,d=t,n){if(void 0===p)return function(t){return g=t,p=setTimeout(M,e),v?y(t):l}(d);if(m)return p=setTimeout(M,e),y(d)}return void 0===p&&(p=setTimeout(M,e)),l}return e=a(e)||0,r(n)&&(v=!!n.leading,f=(m="maxWait"in n)?s(a(n.maxWait)||0,e):f,x="trailing"in n?!!n.trailing:x),_.cancel=function(){void 0!==p&&clearTimeout(p),g=0,c=d=h=p=void 0},_.flush=function(){return void 0===p?l:w(i())},_}},function(t,e){var n=function(){var t={};return function(e){return t[e=e||"g"]?t[e]+=1:t[e]=1,e+t[e]}}();t.exports=n},function(t,e,n){var r=n(237),i=n(118),a=n(654),o=n(652),s=Object.prototype.hasOwnProperty;t.exports=function(t){if(r(t))return!0;if(i(t))return!t.length;var e=a(t);if("Map"===e||"Set"===e)return!t.size;if(o(t))return!Object.keys(t).length;for(var n in t)if(s.call(t,n))return!1;return!0}},function(t,e,n){var r=n(46),i=n(45),a=Object.prototype.hasOwnProperty;t.exports=function(t,e){if(!e||!i(t))return t;var n={},o=null;return r(t,function(t){o=e(t),a.call(n,o)?n[o].push(t):n[o]=[t]}),n}},function(t,e,n){var r=n(84),i=n(45),a=n(648);t.exports=function(t,e){if(!e)return{0:t};if(!r(e)){var n=i(e)?e:e.replace(/\s+/g,"").split("*");e=function(t){for(var e="_",r=0,i=n.length;r<i;r++)e+=t[n[r]]&&t[n[r]].toString();return e}}return a(t,e)}},function(t,e,n){var r=n(84),i=n(606);t.exports=function(t,e,n,a){r(e)||(n=e,e=t,t=function(){});var o=Object.create?function(t,e){return Object.create(t,{constructor:{value:e}})}:function(t,e){function n(){}n.prototype=t;var r=new n;return r.constructor=e,r},s=o(e.prototype,t);return t.prototype=i(s,t.prototype),t.superclass=o(e.prototype,e),i(s,n),i(t,a),t}},function(t,e,n){var r=n(84),i=n(604),a=n(606);t.exports=function(t){for(var e=i(arguments),n=1;n<e.length;n++){var o=e[n];r(o)&&(o=o.prototype),a(t.prototype,o)}}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var r=n(115);t.exports=function(t){return r(t,"Boolean")}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).replace(/^\[object /,"").replace(/\]$/,"")}},function(t,e,n){var r=n(594);t.exports=function(t){var e=r(t);return e.charAt(0).toUpperCase()+e.substring(1)}},function(t,e,n){var r=n(594);t.exports=function(t){return r(t).toUpperCase()}},function(t,e,n){var r=n(594);t.exports=function(t){return r(t).toLowerCase()}},function(t,e){t.exports=function(t,e){for(var n=[],r=0,i=t.length;i-2*!e>r;r+=2){var a=[{x:+t[r-2],y:+t[r-1]},{x:+t[r],y:+t[r+1]},{x:+t[r+2],y:+t[r+3]},{x:+t[r+4],y:+t[r+5]}];e?r?i-4===r?a[3]={x:+t[0],y:+t[1]}:i-2===r&&(a[2]={x:+t[0],y:+t[1]},a[3]={x:+t[2],y:+t[3]}):a[0]={x:+t[i-2],y:+t[i-1]}:i-4===r?a[3]=a[2]:r||(a[0]={x:+t[r],y:+t[r+1]}),n.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return n}},function(t,e){var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r="\t\n\v\f\r   ᠎             　\u2028\u2029",i=new RegExp("([a-z])["+r+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+r+"]*,?["+r+"]*)+)","ig"),a=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+r+"]*,?["+r+"]*","ig");t.exports=function(t){if(!t)return null;if((void 0===t?"undefined":n(t))===n([]))return t;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return String(t).replace(i,function(t,n,i){var o=[],s=n.toLowerCase();if(i.replace(a,function(t,e){e&&o.push(+e)}),"m"===s&&o.length>2&&(r.push([n].concat(o.splice(0,2))),s="l",n="m"===n?"l":"L"),"o"===s&&1===o.length&&r.push([n,o[0]]),"r"===s)r.push([n].concat(o));else for(;o.length>=e[s]&&(r.push([n].concat(o.splice(0,e[s]))),e[s]););}),r}},function(t,e,n){var r=n(659),i=n(658);function a(t,e,n,r,i){var a=[];if(null===i&&null===r&&(r=n),t=+t,e=+e,n=+n,r=+r,null!==i){var o=Math.PI/180,s=t+n*Math.cos(-r*o),u=t+n*Math.cos(-i*o);a=[["M",s,e+n*Math.sin(-r*o)],["A",n,n,0,+(i-r>180),0,u,e+n*Math.sin(-i*o)]]}else a=[["M",t,e],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]];return a}t.exports=function(t){if(!(t=r(t))||!t.length)return[["M",0,0]];var e=[],n=0,o=0,s=0,u=0,c=0,h=void 0,f=void 0;"M"===t[0][0]&&(s=n=+t[0][1],u=o=+t[0][2],c++,e[0]=["M",n,o]);for(var l,p,d=3===t.length&&"M"===t[0][0]&&"R"===t[1][0].toUpperCase()&&"Z"===t[2][0].toUpperCase(),g=c,v=t.length;g<v;g++){if(e.push(l=[]),(h=(p=t[g])[0])!==h.toUpperCase())switch(l[0]=h.toUpperCase(),l[0]){case"A":l[1]=p[1],l[2]=p[2],l[3]=p[3],l[4]=p[4],l[5]=p[5],l[6]=+p[6]+n,l[7]=+p[7]+o;break;case"V":l[1]=+p[1]+o;break;case"H":l[1]=+p[1]+n;break;case"R":for(var m=2,x=(f=[n,o].concat(p.slice(1))).length;m<x;m++)f[m]=+f[m]+n,f[++m]=+f[m]+o;e.pop(),e=e.concat(i(f,d));break;case"O":e.pop(),(f=a(n,o,p[1],p[2])).push(f[0]),e=e.concat(f);break;case"U":e.pop(),e=e.concat(a(n,o,p[1],p[2],p[3])),l=["U"].concat(e[e.length-1].slice(-2));break;case"M":s=+p[1]+n,u=+p[2]+o;break;default:for(var y=1,b=p.length;y<b;y++)l[y]=+p[y]+(y%2?n:o)}else if("R"===h)f=[n,o].concat(p.slice(1)),e.pop(),e=e.concat(i(f,d)),l=["R"].concat(p.slice(-2));else if("O"===h)e.pop(),(f=a(n,o,p[1],p[2])).push(f[0]),e=e.concat(f);else if("U"===h)e.pop(),e=e.concat(a(n,o,p[1],p[2],p[3])),l=["U"].concat(e[e.length-1].slice(-2));else for(var M=0,w=p.length;M<w;M++)l[M]=p[M];if("O"!==(h=h.toUpperCase()))switch(l[0]){case"Z":n=+s,o=+u;break;case"H":n=l[1];break;case"V":o=l[1];break;case"M":s=l[l.length-2],u=l[l.length-1];break;default:n=l[l.length-2],o=l[l.length-1]}}return e}},function(t,e,n){var r=n(660),i=function(t,e,n,r){return[t,e,n,r,n,r]},a=function(t,e,n,r,i,a){return[1/3*t+2/3*n,1/3*e+2/3*r,1/3*i+2/3*n,1/3*a+2/3*r,i,a]};t.exports=function(t,e){var n=r(t),o=e&&r(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=[],h=[],f="",l="",p=void 0,d=function(t,e,n){var r=void 0,o=void 0;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(function t(e,n,r,i,a,o,s,u,c,h){r===i&&(r+=1);var f=120*Math.PI/180,l=Math.PI/180*(+a||0),p=[],d=void 0,g=void 0,v=void 0,m=void 0,x=void 0,y=function(t,e,n){return{x:t*Math.cos(n)-e*Math.sin(n),y:t*Math.sin(n)+e*Math.cos(n)}};if(h)g=h[0],v=h[1],m=h[2],x=h[3];else{e=(d=y(e,n,-l)).x,n=d.y,u=(d=y(u,c,-l)).x,c=d.y,e===u&&n===c&&(u+=1,c+=1);var b=(e-u)/2,M=(n-c)/2,w=b*b/(r*r)+M*M/(i*i);w>1&&(r*=w=Math.sqrt(w),i*=w);var _=r*r,E=i*i,S=(o===s?-1:1)*Math.sqrt(Math.abs((_*E-_*M*M-E*b*b)/(_*M*M+E*b*b)));m=S*r*M/i+(e+u)/2,x=S*-i*b/r+(n+c)/2,g=Math.asin(((n-x)/i).toFixed(9)),v=Math.asin(((c-x)/i).toFixed(9)),g=e<m?Math.PI-g:g,v=u<m?Math.PI-v:v,g<0&&(g=2*Math.PI+g),v<0&&(v=2*Math.PI+v),s&&g>v&&(g-=2*Math.PI),!s&&v>g&&(v-=2*Math.PI)}var A=v-g;if(Math.abs(A)>f){var P=v,O=u,C=c;v=g+f*(s&&v>g?1:-1),p=t(u=m+r*Math.cos(v),c=x+i*Math.sin(v),r,i,a,0,s,O,C,[v,P,m,x])}A=v-g;var I=Math.cos(g),T=Math.sin(g),k=Math.cos(v),N=Math.sin(v),L=Math.tan(A/4),B=4/3*r*L,j=4/3*i*L,D=[e,n],R=[e+B*T,n-j*I],F=[u+B*N,c-j*k],Y=[u,c];if(R[0]=2*D[0]-R[0],R[1]=2*D[1]-R[1],h)return[R,F,Y].concat(p);for(var X=[],G=0,q=(p=[R,F,Y].concat(p).join().split(",")).length;G<q;G++)X[G]=G%2?y(p[G-1],p[G],l).y:y(p[G],p[G+1],l).x;return X}.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"===n||"S"===n?(r=2*e.x-e.bx,o=2*e.y-e.by):(r=e.x,o=e.y),t=["C",r,o].concat(t.slice(1));break;case"T":"Q"===n||"T"===n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(a(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(a(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(i(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(i(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(i(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(i(e.x,e.y,e.X,e.Y))}return t},g=function(t,e){if(t[e].length>7){t[e].shift();for(var r=t[e];r.length;)c[e]="A",o&&(h[e]="A"),t.splice(e++,0,["C"].concat(r.splice(0,6)));t.splice(e,1),p=Math.max(n.length,o&&o.length||0)}},v=function(t,e,r,i,a){t&&e&&"M"===t[a][0]&&"M"!==e[a][0]&&(e.splice(a,0,["M",i.x,i.y]),r.bx=0,r.by=0,r.x=t[a][1],r.y=t[a][2],p=Math.max(n.length,o&&o.length||0))};p=Math.max(n.length,o&&o.length||0);for(var m=0;m<p;m++){n[m]&&(f=n[m][0]),"C"!==f&&(c[m]=f,m&&(l=c[m-1])),n[m]=d(n[m],s,l),"A"!==c[m]&&"C"===f&&(c[m]="C"),g(n,m),o&&(o[m]&&(f=o[m][0]),"C"!==f&&(h[m]=f,m&&(l=h[m-1])),o[m]=d(o[m],u,l),"A"!==h[m]&&"C"===f&&(h[m]="C"),g(o,m)),v(n,o,s,u,m),v(o,n,u,s,m);var x=n[m],y=o&&o[m],b=x.length,M=o&&y.length;s.x=x[b-2],s.y=x[b-1],s.bx=parseFloat(x[b-4])||s.x,s.by=parseFloat(x[b-3])||s.y,u.bx=o&&(parseFloat(y[M-4])||u.x),u.by=o&&(parseFloat(y[M-3])||u.y),u.x=o&&y[M-2],u.y=o&&y[M-1]}return o?[n,o]:n}},function(t,e){var n=/,?([a-z]),?/gi;t.exports=function(t){return t.join(",").replace(n,"$1")}},function(t,e,n){var r=n(662);t.exports=function(t,e,n,i,a){if(a)return[["M",+t+ +a,e],["l",n-2*a,0],["a",a,a,0,0,1,a,a],["l",0,i-2*a],["a",a,a,0,0,1,-a,a],["l",2*a-n,0],["a",a,a,0,0,1,-a,-a],["l",0,2*a-i],["a",a,a,0,0,1,a,-a],["z"]];var o=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return o.parsePathArray=r,o}},function(t,e,n){var r=n(46),i=n(84),a=Object.values?function(t){return Object.values(t)}:function(t){var e=[];return r(t,function(n,r){i(t)&&"prototype"===r||e.push(n)}),e};t.exports=a},function(t,e){t.exports=function(t,e){return t.hasOwnProperty(e)}},function(t,e,n){var r=n(616),i=n(46),a=n(617);t.exports=function(t,e){return t=r(t),i(e,function(e){switch(e[0]){case"t":a.translate(t,t,[e[1],e[2]]);break;case"s":a.scale(t,t,[e[1],e[2]]);break;case"r":a.rotate(t,t,e[1]);break;case"m":a.multiply(t,t,e[1]);break;default:return!1}}),t}},function(t,e,n){var r=n(254);t.exports=r},function(t,e,n){var r=n(255),i=n(618);r.angle=function(t,e){var n=r.dot(t,e)/(r.length(t)*r.length(e));return Math.acos(i(n,-1,1))},r.direction=function(t,e){return t[0]*e[1]-e[0]*t[1]},r.angleTo=function(t,e,n){var i=r.angle(t,e),a=r.direction(t,e)>=0;return n?a?2*Math.PI-i:i:a?i:2*Math.PI-i},r.vertical=function(t,e,n){return n?(t[0]=e[1],t[1]=-1*e[0]):(t[0]=-1*e[1],t[1]=e[0]),t},t.exports=r},function(t,e){var n=Math.PI/180;t.exports=function(t){return n*t}},function(t,e){t.exports=parseInt},function(t,e){var n=180/Math.PI;t.exports=function(t){return n*t}},function(t,e){t.exports=function(t,e){return(t%e+e)%e}},function(t,e){t.exports=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-5;return Math.abs(t-e)<n}},function(t,e,n){var r=n(46),i=n(605);t.exports=function(t){var e=[];return r(t,function(t){i(e,t)||e.push(t)}),e}},function(t,e,n){var r=n(118),i=Array.prototype.splice;t.exports=function(t,e){if(!r(t))return[];for(var n=t?e.length:0,a=n-1;n--;){var o=void 0,s=e[n];n!==a&&s===o||(o=s,i.call(t,s,1))}return t}},function(t,e){var n=Array.prototype,r=n.splice,i=n.indexOf,a=n.slice;t.exports=function(t){for(var e=a.call(arguments,1),n=0;n<e.length;n++)for(var o=e[n],s=-1;(s=i.call(t,o))>-1;)r.call(t,s,1);return t}},function(t,e,n){var r=n(46),i=n(84),a=Object.keys?function(t){return Object.keys(t)}:function(t){var e=[];return r(t,function(n,r){i(t)&&"prototype"===r||e.push(r)}),e};t.exports=a},function(t,e,n){var r=n(677),i=n(237);t.exports=function(t,e){var n=r(e),a=n.length;if(i(t))return!a;for(var o=0;o<a;o+=1){var s=n[o];if(e[s]!==t[s]||!(s in t))return!1}return!0}},function(t,e){t.exports=function(t){return(window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)})(t)}},function(t,e){t.exports=function(t,e){if(t)for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t}},function(t,e){var n=document.createElement("table"),r=document.createElement("tr"),i=/^\s*<(\w+|!)[^>]*>/,a={tr:document.createElement("tbody"),tbody:n,thead:n,tfoot:n,td:r,th:r,"*":document.createElement("div")};t.exports=function(t){var e=i.test(t)&&RegExp.$1;e in a||(e="*");var n=a[e];t=t.replace(/(^\s*)|(\s*$)/g,""),n.innerHTML=""+t;var r=n.childNodes[0];return n.removeChild(r),r}},function(t,e,n){var r=n(257),i={isBetween:function(t,e,n){return t>=e&&t<=n},getLineIntersect:function(t,e,n,r){var a=n.x-t.x,o=n.y-t.y,s=e.x-t.x,u=e.y-t.y,c=r.x-n.x,h=r.y-n.y,f=s*h-u*c,l=null;if(f*f>.001*(s*s+u*u)*(c*c+h*h)){var p=(a*h-o*c)/f,d=(a*u-o*s)/f;i.isBetween(p,0,1)&&i.isBetween(d,0,1)&&(l={x:t.x+p*s,y:t.y+p*u})}return l},getIntersectPointRect:function(t,e){var n=t.minX,r=t.minY,a=t.maxX-t.minX,o=t.maxY-t.minY,s=[],u={x:n+a/2,y:r+o/2};s.push({x:n,y:r}),s.push({x:n+a,y:r}),s.push({x:n+a,y:r+o}),s.push({x:n,y:r+o}),s.push({x:n,y:r});for(var c=null,h=1;h<s.length&&!(c=i.getLineIntersect(s[h-1],s[h],u,e));h++);return c},getIntersectPointCircle:function(t,e,n,r,i){if(Math.sqrt(Math.pow(t-n,2)+Math.pow(e-r,2))<i)return null;var a=t-n,o=e-r,s=Math.sign(a),u=Math.sign(o),c=Math.atan(o/a);return{x:n+Math.abs(i*Math.cos(c))*s,y:r+Math.abs(i*Math.sin(c))*u}},applyMatrix:function(t,e,n){void 0===n&&(n=1);var i=[t.x,t.y,n];return r.vec3.transformMat3(i,i,e),{x:i[0],y:i[1]}},invertMatrix:function(t,e,n){void 0===n&&(n=1);var i=r.mat3.invert([],e),a=[t.x,t.y,n];return r.vec3.transformMat3(a,a,i),{x:a[0],y:a[1]}},radixSort:function(t,e){var n,r,i,a,o,s,u,c=10,h=1,f=[],l=1;for(i=0;i<t.length;i++)n=e(t[i]),r=(n=parseInt(n,10)).toString().length,n.toString().length>l&&(l=r);for(i=0;i<l;i++,h*=10,c*=10){for(a=0;a<t.length;a++)o=e(t[a]),void 0===f[o=parseInt(o%c/h,10)]&&(f[o]=[]),f[o].push(t[a]);for(s=0,a=0;a<f.length;a++)if(u=void 0,void 0!==f[a])for(u=f[a].shift();void 0!==u;)t[s++]=u,u=f[a].shift()}return t},getArcOfVectors:function(t,e){var n=t.x,r=t.y,i=e.x,a=e.y,o=Math.sqrt(n*n+r*r),s=Math.sqrt(i*i+a*a);return Math.acos((n*i+r*a)/(o*s))}};t.exports=r.mix({},r,i)},function(t,e,n){var r=n(258);r.registerShapeManager("node",{defaultShapeType:"common"}),r.registerShapeManager("edge",{defaultShapeType:"common"}),r.registerShapeManager("group",{defaultShapeType:"common"}),r.registerShapeManager("guide",{defaultShapeType:"common"}),n(724),n(721),n(719),n(717),t.exports=r},function(t,e,n){var r=n(247),i=n(609),a=n(26);setTimeout(function(){var t=r.track;if(r.track){var e=new Image,n={pg:document.URL,r:(new Date).getTime(),g6:!0,version:i,page_type:"syslog"};a.isObject(t)&&a.mix(n,t);var o=encodeURIComponent(JSON.stringify([n]));e.src="https://kcart.alipay.com/web/bi.do?BIProfile=merge&d="+o}},2e3)},function(t,e,n){var r=n(598),i=function(t){function e(e){var n;return(n=t.call(this,e)||this).layout=r.mindmap,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(597));t.exports=i},function(t,e,n){var r=n(598),i=function(t){function e(e){var n;return(n=t.call(this,e)||this).layout=r.indented,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(597));t.exports=i},function(t,e,n){var r=n(598),i=function(t){function e(e){var n;return(n=t.call(this,e)||this).layout=r.dendrogram,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(597));t.exports=i},function(t,e,n){var r=n(598),i=function(t){function e(e){var n;return(n=t.call(this,e)||this).layout=r.compactBox,n}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(597));t.exports=i},function(t,e,n){var r=n(26),i=n(625),a=n(623),o=function(t){function e(e){var n=r.mix({layout:new a.CompactBoxTree({getHGap:function(){return 10},getVGap:function(){return 10}}),_type:"tree"},e);return t.call(this,n)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.initEvent=function(){var t=this;this.on("afterdrawinner",function(){t.get("_sourceData").roots.forEach(function(e){var n=t.find(e.id);t._setVisibleByCollapsed(n)})})},n._executeLayout=function(t){var e=this.get("_sourceData");r.isFunction(t)?t(e.roots,this):r.isObject(t)&&(t.roots=e.roots,t.graph=this,t.execute())},n.getHierarchy=function(t){t=this.getItem(t);for(var e=this.get("_dataMap"),n=t.getModel().parent,r=1;n;)n=e[n].parent,r++;return r},n.parseSource=function(t){var e=t.roots,n=this.get("_dataMap"),i=[],a=[];if(!e)throw new Error("please set data.roots!");return e.forEach(function(t){r.traverseTree(t,function(t,e){t.id||(t.id=r.guid()),e||(e=n[t.parent]),e&&(t.parent=e.id,e.id||(e.id=r.guid()),a.push({source:e.id,target:t.id,id:e.id+"-"+t.id})),i.push(t)},function(t){return t.children},!0)}),{nodes:i,edges:a}},n._setVisibleByCollapsed=function(t){var e=t.getModel();t.collapsedParent?(t.hide(),t.getEdges().forEach(function(t){t.hide()}),t.deepEach(function(t){t.hide(),t.getEdges().forEach(function(t){t.hide()})})):e.collapsed?t.deepEach(function(t){t.hide(),t.getEdges().forEach(function(t){t.hide()})}):t.deepEach(function(t){t.collapsedParent&&(t.hide(),t.getEdges().forEach(function(t){t.hide()}))})},n.source=function(t){var e=this.parseSource(t);this.emit("beforesource"),this.set("_sourceData",t),this.set("_data",e),this.emit("aftersource")},n._setNodeNth=function(t,e){var n=(t=this.getItem(t)).getModel(),i=t.getParent().getModel().children;r.Array.remove(i,n),i.splice(e,0,n)},n.getNth=function(t){var e=(t=this.getItem(t)).getModel();return t.getParent().getModel().children.indexOf(e)},n.add=function(t,e){var n,i=this.get("_dataMap")[e.parent],a={action:"add",model:e};if("node"===t||"guide"===t){if(this.emit("beforechange",a),"node"===t){if(!i)throw new Error("please set available parent Id !");r.isArray(i.children)?i.children.push(e):i.children=[e];var o=this.parseSource({roots:[e]});this._addItems("node",o.nodes),this._addItems("edge",o.edges),n=this.find(e.id),this._setVisibleByCollapsed(n),r.isNil(e.nth)||this._setNodeNth(n,e.nth),this.find(i.id).forceUpdate()}else this._addItems(t,[e]),n=this.find(e.id);return a.item=n,this.emit("afterchange",a),n}console.warn("Tree do not support add type "+t+"!")},n.update=function(t,e){var n=this;if(e){var i=(t=this.getItem(t)).getModel(),a=r.mix({},i),o={action:"update",item:t,originModel:a,updateModel:e};if(this.emit("beforechange",o),this._updateItems([t],[e]),t.isNode){if("collapsed"in e&&(e.collapsed?t.deepEach(function(t){t.hide(),t.getEdges().forEach(function(t){t.hide()})}):t.deepEach(function(t){t.show(),t.getInEdges().forEach(function(t){t.show()})},function(t){return t.model.collapsed?null:t.getChildren()})),e.parent&&e.parent!==a.parent){var s=this.find(a.parent).getModel(),u=this.find(e.parent).getModel(),c=this.find(s.id+"-"+a.id),h={id:u.id+"-"+a.id,source:u.id,target:a.id};r.Array.remove(s.children,i),u.children?u.children.push(i):u.children=[i],this._removeItems([c]),this._addItems("edge",[h]),this.find(u.id).forceUpdate()}r.isArray(e.children)&&(a.children&&r.each(a.children,function(t){var e=n.find(t.id),r=[e];e.getEdges().forEach(function(t){r.push(t)}),n._removeItems(r)}),r.each(e.children,function(t){var e=n.parseSource({roots:[t]}),i=r.isNil(t.id)?r.guid():t.id;n._addItems("node",e.nodes),n._addItems("edge",e.edges),!t.parent&&n._addItems("edge",[{id:a.id+"-"+i,source:a.id,target:i}])})),r.isNil(e.nth)||this._setNodeNth(t,e.nth);var f=this.find(i.parent);f&&f.forceUpdate()}return this.emit("afterchange",o),this}},n.remove=function(t){var e=this.get("_dataMap"),n=[];if((t=this.getItem(t))&&!t.destroyed){var i={action:"remove",item:t};if(this.emit("beforechange",i),n.push(t),"node"===t.type){t.getEdges().forEach(function(t){n.push(t)});var a=t.getModel(),o=e[a.parent];t.deepEach(function(t){n.push(t),t.getEdges().forEach(function(t){n.push(t)})}),r.Array.remove(o.children,a),this.find(o.id).forceUpdate()}return this._removeItems(r.uniq(n)),this.emit("afterchange",i),this}},n.getRoots=function(){var t=this;return this.getSource().roots.map(function(e){return t.find(e.id)})},n.save=function(){var t={roots:r.clone(this.getSource().roots),guides:this.getGuides().map(function(t){return t.getModel()})};return 0===t.roots.length&&delete t.roots,0===t.guides.length&&delete t.guides,t},e}(i);t.exports=o},function(t,e,n){var r=n(26),i={INIT:"_initForceFit"};i.AUGMENT={_initForceFit:function(){var t=this.get("width"),e=this.get("height");return t||e?t?e?void 0:(this.forceFit("height"),void this._bindForceEvent("height")):(this.forceFit("width"),void this._bindForceEvent("width")):(this.forceFit(),void this._bindForceEvent())},_bindForceEvent:function(t){var e=this,n=this._getTimer("forceFit"),r=function(){var r=setTimeout(function(){e.forceFit(t)},200);n&&clearTimeout(n),e._setTimer("forceFit",r)};window.addEventListener("resize",r),this.set("_windowForceResizeEvent",r)},forceFit:function(t){var e=this.get("_containerDOM"),n=this.get("width"),i=this.get("height"),a=r.getHeight(e),o=r.getWidth(e);return"width"===t?(this.changeSize(o,i),this):"height"===t?(this.changeSize(n,a),this):(this.changeSize(o,a),this)}},t.exports=i},function(t,e,n){var r=n(26),i={CFG:{fitView:void 0,fitViewPadding:10,minZoom:.2,maxZoom:10}};i.AUGMENT={getBBox:function(){var t=this.get("_itemGroup"),e=this.get("_itemMap"),n=t.get("children");return n.length>0?(n=n.filter(function(t){var n=e[t.id];return!!n&&!1!==n.getShapeObj().bboxCalculation}),r.getChildrenBBox(n)):{minX:0,minY:0,maxX:this.get("width"),maxY:this.get("height")}},getFitViewPadding:function(){return r.toAllPadding(this.get("fitViewPadding"))},setFitView:function(t){if(!t)return this;if("autoZoom"===t)return this.autoZoom(),this;var e=this.getFitViewPadding(),n=this.get("width"),i=this.get("height"),a=this.getBBox(),o=a.maxX-a.minX,s=a.maxY-a.minY,u={x:0,y:0,width:n,height:i},c=r.getNineBoxPosition(t,u,o,s,e),h=[1,0,0,0,1,0,0,0,1];r.mat3.translate(h,h,[-a.minX+c.x,-a.minY+c.y]),this.updateMatrix(h)},_getZoomRatio:function(t){var e=this.get("maxZoom"),n=this.get("minZoom");return t<n&&(t=n),t>e&&(t=e),t},autoZoom:function(t){var e=this;t||(t=this.getFitViewPadding());var n=this.get("width"),i=this.get("height"),a=this.getBBox(),o=r.getAutoZoomMatrix({minX:0,minY:0,maxX:n,maxY:i},a,t,function(t){return e._getZoomRatio(t)});this.updateMatrix(o)},getZoom:function(){return this.getMatrix()[0]},updateMatrix:function(t){var e=this.getMatrix(),n={updateMatrix:t,originMatrix:e},r=e[0]!==t[0];return this.emit("beforeviewportchange",n),r&&this.emit("beforezoom",n),this.setMatrix(t),r&&this.emit("afterzoom",n),this.emit("afterviewportchange",n),this.draw(),this},zoom:function(t,e){if(!r.isNumber(t)){e=this._getZoomRatio(e);var n=this.get("_rootGroup"),i=r.clone(n.getMatrix()),a=i[6]+i[0]*t.x-e*t.x,o=i[7]+i[0]*t.y-e*t.y;return i[6]=0,i[7]=0,i[0]=e,i[4]=e,r.mat3.translate(i,i,[a,o]),this.updateMatrix(i),this}var s=this.get("width"),u=this.get("height");this.zoomByDom({x:s/2,y:u/2},t)},zoomByDom:function(t,e){var n=this.getPoint(t);return this.zoom(n,e),this},translate:function(t,e){var n=this.get("_rootGroup").getMatrix();return r.mat3.translate(n,n,[t,e]),this.updateMatrix(n),this},translateByDom:function(t,e){var n=this.get("_rootGroup").getMatrix()[0];return this.translate(t/n,e/n),this},getMatrix:function(){return this.get("_rootGroup").getMatrix()},setMatrix:function(t){this.get("_rootGroup").setMatrix(t)},getPoint:function(t){return this.getPointByDom(t)},getPointByDom:function(t){var e=this.get("_rootGroup").getMatrix();return r.invertMatrix(t,e)},getPointByCanvas:function(t){var e=this.get("_canvas").get("pixelRatio");return this.getPoint({x:t.x/e,y:t.y/e})},getPointByClient:function(t){var e=this.get("_canvas").getPointByClient(t.x,t.y);return this.getPointByCanvas(e)},getDomPoint:function(t){var e=this.get("_rootGroup").getMatrix();return r.applyMatrix(t,e)},getCanvasPoint:function(t){var e=this.get("_canvas").get("pixelRatio"),n=this.getDomPoint(t);return{x:n.x*e,y:n.y*e}},getClientPoint:function(t){var e=this.getCanvasPoint(t),n=this.get("_canvas").getClientByPoint(e.x,e.y);return{x:n.clientX,y:n.clientY}},focus:function(t){if(r.isString(t)&&(t=this.find(t)),t){var e=t.getCenter();this.focusPoint(e)}return this},focusPoint:function(t){var e=this.get("_rootGroup").getMatrix(),n=this.get("width"),r=this.get("height"),i=-e[6]+n/2-e[0]*t.x,a=-e[7]+r/2-e[0]*t.y;return this.translate(i,a),this},focusPointByDom:function(t){var e=this.getPoint(t);return this.focusPoint(e),this}},t.exports=i},function(t,e){var n={INIT:"_initDraw",AUGMENT:{_initDraw:function(){var t=this,e=this.get("_controllers").animate;["clear","show","hide","change","updatenodeposition"].forEach(function(n){e&&t.on("before"+n,function(n){var r=t.get("_forcePreventAnimate"),i=n?n.affectedItemIds:void 0;!0!==r&&e&&e.cacheGraph("startCache",i)}),t.on("after"+n,function(n){var r=n?n.affectedItemIds:void 0,i=t.get("_forcePreventAnimate");if(n&&"changeData"===n.action){var a=t.get("fitView");a&&t.setFitView(a)}!0!==i&&e?(e.cacheGraph("endCache",r),e.run()):t.draw()})})},draw:function(){this.get("_canvas").draw()},animateDraw:function(){this.get("_controllers").animate.run()}}};t.exports=n},function(t,e,n){var r=n(247);function i(t,e){var n=t.getGraphicGroup(),i=t.getBBox(),a=(i.minX+i.maxX)/2,o=(i.minY+i.maxY)/2,s=n.getMatrix()[0];n.transform([["t",-a,-o],["s",.01/s,.01/s],["t",a,o]]),n.animate({transform:[["t",-a,-o],["s",100*s,100*s],["t",a,o]]},r.enterDuration,r.enterEasing,e)}function a(t,e){var n=t.getGraphicGroup(),i=t.getBBox(),a=(i.minX+i.maxX)/2,o=(i.minY+i.maxY)/2,s=n.getMatrix()[0];n.animate({transform:[["t",-a,-o],["s",.01/s,.01/s],["t",a,o]]},r.leaveDuration,r.leaveEasing,e)}function o(t,e){t.deepEach(function(t){if(t.isShape){var n=t.attr("fillOpacity"),i=t.attr("strokeOpacity");t.attr({fillOpacity:0,strokeOpacity:0}),t.animate({fillOpacity:n,strokeOpacity:i},r.enterDuration,r.enterEasing,e)}})}function s(t,e){t.deepEach(function(t){var n=t.attr("fillOpacity"),i=t.attr("strokeOpacity");t.isShape&&t.animate({fillOpacity:0,strokeOpacity:0},r.leaveDuration,r.leaveEasing,function(){t.attr({fillOpacity:n,strokeOpacity:i}),e()})})}t.exports={enterScaleIn:function(t){var e=t.item;t.element.isItemContainer&&e.getKeyShape()&&i(e)},showScaleIn:function(t){var e=t.item;t.element.isItemContainer&&e.getKeyShape()&&i(e)},leaveScaleOut:function(t){var e=t.item,n=t.element,r=t.done;n.isItemContainer&&a(e,function(){r()})},hideScaleOut:function(t){var e=t.item,n=t.element,r=t.done;n.isItemContainer&&a(e,function(){r()})},enterFadeIn:function(t){var e=t.element,n=t.item;e.isItemContainer&&n.getKeyShape()&&o(e)},showFadeIn:function(t){var e=t.element,n=t.item;e.isItemContainer&&n.getKeyShape()&&o(e)},leaveFadeOut:function(t){var e=t.element,n=t.item,r=t.done;e.isItemContainer&&n.getKeyShape()&&s(e,r)},hideFadeOut:function(t){var e=t.element,n=t.item,r=t.done;e.isItemContainer&&n.getKeyShape()&&s(e,r)}}},function(t,e,n){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(599),a=n(693),o=n(26),s=n(247),u=["matrix","fillStyle","strokeStyle","endArrow","startArrow"],c=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{show:"scaleIn",hide:"scaleOut",enter:"scaleIn",leave:"scaleOut",update:function(t){var e=t.element,n=t.endKeyFrame.props;e.animate(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({matrix:n.matrix},n.attrs),s.updateDuration,s.updateEasing)},graph:null,startCache:{},endCache:{},keykeyCache:{}}},n._init=function(){var t=this,e=this.graph,n=this.keykeyCache;e.on("afteritemdraw",function(e){e.item.getGraphicGroup().deepEach(function(e){n[e.gid]=t._getCache(e)},!0)})},n.cacheGraph=function(t,e){var n,r=this,i=this.graph;n=e?e.map(function(t){return i.find(t)}):i.getItems(),this[t]={},n.forEach(function(e){e&&r.cache(e,r[t],t)})},n._getCache=function(t){var e=this.keykeyCache;if(!o.isObject(t))return e[t];var n={props:{matrix:o.clone(t.getMatrix()),attrs:{}}};if(t.isShape){var r=t.attr();r=o.omit(r,u),n.props.attrs=o.clone(r)}return n},n._getAnimation=function(t,e){var n=this.graph,r=t.shapeObj,i=this[e],s=r[e+"Animation"]||r[e+"Animate"],u=n.get("_"+e+"Animation"),c=s||u||i;return o.isString(c)?a[e+o.upperFirst(c)]:c},n.cache=function(t,e,n){var r=this;t.getGraphicGroup().deepEach(function(i){var a=i.gid,o="startCache"===n?r._getCache(i):r._getCache(i.gid);o.enterAnimate=r._getAnimation(t,"enter"),o.leaveAnimate=r._getAnimation(t,"leave"),o.showAnimate=r._getAnimation(t,"show"),o.hideAnimate=r._getAnimation(t,"hide"),o.updateAnimate=r._getAnimation(t,"update"),o.item=t,o.element=i,o.visible=i.get("visible"),e[a]=o},!0)},n._compare=function(){var t=this.startCache,e=this.endCache,n=[],r=[],i=[],a=[],s=[];o.each(e,function(e,r){var o=t[r];o?o.element.get("type")===e.element.get("type")&&(o.visible&&e.visible?i.push(r):o.visible&&!e.visible?a.push(r):!o.visible&&e.visible&&s.push(r)):n.push(r)}),o.each(t,function(t,n){e[n]||r.push(n)}),this.enterElements=n,this.leaveElements=r,this.updateElements=i,this.hideElements=a,this.showElements=s},n._addTween=function(){var t=this.enterElements,e=this.leaveElements,n=this.updateElements,r=this.hideElements,i=this.showElements,a=this.startCache,s=this.endCache;t.forEach(function(t){var e=s[t],n=e.enterAnimate;n&&n({element:e.element,item:e.item,endKeyFrame:e,startKeyFrame:null,startCache:a,endCache:s,done:function(){}})}),e.forEach(function(t){var e=a[t],n=e.leaveAnimate;if(n){var r=a[t].element;r.isItemContainer&&r.getParent().add(r),n({element:r,item:e.item,endKeyFrame:null,startKeyFrame:e,startCache:a,endCache:s,done:function(){r.isItemContainer&&r.remove()}})}}),n.forEach(function(t){var e=s[t],n=a[t],r=e.element,i=n.element,u=n.props,c=e.props,h=e.updateAnimate;u.attrs&&r.attr(u.attrs),o.isEqual(u.matrix,c.matrix)||r.setMatrix(u.matrix),h({element:r,item:e,endKeyFrame:e,startKeyFrame:n,startCache:a,endCache:s,done:function(){}}),i!==r&&i.remove()}),r.forEach(function(t){var e=s[t],n=a[t],r=e.hideAnimate;r&&(e.element.show(),r({element:e.element,item:e.item,endKeyFrame:e,startKeyFrame:n,startCache:a,endCache:s,done:function(){var t=e.item,n=t.getGraphicGroup();!t.visible&&n.hide()}}))}),i.forEach(function(t){var e=s[t],n=a[t],r=e.showAnimate;r&&r({element:e.element,item:e.item,endKeyFrame:e,startKeyFrame:n,startCache:a,endCache:s,done:function(){}})})},n.run=function(){this.graph.destroyed||(this._compare(),this._addTween())},e}(i);t.exports=c},function(t,e,n){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(26),a=n(694),o={INIT:"_initAnimate",CFG:{animate:!1}};o.AUGMENT={_initAnimate:function(){var t=this.get("animate");if(t){var e=this.get("_controllers"),n={graph:this};i.isPlainObject(t)&&(n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({},n,t)),e.animate=new a(n)}}},t.exports=o},function(t,e,n){var r=n(26),i={INIT:"_initFilter",CFG:{filters:[]}};i.AUGMENT={_initFilter:function(){var t=this,e=this.get("filters");r.isFunction(e)&&this.set("filters",[e]),this.on("afterchange",function(n){var r=n.action;e.length>0&&"changeData"===r&&!t.destroyed&&t.filter()})},addFilter:function(t){return this.get("filters").push(t),t},removeFilter:function(t){var e=this.get("filters");this.set("filters",r.filter(e,t))},filter:function(){this.emit("beforefilter");var t=this.get("filters"),e=this.getItems(),n=this._getFilterItems();t.forEach(function(t){n=n.filter(t)}),e.forEach(function(t){-1===n.indexOf(t)?t.hide():t.show()}),this.draw(),this.emit("afterfilter")},_getFilterItems:function(){return this.getItems().filter(function(t){return!1!==t.getShapeObj().filter})}},t.exports=i},function(t,e,n){var r=n(26),i=n(626),a={CFG:{modes:{default:[]},mode:"default",_eventCache:{}},INIT:"_initModes"};a.AUGMENT={_initModes:function(){var t=this.get("mode");this.changeMode(t)},changeMode:function(t){var e=this.get("modes");r.isEmpty(e)||r.isEmpty(e[t])||(i.resetMode(e[t],this),this.set("mode",t))},addBehaviour:function(t,e){var n=this.get("modes");e=e||this.get("mode"),r.isEmpty(n[e])&&(n[e]=[]);var a=n[e],o=[].concat(t);return r.each(o,function(t){-1===a.indexOf(t)&&a.push(t)}),i.resetMode(n[e],this),this},removeBehaviour:function(t){var e=this.get("modes"),n=this.get("mode"),a=e[n];if(!r.isEmpty(a)){var o=[].concat(t);return a=a.filter(function(t){return-1===o.indexOf(t)}),e[n]=a,i.resetMode(a,this),this}},behaviourOn:function(t,e){var n=this._eventCache;n[t]||(n[t]=[]),n[t].push(e),this.on(t,e)},_off:function(){var t=this,e=this._eventCache;r.each(e,function(e,n){r.each(e,function(e){t.off(n,e)})}),this._eventCache={}}},t.exports=a},function(t,e,n){var r=n(599),i=n(26),a={MOUSEMOVE:"mousemove",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",MOUSEENTER:"mouseenter",MOUSELEAVE:"mouseleave",CLICK:"click",DBLCLICK:"dblclick",DRAGSTART:"dragstart",DRAG:"drag",DRAGENTER:"dragenter",DRAGLEAVE:"dragleave",DRAGEND:"dragend",DROP:"drop",CONTEXTMENU:"contextmenu",WHEEL:"wheel",KEYDOWN:"keydown",KEYUP:"keyup",KEYPRESS:"keypress",MOUSEWHEEL:"mousewheel"},o=[a.DBLCLICK,a.MOUSEDOWN,a.MOUSEUP,a.MOUSEENTER,a.MOUSELEAVE,a.MOUSEMOVE,a.CONTEXTMENU,a.WHEEL,a.MOUSEWHEEL],s=[a.KEYDOWN,a.KEYUP,a.KEYPRESS];var u=function(t){function e(e){var n;return(n=t.call(this,e)||this)._domEvents=[],n._initEventStates(),n._registerEvents(),n}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._initEventStates=function(){this._pressing=!1,this._dragging=!1,this._currentEventObj={},this._dragEventObj={}},n._registerEvents=function(){this._registerMouseEvents(),this._registerKeyboardEvents()},n._registerKeyboardEvents=function(){var t=this.graph,e=t.getKeyboardEventWrapper(),n=this._domEvents,r=t.get("keyboardEnable");i.each(s,function(a){n.push(i.addEventListener(e,a,function(e){var n=!0;i.isFunction(r)&&(n=r()),n&&t.emit(a,{domEvent:e})}))})},n._registerMouseEvents=function(){var t=this,e=this,n=this.graph.getMouseEventWrapper(),r=this._domEvents;i.each(o,function(o){r.push(i.addEventListener(n,o,function(n){if(n.type!==a.MOUSEENTER||!n.fromElement||n.fromElement.parentNode&&!function(t,e){for(var n=t.parentNode;n;){if(n.tagName===e)return!0;n=n.parentNode}return!1}(n.fromElement,"foreignObject")){var r=t._currentEventObj;t._oldEventObj=r,t._processEventObj(n);var o=t._currentEventObj;e._simulateEvents(n,r,o),-1!==[a.MOUSELEAVE,a.MOUSEENTER].indexOf(n.type)&&e._triggerEvent("canvas:"+n.type),e._triggerEvent(n.type),n.type===a.MOUSELEAVE&&(t._dragging&&e._triggerEvent(a.DRAGLEAVE,i.mix({},o,{item:null,shape:null,currentItem:t._dragEventObj.item,currentShape:t._dragEventObj.shape})),e._initEventStates())}}))})},n.destroy=function(){var t=this._domEvents;i.each(t,function(t){t&&t.remove()}),this._domEvents=null},n._triggerEvent=function(t,e){if(e||(e="mouseleave"===t?this._oldEventObj:this._currentEventObj),"mousedown"===t&&(e.button=this._button),e._type=t,this.emitGraphEvent(t,e),-1===["canvas:"+a.MOUSELEAVE,"canvas:"+a.MOUSEENTER].indexOf(t)){var n=e.shape&&e.shape.eventPreFix;if(-1!==[a.DRAGSTART,a.DRAG,a.DRAGEND].indexOf(t)&&(n=e.currentShape&&e.currentShape.eventPreFix),n){var r=n+":"+t;e._type=r,i.isBoolean(e._isItemChange)?e._isItemChange&&this.emitGraphEvent(r,e):this.emitGraphEvent(r,e)}}},n.emitGraphEvent=function(t,e){this.graph.emit(t,e)},n._getDistanceToPress=function(t){return Math.pow(t.clientX-this._pressX,2)+Math.pow(t.clientY-this._pressY,2)},n._simulateEvents=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var r=this._dragEventObj.item,o=this._dragEventObj.shape;switch(t.type){case a.MOUSEDOWN:this._pressing=!0,this._button=t.button,this._pressX=t.clientX,this._pressY=t.clientY;break;case a.MOUSEMOVE:if(this._dragging){if(this._triggerEvent(a.DRAG,i.mix({},n,{button:this._button,currentItem:r,currentShape:o})),e.shape!==n.shape){var s=this._isItemChange(e,n);e.shape&&this._triggerEvent(a.DRAGLEAVE,i.mix({},n,{button:this._button,item:e.item,shape:e.shape,toItem:n.item,toShape:n.shape,currentItem:r,currentShape:o,_isItemChange:s})),n.shape&&this._triggerEvent(a.DRAGENTER,i.mix({},n,{button:this._button,currentItem:r,currentShape:o,fromItem:e.item,fromShape:e.shape,_isItemChange:s}))}}else this._pressing&&this._getDistanceToPress(t)>9&&(this._dragging=!0,this._dragEventObj=e,r=this._dragEventObj.item,o=this._dragEventObj.shape,this._triggerEvent(a.DRAGSTART,i.mix({},e,{button:this._button,currentItem:r,currentShape:o})));if(e.shape!==n.shape){var u=this._isItemChange(e,n);e.shape&&this._triggerEvent(a.MOUSELEAVE,i.mix({},n,{item:e.item,shape:e.shape,toItem:n.item,toShape:n.shape,_isItemChange:u})),n.shape&&this._triggerEvent(a.MOUSEENTER,i.mix({},n,{fromtItem:e.item,fromShape:e.shape,_isItemChange:u}))}break;case a.MOUSEUP:!this._dragging&&this._pressing?this._triggerEvent(a.CLICK,i.mix({},n,{button:this._button})):(this._triggerEvent(a.DROP,i.mix({},n,{button:this._button,currentItem:r,currentShape:o})),this._triggerEvent(a.DRAGEND,i.mix({},n,{button:this._button,currentItem:r,currentShape:o}))),this._pressing=!1,this._dragging=!1,this._dragEventObj={};break;default:return}},n._isItemChange=function(t,e){var n=t.shape,r=e.shape,a=n&&r&&(n.get("isItemChange")||r.get("isItemChange"));return a?a(r,n):i.isObject(t.item)&&i.isObject(e.item)?t.item.id!==e.item.id:t.item!==e.item},n._processEventObj=function(t){var e=this.graph.get("_canvas"),n=this._getEventObj(t,e);this._currentEventObj=n},n._parsePoint=function(t,e){return this.graph.getPointByCanvas({x:t,y:e})},n._getEventObj=function(t,e){var n=this.graph,r=t.clientX,i=t.clientY,a=e.getPointByClient(r,i),o=this._parsePoint(a.x,a.y),s=e.getShape(a.x,a.y,t),u=n.getItemByShape(s),c=e.get("pixelRatio");return{item:u,shape:s,x:o.x,y:o.y,domX:a.x/c,domY:a.y/c,domEvent:t}},e}(r);t.exports=u},function(t,e,n){var r={},i=n(698);r.INIT="_initEvents",r.CFG={keyboardEnable:!0},r.AUGMENT={_initEvents:function(){this.get("_controllers").events=new i({graph:this})}},t.exports=r},function(t,e,n){var r=n(26),i={};i.AUGMENT={find:function(t){return this.get("_itemMap")[t]},getNodes:function(){return this.get("_itemMap")._nodes},getEdges:function(){return this.get("_itemMap")._edges},getGroups:function(){return this.get("_itemMap")._groups},getGuides:function(){return this.get("_itemMap")._guides},getItems:function(){var t=this.get("_itemMap"),e=[];return r.each(t,function(t){t.type&&e.push(t)}),e},getItemByShape:function(t){return t?this.getItem(t.id):null},getItem:function(t){var e=this.get("_itemMap");return r.isObject(t)?t.destroyed&&(t=e[t.id]):t=e[t],t}},t.exports=i},function(t,e,n){var r=n(599),i=n(26),a=["color","shape","size","label","style"],o=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._init=function(){var t=this,e={};i.each(a,function(n){e[n]={},t[n]=function(r){return e[n].input=r,t}}),this.channels=e},n.addChannels=function(t){var e=this.channels;i.each(t,function(t,n){e[n]={input:t}})},n.mapping=function(t){var e=this.channels;i.each(e,function(e,n){i.isFunction(e.input)?t[n]=e.input(t):e.input&&(t[n]=e.input)})},e}(r);t.exports=o},function(t,e,n){var r=n(701),i={INIT:"_initMapper"};i.AUGMENT={_initMapper:function(){var t=this.get("_controllers");t.nodeMapper=new r({graph:this}),t.edgeMapper=new r({graph:this}),t.groupMapper=new r({graph:this}),t.guideMapper=new r({graph:this})},node:function(t){var e=this._getController("nodeMapper");return t&&e.addChannels(t),e},edge:function(t){var e=this._getController("edgeMapper");return t&&e.addChannels(t),e},group:function(t){var e=this._getController("groupMapper");return t&&e.addChannels(t),this._getController("groupMapper")},guide:function(t){var e=this._getController("guideMapper");return t&&e.addChannels(t),this._getController("guideMapper")}},t.exports=i},function(t,e,n){var r=function(t){function e(){return t.apply(this,arguments)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n.getDefaultCfg=function(){return{graph:null,auto:!0,processor:null}},n._init=function(){var t=this,e=this.graph;e.on("afteritemdraw",function(t){var e=t.item,n=e.getKeyShape(),r=e.getModel();if(e.isEdge)r.lineWidth=n.attr("lineWidth");else if(e.isNode||e.isGroup){var i=e.getBBox();r.width=i.width,r.height=i.height}}),e.on("afterchange",function(n){var r=n.action;"once"===t.auto?"changeData"===r&&(e.destroyed||e.preventAnimate(function(){t.layout()})):t.auto&&!e.destroyed&&e.preventAnimate(function(){t.layout()})})},n.changeLayout=function(t){this.processor=t,this.layout()},n.layout=function(){var t=this.graph,e=this.getLayoutProcessor();t.emit("beforelayout");var n=t.getNodes().filter(function(t){return t.isVisible()}).map(function(t){return t.getModel()}),r=t.getEdges().filter(function(t){return t.isVisible()}).map(function(t){return t.getModel()}),i=t.getGroups().filter(function(t){return t.isVisible()}).map(function(t){return t.getModel()});t._executeLayout(e,n,r,i),t.updateNodePosition(),t.emit("afterlayout")},n.getLayoutProcessor=function(){return this.processor?this.processor:this.processer},e}(n(599));t.exports=r},function(t,e,n){var r=n(26),i=n(703),a={CFG:{layout:void 0},INIT:"_initLayout"};a.AUGMENT={_initLayout:function(){var t=this.get("_controllers"),e=this._getLayoutCfg();e&&(t.layout=new i(r.mix({graph:this},e)))},_getLayoutCfg:function(){var t=this.get("layout");return r.isPlainObject(t)?t:r.isFunction(t)||r.isObject(t)?{processor:t}:null},layout:function(){return this._getController("layout").layout(),this},updateNodePosition:function(t){var e=this.getGuides(),n=[],i=[];return this.emit("beforeupdatenodeposition"),t?(t.forEach(function(t){t.getEdges().forEach(function(t){i.push(t)});var e=t.getParent();e&&n.push(e)}),i=r.uniq(i),n=r.uniq(n)):(t=this.getNodes(),n=this.getGroups(),i=this.getEdges()),t.forEach(function(t){t.layoutUpdate()}),n.forEach(function(t){t.layoutUpdate()}),i.forEach(function(t){t.layoutUpdate()}),e.forEach(function(t){t.layoutUpdate()}),this.emit("afterupdatenodeposition"),this},changeLayout:function(t){return this._getController("layout").changeLayout(t),this},getLayout:function(){return this._getController("layout").getLayoutProcessor()}},t.exports=a},function(t,e,n){!function(e){"use strict";var n=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(e){var n=t(e).toLowerCase();return function(){var t="application/font-woff";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}()[n]||""},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise(function(e){t.toBlob(e)}):function(t){return new Promise(function(e){for(var n=window.atob(t.toDataURL().split(",")[1]),r=n.length,i=new Uint8Array(r),a=0;a<r;a++)i[a]=n.charCodeAt(a);e(new Blob([i],{type:"image/png"}))})}(t)},resolveUrl:function(t,e){var n=document.implementation.createHTMLDocument(),r=n.createElement("base");n.head.appendChild(r);var i=n.createElement("a");return n.body.appendChild(i),r.href=e,i.href=t,i.href},getAndEncode:function(t){var e=3e4;s.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise(function(n){var r,i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4!==i.readyState)return;if(200!==i.status)return void(r?n(r):o("cannot fetch resource: "+t+", status: "+i.status));var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];n(t)},e.readAsDataURL(i.response)},i.ontimeout=function(){r?n(r):o("timeout of "+e+"ms occured while fetching resource: "+t)},i.responseType="blob",i.timeout=e,i.open("GET",t,!0),i.send(),s.impl.options.imagePlaceholder){var a=s.impl.options.imagePlaceholder.split(/,/);a&&a[1]&&(r=a[1])}function o(t){console.error(t),n("")}})},uid:function(){var t=0;return function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}}(),delay:function(t){return function(e){return new Promise(function(n){setTimeout(function(){n(e)},t)})}},asArray:function(t){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src=t})},width:function(t){var n=e(t,"border-left-width"),r=e(t,"border-right-width");return t.scrollWidth+n+r},height:function(t){var n=e(t,"border-top-width"),r=e(t,"border-bottom-width");return t.scrollHeight+n+r}};function t(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function e(t,e){var n=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(n.replace("px",""))}}(),r=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,n,a){return e(t)?Promise.resolve(t).then(r).then(function(e){var r=Promise.resolve(t);return e.forEach(function(t){r=r.then(function(e){return i(e,t,n,a)})}),r}):Promise.resolve(t)},shouldProcess:e,impl:{readUrls:r,inline:i}};function e(e){return-1!==e.search(t)}function r(e){for(var r,i=[];null!==(r=t.exec(e));)i.push(r[1]);return i.filter(function(t){return!n.isDataUrl(t)})}function i(t,e,r,i){return Promise.resolve(e).then(function(t){return r?n.resolveUrl(t,r):t}).then(i||n.getAndEncode).then(function(t){return n.dataAsUrl(t,n.mimeType(e))}).then(function(r){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+n.escape(t)+")(['\"]?\\))","g")}(e),"$1"+r+"$3")})}}(),i=function(){return{resolveAll:function(){return t(document).then(function(t){return Promise.all(t.map(function(t){return t.resolve()}))}).then(function(t){return t.join("\n")})},impl:{readAll:t}};function t(){return Promise.resolve(n.asArray(document.styleSheets)).then(function(t){var e=[];return t.forEach(function(t){try{n.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}}),e}).then(function(t){return t.filter(function(t){return t.type===CSSRule.FONT_FACE_RULE}).filter(function(t){return r.shouldProcess(t.style.getPropertyValue("src"))})}).then(function(e){return e.map(t)});function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return r.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),a=function(){return{inlineAll:function e(i){if(!(i instanceof Element))return Promise.resolve(i);return function(t){var e=t.style.getPropertyValue("background");return e?r.inlineAll(e).then(function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))}).then(function(){return t}):Promise.resolve(t)}(i).then(function(){return i instanceof HTMLImageElement?t(i).inline():Promise.all(n.asArray(i.childNodes).map(function(t){return e(t)}))})},impl:{newImage:t}};function t(t){return{inline:function(e){return n.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||n.getAndEncode).then(function(e){return n.dataAsUrl(e,n.mimeType(t.src))}).then(function(e){return new Promise(function(n,r){t.onload=n,t.onerror=r,t.src=e})})}}}}(),o={imagePlaceholder:void 0,cacheBust:!1},s={toSvg:u,toPng:function(t,e){return c(t,e||{}).then(function(t){return t.toDataURL()})},toJpeg:function(t,e){return c(t,e=e||{}).then(function(t){return t.toDataURL("image/jpeg",e.quality||1)})},toBlob:function(t,e){return c(t,e||{}).then(n.canvasToBlob)},toPixelData:function(t,e){return c(t,e||{}).then(function(e){return e.getContext("2d").getImageData(0,0,n.width(t),n.height(t)).data})},impl:{fontFaces:i,images:a,util:n,inliner:r,options:{}}};function u(t,e){return function(t){void 0===t.imagePlaceholder?s.impl.options.imagePlaceholder=o.imagePlaceholder:s.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?s.impl.options.cacheBust=o.cacheBust:s.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then(function(t){return function(t,e,r){if(!r&&e&&!e(t))return Promise.resolve();return Promise.resolve(t).then(function(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)}).then(function(r){return function(t,e,r){var i=t.childNodes;return 0===i.length?Promise.resolve(e):function(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return h(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}(e,n.asArray(i),r).then(function(){return e})}(t,r,e)}).then(function(e){return function(t,e){return e instanceof Element?Promise.resolve().then(function(){!function(t,e){t.cssText?e.cssText=t.cssText:function(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(t,e)}(window.getComputedStyle(t),e.style)}).then(function(){[":before",":after"].forEach(function(r){!function(r){var i=window.getComputedStyle(t,r),a=i.getPropertyValue("content");if(""!==a&&"none"!==a){var o=n.uid();e.className=e.className+" "+o;var s=document.createElement("style");s.appendChild(function(t,e,r){var i="."+t+":"+e,a=r.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(r):function(t){return n.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(r);return document.createTextNode(i+"{"+a+"}")}(o,r,i)),e.appendChild(s)}}(r)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)}))}).then(function(){return e}):e}(t,e)})}(t,e.filter,!0)}).then(f).then(l).then(function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach(function(n){t.style[n]=e.style[n]});return t}).then(function(r){return function(t,e,r){return Promise.resolve(t).then(function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)}).then(n.escapeXhtml).then(function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"}).then(function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+r+'">'+t+"</svg>"}).then(function(t){return"data:image/svg+xml;charset=utf-8,"+t})}(r,e.width||n.width(t),e.height||n.height(t))})}function c(t,e){return u(t,e).then(n.makeImage).then(n.delay(100)).then(function(r){var i=function(t){var r=document.createElement("canvas");if(r.width=e.width||n.width(t),r.height=e.height||n.height(t),e.bgcolor){var i=r.getContext("2d");i.fillStyle=e.bgcolor,i.fillRect(0,0,r.width,r.height)}return r}(t);return i.getContext("2d").drawImage(r,0,0),i})}function h(t,e,r){if(!r&&e&&!e(t))return Promise.resolve();return Promise.resolve(t).then(i).then(function(n){return a(t,n,e)}).then(function(e){return o(t,e)});function i(t){return t instanceof HTMLCanvasElement?n.makeImage(t.toDataURL()):t.cloneNode(!1)}function a(t,e,r){var i=t.childNodes;return 0===i.length?Promise.resolve(e):function(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return h(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}(e,n.asArray(i),r).then(function(){return e});function a(t,e,n){var r=Promise.resolve();return e.forEach(function(e){r=r.then(function(){return h(e,n)}).then(function(e){e&&t.appendChild(e)})}),r}}function o(t,e){return e instanceof Element?Promise.resolve().then(function(){!function(t,e){t.cssText?e.cssText=t.cssText:function(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}(t,e)}(window.getComputedStyle(t),e.style)}).then(function(){[":before",":after"].forEach(function(r){!function(r){var i=window.getComputedStyle(t,r),a=i.getPropertyValue("content");if(""===a||"none"===a)return;var o=n.uid();e.className=e.className+" "+o;var s=document.createElement("style");s.appendChild(function(t,e,r){var i="."+t+":"+e,a=r.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(r):function(t){return n.asArray(t).map(function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}).join("; ")+";"}(r);return document.createTextNode(i+"{"+a+"}")}(o,r,i)),e.appendChild(s)}(r)})}).then(function(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value);t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}).then(function(){if(!(e instanceof SVGElement))return;if(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(e instanceof SVGRectElement))return;["width","height"].forEach(function(t){var n=e.getAttribute(t);n&&e.style.setProperty(t,n)})}).then(function(){return e}):e;function r(){function r(t,e){if(t.cssText)e.cssText=t.cssText;else r(t,e);function r(t,e){n.asArray(t).forEach(function(n){e.setProperty(n,t.getPropertyValue(n),t.getPropertyPriority(n))})}}r(window.getComputedStyle(t),e.style)}function i(){function r(r){var i=window.getComputedStyle(t,r),a=i.getPropertyValue("content");if(a===""||a==="none")return;var o=n.uid();e.className=e.className+" "+o;var s=document.createElement("style");function u(t,e,r){var i="."+t+":"+e,a=r.cssText?o(r):s(r);return document.createTextNode(i+"{"+a+"}");function o(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}function s(t){return n.asArray(t).map(e).join("; ")+";";function e(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}}}s.appendChild(u(o,r,i)),e.appendChild(s)}[":before",":after"].forEach(function(t){r(t)})}function a(){if(t instanceof HTMLTextAreaElement)e.innerHTML=t.value;if(t instanceof HTMLInputElement)e.setAttribute("value",t.value)}function o(){if(!(e instanceof SVGElement))return;if(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),!(e instanceof SVGRectElement))return;["width","height"].forEach(function(t){var n=e.getAttribute(t);if(!n)return;e.style.setProperty(t,n)})}}}function f(t){return i.resolveAll().then(function(e){var n=document.createElement("style");return t.appendChild(n),n.appendChild(document.createTextNode(e)),t})}function l(t){return a.inlineAll(t).then(function(){return t})}t.exports=s}()},function(t,e,n){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(26),a=n(248),o=n(705),s=function(){function t(t){this.options=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({graph:null,width:null,height:null,canvas:null,beforeTransform:function(){},afterTransform:function(){},drawCount:0},t)}var e=t.prototype;return e.getCanvas=function(){var t=this.options,e=t.width,n=t.height,r=t.canvas;if(!r){var o=i.createDOM("<canvas></canvas>");r=new a.Canvas({containerDOM:o,width:e,height:n})}return r.drawCount||(r.drawCount=0),r},e.drawInner=function(t,e){var n=this.options.graph,r=n.getCanvas(),i=n.get("renderer"),a=t.drawCount;if("svg"===i){var s=[];r.deepEach(function(t){"dom"===t.get("type")&&s.push(t)}),s.length>0?s.forEach(function(n){var r=n.get("el");if(r){n.domImageOnload=!1;var i=n.attr("width"),u=n.attr("height");o.toPng(r,{width:i,height:u}).then(function(r){var i=new Image;i.src=r,i.onload=function(){if(a===t.drawCount-1){n.domImage=i,n.domImageOnload=!0;for(var r=0;r<s.length;r++){var o=s[r];if(!o.domImageOnload||o.get("destroyed"))break;o.domImageOnload&&r===s.length-1&&e()}}}})}}):e()}else e();t.drawCount+=1},e.toCanvas=function(){var t=this.options,e=t.graph,n=t.width,r=t.height,a=t.beforeTransform,o=t.limitRatio,s=t.afterTransform,u=this.getCanvas(),c=e.getBBox(),h=i.clone(e.getMatrix()),f=e.getFitViewPadding(),l=e.getCanvas(),p=i.getAutoZoomMatrix({minX:0,minY:0,maxX:n,maxY:r},c,f,o);return this.drawInner(u,function(){var t=l.get("children");u.set("children",t),a(p,h),e.setMatrix(p),u.draw(),e.setMatrix(h),s(p,h)}),u.matrix=p,u.get("el")},t}();t.exports=s},function(t,e,n){var r=n(26),i=function(t){function e(e){var n={type:"guide",isGuide:!0,zIndex:4};return r.mix(n,e),t.call(this,n)||this}return function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t),e}(n(608));t.exports=i},function(t,e,n){var r=n(26),i=function(t){function e(e){var n={type:"group",isNode:!1,isGroup:!0,zIndex:1};return r.mix(n,e),t.call(this,n)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._beforeDraw=function(){this.deepEach(function(t,e){e&&(t.zIndex=e.zIndex+1),t.updateCollapsedParent(),t.collapsedParent?t.hide():t.show()}),this.getInnerEdges().forEach(function(t){t.linkedItemVisible()?t.show():t.hide()}),t.prototype._beforeDraw.call(this)},n.updatePosition=function(){},n._shouldDraw=function(){return!0},n.getCrossEdges=function(){var t=[],e=this.getInnerEdges();this.deepEach(function(e){t.push(e.id)});var n=e.filter(function(e){var n=e.getModel();return-1===t.indexOf(n.source)||-1===t.indexOf(n.target)});return r.uniq(n)},n.getInnerEdges=function(){var t=[];return this.deepEach(function(e){e.getEdges().forEach(function(e){t.push(e)})}),r.uniq(t)},n.getChildrenBBox=function(){var t=this.getChildren().map(function(t){return t.getGraphicGroup()});return r.getChildrenBBox(t)},e}(n(624));t.exports=i},function(t,e,n){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(26),a=function(t){function e(e){var n={type:"edge",isEdge:!0,zIndex:2};return i.mix(n,e),t.call(this,n)||this}!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(e,t);var n=e.prototype;return n._init=function(){t.prototype._init.call(this)},n._beforeDraw=function(){var e=this.model,n=this.itemMap;i.isObject(e.source)?this.source=e.source:this.source=n[e.source],i.isObject(e.target)?this.target=e.target:this.target=n[e.target],t.prototype._beforeDraw.call(this)},n._afterDraw=function(){this.linkedItemVisible()||this.hide(),this._addArrow(),t.prototype._afterDraw.call(this)},n._addArrow=function(){var t=this.model,e=this.keyShape;if("path"===e.get("type")){var n=this.shapeObj,r=e.attr("endArrow"),i=e.attr("startArrow"),a=t.endArrow||r,o=t.startArrow||i;i&&e.attr("startArrow",!1),r&&e.attr("endArrow",!1),a&&this._drawArrow(n.endArrow,"end"),o&&this._drawArrow(n.startArrow,"start")}},n._drawArrow=function(t,e){var n=t.path,a=t.shorten,o=t.tangent,s=t.ratio,u=t.style;o=o(this),a=a(this),n=n(this),u=u(this),s=s();var c=this.group,h=this.keyShape,f=i.parsePathString(h.attr("path")),l=f[f.length-1],p=f[0],d=h.getPoint(s);if(d&&!isNaN(d.x)){var g=c.addShape("path",{attrs:function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({path:n},u)}),v=o[1][0]-o[0][0],m=o[1][1]-o[0][1],x=a/Math.sqrt(v*v+m*m),y=[-v*x,-m*x],b=0,M=Math.atan(v/m);0===m&&v<0?b=Math.PI:v>0&&m>0?b=Math.PI/2-M:v<0&&m<0?b=-Math.PI/2-M:v>=0&&m<0?b=-M-Math.PI/2:v<=0&&m>0&&(b=Math.PI/2-M),g.rotate(b),g.translate(d.x,d.y),"end"===e?(l[l.length-1]=y[1]+d.y,l[l.length-2]=y[0]+d.x):(p[p.length-1]=y[1]+d.y,p[p.length-2]=y[0]+d.x),h.attr("path",f),this[e+"Arrow"]=g}},n._getControlPoints=function(){var t=this.model.controlPoints;return i.isArray(t)?t:[]},n._shouldDraw=function(){return t.prototype._shouldDraw.call(this)&&this.linkedItemVisible()},n._getPoint=function(t){if(t.isItem){var e=t.getBBox();return{x:e.centerX,y:e.centerY}}return{x:t.x,y:t.y}},n.linkedItemVisible=function(){var t=this.source,e=this.target;return i.isPlainObject(t)||i.isPlainObject(e)||t.isVisible()||e.isVisible()||t.collapsedParent!==e.collapsedParent},n.getSource=function(){var t=this.source,e=t.collapsedParent,n=this.itemMap;return e?n[e.id]:t},n.getTarget=function(){var t=this.target,e=t.collapsedParent,n=this.itemMap;return e?n[e.id]:t},n.getPoints=function(){var t=this.getSource(),e=this.getTarget(),n=this.model,r=this._getControlPoints(),a=this._getPoint(t),o=this._getPoint(e),s=[a].concat(r).concat([o]),u=s.length;if(t.isItem){var c=i.isNumber(this.model.sourceAnchor)&&t.id===n.source?this.model.sourceAnchor:s[1],h=t.getLinkPoints(c);s[0]=h[0]}if(e.isItem){var f=i.isNumber(this.model.targetAnchor)&&e.id===n.target?this.model.targetAnchor:s[u-2],l=e.getLinkPoints(f);s[u-1]=l[0]}return s},n.destroy=function(){var e=this.itemMap,n=this.model,r=e[n.source],a=e[n.target];r&&r.isItem&&i.Array.remove(r.edges,this),a&&a.isItem&&i.Array.remove(a.edges,this),t.prototype.destroy.call(this)},e}(n(608));t.exports=a},function(t,e,n){t.exports={Node:n(624),Edge:n(709),Group:n(708),Guide:n(707)}},function(t,e,n){var r;
/*!
 * EventEmitter v5.2.5 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - http://oli.me.uk/
 * @preserve
 */!function(e){"use strict";function i(){}var a=i.prototype,o=e.EventEmitter;function s(t,e){for(var n=t.length;n--;)if(t[n].listener===e)return n;return-1}function u(t){return function(){return this[t].apply(this,arguments)}}a.getListeners=function(t){var e,n,r=this._getEvents();if(t instanceof RegExp)for(n in e={},r)r.hasOwnProperty(n)&&t.test(n)&&(e[n]=r[n]);else e=r[t]||(r[t]=[]);return e},a.flattenListeners=function(t){var e,n=[];for(e=0;e<t.length;e+=1)n.push(t[e].listener);return n},a.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&((e={})[t]=n),e||n},a.addListener=function(t,e){if(!function t(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&t(e.listener)}(e))throw new TypeError("listener must be a function");var n,r=this.getListenersAsObject(t),i="object"==typeof e;for(n in r)r.hasOwnProperty(n)&&-1===s(r[n],e)&&r[n].push(i?e:{listener:e,once:!1});return this},a.on=u("addListener"),a.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},a.once=u("addOnceListener"),a.defineEvent=function(t){return this.getListeners(t),this},a.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},a.removeListener=function(t,e){var n,r,i=this.getListenersAsObject(t);for(r in i)i.hasOwnProperty(r)&&-1!==(n=s(i[r],e))&&i[r].splice(n,1);return this},a.off=u("removeListener"),a.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},a.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},a.manipulateListeners=function(t,e,n){var r,i,a=t?this.removeListener:this.addListener,o=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(r=n.length;r--;)a.call(this,e,n[r]);else for(r in e)e.hasOwnProperty(r)&&(i=e[r])&&("function"==typeof i?a.call(this,r,i):o.call(this,r,i));return this},a.removeEvent=function(t){var e,n=typeof t,r=this._getEvents();if("string"===n)delete r[t];else if(t instanceof RegExp)for(e in r)r.hasOwnProperty(e)&&t.test(e)&&delete r[e];else delete this._events;return this},a.removeAllListeners=u("removeEvent"),a.emitEvent=function(t,e){var n,r,i,a,o=this.getListenersAsObject(t);for(a in o)if(o.hasOwnProperty(a))for(n=o[a].slice(0),i=0;i<n.length;i++)!0===(r=n[i]).once&&this.removeListener(t,r.listener),r.listener.apply(this,e||[])===this._getOnceReturnValue()&&this.removeListener(t,r.listener);return this},a.trigger=u("emitEvent"),a.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},a.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},a._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},a._getEvents=function(){return this._events||(this._events={})},i.noConflict=function(){return e.EventEmitter=o,i},void 0===(r=function(){return i}.call(e,n,e,t))||(t.exports=r)}("undefined"!=typeof window?window:this||{})},function(t,e,n){var r=n(26),i=function(t){!function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}(n,t);var e=n.prototype;function n(e){var n,i=(n=t.call(this)||this).getDefaultCfg();return n._cfg=r.mix({},i,e),n}return e.getDefaultCfg=function(){return{}},e.get=function(t){return this._cfg[t]},e.set=function(t,e){this._cfg[t]=e},e.destroy=function(){this._cfg={},this.removeAllListeners(),this.destroyed=!0},n}(n(711));t.exports=i},function(t,e,n){var r=n(26),i=n(248),a=function(){};r.augment(a,{drawInner:function(t){var e=r.clone(this.getTotalMatrix()),n=this._attrs,i=n.x,a=n.y,o=n.width,s=n.height;t.setTransform(e[0],e[1],e[3],e[4],e[6],e[7]),t.drawImage(this.domImage,i,a,o,s)}}),r.mixin(i.Dom,[a]),t.exports=a},function(t,e,n){var r=n(26),i=n(248),a=function(){};r.augment(a,{hasClass:function(t){var e=this.get("class");return!(!e||-1===e.indexOf(t))}}),r.mixin(i.Shape,[a]),t.exports=a},function(t,e,n){var r=n(248),i=n(26),a=function(){};i.augment(a,{findByClass:function(t){var e=[];return this.deepEach(function(n){n.hasClass(t)&&e.push(n)}),e},hasClass:function(t){var e=this.get("class");return!(!e||-1===e.indexOf(t))},deepEach:function(t,e){i.traverseTree(this,t,function(t){return t.get("children")},e)},sort:function(){var t=this.get("children");this.set("children",i.radixSort(t,function(t){return t.get("zIndex")}))},sortBy:function(t){var e=this.get("children");this.set("children",i.radixSort(e,t))},clear:function(t){for(var e=this._cfg.children,n=e.length-1;n>=0;n--)e[n].remove(t);return this._cfg.children=[],this}}),i.mixin(r.Group,[a]),t.exports=a},function(t,e,n){n(258).registerGuide("common",{draw:function(){console.warn("do not have this guide, please register one")}})},function(t,e,n){t.exports={common:n(716)}},function(t,e,n){function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=n(258),a=n(26),o=n(247);i.registerGroup("common",{draw:function(t){return t.getModel().collapsed?this.drawCollapsed(t):this.drawExpanded(t)},defaultWidth:184,defaultHeight:40,getLabel:function(t){return t.getModel().label},drawLabel:function(t,e,n){var r=this.getLabel(t);if(r){var i=t.getGraphicGroup(),s=[8,8];e+=s[0],n+=s[1];var u=t.getModel(),c=u.labelOffsetX,h=u.labelOffsetY,f=u.labelRotate;e=c?c+e:e,n=h?h+n:n;var l=a.mix(!0,{},o.labelStyle,{x:e,y:n,textAlign:"left",textBaseline:"top"});a.isObject(r)?a.mix(l,r):l.text=r;var p=i.addShape("text",{class:"label",attrs:l});if(f){var d=p.getBBox(),g=(d.maxX+d.minX)/2,v=(d.maxY+d.minY)/2;p.transform([["t",-g,-v],["r",f,f],["t",g,v]])}}},drawKeyShape:function(t,e){var n=e.x,r=e.y,i=e.width,s=e.height,u=t.getModel(),c=t.getGraphicGroup(),h=a.mix({},o.groupStyle,u.style),f=a.getRectPath(n,r,i,s,h.radius);return t.lastChildrenBox=e,c.addShape("path",{attrs:a.mix({},h,{path:f})})},getChildrenBBox:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),i.forEach(function(e){r(t,e,n[e])})}return t}({},t.lastChildrenBox),n=t.getModel();if(t.getChildren().length>0){var i=t.getChildrenBBox();e.x=i.minX-o.groupBackgroundPadding[3],e.y=i.minY-o.groupBackgroundPadding[0],e.width=i.maxX-i.minX+o.groupBackgroundPadding[3]+o.groupBackgroundPadding[1],e.height=i.maxY-i.minY+o.groupBackgroundPadding[0]+o.groupBackgroundPadding[2]}else e.width=this.defaultWidth,e.height=this.defaultHeight;return a.isNil(e.x)&&!a.isNil(n.x)&&(e.x=n.x),a.isNil(e.y)&&!a.isNil(n.y)&&(e.y=n.y),e},drawExpanded:function(t){var e=this.getChildrenBBox(t),n=this.drawKeyShape(t,e);return this.drawLabel(t,e.x,e.y),n},drawCollapsed:function(t){var e=this.getChildrenBBox(t);e.width=this.defaultWidth,e.height=this.defaultHeight;var n=this.drawKeyShape(t,e);return this.drawLabel(t,e.x,e.y),n},anchor:{intersectBox:"rect"}})},function(t,e,n){t.exports={common:n(718)}},function(t,e,n){function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){i(t,e,n[e])})}return t}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var a=n(258),o=n(26),s=n(247),u={path:function(t){var e=t.getKeyShape().attr("lineWidth"),n=10*(e=e>3?e:3)/3,r=4*e/3,i=4*e;return[["M",-n,r],["L",0,0],["L",-n,-r],["A",i,i,0,0,1,-n,r],["Z"]]},shorten:function(t){var e=t.getKeyShape().attr("lineWidth");return 3.1*(e>3?e:3)},style:function(t){var e=t.getKeyShape().attr();return{fillOpacity:e.strokeOpacity,fill:e.stroke}}};a.registerEdge("common",{draw:function(t){var e=this.drawKeyShape(t);return this.drawLabel(t,e),e},drawKeyShape:function(t){var e=t.getGraphicGroup(),n=this.getStyle(t),r=this.getPath(t);return e.addShape("path",{attrs:o.mix({},n,{path:r})})},getStyle:function(t){var e=t.getModel();return o.mix(!0,{},{stroke:e.color||"#A3B1BF",strokeOpacity:.92,lineAppendWidth:4,lineWidth:e.size||1},e.style)},getPath:function(t){var e=t.getPoints();return o.pointsToPolygon(e)},getLabel:function(t){return t.getModel().label},getDefaultLabelRectStyle:function(){return{fill:"white"}},getDefaultLabelRectPadding:function(){return o.toAllPadding([4,8])},drawLabel:function(t,e){var n=this.getLabel(t),r=t.getGraphicGroup(),i=t.getModel(),a=i.labelOffsetX,u=i.labelOffsetY,c=i.labelRotate;if(n){var h=e.getPoint(.5);if(!h)return;h.x=a?h.x+a:h.x,h.y=u?h.y+u:h.y;var f=o.mix(!0,{},s.labelStyle,h);o.isObject(n)?o.mix(f,n):f.text=n,n=r.addShape("text",{class:"label",attrs:f});var l=this.getDefaultLabelRectPadding(t),p=this.getDefaultLabelRectStyle(t),d=n.getBBox(),g=i.labelRectStyle?o.mix({},p,i.labelRectStyle):p,v=r.addShape("rect",{attrs:o.mix({},g,{x:d.minX-l[3],y:d.minY-l[0],width:d.maxX-d.minX+l[1]+l[3],height:d.maxY-d.minY+l[0]+l[2]})});if(c){var m=(d.maxX+d.minX)/2,x=(d.maxY+d.minY)/2;n.transform([["t",-m,-x],["r",c,c],["t",m,x]]),v.transform([["t",-m,-x],["r",c,c],["t",m,x]])}o.toFront(n)}},startArrow:r({},u,{tangent:function(t){return t.getKeyShape().getStartTangent()},ratio:function(){return 0}}),endArrow:r({},u,{tangent:function(t){return t.getKeyShape().getEndTangent()},ratio:function(){return 1}})})},function(t,e,n){t.exports={common:n(720)}},function(t,e,n){var r=n(258),i=n(26);r.registerNode("html",{getHtml:function(t){return t.getModel().html},cssSize:!0,draw:function(t){var e=i.createDOM('<div class="g6-html-node-container"></div>'),n=t.getGraphicGroup(),r=t.getGraph();if("svg"!==r.get("renderer"))throw new Error("please use svg renderer draw html element !");var a=r.getGraphContainer(),o=this.getSize(t),s=this.getStyle(t),u=this.cssSize,c=this.getHtml(t);c=i.createDOM(c),e.css({position:"absolute",padding:"0px",margin:"0px"}),e.appendChild(c),a.appendChild(e),u&&(o[0]=e.width(),o[1]=e.height());var h=-o[0]/2,f=-o[1]/2,l=o[0],p=o[1],d=n.addShape("rect",{attrs:i.mix({},s,{x:h,y:f,width:l,height:p})});return n.addShape("dom",{attrs:i.mix({x:h,y:f,width:l,height:p,html:e})}),d}})},function(t,e,n){var r=n(258),i=n(26),a=n(247);r.registerNode("common",{draw:function(t){var e=t.getGraphicGroup(),n=this.drawLabel(t),r=this.drawKeyShape(t);return n&&i.toFront(n,e),r},getSize:function(t){var e=t.getModel().size;return i.isArray(e)?e:i.isNumber(e)?[e,e]:[a.defaultNodeSize,a.defaultNodeSize]},getStyle:function(t){var e=t.getModel();return i.mix(!0,{lineWidth:1,fill:e.color||"#40a9ff",stroke:e.color||"#096dd9",fillOpacity:.92},e.style)},getLabel:function(t){return t.getModel().label},drawKeyShape:function(t){var e=t.getGraphicGroup(),n=this.getStyle(t),r=this.getPath(t);return e.addShape("path",{attrs:i.mix({},n,{path:r})})},drawLabel:function(t){var e=t.getGraphicGroup(),n=this.getLabel(t),r=t.getModel(),o=r.labelOffsetX,s=r.labelOffsetY,u=r.labelRotate;if(!i.isNil(n)){var c=i.mix(!0,{},a.labelStyle,{x:o||0,y:s||0});i.isObject(n)?i.mix(c,n):c.text=n;var h=e.addShape("text",{class:"label",attrs:c});return u&&h.rotate(u),h}},getPath:function(t){var e=this.getSize(t);return i.getEllipsePath(0,0,e[0]/2,e[1]/2)}})},function(t,e,n){t.exports={common:n(723),html:n(722)}},function(t,e,n){var r=n(682),i=n(257),a={getAutoZoomMatrix:function(t,e,n,i){var a=[1,0,0,0,1,0,0,0,1],o=t.maxX-t.minX,s=t.maxY-t.minY,u=(e.maxX+e.minX)/2,c=(e.maxY+e.minY)/2,h=o-n[1]-n[3],f=s-n[0]-n[2],l=e.maxX-e.minX,p=e.maxY-e.minY,d=Math.min(f/p,h/l);return i&&(d=i(d)),r.mat3.translate(a,a,[-u,-c]),r.mat3.scale(a,a,[d,d]),r.mat3.translate(a,a,[o/2,s/2]),a},getNineBoxPosition:function(t,e,n,r,i){var a={};switch(t){case"tl":a.y=e.x+i[0],a.x=e.y+i[3];break;case"lc":a.y=(e.height-r)/2,a.x=i[3];break;case"bl":a.y=e.height-r-i[2],a.x=i[3];break;case"cc":a.y=(e.height-r)/2,a.x=(e.width-n)/2;break;case"tc":a.y=i[0],a.x=(e.width-n)/2;break;case"tr":a.y=i[0],a.x=e.width-n-i[1];break;case"rc":a.y=(e.height-r)/2,a.x=e.width-n-i[1];break;case"br":a.y=e.height-r-i[2],a.x=e.width-n-i[1];break;case"bc":a.y=e.height-r-i[2],a.x=(e.width-n)/2;break;default:a.y=e.x+i[0],a.x=e.y+i[3]}return a.x+=e.x,a.y+=e.y,a},getTotalBBox:function(t){var e=1/0,n=-1/0,r=1/0,i=-1/0;return t.forEach(function(t){t.minX<e&&(e=t.minX),t.maxX>n&&(n=t.maxX),t.minY<r&&(r=t.minY),t.maxY>i&&(i=t.maxY)}),{minX:e,minY:r,maxX:n,maxY:i,width:n-e,height:i-r}},getChildrenBBox:function(t){var e=1/0,n=-1/0,r=1/0,o=-1/0;i.each(t,function(t){var i=t.isGroup?a.getChildrenBBox(t.get("children")):t.getBBox();if(!i)return!0;var s=[i.minX,i.minY,1],u=[i.minX,i.maxY,1],c=[i.maxX,i.minY,1],h=[i.maxX,i.maxY,1];t.apply(s),t.apply(u),t.apply(c),t.apply(h);var f=Math.min(s[0],u[0],c[0],h[0]),l=Math.max(s[0],u[0],c[0],h[0]),p=Math.min(s[1],u[1],c[1],h[1]),d=Math.max(s[1],u[1],c[1],h[1]);f<e&&(e=f),l>n&&(n=l),p<r&&(r=p),d>o&&(o=d)});var s={minX:e,minY:r,maxX:n,maxY:o};return s.x=s.minX,s.y=s.minY,s.width=s.maxX-s.minX,s.height=s.maxY-s.minY,s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2,s},getBBox:function(t,e){var n,i=t.getBBox(),a={x:i.minX,y:i.minY},o={x:i.maxX,y:i.maxY};if(e.isGroup){for(n=t;n!==e;){var s=n.getMatrix();a=r.applyMatrix(a,s),o=r.applyMatrix(o,s),n=n.getParent()}var u=n.getMatrix();a=r.applyMatrix(a,u),o=r.applyMatrix(o,u)}else a=r.applyMatrix(a,e),o=r.applyMatrix(o,e);return{minX:a.x,minY:a.y,maxX:o.x,maxY:o.y}},toBack:function(t){t.toBack()},toFront:function(t){t.toFront()}};t.exports=a},function(t,e,n){var r=n(257);t.exports={isNode:function(t){return t&&r.isObject(t)&&"node"===t.type},isEdge:function(t){return t&&r.isObject(t)&&"edge"===t.type},isGroup:function(t){return t&&r.isObject(t)&&"group"===t.type}}},function(t,e,n){var r=n(257),i={};r.mix(i,{addEventListener:function(t,e,n){return t.attachEvent?(t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}):t.addEventListener?(t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}}):void 0},createDOM:function(t,e){var n;return(n=r.isString(t)?r.createDom(t):t).bbox=n.getBoundingClientRect(),n.hide=function(){return n.style.visibility="hidden",n},n.show=function(){return n.style.visibility="visible",n},n.css=function(t){return r.modifyCSS(n,t),n},n.width=function(){return r.getWidth(n)},n.height=function(){return r.getHeight(n)},n.destroy=function(){n.parentNode&&n.parentNode.removeChild(n)},n.on=function(t,e){n.addEventListener(t,e)},n.off=function(t,e){n.removeEventListener(t,e)},n.css(e),n},initDOMContainer:function(t,e){if(!t)throw new Error("please set the container for the "+e+" !");return r.isString(t)&&(t=document.getElementById(t)),t}}),t.exports=i},function(t,e){var n={svg:"svg",circle:"circle",rect:"rect",text:"text",path:"path",foreignObject:"foreignObject",polygon:"polygon",ellipse:"ellipse",image:"image"};t.exports=function(t,e,r){var i=r.target||r.srcElement;if(!n[i.tagName]){for(var a=i.parentNode;a&&!n[a.tagName];)a=a.parentNode;i=a}return this._cfg.el===i?this:this.find(function(t){return t._cfg&&t._cfg.el===i})}},function(t,e,n){var r=n(19),i=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,a=function(){function t(t){var e=document.createElementNS("http://www.w3.org/2000/svg","pattern");e.setAttribute("patternUnits","userSpaceOnUse");var n=document.createElementNS("http://www.w3.org/2000/svg","image");e.appendChild(n);var a=r.uniqueId("pattern_");e.id=a,this.el=e,this.id=a,this.cfg=t;var o=i.exec(t)[2];n.setAttribute("href",o);var s=new Image;function u(){console.log(s.width,s.height),e.setAttribute("width",s.width),e.setAttribute("height",s.height)}return o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o,s.complete?u():(s.onload=u,s.src=s.src),this}return t.prototype.match=function(t,e){return this.cfg===e},t}();t.exports=a},function(t,e,n){var r=n(19),i=function(){function t(t){this.type="clip";var e=document.createElementNS("http://www.w3.org/2000/svg","clipPath");this.el=e,this.id=r.uniqueId("clip_"),e.id=this.id;var n=t._cfg.el;return e.appendChild(n.cloneNode(!0)),this.cfg=t,this}var e=t.prototype;return e.match=function(){return!1},e.remove=function(){var t=this.el;t.parentNode.removeChild(t)},t}();t.exports=i},function(t,e,n){var r=n(19),i=function(){function t(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","marker"),i=r.uniqueId("marker_");n.setAttribute("id",i);var a=document.createElementNS("http://www.w3.org/2000/svg","path");return a.setAttribute("stroke","none"),a.setAttribute("fill",t.stroke||"#000"),n.appendChild(a),n.setAttribute("overflow","visible"),n.setAttribute("orient","auto-start-reverse"),this.el=n,this.child=a,this.id=i,this.cfg=t["marker-start"===e?"startArrow":"endArrow"],this.stroke=t.stroke||"#000",!0===this.cfg?this._setDefaultPath(e,a):this._setMarker(t.lineWidth,a),this}var e=t.prototype;return e.match=function(){return!1},e._setDefaultPath=function(t,e){var n=this.el;e.setAttribute("d","M0,0 L6,3 L0,6 L3,3Z"),n.setAttribute("refX",3),n.setAttribute("refY",3)},e._setMarker=function(t,e){var n=this.el,i=this.cfg.path,a=this.cfg.d;r.isArray(i)&&(i=i.map(function(t){return t.join(" ")}).join("")),e.setAttribute("d",i),n.appendChild(e),a&&n.setAttribute("refX",a/t)},e.update=function(t){var e=this.child;e.attr?e.attr("fill",t):e.setAttribute("fill",t)},t}();t.exports=i},function(t,e,n){var r=n(19),i={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},a={x:"-40%",y:"-40%",width:"200%",height:"200%"},o=function(){function t(t){this.type="filter";var e=document.createElementNS("http://www.w3.org/2000/svg","filter");return r.each(a,function(t,n){e.setAttribute(n,t)}),this.el=e,this.id=r.uniqueId("filter_"),this.el.id=this.id,this.cfg=t,this._parseShadow(t,e),this}var e=t.prototype;return e.match=function(t,e){if(this.type!==t)return!1;var n=!0,i=this.cfg;return r.each(Object.keys(i),function(t){if(i[t]!==e[t])return n=!1,!1}),n},e.update=function(t,e){var n=this.cfg;return n[i[t]]=e,this._parseShadow(n,this.el),this},e._parseShadow=function(t,e){var n='<feDropShadow \n      dx="'+(t.dx||0)+'" \n      dy="'+(t.dy||0)+'" \n      stdDeviation="'+(t.blur?t.blur/10:0)+'"\n      flood-color="'+(t.color?t.color:"#000")+'"\n      flood-opacity="'+(t.opacity?t.opacity:1)+'"\n      />';e.innerHTML=n},t}();t.exports=o},function(t,e,n){var r=n(19),i=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,a=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,o=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function s(t){var e=t.match(o);if(!e)return"";var n="";return e.sort(function(t,e){return t=t.split(":"),e=e.split(":"),Number(t[0])-Number(e[0])}),r.each(e,function(t){t=t.split(":"),n+='<stop offset="'+t[0]+'" stop-color="'+t[1]+'"></stop>'}),n}var u=function(){function t(t){var e=null,n=r.uniqueId("gradient_");return"l"===t.toLowerCase()[0]?function(t,e){var n,a,o=i.exec(t),u=r.mod(r.toRadian(parseFloat(o[1])),2*Math.PI),c=o[2];u>=0&&u<.5*Math.PI?(n={x:0,y:0},a={x:1,y:1}):.5*Math.PI<=u&&u<Math.PI?(n={x:1,y:0},a={x:0,y:1}):Math.PI<=u&&u<1.5*Math.PI?(n={x:1,y:1},a={x:0,y:0}):(n={x:0,y:1},a={x:1,y:0});var h=Math.tan(u),f=h*h,l=(a.x-n.x+h*(a.y-n.y))/(f+1)+n.x,p=h*(a.x-n.x+h*(a.y-n.y))/(f+1)+n.y;e.setAttribute("x1",n.x),e.setAttribute("y1",n.y),e.setAttribute("x2",l),e.setAttribute("y2",p),e.innerHTML=s(c)}(t,e=document.createElementNS("http://www.w3.org/2000/svg","linearGradient")):function(t,e){var n=a.exec(t),r=parseFloat(n[1]),i=parseFloat(n[2]),o=parseFloat(n[3]),u=n[4];e.setAttribute("cx",r),e.setAttribute("cy",i),e.setAttribute("r",o),e.innerHTML=s(u)}(t,e=document.createElementNS("http://www.w3.org/2000/svg","radialGradient")),e.setAttribute("id",n),this.el=e,this.id=n,this.cfg=t,this}return t.prototype.match=function(t,e){return this.cfg===e},t}();t.exports=u},function(t,e,n){var r=n(19),i=n(733),a=n(732),o=n(731),s=n(730),u=n(729),c=function(){function t(t){var e=document.createElementNS("http://www.w3.org/2000/svg","defs"),n=r.uniqueId("defs_");e.id=n,t.appendChild(e),this.children=[],this.defaultArrow={},this.el=e,this.canvas=t}var e=t.prototype;return e.find=function(t,e){for(var n=this.children,r=null,i=0;i<n.length;i++)if(n[i].match(t,e)){r=n[i].id;break}return r},e.findById=function(t){for(var e=this.children,n=null,r=0;r<e.length;r++)if(e[r].id===t){n=e[r];break}return n},e.add=function(t){this.children.push(t),t.canvas=this.canvas,t.parent=this},e.getDefaultArrow=function(t,e){var n=t.stroke||t.strokeStyle;if(this.defaultArrow[n])return this.defaultArrow[n].id;var r=new o(t,e);return this.defaultArrow[n]=r,this.el.appendChild(r.el),r.id},e.addGradient=function(t){var e=new i(t);return this.el.appendChild(e.el),this.add(e),e.id},e.addArrow=function(t,e){var n=new o(t,e);return this.el.appendChild(n.el),n.id},e.addShadow=function(t){var e=new a(t);return this.el.appendChild(e.el),this.add(e),e.id},e.addPattern=function(t){var e=new u(t);return this.el.appendChild(e.el),this.add(e),e.id},e.addClip=function(t){var e=new s(t);return this.el.appendChild(e.el),this.add(e),e.id},t}();t.exports=c},function(t,e,n){var r=n(19),i=n(593).parseRadius,a=n(611),o=n(734),s={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject",fan:"path",group:"g"},u={opacity:"opacity",fillStyle:"fill",strokeOpacity:"stroke-opacity",fillOpacity:"fill-opacity",strokeStyle:"stroke",x:"x",y:"y",r:"r",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},c={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},h={left:"left",start:"left",center:"middle",right:"end",end:"end"},f=function(){function t(t){if(!t)return null;var e=r.uniqueId("canvas_"),n=r.createDom('<svg id="'+e+'"></svg>');return t.appendChild(n),this.type="svg",this.canvas=n,this.context=new o(n),this.toDraw=!1,this}var e=t.prototype;return e.draw=function(t){var e=this;e.animateHandler?e.toDraw=!0:function n(){e.animateHandler=r.requestAnimationFrame(function(){e.animateHandler=void 0,e.toDraw&&n()});try{e._drawChildren(t)}catch(t){console.warn("error in draw canvas, detail as:"),console.warn(t),e.toDraw=!1}e.toDraw=!1}()},e.drawSync=function(t){this._drawChildren(t)},e._drawGroup=function(t,e){var n=t._cfg;n.removed||n.destroyed||(n.tobeRemoved&&(r.each(n.tobeRemoved,function(t){t.parentNode&&t.parentNode.removeChild(t)}),n.tobeRemoved=[]),this._drawShape(t,e),n.children&&n.children.length>0&&this._drawChildren(t))},e._drawChildren=function(t){var e,n=t._cfg.children;if(n)for(var r=0;r<n.length;r++)(e=n[r]).isGroup?this._drawGroup(e,r):this._drawShape(e,r)},e._drawShape=function(t,e){var n=t._attrs,r=t._cfg,i=r.el;r.removed||r.destroyed?i&&i.parentNode.removeChild(r.el):(!i&&r.parent&&(this._createDom(t,e),this._updateShape(t)),i=r.el,!1!==r.visible?(r.visible&&i.hasAttribute("visibility")&&i.removeAttribute("visibility"),r.hasUpdate&&this._updateShape(t),n.clip&&n.clip._cfg.hasUpdate&&this._updateShape(n.clip)):i.setAttribute("visibility","hidden"))},e._updateShape=function(t){var e=t._attrs,n=t._cfg.attrs;if(n)if(t._cfg.el||this._createDom(t),"clip"in e&&this._setClip(t,e.clip),("shadowOffsetX"in e||"shadowOffsetY"in e||"shadowBlur"in e||"shadowColor"in e)&&this._setShadow(t),"text"!==t.type){for(var i in"fan"===t.type&&this._updateFan(t),"marker"===t.type&&t._cfg.el.setAttribute("d",this._assembleMarker(e)),"rect"===t.type&&t._cfg.el.setAttribute("d",this._assembleRect(e)),e)e[i]!==n[i]&&this._setAttribute(t,i,e[i]);t._cfg.attrs=r.deepMix({},t._attrs),t._cfg.hasUpdate=!1}else this._updateText(t)},e._setAttribute=function(t,e,n){var i=t.type,a=t._attrs,o=t._cfg.el,s=this.context;if("marker"!==i&&"rect"!==i||!~["x","y","radius","r"].indexOf(e))if(~["circle","ellipse"].indexOf(i)&&~["x","y"].indexOf(e))o.setAttribute("c"+e,parseInt(n,10));else{if("polygon"===i&&"points"===e)return n&&0!==n.length||(n=""),r.isArray(n)&&(n=(n=n.map(function(t){return t[0]+","+t[1]})).join(" ")),void o.setAttribute("points",n);if("path"===e&&r.isArray(n))o.setAttribute("d",this._formatPath(n));else if("img"!==e){if("transform"===e)return n?void this._setTransform(t):void o.removeAttribute("transform");if("rotate"===e)return n?void this._setTransform(t):void o.removeAttribute("transform");if("matrix"!==e)if("fillStyle"!==e&&"strokeStyle"!==e){if("clip"!==e)if(~e.indexOf("Arrow"))if(e=u[e],n){var c=null;c="boolean"==typeof n?s.getDefaultArrow(a,e):s.addArrow(a,e),o.setAttribute(e,"url(#"+c+")"),t._cfg[e]=c}else t._cfg[e]=null,o.removeAttribute(e);else"html"===e&&("string"==typeof n?o.innerHTML=n:(o.innerHTML="",o.appendChild(n))),u[e]&&o.setAttribute(u[e],n)}else this._setColor(t,e,n);else this._setTransform(t)}else this._setImage(t,n)}},e._createDom=function(t,e){var n=s[t.type],r=t._attrs,i=t._cfg.parent,a=i._cfg.el;if(!n)throw new Error("the type"+t.type+"is not supported by svg");var o=document.createElementNS("http://www.w3.org/2000/svg",n);if(t._cfg.el=o,i)if(void 0===e)a.appendChild(o);else{var u=i._cfg.el.childNodes;"svg"===a.tagName&&(e+=1),u.length<=e?a.appendChild(o):a.insertBefore(o,u[e])}return t._cfg.attrs={},"text"===t.type?(o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")):(r.stroke||r.strokeStyle||o.setAttribute("stroke","none"),r.fill||r.fillStyle||o.setAttribute("fill","none")),o},e._assembleMarker=function(t){var e=t.r;if(void 0===t.r&&(e=t.radius),isNaN(Number(t.x))||isNaN(Number(t.y))||isNaN(Number(e)))return"";var n="";return n="function"==typeof t.symbol?t.symbol(t.x,t.y,e):a.Symbols[t.symbol||"circle"](t.x,t.y,e),r.isArray(n)&&(n=n.map(function(t){return t.join(" ")}).join("")),n},e._assembleRect=function(t){var e=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+e+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=i(s);return r.isArray(s)?1===s.length?u.r1=u.r2=u.r3=u.r4=s[0]:2===s.length?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):3===s.length?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s,[["M "+(e+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]].join(" ")},e._formatPath=function(t){return~(t=t.map(function(t){return t.join(" ")}).join("")).indexOf("NaN")?"":t},e._setTransform=function(t){for(var e=t._attrs.matrix,n=t._cfg.el,r=[],i=0;i<9;i+=3)r.push(e[i]+","+e[i+1]);-1===(r=r.join(",")).indexOf("NaN")?n.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)},e._setImage=function(t,e){var n=t._attrs,i=t._cfg.el;if(r.isString(e))i.setAttribute("href",e);else if(e instanceof Image)n.width||(i.setAttribute("width",e.width),t._attrs.width=e.width),n.height||(i.setAttribute("height",e.height),t._attrs.height=e.height),i.setAttribute("href",e.src);else if(e instanceof HTMLElement&&r.isString(e.nodeName)&&"CANVAS"===e.nodeName.toUpperCase())i.setAttribute("href",e.toDataURL());else if(e instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",e.width),a.setAttribute("height",e.height),a.getContext("2d").putImageData(e,0,0),n.width||(i.setAttribute("width",e.width),t._attrs.width=e.width),n.height||(i.setAttribute("height",e.height),t._attrs.height=e.height),i.setAttribute("href",a.toDataURL())}},e._updateFan=function(t){function e(t,e,n){return{x:e*Math.cos(t)+n.x,y:e*Math.sin(t)+n.y}}var n=t._attrs,i=t._cfg,a={x:n.x,y:n.y},o=[],s=n.startAngle,u=n.endAngle;r.isNumberEqual(u-s,2*Math.PI)&&(u-=1e-5);var c=e(s,n.re,a),h=e(u,n.re,a),f=u>s?1:0,l=Math.abs(u-s)>Math.PI?1:0,p=n.rs,d=n.re,g=e(s,n.rs,a),v=e(u,n.rs,a);n.rs>0?(o.push("M "+h.x+","+h.y),o.push("L "+v.x+","+v.y),o.push("A "+p+","+p+",0,"+l+","+(1===f?0:1)+","+g.x+","+g.y),o.push("L "+c.x+" "+c.y)):(o.push("M "+a.x+","+a.y),o.push("L "+c.x+","+c.y)),o.push("A "+d+","+d+",0,"+l+","+f+","+h.x+","+h.y),n.rs>0?o.push("L "+v.x+","+v.y):o.push("Z"),i.el.setAttribute("d",o.join(" "))},e._updateText=function(t){var e=t._attrs,n=t._cfg.attrs,r=t._cfg.el;for(var i in this._setFont(t),e)if(e[i]!==n[i]){if("text"===i){this._setText(t,""+e[i]);continue}if("fillStyle"===i||"strokeStyle"===i){this._setColor(t,i,e[i]);continue}if("matrix"===i){this._setTransform(t);continue}u[i]&&r.setAttribute(u[i],e[i])}t._cfg.attrs=Object.assign({},t._attrs),t._cfg.hasUpdate=!1},e._setFont=function(t){var e=t.get("el"),n=t._attrs,r=n.fontSize;e.setAttribute("alignment-baseline",c[n.textBaseline]||"baseline"),e.setAttribute("text-anchor",h[n.textAlign]||"left"),r&&+r<12&&(n.matrix=[1,0,0,0,1,0,0,0,1],t.transform([["t",-n.x,-n.y],["s",+r/12,+r/12],["t",n.x,n.y]]))},e._setText=function(t,e){var n=t._cfg.el,i=t._attrs.textBaseline||"bottom";if(e)if(~e.indexOf("\n")){var a=t._attrs.x,o=e.split("\n"),s=o.length-1,u="";r.each(o,function(t,e){0===e?"alphabetic"===i?u+='<tspan x="'+a+'" dy="'+-s+'em">'+t+"</tspan>":"top"===i?u+='<tspan x="'+a+'" dy="0.9em">'+t+"</tspan>":"middle"===i?u+='<tspan x="'+a+'" dy="'+-(s-1)/2+'em">'+t+"</tspan>":"bottom"===i?u+='<tspan x="'+a+'" dy="-'+(s+.3)+'em">'+t+"</tspan>":"hanging"===i&&(u+='<tspan x="'+a+'" dy="'+(-(s-1)-.3)+'em">'+t+"</tspan>"):u+='<tspan x="'+a+'" dy="1em">'+t+"</tspan>"}),n.innerHTML=u}else n.innerHTML=e;else n.innerHTML=""},e._setClip=function(t,e){var n=t._cfg.el;if(e)if(n.hasAttribute("clip-path"))e._cfg.hasUpdate&&this._updateShape(e);else{this._createDom(e),this._updateShape(e);var r=this.context.addClip(e);n.setAttribute("clip-path","url(#"+r+")")}else n.removeAttribute("clip-path")},e._setColor=function(t,e,n){var r=t._cfg.el,i=this.context;if(n)if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var a=i.find("gradient",n);a||(a=i.addGradient(n)),r.setAttribute(u[e],"url(#"+a+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=i.find("pattern",n);o||(o=i.addPattern(n)),r.setAttribute(u[e],"url(#"+o+")")}else r.setAttribute(u[e],n);else r.setAttribute(u[e],"none")},e._setShadow=function(t){var e=t._cfg.el,n=t._attrs,r={dx:n.shadowOffsetX,dy:n.shadowOffsetY,blur:n.shadowBlur,color:n.shadowColor};if(r.dx||r.dy||r.blur||r.color){var i=this.context.find("filter",r);i||(i=this.context.addShadow(r,this)),e.setAttribute("filter","url(#"+i+")")}else e.removeAttribute("filter")},t}();t.exports=f},function(t,e,n){t.exports={painter:n(735),getShape:n(728)}},function(t,e,n){var r=n(19),i=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,a=/[^\s\,]+/gi,o=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,s=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,u=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,c=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function h(t,e){var n=t.match(c);r.each(n,function(t){t=t.split(":"),e.addColorStop(t[0],t[1])})}t.exports={parsePath:function(t){return t=t||[],r.isArray(t)?t:r.isString(t)?(t=t.match(i),r.each(t,function(e,n){if((e=e.match(a))[0].length>1){var i=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=i}r.each(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0},parseStyle:function(t,e,n){if(r.isString(t)){if("("===t[1]||"("===t[2]){if("l"===t[0])return function(t,e,n){var i,a,s=o.exec(t),u=r.mod(r.toRadian(parseFloat(s[1])),2*Math.PI),c=s[2],f=e.getBBox();u>=0&&u<.5*Math.PI?(i={x:f.minX,y:f.minY},a={x:f.maxX,y:f.maxY}):.5*Math.PI<=u&&u<Math.PI?(i={x:f.maxX,y:f.minY},a={x:f.minX,y:f.maxY}):Math.PI<=u&&u<1.5*Math.PI?(i={x:f.maxX,y:f.maxY},a={x:f.minX,y:f.minY}):(i={x:f.minX,y:f.maxY},a={x:f.maxX,y:f.minY});var l=Math.tan(u),p=l*l,d=(a.x-i.x+l*(a.y-i.y))/(p+1)+i.x,g=l*(a.x-i.x+l*(a.y-i.y))/(p+1)+i.y,v=n.createLinearGradient(i.x,i.y,d,g);return h(c,v),v}(t,e,n);if("r"===t[0])return function(t,e,n){var r=s.exec(t),i=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),u=r[4];if(0===o){var f=u.match(c);return f[f.length-1].split(":")[1]}var l=e.getBBox(),p=l.maxX-l.minX,d=l.maxY-l.minY,g=Math.sqrt(p*p+d*d)/2,v=n.createRadialGradient(l.minX+p*i,l.minY+d*a,o*g,l.minX+p/2,l.minY+d/2,g);return h(u,v),v}(t,e,n);if("p"===t[0])return function(t,e,n){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,i,a=u.exec(t),o=a[1],s=a[2];function c(){r=n.createPattern(i,o),e.setSilent("pattern",r),e.setSilent("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return i=new Image,s.match(/^data:/i)||(i.crossOrigin="Anonymous"),i.src=s,i.complete?c():(i.onload=c,i.src=i.src),r}(t,e,n)}return t}}}},function(t,e,n){var r=n(19),i=n(737),a=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","lineDashOffset"],o=function(){function t(t){if(!t)return null;var e=r.uniqueId("canvas_"),n=r.createDom('<canvas id="'+e+'"></canvas>');return t.appendChild(n),this.type="canvas",this.canvas=n,this.context=n.getContext("2d"),this.toDraw=!1,this}var e=t.prototype;return e.beforeDraw=function(){var t=this.canvas;this.context&&this.context.clearRect(0,0,t.width,t.height)},e.draw=function(t){var e=this;e.animateHandler?e.toDraw=!0:function n(){e.animateHandler=r.requestAnimationFrame(function(){e.animateHandler=void 0,e.toDraw&&n()}),e.beforeDraw();try{e._drawGroup(t)}catch(t){console.warn("error in draw canvas, detail as:"),console.warn(t),e.toDraw=!1}e.toDraw=!1}()},e.drawSync=function(t){this.beforeDraw(),this._drawGroup(t)},e._drawGroup=function(t){if(!t._cfg.removed&&!t._cfg.destroyed&&t._cfg.visible){var e=t._cfg.children,n=null;this.setContext(t);for(var r=0;r<e.length;r++)n=e[r],e[r].isGroup?this._drawGroup(n):this._drawShape(n);this.restoreContext(t)}},e._drawShape=function(t){t._cfg.removed||t._cfg.destroyed||!t._cfg.visible||(this.setContext(t),t.drawInner(this.context),this.restoreContext(t),t._cfg.attrs=t._attrs,t._cfg.hasUpdate=!1)},e.setContext=function(t){var e=this.context,n=t._attrs.clip;e.save(),n&&(n.resetTransform(e),n.createPath(e),e.clip()),this.resetContext(t),t.resetTransform(e)},e.restoreContext=function(){this.context.restore()},e.resetContext=function(t){var e=this.context,n=t._attrs;if(!t.isGroup)for(var o in n)if(a.indexOf(o)>-1){var s=n[o];"fillStyle"===o&&(s=i.parseStyle(s,t,e)),"strokeStyle"===o&&(s=i.parseStyle(s,t,e)),"lineDash"===o&&e.setLineDash?r.isArray(s)?e.setLineDash(s):r.isString(s)&&e.setLineDash(s.split(" ")):e[o]=s}},t}();t.exports=o},function(t,e,n){t.exports={painter:n(738)}},function(t,e,n){t.exports={canvas:n(739),svg:n(736)}},function(t,e,n){var r=n(19),i=n(610),a=n(17),o=n(44),s=n(238),u=s.interpolate,c=s.interpolateArray,h=function(t){this._animators=[],this._current=0,this._timer=null,this.canvas=t};function f(t,e,n){var a,s=e.startTime;if(n<s+e.delay||e.isPaused)return!1;var h=e.duration,f=e.easing;if(n=n-s-e.delay,e.toAttrs.repeat)a=n%h/h,a=o[f](a);else{if(!((a=n/h)<1))return t.attr(e.toAttrs),e.toMatrix&&t.setMatrix(e.toMatrix),!0;a=o[f](a)}return function(t,e,n){var a={},o=e.toAttrs,s=e.fromAttrs,h=e.toMatrix;if(!t.get("destroyed")){var f;for(var l in o)if(!r.isEqual(s[l],o[l]))if("path"===l){var p=o[l],d=s[l];p.length>d.length?(p=i.parsePathString(o[l]),d=i.parsePathString(s[l]),d=i.fillPathByDiff(d,p),d=i.formatPath(d,p),e.fromAttrs.path=d,e.toAttrs.path=p):e.pathFormatted||(p=i.parsePathString(o[l]),d=i.parsePathString(s[l]),d=i.formatPath(d,p),e.fromAttrs.path=d,e.toAttrs.path=p,e.pathFormatted=!0),a[l]=[];for(var g=0;g<p.length;g++){for(var v=p[g],m=d[g],x=[],y=0;y<v.length;y++)r.isNumber(v[y])&&m&&r.isNumber(m[y])?(f=u(m[y],v[y]),x.push(f(n))):x.push(v[y]);a[l].push(x)}}else f=u(s[l],o[l]),a[l]=f(n);if(h){var b=c(e.fromMatrix,h)(n);t.setMatrix(b)}t.attr(a)}}(t,e,a),!1}r.augment(h,{initTimer:function(){var t,e,n,r=this,i=this;i._timer=a.timer(function(a){if(i._current=a,r._animators.length>0){for(var o=r._animators.length-1;o>=0;o--)if((t=r._animators[o]).get("destroyed"))i.removeAnimator(o);else{if(!t.get("pause").isPaused)for(var s=(e=t.get("animators")).length-1;s>=0;s--)n=e[s],f(t,n,a)&&(e.splice(s,1),!1,n.callback&&n.callback());0===e.length&&i.removeAnimator(o)}r.canvas.draw()}})},addAnimator:function(t){this._animators.push(t)},removeAnimator:function(t){this._animators.splice(t,1)},isAnimating:function(){return!!this._animators.length},stop:function(){this._timer&&this._timer.stop()},stopAllAnimations:function(){this._animators.forEach(function(t){t.stopAnimate()}),this._animators=[],this.canvas.draw()},getTime:function(){return this._current}}),t.exports=h},function(t,e,n){var r=n(19),i=n(613),a={arc:n(602),ellipse:n(639),line:n(603)},o=r.createDom('<canvas width="500" height="500"></canvas>').getContext("2d");function s(t,e,n){return n.createPath(o),o.isPointInPath(t,e)}var u={arc:function(t,e){var n=this._attrs,r=n.x,a=n.y,o=n.r,s=n.startAngle,u=n.endAngle,c=n.clockwise,h=this.getHitLineWidth();return!!this.hasStroke()&&i.arcline(r,a,o,s,u,c,h,t,e)},circle:function(t,e){var n=this._attrs,r=n.x,a=n.y,o=n.r,s=this.getHitLineWidth(),u=this.hasFill(),c=this.hasStroke();return u&&c?i.circle(r,a,o,t,e)||i.arcline(r,a,o,0,2*Math.PI,!1,s,t,e):u?i.circle(r,a,o,t,e):!!c&&i.arcline(r,a,o,0,2*Math.PI,!1,s,t,e)},dom:function(t,e){if(!this._cfg.el)return!1;var n=this._cfg.el.getBBox();return i.box(n.x,n.x+n.width,n.y,n.y+n.height,t,e)},ellipse:function(t,e){var n=this._attrs,a=this.hasFill(),o=this.hasStroke(),s=n.x,u=n.y,c=n.rx,h=n.ry,f=this.getHitLineWidth(),l=c>h?c:h,p=c>h?1:c/h,d=c>h?h/c:1,g=[t,e,1],v=[1,0,0,0,1,0,0,0,1];r.mat3.scale(v,v,[p,d]),r.mat3.translate(v,v,[s,u]);var m=r.mat3.invert([],v);return r.vec3.transformMat3(g,g,m),a&&o?i.circle(0,0,l,g[0],g[1])||i.arcline(0,0,l,0,2*Math.PI,!1,f,g[0],g[1]):a?i.circle(0,0,l,g[0],g[1]):!!o&&i.arcline(0,0,l,0,2*Math.PI,!1,f,g[0],g[1])},fan:function(t,e){var n=this,o=n.hasFill(),s=n.hasStroke(),u=n._attrs,c=u.x,h=u.y,f=u.rs,l=u.re,p=u.startAngle,d=u.endAngle,g=u.clockwise,v=[t-c,e-h],m=r.vec2.angleTo([1,0],v);function x(){var t=a.arc.nearAngle(m,p,d,g);if(r.isNumberEqual(m,t)){var e=r.vec2.squaredLength(v);if(f*f<=e&&e<=l*l)return!0}return!1}function y(){var r=n.getHitLineWidth(),a={x:Math.cos(p)*f+c,y:Math.sin(p)*f+h},o={x:Math.cos(p)*l+c,y:Math.sin(p)*l+h},s={x:Math.cos(d)*f+c,y:Math.sin(d)*f+h},u={x:Math.cos(d)*l+c,y:Math.sin(d)*l+h};return!!(i.line(a.x,a.y,o.x,o.y,r,t,e)||i.line(s.x,s.y,u.x,u.y,r,t,e)||i.arcline(c,h,f,p,d,g,r,t,e)||i.arcline(c,h,l,p,d,g,r,t,e))}return o&&s?x()||y():o?x():!!s&&y()},image:function(t,e){var n=this._attrs;if(this.get("toDraw")||!n.img)return!1;this._cfg.attrs&&this._cfg.attrs.img===n.img||this._setAttrImg();var r=n.x,a=n.y,o=n.width,s=n.height;return i.rect(r,a,o,s,t,e)},line:function(t,e){var n=this._attrs,r=n.x1,a=n.y1,o=n.x2,s=n.y2,u=this.getHitLineWidth();return!!this.hasStroke()&&i.line(r,a,o,s,u,t,e)},path:function(t,e){var n=this,i=n.get("segments"),a=n.hasFill(),o=n.hasStroke();function u(){if(!r.isEmpty(i)){for(var a=n.getHitLineWidth(),o=0,s=i.length;o<s;o++)if(i[o].isInside(t,e,a))return!0;return!1}}return a&&o?s(t,e,n)||u():a?s(t,e,n):!!o&&u()},marker:function(t,e){var n=this._attrs,r=n.x,a=n.y,o=n.radius||n.r,s=this.getHitLineWidth();return i.circle(r,a,o+s/2,t,e)},polygon:function(t,e){var n=this,r=n.hasFill(),a=n.hasStroke();function o(){var r=n._attrs.points;if(r.length<2)return!1;var a=n.getHitLineWidth(),o=r.slice(0);return r.length>=3&&o.push(r[0]),i.polyline(o,a,t,e)}return r&&a?s(t,e,n)||o():r?s(t,e,n):!!a&&o()},polyline:function(t,e){var n=this._attrs;if(this.hasStroke()){var r=n.points;if(r.length<2)return!1;var a=n.lineWidth;return i.polyline(r,a,t,e)}return!1},rect:function(t,e){var n=this,r=n.hasFill(),a=n.hasStroke();function o(){var r=n._attrs,a=r.x,o=r.y,s=r.width,u=r.height,c=r.radius,h=n.getHitLineWidth();if(0===c){var f=h/2;return i.line(a-f,o,a+s+f,o,h,t,e)||i.line(a+s,o-f,a+s,o+u+f,h,t,e)||i.line(a+s+f,o+u,a-f,o+u,h,t,e)||i.line(a,o+u+f,a,o-f,h,t,e)}return i.line(a+c,o,a+s-c,o,h,t,e)||i.line(a+s,o+c,a+s,o+u-c,h,t,e)||i.line(a+s-c,o+u,a+c,o+u,h,t,e)||i.line(a,o+u-c,a,o+c,h,t,e)||i.arcline(a+s-c,o+c,c,1.5*Math.PI,2*Math.PI,!1,h,t,e)||i.arcline(a+s-c,o+u-c,c,0,.5*Math.PI,!1,h,t,e)||i.arcline(a+c,o+u-c,c,.5*Math.PI,Math.PI,!1,h,t,e)||i.arcline(a+c,o+c,c,Math.PI,1.5*Math.PI,!1,h,t,e)}return r&&a?s(t,e,n)||o():r?s(t,e,n):!!a&&o()},text:function(t,e){var n=this.getBBox();if(this.hasFill()||this.hasStroke())return i.box(n.minX,n.maxX,n.minY,n.maxY,t,e)}};t.exports={isPointInPath:function(t,e){var n=u[this.type];return!!n&&n.call(this,t,e)}}},function(t,e,n){var r=n(58);r.Arc=n(638),r.Circle=n(637),r.Dom=n(636),r.Ellipse=n(635),r.Fan=n(634),r.Image=n(633),r.Line=n(632),r.Marker=n(611),r.Path=n(631),r.Polygon=n(630),r.Polyline=n(629),r.Rect=n(628),r.Text=n(627),t.exports=r},function(t,e,n){var r=n(19),i={delay:"delay",rotate:"rotate"},a={fill:"fill",stroke:"stroke",fillStyle:"fillStyle",strokeStyle:"strokeStyle"};t.exports={animate:function(t,e,n,o,s){void 0===s&&(s=0);this.set("animating",!0);var u=this.get("timeline");u||(u=this.get("canvas").get("timeline"),this.setSilent("timeline",u));var c=this.get("animators")||[];u._timer||u.initTimer(),r.isNumber(o)&&(s=o,o=null),r.isFunction(n)?(o=n,n="easeLinear"):n=n||"easeLinear";var h=function(t,e){var n={matrix:null,attrs:{}},o=e._attrs;for(var s in t)if("transform"===s)n.matrix=r.transform(e.getMatrix(),t[s]);else if("rotate"===s)n.matrix=r.transform(e.getMatrix(),[["r",t[s]]]);else if("matrix"===s)n.matrix=t[s];else{if(a[s]&&/^[r,R,L,l]{1}[\s]*\(/.test(t[s]))continue;i[s]||o[s]===t[s]||(n.attrs[s]=t[s])}return n}(t,this),f={fromAttrs:function(t,e){var n={},r=e._attrs;for(var i in t.attrs)n[i]=r[i];return n}(h,this),toAttrs:h.attrs,fromMatrix:r.clone(this.getMatrix()),toMatrix:h.matrix,duration:e,easing:n,callback:o,delay:s,startTime:u.getTime(),id:r.uniqueId()};c.length>0?c=function(t,e){var n=e.delay,i=Object.prototype.hasOwnProperty;return r.each(e.toAttrs,function(e,a){r.each(t,function(t){n<t.startTime+t.duration&&i.call(t.toAttrs,a)&&(delete t.toAttrs[a],delete t.fromAttrs[a])})}),e.toMatrix&&r.each(t,function(t){n<t.startTime+t.duration&&t.toMatrix&&delete t.toMatrix}),t}(c,f):u.addAnimator(this),c.push(f),this.setSilent("animators",c),this.setSilent("pause",{isPaused:!1})},stopAnimate:function(){var t=this,e=this.get("animators");r.each(e,function(e){t.attr(e.toAttrs),e.toMatrix&&t.attr("matrix",e.toMatrix),e.callback&&e.callback()}),this.setSilent("animating",!1),this.setSilent("animators",[])},pauseAnimate:function(){var t=this.get("timeline");return this.setSilent("pause",{isPaused:!0,pauseTime:t.getTime()}),this},resumeAnimate:function(){var t=this.get("timeline").getTime(),e=this.get("animators"),n=this.get("pause").pauseTime;return r.each(e,function(e){e.startTime=e.startTime+(t-n),e._paused=!1,e._pauseTime=null}),this.setSilent("pause",{isPaused:!1}),this.setSilent("animators",e),this}}},function(t,e,n){var r=n(19);function i(t){return 1===t[0]&&0===t[1]&&0===t[3]&&1===t[4]&&0===t[6]&&0===t[7]}function a(t){return 0===t[1]&&0===t[3]&&0===t[6]&&0===t[7]}function o(t,e){i(e)||(a(e)?(t[0]*=e[0],t[4]*=e[4]):r.mat3.multiply(t,t,e))}t.exports={initTransform:function(){},resetMatrix:function(){this.attr("matrix",[1,0,0,0,1,0,0,0,1])},translate:function(t,e){var n=this._attrs.matrix;return r.mat3.translate(n,n,[t,e]),this.clearTotalMatrix(),this.attr("matrix",n),this},rotate:function(t){var e=this._attrs.matrix;return r.mat3.rotate(e,e,t),this.clearTotalMatrix(),this.attr("matrix",e),this},scale:function(t,e){var n=this._attrs.matrix;return r.mat3.scale(n,n,[t,e]),this.clearTotalMatrix(),this.attr("matrix",n),this},rotateAtStart:function(t){var e=this._attrs.x||this._cfg.attrs.x,n=this._attrs.y||this._cfg.attrs.y;return Math.abs(t)>2*Math.PI&&(t=t/180*Math.PI),this.transform([["t",-e,-n],["r",t],["t",e,n]])},move:function(t,e){var n=this.get("x")||0,r=this.get("y")||0;return this.translate(t-n,e-r),this.set("x",t),this.set("y",e),this},transform:function(t){var e=this,n=this._attrs.matrix;return r.each(t,function(t){switch(t[0]){case"t":e.translate(t[1],t[2]);break;case"s":e.scale(t[1],t[2]);break;case"r":e.rotate(t[1]);break;case"m":e.attr("matrix",r.mat3.multiply([],n,t[1])),e.clearTotalMatrix()}}),e},setTransform:function(t){return this.attr("matrix",[1,0,0,0,1,0,0,0,1]),this.transform(t)},getMatrix:function(){return this.attr("matrix")},setMatrix:function(t){return this.attr("matrix",t),this.clearTotalMatrix(),this},apply:function(t,e){var n;return n=e?this._getMatrixByRoot(e):this.attr("matrix"),r.vec3.transformMat3(t,t,n),this},_getMatrixByRoot:function(t){t=t||this;for(var e=this,n=[];e!==t;)n.unshift(e),e=e.get("parent");n.unshift(e);var i=[1,0,0,0,1,0,0,0,1];return r.each(n,function(t){r.mat3.multiply(i,t.attr("matrix"),i)}),i},getTotalMatrix:function(){var t=this._cfg.totalMatrix;if(!t){t=[1,0,0,0,1,0,0,0,1];var e=this._cfg.parent;if(e)o(t,e.getTotalMatrix());o(t,this.attr("matrix")),this._cfg.totalMatrix=t}return t},clearTotalMatrix:function(){},invert:function(t){var e=this.getTotalMatrix();if(a(e))t[0]/=e[0],t[1]/=e[4];else{var n=r.mat3.invert([],e);n&&r.vec3.transformMat3(t,t,n)}return this},resetTransform:function(t){var e=this.attr("matrix");i(e)||t.transform(e[0],e[1],e[3],e[4],e[6],e[7])}}},function(t,e,n){var r=n(19);t.exports={canFill:!1,canStroke:!1,initAttrs:function(t){return this._attrs={opacity:1,fillOpacity:1,strokeOpacity:1,matrix:[1,0,0,0,1,0,0,0,1]},this.attr(r.assign(this.getDefaultAttrs(),t)),this},getDefaultAttrs:function(){return{}},attr:function(t,e){if(0===arguments.length)return this._attrs;if(r.isObject(t)){for(var n in t)this._setAttr(n,t[n]);return this.clearBBox(),this._cfg.hasUpdate=!0,this}return 2===arguments.length?(this._setAttr(t,e),this.clearBBox(),this._cfg.hasUpdate=!0,this):this._attrs[t]},_setAttr:function(t,e){var n=this._attrs;n[t]=e,"fill"!==t&&"stroke"!==t?"opacity"!==t?"clip"===t&&e?this._setClip(e):"path"===t&&this._afterSetAttrPath?this._afterSetAttrPath(e):"transform"!==t?"rotate"===t&&this.rotateAtStart(e):this.transform(e):n.globalAlpha=e:n[t+"Style"]=e},clearBBox:function(){this.setSilent("box",null)},hasFill:function(){return this.canFill&&this._attrs.fillStyle},hasStroke:function(){return this.canStroke&&this._attrs.strokeStyle},_setClip:function(t){t._cfg.renderer=this._cfg.renderer,t._cfg.canvas=this._cfg.canvas,t._cfg.parent=this._cfg.parent,t.hasFill=function(){return!0}}}},function(t,e,n){var r=n(19),i=n(643),a=n(642),o=n(741),s=n(740),u=function t(e){t.superclass.constructor.call(this,e)};u.CFG={eventEnable:!0,width:null,height:null,widthCanvas:null,heightCanvas:null,widthStyle:null,heightStyle:null,containerDOM:null,canvasDOM:null,pixelRatio:null,renderer:"canvas"},r.extend(u,a),r.augment(u,{init:function(){u.superclass.init.call(this),this._setGlobalParam(),this._setContainer(),this._initPainter(),this._scale(),this.get("eventEnable")&&this._registEvents()},getEmitter:function(t,e){if(t){if(!r.isEmpty(t._getEvents()))return t;var n=t.get("parent");if(n&&!e.propagationStopped)return this.getEmitter(n,e)}},_getEventObj:function(t,e,n,r){var a=new i(t,e,!0,!0);return a.x=n.x,a.y=n.y,a.clientX=e.clientX,a.clientY=e.clientY,a.currentTarget=r,a.target=r,a},_triggerEvent:function(t,e){var n,r=this.getPointByClient(e.clientX,e.clientY),i=this.getShape(r.x,r.y,e),a=this.get("el");if("mousemove"===t){var o=this.get("preShape");if(o&&o!==i){var s=this._getEventObj("mouseleave",e,r,o);(n=this.getEmitter(o,e))&&n.emit("mouseleave",s),a.style.cursor="default"}if(i){var u=this._getEventObj("mousemove",e,r,i);if((n=this.getEmitter(i,e))&&n.emit("mousemove",u),o!==i){var c=this._getEventObj("mouseenter",e,r,i);n&&n.emit("mouseenter",c,e)}}else{var h=this._getEventObj("mousemove",e,r,this);this.emit("mousemove",h)}this.set("preShape",i)}else{var f=this._getEventObj(t,e,r,i||this);(n=this.getEmitter(i,e))&&n!==this&&n.emit(t,f),this.emit(t,f)}i&&!i.get("destroyed")&&(a.style.cursor=i.attr("cursor")||"default")},_registEvents:function(){var t=this,e=t.get("el");r.each(["mouseout","mouseover","mousemove","mousedown","mouseleave","mouseup","click","dblclick"],function(n){e.addEventListener(n,function(e){t._triggerEvent(n,e)},!1)}),e.addEventListener("touchstart",function(e){r.isEmpty(e.touches)||t._triggerEvent("touchstart",e.touches[0])},!1),e.addEventListener("touchmove",function(e){r.isEmpty(e.touches)||t._triggerEvent("touchmove",e.touches[0])},!1),e.addEventListener("touchend",function(e){r.isEmpty(e.changedTouches)||t._triggerEvent("touchend",e.changedTouches[0])},!1)},_scale:function(){if("svg"!==this._cfg.renderType){var t=this.get("pixelRatio");this.scale(t,t)}},_setGlobalParam:function(){var t=this.get("renderer")||"canvas";"svg"===t?this.set("pixelRatio",1):this.get("pixelRatio")||this.set("pixelRatio",r.getRatio()),this._cfg.renderType=t;var e=s[t];this._cfg.renderer=e,this._cfg.canvas=this;var n=new o(this);this._cfg.timeline=n},_setContainer:function(){var t=this.get("containerId"),e=this.get("containerDOM");e||(e=document.getElementById(t),this.set("containerDOM",e)),r.modifyCSS(e,{position:"relative"})},_initPainter:function(){var t=this.get("containerDOM"),e=new this._cfg.renderer.painter(t);this._cfg.painter=e,this._cfg.canvasDOM=this._cfg.el=e.canvas,this.changeSize(this.get("width"),this.get("height"))},_resize:function(){var t=this.get("canvasDOM"),e=this.get("widthCanvas"),n=this.get("heightCanvas"),r=this.get("widthStyle"),i=this.get("heightStyle");t.style.width=r,t.style.height=i,t.setAttribute("width",e),t.setAttribute("height",n)},getWidth:function(){var t=this.get("pixelRatio");return this.get("width")*t},getHeight:function(){var t=this.get("pixelRatio");return this.get("height")*t},changeSize:function(t,e){var n=this.get("pixelRatio"),r=t*n,i=e*n;this.set("widthCanvas",r),this.set("heightCanvas",i),this.set("widthStyle",t+"px"),this.set("heightStyle",e+"px"),this.set("width",t),this.set("height",e),this._resize()},getPointByClient:function(t,e){var n=this.get("el"),r=this.get("pixelRatio")||1,i=n.getBoundingClientRect();return{x:(t-i.left)*r,y:(e-i.top)*r}},getClientByPoint:function(t,e){var n=this.get("el").getBoundingClientRect(),r=this.get("pixelRatio")||1;return{clientX:t/r+n.left,clientY:e/r+n.top}},draw:function(){this._cfg.painter.draw(this)},getShape:function(t,e,n){return 3===arguments.length&&this._cfg.renderer.getShape?this._cfg.renderer.getShape.call(this,t,e,n):u.superclass.getShape.call(this,t,e)},getRenderer:function(){return this._cfg.renderType},_drawSync:function(){this._cfg.painter.drawSync(this)},destroy:function(){var t=this._cfg,e=t.containerDOM,n=t.canvasDOM;n&&e&&e.removeChild(n),t.timeline.stop(),u.superclass.destroy.call(this)}}),t.exports=u},function(t,e,n){var r=n(248),i={};n(257).mix(i,r.PathUtil,{getRectPath:r.PathUtil.rectPath,pointsToPolygon:function(t){for(var e=[["M",t[0].x,t[0].y]],n=1;n<t.length;n++){var r=t[n];e.push(["L",r.x,r.y])}return e},getEllipsePath:function(t,e,n,r){return[["M",t,e-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]}}),t.exports=i},function(t,e,n){var r=n(645),i=n(16),a="Expected a function";t.exports=function(t,e,n){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError(a);return i(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),r(t,e,{leading:o,maxWait:e,trailing:s})}},function(t,e){t.exports=function(t,e,n){var r=void 0,i=void 0,a=void 0,o=void 0,s=0;n||(n={});var u=function(){s=!1===n.leading?0:Date.now(),r=null,o=t.apply(i,a),r||(i=a=null)},c=function(){var c=Date.now();s||!1!==n.leading||(s=c);var h=e-(c-s);return i=this,a=arguments,h<=0||h>e?(r&&(clearTimeout(r),r=null),s=c,o=t.apply(i,a),r||(i=a=null)):r||!1===n.trailing||(r=setTimeout(u,h)),o};return c.cancel=function(){clearTimeout(r),s=0,r=i=a=null},c}},function(t,e,n){var r=n(46),i=n(596),a=Object.prototype.hasOwnProperty;t.exports=function(t,e){if(null===t||!i(t))return{};var n={};return r(e,function(e){a.call(t,e)&&(n[e]=t[e])}),n}},function(t,e,n){var r=n(46),i=n(118);t.exports=function(t,e){if(!i(t))return t;var n=[];return r(t,function(t,r){n.push(e(t,r))}),n}},function(t,e,n){var r=n(84),i=n(614);t.exports=function(t,e,n){return r(n)?!!n(t,e):i(t,e)}},function(t,e,n){var r=n(118);t.exports=function(t,e){if(!r(t))return-1;var n=Array.prototype.indexOf;if(n)return n.call(t,e);for(var i=-1,a=0;a<t.length;a++)if(t[a]===e){i=a;break}return i}},function(t,e,n){var r=n(649);t.exports=function(t,e){if(!e)return[t];var n=r(t,e),i=[];for(var a in n)i.push(n[a]);return i}},function(t,e){t.exports=function(t,e,n){var r=void 0;return function(){var i=this,a=arguments,o=n&&!r;clearTimeout(r),r=setTimeout(function(){r=null,n||t.apply(i,a)},e),o&&t.apply(i,a)}}},function(t,e,n){var r=n(115);t.exports=function(t){return r(t,"Error")}},function(t,e,n){var r=n(115);t.exports=function(t){return r(t,"Arguments")}},function(t,e,n){var r=n(115);t.exports=function(t){return r(t,"Date")}},function(t,e,n){var r=n(115);t.exports=function(t){return r(t,"RegExp")}},function(t,e){t.exports=function(t){return void 0===t}},function(t,e){t.exports=function(t){return null===t}},function(t,e,n){var r=n(115),i={getType:n(654),isArray:n(45),isArrayLike:n(118),isBoolean:n(653),isFunction:n(84),isNil:n(237),isNull:n(762),isNumber:n(236),isObject:n(621),isObjectLike:n(619),isPlainObject:n(596),isPrototype:n(652),isType:r,isUndefined:n(761),isString:n(595),isRegExp:n(760),isDate:n(759),isArguments:n(758),isError:n(757)};t.exports=i},function(t,e,n){t.exports=n(656)},function(t,e){t.exports=function(t,e){return t&&e?t.replace(/\\?\{([^{}]+)\}/g,function(t,n){return"\\"===t.charAt(0)?t.slice(1):void 0===e[n]?"":e[n]}):t}},function(t,e,n){var r=n(594);t.exports=function(t){var e=r(t);return e.charAt(0).toLowerCase()+e.substring(1)}},function(t,e,n){t.exports=n(657)},function(t,e,n){var r={lc:n(767),lowerCase:n(657),lowerFirst:n(766),substitute:n(765),uc:n(764),upperCase:n(656),upperFirst:n(655)};t.exports=r},function(t,e){function n(t){var e=[];switch(t[0]){case"M":case"L":e.push([t[1],t[2]]);break;case"A":e.push([t[6],t[7]]);break;case"Q":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"T":e.push([t[1],t[2]]);break;case"C":e.push([t[5],t[6]]),e.push([t[1],t[2]]),e.push([t[3],t[4]]);break;case"S":e.push([t[3],t[4]]),e.push([t[1],t[2]]);break;case"H":case"V":e.push([t[1],t[1]])}return e}function r(t,e,r){for(var i=[].concat(t),a=void 0,o=1/(r+1),s=n(e)[0],u=1;u<=r;u++)o*=u,0===(a=Math.floor(t.length*o))?i.unshift([s[0]*o+t[a][0]*(1-o),s[1]*o+t[a][1]*(1-o)]):i.splice(a,0,[s[0]*o+t[a][0]*(1-o),s[1]*o+t[a][1]*(1-o)]);return i}t.exports=function(t,e){if(t.length<=1)return t;for(var i=void 0,a=0;a<e.length;a++)if(t[a][0]!==e[a][0])switch(i=n(t[a]),e[a][0]){case"M":t[a]=["M"].concat(i[0]);break;case"L":t[a]=["L"].concat(i[0]);break;case"A":t[a]=[].concat(e[a]),t[a][6]=i[0][0],t[a][7]=i[0][1];break;case"Q":if(i.length<2){if(!(a>0)){t[a]=e[a];break}i=r(i,t[a-1],1)}t[a]=["Q"].concat(i.reduce(function(t,e){return t.concat(e)},[]));break;case"T":t[a]=["T"].concat(i[0]);break;case"C":if(i.length<3){if(!(a>0)){t[a]=e[a];break}i=r(i,t[a-1],2)}t[a]=["C"].concat(i.reduce(function(t,e){return t.concat(e)},[]));break;case"S":if(i.length<2){if(!(a>0)){t[a]=e[a];break}i=r(i,t[a-1],1)}t[a]=["S"].concat(i.reduce(function(t,e){return t.concat(e)},[]));break;default:t[a]=e[a]}return t}},function(t,e,n){var r=n(46);t.exports=function(t,e){if(t.length!==e.length)return!1;var n=!0;return r(t,function(t,r){if(t!==e[r])return n=!1,!1}),n}},function(t,e,n){var r=n(770);function i(t,e,n){var r=null,i=n;return e<i&&(i=e,r="add"),t<i&&(i=t,r="del"),{type:r,min:i}}t.exports=function(t,e){var n=function(t,e){var n=t.length,a=e.length,o=void 0,s=void 0,u=0;if(0===n||0===a)return null;for(var c=[],h=0;h<=n;h++)c[h]=[],c[h][0]={min:h};for(var f=0;f<=a;f++)c[0][f]={min:f};for(var l=1;l<=n;l++){o=t[l-1];for(var p=1;p<=a;p++){s=e[p-1],u=r(o,s)?0:1;var d=c[l-1][p].min+1,g=c[l][p-1].min+1,v=c[l-1][p-1].min+u;c[l][p]=i(d,g,v)}}return c}(t,e),a=t.length,o=e.length,s=[],u=1,c=1;if(n[a][o]!==a){for(var h=1;h<=a;h++){var f=n[h][h].min;c=h;for(var l=u;l<=o;l++)n[h][l].min<f&&(f=n[h][l].min,c=l);u=c,n[h][u].type&&s.push({index:h-1,type:n[h][u].type})}for(var p=s.length-1;p>=0;p--)u=s[p].index,"add"===s[p].type?t.splice(u,0,[].concat(t[u])):t.splice(u,1)}if((a=t.length)<o)for(var d=0;d<o-a;d++)"z"===t[a-1][0]||"Z"===t[a-1][0]?t.splice(a-2,0,t[a-2]):t.push(t[a-1]);return t}},function(t,e){function n(t,e){var n=[],r=[];return t.length&&function t(e,i){if(1===e.length)n.push(e[0]),r.push(e[0]);else{for(var a=[],o=0;o<e.length-1;o++)0===o&&n.push(e[0]),o===e.length-2&&r.push(e[o+1]),a[o]=[(1-i)*e[o][0]+i*e[o+1][0],(1-i)*e[o][1]+i*e[o+1][1]];t(a,i)}}(t,e),{left:n,right:r.reverse()}}function r(t,e,r){if(1===r)return[[].concat(t)];var i=[];if("L"===e[0]||"C"===e[0]||"Q"===e[0])i=i.concat(function(t,e,r){var i=[[t[1],t[2]]];r=r||2;var a=[];"A"===e[0]?(i.push(e[6]),i.push(e[7])):"C"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]]),i.push([e[5],e[6]])):"S"===e[0]||"Q"===e[0]?(i.push([e[1],e[2]]),i.push([e[3],e[4]])):i.push([e[1],e[2]]);for(var o=i,s=1/r,u=0;u<r-1;u++){var c=n(o,s/(1-s*u));a.push(c.left),o=c.right}return a.push(o),a.map(function(t){var e=[];return 4===t.length&&(e.push("C"),e=e.concat(t[2])),t.length>=3&&(3===t.length&&e.push("Q"),e=e.concat(t[1])),2===t.length&&e.push("L"),e=e.concat(t[t.length-1])})}(t,e,r));else{var a=[].concat(t);"M"===a[0]&&(a[0]="L");for(var o=0;o<=r-1;o++)i.push(a)}return i}t.exports=function(t,e){if(1===t.length)return t;var n=t.length-1,i=e.length-1,a=n/i,o=[];if(1===t.length&&"M"===t[0][0]){for(var s=0;s<i-n;s++)t.push(t[0]);return t}for(var u=0;u<i;u++){var c=Math.floor(a*u);o[c]=(o[c]||0)+1}var h=o.reduce(function(e,i,a){return a===n?e.concat(t[n]):e.concat(r(t[a],t[a+1],i))},[]);return h.unshift(t[0]),"Z"!==e[i]&&"z"!==e[i]||h.push("Z"),h}},function(t,e,n){var r=n(45),i=n(663),a=n(661),o=function(t,e,n,r,i){return t*(t*(-3*e+9*n-9*r+3*i)+6*e-12*n+6*r)-3*e+3*n},s=function(t,e,n,r,i,a,s,u,c){null===c&&(c=1);for(var h=(c=c>1?1:c<0?0:c)/2,f=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0,d=0;d<12;d++){var g=h*f[d]+h,v=o(g,t,n,i,s),m=o(g,e,r,a,u),x=v*v+m*m;p+=l[d]*Math.sqrt(x)}return h*p},u=function(t,e,n,r,i,a,o,s){if(!(Math.max(t,n)<Math.min(i,o)||Math.min(t,n)>Math.max(i,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(t-n)*(a-s)-(e-r)*(i-o);if(u){var c=((t*r-e*n)*(i-o)-(t-n)*(i*s-a*o))/u,h=((t*r-e*n)*(a-s)-(e-r)*(i*s-a*o))/u,f=+c.toFixed(2),l=+h.toFixed(2);if(!(f<+Math.min(t,n).toFixed(2)||f>+Math.max(t,n).toFixed(2)||f<+Math.min(i,o).toFixed(2)||f>+Math.max(i,o).toFixed(2)||l<+Math.min(e,r).toFixed(2)||l>+Math.max(e,r).toFixed(2)||l<+Math.min(a,s).toFixed(2)||l>+Math.max(a,s).toFixed(2)))return{x:c,y:h}}}},c=function(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height},h=function(t,e,n,r){return null===t&&(t=e=n=r=0),null===e&&(e=t.y,n=t.width,r=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:r,h:r,x2:t+n,y2:e+r,cx:t+n/2,cy:e+r/2,r1:Math.min(n,r)/2,r2:Math.max(n,r)/2,r0:Math.sqrt(n*n+r*r)/2,path:i(t,e,n,r),vb:[t,e,n,r].join(" ")}},f=function(t,e,n,i,a,o,s,u){r(t)||(t=[t,e,n,i,a,o,s,u]);var c=function(t,e,n,r,i,a,o,s){for(var u=[],c=[[],[]],h=void 0,f=void 0,l=void 0,p=void 0,d=0;d<2;++d)if(0===d?(f=6*t-12*n+6*i,h=-3*t+9*n-9*i+3*o,l=3*n-3*t):(f=6*e-12*r+6*a,h=-3*e+9*r-9*a+3*s,l=3*r-3*e),Math.abs(h)<1e-12){if(Math.abs(f)<1e-12)continue;(p=-l/f)>0&&p<1&&u.push(p)}else{var g=f*f-4*l*h,v=Math.sqrt(g);if(!(g<0)){var m=(-f+v)/(2*h);m>0&&m<1&&u.push(m);var x=(-f-v)/(2*h);x>0&&x<1&&u.push(x)}}for(var y=u.length,b=y,M=void 0;y--;)M=1-(p=u[y]),c[0][y]=M*M*M*t+3*M*M*p*n+3*M*p*p*i+p*p*p*o,c[1][y]=M*M*M*e+3*M*M*p*r+3*M*p*p*a+p*p*p*s;return c[0][b]=t,c[1][b]=e,c[0][b+1]=o,c[1][b+1]=s,c[0].length=c[1].length=b+2,{min:{x:Math.min.apply(0,c[0]),y:Math.min.apply(0,c[1])},max:{x:Math.max.apply(0,c[0]),y:Math.max.apply(0,c[1])}}}.apply(null,t);return h(c.min.x,c.min.y,c.max.x-c.min.x,c.max.y-c.min.y)},l=function(t,e,n,r,i,a,o,s,u){var c=1-u,h=Math.pow(c,3),f=Math.pow(c,2),l=u*u,p=l*u,d=t+2*u*(n-t)+l*(i-2*n+t),g=e+2*u*(r-e)+l*(a-2*r+e),v=n+2*u*(i-n)+l*(o-2*i+n),m=r+2*u*(a-r)+l*(s-2*a+r);return{x:h*t+3*f*u*n+3*c*u*u*i+p*o,y:h*e+3*f*u*r+3*c*u*u*a+p*s,m:{x:d,y:g},n:{x:v,y:m},start:{x:c*t+u*n,y:c*e+u*r},end:{x:c*i+u*o,y:c*a+u*s},alpha:90-180*Math.atan2(d-v,g-m)/Math.PI}},p=function(t,e,n){if(!function(t,e){return t=h(t),e=h(e),c(e,t.x,t.y)||c(e,t.x2,t.y)||c(e,t.x,t.y2)||c(e,t.x2,t.y2)||c(t,e.x,e.y)||c(t,e.x2,e.y)||c(t,e.x,e.y2)||c(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}(f(t),f(e)))return n?0:[];for(var r=~~(s.apply(0,t)/8),i=~~(s.apply(0,e)/8),a=[],o=[],p={},d=n?0:[],g=0;g<r+1;g++){var v=l.apply(0,t.concat(g/r));a.push({x:v.x,y:v.y,t:g/r})}for(var m=0;m<i+1;m++){var x=l.apply(0,e.concat(m/i));o.push({x:x.x,y:x.y,t:m/i})}for(var y=0;y<r;y++)for(var b=0;b<i;b++){var M=a[y],w=a[y+1],_=o[b],E=o[b+1],S=Math.abs(w.x-M.x)<.001?"y":"x",A=Math.abs(E.x-_.x)<.001?"y":"x",P=u(M.x,M.y,w.x,w.y,_.x,_.y,E.x,E.y);if(P){if(p[P.x.toFixed(4)]===P.y.toFixed(4))continue;p[P.x.toFixed(4)]=P.y.toFixed(4);var O=M.t+Math.abs((P[S]-M[S])/(w[S]-M[S]))*(w.t-M.t),C=_.t+Math.abs((P[A]-_[A])/(E[A]-_[A]))*(E.t-_.t);O>=0&&O<=1&&C>=0&&C<=1&&(n?d++:d.push({x:P.x,y:P.y,t1:O,t2:C}))}}return d};t.exports=function(t,e){return function(t,e,n){t=a(t),e=a(e);for(var r=void 0,i=void 0,o=void 0,s=void 0,u=void 0,c=void 0,h=void 0,f=void 0,l=void 0,d=void 0,g=n?0:[],v=0,m=t.length;v<m;v++){var x=t[v];if("M"===x[0])r=u=x[1],i=c=x[2];else{"C"===x[0]?(r=(l=[r,i].concat(x.slice(1)))[6],i=l[7]):(l=[r,i,r,i,u,c,u,c],r=u,i=c);for(var y=0,b=e.length;y<b;y++){var M=e[y];if("M"===M[0])o=h=M[1],s=f=M[2];else{"C"===M[0]?(o=(d=[o,s].concat(M.slice(1)))[6],s=d[7]):(d=[o,s,o,s,h,f,h,f],o=h,s=f);var w=p(l,d,n);if(n)g+=w;else{for(var _=0,E=w.length;_<E;_++)w[_].segment1=v,w[_].segment2=y,w[_].bez1=l,w[_].bez2=d;g=g.concat(w)}}}}}return g}(t,e)}},function(t,e,n){var r=n(773),i=n(660),a=n(661),o=n(658);t.exports={catmullRom2Bezier:o,catmullRomToBezier:o,fillPath:n(772),fillPathByDiff:n(771),formatPath:n(769),intersection:r,pathIntersection:r,parsePathArray:n(662),parsePathString:n(659),pathToAbsolute:i,path2absolute:i,pathTocurve:a,path2curve:a,rectPath:n(663)}},function(t,e,n){var r=n(605),i=n(664);t.exports=function(t,e){return r(i(t),e)}},function(t,e,n){t.exports=n(665)},function(t,e,n){t.exports=n(46)},function(t,e,n){t.exports={forIn:n(777),has:n(665),hasKey:n(776),hasValue:n(775),keys:n(677),isMatch:n(678),values:n(664)}},function(t,e,n){t.exports={mat3:n(617),vec2:n(668),vec3:n(667),transform:n(666)}},function(t,e,n){var r=n(45),i=n(84),a=n(46);t.exports=function(t,e){if(r(t)){var n=t[0],o=void 0;o=i(e)?e(t[0]):t[0][e];var s=void 0;return a(t,function(t){(s=i(e)?e(t):t[e])<o&&(n=t,o=s)}),n}}},function(t,e,n){var r=n(45),i=n(84),a=n(46);t.exports=function(t,e){if(r(t)){var n=t[0],o=void 0;o=i(e)?e(t[0]):t[0][e];var s=void 0;return a(t,function(t){(s=i(e)?e(t):t[e])>o&&(n=t,o=s)}),n}}},function(t,e,n){var r=n(236);t.exports=function(t){return r(t)&&t>0}},function(t,e,n){var r=n(236);t.exports=function(t){return r(t)&&t%2!=0}},function(t,e,n){var r=n(236);t.exports=function(t){return r(t)&&t<0}},function(t,e,n){var r=n(236),i=Number.isInteger?Number.isInteger:function(t){return r(t)&&t%1==0};t.exports=i},function(t,e,n){var r=n(236);t.exports=function(t){return r(t)&&t%2==0}},function(t,e,n){var r=n(236);t.exports=function(t){return r(t)&&t%1!=0}},function(t,e){t.exports=function(t,e){var n=e.toString(),r=n.indexOf(".");if(-1===r)return Math.round(t);var i=n.substr(r+1).length;return i>20&&(i=20),parseFloat(t.toFixed(i))}},function(t,e,n){var r=n(673);t.exports={clamp:n(618),fixedBase:n(788),isDecimal:n(787),isEven:n(786),isInteger:n(785),isNegative:n(784),isNumberEqual:r,isOdd:n(783),isPositive:n(782),maxBy:n(781),minBy:n(780),mod:n(672),snapEqual:r,toDegree:n(671),toInt:n(670),toInteger:n(670),toRadian:n(669)}},function(t,e,n){var r=n(45);t.exports=function(t){var e=0,n=0,i=0,a=0;return r(t)?1===t.length?e=n=i=a=t[0]:2===t.length?(e=i=t[0],n=a=t[1]):3===t.length?(e=t[0],n=a=t[1],i=t[2]):(e=t[0],n=t[1],i=t[2],a=t[3]):e=n=i=a=t,{r1:e,r2:n,r3:i,r4:a}}},function(t,e,n){var r=n(45),i=n(595),a=n(46),o=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,s=/[^\s\,]+/gi;t.exports=function(t){return r(t=t||[])?t:i(t)?(t=t.match(o),a(t,function(e,n){if((e=e.match(s))[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}a(e,function(t,n){isNaN(t)||(e[n]=+t)}),t[n]=e}),t):void 0}},function(t,e){var n={};t.exports=function(t){var e=n[t];if(!e){for(var r=t.toString(16),i=r.length;i<6;i++)r="0"+r;e="#"+r,n[t]=e}return e}},function(t,e,n){var r=n(792);t.exports={number2color:r,numberToColor:r,parsePath:n(791),parseRadius:n(790)}},function(t,e){t.exports=function(t,e){if(t["_wrap_"+e])return t["_wrap_"+e];var n=function(n){t[e](n)};return t["_wrap_"+e]=n,n}},function(t,e){t.exports=function(t,e){return t["_wrap_"+e]}},function(t,e,n){t.exports={getWrapBehavior:n(795),wrapBehavior:n(794)}},function(t,e,n){var r=n(237),i=n(45),a=n(46);t.exports=function(t,e){for(var n=[],o={},s=0;s<t.length;s++){var u=t[s][e];r(u)||(i(u)||(u=[u]),a(u,function(t){o[t]||(n.push(t),o[t]=!0)}))}return n}},function(t,e,n){var r=n(46),i=n(604),a=n(674);t.exports=function(){var t=[],e=i(arguments);return r(e,function(e){t=t.concat(e)}),a(t)}},function(t,e,n){var r=n(595),i=n(84),a=n(45);t.exports=function(t,e){var n=void 0;if(i(e))n=function(t,n){return e(t)-e(n)};else{var o=[];r(e)?o.push(e):a(e)&&(o=e),n=function(t,e){for(var n=0;n<o.length;n+=1){var r=o[n];if(t[r]>e[r])return 1;if(t[r]<e[r])return-1}return 0}}return t.sort(n),t}},function(t,e,n){var r=n(118),i=n(675);t.exports=function(t,e){var n=[];if(!r(t))return n;for(var a=-1,o=[],s=t.length;++a<s;){var u=t[a];e(u,a,t)&&(n.push(u),o.push(a))}return i(t,o),n}},function(t,e,n){var r=n(45),i=n(596),a=n(46);t.exports=function(t,e,n){if(!r(t)&&!i(t))return t;var o=n;return a(t,function(t,n){o=e(o,t,n)}),o}},function(t,e){t.exports=function(t){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);return e}},function(t,e,n){var r=n(620),i=n(45);t.exports=function(t){if(!(t=r(t,function(t){return!isNaN(t)})).length)return{min:0,max:0};if(i(t[0])){for(var e=[],n=0;n<t.length;n++)e=e.concat(t[n]);t=e}var a=Math.max.apply(null,t);return{min:Math.min.apply(null,t),max:a}}},function(t,e,n){var r=n(45);t.exports=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r(e))for(var i=0;i<e.length;i+=1)t(e[i],n);else n.push(e);return n}},function(t,e,n){var r=n(45),i=n(46);t.exports=function(t){if(!r(t))return t;var e=[];return i(t,function(t){r(t)?i(t,function(t){e.push(t)}):e.push(t)}),e}},function(t,e,n){var r=n(237),i=n(45);t.exports=function(t,e){for(var n=null,a=0;a<t.length;a++){var o=t[a][e];if(!r(o)){n=i(o)?o[0]:o;break}}return n}},function(t,e,n){var r=n(84),i=n(596),a=n(678);t.exports=function(t,e){var n=void 0;if(r(e)&&(n=e),i(e)&&(n=function(t){return a(t,e)}),n)for(var o=0;o<t.length;o+=1)if(n(t[o]))return t[o];return null}},function(t,e,n){var r=n(620),i=n(605);t.exports=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return r(t,function(t){return!i(e,t)})}},function(t,e,n){t.exports={contains:n(605),difference:n(808),find:n(807),firstValue:n(806),flatten:n(805),flattenDeep:n(804),getRange:n(803),merge:n(802),pull:n(676),pullAt:n(675),reduce:n(801),remove:n(800),sortBy:n(799),union:n(798),uniq:n(674),valuesOfKey:n(797)}},function(t,e){t.exports=function(t,e){var n=this.getStyle(t,"width",e);return"auto"===n&&(n=t.offsetWidth),parseFloat(n)}},function(t,e,n){var r=n(237);t.exports=function(t,e,n){try{return window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle[e]}catch(t){return r(n)?null:n}}},function(t,e){t.exports=function(){return window.devicePixelRatio?window.devicePixelRatio:2}},function(t,e){t.exports=function(t,e){var n=this.getWidth(t,e),r=parseFloat(this.getStyle(t,"borderLeftWidth"))||0,i=parseFloat(this.getStyle(t,"paddingLeft"))||0,a=parseFloat(this.getStyle(t,"paddingRight"))||0;return n+r+(parseFloat(this.getStyle(t,"borderRightWidth"))||0)+i+a}},function(t,e){t.exports=function(t,e){var n=this.getHeight(t,e),r=parseFloat(this.getStyle(t,"borderTopWidth"))||0,i=parseFloat(this.getStyle(t,"paddingTop"))||0,a=parseFloat(this.getStyle(t,"paddingBottom"))||0;return n+r+(parseFloat(this.getStyle(t,"borderBottomWidth"))||0)+i+a}},function(t,e){t.exports=function(t,e){var n=this.getStyle(t,"height",e);return"auto"===n&&(n=t.offsetHeight),parseFloat(n)}},function(t,e){t.exports=function(t,e){if(t&&t.getBoundingClientRect){var n=t.getBoundingClientRect(),r=document.documentElement.clientTop,i=document.documentElement.clientLeft;return{top:n.top-r,bottom:n.bottom-r,left:n.left-i,right:n.right-i}}return e||null}},function(t,e){t.exports=function(t,e,n){if(t){if(t.addEventListener)return t.addEventListener(e,n,!1),{remove:function(){t.removeEventListener(e,n,!1)}};if(t.attachEvent)return t.attachEvent("on"+e,n),{remove:function(){t.detachEvent("on"+e,n)}}}}},function(t,e,n){t.exports={addEventListener:n(817),createDom:n(681),getBoundingClientRect:n(816),getHeight:n(815),getOuterHeight:n(814),getOuterWidth:n(813),getRatio:n(812),getStyle:n(811),getWidth:n(810),modifyCSS:n(680),requestAnimationFrame:n(679)}},function(t,e,n){var r=n(46),i=n(606),a=n(818),o=n(809),s=n(796),u=n(793),c=n(789),h=n(779),f=n(778),l=n(774),p=n(768),d=n(763),g={DOMUtil:a,DomUtil:a,MatrixUtil:h,PathUtil:l,arrayUtil:o,domUtil:a,eventUtil:s,formatUtil:u,mathUtil:c,matrixUtil:h,objectUtil:f,stringUtil:p,pathUtil:l,typeUtil:d,augment:n(651),clone:n(616),debounce:n(756),deepMix:n(615),each:r,extend:n(650),filter:n(620),group:n(755),groupBy:n(648),groupToMap:n(649),indexOf:n(754),isEmpty:n(647),isEqual:n(614),isEqualWith:n(753),map:n(752),mix:i,pick:n(751),throttle:n(750),toArray:n(604),toString:n(594),uniqueId:n(646)};r([a,o,s,u,c,h,f,l,p,d],function(t){i(g,t)}),t.exports=g},function(t,e,n){var r=n(683),i=n(626),a=n(247),o=n(609),s=n(248),u={Graph:n(625),Tree:n(689),Util:n(26),Layouts:n(623),G:s,Plugins:{},Components:{},Global:a,Shape:r,registerNode:r.registerNode,registerEdge:r.registerEdge,registerGroup:r.registerGroup,registerGuide:r.registerGuide,registerBehaviour:i.registerBehaviour,version:o,track:function(t){a.track=t}};n(684),t.exports=u}])});
//# sourceMappingURL=g6.js.map

/***/ }),

/***/ "eef6":
/***/ (function(module, exports, __webpack_require__) {

exports.nextTick = function nextTick(fn) {
    var args = Array.prototype.slice.call(arguments);
    args.shift();
    setTimeout(function () {
        fn.apply(null, args);
    }, 0);
};

exports.platform = exports.arch = 
exports.execPath = exports.title = 'browser';
exports.pid = 1;
exports.browser = true;
exports.env = {};
exports.argv = [];

exports.binding = function (name) {
	throw new Error('No such module. (Possibly not yet loaded)')
};

(function () {
    var cwd = '/';
    var path;
    exports.cwd = function () { return cwd };
    exports.chdir = function (dir) {
        if (!path) path = __webpack_require__("6266");
        cwd = path.resolve(dir, cwd);
    };
})();

exports.exit = exports.kill = 
exports.umask = exports.dlopen = 
exports.uptime = exports.memoryUsage = 
exports.uvCounters = function() {};
exports.features = {};


/***/ }),

/***/ "ef41":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__("4fed");
var isCallable = __webpack_require__("fe72");
var isPrototypeOf = __webpack_require__("d519");
var USE_SYMBOL_AS_UID = __webpack_require__("2810");

var $Object = Object;

module.exports = USE_SYMBOL_AS_UID ? function (it) {
  return typeof it == 'symbol';
} : function (it) {
  var $Symbol = getBuiltIn('Symbol');
  return isCallable($Symbol) && isPrototypeOf($Symbol.prototype, $Object(it));
};


/***/ }),

/***/ "eff3":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
// isFinite,
var isNil = function (value) {
    /**
     * isNil(null) => true
     * isNil() => true
     */
    return value === null || value === undefined;
};
exports.default = isNil;
//# sourceMappingURL=is-nil.js.map

/***/ }),

/***/ "f018":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__("4fed");
var defineBuiltInAccessor = __webpack_require__("c0b5");
var wellKnownSymbol = __webpack_require__("9a0b");
var DESCRIPTORS = __webpack_require__("98c8");

var SPECIES = wellKnownSymbol('species');

module.exports = function (CONSTRUCTOR_NAME) {
  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);

  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {
    defineBuiltInAccessor(Constructor, SPECIES, {
      configurable: true,
      get: function () { return this; }
    });
  }
};


/***/ }),

/***/ "f082":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isPrototypeOf = __webpack_require__("d519");

var $TypeError = TypeError;

module.exports = function (it, Prototype) {
  if (isPrototypeOf(Prototype, it)) return it;
  throw new $TypeError('Incorrect invocation');
};


/***/ }),

/***/ "f1a6":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var aCallable = __webpack_require__("d0d3");
var isNullOrUndefined = __webpack_require__("2e64");

// `GetMethod` abstract operation
// https://tc39.es/ecma262/#sec-getmethod
module.exports = function (V, P) {
  var func = V[P];
  return isNullOrUndefined(func) ? undefined : aCallable(func);
};


/***/ }),

/***/ "f20b":
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),

/***/ "f227":
/***/ (function(module, exports, __webpack_require__) {

var overArg = __webpack_require__("2721");

/** Built-in value references. */
var getPrototype = overArg(Object.getPrototypeOf, Object);

module.exports = getPrototype;


/***/ }),

/***/ "f234":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.getShape = void 0;
var g_base_1 = __webpack_require__("ae4c");
function invertFromMatrix(v, matrix) {
    if (matrix) {
        var invertMatrix = g_base_1.invert(matrix);
        return g_base_1.multiplyVec2(invertMatrix, v);
    }
    return v;
}
function getRefXY(element, x, y) {
    // @ts-ignore
    var totalMatrix = element.getTotalMatrix();
    if (totalMatrix) {
        var _a = invertFromMatrix([x, y, 1], totalMatrix), refX = _a[0], refY = _a[1];
        return [refX, refY];
    }
    return [x, y];
}
// 拾取前的检测，只有通过检测才能继续拾取
function preTest(element, x, y) {
    // @ts-ignore
    if (element.isCanvas && element.isCanvas()) {
        return true;
    }
    // 不允许被拾取，则返回 null
    // @ts-ignore
    if (!g_base_1.isAllowCapture(element) || element.cfg.isInView === false) {
        return false;
    }
    if (element.cfg.clipShape) {
        // 如果存在 clip
        var _a = getRefXY(element, x, y), refX = _a[0], refY = _a[1];
        if (element.isClipped(refX, refY)) {
            return false;
        }
    }
    // @ts-ignore ，这个地方调用过于频繁
    var bbox = element.cfg.cacheCanvasBBox || element.getCanvasBBox();
    // 如果没有缓存 bbox，则说明不可见
    // 注释掉的这段可能会加速拾取，上面的语句改写成 const bbox = element.cfg.cacheCanvasBBox;
    // 这时候的拾取假设图形/分组在上一次绘制都在视窗内，但是上面已经判定了 isInView 所以意义不大
    // 现在还调用 element.getCanvasBBox(); 一个很大的原因是便于单元测试
    // if (!bbox) {
    //   return false;
    // }
    if (!(x >= bbox.minX && x <= bbox.maxX && y >= bbox.minY && y <= bbox.maxY)) {
        return false;
    }
    return true;
}
// 这个方法复写了 g-base 的 getShape
function getShape(container, x, y) {
    // 没有通过检测，则返回 null
    if (!preTest(container, x, y)) {
        return null;
    }
    var shape = null;
    var children = container.getChildren();
    var count = children.length;
    for (var i = count - 1; i >= 0; i--) {
        var child = children[i];
        if (child.isGroup()) {
            shape = getShape(child, x, y);
        }
        else if (preTest(child, x, y)) {
            var curShape = child;
            var _a = getRefXY(child, x, y), refX = _a[0], refY = _a[1];
            // @ts-ignore
            if (curShape.isInShape(refX, refY)) {
                shape = child;
            }
        }
        if (shape) {
            break;
        }
    }
    return shape;
}
exports.getShape = getShape;
//# sourceMappingURL=hit.js.map

/***/ }),

/***/ "f303":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isCallable = __webpack_require__("fe72");
var definePropertyModule = __webpack_require__("80ea");
var makeBuiltIn = __webpack_require__("40cb");
var defineGlobalProperty = __webpack_require__("c1b9");

module.exports = function (O, key, value, options) {
  if (!options) options = {};
  var simple = options.enumerable;
  var name = options.name !== undefined ? options.name : key;
  if (isCallable(value)) makeBuiltIn(value, name, options);
  if (options.global) {
    if (simple) O[key] = value;
    else defineGlobalProperty(key, value);
  } else {
    try {
      if (!options.unsafe) delete O[key];
      else if (O[key]) simple = true;
    } catch (error) { /* empty */ }
    if (simple) O[key] = value;
    else definePropertyModule.f(O, key, {
      value: value,
      enumerable: false,
      configurable: !options.nonConfigurable,
      writable: !options.nonWritable
    });
  } return O;
};


/***/ }),

/***/ "f32d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var fails = __webpack_require__("e835");
var toObject = __webpack_require__("8ec0");
var nativeGetPrototypeOf = __webpack_require__("4b29");
var CORRECT_PROTOTYPE_GETTER = __webpack_require__("9d6b");

var FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });

// `Object.getPrototypeOf` method
// https://tc39.es/ecma262/#sec-object.getprototypeof
$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {
  getPrototypeOf: function getPrototypeOf(it) {
    return nativeGetPrototypeOf(toObject(it));
  }
});



/***/ }),

/***/ "f4b9":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var wellKnownSymbol = __webpack_require__("9a0b");
var Iterators = __webpack_require__("b462");

var ITERATOR = wellKnownSymbol('iterator');
var ArrayPrototype = Array.prototype;

// check on default Array iterator
module.exports = function (it) {
  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);
};


/***/ }),

/***/ "f600":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");

module.exports = uncurryThis([].slice);


/***/ }),

/***/ "f60d":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var uncurryThis = __webpack_require__("1043");
var requireObjectCoercible = __webpack_require__("deed");
var toString = __webpack_require__("502b");
var whitespaces = __webpack_require__("a2e1");

var replace = uncurryThis(''.replace);
var ltrim = RegExp('^[' + whitespaces + ']+');
var rtrim = RegExp('(^|[^' + whitespaces + '])[' + whitespaces + ']+$');

// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation
var createMethod = function (TYPE) {
  return function ($this) {
    var string = toString(requireObjectCoercible($this));
    if (TYPE & 1) string = replace(string, ltrim, '');
    if (TYPE & 2) string = replace(string, rtrim, '$1');
    return string;
  };
};

module.exports = {
  // `String.prototype.{ trimLeft, trimStart }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimstart
  start: createMethod(1),
  // `String.prototype.{ trimRight, trimEnd }` methods
  // https://tc39.es/ecma262/#sec-string.prototype.trimend
  end: createMethod(2),
  // `String.prototype.trim` method
  // https://tc39.es/ecma262/#sec-string.prototype.trim
  trim: createMethod(3)
};


/***/ }),

/***/ "f6cb":
/***/ (function(module, exports, __webpack_require__) {

var mapCacheClear = __webpack_require__("d835"),
    mapCacheDelete = __webpack_require__("b56a"),
    mapCacheGet = __webpack_require__("33f2"),
    mapCacheHas = __webpack_require__("9394"),
    mapCacheSet = __webpack_require__("1664");

/**
 * Creates a map cache object to store key-value pairs.
 *
 * @private
 * @constructor
 * @param {Array} [entries] The key-value pairs to cache.
 */
function MapCache(entries) {
  var index = -1,
      length = entries == null ? 0 : entries.length;

  this.clear();
  while (++index < length) {
    var entry = entries[index];
    this.set(entry[0], entry[1]);
  }
}

// Add methods to `MapCache`.
MapCache.prototype.clear = mapCacheClear;
MapCache.prototype['delete'] = mapCacheDelete;
MapCache.prototype.get = mapCacheGet;
MapCache.prototype.has = mapCacheHas;
MapCache.prototype.set = mapCacheSet;

module.exports = MapCache;


/***/ }),

/***/ "f763":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var call = __webpack_require__("ded0");
var getBuiltIn = __webpack_require__("4fed");
var wellKnownSymbol = __webpack_require__("9a0b");
var defineBuiltIn = __webpack_require__("f303");

module.exports = function () {
  var Symbol = getBuiltIn('Symbol');
  var SymbolPrototype = Symbol && Symbol.prototype;
  var valueOf = SymbolPrototype && SymbolPrototype.valueOf;
  var TO_PRIMITIVE = wellKnownSymbol('toPrimitive');

  if (SymbolPrototype && !SymbolPrototype[TO_PRIMITIVE]) {
    // `Symbol.prototype[@@toPrimitive]` method
    // https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive
    // eslint-disable-next-line no-unused-vars -- required for .length
    defineBuiltIn(SymbolPrototype, TO_PRIMITIVE, function (hint) {
      return call(valueOf, this);
    }, { arity: 1 });
  }
};


/***/ }),

/***/ "f823":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var store = __webpack_require__("50c7");

module.exports = function (key, value) {
  return store[key] || (store[key] = value || {});
};


/***/ }),

/***/ "f868":
/***/ (function(module, exports) {

/**
 * Checks if `value` is classified as an `Array` object.
 *
 * @static
 * @memberOf _
 * @since 0.1.0
 * @category Lang
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is an array, else `false`.
 * @example
 *
 * _.isArray([1, 2, 3]);
 * // => true
 *
 * _.isArray(document.body.children);
 * // => false
 *
 * _.isArray('abc');
 * // => false
 *
 * _.isArray(_.noop);
 * // => false
 */
var isArray = Array.isArray;

module.exports = isArray;


/***/ }),

/***/ "f8dc":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var anObject = __webpack_require__("9774");
var iteratorClose = __webpack_require__("454d");

// call something on iterator step with safe closing on error
module.exports = function (iterator, fn, value, ENTRIES) {
  try {
    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);
  } catch (error) {
    iteratorClose(iterator, 'throw', error);
  }
};


/***/ }),

/***/ "f951":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview 文本
 * @author dxq613@gmail.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var base_1 = __webpack_require__("98ae");
var util_1 = __webpack_require__("1e49");
var g_base_1 = __webpack_require__("ae4c");
var Text = /** @class */ (function (_super) {
    tslib_1.__extends(Text, _super);
    function Text() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    // 默认文本属性
    Text.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, text: null, fontSize: 12, fontFamily: 'sans-serif', fontStyle: 'normal', fontWeight: 'normal', fontVariant: 'normal', textAlign: 'start', textBaseline: 'bottom' });
    };
    // 仅仅使用包围盒检测来进行拾取
    Text.prototype.isOnlyHitBox = function () {
        return true;
    };
    // 初始化时组合 font，同时判断 text 是否换行
    Text.prototype.initAttrs = function (attrs) {
        this._assembleFont();
        if (attrs.text) {
            this._setText(attrs.text);
        }
    };
    // 组装字体
    Text.prototype._assembleFont = function () {
        var attrs = this.attrs;
        attrs.font = g_base_1.assembleFont(attrs);
    };
    // 如果文本换行，则缓存数组
    Text.prototype._setText = function (text) {
        var textArr = null;
        if (util_1.isString(text) && text.indexOf('\n') !== -1) {
            textArr = text.split('\n');
        }
        this.set('textArr', textArr);
    };
    // 更新属性时，检测是否更改了 font、text
    Text.prototype.onAttrChange = function (name, value, originValue) {
        _super.prototype.onAttrChange.call(this, name, value, originValue);
        if (name.startsWith('font')) {
            this._assembleFont();
        }
        if (name === 'text') {
            this._setText(value);
        }
    };
    // 这个方法在 text 时没有可以做的事情，如果要支持文字背景时可以考虑
    // createPath(context) {
    // }
    // 如果文本多行，需要获取文本间距
    Text.prototype._getSpaceingY = function () {
        var attrs = this.attrs;
        var lineHeight = attrs.lineHeight;
        var fontSize = attrs.fontSize * 1;
        return lineHeight ? lineHeight - fontSize : fontSize * 0.14;
    };
    // 绘制文本，考虑多行的场景
    Text.prototype._drawTextArr = function (context, textArr, isFill) {
        var attrs = this.attrs;
        var textBaseline = attrs.textBaseline;
        var x = attrs.x;
        var y = attrs.y;
        var fontSize = attrs.fontSize * 1;
        var spaceingY = this._getSpaceingY();
        var height = g_base_1.getTextHeight(attrs.text, attrs.fontSize, attrs.lineHeight);
        var subY;
        util_1.each(textArr, function (subText, index) {
            subY = y + index * (spaceingY + fontSize) - height + fontSize; // bottom;
            if (textBaseline === 'middle')
                subY += height - fontSize - (height - fontSize) / 2;
            if (textBaseline === 'top')
                subY += height - fontSize;
            if (!util_1.isNil(subText)) {
                if (isFill) {
                    context.fillText(subText, x, subY);
                }
                else {
                    context.strokeText(subText, x, subY);
                }
            }
        });
    };
    // 绘制文本，同时考虑填充和绘制边框
    Text.prototype._drawText = function (context, isFill) {
        var attrs = this.attr();
        var x = attrs.x;
        var y = attrs.y;
        var textArr = this.get('textArr');
        if (textArr) {
            this._drawTextArr(context, textArr, isFill);
        }
        else {
            var text = attrs.text;
            if (!util_1.isNil(text)) {
                if (isFill) {
                    context.fillText(text, x, y);
                }
                else {
                    context.strokeText(text, x, y);
                }
            }
        }
    };
    // 复写绘制和填充的逻辑：对于文本，应该先绘制边框，再进行填充
    Text.prototype.strokeAndFill = function (context) {
        var _a = this.attrs, lineWidth = _a.lineWidth, opacity = _a.opacity, strokeOpacity = _a.strokeOpacity, fillOpacity = _a.fillOpacity;
        if (this.isStroke()) {
            if (lineWidth > 0) {
                if (!util_1.isNil(strokeOpacity) && strokeOpacity !== 1) {
                    context.globalAlpha = opacity;
                }
                this.stroke(context);
            }
        }
        if (this.isFill()) {
            if (!util_1.isNil(fillOpacity) && fillOpacity !== 1) {
                context.globalAlpha = fillOpacity;
                this.fill(context);
                context.globalAlpha = opacity;
            }
            else {
                this.fill(context);
            }
        }
        this.afterDrawPath(context);
    };
    // 复写填充逻辑
    Text.prototype.fill = function (context) {
        this._drawText(context, true);
    };
    // 复写绘制边框的逻辑
    Text.prototype.stroke = function (context) {
        this._drawText(context, false);
    };
    return Text;
}(base_1.default));
exports.default = Text;
//# sourceMappingURL=text.js.map

/***/ }),

/***/ "f9fa":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var globalThis = __webpack_require__("92e2");

module.exports = globalThis;


/***/ }),

/***/ "faf7":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";

// EXPORTS
__webpack_require__.d(__webpack_exports__, "a", function() { return /* binding */ getEasing; });
__webpack_require__.d(__webpack_exports__, "b", function() { return /* binding */ registerEasing; });

// NAMESPACE OBJECT: ./node_modules/_d3-ease@1.0.7@d3-ease/src/index.js
var src_namespaceObject = {};
__webpack_require__.r(src_namespaceObject);
__webpack_require__.d(src_namespaceObject, "easeLinear", function() { return linear; });
__webpack_require__.d(src_namespaceObject, "easeQuad", function() { return quadInOut; });
__webpack_require__.d(src_namespaceObject, "easeQuadIn", function() { return quadIn; });
__webpack_require__.d(src_namespaceObject, "easeQuadOut", function() { return quadOut; });
__webpack_require__.d(src_namespaceObject, "easeQuadInOut", function() { return quadInOut; });
__webpack_require__.d(src_namespaceObject, "easeCubic", function() { return cubicInOut; });
__webpack_require__.d(src_namespaceObject, "easeCubicIn", function() { return cubicIn; });
__webpack_require__.d(src_namespaceObject, "easeCubicOut", function() { return cubicOut; });
__webpack_require__.d(src_namespaceObject, "easeCubicInOut", function() { return cubicInOut; });
__webpack_require__.d(src_namespaceObject, "easePoly", function() { return polyInOut; });
__webpack_require__.d(src_namespaceObject, "easePolyIn", function() { return polyIn; });
__webpack_require__.d(src_namespaceObject, "easePolyOut", function() { return polyOut; });
__webpack_require__.d(src_namespaceObject, "easePolyInOut", function() { return polyInOut; });
__webpack_require__.d(src_namespaceObject, "easeSin", function() { return sinInOut; });
__webpack_require__.d(src_namespaceObject, "easeSinIn", function() { return sinIn; });
__webpack_require__.d(src_namespaceObject, "easeSinOut", function() { return sinOut; });
__webpack_require__.d(src_namespaceObject, "easeSinInOut", function() { return sinInOut; });
__webpack_require__.d(src_namespaceObject, "easeExp", function() { return expInOut; });
__webpack_require__.d(src_namespaceObject, "easeExpIn", function() { return expIn; });
__webpack_require__.d(src_namespaceObject, "easeExpOut", function() { return expOut; });
__webpack_require__.d(src_namespaceObject, "easeExpInOut", function() { return expInOut; });
__webpack_require__.d(src_namespaceObject, "easeCircle", function() { return circleInOut; });
__webpack_require__.d(src_namespaceObject, "easeCircleIn", function() { return circleIn; });
__webpack_require__.d(src_namespaceObject, "easeCircleOut", function() { return circleOut; });
__webpack_require__.d(src_namespaceObject, "easeCircleInOut", function() { return circleInOut; });
__webpack_require__.d(src_namespaceObject, "easeBounce", function() { return bounceOut; });
__webpack_require__.d(src_namespaceObject, "easeBounceIn", function() { return bounceIn; });
__webpack_require__.d(src_namespaceObject, "easeBounceOut", function() { return bounceOut; });
__webpack_require__.d(src_namespaceObject, "easeBounceInOut", function() { return bounceInOut; });
__webpack_require__.d(src_namespaceObject, "easeBack", function() { return backInOut; });
__webpack_require__.d(src_namespaceObject, "easeBackIn", function() { return backIn; });
__webpack_require__.d(src_namespaceObject, "easeBackOut", function() { return backOut; });
__webpack_require__.d(src_namespaceObject, "easeBackInOut", function() { return backInOut; });
__webpack_require__.d(src_namespaceObject, "easeElastic", function() { return elastic_elasticOut; });
__webpack_require__.d(src_namespaceObject, "easeElasticIn", function() { return elastic_elasticIn; });
__webpack_require__.d(src_namespaceObject, "easeElasticOut", function() { return elastic_elasticOut; });
__webpack_require__.d(src_namespaceObject, "easeElasticInOut", function() { return elastic_elasticInOut; });

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/linear.js
function linear(t) {
  return +t;
}

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/quad.js
function quadIn(t) {
  return t * t;
}

function quadOut(t) {
  return t * (2 - t);
}

function quadInOut(t) {
  return ((t *= 2) <= 1 ? t * t : --t * (2 - t) + 1) / 2;
}

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/cubic.js
function cubicIn(t) {
  return t * t * t;
}

function cubicOut(t) {
  return --t * t * t + 1;
}

function cubicInOut(t) {
  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;
}

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/poly.js
var exponent = 3;

var polyIn = (function custom(e) {
  e = +e;

  function polyIn(t) {
    return Math.pow(t, e);
  }

  polyIn.exponent = custom;

  return polyIn;
})(exponent);

var polyOut = (function custom(e) {
  e = +e;

  function polyOut(t) {
    return 1 - Math.pow(1 - t, e);
  }

  polyOut.exponent = custom;

  return polyOut;
})(exponent);

var polyInOut = (function custom(e) {
  e = +e;

  function polyInOut(t) {
    return ((t *= 2) <= 1 ? Math.pow(t, e) : 2 - Math.pow(2 - t, e)) / 2;
  }

  polyInOut.exponent = custom;

  return polyInOut;
})(exponent);

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/sin.js
var pi = Math.PI,
    halfPi = pi / 2;

function sinIn(t) {
  return (+t === 1) ? 1 : 1 - Math.cos(t * halfPi);
}

function sinOut(t) {
  return Math.sin(t * halfPi);
}

function sinInOut(t) {
  return (1 - Math.cos(pi * t)) / 2;
}

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/math.js
// tpmt is two power minus ten times t scaled to [0,1]
function tpmt(x) {
  return (Math.pow(2, -10 * x) - 0.0009765625) * 1.0009775171065494;
}

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/exp.js


function expIn(t) {
  return tpmt(1 - +t);
}

function expOut(t) {
  return 1 - tpmt(t);
}

function expInOut(t) {
  return ((t *= 2) <= 1 ? tpmt(1 - t) : 2 - tpmt(t - 1)) / 2;
}

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/circle.js
function circleIn(t) {
  return 1 - Math.sqrt(1 - t * t);
}

function circleOut(t) {
  return Math.sqrt(1 - --t * t);
}

function circleInOut(t) {
  return ((t *= 2) <= 1 ? 1 - Math.sqrt(1 - t * t) : Math.sqrt(1 - (t -= 2) * t) + 1) / 2;
}

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/bounce.js
var b1 = 4 / 11,
    b2 = 6 / 11,
    b3 = 8 / 11,
    b4 = 3 / 4,
    b5 = 9 / 11,
    b6 = 10 / 11,
    b7 = 15 / 16,
    b8 = 21 / 22,
    b9 = 63 / 64,
    b0 = 1 / b1 / b1;

function bounceIn(t) {
  return 1 - bounceOut(1 - t);
}

function bounceOut(t) {
  return (t = +t) < b1 ? b0 * t * t : t < b3 ? b0 * (t -= b2) * t + b4 : t < b6 ? b0 * (t -= b5) * t + b7 : b0 * (t -= b8) * t + b9;
}

function bounceInOut(t) {
  return ((t *= 2) <= 1 ? 1 - bounceOut(1 - t) : bounceOut(t - 1) + 1) / 2;
}

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/back.js
var overshoot = 1.70158;

var backIn = (function custom(s) {
  s = +s;

  function backIn(t) {
    return (t = +t) * t * (s * (t - 1) + t);
  }

  backIn.overshoot = custom;

  return backIn;
})(overshoot);

var backOut = (function custom(s) {
  s = +s;

  function backOut(t) {
    return --t * t * ((t + 1) * s + t) + 1;
  }

  backOut.overshoot = custom;

  return backOut;
})(overshoot);

var backInOut = (function custom(s) {
  s = +s;

  function backInOut(t) {
    return ((t *= 2) < 1 ? t * t * ((s + 1) * t - s) : (t -= 2) * t * ((s + 1) * t + s) + 2) / 2;
  }

  backInOut.overshoot = custom;

  return backInOut;
})(overshoot);

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/elastic.js


var tau = 2 * Math.PI,
    amplitude = 1,
    period = 0.3;

var elastic_elasticIn = (function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticIn(t) {
    return a * tpmt(-(--t)) * Math.sin((s - t) / p);
  }

  elasticIn.amplitude = function(a) { return custom(a, p * tau); };
  elasticIn.period = function(p) { return custom(a, p); };

  return elasticIn;
})(amplitude, period);

var elastic_elasticOut = (function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticOut(t) {
    return 1 - a * tpmt(t = +t) * Math.sin((t + s) / p);
  }

  elasticOut.amplitude = function(a) { return custom(a, p * tau); };
  elasticOut.period = function(p) { return custom(a, p); };

  return elasticOut;
})(amplitude, period);

var elastic_elasticInOut = (function custom(a, p) {
  var s = Math.asin(1 / (a = Math.max(1, a))) * (p /= tau);

  function elasticInOut(t) {
    return ((t = t * 2 - 1) < 0
        ? a * tpmt(-t) * Math.sin((s - t) / p)
        : 2 - a * tpmt(t) * Math.sin((s + t) / p)) / 2;
  }

  elasticInOut.amplitude = function(a) { return custom(a, p * tau); };
  elasticInOut.period = function(p) { return custom(a, p); };

  return elasticInOut;
})(amplitude, period);

// CONCATENATED MODULE: ./node_modules/_d3-ease@1.0.7@d3-ease/src/index.js




















// CONCATENATED MODULE: ./node_modules/_@antv_g-base@0.5.16@@antv/g-base/esm/animate/register.js

var EASING_MAP = {};
/**
 * 根据名称获取对应的动画缓动函数
 * @param type 动画缓动函数名称
 */
function getEasing(type) {
    // 默认从 d3-ease 中获取
    return EASING_MAP[type.toLowerCase()] || src_namespaceObject[type];
}
/**
 * 注册动画缓动函数
 * @param type 动画缓动函数名称
 * @param easeFn 动画缓动函数
 */
function registerEasing(type, easeFn) {
    EASING_MAP[type.toLowerCase()] = easeFn;
}
//# sourceMappingURL=register.js.map

/***/ }),

/***/ "fbae":
/***/ (function(module, exports) {

/**
 * Gets the stack value for `key`.
 *
 * @private
 * @name get
 * @memberOf Stack
 * @param {string} key The key of the value to get.
 * @returns {*} Returns the entry value.
 */
function stackGet(key) {
  return this.__data__.get(key);
}

module.exports = stackGet;


/***/ }),

/***/ "fc32":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var $ = __webpack_require__("a884");
var newPromiseCapabilityModule = __webpack_require__("34b0");
var FORCED_PROMISE_CONSTRUCTOR = __webpack_require__("7cb3").CONSTRUCTOR;

// `Promise.reject` method
// https://tc39.es/ecma262/#sec-promise.reject
$({ target: 'Promise', stat: true, forced: FORCED_PROMISE_CONSTRUCTOR }, {
  reject: function reject(r) {
    var capability = newPromiseCapabilityModule.f(this);
    var capabilityReject = capability.reject;
    capabilityReject(r);
    return capability.promise;
  }
});


/***/ }),

/***/ "fc3c":
/***/ (function(module, exports, __webpack_require__) {

var baseRest = __webpack_require__("761b"),
    isIterateeCall = __webpack_require__("4dd3");

/**
 * Creates a function like `_.assign`.
 *
 * @private
 * @param {Function} assigner The function to assign values.
 * @returns {Function} Returns the new assigner function.
 */
function createAssigner(assigner) {
  return baseRest(function(object, sources) {
    var index = -1,
        length = sources.length,
        customizer = length > 1 ? sources[length - 1] : undefined,
        guard = length > 2 ? sources[2] : undefined;

    customizer = (assigner.length > 3 && typeof customizer == 'function')
      ? (length--, customizer)
      : undefined;

    if (guard && isIterateeCall(sources[0], sources[1], guard)) {
      customizer = length < 3 ? undefined : customizer;
      length = 1;
    }
    object = Object(object);
    while (++index < length) {
      var source = sources[index];
      if (source) {
        assigner(object, source, index, customizer);
      }
    }
    return object;
  });
}

module.exports = createAssigner;


/***/ }),

/***/ "fc6f":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var getBuiltIn = __webpack_require__("4fed");
var uncurryThis = __webpack_require__("1043");
var getOwnPropertyNamesModule = __webpack_require__("8c7b");
var getOwnPropertySymbolsModule = __webpack_require__("a826");
var anObject = __webpack_require__("9774");

var concat = uncurryThis([].concat);

// all object keys, includes non-enumerable and symbols
module.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {
  var keys = getOwnPropertyNamesModule.f(anObject(it));
  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;
  return getOwnPropertySymbols ? concat(keys, getOwnPropertySymbols(it)) : keys;
};


/***/ }),

/***/ "fcce":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

/**
 * @fileoverview 图片
 * @author dxq613@gmail.com
 */
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = __webpack_require__("9a80");
var base_1 = __webpack_require__("98ae");
var util_1 = __webpack_require__("1e49");
function isCanvas(dom) {
    return dom instanceof HTMLElement && util_1.isString(dom.nodeName) && dom.nodeName.toUpperCase() === 'CANVAS';
}
var ImageShape = /** @class */ (function (_super) {
    tslib_1.__extends(ImageShape, _super);
    function ImageShape() {
        return _super !== null && _super.apply(this, arguments) || this;
    }
    ImageShape.prototype.getDefaultAttrs = function () {
        var attrs = _super.prototype.getDefaultAttrs.call(this);
        return tslib_1.__assign(tslib_1.__assign({}, attrs), { x: 0, y: 0, width: 0, height: 0 });
    };
    ImageShape.prototype.initAttrs = function (attrs) {
        this._setImage(attrs.img);
    };
    // image 不计算 stroke
    ImageShape.prototype.isStroke = function () {
        return false;
    };
    // 仅仅使用包围盒检测来进行拾取
    // 所以不需要复写 isInStrokeOrPath 的方法
    ImageShape.prototype.isOnlyHitBox = function () {
        return true;
    };
    ImageShape.prototype._afterLoading = function () {
        if (this.get('toDraw') === true) {
            var canvas = this.get('canvas');
            if (canvas) {
                // 这段应该改成局部渲染
                canvas.draw();
            }
            else {
                // 这种方式如果发生遮挡会出现问题
                this.createPath(this.get('context'));
            }
        }
    };
    ImageShape.prototype._setImage = function (img) {
        var _this = this;
        var attrs = this.attrs;
        if (util_1.isString(img)) {
            var image_1 = new Image();
            image_1.onload = function () {
                // 图片未加载完，则已经被销毁
                if (_this.destroyed) {
                    return false;
                }
                // 缓存原始地址，可以做对比，防止重复加载图片
                // 如果考虑到在加载过程中可能替换 img 属性，则情况更加复杂
                // this.set('imgSrc', img);
                // 这里会循环调用 _setImage 方法，但不会再走这个分支
                _this.attr('img', image_1);
                _this.set('loading', false);
                _this._afterLoading();
                var callback = _this.get('callback');
                if (callback) {
                    callback.call(_this);
                }
            };
            // 设置跨域
            image_1.crossOrigin = 'Anonymous';
            image_1.src = img;
            // loading 过程中不绘制
            this.set('loading', true);
        }
        else if (img instanceof Image) {
            // 如果是一个 image 对象，则设置宽高
            if (!attrs.width) {
                attrs.width = img.width;
            }
            if (!attrs.height) {
                attrs.height = img.height;
            }
        }
        else if (isCanvas(img)) {
            // 如果设置了 canvas 对象
            if (!attrs.width) {
                attrs.width = Number(img.getAttribute('width'));
            }
            if (!attrs.height) {
                attrs.height, Number(img.getAttribute('height'));
            }
        }
    };
    ImageShape.prototype.onAttrChange = function (name, value, originValue) {
        _super.prototype.onAttrChange.call(this, name, value, originValue);
        // 如果加载的已经是当前图片，则不再处理
        if (name === 'img') {
            // 可以加缓冲，&& this.get('imgSrc') !== value
            this._setImage(value);
        }
    };
    ImageShape.prototype.createPath = function (context) {
        // 正在加载则不绘制
        if (this.get('loading')) {
            this.set('toDraw', true); // 加载完成后绘制
            this.set('context', context);
            return;
        }
        var attrs = this.attr();
        var x = attrs.x, y = attrs.y, width = attrs.width, height = attrs.height, sx = attrs.sx, sy = attrs.sy, swidth = attrs.swidth, sheight = attrs.sheight;
        var img = attrs.img;
        if (img instanceof Image || isCanvas(img)) {
            if (!util_1.isNil(sx) && !util_1.isNil(sy) && !util_1.isNil(swidth) && !util_1.isNil(sheight)) {
                context.drawImage(img, sx, sy, swidth, sheight, x, y, width, height);
            }
            else {
                context.drawImage(img, x, y, width, height);
            }
        }
    };
    return ImageShape;
}(base_1.default));
exports.default = ImageShape;
//# sourceMappingURL=image.js.map

/***/ }),

/***/ "fd5d":
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, "parsePath", function() { return /* reexport */ parse_path; });
__webpack_require__.d(__webpack_exports__, "catmullRom2Bezier", function() { return /* reexport */ catmull_rom_2_bezier; });
__webpack_require__.d(__webpack_exports__, "fillPath", function() { return /* reexport */ fillPath; });
__webpack_require__.d(__webpack_exports__, "fillPathByDiff", function() { return /* reexport */ fillPathByDiff; });
__webpack_require__.d(__webpack_exports__, "formatPath", function() { return /* reexport */ formatPath; });
__webpack_require__.d(__webpack_exports__, "pathIntersection", function() { return /* reexport */ pathIntersection; });
__webpack_require__.d(__webpack_exports__, "parsePathArray", function() { return /* reexport */ parsePathArray; });
__webpack_require__.d(__webpack_exports__, "parsePathString", function() { return /* reexport */ parsePathString; });
__webpack_require__.d(__webpack_exports__, "path2Curve", function() { return /* reexport */ pathToCurve; });
__webpack_require__.d(__webpack_exports__, "path2Absolute", function() { return /* reexport */ pathToAbsolute; });
__webpack_require__.d(__webpack_exports__, "reactPath", function() { return /* reexport */ rectPath; });
__webpack_require__.d(__webpack_exports__, "getArcParams", function() { return /* reexport */ getArcParams; });
__webpack_require__.d(__webpack_exports__, "path2Segments", function() { return /* reexport */ getSegments; });
__webpack_require__.d(__webpack_exports__, "getLineIntersect", function() { return /* reexport */ getLineIntersect; });
__webpack_require__.d(__webpack_exports__, "isPolygonsIntersect", function() { return /* reexport */ isPolygonsIntersect; });
__webpack_require__.d(__webpack_exports__, "isPointInPolygon", function() { return /* reexport */ isInPolygon; });

// EXTERNAL MODULE: ./node_modules/_@antv_util@2.0.17@@antv/util/esm/index.js + 110 modules
var esm = __webpack_require__("6d77");

// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/parse-path.js

var regexTags = /[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig;
var regexDot = /[^\s\,]+/ig;
function parsePath(p) {
    var path = p || [];
    if (Object(esm["isArray"])(path)) {
        return path;
    }
    if (Object(esm["isString"])(path)) {
        path = path.match(regexTags);
        Object(esm["each"])(path, function (item, index) {
            // @ts-ignore
            item = item.match(regexDot);
            if (item[0].length > 1) {
                var tag = item[0].charAt(0);
                // @ts-ignore
                item.splice(1, 0, item[0].substr(1));
                // @ts-ignore
                item[0] = tag;
            }
            // @ts-ignore
            Object(esm["each"])(item, function (sub, i) {
                if (!isNaN(sub)) {
                    // @ts-ignore
                    item[i] = +sub;
                }
            });
            // @ts-ignore
            path[index] = item;
        });
        return path;
    }
}
/* harmony default export */ var parse_path = (parsePath);
//# sourceMappingURL=parse-path.js.map
// EXTERNAL MODULE: ./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/index.js + 1 modules
var _gl_matrix_3_4_3_gl_matrix_esm = __webpack_require__("9178");

// CONCATENATED MODULE: ./node_modules/_@antv_matrix-util@3.0.4@@antv/matrix-util/esm/ext.js
/**
 * @description 扩展方法，提供 gl-matrix 为提供的方法
 * */

function leftTranslate(out, a, v) {
    var transMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];
    _gl_matrix_3_4_3_gl_matrix_esm["a" /* mat3 */].fromTranslation(transMat, v);
    return _gl_matrix_3_4_3_gl_matrix_esm["a" /* mat3 */].multiply(out, transMat, a);
}
function leftRotate(out, a, rad) {
    var rotateMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];
    _gl_matrix_3_4_3_gl_matrix_esm["a" /* mat3 */].fromRotation(rotateMat, rad);
    return _gl_matrix_3_4_3_gl_matrix_esm["a" /* mat3 */].multiply(out, rotateMat, a);
}
function leftScale(out, a, v) {
    var scaleMat = [0, 0, 0, 0, 0, 0, 0, 0, 0];
    _gl_matrix_3_4_3_gl_matrix_esm["a" /* mat3 */].fromScaling(scaleMat, v);
    return _gl_matrix_3_4_3_gl_matrix_esm["a" /* mat3 */].multiply(out, scaleMat, a);
}
function leftMultiply(out, a, a1) {
    return _gl_matrix_3_4_3_gl_matrix_esm["a" /* mat3 */].multiply(out, a1, a);
}
/**
 * 根据 actions 来做 transform
 * @param m
 * @param actions
 */
function transform(m, actions) {
    var matrix = m ? [].concat(m) : [1, 0, 0, 0, 1, 0, 0, 0, 1];
    for (var i = 0, len = actions.length; i < len; i++) {
        var action = actions[i];
        switch (action[0]) {
            case 't':
                leftTranslate(matrix, matrix, [action[1], action[2]]);
                break;
            case 's':
                leftScale(matrix, matrix, [action[1], action[2]]);
                break;
            case 'r':
                leftRotate(matrix, matrix, action[1]);
                break;
            case 'm':
                leftMultiply(matrix, matrix, action[1]);
                break;
            default:
                break;
        }
    }
    return matrix;
}
/**
 * 向量 v1 到 向量 v2 夹角的方向
 * @param  {Array} v1 向量
 * @param  {Array} v2 向量
 * @return {Boolean} >= 0 顺时针 < 0 逆时针
 */
function direction(v1, v2) {
    return v1[0] * v2[1] - v2[0] * v1[1];
}
/**
 * 二维向量 v1 到 v2 的夹角
 * @param v1
 * @param v2
 * @param direct
 */
function angleTo(v1, v2, direct) {
    var ang = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].angle(v1, v2);
    var angleLargeThanPI = direction(v1, v2) >= 0;
    if (direct) {
        if (angleLargeThanPI) {
            return Math.PI * 2 - ang;
        }
        return ang;
    }
    if (angleLargeThanPI) {
        return ang;
    }
    return Math.PI * 2 - ang;
}
/**
 * 计算二维向量的垂直向量
 * @param out
 * @param v
 * @param flag
 */
function vertical(out, v, flag) {
    if (flag) {
        out[0] = v[1];
        out[1] = -1 * v[0];
    }
    else {
        out[0] = -1 * v[1];
        out[1] = v[0];
    }
    return out;
}
//# sourceMappingURL=ext.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_matrix-util@3.0.4@@antv/matrix-util/esm/index.js



//# sourceMappingURL=index.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/catmull-rom-2-bezier.js

function smoothBezier(points, smooth, isLoop, constraint) {
    var cps = [];
    var hasConstraint = !!constraint;
    var prevPoint;
    var nextPoint;
    var min;
    var max;
    var nextCp0;
    var cp1;
    var cp0;
    if (hasConstraint) {
        min = constraint[0], max = constraint[1];
        for (var i = 0, l = points.length; i < l; i += 1) {
            var point = points[i];
            min = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].min([0, 0], min, point);
            max = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].max([0, 0], max, point);
        }
    }
    for (var i = 0, len = points.length; i < len; i += 1) {
        var point = points[i];
        if (i === 0 && !isLoop) {
            cp0 = point;
        }
        else if (i === len - 1 && !isLoop) {
            cp1 = point;
            cps.push(cp0);
            cps.push(cp1);
        }
        else {
            var prevIdx = [i ? i - 1 : len - 1, i - 1][isLoop ? 0 : 1];
            prevPoint = points[prevIdx];
            nextPoint = points[isLoop ? (i + 1) % len : i + 1];
            var v = [0, 0];
            v = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].sub(v, nextPoint, prevPoint);
            v = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].scale(v, v, smooth);
            var d0 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].distance(point, prevPoint);
            var d1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].distance(point, nextPoint);
            var sum = d0 + d1;
            if (sum !== 0) {
                d0 /= sum;
                d1 /= sum;
            }
            var v1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].scale([0, 0], v, -d0);
            var v2 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].scale([0, 0], v, d1);
            cp1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].add([0, 0], point, v1);
            nextCp0 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].add([0, 0], point, v2);
            // 下一个控制点必须在这个点和下一个点之间
            nextCp0 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].min([0, 0], nextCp0, _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].max([0, 0], nextPoint, point));
            nextCp0 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].max([0, 0], nextCp0, _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].min([0, 0], nextPoint, point));
            // 重新计算 cp1 的值
            v1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].sub([0, 0], nextCp0, point);
            v1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].scale([0, 0], v1, -d0 / d1);
            cp1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].add([0, 0], point, v1);
            // 上一个控制点必须要在上一个点和这一个点之间
            cp1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].min([0, 0], cp1, _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].max([0, 0], prevPoint, point));
            cp1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].max([0, 0], cp1, _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].min([0, 0], prevPoint, point));
            // 重新计算 nextCp0 的值
            v2 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].sub([0, 0], point, cp1);
            v2 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].scale([0, 0], v2, d1 / d0);
            nextCp0 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].add([0, 0], point, v2);
            if (hasConstraint) {
                cp1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].max([0, 0], cp1, min);
                cp1 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].min([0, 0], cp1, max);
                nextCp0 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].max([0, 0], nextCp0, min);
                nextCp0 = _gl_matrix_3_4_3_gl_matrix_esm["b" /* vec2 */].min([0, 0], nextCp0, max);
            }
            cps.push(cp0);
            cps.push(cp1);
            cp0 = nextCp0;
        }
    }
    if (isLoop) {
        cps.push(cps.shift());
    }
    return cps;
}
/**
 * create bezier spline from catmull rom spline
 * @param {Array} crp Catmull Rom Points
 * @param {boolean} z Spline is loop
 * @param {Array} constraint Constraint
 */
function catmullRom2Bezier(crp, z, constraint) {
    if (z === void 0) { z = false; }
    if (constraint === void 0) { constraint = [
        [0, 0],
        [1, 1],
    ]; }
    var isLoop = !!z;
    var pointList = [];
    for (var i = 0, l = crp.length; i < l; i += 2) {
        pointList.push([crp[i], crp[i + 1]]);
    }
    var controlPointList = smoothBezier(pointList, 0.4, isLoop, constraint);
    var len = pointList.length;
    var d1 = [];
    var cp1;
    var cp2;
    var p;
    for (var i = 0; i < len - 1; i += 1) {
        cp1 = controlPointList[i * 2];
        cp2 = controlPointList[i * 2 + 1];
        p = pointList[i + 1];
        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);
    }
    if (isLoop) {
        cp1 = controlPointList[len];
        cp2 = controlPointList[len + 1];
        p = pointList[0];
        d1.push(['C', cp1[0], cp1[1], cp2[0], cp2[1], p[0], p[1]]);
    }
    return d1;
}
/* harmony default export */ var catmull_rom_2_bezier = (catmullRom2Bezier);
//# sourceMappingURL=catmull-rom-2-bezier.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/fill-path.js
function decasteljau(points, t) {
    var left = [];
    var right = [];
    function recurse(points, t) {
        if (points.length === 1) {
            left.push(points[0]);
            right.push(points[0]);
        }
        else {
            var middlePoints = [];
            for (var i = 0; i < points.length - 1; i++) {
                if (i === 0) {
                    left.push(points[0]);
                }
                if (i === points.length - 2) {
                    right.push(points[i + 1]);
                }
                middlePoints[i] = [(1 - t) * points[i][0] + t * points[i + 1][0], (1 - t) * points[i][1] + t * points[i + 1][1]];
            }
            recurse(middlePoints, t);
        }
    }
    if (points.length) {
        recurse(points, t);
    }
    return { left: left, right: right.reverse() };
}
function splitCurve(start, end, count) {
    var points = [[start[1], start[2]]];
    count = count || 2;
    var segments = [];
    if (end[0] === 'A') {
        points.push(end[6]);
        points.push(end[7]);
    }
    else if (end[0] === 'C') {
        points.push([end[1], end[2]]);
        points.push([end[3], end[4]]);
        points.push([end[5], end[6]]);
    }
    else if (end[0] === 'S' || end[0] === 'Q') {
        points.push([end[1], end[2]]);
        points.push([end[3], end[4]]);
    }
    else {
        points.push([end[1], end[2]]);
    }
    var leftSegments = points;
    var t = 1 / count;
    for (var i = 0; i < count - 1; i++) {
        var rt = t / (1 - t * i);
        var split = decasteljau(leftSegments, rt);
        segments.push(split.left);
        leftSegments = split.right;
    }
    segments.push(leftSegments);
    var result = segments.map(function (segment) {
        var cmd = [];
        if (segment.length === 4) {
            cmd.push('C');
            cmd = cmd.concat(segment[2]);
        }
        if (segment.length >= 3) {
            if (segment.length === 3) {
                cmd.push('Q');
            }
            cmd = cmd.concat(segment[1]);
        }
        if (segment.length === 2) {
            cmd.push('L');
        }
        cmd = cmd.concat(segment[segment.length - 1]);
        return cmd;
    });
    return result;
}
function splitSegment(start, end, count) {
    if (count === 1) {
        return [[].concat(start)];
    }
    var segments = [];
    if (end[0] === 'L' || end[0] === 'C' || end[0] === 'Q') {
        segments = segments.concat(splitCurve(start, end, count));
    }
    else {
        var temp = [].concat(start);
        if (temp[0] === 'M') {
            temp[0] = 'L';
        }
        for (var i = 0; i <= count - 1; i++) {
            segments.push(temp);
        }
    }
    return segments;
}
function fillPath(source, target) {
    if (source.length === 1) {
        return source;
    }
    var sourceLen = source.length - 1;
    var targetLen = target.length - 1;
    var ratio = sourceLen / targetLen;
    var segmentsToFill = [];
    if (source.length === 1 && source[0][0] === 'M') {
        for (var i = 0; i < targetLen - sourceLen; i++) {
            source.push(source[0]);
        }
        return source;
    }
    for (var i = 0; i < targetLen; i++) {
        var index = Math.floor(ratio * i);
        segmentsToFill[index] = (segmentsToFill[index] || 0) + 1;
    }
    var filled = segmentsToFill.reduce(function (filled, count, i) {
        if (i === sourceLen) {
            return filled.concat(source[sourceLen]);
        }
        return filled.concat(splitSegment(source[i], source[i + 1], count));
    }, []);
    filled.unshift(source[0]);
    if (target[targetLen] === 'Z' || target[targetLen] === 'z') {
        filled.push('Z');
    }
    return filled;
}
//# sourceMappingURL=fill-path.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/fill-path-by-diff.js

function getMinDiff(del, add, modify) {
    var type = null;
    var min = modify;
    if (add < min) {
        min = add;
        type = 'add';
    }
    if (del < min) {
        min = del;
        type = 'del';
    }
    return {
        type: type,
        min: min,
    };
}
/*
 * https://en.wikipedia.org/wiki/Levenshtein_distance
 * 计算两条path的编辑距离
 */
var levenshteinDistance = function (source, target) {
    var sourceLen = source.length;
    var targetLen = target.length;
    var sourceSegment, targetSegment;
    var temp = 0;
    if (sourceLen === 0 || targetLen === 0) {
        return null;
    }
    var dist = [];
    for (var i = 0; i <= sourceLen; i++) {
        dist[i] = [];
        dist[i][0] = { min: i };
    }
    for (var j = 0; j <= targetLen; j++) {
        dist[0][j] = { min: j };
    }
    for (var i = 1; i <= sourceLen; i++) {
        sourceSegment = source[i - 1];
        for (var j = 1; j <= targetLen; j++) {
            targetSegment = target[j - 1];
            if (Object(esm["isEqual"])(sourceSegment, targetSegment)) {
                temp = 0;
            }
            else {
                temp = 1;
            }
            var del = dist[i - 1][j].min + 1;
            var add = dist[i][j - 1].min + 1;
            var modify = dist[i - 1][j - 1].min + temp;
            dist[i][j] = getMinDiff(del, add, modify);
        }
    }
    return dist;
};
function fillPathByDiff(source, target) {
    var diffMatrix = levenshteinDistance(source, target);
    var sourceLen = source.length;
    var targetLen = target.length;
    var changes = [];
    var index = 1;
    var minPos = 1;
    // 如果source和target不是完全不相等
    // @ts-ignore
    if (diffMatrix[sourceLen][targetLen] !== sourceLen) {
        // 获取从source到target所需改动
        for (var i = 1; i <= sourceLen; i++) {
            var min = diffMatrix[i][i].min;
            minPos = i;
            for (var j = index; j <= targetLen; j++) {
                if (diffMatrix[i][j].min < min) {
                    min = diffMatrix[i][j].min;
                    minPos = j;
                }
            }
            index = minPos;
            if (diffMatrix[i][index].type) {
                changes.push({ index: i - 1, type: diffMatrix[i][index].type });
            }
        }
        // 对source进行增删path
        for (var i = changes.length - 1; i >= 0; i--) {
            index = changes[i].index;
            if (changes[i].type === 'add') {
                // @ts-ignore
                source.splice(index, 0, [].concat(source[index]));
            }
            else {
                // @ts-ignore
                source.splice(index, 1);
            }
        }
    }
    // source尾部补齐
    sourceLen = source.length;
    if (sourceLen < targetLen) {
        for (var i = 0; i < (targetLen - sourceLen); i++) {
            if (source[sourceLen - 1][0] === 'z' || source[sourceLen - 1][0] === 'Z') {
                // @ts-ignore
                source.splice(sourceLen - 2, 0, source[sourceLen - 2]);
            }
            else {
                // @ts-ignore
                source.push(source[sourceLen - 1]);
            }
        }
    }
    return source;
}
//# sourceMappingURL=fill-path-by-diff.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/format-path.js
/*
 * 抽取pathSegment中的关键点
 * M,L,A,Q,H,V一个端点
 * Q, S抽取一个端点，一个控制点
 * C抽取一个端点，两个控制点
 */
function _getSegmentPoints(segment) {
    var points = [];
    switch (segment[0]) {
        case 'M':
            points.push([segment[1], segment[2]]);
            break;
        case 'L':
            points.push([segment[1], segment[2]]);
            break;
        case 'A':
            points.push([segment[6], segment[7]]);
            break;
        case 'Q':
            points.push([segment[3], segment[4]]);
            points.push([segment[1], segment[2]]);
            break;
        case 'T':
            points.push([segment[1], segment[2]]);
            break;
        case 'C':
            points.push([segment[5], segment[6]]);
            points.push([segment[1], segment[2]]);
            points.push([segment[3], segment[4]]);
            break;
        case 'S':
            points.push([segment[3], segment[4]]);
            points.push([segment[1], segment[2]]);
            break;
        case 'H':
            points.push([segment[1], segment[1]]);
            break;
        case 'V':
            points.push([segment[1], segment[1]]);
            break;
        default:
    }
    return points;
}
// 将两个点均分成count个点
function _splitPoints(points, former, count) {
    var result = [].concat(points);
    var index;
    var t = 1 / (count + 1);
    var formerEnd = _getSegmentPoints(former)[0];
    for (var i = 1; i <= count; i++) {
        t *= i;
        index = Math.floor(points.length * t);
        if (index === 0) {
            result.unshift([formerEnd[0] * t + points[index][0] * (1 - t), formerEnd[1] * t + points[index][1] * (1 - t)]);
        }
        else {
            result.splice(index, 0, [formerEnd[0] * t + points[index][0] * (1 - t), formerEnd[1] * t + points[index][1] * (1 - t)]);
        }
    }
    return result;
}
function formatPath(fromPath, toPath) {
    if (fromPath.length <= 1) {
        return fromPath;
    }
    var points;
    for (var i = 0; i < toPath.length; i++) {
        if (fromPath[i][0] !== toPath[i][0]) {
            // 获取fromPath的pathSegment的端点，根据toPath的指令对其改造
            points = _getSegmentPoints(fromPath[i]);
            switch (toPath[i][0]) {
                case 'M':
                    fromPath[i] = ['M'].concat(points[0]);
                    break;
                case 'L':
                    fromPath[i] = ['L'].concat(points[0]);
                    break;
                case 'A':
                    fromPath[i] = [].concat(toPath[i]);
                    fromPath[i][6] = points[0][0];
                    fromPath[i][7] = points[0][1];
                    break;
                case 'Q':
                    if (points.length < 2) {
                        if (i > 0) {
                            points = _splitPoints(points, fromPath[i - 1], 1);
                        }
                        else {
                            fromPath[i] = toPath[i];
                            break;
                        }
                    }
                    fromPath[i] = ['Q'].concat(points.reduce(function (arr, i) { return arr.concat(i); }, []));
                    break;
                case 'T':
                    fromPath[i] = ['T'].concat(points[0]);
                    break;
                case 'C':
                    if (points.length < 3) {
                        if (i > 0) {
                            points = _splitPoints(points, fromPath[i - 1], 2);
                        }
                        else {
                            fromPath[i] = toPath[i];
                            break;
                        }
                    }
                    fromPath[i] = ['C'].concat(points.reduce(function (arr, i) { return arr.concat(i); }, []));
                    break;
                case 'S':
                    if (points.length < 2) {
                        if (i > 0) {
                            points = _splitPoints(points, fromPath[i - 1], 1);
                        }
                        else {
                            fromPath[i] = toPath[i];
                            break;
                        }
                    }
                    fromPath[i] = ['S'].concat(points.reduce(function (arr, i) { return arr.concat(i); }, []));
                    break;
                default:
                    fromPath[i] = toPath[i];
            }
        }
    }
    return fromPath;
}
//# sourceMappingURL=format-path.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/rect-path.js
function rectPath(x, y, w, h, r) {
    if (r) {
        return [
            ['M', +x + (+r), y],
            ['l', w - r * 2, 0],
            ['a', r, r, 0, 0, 1, r, r],
            ['l', 0, h - r * 2],
            ['a', r, r, 0, 0, 1, -r, r],
            ['l', r * 2 - w, 0],
            ['a', r, r, 0, 0, 1, -r, -r],
            ['l', 0, r * 2 - h],
            ['a', r, r, 0, 0, 1, r, -r],
            ['z'],
        ];
    }
    return [
        ['M', x, y],
        ['l', w, 0],
        ['l', 0, h],
        ['l', -w, 0],
        ['z'],
    ];
    // res.parsePathArray = parsePathArray;
}
//# sourceMappingURL=rect-path.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/parse-path-string.js

var SPACES = '\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029';
var PATH_COMMAND = new RegExp('([a-z])[' + SPACES + ',]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?[' + SPACES + ']*,?[' + SPACES + ']*)+)', 'ig');
var PATH_VALUES = new RegExp('(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[' + SPACES + ']*,?[' + SPACES + ']*', 'ig');
// Parses given path string into an array of arrays of path segments
function parsePathString(pathString) {
    if (!pathString) {
        return null;
    }
    if (Object(esm["isArray"])(pathString)) {
        return pathString;
    }
    var paramCounts = {
        a: 7,
        c: 6,
        o: 2,
        h: 1,
        l: 2,
        m: 2,
        r: 4,
        q: 4,
        s: 4,
        t: 2,
        v: 1,
        u: 3,
        z: 0,
    };
    var data = [];
    String(pathString).replace(PATH_COMMAND, function (a, b, c) {
        var params = [];
        var name = b.toLowerCase();
        c.replace(PATH_VALUES, function (a, b) {
            b && params.push(+b);
        });
        if (name === 'm' && params.length > 2) {
            data.push([b].concat(params.splice(0, 2)));
            name = 'l';
            b = b === 'm' ? 'l' : 'L';
        }
        if (name === 'o' && params.length === 1) {
            data.push([b, params[0]]);
        }
        if (name === 'r') {
            data.push([b].concat(params));
        }
        else {
            while (params.length >= paramCounts[name]) {
                data.push([b].concat(params.splice(0, paramCounts[name])));
                if (!paramCounts[name]) {
                    break;
                }
            }
        }
        return '';
    });
    return data;
}
//# sourceMappingURL=parse-path-string.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/path-2-absolute.js

var REGEX_MD = /[a-z]/;
function toSymmetry(p, c) {
    return [
        c[0] + (c[0] - p[0]),
        c[1] + (c[1] - p[1]),
    ];
}
function pathToAbsolute(pathString) {
    var pathArray = parsePathString(pathString);
    if (!pathArray || !pathArray.length) {
        return [
            ['M', 0, 0],
        ];
    }
    var needProcess = false; // 如果存在小写的命令或者 V,H,T,S 则需要处理
    for (var i = 0; i < pathArray.length; i++) {
        var cmd = pathArray[i][0];
        // 如果存在相对位置的命令，则中断返回
        if (REGEX_MD.test(cmd) || ['V', 'H', 'T', 'S'].indexOf(cmd) >= 0) {
            needProcess = true;
            break;
        }
    }
    // 如果不存在相对命令，则直接返回
    // 如果在业务上都写绝对路径，这种方式最快，仅做了一次检测
    if (!needProcess) {
        return pathArray;
    }
    var res = [];
    var x = 0;
    var y = 0;
    var mx = 0;
    var my = 0;
    var start = 0;
    var pa0;
    var dots;
    var first = pathArray[0];
    if (first[0] === 'M' || first[0] === 'm') {
        x = +first[1];
        y = +first[2];
        mx = x;
        my = y;
        start++;
        res[0] = ['M', x, y];
    }
    for (var i = start, ii = pathArray.length; i < ii; i++) {
        var pa = pathArray[i];
        var preParams = res[i - 1]; // 取前一个已经处理后的节点，否则会出现问题
        var r = [];
        var cmd = pa[0];
        var upCmd = cmd.toUpperCase();
        if (cmd !== upCmd) {
            r[0] = upCmd;
            switch (upCmd) {
                case 'A':
                    r[1] = pa[1];
                    r[2] = pa[2];
                    r[3] = pa[3];
                    r[4] = pa[4];
                    r[5] = pa[5];
                    r[6] = +pa[6] + x;
                    r[7] = +pa[7] + y;
                    break;
                case 'V':
                    r[1] = +pa[1] + y;
                    break;
                case 'H':
                    r[1] = +pa[1] + x;
                    break;
                case 'M':
                    mx = +pa[1] + x;
                    my = +pa[2] + y;
                    r[1] = mx;
                    r[2] = my;
                    break; // for lint
                default:
                    for (var j = 1, jj = pa.length; j < jj; j++) {
                        r[j] = +pa[j] + ((j % 2) ? x : y);
                    }
            }
        }
        else { // 如果本来已经大写，则不处理
            r = pathArray[i];
        }
        // 需要在外面统一做，同时处理 V,H,S,T 等特殊指令
        switch (upCmd) {
            case 'Z':
                x = +mx;
                y = +my;
                break;
            case 'H':
                x = r[1];
                r = ['L', x, y];
                break;
            case 'V':
                y = r[1];
                r = ['L', x, y];
                break;
            case 'T':
                x = r[1];
                y = r[2];
                // 以 x, y 为中心的，上一个控制点的对称点
                // 需要假设上一个节点的命令为 Q
                var symetricT = toSymmetry([preParams[1], preParams[2]], [preParams[3], preParams[4]]);
                r = ['Q', symetricT[0], symetricT[1], x, y];
                break;
            case 'S':
                x = r[r.length - 2];
                y = r[r.length - 1];
                // 以 x,y 为中心，取上一个控制点，
                // 需要假设上一个线段为 C 或者 S
                var length_1 = preParams.length;
                var symetricS = toSymmetry([preParams[length_1 - 4], preParams[length_1 - 3]], [preParams[length_1 - 2], preParams[length_1 - 1]]);
                r = ['C', symetricS[0], symetricS[1], r[1], r[2], x, y];
                break;
            case 'M':
                mx = r[r.length - 2];
                my = r[r.length - 1];
                break; // for lint
            default:
                x = r[r.length - 2];
                y = r[r.length - 1];
        }
        res.push(r);
    }
    return res;
}
//# sourceMappingURL=path-2-absolute.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/process/arc-2-cubic.js
var TAU = Math.PI * 2;
var mapToEllipse = function (_a, rx, ry, cosphi, sinphi, centerx, centery) {
    var x = _a.x, y = _a.y;
    x *= rx;
    y *= ry;
    var xp = cosphi * x - sinphi * y;
    var yp = sinphi * x + cosphi * y;
    return {
        x: xp + centerx,
        y: yp + centery
    };
};
var approxUnitArc = function (ang1, ang2) {
    // If 90 degree circular arc, use a constant
    // as derived from http://spencermortensen.com/articles/bezier-circle
    var a = ang2 === 1.5707963267948966
        ? 0.551915024494
        : ang2 === -1.5707963267948966
            ? -0.551915024494
            : 4 / 3 * Math.tan(ang2 / 4);
    var x1 = Math.cos(ang1);
    var y1 = Math.sin(ang1);
    var x2 = Math.cos(ang1 + ang2);
    var y2 = Math.sin(ang1 + ang2);
    return [
        {
            x: x1 - y1 * a,
            y: y1 + x1 * a
        },
        {
            x: x2 + y2 * a,
            y: y2 - x2 * a
        },
        {
            x: x2,
            y: y2
        }
    ];
};
var vectorAngle = function (ux, uy, vx, vy) {
    var sign = (ux * vy - uy * vx < 0) ? -1 : 1;
    var dot = ux * vx + uy * vy;
    if (dot > 1) {
        dot = 1;
    }
    if (dot < -1) {
        dot = -1;
    }
    return sign * Math.acos(dot);
};
var getArcCenter = function (px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp) {
    var rxsq = Math.pow(rx, 2);
    var rysq = Math.pow(ry, 2);
    var pxpsq = Math.pow(pxp, 2);
    var pypsq = Math.pow(pyp, 2);
    var radicant = (rxsq * rysq) - (rxsq * pypsq) - (rysq * pxpsq);
    if (radicant < 0) {
        radicant = 0;
    }
    radicant /= (rxsq * pypsq) + (rysq * pxpsq);
    radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);
    var centerxp = radicant * rx / ry * pyp;
    var centeryp = radicant * -ry / rx * pxp;
    var centerx = cosphi * centerxp - sinphi * centeryp + (px + cx) / 2;
    var centery = sinphi * centerxp + cosphi * centeryp + (py + cy) / 2;
    var vx1 = (pxp - centerxp) / rx;
    var vy1 = (pyp - centeryp) / ry;
    var vx2 = (-pxp - centerxp) / rx;
    var vy2 = (-pyp - centeryp) / ry;
    var ang1 = vectorAngle(1, 0, vx1, vy1);
    var ang2 = vectorAngle(vx1, vy1, vx2, vy2);
    if (sweepFlag === 0 && ang2 > 0) {
        ang2 -= TAU;
    }
    if (sweepFlag === 1 && ang2 < 0) {
        ang2 += TAU;
    }
    return [centerx, centery, ang1, ang2];
};
var arcToBezier = function (_a) {
    var px = _a.px, py = _a.py, cx = _a.cx, cy = _a.cy, rx = _a.rx, ry = _a.ry, _b = _a.xAxisRotation, xAxisRotation = _b === void 0 ? 0 : _b, _c = _a.largeArcFlag, largeArcFlag = _c === void 0 ? 0 : _c, _d = _a.sweepFlag, sweepFlag = _d === void 0 ? 0 : _d;
    var curves = [];
    if (rx === 0 || ry === 0) {
        return [{ x1: 0, y1: 0, x2: 0, y2: 0, x: cx, y: cy }];
    }
    var sinphi = Math.sin(xAxisRotation * TAU / 360);
    var cosphi = Math.cos(xAxisRotation * TAU / 360);
    var pxp = cosphi * (px - cx) / 2 + sinphi * (py - cy) / 2;
    var pyp = -sinphi * (px - cx) / 2 + cosphi * (py - cy) / 2;
    if (pxp === 0 && pyp === 0) {
        return [{ x1: 0, y1: 0, x2: 0, y2: 0, x: cx, y: cy }];
    }
    rx = Math.abs(rx);
    ry = Math.abs(ry);
    var lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) +
        Math.pow(pyp, 2) / Math.pow(ry, 2);
    if (lambda > 1) {
        rx *= Math.sqrt(lambda);
        ry *= Math.sqrt(lambda);
    }
    var _e = getArcCenter(px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinphi, cosphi, pxp, pyp), centerx = _e[0], centery = _e[1], ang1 = _e[2], ang2 = _e[3];
    // If 'ang2' == 90.0000000001, then `ratio` will evaluate to
    // 1.0000000001. This causes `segments` to be greater than one, which is an
    // unecessary split, and adds extra points to the bezier curve. To alleviate
    // this issue, we round to 1.0 when the ratio is close to 1.0.
    var ratio = Math.abs(ang2) / (TAU / 4);
    if (Math.abs(1.0 - ratio) < 0.0000001) {
        ratio = 1.0;
    }
    var segments = Math.max(Math.ceil(ratio), 1);
    ang2 /= segments;
    for (var i = 0; i < segments; i++) {
        curves.push(approxUnitArc(ang1, ang2));
        ang1 += ang2;
    }
    return curves.map(function (curve) {
        var _a = mapToEllipse(curve[0], rx, ry, cosphi, sinphi, centerx, centery), x1 = _a.x, y1 = _a.y;
        var _b = mapToEllipse(curve[1], rx, ry, cosphi, sinphi, centerx, centery), x2 = _b.x, y2 = _b.y;
        var _c = mapToEllipse(curve[2], rx, ry, cosphi, sinphi, centerx, centery), x = _c.x, y = _c.y;
        return { x1: x1, y1: y1, x2: x2, y2: y2, x: x, y: y };
    });
};
function arcToCubic(x1, y1, rx, ry, angle, LAF, SF, x2, y2) {
    var curves = arcToBezier({
        px: x1,
        py: y1,
        cx: x2,
        cy: y2,
        rx: rx,
        ry: ry,
        xAxisRotation: angle,
        largeArcFlag: LAF,
        sweepFlag: SF,
    });
    return curves.reduce(function (prev, cur) {
        var x1 = cur.x1, y1 = cur.y1, x2 = cur.x2, y2 = cur.y2, x = cur.x, y = cur.y;
        prev.push(x1, y1, x2, y2, x, y);
        return prev;
    }, []);
}
//# sourceMappingURL=arc-2-cubic.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/process/quad-2-cubic.js
function quadToCubic(x1, y1, qx, qy, x2, y2) {
    var r13 = 1 / 3;
    var r23 = 2 / 3;
    return [
        r13 * x1 + r23 * qx,
        r13 * y1 + r23 * qy,
        r13 * x2 + r23 * qx,
        r13 * y2 + r23 * qy,
        x2, y2, // x,y
    ];
}
//# sourceMappingURL=quad-2-cubic.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/process/line-2-cubic.js
// export function getPointAtSegLength(p1x: number, p1y: number, c1x: number, c1y: number, c2x: number, c2y: number, p2x: number, p2y: number, t: number) {
//   const t1 = 1 - t;
//   return {
//     x: (t1 ** 3) * p1x
//       + t1 * t1 * 3 * t * c1x
//       + t1 * 3 * t * t * c2x
//       + (t ** 3) * p2x,
//     y: (t1 ** 3) * p1y
//       + t1 * t1 * 3 * t * c1y
//       + t1 * 3 * t * t * c2y
//       + (t ** 3) * p2y,
//   };
// }
// export function midPoint(a: number[], b: number[], t: number) {
//   const ax = a[0];
//   const ay = a[1];
//   const bx = b[0];
//   const by = b[1];
//   return [ax + (bx - ax) * t, ay + (by - ay) * t];
// }
function lineToCubic(x1, y1, x2, y2) {
    return [x1, y1, x2, y2, x2, y2];
    // const t = 0.5;
    // const p0 = [x1, y1];
    // const p1 = [x2, y2];
    // const p2 = midPoint(p0, p1, t);
    // const p3 = midPoint(p1, p2, t);
    // const p4 = midPoint(p2, p3, t);
    // const p5 = midPoint(p3, p4, t);
    // const p6 = midPoint(p4, p5, t);
    // const cp1 = getPointAtSegLength.apply(0, p0.concat(p2, p4, p6, t));
    // const cp2 = getPointAtSegLength.apply(0, p6.concat(p5, p3, p1, 0));
    // return [cp1.x, cp1.y, cp2.x, cp2.y, x2, y2];
}
//# sourceMappingURL=line-2-cubic.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/process/segment-2-cubic.js



function segmentToCubic(segment, params) {
    if ('TQ'.indexOf(segment[0]) < 0) {
        params.qx = null;
        params.qy = null;
    }
    var _a = segment.slice(1), s1 = _a[0], s2 = _a[1];
    switch (segment[0]) {
        case 'M':
            params.x = s1;
            params.y = s2;
            return segment;
        case 'A':
            return ['C'].concat(arcToCubic.apply(0, [params.x1, params.y1].concat(segment.slice(1))));
        case 'Q':
            params.qx = s1;
            params.qy = s2;
            return ['C'].concat(quadToCubic.apply(0, [params.x1, params.y1].concat(segment.slice(1))));
        case 'L':
            // @ts-ignore
            return ['C'].concat(lineToCubic(params.x1, params.y1, segment[1], segment[2]));
        case 'H':
            // @ts-ignore
            return ['C'].concat(lineToCubic(params.x1, params.y1, segment[1], params.y1));
        case 'V':
            // @ts-ignore
            return ['C'].concat(lineToCubic(params.x1, params.y1, params.x1, segment[1]));
        case 'Z':
            // @ts-ignore
            return ['C'].concat(lineToCubic(params.x1, params.y1, params.x, params.y));
        default:
    }
    return segment;
}
//# sourceMappingURL=segment-2-cubic.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/path-2-curve.js


function pathToCurve(path, needZCommandIndexes) {
    if (needZCommandIndexes === void 0) { needZCommandIndexes = false; }
    var pathArray = pathToAbsolute(path);
    var params = {
        x1: 0, y1: 0, x2: 0, y2: 0, x: 0, y: 0, qx: null, qy: null,
    };
    var allPathCommands = [];
    var pathCommand = '';
    var ii = pathArray.length;
    var segment;
    var seglen;
    var zCommandIndexes = [];
    for (var i = 0; i < ii; i += 1) {
        if (pathArray[i])
            pathCommand = pathArray[i][0];
        allPathCommands[i] = pathCommand;
        pathArray[i] = segmentToCubic(pathArray[i], params);
        fixArc(pathArray, allPathCommands, i);
        ii = pathArray.length; // solves curveArrays ending in Z
        // keep Z command account for lineJoin
        // @see https://github.com/antvis/util/issues/68
        if (pathCommand === 'Z') {
            zCommandIndexes.push(i);
        }
        segment = pathArray[i];
        seglen = segment.length;
        params.x1 = +segment[seglen - 2];
        params.y1 = +segment[seglen - 1];
        params.x2 = +(segment[seglen - 4]) || params.x1;
        params.y2 = +(segment[seglen - 3]) || params.y1;
    }
    if (needZCommandIndexes) {
        return [pathArray, zCommandIndexes];
    }
    else {
        return pathArray;
    }
}
function fixArc(pathArray, allPathCommands, i) {
    if (pathArray[i].length > 7) {
        pathArray[i].shift();
        var pi = pathArray[i];
        // const ni = i + 1;
        var ni = i;
        while (pi.length) {
            // if created multiple C:s, their original seg is saved
            allPathCommands[i] = 'A';
            // @ts-ignore
            pathArray.splice(ni += 1, 0, ['C'].concat(pi.splice(0, 6)));
        }
        pathArray.splice(i, 1);
    }
}
//# sourceMappingURL=path-2-curve.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/path-intersection.js



var base3 = function (t, p1, p2, p3, p4) {
    var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4;
    var t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;
    return t * t2 - 3 * p1 + 3 * p2;
};
var bezlen = function (x1, y1, x2, y2, x3, y3, x4, y4, z) {
    if (z === null) {
        z = 1;
    }
    z = z > 1 ? 1 : z < 0 ? 0 : z;
    var z2 = z / 2;
    var n = 12;
    var Tvalues = [-0.1252, 0.1252, -0.3678, 0.3678, -0.5873, 0.5873, -0.7699, 0.7699, -0.9041, 0.9041, -0.9816, 0.9816];
    var Cvalues = [0.2491, 0.2491, 0.2335, 0.2335, 0.2032, 0.2032, 0.1601, 0.1601, 0.1069, 0.1069, 0.0472, 0.0472];
    var sum = 0;
    for (var i = 0; i < n; i++) {
        var ct = z2 * Tvalues[i] + z2;
        var xbase = base3(ct, x1, x2, x3, x4);
        var ybase = base3(ct, y1, y2, y3, y4);
        var comb = xbase * xbase + ybase * ybase;
        sum += Cvalues[i] * Math.sqrt(comb);
    }
    return z2 * sum;
};
var curveDim = function (x0, y0, x1, y1, x2, y2, x3, y3) {
    var tvalues = [];
    var bounds = [
        [],
        [],
    ];
    var a;
    var b;
    var c;
    var t;
    for (var i = 0; i < 2; ++i) {
        if (i === 0) {
            b = 6 * x0 - 12 * x1 + 6 * x2;
            a = -3 * x0 + 9 * x1 - 9 * x2 + 3 * x3;
            c = 3 * x1 - 3 * x0;
        }
        else {
            b = 6 * y0 - 12 * y1 + 6 * y2;
            a = -3 * y0 + 9 * y1 - 9 * y2 + 3 * y3;
            c = 3 * y1 - 3 * y0;
        }
        if (Math.abs(a) < 1e-12) {
            if (Math.abs(b) < 1e-12) {
                continue;
            }
            t = -c / b;
            if (t > 0 && t < 1) {
                tvalues.push(t);
            }
            continue;
        }
        var b2ac = b * b - 4 * c * a;
        var sqrtb2ac = Math.sqrt(b2ac);
        if (b2ac < 0) {
            continue;
        }
        var t1 = (-b + sqrtb2ac) / (2 * a);
        if (t1 > 0 && t1 < 1) {
            tvalues.push(t1);
        }
        var t2 = (-b - sqrtb2ac) / (2 * a);
        if (t2 > 0 && t2 < 1) {
            tvalues.push(t2);
        }
    }
    var j = tvalues.length;
    var jlen = j;
    var mt;
    while (j--) {
        t = tvalues[j];
        mt = 1 - t;
        bounds[0][j] = (mt * mt * mt * x0) + (3 * mt * mt * t * x1) + (3 * mt * t * t * x2) + (t * t * t * x3);
        bounds[1][j] = (mt * mt * mt * y0) + (3 * mt * mt * t * y1) + (3 * mt * t * t * y2) + (t * t * t * y3);
    }
    bounds[0][jlen] = x0;
    bounds[1][jlen] = y0;
    bounds[0][jlen + 1] = x3;
    bounds[1][jlen + 1] = y3;
    bounds[0].length = bounds[1].length = jlen + 2;
    return {
        min: {
            x: Math.min.apply(0, bounds[0]),
            y: Math.min.apply(0, bounds[1]),
        },
        max: {
            x: Math.max.apply(0, bounds[0]),
            y: Math.max.apply(0, bounds[1]),
        },
    };
};
var intersect = function (x1, y1, x2, y2, x3, y3, x4, y4) {
    if (Math.max(x1, x2) < Math.min(x3, x4) ||
        Math.min(x1, x2) > Math.max(x3, x4) ||
        Math.max(y1, y2) < Math.min(y3, y4) ||
        Math.min(y1, y2) > Math.max(y3, y4)) {
        return;
    }
    var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4);
    var ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4);
    var denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);
    if (!denominator) {
        return;
    }
    var px = nx / denominator;
    var py = ny / denominator;
    var px2 = +px.toFixed(2);
    var py2 = +py.toFixed(2);
    if (px2 < +Math.min(x1, x2).toFixed(2) ||
        px2 > +Math.max(x1, x2).toFixed(2) ||
        px2 < +Math.min(x3, x4).toFixed(2) ||
        px2 > +Math.max(x3, x4).toFixed(2) ||
        py2 < +Math.min(y1, y2).toFixed(2) ||
        py2 > +Math.max(y1, y2).toFixed(2) ||
        py2 < +Math.min(y3, y4).toFixed(2) ||
        py2 > +Math.max(y3, y4).toFixed(2)) {
        return;
    }
    return {
        x: px,
        y: py,
    };
};
var isPointInsideBBox = function (bbox, x, y) {
    return x >= bbox.x &&
        x <= bbox.x + bbox.width &&
        y >= bbox.y &&
        y <= bbox.y + bbox.height;
};
var box = function (x, y, width, height) {
    if (x === null) {
        x = y = width = height = 0;
    }
    if (y === null) {
        y = x.y;
        width = x.width;
        height = x.height;
        x = x.x;
    }
    return {
        x: x,
        y: y,
        width: width,
        w: width,
        height: height,
        h: height,
        x2: x + width,
        y2: y + height,
        cx: x + width / 2,
        cy: y + height / 2,
        r1: Math.min(width, height) / 2,
        r2: Math.max(width, height) / 2,
        r0: Math.sqrt(width * width + height * height) / 2,
        path: rectPath(x, y, width, height),
        vb: [x, y, width, height].join(' '),
    };
};
var isBBoxIntersect = function (bbox1, bbox2) {
    // @ts-ignore
    bbox1 = box(bbox1);
    // @ts-ignore
    bbox2 = box(bbox2);
    return isPointInsideBBox(bbox2, bbox1.x, bbox1.y) || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y) || isPointInsideBBox(bbox2, bbox1.x, bbox1.y2) || isPointInsideBBox(bbox2, bbox1.x2, bbox1.y2) || isPointInsideBBox(bbox1, bbox2.x, bbox2.y) || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y) || isPointInsideBBox(bbox1, bbox2.x, bbox2.y2) || isPointInsideBBox(bbox1, bbox2.x2, bbox2.y2) || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x) && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);
};
var bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {
    if (!Object(esm["isArray"])(p1x)) {
        p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];
    }
    var bbox = curveDim.apply(null, p1x);
    return box(bbox.min.x, bbox.min.y, bbox.max.x - bbox.min.x, bbox.max.y - bbox.min.y);
};
var findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {
    var t1 = 1 - t;
    var t13 = Math.pow(t1, 3);
    var t12 = Math.pow(t1, 2);
    var t2 = t * t;
    var t3 = t2 * t;
    var x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x;
    var y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y;
    var mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x);
    var my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y);
    var nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x);
    var ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y);
    var ax = t1 * p1x + t * c1x;
    var ay = t1 * p1y + t * c1y;
    var cx = t1 * c2x + t * p2x;
    var cy = t1 * c2y + t * p2y;
    var alpha = (90 - Math.atan2(mx - nx, my - ny) * 180 / Math.PI);
    // (mx > nx || my < ny) && (alpha += 180);
    return {
        x: x,
        y: y,
        m: {
            x: mx,
            y: my,
        },
        n: {
            x: nx,
            y: ny,
        },
        start: {
            x: ax,
            y: ay,
        },
        end: {
            x: cx,
            y: cy,
        },
        alpha: alpha,
    };
};
var interHelper = function (bez1, bez2, justCount) {
    // @ts-ignore
    var bbox1 = bezierBBox(bez1);
    // @ts-ignore
    var bbox2 = bezierBBox(bez2);
    if (!isBBoxIntersect(bbox1, bbox2)) {
        return justCount ? 0 : [];
    }
    var l1 = bezlen.apply(0, bez1);
    var l2 = bezlen.apply(0, bez2);
    var n1 = ~~(l1 / 8);
    var n2 = ~~(l2 / 8);
    var dots1 = [];
    var dots2 = [];
    var xy = {};
    var res = justCount ? 0 : [];
    for (var i = 0; i < n1 + 1; i++) {
        var d = findDotsAtSegment.apply(0, bez1.concat(i / n1));
        dots1.push({
            x: d.x,
            y: d.y,
            t: i / n1,
        });
    }
    for (var i = 0; i < n2 + 1; i++) {
        var d = findDotsAtSegment.apply(0, bez2.concat(i / n2));
        dots2.push({
            x: d.x,
            y: d.y,
            t: i / n2,
        });
    }
    for (var i = 0; i < n1; i++) {
        for (var j = 0; j < n2; j++) {
            var di = dots1[i];
            var di1 = dots1[i + 1];
            var dj = dots2[j];
            var dj1 = dots2[j + 1];
            var ci = Math.abs(di1.x - di.x) < 0.001 ? 'y' : 'x';
            var cj = Math.abs(dj1.x - dj.x) < 0.001 ? 'y' : 'x';
            var is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);
            if (is) {
                if (xy[is.x.toFixed(4)] === is.y.toFixed(4)) {
                    continue;
                }
                xy[is.x.toFixed(4)] = is.y.toFixed(4);
                var t1 = di.t + Math.abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t);
                var t2 = dj.t + Math.abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);
                if (t1 >= 0 && t1 <= 1 && t2 >= 0 && t2 <= 1) {
                    if (justCount) {
                        // @ts-ignore
                        res++;
                    }
                    else {
                        // @ts-ignore
                        res.push({
                            x: is.x,
                            y: is.y,
                            t1: t1,
                            t2: t2,
                        });
                    }
                }
            }
        }
    }
    return res;
};
var interPathHelper = function (path1, path2, justCount) {
    // @ts-ignore
    path1 = pathToCurve(path1);
    // @ts-ignore
    path2 = pathToCurve(path2);
    var x1;
    var y1;
    var x2;
    var y2;
    var x1m;
    var y1m;
    var x2m;
    var y2m;
    var bez1;
    var bez2;
    var res = justCount ? 0 : [];
    for (var i = 0, ii = path1.length; i < ii; i++) {
        var pi = path1[i];
        if (pi[0] === 'M') {
            x1 = x1m = pi[1];
            y1 = y1m = pi[2];
        }
        else {
            if (pi[0] === 'C') {
                bez1 = [x1, y1].concat(pi.slice(1));
                x1 = bez1[6];
                y1 = bez1[7];
            }
            else {
                bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];
                x1 = x1m;
                y1 = y1m;
            }
            for (var j = 0, jj = path2.length; j < jj; j++) {
                var pj = path2[j];
                if (pj[0] === 'M') {
                    x2 = x2m = pj[1];
                    y2 = y2m = pj[2];
                }
                else {
                    if (pj[0] === 'C') {
                        bez2 = [x2, y2].concat(pj.slice(1));
                        x2 = bez2[6];
                        y2 = bez2[7];
                    }
                    else {
                        bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];
                        x2 = x2m;
                        y2 = y2m;
                    }
                    var intr = interHelper(bez1, bez2, justCount);
                    if (justCount) {
                        // @ts-ignore
                        res += intr;
                    }
                    else {
                        // @ts-ignore
                        for (var k = 0, kk = intr.length; k < kk; k++) {
                            intr[k].segment1 = i;
                            intr[k].segment2 = j;
                            intr[k].bez1 = bez1;
                            intr[k].bez2 = bez2;
                        }
                        // @ts-ignore
                        res = res.concat(intr);
                    }
                }
            }
        }
    }
    return res;
};
function pathIntersection(path1, path2) {
    // @ts-ignore
    return interPathHelper(path1, path2);
}
//# sourceMappingURL=path-intersection.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/parse-path-array.js
var p2s = /,?([a-z]),?/gi;
function parsePathArray(path) {
    return path.join(',').replace(p2s, '$1');
}
//# sourceMappingURL=parse-path-array.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/get-arc-params.js

// 向量长度
function vMag(v) {
    return Math.sqrt(v[0] * v[0] + v[1] * v[1]);
}
// u.v/|u||v|，计算夹角的余弦值
function vRatio(u, v) {
    // 当存在一个向量的长度为 0 时，夹角也为 0，即夹角的余弦值为 1
    return vMag(u) * vMag(v) ? (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v)) : 1;
}
// 向量角度
function vAngle(u, v) {
    return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));
}
/**
 * 判断两个点是否重合，点坐标的格式为 [x, y]
 * @param {Array} point1 第一个点
 * @param {Array} point2 第二个点
 */
function isSamePoint(point1, point2) {
    return point1[0] === point2[0] && point1[1] === point2[1];
}
// A 0:rx 1:ry 2:x-axis-rotation 3:large-arc-flag 4:sweep-flag 5: x 6: y
function getArcParams(startPoint, params) {
    var rx = params[1];
    var ry = params[2];
    var xRotation = Object(esm["mod"])(Object(esm["toRadian"])(params[3]), Math.PI * 2);
    var arcFlag = params[4];
    var sweepFlag = params[5];
    // 弧形起点坐标
    var x1 = startPoint[0];
    var y1 = startPoint[1];
    // 弧形终点坐标
    var x2 = params[6];
    var y2 = params[7];
    var xp = (Math.cos(xRotation) * (x1 - x2)) / 2.0 + (Math.sin(xRotation) * (y1 - y2)) / 2.0;
    var yp = (-1 * Math.sin(xRotation) * (x1 - x2)) / 2.0 + (Math.cos(xRotation) * (y1 - y2)) / 2.0;
    var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);
    if (lambda > 1) {
        rx *= Math.sqrt(lambda);
        ry *= Math.sqrt(lambda);
    }
    var diff = rx * rx * (yp * yp) + ry * ry * (xp * xp);
    var f = diff ? Math.sqrt((rx * rx * (ry * ry) - diff) / diff) : 1;
    if (arcFlag === sweepFlag) {
        f *= -1;
    }
    if (isNaN(f)) {
        f = 0;
    }
    // 旋转前的起点坐标，且当长半轴和短半轴的长度为 0 时，坐标按 (0, 0) 处理
    var cxp = ry ? (f * rx * yp) / ry : 0;
    var cyp = rx ? (f * -ry * xp) / rx : 0;
    // 椭圆圆心坐标
    var cx = (x1 + x2) / 2.0 + Math.cos(xRotation) * cxp - Math.sin(xRotation) * cyp;
    var cy = (y1 + y2) / 2.0 + Math.sin(xRotation) * cxp + Math.cos(xRotation) * cyp;
    // 起始点的单位向量
    var u = [(xp - cxp) / rx, (yp - cyp) / ry];
    // 终止点的单位向量
    var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];
    // 计算起始点和圆心的连线，与 x 轴正方向的夹角
    var theta = vAngle([1, 0], u);
    // 计算圆弧起始点和终止点与椭圆圆心连线的夹角
    var dTheta = vAngle(u, v);
    if (vRatio(u, v) <= -1) {
        dTheta = Math.PI;
    }
    if (vRatio(u, v) >= 1) {
        dTheta = 0;
    }
    if (sweepFlag === 0 && dTheta > 0) {
        dTheta = dTheta - 2 * Math.PI;
    }
    if (sweepFlag === 1 && dTheta < 0) {
        dTheta = dTheta + 2 * Math.PI;
    }
    return {
        cx: cx,
        cy: cy,
        // 弧形的起点和终点相同时，长轴和短轴的长度按 0 处理
        rx: isSamePoint(startPoint, [x2, y2]) ? 0 : rx,
        ry: isSamePoint(startPoint, [x2, y2]) ? 0 : ry,
        startAngle: theta,
        endAngle: theta + dTheta,
        xRotation: xRotation,
        arcFlag: arcFlag,
        sweepFlag: sweepFlag,
    };
}
//# sourceMappingURL=get-arc-params.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/path-2-segments.js



// 点对称
function path_2_segments_toSymmetry(point, center) {
    return [center[0] + (center[0] - point[0]), center[1] + (center[1] - point[1])];
}
function getSegments(path) {
    path = parse_path(path);
    var segments = [];
    var currentPoint = null; // 当前图形
    var nextParams = null; // 下一节点的 path 参数
    var startMovePoint = null; // 开始 M 的点，可能会有多个
    var lastStartMovePointIndex = 0; // 最近一个开始点 M 的索引
    var count = path.length;
    for (var i = 0; i < count; i++) {
        var params = path[i];
        nextParams = path[i + 1];
        var command = params[0];
        // 数学定义上的参数，便于后面的计算
        var segment = {
            command: command,
            prePoint: currentPoint,
            params: params,
            startTangent: null,
            endTangent: null,
        };
        switch (command) {
            case 'M':
                startMovePoint = [params[1], params[2]];
                lastStartMovePointIndex = i;
                break;
            case 'A':
                var arcParams = getArcParams(currentPoint, params);
                segment['arcParams'] = arcParams;
                break;
            default:
                break;
        }
        if (command === 'Z') {
            // 有了 Z 后，当前节点从开始 M 的点开始
            currentPoint = startMovePoint;
            // 如果当前点的命令为 Z，相当于当前点为最近一个 M 点，则下一个点直接指向最近一个 M 点的下一个点
            nextParams = path[lastStartMovePointIndex + 1];
        }
        else {
            var len = params.length;
            currentPoint = [params[len - 2], params[len - 1]];
        }
        if (nextParams && nextParams[0] === 'Z') {
            // 如果下一个点的命令为 Z，则下一个点直接指向最近一个 M 点
            nextParams = path[lastStartMovePointIndex];
            if (segments[lastStartMovePointIndex]) {
                // 如果下一个点的命令为 Z，则最近一个 M 点的前一个点为当前点
                segments[lastStartMovePointIndex].prePoint = currentPoint;
            }
        }
        segment['currentPoint'] = currentPoint;
        // 如果当前点与最近一个 M 点相同，则最近一个 M 点的前一个点为当前点的前一个点
        if (segments[lastStartMovePointIndex] &&
            isSamePoint(currentPoint, segments[lastStartMovePointIndex].currentPoint)) {
            segments[lastStartMovePointIndex].prePoint = segment.prePoint;
        }
        var nextPoint = nextParams ? [nextParams[nextParams.length - 2], nextParams[nextParams.length - 1]] : null;
        segment['nextPoint'] = nextPoint;
        // Add startTangent and endTangent
        var prePoint = segment.prePoint;
        if (['L', 'H', 'V'].includes(command)) {
            segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];
            segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];
        }
        else if (command === 'Q') {
            // 二次贝塞尔曲线只有一个控制点
            var cp = [params[1], params[2]];
            // 二次贝塞尔曲线的终点为 currentPoint
            segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];
            segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];
        }
        else if (command === 'T') {
            var preSegment = segments[i - 1];
            var cp = path_2_segments_toSymmetry(preSegment.currentPoint, prePoint);
            if (preSegment.command === 'Q') {
                segment.command = 'Q';
                segment.startTangent = [prePoint[0] - cp[0], prePoint[1] - cp[1]];
                segment.endTangent = [currentPoint[0] - cp[0], currentPoint[1] - cp[1]];
            }
            else {
                segment.command = 'TL';
                segment.startTangent = [prePoint[0] - currentPoint[0], prePoint[1] - currentPoint[1]];
                segment.endTangent = [currentPoint[0] - prePoint[0], currentPoint[1] - prePoint[1]];
            }
        }
        else if (command === 'C') {
            // 三次贝塞尔曲线有两个控制点
            var cp1 = [params[1], params[2]];
            var cp2 = [params[3], params[4]];
            segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];
            segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];
            // horizontal line, eg. ['C', 100, 100, 100, 100, 200, 200]
            if (segment.startTangent[0] === 0 && segment.startTangent[1] === 0) {
                segment.startTangent = [cp1[0] - cp2[0], cp1[1] - cp2[1]];
            }
            if (segment.endTangent[0] === 0 && segment.endTangent[1] === 0) {
                segment.endTangent = [cp2[0] - cp1[0], cp2[1] - cp1[1]];
            }
        }
        else if (command === 'S') {
            var preSegment = segments[i - 1];
            var cp1 = path_2_segments_toSymmetry(preSegment.currentPoint, prePoint);
            var cp2 = [params[1], params[2]];
            if (preSegment.command === 'C') {
                segment.command = 'C'; // 将 S 命令变换为 C 命令
                segment.startTangent = [prePoint[0] - cp1[0], prePoint[1] - cp1[1]];
                segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];
            }
            else {
                segment.command = 'SQ'; // 将 S 命令变换为 SQ 命令
                segment.startTangent = [prePoint[0] - cp2[0], prePoint[1] - cp2[1]];
                segment.endTangent = [currentPoint[0] - cp2[0], currentPoint[1] - cp2[1]];
            }
        }
        else if (command === 'A') {
            var d = 0.001;
            var _a = segment['arcParams'] || {}, _b = _a.cx, cx = _b === void 0 ? 0 : _b, _c = _a.cy, cy = _c === void 0 ? 0 : _c, _d = _a.rx, rx = _d === void 0 ? 0 : _d, _e = _a.ry, ry = _e === void 0 ? 0 : _e, _f = _a.sweepFlag, sweepFlag = _f === void 0 ? 0 : _f, _g = _a.startAngle, startAngle = _g === void 0 ? 0 : _g, _h = _a.endAngle, endAngle = _h === void 0 ? 0 : _h;
            if (sweepFlag === 0) {
                d *= -1;
            }
            var dx1 = rx * Math.cos(startAngle - d) + cx;
            var dy1 = ry * Math.sin(startAngle - d) + cy;
            segment.startTangent = [dx1 - startMovePoint[0], dy1 - startMovePoint[1]];
            var dx2 = rx * Math.cos(startAngle + endAngle + d) + cx;
            var dy2 = ry * Math.sin(startAngle + endAngle - d) + cy;
            segment.endTangent = [prePoint[0] - dx2, prePoint[1] - dy2];
        }
        segments.push(segment);
    }
    return segments;
}
//# sourceMappingURL=path-2-segments.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/get-line-intersect.js
var isBetween = function (value, min, max) { return value >= min && value <= max; };
function getLineIntersect(p0, p1, p2, p3) {
    var tolerance = 0.001;
    var E = {
        x: p2.x - p0.x,
        y: p2.y - p0.y,
    };
    var D0 = {
        x: p1.x - p0.x,
        y: p1.y - p0.y,
    };
    var D1 = {
        x: p3.x - p2.x,
        y: p3.y - p2.y,
    };
    var kross = D0.x * D1.y - D0.y * D1.x;
    var sqrKross = kross * kross;
    var sqrLen0 = D0.x * D0.x + D0.y * D0.y;
    var sqrLen1 = D1.x * D1.x + D1.y * D1.y;
    var point = null;
    if (sqrKross > tolerance * sqrLen0 * sqrLen1) {
        var s = (E.x * D1.y - E.y * D1.x) / kross;
        var t = (E.x * D0.y - E.y * D0.x) / kross;
        if (isBetween(s, 0, 1) && isBetween(t, 0, 1)) {
            point = {
                x: p0.x + s * D0.x,
                y: p0.y + s * D0.y,
            };
        }
    }
    return point;
}
;
//# sourceMappingURL=get-line-intersect.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/point-in-polygon.js
/**
 * @fileoverview 判断点是否在多边形内
 * @author dxq613@gmail.com
 */
// 多边形的射线检测，参考：https://blog.csdn.net/WilliamSun0122/article/details/77994526
var tolerance = 1e-6;
// 三态函数，判断两个double在eps精度下的大小关系
function dcmp(x) {
    if (Math.abs(x) < tolerance) {
        return 0;
    }
    return x < 0 ? -1 : 1;
}
// 判断点Q是否在p1和p2的线段上
function onSegment(p1, p2, q) {
    if ((q[0] - p1[0]) * (p2[1] - p1[1]) === (p2[0] - p1[0]) * (q[1] - p1[1]) &&
        Math.min(p1[0], p2[0]) <= q[0] &&
        q[0] <= Math.max(p1[0], p2[0]) &&
        Math.min(p1[1], p2[1]) <= q[1] &&
        q[1] <= Math.max(p1[1], p2[1])) {
        return true;
    }
    return false;
}
// 判断点P在多边形内-射线法
function isInPolygon(points, x, y) {
    var isHit = false;
    var n = points.length;
    if (n <= 2) {
        // svg 中点小于 3 个时，不显示，也无法被拾取
        return false;
    }
    for (var i = 0; i < n; i++) {
        var p1 = points[i];
        var p2 = points[(i + 1) % n];
        if (onSegment(p1, p2, [x, y])) {
            // 点在多边形一条边上
            return true;
        }
        // 前一个判断min(p1[1],p2[1])<P.y<=max(p1[1],p2[1])
        // 后一个判断被测点 在 射线与边交点 的左边
        if (dcmp(p1[1] - y) > 0 !== dcmp(p2[1] - y) > 0 &&
            dcmp(x - ((y - p1[1]) * (p1[0] - p2[0])) / (p1[1] - p2[1]) - p1[0]) < 0) {
            isHit = !isHit;
        }
    }
    return isHit;
}
//# sourceMappingURL=point-in-polygon.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/is-polygons-intersect.js



function parseToLines(points) {
    var lines = [];
    var count = points.length;
    for (var i = 0; i < count - 1; i++) {
        var point = points[i];
        var next = points[i + 1];
        lines.push({
            from: {
                x: point[0],
                y: point[1]
            },
            to: {
                x: next[0],
                y: next[1]
            }
        });
    }
    if (lines.length > 1) {
        var first = points[0];
        var last = points[count - 1];
        lines.push({
            from: {
                x: last[0],
                y: last[1]
            },
            to: {
                x: first[0],
                y: first[1]
            }
        });
    }
    return lines;
}
function lineIntersectPolygon(lines, line) {
    var isIntersect = false;
    Object(esm["each"])(lines, function (l) {
        if (getLineIntersect(l.from, l.to, line.from, line.to)) {
            isIntersect = true;
            return false;
        }
    });
    return isIntersect;
}
function getBBox(points) {
    var xArr = points.map(function (p) { return p[0]; });
    var yArr = points.map(function (p) { return p[1]; });
    return {
        minX: Math.min.apply(null, xArr),
        maxX: Math.max.apply(null, xArr),
        minY: Math.min.apply(null, yArr),
        maxY: Math.max.apply(null, yArr)
    };
}
function intersectBBox(box1, box2) {
    return !(box2.minX > box1.maxX || box2.maxX < box1.minX || box2.minY > box1.maxY || box2.maxY < box1.minY);
}
function isPolygonsIntersect(points1, points2) {
    // 空数组，或者一个点返回 false
    if (points1.length < 2 || points2.length < 2) {
        return false;
    }
    var bbox1 = getBBox(points1);
    var bbox2 = getBBox(points2);
    // 判定包围盒是否相交，比判定点是否在多边形内要快的多，可以筛选掉大多数情况
    if (!intersectBBox(bbox1, bbox2)) {
        return false;
    }
    var isIn = false;
    // 判定点是否在多边形内部，一旦有一个点在另一个多边形内，则返回
    Object(esm["each"])(points2, function (point) {
        if (isInPolygon(points1, point[0], point[1])) {
            isIn = true;
            return false;
        }
    });
    if (isIn) {
        return true;
    }
    // 两个多边形都需要判定
    Object(esm["each"])(points1, function (point) {
        if (isInPolygon(points2, point[0], point[1])) {
            isIn = true;
            return false;
        }
    });
    if (isIn) {
        return true;
    }
    var lines1 = parseToLines(points1);
    var lines2 = parseToLines(points2);
    var isIntersect = false;
    Object(esm["each"])(lines2, function (line) {
        if (lineIntersectPolygon(lines1, line)) {
            isIntersect = true;
            return false;
        }
    });
    return isIntersect;
}
//# sourceMappingURL=is-polygons-intersect.js.map
// CONCATENATED MODULE: ./node_modules/_@antv_path-util@2.0.15@@antv/path-util/esm/index.js
















//# sourceMappingURL=index.js.map

/***/ }),

/***/ "fe0d":
/***/ (function(module, exports) {

/** Used for built-in method references. */
var objectProto = Object.prototype;

/**
 * Checks if `value` is likely a prototype object.
 *
 * @private
 * @param {*} value The value to check.
 * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.
 */
function isPrototype(value) {
  var Ctor = value && value.constructor,
      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;

  return value === proto;
}

module.exports = isPrototype;


/***/ }),

/***/ "fe68":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var isCallable = __webpack_require__("fe72");
var isObject = __webpack_require__("d2cb");
var setPrototypeOf = __webpack_require__("6628");

// makes subclassing work correct for wrapped built-ins
module.exports = function ($this, dummy, Wrapper) {
  var NewTarget, NewTargetPrototype;
  if (
    // it can work only with native `setPrototypeOf`
    setPrototypeOf &&
    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this
    isCallable(NewTarget = dummy.constructor) &&
    NewTarget !== Wrapper &&
    isObject(NewTargetPrototype = NewTarget.prototype) &&
    NewTargetPrototype !== Wrapper.prototype
  ) setPrototypeOf($this, NewTargetPrototype);
  return $this;
};


/***/ }),

/***/ "fe72":
/***/ (function(module, exports, __webpack_require__) {

"use strict";

// https://tc39.es/ecma262/#sec-IsHTMLDDA-internal-slot
var documentAll = typeof document == 'object' && document.all;

// `IsCallable` abstract operation
// https://tc39.es/ecma262/#sec-iscallable
// eslint-disable-next-line unicorn/no-typeof-undefined -- required for testing
module.exports = typeof documentAll == 'undefined' && documentAll !== undefined ? function (argument) {
  return typeof argument == 'function' || argument === documentAll;
} : function (argument) {
  return typeof argument == 'function';
};


/***/ }),

/***/ "fea3":
/***/ (function(module, exports, __webpack_require__) {

"use strict";


Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.forEach = exports.sqrLen = exports.sqrDist = exports.dist = exports.div = exports.mul = exports.sub = exports.len = undefined;
exports.create = create;
exports.clone = clone;
exports.fromValues = fromValues;
exports.copy = copy;
exports.set = set;
exports.add = add;
exports.subtract = subtract;
exports.multiply = multiply;
exports.divide = divide;
exports.ceil = ceil;
exports.floor = floor;
exports.min = min;
exports.max = max;
exports.round = round;
exports.scale = scale;
exports.scaleAndAdd = scaleAndAdd;
exports.distance = distance;
exports.squaredDistance = squaredDistance;
exports.length = length;
exports.squaredLength = squaredLength;
exports.negate = negate;
exports.inverse = inverse;
exports.normalize = normalize;
exports.dot = dot;
exports.cross = cross;
exports.lerp = lerp;
exports.random = random;
exports.transformMat2 = transformMat2;
exports.transformMat2d = transformMat2d;
exports.transformMat3 = transformMat3;
exports.transformMat4 = transformMat4;
exports.rotate = rotate;
exports.angle = angle;
exports.str = str;
exports.exactEquals = exactEquals;
exports.equals = equals;

var _common = __webpack_require__("e713");

var glMatrix = _interopRequireWildcard(_common);

function _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }

/**
 * 2 Dimensional Vector
 * @module vec2
 */

/**
 * Creates a new, empty vec2
 *
 * @returns {vec2} a new 2D vector
 */
function create() {
  var out = new glMatrix.ARRAY_TYPE(2);
  if (glMatrix.ARRAY_TYPE != Float32Array) {
    out[0] = 0;
    out[1] = 0;
  }
  return out;
}

/**
 * Creates a new vec2 initialized with values from an existing vector
 *
 * @param {vec2} a vector to clone
 * @returns {vec2} a new 2D vector
 */
function clone(a) {
  var out = new glMatrix.ARRAY_TYPE(2);
  out[0] = a[0];
  out[1] = a[1];
  return out;
}

/**
 * Creates a new vec2 initialized with the given values
 *
 * @param {Number} x X component
 * @param {Number} y Y component
 * @returns {vec2} a new 2D vector
 */
function fromValues(x, y) {
  var out = new glMatrix.ARRAY_TYPE(2);
  out[0] = x;
  out[1] = y;
  return out;
}

/**
 * Copy the values from one vec2 to another
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the source vector
 * @returns {vec2} out
 */
function copy(out, a) {
  out[0] = a[0];
  out[1] = a[1];
  return out;
}

/**
 * Set the components of a vec2 to the given values
 *
 * @param {vec2} out the receiving vector
 * @param {Number} x X component
 * @param {Number} y Y component
 * @returns {vec2} out
 */
function set(out, x, y) {
  out[0] = x;
  out[1] = y;
  return out;
}

/**
 * Adds two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {vec2} out
 */
function add(out, a, b) {
  out[0] = a[0] + b[0];
  out[1] = a[1] + b[1];
  return out;
}

/**
 * Subtracts vector b from vector a
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {vec2} out
 */
function subtract(out, a, b) {
  out[0] = a[0] - b[0];
  out[1] = a[1] - b[1];
  return out;
}

/**
 * Multiplies two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {vec2} out
 */
function multiply(out, a, b) {
  out[0] = a[0] * b[0];
  out[1] = a[1] * b[1];
  return out;
}

/**
 * Divides two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {vec2} out
 */
function divide(out, a, b) {
  out[0] = a[0] / b[0];
  out[1] = a[1] / b[1];
  return out;
}

/**
 * Math.ceil the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a vector to ceil
 * @returns {vec2} out
 */
function ceil(out, a) {
  out[0] = Math.ceil(a[0]);
  out[1] = Math.ceil(a[1]);
  return out;
}

/**
 * Math.floor the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a vector to floor
 * @returns {vec2} out
 */
function floor(out, a) {
  out[0] = Math.floor(a[0]);
  out[1] = Math.floor(a[1]);
  return out;
}

/**
 * Returns the minimum of two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {vec2} out
 */
function min(out, a, b) {
  out[0] = Math.min(a[0], b[0]);
  out[1] = Math.min(a[1], b[1]);
  return out;
}

/**
 * Returns the maximum of two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {vec2} out
 */
function max(out, a, b) {
  out[0] = Math.max(a[0], b[0]);
  out[1] = Math.max(a[1], b[1]);
  return out;
}

/**
 * Math.round the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a vector to round
 * @returns {vec2} out
 */
function round(out, a) {
  out[0] = Math.round(a[0]);
  out[1] = Math.round(a[1]);
  return out;
}

/**
 * Scales a vec2 by a scalar number
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the vector to scale
 * @param {Number} b amount to scale the vector by
 * @returns {vec2} out
 */
function scale(out, a, b) {
  out[0] = a[0] * b;
  out[1] = a[1] * b;
  return out;
}

/**
 * Adds two vec2's after scaling the second operand by a scalar value
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @param {Number} scale the amount to scale b by before adding
 * @returns {vec2} out
 */
function scaleAndAdd(out, a, b, scale) {
  out[0] = a[0] + b[0] * scale;
  out[1] = a[1] + b[1] * scale;
  return out;
}

/**
 * Calculates the euclidian distance between two vec2's
 *
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {Number} distance between a and b
 */
function distance(a, b) {
  var x = b[0] - a[0],
      y = b[1] - a[1];
  return Math.sqrt(x * x + y * y);
}

/**
 * Calculates the squared euclidian distance between two vec2's
 *
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {Number} squared distance between a and b
 */
function squaredDistance(a, b) {
  var x = b[0] - a[0],
      y = b[1] - a[1];
  return x * x + y * y;
}

/**
 * Calculates the length of a vec2
 *
 * @param {vec2} a vector to calculate length of
 * @returns {Number} length of a
 */
function length(a) {
  var x = a[0],
      y = a[1];
  return Math.sqrt(x * x + y * y);
}

/**
 * Calculates the squared length of a vec2
 *
 * @param {vec2} a vector to calculate squared length of
 * @returns {Number} squared length of a
 */
function squaredLength(a) {
  var x = a[0],
      y = a[1];
  return x * x + y * y;
}

/**
 * Negates the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a vector to negate
 * @returns {vec2} out
 */
function negate(out, a) {
  out[0] = -a[0];
  out[1] = -a[1];
  return out;
}

/**
 * Returns the inverse of the components of a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a vector to invert
 * @returns {vec2} out
 */
function inverse(out, a) {
  out[0] = 1.0 / a[0];
  out[1] = 1.0 / a[1];
  return out;
}

/**
 * Normalize a vec2
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a vector to normalize
 * @returns {vec2} out
 */
function normalize(out, a) {
  var x = a[0],
      y = a[1];
  var len = x * x + y * y;
  if (len > 0) {
    //TODO: evaluate use of glm_invsqrt here?
    len = 1 / Math.sqrt(len);
    out[0] = a[0] * len;
    out[1] = a[1] * len;
  }
  return out;
}

/**
 * Calculates the dot product of two vec2's
 *
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {Number} dot product of a and b
 */
function dot(a, b) {
  return a[0] * b[0] + a[1] * b[1];
}

/**
 * Computes the cross product of two vec2's
 * Note that the cross product must by definition produce a 3D vector
 *
 * @param {vec3} out the receiving vector
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @returns {vec3} out
 */
function cross(out, a, b) {
  var z = a[0] * b[1] - a[1] * b[0];
  out[0] = out[1] = 0;
  out[2] = z;
  return out;
}

/**
 * Performs a linear interpolation between two vec2's
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the first operand
 * @param {vec2} b the second operand
 * @param {Number} t interpolation amount, in the range [0-1], between the two inputs
 * @returns {vec2} out
 */
function lerp(out, a, b, t) {
  var ax = a[0],
      ay = a[1];
  out[0] = ax + t * (b[0] - ax);
  out[1] = ay + t * (b[1] - ay);
  return out;
}

/**
 * Generates a random vector with the given scale
 *
 * @param {vec2} out the receiving vector
 * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned
 * @returns {vec2} out
 */
function random(out, scale) {
  scale = scale || 1.0;
  var r = glMatrix.RANDOM() * 2.0 * Math.PI;
  out[0] = Math.cos(r) * scale;
  out[1] = Math.sin(r) * scale;
  return out;
}

/**
 * Transforms the vec2 with a mat2
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the vector to transform
 * @param {mat2} m matrix to transform with
 * @returns {vec2} out
 */
function transformMat2(out, a, m) {
  var x = a[0],
      y = a[1];
  out[0] = m[0] * x + m[2] * y;
  out[1] = m[1] * x + m[3] * y;
  return out;
}

/**
 * Transforms the vec2 with a mat2d
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the vector to transform
 * @param {mat2d} m matrix to transform with
 * @returns {vec2} out
 */
function transformMat2d(out, a, m) {
  var x = a[0],
      y = a[1];
  out[0] = m[0] * x + m[2] * y + m[4];
  out[1] = m[1] * x + m[3] * y + m[5];
  return out;
}

/**
 * Transforms the vec2 with a mat3
 * 3rd vector component is implicitly '1'
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the vector to transform
 * @param {mat3} m matrix to transform with
 * @returns {vec2} out
 */
function transformMat3(out, a, m) {
  var x = a[0],
      y = a[1];
  out[0] = m[0] * x + m[3] * y + m[6];
  out[1] = m[1] * x + m[4] * y + m[7];
  return out;
}

/**
 * Transforms the vec2 with a mat4
 * 3rd vector component is implicitly '0'
 * 4th vector component is implicitly '1'
 *
 * @param {vec2} out the receiving vector
 * @param {vec2} a the vector to transform
 * @param {mat4} m matrix to transform with
 * @returns {vec2} out
 */
function transformMat4(out, a, m) {
  var x = a[0];
  var y = a[1];
  out[0] = m[0] * x + m[4] * y + m[12];
  out[1] = m[1] * x + m[5] * y + m[13];
  return out;
}

/**
 * Rotate a 2D vector
 * @param {vec2} out The receiving vec2
 * @param {vec2} a The vec2 point to rotate
 * @param {vec2} b The origin of the rotation
 * @param {Number} c The angle of rotation
 * @returns {vec2} out
 */
function rotate(out, a, b, c) {
  //Translate point to the origin
  var p0 = a[0] - b[0],
      p1 = a[1] - b[1],
      sinC = Math.sin(c),
      cosC = Math.cos(c);

  //perform rotation and translate to correct position
  out[0] = p0 * cosC - p1 * sinC + b[0];
  out[1] = p0 * sinC + p1 * cosC + b[1];

  return out;
}

/**
 * Get the angle between two 2D vectors
 * @param {vec2} a The first operand
 * @param {vec2} b The second operand
 * @returns {Number} The angle in radians
 */
function angle(a, b) {
  var x1 = a[0],
      y1 = a[1],
      x2 = b[0],
      y2 = b[1];

  var len1 = x1 * x1 + y1 * y1;
  if (len1 > 0) {
    //TODO: evaluate use of glm_invsqrt here?
    len1 = 1 / Math.sqrt(len1);
  }

  var len2 = x2 * x2 + y2 * y2;
  if (len2 > 0) {
    //TODO: evaluate use of glm_invsqrt here?
    len2 = 1 / Math.sqrt(len2);
  }

  var cosine = (x1 * x2 + y1 * y2) * len1 * len2;

  if (cosine > 1.0) {
    return 0;
  } else if (cosine < -1.0) {
    return Math.PI;
  } else {
    return Math.acos(cosine);
  }
}

/**
 * Returns a string representation of a vector
 *
 * @param {vec2} a vector to represent as a string
 * @returns {String} string representation of the vector
 */
function str(a) {
  return 'vec2(' + a[0] + ', ' + a[1] + ')';
}

/**
 * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)
 *
 * @param {vec2} a The first vector.
 * @param {vec2} b The second vector.
 * @returns {Boolean} True if the vectors are equal, false otherwise.
 */
function exactEquals(a, b) {
  return a[0] === b[0] && a[1] === b[1];
}

/**
 * Returns whether or not the vectors have approximately the same elements in the same position.
 *
 * @param {vec2} a The first vector.
 * @param {vec2} b The second vector.
 * @returns {Boolean} True if the vectors are equal, false otherwise.
 */
function equals(a, b) {
  var a0 = a[0],
      a1 = a[1];
  var b0 = b[0],
      b1 = b[1];
  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));
}

/**
 * Alias for {@link vec2.length}
 * @function
 */
var len = exports.len = length;

/**
 * Alias for {@link vec2.subtract}
 * @function
 */
var sub = exports.sub = subtract;

/**
 * Alias for {@link vec2.multiply}
 * @function
 */
var mul = exports.mul = multiply;

/**
 * Alias for {@link vec2.divide}
 * @function
 */
var div = exports.div = divide;

/**
 * Alias for {@link vec2.distance}
 * @function
 */
var dist = exports.dist = distance;

/**
 * Alias for {@link vec2.squaredDistance}
 * @function
 */
var sqrDist = exports.sqrDist = squaredDistance;

/**
 * Alias for {@link vec2.squaredLength}
 * @function
 */
var sqrLen = exports.sqrLen = squaredLength;

/**
 * Perform some operation over an array of vec2s.
 *
 * @param {Array} a the array of vectors to iterate over
 * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed
 * @param {Number} offset Number of elements to skip at the beginning of the array
 * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array
 * @param {Function} fn Function to call for each vector in the array
 * @param {Object} [arg] additional argument to pass to fn
 * @returns {Array} a
 * @function
 */
var forEach = exports.forEach = function () {
  var vec = create();

  return function (a, stride, offset, count, fn, arg) {
    var i = void 0,
        l = void 0;
    if (!stride) {
      stride = 2;
    }

    if (!offset) {
      offset = 0;
    }

    if (count) {
      l = Math.min(count * stride + offset, a.length);
    } else {
      l = a.length;
    }

    for (i = offset; i < l; i += stride) {
      vec[0] = a[i];vec[1] = a[i + 1];
      fn(vec, vec, arg);
      a[i] = vec[0];a[i + 1] = vec[1];
    }

    return a;
  };
}();

/***/ }),

/***/ "ff8d":
/***/ (function(module, exports, __webpack_require__) {

var asciiToArray = __webpack_require__("c2f6"),
    hasUnicode = __webpack_require__("026b"),
    unicodeToArray = __webpack_require__("b9b2");

/**
 * Converts `string` to an array.
 *
 * @private
 * @param {string} string The string to convert.
 * @returns {Array} Returns the converted array.
 */
function stringToArray(string) {
  return hasUnicode(string)
    ? unicodeToArray(string)
    : asciiToArray(string);
}

module.exports = stringToArray;


/***/ })

/******/ });
});
//# sourceMappingURL=vue-flowchart-editor.umd.js.map